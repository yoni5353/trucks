import{c as Mi,S as D$,p as gx,r as zi,s as C_,a as Rl,n as T_,i as R_,b as vx,t as A$,d as su,f as M$,e as k$,g as yx,h as IA,j as S,k as N$,u as OA,l as I,m as Fb,o as L$,R as $b,q as Gi}from"./index-qhzyknrn.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],_x=Mi("bot",F$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $$=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],j$=Mi("copy",$$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],G$=Mi("crosshair",z$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],W$=Mi("download",q$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],B$=Mi("eye",Y$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],U$=Mi("grip-vertical",H$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],X$=Mi("info",V$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Z$=Mi("map-pin",K$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],J$=Mi("panel-left",Q$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],tj=Mi("trending-up",ej);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["path",{d:"M14 19V7a2 2 0 0 0-2-2H9",key:"15peso"}],["path",{d:"M15 19H9",key:"18q6dt"}],["path",{d:"M19 19h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.62L18.3 9.38a1 1 0 0 0-.78-.38H14",key:"1dkp3j"}],["path",{d:"M2 13v5a1 1 0 0 0 1 1h2",key:"pkmmzz"}],["path",{d:"M4 3 2.15 5.15a.495.495 0 0 0 .35.86h2.15a.47.47 0 0 1 .35.86L3 9.02",key:"1n26pd"}],["circle",{cx:"17",cy:"19",r:"2",key:"1nxcgd"}],["circle",{cx:"7",cy:"19",r:"2",key:"gzo7y7"}]],nj=Mi("truck-electric",ij);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],sj=Mi("x",rj);var oj=class extends D${constructor(i,e){super(),this.options=e,this.#i=i,this.#r=null,this.#n=gx(),this.bindMethods(),this.setOptions(e)}#i;#e=void 0;#p=void 0;#t=void 0;#o;#u;#n;#r;#m;#h;#d;#a;#l;#s;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),bx(this.#e,this.options)?this.#c():this.updateResult(),this.#_())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return I_(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return I_(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#e.removeObserver(this)}setOptions(i){const e=this.options,t=this.#e;if(this.options=this.#i.defaultQueryOptions(i),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof zi(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#e.setOptions(this.options),e._defaulted&&!C_(this.options,e)&&this.#i.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const n=this.hasListeners();n&&wx(this.#e,t,this.options,e)&&this.#c(),this.updateResult(),n&&(this.#e!==t||zi(this.options.enabled,this.#e)!==zi(e.enabled,this.#e)||Rl(this.options.staleTime,this.#e)!==Rl(e.staleTime,this.#e))&&this.#g();const r=this.#v();n&&(this.#e!==t||zi(this.options.enabled,this.#e)!==zi(e.enabled,this.#e)||r!==this.#s)&&this.#y(r)}getOptimisticResult(i){const e=this.#i.getQueryCache().build(this.#i,i),t=this.createResult(e,i);return lj(this,t)&&(this.#t=t,this.#u=this.options,this.#o=this.#e.state),t}getCurrentResult(){return this.#t}trackResult(i,e){return new Proxy(i,{get:(t,n)=>(this.trackProp(n),e?.(n),n==="promise"&&!this.options.experimental_prefetchInRender&&this.#n.status==="pending"&&this.#n.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(t,n))})}trackProp(i){this.#f.add(i)}getCurrentQuery(){return this.#e}refetch({...i}={}){return this.fetch({...i})}fetchOptimistic(i){const e=this.#i.defaultQueryOptions(i),t=this.#i.getQueryCache().build(this.#i,e);return t.fetch().then(()=>this.createResult(t,e))}fetch(i){return this.#c({...i,cancelRefetch:i.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#c(i){this.#x();let e=this.#e.fetch(this.options,i);return i?.throwOnError||(e=e.catch(T_)),e}#g(){this.#b();const i=Rl(this.options.staleTime,this.#e);if(R_||this.#t.isStale||!vx(i))return;const t=A$(this.#t.dataUpdatedAt,i)+1;this.#a=su.setTimeout(()=>{this.#t.isStale||this.updateResult()},t)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#y(i){this.#w(),this.#s=i,!(R_||zi(this.options.enabled,this.#e)===!1||!vx(this.#s)||this.#s===0)&&(this.#l=su.setInterval(()=>{(this.options.refetchIntervalInBackground||M$.isFocused())&&this.#c()},this.#s))}#_(){this.#g(),this.#y(this.#v())}#b(){this.#a&&(su.clearTimeout(this.#a),this.#a=void 0)}#w(){this.#l&&(su.clearInterval(this.#l),this.#l=void 0)}createResult(i,e){const t=this.#e,n=this.options,r=this.#t,s=this.#o,o=this.#u,l=i!==t?i.state:this.#p,{state:c}=i;let u={...c},h=!1,d;if(e._optimisticResults){const x=this.hasListeners(),T=!x&&bx(i,e),O=x&&wx(i,t,e,n);(T||O)&&(u={...u,...k$(c.data,i.options)}),e._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:f,errorUpdatedAt:p,status:m}=u;d=u.data;let g=!1;if(e.placeholderData!==void 0&&d===void 0&&m==="pending"){let x;r?.isPlaceholderData&&e.placeholderData===o?.placeholderData?(x=r.data,g=!0):x=typeof e.placeholderData=="function"?e.placeholderData(this.#d?.state.data,this.#d):e.placeholderData,x!==void 0&&(m="success",d=yx(r?.data,x,e),h=!0)}if(e.select&&d!==void 0&&!g)if(r&&d===s?.data&&e.select===this.#m)d=this.#h;else try{this.#m=e.select,d=e.select(d),d=yx(r?.data,d,e),this.#h=d,this.#r=null}catch(x){this.#r=x}this.#r&&(f=this.#r,d=this.#h,p=Date.now(),m="error");const v=u.fetchStatus==="fetching",y=m==="pending",b=m==="error",_=y&&v,w=d!==void 0,E={status:m,fetchStatus:u.fetchStatus,isPending:y,isSuccess:m==="success",isError:b,isInitialLoading:_,isLoading:_,data:d,dataUpdatedAt:u.dataUpdatedAt,error:f,errorUpdatedAt:p,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>l.dataUpdateCount||u.errorUpdateCount>l.errorUpdateCount,isFetching:v,isRefetching:v&&!y,isLoadingError:b&&!w,isPaused:u.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:b&&w,isStale:jb(i,e),refetch:this.refetch,promise:this.#n,isEnabled:zi(e.enabled,i)!==!1};if(this.options.experimental_prefetchInRender){const x=D=>{E.status==="error"?D.reject(E.error):E.data!==void 0&&D.resolve(E.data)},T=()=>{const D=this.#n=E.promise=gx();x(D)},O=this.#n;switch(O.status){case"pending":i.queryHash===t.queryHash&&x(O);break;case"fulfilled":(E.status==="error"||E.data!==O.value)&&T();break;case"rejected":(E.status!=="error"||E.error!==O.reason)&&T();break}}return E}updateResult(){const i=this.#t,e=this.createResult(this.#e,this.options);if(this.#o=this.#e.state,this.#u=this.options,this.#o.data!==void 0&&(this.#d=this.#e),C_(e,i))return;this.#t=e;const t=()=>{if(!i)return!0;const{notifyOnChangeProps:n}=this.options,r=typeof n=="function"?n():n;if(r==="all"||!r&&!this.#f.size)return!0;const s=new Set(r??this.#f);return this.options.throwOnError&&s.add("error"),Object.keys(this.#t).some(o=>{const a=o;return this.#t[a]!==i[a]&&s.has(a)})};this.#S({listeners:t()})}#x(){const i=this.#i.getQueryCache().build(this.#i,this.options);if(i===this.#e)return;const e=this.#e;this.#e=i,this.#p=i.state,this.hasListeners()&&(e?.removeObserver(this),i.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#_()}#S(i){IA.batch(()=>{i.listeners&&this.listeners.forEach(e=>{e(this.#t)}),this.#i.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function aj(i,e){return zi(e.enabled,i)!==!1&&i.state.data===void 0&&!(i.state.status==="error"&&e.retryOnMount===!1)}function bx(i,e){return aj(i,e)||i.state.data!==void 0&&I_(i,e,e.refetchOnMount)}function I_(i,e,t){if(zi(e.enabled,i)!==!1&&Rl(e.staleTime,i)!=="static"){const n=typeof t=="function"?t(i):t;return n==="always"||n!==!1&&jb(i,e)}return!1}function wx(i,e,t,n){return(i!==e||zi(n.enabled,i)===!1)&&(!t.suspense||i.state.status!=="error")&&jb(i,t)}function jb(i,e){return zi(e.enabled,i)!==!1&&i.isStaleByTime(Rl(e.staleTime,i))}function lj(i,e){return!C_(i.getCurrentResult(),e)}var PA=S.createContext(!1),cj=()=>S.useContext(PA);PA.Provider;function uj(){let i=!1;return{clearReset:()=>{i=!1},reset:()=>{i=!0},isReset:()=>i}}var hj=S.createContext(uj()),dj=()=>S.useContext(hj),fj=(i,e)=>{(i.suspense||i.throwOnError||i.experimental_prefetchInRender)&&(e.isReset()||(i.retryOnMount=!1))},pj=i=>{S.useEffect(()=>{i.clearReset()},[i])},mj=({result:i,errorResetBoundary:e,throwOnError:t,query:n,suspense:r})=>i.isError&&!e.isReset()&&!i.isFetching&&n&&(r&&i.data===void 0||N$(t,[i.error,n])),gj=i=>{if(i.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),n=i.staleTime;i.staleTime=typeof n=="function"?(...r)=>t(n(...r)):t(n),typeof i.gcTime=="number"&&(i.gcTime=Math.max(i.gcTime,1e3))}},vj=(i,e)=>i.isLoading&&i.isFetching&&!e,yj=(i,e)=>i?.suspense&&e.isPending,xx=(i,e,t)=>e.fetchOptimistic(i).catch(()=>{t.clearReset()});function _j(i,e,t){const n=cj(),r=dj(),s=OA(),o=s.defaultQueryOptions(i);s.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=n?"isRestoring":"optimistic",gj(o),fj(o,r),pj(r);const a=!s.getQueryCache().get(o.queryHash),[l]=S.useState(()=>new e(s,o)),c=l.getOptimisticResult(o),u=!n&&i.subscribed!==!1;if(S.useSyncExternalStore(S.useCallback(h=>{const d=u?l.subscribe(IA.batchCalls(h)):T_;return l.updateResult(),d},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),S.useEffect(()=>{l.setOptions(o)},[o,l]),yj(o,c))throw xx(o,l,r);if(mj({result:c,errorResetBoundary:r,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(o,c),o.experimental_prefetchInRender&&!R_&&vj(c,n)&&(a?xx(o,l,r):s.getQueryCache().get(o.queryHash)?.promise)?.catch(T_).finally(()=>{l.updateResult()}),o.notifyOnChangeProps?c:l.trackResult(c)}function DA(i,e){return _j(i,oj)}function Sx(i,e){if(typeof i=="function")return i(e);i!=null&&(i.current=e)}function AA(...i){return e=>{let t=!1;const n=i.map(r=>{const s=Sx(r,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let r=0;r<n.length;r++){const s=n[r];typeof s=="function"?s():Sx(i[r],null)}}}}function ii(...i){return S.useCallback(AA(...i),i)}function jl(i){const e=bj(i),t=S.forwardRef((n,r)=>{const{children:s,...o}=n,a=S.Children.toArray(s),l=a.find(xj);if(l){const c=l.props.children,u=a.map(h=>h===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:h);return I.jsx(e,{...o,ref:r,children:S.isValidElement(c)?S.cloneElement(c,void 0,u):null})}return I.jsx(e,{...o,ref:r,children:s})});return t.displayName=`${i}.Slot`,t}var Ta=jl("Slot");function bj(i){const e=S.forwardRef((t,n)=>{const{children:r,...s}=t;if(S.isValidElement(r)){const o=Ej(r),a=Sj(s,r.props);return r.type!==S.Fragment&&(a.ref=n?AA(n,o):o),S.cloneElement(r,a)}return S.Children.count(r)>1?S.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var MA=Symbol("radix.slottable");function wj(i){const e=({children:t})=>I.jsx(I.Fragment,{children:t});return e.displayName=`${i}.Slottable`,e.__radixId=MA,e}function xj(i){return S.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===MA}function Sj(i,e){const t={...e};for(const n in e){const r=i[n],s=e[n];/^on[A-Z]/.test(n)?r&&s?t[n]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(t[n]=r):n==="style"?t[n]={...r,...s}:n==="className"&&(t[n]=[r,s].filter(Boolean).join(" "))}return{...i,...t}}function Ej(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}function kA(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var r=i.length;for(e=0;e<r;e++)i[e]&&(t=kA(i[e]))&&(n&&(n+=" "),n+=t)}else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function NA(){for(var i,e,t=0,n="",r=arguments.length;t<r;t++)(i=arguments[t])&&(e=kA(i))&&(n&&(n+=" "),n+=e);return n}const Ex=i=>typeof i=="boolean"?`${i}`:i===0?"0":i,Cx=NA,zb=(i,e)=>t=>{var n;if(e?.variants==null)return Cx(i,t?.class,t?.className);const{variants:r,defaultVariants:s}=e,o=Object.keys(r).map(c=>{const u=t?.[c],h=s?.[c];if(u===null)return null;const d=Ex(u)||Ex(h);return r[c][d]}),a=t&&Object.entries(t).reduce((c,u)=>{let[h,d]=u;return d===void 0||(c[h]=d),c},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:h,className:d,...f}=u;return Object.entries(f).every(p=>{let[m,g]=p;return Array.isArray(g)?g.includes({...s,...a}[m]):{...s,...a}[m]===g})?[...c,h,d]:c},[]);return Cx(i,o,l,t?.class,t?.className)},nf=768;function Cj(){const[i,e]=S.useState(void 0);return S.useEffect(()=>{const t=window.matchMedia(`(max-width: ${nf-1}px)`),n=()=>{e(window.innerWidth<nf)};return t.addEventListener("change",n),e(window.innerWidth<nf),()=>t.removeEventListener("change",n)},[]),!!i}const Gb="-",Tj=i=>{const e=Ij(i),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=i;return{getClassGroupId:o=>{const a=o.split(Gb);return a[0]===""&&a.length!==1&&a.shift(),LA(a,e)||Rj(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&n[o]?[...l,...n[o]]:l}}},LA=(i,e)=>{if(i.length===0)return e.classGroupId;const t=i[0],n=e.nextPart.get(t),r=n?LA(i.slice(1),n):void 0;if(r)return r;if(e.validators.length===0)return;const s=i.join(Gb);return e.validators.find(({validator:o})=>o(s))?.classGroupId},Tx=/^\[(.+)\]$/,Rj=i=>{if(Tx.test(i)){const e=Tx.exec(i)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Ij=i=>{const{theme:e,classGroups:t}=i,n={nextPart:new Map,validators:[]};for(const r in t)O_(t[r],n,r,e);return n},O_=(i,e,t,n)=>{i.forEach(r=>{if(typeof r=="string"){const s=r===""?e:Rx(e,r);s.classGroupId=t;return}if(typeof r=="function"){if(Oj(r)){O_(r(n),e,t,n);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([s,o])=>{O_(o,Rx(e,s),t,n)})})},Rx=(i,e)=>{let t=i;return e.split(Gb).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},Oj=i=>i.isThemeGetter,Pj=i=>{if(i<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const r=(s,o)=>{t.set(s,o),e++,e>i&&(e=0,n=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=n.get(s))!==void 0)return r(s,o),o},set(s,o){t.has(s)?t.set(s,o):r(s,o)}}},P_="!",D_=":",Dj=D_.length,Aj=i=>{const{prefix:e,experimentalParseClassName:t}=i;let n=r=>{const s=[];let o=0,a=0,l=0,c;for(let p=0;p<r.length;p++){let m=r[p];if(o===0&&a===0){if(m===D_){s.push(r.slice(l,p)),l=p+Dj;continue}if(m==="/"){c=p;continue}}m==="["?o++:m==="]"?o--:m==="("?a++:m===")"&&a--}const u=s.length===0?r:r.substring(l),h=Mj(u),d=h!==u,f=c&&c>l?c-l:void 0;return{modifiers:s,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:f}};if(e){const r=e+D_,s=n;n=o=>o.startsWith(r)?s(o.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(t){const r=n;n=s=>t({className:s,parseClassName:r})}return n},Mj=i=>i.endsWith(P_)?i.substring(0,i.length-1):i.startsWith(P_)?i.substring(1):i,kj=i=>{const e=Object.fromEntries(i.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const r=[];let s=[];return n.forEach(o=>{o[0]==="["||e[o]?(r.push(...s.sort(),o),s=[]):s.push(o)}),r.push(...s.sort()),r}},Nj=i=>({cache:Pj(i.cacheSize),parseClassName:Aj(i),sortModifiers:kj(i),...Tj(i)}),Lj=/\s+/,Fj=(i,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:r,sortModifiers:s}=e,o=[],a=i.trim().split(Lj);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:h,modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(u);if(h){l=u+(l.length>0?" "+l:l);continue}let g=!!m,v=n(g?p.substring(0,m):p);if(!v){if(!g){l=u+(l.length>0?" "+l:l);continue}if(v=n(p),!v){l=u+(l.length>0?" "+l:l);continue}g=!1}const y=s(d).join(":"),b=f?y+P_:y,_=b+v;if(o.includes(_))continue;o.push(_);const w=r(v,g);for(let C=0;C<w.length;++C){const E=w[C];o.push(b+E)}l=u+(l.length>0?" "+l:l)}return l};function $j(){let i=0,e,t,n="";for(;i<arguments.length;)(e=arguments[i++])&&(t=FA(e))&&(n&&(n+=" "),n+=t);return n}const FA=i=>{if(typeof i=="string")return i;let e,t="";for(let n=0;n<i.length;n++)i[n]&&(e=FA(i[n]))&&(t&&(t+=" "),t+=e);return t};function jj(i,...e){let t,n,r,s=o;function o(l){const c=e.reduce((u,h)=>h(u),i());return t=Nj(c),n=t.cache.get,r=t.cache.set,s=a,a(l)}function a(l){const c=n(l);if(c)return c;const u=Fj(l,t);return r(l,u),u}return function(){return s($j.apply(null,arguments))}}const vt=i=>{const e=t=>t[i]||[];return e.isThemeGetter=!0,e},$A=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,jA=/^\((?:(\w[\w-]*):)?(.+)\)$/i,zj=/^\d+\/\d+$/,Gj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,qj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Wj=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Yj=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Bj=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,lo=i=>zj.test(i),ye=i=>!!i&&!Number.isNaN(Number(i)),_r=i=>!!i&&Number.isInteger(Number(i)),rf=i=>i.endsWith("%")&&ye(i.slice(0,-1)),Mn=i=>Gj.test(i),Hj=()=>!0,Uj=i=>qj.test(i)&&!Wj.test(i),zA=()=>!1,Vj=i=>Yj.test(i),Xj=i=>Bj.test(i),Kj=i=>!Z(i)&&!Q(i),Zj=i=>Ra(i,WA,zA),Z=i=>$A.test(i),rs=i=>Ra(i,YA,Uj),sf=i=>Ra(i,iz,ye),Ix=i=>Ra(i,GA,zA),Qj=i=>Ra(i,qA,Xj),ou=i=>Ra(i,BA,Vj),Q=i=>jA.test(i),sl=i=>Ia(i,YA),Jj=i=>Ia(i,nz),Ox=i=>Ia(i,GA),ez=i=>Ia(i,WA),tz=i=>Ia(i,qA),au=i=>Ia(i,BA,!0),Ra=(i,e,t)=>{const n=$A.exec(i);return n?n[1]?e(n[1]):t(n[2]):!1},Ia=(i,e,t=!1)=>{const n=jA.exec(i);return n?n[1]?e(n[1]):t:!1},GA=i=>i==="position"||i==="percentage",qA=i=>i==="image"||i==="url",WA=i=>i==="length"||i==="size"||i==="bg-size",YA=i=>i==="length",iz=i=>i==="number",nz=i=>i==="family-name",BA=i=>i==="shadow",rz=()=>{const i=vt("color"),e=vt("font"),t=vt("text"),n=vt("font-weight"),r=vt("tracking"),s=vt("leading"),o=vt("breakpoint"),a=vt("container"),l=vt("spacing"),c=vt("radius"),u=vt("shadow"),h=vt("inset-shadow"),d=vt("text-shadow"),f=vt("drop-shadow"),p=vt("blur"),m=vt("perspective"),g=vt("aspect"),v=vt("ease"),y=vt("animate"),b=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],w=()=>[..._(),Q,Z],C=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],x=()=>[Q,Z,l],T=()=>[lo,"full","auto",...x()],O=()=>[_r,"none","subgrid",Q,Z],D=()=>["auto",{span:["full",_r,Q,Z]},_r,Q,Z],A=()=>[_r,"auto",Q,Z],k=()=>["auto","min","max","fr",Q,Z],N=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],z=()=>["start","end","center","stretch","center-safe","end-safe"],M=()=>["auto",...x()],$=()=>[lo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],P=()=>[i,Q,Z],G=()=>[..._(),Ox,Ix,{position:[Q,Z]}],V=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",ez,Zj,{size:[Q,Z]}],L=()=>[rf,sl,rs],j=()=>["","none","full",c,Q,Z],W=()=>["",ye,sl,rs],H=()=>["solid","dashed","dotted","double"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>[ye,rf,Ox,Ix],J=()=>["","none",p,Q,Z],ne=()=>["none",ye,Q,Z],oe=()=>["none",ye,Q,Z],Ye=()=>[ye,Q,Z],Ve=()=>[lo,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Mn],breakpoint:[Mn],color:[Hj],container:[Mn],"drop-shadow":[Mn],ease:["in","out","in-out"],font:[Kj],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Mn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Mn],shadow:[Mn],spacing:["px",ye],text:[Mn],"text-shadow":[Mn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",lo,Z,Q,g]}],container:["container"],columns:[{columns:[ye,Z,Q,a]}],"break-after":[{"break-after":b()}],"break-before":[{"break-before":b()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:w()}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:T()}],"inset-x":[{"inset-x":T()}],"inset-y":[{"inset-y":T()}],start:[{start:T()}],end:[{end:T()}],top:[{top:T()}],right:[{right:T()}],bottom:[{bottom:T()}],left:[{left:T()}],visibility:["visible","invisible","collapse"],z:[{z:[_r,"auto",Q,Z]}],basis:[{basis:[lo,"full","auto",a,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ye,lo,"auto","initial","none",Z]}],grow:[{grow:["",ye,Q,Z]}],shrink:[{shrink:["",ye,Q,Z]}],order:[{order:[_r,"first","last","none",Q,Z]}],"grid-cols":[{"grid-cols":O()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":O()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":k()}],"auto-rows":[{"auto-rows":k()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:[...N(),"normal"]}],"justify-items":[{"justify-items":[...z(),"normal"]}],"justify-self":[{"justify-self":["auto",...z()]}],"align-content":[{content:["normal",...N()]}],"align-items":[{items:[...z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...z(),{baseline:["","last"]}]}],"place-content":[{"place-content":N()}],"place-items":[{"place-items":[...z(),"baseline"]}],"place-self":[{"place-self":["auto",...z()]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:M()}],mx:[{mx:M()}],my:[{my:M()}],ms:[{ms:M()}],me:[{me:M()}],mt:[{mt:M()}],mr:[{mr:M()}],mb:[{mb:M()}],ml:[{ml:M()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:$()}],w:[{w:[a,"screen",...$()]}],"min-w":[{"min-w":[a,"screen","none",...$()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...$()]}],h:[{h:["screen","lh",...$()]}],"min-h":[{"min-h":["screen","lh","none",...$()]}],"max-h":[{"max-h":["screen","lh",...$()]}],"font-size":[{text:["base",t,sl,rs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Q,sf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",rf,Z]}],"font-family":[{font:[Jj,Z,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,Q,Z]}],"line-clamp":[{"line-clamp":[ye,"none",Q,sf]}],leading:[{leading:[s,...x()]}],"list-image":[{"list-image":["none",Q,Z]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Q,Z]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:P()}],"text-color":[{text:P()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:[ye,"from-font","auto",Q,rs]}],"text-decoration-color":[{decoration:P()}],"underline-offset":[{"underline-offset":[ye,"auto",Q,Z]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Q,Z]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Q,Z]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:G()}],"bg-repeat":[{bg:V()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},_r,Q,Z],radial:["",Q,Z],conic:[_r,Q,Z]},tz,Qj]}],"bg-color":[{bg:P()}],"gradient-from-pos":[{from:L()}],"gradient-via-pos":[{via:L()}],"gradient-to-pos":[{to:L()}],"gradient-from":[{from:P()}],"gradient-via":[{via:P()}],"gradient-to":[{to:P()}],rounded:[{rounded:j()}],"rounded-s":[{"rounded-s":j()}],"rounded-e":[{"rounded-e":j()}],"rounded-t":[{"rounded-t":j()}],"rounded-r":[{"rounded-r":j()}],"rounded-b":[{"rounded-b":j()}],"rounded-l":[{"rounded-l":j()}],"rounded-ss":[{"rounded-ss":j()}],"rounded-se":[{"rounded-se":j()}],"rounded-ee":[{"rounded-ee":j()}],"rounded-es":[{"rounded-es":j()}],"rounded-tl":[{"rounded-tl":j()}],"rounded-tr":[{"rounded-tr":j()}],"rounded-br":[{"rounded-br":j()}],"rounded-bl":[{"rounded-bl":j()}],"border-w":[{border:W()}],"border-w-x":[{"border-x":W()}],"border-w-y":[{"border-y":W()}],"border-w-s":[{"border-s":W()}],"border-w-e":[{"border-e":W()}],"border-w-t":[{"border-t":W()}],"border-w-r":[{"border-r":W()}],"border-w-b":[{"border-b":W()}],"border-w-l":[{"border-l":W()}],"divide-x":[{"divide-x":W()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":W()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...H(),"hidden","none"]}],"divide-style":[{divide:[...H(),"hidden","none"]}],"border-color":[{border:P()}],"border-color-x":[{"border-x":P()}],"border-color-y":[{"border-y":P()}],"border-color-s":[{"border-s":P()}],"border-color-e":[{"border-e":P()}],"border-color-t":[{"border-t":P()}],"border-color-r":[{"border-r":P()}],"border-color-b":[{"border-b":P()}],"border-color-l":[{"border-l":P()}],"divide-color":[{divide:P()}],"outline-style":[{outline:[...H(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ye,Q,Z]}],"outline-w":[{outline:["",ye,sl,rs]}],"outline-color":[{outline:P()}],shadow:[{shadow:["","none",u,au,ou]}],"shadow-color":[{shadow:P()}],"inset-shadow":[{"inset-shadow":["none",h,au,ou]}],"inset-shadow-color":[{"inset-shadow":P()}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:P()}],"ring-offset-w":[{"ring-offset":[ye,rs]}],"ring-offset-color":[{"ring-offset":P()}],"inset-ring-w":[{"inset-ring":W()}],"inset-ring-color":[{"inset-ring":P()}],"text-shadow":[{"text-shadow":["none",d,au,ou]}],"text-shadow-color":[{"text-shadow":P()}],opacity:[{opacity:[ye,Q,Z]}],"mix-blend":[{"mix-blend":[...U(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":U()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ye]}],"mask-image-linear-from-pos":[{"mask-linear-from":q()}],"mask-image-linear-to-pos":[{"mask-linear-to":q()}],"mask-image-linear-from-color":[{"mask-linear-from":P()}],"mask-image-linear-to-color":[{"mask-linear-to":P()}],"mask-image-t-from-pos":[{"mask-t-from":q()}],"mask-image-t-to-pos":[{"mask-t-to":q()}],"mask-image-t-from-color":[{"mask-t-from":P()}],"mask-image-t-to-color":[{"mask-t-to":P()}],"mask-image-r-from-pos":[{"mask-r-from":q()}],"mask-image-r-to-pos":[{"mask-r-to":q()}],"mask-image-r-from-color":[{"mask-r-from":P()}],"mask-image-r-to-color":[{"mask-r-to":P()}],"mask-image-b-from-pos":[{"mask-b-from":q()}],"mask-image-b-to-pos":[{"mask-b-to":q()}],"mask-image-b-from-color":[{"mask-b-from":P()}],"mask-image-b-to-color":[{"mask-b-to":P()}],"mask-image-l-from-pos":[{"mask-l-from":q()}],"mask-image-l-to-pos":[{"mask-l-to":q()}],"mask-image-l-from-color":[{"mask-l-from":P()}],"mask-image-l-to-color":[{"mask-l-to":P()}],"mask-image-x-from-pos":[{"mask-x-from":q()}],"mask-image-x-to-pos":[{"mask-x-to":q()}],"mask-image-x-from-color":[{"mask-x-from":P()}],"mask-image-x-to-color":[{"mask-x-to":P()}],"mask-image-y-from-pos":[{"mask-y-from":q()}],"mask-image-y-to-pos":[{"mask-y-to":q()}],"mask-image-y-from-color":[{"mask-y-from":P()}],"mask-image-y-to-color":[{"mask-y-to":P()}],"mask-image-radial":[{"mask-radial":[Q,Z]}],"mask-image-radial-from-pos":[{"mask-radial-from":q()}],"mask-image-radial-to-pos":[{"mask-radial-to":q()}],"mask-image-radial-from-color":[{"mask-radial-from":P()}],"mask-image-radial-to-color":[{"mask-radial-to":P()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_()}],"mask-image-conic-pos":[{"mask-conic":[ye]}],"mask-image-conic-from-pos":[{"mask-conic-from":q()}],"mask-image-conic-to-pos":[{"mask-conic-to":q()}],"mask-image-conic-from-color":[{"mask-conic-from":P()}],"mask-image-conic-to-color":[{"mask-conic-to":P()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:G()}],"mask-repeat":[{mask:V()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Q,Z]}],filter:[{filter:["","none",Q,Z]}],blur:[{blur:J()}],brightness:[{brightness:[ye,Q,Z]}],contrast:[{contrast:[ye,Q,Z]}],"drop-shadow":[{"drop-shadow":["","none",f,au,ou]}],"drop-shadow-color":[{"drop-shadow":P()}],grayscale:[{grayscale:["",ye,Q,Z]}],"hue-rotate":[{"hue-rotate":[ye,Q,Z]}],invert:[{invert:["",ye,Q,Z]}],saturate:[{saturate:[ye,Q,Z]}],sepia:[{sepia:["",ye,Q,Z]}],"backdrop-filter":[{"backdrop-filter":["","none",Q,Z]}],"backdrop-blur":[{"backdrop-blur":J()}],"backdrop-brightness":[{"backdrop-brightness":[ye,Q,Z]}],"backdrop-contrast":[{"backdrop-contrast":[ye,Q,Z]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ye,Q,Z]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ye,Q,Z]}],"backdrop-invert":[{"backdrop-invert":["",ye,Q,Z]}],"backdrop-opacity":[{"backdrop-opacity":[ye,Q,Z]}],"backdrop-saturate":[{"backdrop-saturate":[ye,Q,Z]}],"backdrop-sepia":[{"backdrop-sepia":["",ye,Q,Z]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Q,Z]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ye,"initial",Q,Z]}],ease:[{ease:["linear","initial",v,Q,Z]}],delay:[{delay:[ye,Q,Z]}],animate:[{animate:["none",y,Q,Z]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,Q,Z]}],"perspective-origin":[{"perspective-origin":w()}],rotate:[{rotate:ne()}],"rotate-x":[{"rotate-x":ne()}],"rotate-y":[{"rotate-y":ne()}],"rotate-z":[{"rotate-z":ne()}],scale:[{scale:oe()}],"scale-x":[{"scale-x":oe()}],"scale-y":[{"scale-y":oe()}],"scale-z":[{"scale-z":oe()}],"scale-3d":["scale-3d"],skew:[{skew:Ye()}],"skew-x":[{"skew-x":Ye()}],"skew-y":[{"skew-y":Ye()}],transform:[{transform:[Q,Z,"","none","gpu","cpu"]}],"transform-origin":[{origin:w()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ve()}],"translate-x":[{"translate-x":Ve()}],"translate-y":[{"translate-y":Ve()}],"translate-z":[{"translate-z":Ve()}],"translate-none":["translate-none"],accent:[{accent:P()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:P()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Q,Z]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Q,Z]}],fill:[{fill:["none",...P()]}],"stroke-w":[{stroke:[ye,sl,rs,sf]}],stroke:[{stroke:["none",...P()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},sz=jj(rz);function pe(...i){return sz(NA(i))}function oz(i,e){return i.length===e.length&&i.every(t=>e.includes(t))}const az=zb("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Bo=S.forwardRef(({className:i,variant:e,size:t,asChild:n=!1,...r},s)=>{const o=n?Ta:"button";return I.jsx(o,{className:pe(az({variant:e,size:t,className:i})),ref:s,...r})});Bo.displayName="Button";const HA=S.forwardRef(({className:i,type:e,...t},n)=>I.jsx("input",{type:e,className:pe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",i),ref:n,...t}));HA.displayName="Input";var qb=L$();const lz=Fb(qb);var cz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ut=cz.reduce((i,e)=>{const t=jl(`Primitive.${e}`),n=S.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),I.jsx(l,{...a,ref:s})});return n.displayName=`Primitive.${e}`,{...i,[e]:n}},{});function uz(i,e){i&&qb.flushSync(()=>i.dispatchEvent(e))}var hz="Separator",Px="horizontal",dz=["horizontal","vertical"],UA=S.forwardRef((i,e)=>{const{decorative:t,orientation:n=Px,...r}=i,s=fz(n)?n:Px,a=t?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return I.jsx(ut.div,{"data-orientation":s,...a,...r,ref:e})});UA.displayName=hz;function fz(i){return dz.includes(i)}var VA=UA;const XA=S.forwardRef(({className:i,orientation:e="horizontal",decorative:t=!0,...n},r)=>I.jsx(VA,{ref:r,decorative:t,orientation:e,className:pe("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",i),...n}));XA.displayName=VA.displayName;function tt(i,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(i?.(r),t===!1||!r.defaultPrevented)return e?.(r)}}function pz(i,e){const t=S.createContext(e),n=s=>{const{children:o,...a}=s,l=S.useMemo(()=>a,Object.values(a));return I.jsx(t.Provider,{value:l,children:o})};n.displayName=i+"Provider";function r(s){const o=S.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${i}\``)}return[n,r]}function Oa(i,e=[]){let t=[];function n(s,o){const a=S.createContext(o),l=t.length;t=[...t,o];const c=h=>{const{scope:d,children:f,...p}=h,m=d?.[i]?.[l]||a,g=S.useMemo(()=>p,Object.values(p));return I.jsx(m.Provider,{value:g,children:f})};c.displayName=s+"Provider";function u(h,d){const f=d?.[i]?.[l]||a,p=S.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=t.map(o=>S.createContext(o));return function(a){const l=a?.[i]||s;return S.useMemo(()=>({[`__scope${i}`]:{...a,[i]:l}}),[a,l])}};return r.scopeName=i,[n,mz(r,...e)]}function mz(...i){const e=i[0];if(i.length===1)return e;const t=()=>{const n=i.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=n.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var qr=globalThis?.document?S.useLayoutEffect:()=>{},gz=$b[" useId ".trim().toString()]||(()=>{}),vz=0;function Ho(i){const[e,t]=S.useState(gz());return qr(()=>{t(n=>n??String(vz++))},[i]),i||(e?`radix-${e}`:"")}var yz=$b[" useInsertionEffect ".trim().toString()]||qr;function $h({prop:i,defaultProp:e,onChange:t=()=>{},caller:n}){const[r,s,o]=_z({defaultProp:e,onChange:t}),a=i!==void 0,l=a?i:r;{const u=S.useRef(i!==void 0);S.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,n])}const c=S.useCallback(u=>{if(a){const h=bz(u)?u(i):u;h!==i&&o.current?.(h)}else s(u)},[a,i,s,o]);return[l,c]}function _z({defaultProp:i,onChange:e}){const[t,n]=S.useState(i),r=S.useRef(t),s=S.useRef(e);return yz(()=>{s.current=e},[e]),S.useEffect(()=>{r.current!==t&&(s.current?.(t),r.current=t)},[t,r]),[t,n,s]}function bz(i){return typeof i=="function"}function Ps(i){const e=S.useRef(i);return S.useEffect(()=>{e.current=i}),S.useMemo(()=>(...t)=>e.current?.(...t),[])}function wz(i,e=globalThis?.document){const t=Ps(i);S.useEffect(()=>{const n=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var xz="DismissableLayer",A_="dismissableLayer.update",Sz="dismissableLayer.pointerDownOutside",Ez="dismissableLayer.focusOutside",Dx,KA=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wb=S.forwardRef((i,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=i,c=S.useContext(KA),[u,h]=S.useState(null),d=u?.ownerDocument??globalThis?.document,[,f]=S.useState({}),p=ii(e,E=>h(E)),m=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(g),y=u?m.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,_=y>=v,w=Rz(E=>{const x=E.target,T=[...c.branches].some(O=>O.contains(x));!_||T||(r?.(E),o?.(E),E.defaultPrevented||a?.())},d),C=Iz(E=>{const x=E.target;[...c.branches].some(O=>O.contains(x))||(s?.(E),o?.(E),E.defaultPrevented||a?.())},d);return wz(E=>{y===c.layers.size-1&&(n?.(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},d),S.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Dx=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Ax(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=Dx)}},[u,d,t,c]),S.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Ax())},[u,c]),S.useEffect(()=>{const E=()=>f({});return document.addEventListener(A_,E),()=>document.removeEventListener(A_,E)},[]),I.jsx(ut.div,{...l,ref:p,style:{pointerEvents:b?_?"auto":"none":void 0,...i.style},onFocusCapture:tt(i.onFocusCapture,C.onFocusCapture),onBlurCapture:tt(i.onBlurCapture,C.onBlurCapture),onPointerDownCapture:tt(i.onPointerDownCapture,w.onPointerDownCapture)})});Wb.displayName=xz;var Cz="DismissableLayerBranch",Tz=S.forwardRef((i,e)=>{const t=S.useContext(KA),n=S.useRef(null),r=ii(e,n);return S.useEffect(()=>{const s=n.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),I.jsx(ut.div,{...i,ref:r})});Tz.displayName=Cz;function Rz(i,e=globalThis?.document){const t=Ps(i),n=S.useRef(!1),r=S.useRef(()=>{});return S.useEffect(()=>{const s=a=>{if(a.target&&!n.current){let l=function(){ZA(Sz,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function Iz(i,e=globalThis?.document){const t=Ps(i),n=S.useRef(!1);return S.useEffect(()=>{const r=s=>{s.target&&!n.current&&ZA(Ez,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Ax(){const i=new CustomEvent(A_);document.dispatchEvent(i)}function ZA(i,e,t,{discrete:n}){const r=t.originalEvent.target,s=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(i,e,{once:!0}),n?uz(r,s):r.dispatchEvent(s)}var of="focusScope.autoFocusOnMount",af="focusScope.autoFocusOnUnmount",Mx={bubbles:!1,cancelable:!0},Oz="FocusScope",QA=S.forwardRef((i,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=i,[a,l]=S.useState(null),c=Ps(r),u=Ps(s),h=S.useRef(null),d=ii(e,m=>l(m)),f=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(n){let m=function(b){if(f.paused||!a)return;const _=b.target;a.contains(_)?h.current=_:Tr(h.current,{select:!0})},g=function(b){if(f.paused||!a)return;const _=b.relatedTarget;_!==null&&(a.contains(_)||Tr(h.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const w of b)w.removedNodes.length>0&&Tr(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",g);const y=new MutationObserver(v);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g),y.disconnect()}}},[n,a,f.paused]),S.useEffect(()=>{if(a){Nx.add(f);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(of,Mx);a.addEventListener(of,c),a.dispatchEvent(v),v.defaultPrevented||(Pz(Nz(JA(a)),{select:!0}),document.activeElement===m&&Tr(a))}return()=>{a.removeEventListener(of,c),setTimeout(()=>{const v=new CustomEvent(af,Mx);a.addEventListener(af,u),a.dispatchEvent(v),v.defaultPrevented||Tr(m??document.body,{select:!0}),a.removeEventListener(af,u),Nx.remove(f)},0)}}},[a,c,u,f]);const p=S.useCallback(m=>{if(!t&&!n||f.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(g&&v){const y=m.currentTarget,[b,_]=Dz(y);b&&_?!m.shiftKey&&v===_?(m.preventDefault(),t&&Tr(b,{select:!0})):m.shiftKey&&v===b&&(m.preventDefault(),t&&Tr(_,{select:!0})):v===y&&m.preventDefault()}},[t,n,f.paused]);return I.jsx(ut.div,{tabIndex:-1,...o,ref:d,onKeyDown:p})});QA.displayName=Oz;function Pz(i,{select:e=!1}={}){const t=document.activeElement;for(const n of i)if(Tr(n,{select:e}),document.activeElement!==t)return}function Dz(i){const e=JA(i),t=kx(e,i),n=kx(e.reverse(),i);return[t,n]}function JA(i){const e=[],t=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function kx(i,e){for(const t of i)if(!Az(t,{upTo:e}))return t}function Az(i,{upTo:e}){if(getComputedStyle(i).visibility==="hidden")return!0;for(;i;){if(e!==void 0&&i===e)return!1;if(getComputedStyle(i).display==="none")return!0;i=i.parentElement}return!1}function Mz(i){return i instanceof HTMLInputElement&&"select"in i}function Tr(i,{select:e=!1}={}){if(i&&i.focus){const t=document.activeElement;i.focus({preventScroll:!0}),i!==t&&Mz(i)&&e&&i.select()}}var Nx=kz();function kz(){let i=[];return{add(e){const t=i[0];e!==t&&t?.pause(),i=Lx(i,e),i.unshift(e)},remove(e){i=Lx(i,e),i[0]?.resume()}}}function Lx(i,e){const t=[...i],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function Nz(i){return i.filter(e=>e.tagName!=="A")}var Lz="Portal",eM=S.forwardRef((i,e)=>{const{container:t,...n}=i,[r,s]=S.useState(!1);qr(()=>s(!0),[]);const o=t||r&&globalThis?.document?.body;return o?lz.createPortal(I.jsx(ut.div,{...n,ref:e}),o):null});eM.displayName=Lz;function Fz(i,e){return S.useReducer((t,n)=>e[t][n]??t,i)}var Pa=i=>{const{present:e,children:t}=i,n=$z(e),r=typeof t=="function"?t({present:n.isPresent}):S.Children.only(t),s=ii(n.ref,jz(r));return typeof t=="function"||n.isPresent?S.cloneElement(r,{ref:s}):null};Pa.displayName="Presence";function $z(i){const[e,t]=S.useState(),n=S.useRef(null),r=S.useRef(i),s=S.useRef("none"),o=i?"mounted":"unmounted",[a,l]=Fz(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=lu(n.current);s.current=a==="mounted"?c:"none"},[a]),qr(()=>{const c=n.current,u=r.current;if(u!==i){const d=s.current,f=lu(c);i?l("MOUNT"):f==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&d!==f?"ANIMATION_OUT":"UNMOUNT"),r.current=i}},[i,l]),qr(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=f=>{const m=lu(n.current).includes(CSS.escape(f.animationName));if(f.target===e&&m&&(l("ANIMATION_END"),!r.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},d=f=>{f.target===e&&(s.current=lu(n.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(c=>{n.current=c?getComputedStyle(c):null,t(c)},[])}}function lu(i){return i?.animationName||"none"}function jz(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}var lf=0;function zz(){S.useEffect(()=>{const i=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",i[0]??Fx()),document.body.insertAdjacentElement("beforeend",i[1]??Fx()),lf++,()=>{lf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),lf--}},[])}function Fx(){const i=document.createElement("span");return i.setAttribute("data-radix-focus-guard",""),i.tabIndex=0,i.style.outline="none",i.style.opacity="0",i.style.position="fixed",i.style.pointerEvents="none",i}var un=function(){return un=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},un.apply(this,arguments)};function tM(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t}function Gz(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))}var Gu="right-scroll-bar-position",qu="width-before-scroll-bar",qz="with-scroll-bars-hidden",Wz="--removed-body-scroll-bar-size";function cf(i,e){return typeof i=="function"?i(e):i&&(i.current=e),i}function Yz(i,e){var t=S.useState(function(){return{value:i,callback:e,facade:{get current(){return t.value},set current(n){var r=t.value;r!==n&&(t.value=n,t.callback(n,r))}}}})[0];return t.callback=e,t.facade}var Bz=typeof window<"u"?S.useLayoutEffect:S.useEffect,$x=new WeakMap;function Hz(i,e){var t=Yz(null,function(n){return i.forEach(function(r){return cf(r,n)})});return Bz(function(){var n=$x.get(t);if(n){var r=new Set(n),s=new Set(i),o=t.current;r.forEach(function(a){s.has(a)||cf(a,null)}),s.forEach(function(a){r.has(a)||cf(a,o)})}$x.set(t,i)},[i]),t}function Uz(i){return i}function Vz(i,e){e===void 0&&(e=Uz);var t=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:i},useMedium:function(s){var o=e(s,n);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(n=!0;t.length;){var o=t;t=[],o.forEach(s)}t={push:function(a){return s(a)},filter:function(){return t}}},assignMedium:function(s){n=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(s),o=t}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return r}function Xz(i){i===void 0&&(i={});var e=Vz(null);return e.options=un({async:!0,ssr:!1},i),e}var iM=function(i){var e=i.sideCar,t=tM(i,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return S.createElement(n,un({},t))};iM.isSideCarExport=!0;function Kz(i,e){return i.useMedium(e),iM}var nM=Xz(),uf=function(){},jh=S.forwardRef(function(i,e){var t=S.useRef(null),n=S.useState({onScrollCapture:uf,onWheelCapture:uf,onTouchMoveCapture:uf}),r=n[0],s=n[1],o=i.forwardProps,a=i.children,l=i.className,c=i.removeScrollBar,u=i.enabled,h=i.shards,d=i.sideCar,f=i.noRelative,p=i.noIsolation,m=i.inert,g=i.allowPinchZoom,v=i.as,y=v===void 0?"div":v,b=i.gapMode,_=tM(i,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,C=Hz([t,e]),E=un(un({},_),r);return S.createElement(S.Fragment,null,u&&S.createElement(w,{sideCar:nM,removeScrollBar:c,shards:h,noRelative:f,noIsolation:p,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:t,gapMode:b}),o?S.cloneElement(S.Children.only(a),un(un({},E),{ref:C})):S.createElement(y,un({},E,{className:l,ref:C}),a))});jh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};jh.classNames={fullWidth:qu,zeroRight:Gu};var Zz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Qz(){if(!document)return null;var i=document.createElement("style");i.type="text/css";var e=Zz();return e&&i.setAttribute("nonce",e),i}function Jz(i,e){i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}function eG(i){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(i)}var tG=function(){var i=0,e=null;return{add:function(t){i==0&&(e=Qz())&&(Jz(e,t),eG(e)),i++},remove:function(){i--,!i&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},iG=function(){var i=tG();return function(e,t){S.useEffect(function(){return i.add(e),function(){i.remove()}},[e&&t])}},rM=function(){var i=iG(),e=function(t){var n=t.styles,r=t.dynamic;return i(n,r),null};return e},nG={left:0,top:0,right:0,gap:0},hf=function(i){return parseInt(i||"",10)||0},rG=function(i){var e=window.getComputedStyle(document.body),t=e[i==="padding"?"paddingLeft":"marginLeft"],n=e[i==="padding"?"paddingTop":"marginTop"],r=e[i==="padding"?"paddingRight":"marginRight"];return[hf(t),hf(n),hf(r)]},sG=function(i){if(i===void 0&&(i="margin"),typeof window>"u")return nG;var e=rG(i),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},oG=rM(),Uo="data-scroll-locked",aG=function(i,e,t,n){var r=i.left,s=i.top,o=i.right,a=i.gap;return t===void 0&&(t="margin"),`
  .`.concat(qz,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(Uo,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Gu,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(qu,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Gu," .").concat(Gu,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(qu," .").concat(qu,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Uo,`] {
    `).concat(Wz,": ").concat(a,`px;
  }
`)},jx=function(){var i=parseInt(document.body.getAttribute(Uo)||"0",10);return isFinite(i)?i:0},lG=function(){S.useEffect(function(){return document.body.setAttribute(Uo,(jx()+1).toString()),function(){var i=jx()-1;i<=0?document.body.removeAttribute(Uo):document.body.setAttribute(Uo,i.toString())}},[])},cG=function(i){var e=i.noRelative,t=i.noImportant,n=i.gapMode,r=n===void 0?"margin":n;lG();var s=S.useMemo(function(){return sG(r)},[r]);return S.createElement(oG,{styles:aG(s,!e,r,t?"":"!important")})},M_=!1;if(typeof window<"u")try{var cu=Object.defineProperty({},"passive",{get:function(){return M_=!0,!0}});window.addEventListener("test",cu,cu),window.removeEventListener("test",cu,cu)}catch{M_=!1}var co=M_?{passive:!1}:!1,uG=function(i){return i.tagName==="TEXTAREA"},sM=function(i,e){if(!(i instanceof Element))return!1;var t=window.getComputedStyle(i);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!uG(i)&&t[e]==="visible")},hG=function(i){return sM(i,"overflowY")},dG=function(i){return sM(i,"overflowX")},zx=function(i,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=oM(i,n);if(r){var s=aM(i,n),o=s[1],a=s[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},fG=function(i){var e=i.scrollTop,t=i.scrollHeight,n=i.clientHeight;return[e,t,n]},pG=function(i){var e=i.scrollLeft,t=i.scrollWidth,n=i.clientWidth;return[e,t,n]},oM=function(i,e){return i==="v"?hG(e):dG(e)},aM=function(i,e){return i==="v"?fG(e):pG(e)},mG=function(i,e){return i==="h"&&e==="rtl"?-1:1},gG=function(i,e,t,n,r){var s=mG(i,window.getComputedStyle(e).direction),o=s*n,a=t.target,l=e.contains(a),c=!1,u=o>0,h=0,d=0;do{if(!a)break;var f=aM(i,a),p=f[0],m=f[1],g=f[2],v=m-g-s*p;(p||v)&&oM(i,a)&&(h+=v,d+=p);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(h)<1||!u&&Math.abs(d)<1)&&(c=!0),c},uu=function(i){return"changedTouches"in i?[i.changedTouches[0].clientX,i.changedTouches[0].clientY]:[0,0]},Gx=function(i){return[i.deltaX,i.deltaY]},qx=function(i){return i&&"current"in i?i.current:i},vG=function(i,e){return i[0]===e[0]&&i[1]===e[1]},yG=function(i){return`
  .block-interactivity-`.concat(i,` {pointer-events: none;}
  .allow-interactivity-`).concat(i,` {pointer-events: all;}
`)},_G=0,uo=[];function bG(i){var e=S.useRef([]),t=S.useRef([0,0]),n=S.useRef(),r=S.useState(_G++)[0],s=S.useState(rM)[0],o=S.useRef(i);S.useEffect(function(){o.current=i},[i]),S.useEffect(function(){if(i.inert){document.body.classList.add("block-interactivity-".concat(r));var m=Gz([i.lockRef.current],(i.shards||[]).map(qx),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(r))})}}},[i.inert,i.lockRef.current,i.shards]);var a=S.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var v=uu(m),y=t.current,b="deltaX"in m?m.deltaX:y[0]-v[0],_="deltaY"in m?m.deltaY:y[1]-v[1],w,C=m.target,E=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in m&&E==="h"&&C.type==="range")return!1;var x=zx(E,C);if(!x)return!0;if(x?w=E:(w=E==="v"?"h":"v",x=zx(E,C)),!x)return!1;if(!n.current&&"changedTouches"in m&&(b||_)&&(n.current=w),!w)return!0;var T=n.current||w;return gG(T,g,m,T==="h"?b:_)},[]),l=S.useCallback(function(m){var g=m;if(!(!uo.length||uo[uo.length-1]!==s)){var v="deltaY"in g?Gx(g):uu(g),y=e.current.filter(function(w){return w.name===g.type&&(w.target===g.target||g.target===w.shadowParent)&&vG(w.delta,v)})[0];if(y&&y.should){g.cancelable&&g.preventDefault();return}if(!y){var b=(o.current.shards||[]).map(qx).filter(Boolean).filter(function(w){return w.contains(g.target)}),_=b.length>0?a(g,b[0]):!o.current.noIsolation;_&&g.cancelable&&g.preventDefault()}}},[]),c=S.useCallback(function(m,g,v,y){var b={name:m,delta:g,target:v,should:y,shadowParent:wG(v)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(_){return _!==b})},1)},[]),u=S.useCallback(function(m){t.current=uu(m),n.current=void 0},[]),h=S.useCallback(function(m){c(m.type,Gx(m),m.target,a(m,i.lockRef.current))},[]),d=S.useCallback(function(m){c(m.type,uu(m),m.target,a(m,i.lockRef.current))},[]);S.useEffect(function(){return uo.push(s),i.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:d}),document.addEventListener("wheel",l,co),document.addEventListener("touchmove",l,co),document.addEventListener("touchstart",u,co),function(){uo=uo.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,co),document.removeEventListener("touchmove",l,co),document.removeEventListener("touchstart",u,co)}},[]);var f=i.removeScrollBar,p=i.inert;return S.createElement(S.Fragment,null,p?S.createElement(s,{styles:yG(r)}):null,f?S.createElement(cG,{noRelative:i.noRelative,gapMode:i.gapMode}):null)}function wG(i){for(var e=null;i!==null;)i instanceof ShadowRoot&&(e=i.host,i=i.host),i=i.parentNode;return e}const xG=Kz(nM,bG);var lM=S.forwardRef(function(i,e){return S.createElement(jh,un({},i,{ref:e,sideCar:xG}))});lM.classNames=jh.classNames;var SG=function(i){if(typeof document>"u")return null;var e=Array.isArray(i)?i[0]:i;return e.ownerDocument.body},ho=new WeakMap,hu=new WeakMap,du={},df=0,cM=function(i){return i&&(i.host||cM(i.parentNode))},EG=function(i,e){return e.map(function(t){if(i.contains(t))return t;var n=cM(t);return n&&i.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",i,". Doing nothing"),null)}).filter(function(t){return!!t})},CG=function(i,e,t,n){var r=EG(e,Array.isArray(i)?i:[i]);du[t]||(du[t]=new WeakMap);var s=du[t],o=[],a=new Set,l=new Set(r),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};r.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(d){if(a.has(d))u(d);else try{var f=d.getAttribute(n),p=f!==null&&f!=="false",m=(ho.get(d)||0)+1,g=(s.get(d)||0)+1;ho.set(d,m),s.set(d,g),o.push(d),m===1&&p&&hu.set(d,!0),g===1&&d.setAttribute(t,"true"),p||d.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",d,v)}})};return u(e),a.clear(),df++,function(){o.forEach(function(h){var d=ho.get(h)-1,f=s.get(h)-1;ho.set(h,d),s.set(h,f),d||(hu.has(h)||h.removeAttribute(n),hu.delete(h)),f||h.removeAttribute(t)}),df--,df||(ho=new WeakMap,ho=new WeakMap,hu=new WeakMap,du={})}},TG=function(i,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(i)?i:[i]),r=SG(i);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live], script"))),CG(n,r,t,"aria-hidden")):function(){return null}},zh="Dialog",[uM]=Oa(zh),[RG,nn]=uM(zh),hM=i=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:r,onOpenChange:s,modal:o=!0}=i,a=S.useRef(null),l=S.useRef(null),[c,u]=$h({prop:n,defaultProp:r??!1,onChange:s,caller:zh});return I.jsx(RG,{scope:e,triggerRef:a,contentRef:l,contentId:Ho(),titleId:Ho(),descriptionId:Ho(),open:c,onOpenChange:u,onOpenToggle:S.useCallback(()=>u(h=>!h),[u]),modal:o,children:t})};hM.displayName=zh;var dM="DialogTrigger",IG=S.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=nn(dM,t),s=ii(e,r.triggerRef);return I.jsx(ut.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":Hb(r.open),...n,ref:s,onClick:tt(i.onClick,r.onOpenToggle)})});IG.displayName=dM;var Yb="DialogPortal",[OG,fM]=uM(Yb,{forceMount:void 0}),pM=i=>{const{__scopeDialog:e,forceMount:t,children:n,container:r}=i,s=nn(Yb,e);return I.jsx(OG,{scope:e,forceMount:t,children:S.Children.map(n,o=>I.jsx(Pa,{present:t||s.open,children:I.jsx(eM,{asChild:!0,container:r,children:o})}))})};pM.displayName=Yb;var Zu="DialogOverlay",mM=S.forwardRef((i,e)=>{const t=fM(Zu,i.__scopeDialog),{forceMount:n=t.forceMount,...r}=i,s=nn(Zu,i.__scopeDialog);return s.modal?I.jsx(Pa,{present:n||s.open,children:I.jsx(DG,{...r,ref:e})}):null});mM.displayName=Zu;var PG=jl("DialogOverlay.RemoveScroll"),DG=S.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=nn(Zu,t);return I.jsx(lM,{as:PG,allowPinchZoom:!0,shards:[r.contentRef],children:I.jsx(ut.div,{"data-state":Hb(r.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Ds="DialogContent",gM=S.forwardRef((i,e)=>{const t=fM(Ds,i.__scopeDialog),{forceMount:n=t.forceMount,...r}=i,s=nn(Ds,i.__scopeDialog);return I.jsx(Pa,{present:n||s.open,children:s.modal?I.jsx(AG,{...r,ref:e}):I.jsx(MG,{...r,ref:e})})});gM.displayName=Ds;var AG=S.forwardRef((i,e)=>{const t=nn(Ds,i.__scopeDialog),n=S.useRef(null),r=ii(e,t.contentRef,n);return S.useEffect(()=>{const s=n.current;if(s)return TG(s)},[]),I.jsx(vM,{...i,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:tt(i.onCloseAutoFocus,s=>{s.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:tt(i.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:tt(i.onFocusOutside,s=>s.preventDefault())})}),MG=S.forwardRef((i,e)=>{const t=nn(Ds,i.__scopeDialog),n=S.useRef(!1),r=S.useRef(!1);return I.jsx(vM,{...i,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{i.onCloseAutoFocus?.(s),s.defaultPrevented||(n.current||t.triggerRef.current?.focus(),s.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:s=>{i.onInteractOutside?.(s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;t.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),vM=S.forwardRef((i,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:s,...o}=i,a=nn(Ds,t),l=S.useRef(null),c=ii(e,l);return zz(),I.jsxs(I.Fragment,{children:[I.jsx(QA,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:s,children:I.jsx(Wb,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Hb(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),I.jsxs(I.Fragment,{children:[I.jsx(kG,{titleId:a.titleId}),I.jsx(LG,{contentRef:l,descriptionId:a.descriptionId})]})]})}),Bb="DialogTitle",yM=S.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=nn(Bb,t);return I.jsx(ut.h2,{id:r.titleId,...n,ref:e})});yM.displayName=Bb;var _M="DialogDescription",bM=S.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=nn(_M,t);return I.jsx(ut.p,{id:r.descriptionId,...n,ref:e})});bM.displayName=_M;var wM="DialogClose",xM=S.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=nn(wM,t);return I.jsx(ut.button,{type:"button",...n,ref:e,onClick:tt(i.onClick,()=>r.onOpenChange(!1))})});xM.displayName=wM;function Hb(i){return i?"open":"closed"}var SM="DialogTitleWarning",[ane,EM]=pz(SM,{contentName:Ds,titleName:Bb,docsSlug:"dialog"}),kG=({titleId:i})=>{const e=EM(SM),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return S.useEffect(()=>{i&&(document.getElementById(i)||console.error(t))},[t,i]),null},NG="DialogDescriptionWarning",LG=({contentRef:i,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${EM(NG).contentName}}.`;return S.useEffect(()=>{const r=i.current?.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(n))},[n,i,e]),null},FG=hM,$G=pM,CM=mM,TM=gM,RM=yM,IM=bM,jG=xM;const zG=FG,GG=$G,OM=S.forwardRef(({className:i,...e},t)=>I.jsx(CM,{className:pe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",i),...e,ref:t}));OM.displayName=CM.displayName;const qG=zb("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),PM=S.forwardRef(({side:i="right",className:e,children:t,...n},r)=>I.jsxs(GG,{children:[I.jsx(OM,{}),I.jsxs(TM,{ref:r,className:pe(qG({side:i}),e),...n,children:[t,I.jsxs(jG,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[I.jsx(sj,{className:"h-4 w-4"}),I.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));PM.displayName=TM.displayName;const DM=({className:i,...e})=>I.jsx("div",{className:pe("flex flex-col space-y-2 text-center sm:text-left",i),...e});DM.displayName="SheetHeader";const AM=S.forwardRef(({className:i,...e},t)=>I.jsx(RM,{ref:t,className:pe("text-lg font-semibold text-foreground",i),...e}));AM.displayName=RM.displayName;const MM=S.forwardRef(({className:i,...e},t)=>I.jsx(IM,{ref:t,className:pe("text-sm text-muted-foreground",i),...e}));MM.displayName=IM.displayName;function Il({className:i,...e}){return I.jsx("div",{className:pe("animate-pulse rounded-md bg-muted",i),...e})}const WG=["top","right","bottom","left"],Wr=Math.min,di=Math.max,Qu=Math.round,fu=Math.floor,_n=i=>({x:i,y:i}),YG={left:"right",right:"left",bottom:"top",top:"bottom"},BG={start:"end",end:"start"};function k_(i,e,t){return di(i,Wr(e,t))}function nr(i,e){return typeof i=="function"?i(e):i}function rr(i){return i.split("-")[0]}function Da(i){return i.split("-")[1]}function Ub(i){return i==="x"?"y":"x"}function Vb(i){return i==="y"?"height":"width"}const HG=new Set(["top","bottom"]);function pn(i){return HG.has(rr(i))?"y":"x"}function Xb(i){return Ub(pn(i))}function UG(i,e,t){t===void 0&&(t=!1);const n=Da(i),r=Xb(i),s=Vb(r);let o=r==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Ju(o)),[o,Ju(o)]}function VG(i){const e=Ju(i);return[N_(i),e,N_(e)]}function N_(i){return i.replace(/start|end/g,e=>BG[e])}const Wx=["left","right"],Yx=["right","left"],XG=["top","bottom"],KG=["bottom","top"];function ZG(i,e,t){switch(i){case"top":case"bottom":return t?e?Yx:Wx:e?Wx:Yx;case"left":case"right":return e?XG:KG;default:return[]}}function QG(i,e,t,n){const r=Da(i);let s=ZG(rr(i),t==="start",n);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(N_)))),s}function Ju(i){return i.replace(/left|right|bottom|top/g,e=>YG[e])}function JG(i){return{top:0,right:0,bottom:0,left:0,...i}}function kM(i){return typeof i!="number"?JG(i):{top:i,right:i,bottom:i,left:i}}function eh(i){const{x:e,y:t,width:n,height:r}=i;return{width:n,height:r,top:t,left:e,right:e+n,bottom:t+r,x:e,y:t}}function Bx(i,e,t){let{reference:n,floating:r}=i;const s=pn(e),o=Xb(e),a=Vb(o),l=rr(e),c=s==="y",u=n.x+n.width/2-r.width/2,h=n.y+n.height/2-r.height/2,d=n[a]/2-r[a]/2;let f;switch(l){case"top":f={x:u,y:n.y-r.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:h};break;case"left":f={x:n.x-r.width,y:h};break;default:f={x:n.x,y:n.y}}switch(Da(e)){case"start":f[o]-=d*(t&&c?-1:1);break;case"end":f[o]+=d*(t&&c?-1:1);break}return f}const eq=async(i,e,t)=>{const{placement:n="bottom",strategy:r="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:i,floating:e,strategy:r}),{x:u,y:h}=Bx(c,n,l),d=n,f={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:v}=a[m],{x:y,y:b,data:_,reset:w}=await v({x:u,y:h,initialPlacement:n,placement:d,strategy:r,middlewareData:f,rects:c,platform:o,elements:{reference:i,floating:e}});u=y??u,h=b??h,f={...f,[g]:{...f[g],..._}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(d=w.placement),w.rects&&(c=w.rects===!0?await o.getElementRects({reference:i,floating:e,strategy:r}):w.rects),{x:u,y:h}=Bx(c,d,l)),m=-1)}return{x:u,y:h,placement:d,strategy:r,middlewareData:f}};async function zl(i,e){var t;e===void 0&&(e={});const{x:n,y:r,platform:s,rects:o,elements:a,strategy:l}=i,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=nr(e,i),p=kM(f),g=a[d?h==="floating"?"reference":"floating":h],v=eh(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(g)))==null||t?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y=h==="floating"?{x:n,y:r,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},w=eh(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:b,strategy:l}):y);return{top:(v.top-w.top+p.top)/_.y,bottom:(w.bottom-v.bottom+p.bottom)/_.y,left:(v.left-w.left+p.left)/_.x,right:(w.right-v.right+p.right)/_.x}}const tq=i=>({name:"arrow",options:i,async fn(e){const{x:t,y:n,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=nr(i,e)||{};if(c==null)return{};const h=kM(u),d={x:t,y:n},f=Xb(r),p=Vb(f),m=await o.getDimensions(c),g=f==="y",v=g?"top":"left",y=g?"bottom":"right",b=g?"clientHeight":"clientWidth",_=s.reference[p]+s.reference[f]-d[f]-s.floating[p],w=d[f]-s.reference[f],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let E=C?C[b]:0;(!E||!await(o.isElement==null?void 0:o.isElement(C)))&&(E=a.floating[b]||s.floating[p]);const x=_/2-w/2,T=E/2-m[p]/2-1,O=Wr(h[v],T),D=Wr(h[y],T),A=O,k=E-m[p]-D,N=E/2-m[p]/2+x,z=k_(A,N,k),M=!l.arrow&&Da(r)!=null&&N!==z&&s.reference[p]/2-(N<A?O:D)-m[p]/2<0,$=M?N<A?N-A:N-k:0;return{[f]:d[f]+$,data:{[f]:z,centerOffset:N-z-$,...M&&{alignmentOffset:$}},reset:M}}}),iq=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(e){var t,n;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=nr(i,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const v=rr(r),y=pn(a),b=rr(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(c.floating)),w=d||(b||!m?[Ju(a)]:VG(a)),C=p!=="none";!d&&C&&w.push(...QG(a,m,p,_));const E=[a,...w],x=await zl(e,g),T=[];let O=((n=s.flip)==null?void 0:n.overflows)||[];if(u&&T.push(x[v]),h){const N=UG(r,o,_);T.push(x[N[0]],x[N[1]])}if(O=[...O,{placement:r,overflows:T}],!T.every(N=>N<=0)){var D,A;const N=(((D=s.flip)==null?void 0:D.index)||0)+1,z=E[N];if(z&&(!(h==="alignment"?y!==pn(z):!1)||O.every(P=>pn(P.placement)===y?P.overflows[0]>0:!0)))return{data:{index:N,overflows:O},reset:{placement:z}};let M=(A=O.filter($=>$.overflows[0]<=0).sort(($,P)=>$.overflows[1]-P.overflows[1])[0])==null?void 0:A.placement;if(!M)switch(f){case"bestFit":{var k;const $=(k=O.filter(P=>{if(C){const G=pn(P.placement);return G===y||G==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(G=>G>0).reduce((G,V)=>G+V,0)]).sort((P,G)=>P[1]-G[1])[0])==null?void 0:k[0];$&&(M=$);break}case"initialPlacement":M=a;break}if(r!==M)return{reset:{placement:M}}}return{}}}};function Hx(i,e){return{top:i.top-e.height,right:i.right-e.width,bottom:i.bottom-e.height,left:i.left-e.width}}function Ux(i){return WG.some(e=>i[e]>=0)}const nq=function(i){return i===void 0&&(i={}),{name:"hide",options:i,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...r}=nr(i,e);switch(n){case"referenceHidden":{const s=await zl(e,{...r,elementContext:"reference"}),o=Hx(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Ux(o)}}}case"escaped":{const s=await zl(e,{...r,altBoundary:!0}),o=Hx(s,t.floating);return{data:{escapedOffsets:o,escaped:Ux(o)}}}default:return{}}}}},NM=new Set(["left","top"]);async function rq(i,e){const{placement:t,platform:n,elements:r}=i,s=await(n.isRTL==null?void 0:n.isRTL(r.floating)),o=rr(t),a=Da(t),l=pn(t)==="y",c=NM.has(o)?-1:1,u=s&&l?-1:1,h=nr(e,i);let{mainAxis:d,crossAxis:f,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*u,y:d*c}:{x:d*c,y:f*u}}const sq=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(e){var t,n;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await rq(e,i);return o===((t=a.offset)==null?void 0:t.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},oq=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(e){const{x:t,y:n,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:v,y}=g;return{x:v,y}}},...l}=nr(i,e),c={x:t,y:n},u=await zl(e,l),h=pn(rr(r)),d=Ub(h);let f=c[d],p=c[h];if(s){const g=d==="y"?"top":"left",v=d==="y"?"bottom":"right",y=f+u[g],b=f-u[v];f=k_(y,f,b)}if(o){const g=h==="y"?"top":"left",v=h==="y"?"bottom":"right",y=p+u[g],b=p-u[v];p=k_(y,p,b)}const m=a.fn({...e,[d]:f,[h]:p});return{...m,data:{x:m.x-t,y:m.y-n,enabled:{[d]:s,[h]:o}}}}}},aq=function(i){return i===void 0&&(i={}),{options:i,fn(e){const{x:t,y:n,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=nr(i,e),u={x:t,y:n},h=pn(r),d=Ub(h);let f=u[d],p=u[h];const m=nr(a,e),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const b=d==="y"?"height":"width",_=s.reference[d]-s.floating[b]+g.mainAxis,w=s.reference[d]+s.reference[b]-g.mainAxis;f<_?f=_:f>w&&(f=w)}if(c){var v,y;const b=d==="y"?"width":"height",_=NM.has(rr(r)),w=s.reference[h]-s.floating[b]+(_&&((v=o.offset)==null?void 0:v[h])||0)+(_?0:g.crossAxis),C=s.reference[h]+s.reference[b]+(_?0:((y=o.offset)==null?void 0:y[h])||0)-(_?g.crossAxis:0);p<w?p=w:p>C&&(p=C)}return{[d]:f,[h]:p}}}},lq=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(e){var t,n;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=nr(i,e),u=await zl(e,c),h=rr(r),d=Da(r),f=pn(r)==="y",{width:p,height:m}=s.floating;let g,v;h==="top"||h==="bottom"?(g=h,v=d===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=h,g=d==="end"?"top":"bottom");const y=m-u.top-u.bottom,b=p-u.left-u.right,_=Wr(m-u[g],y),w=Wr(p-u[v],b),C=!e.middlewareData.shift;let E=_,x=w;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(x=b),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(E=y),C&&!d){const O=di(u.left,0),D=di(u.right,0),A=di(u.top,0),k=di(u.bottom,0);f?x=p-2*(O!==0||D!==0?O+D:di(u.left,u.right)):E=m-2*(A!==0||k!==0?A+k:di(u.top,u.bottom))}await l({...e,availableWidth:x,availableHeight:E});const T=await o.getDimensions(a.floating);return p!==T.width||m!==T.height?{reset:{rects:!0}}:{}}}};function Gh(){return typeof window<"u"}function Aa(i){return LM(i)?(i.nodeName||"").toLowerCase():"#document"}function mi(i){var e;return(i==null||(e=i.ownerDocument)==null?void 0:e.defaultView)||window}function Cn(i){var e;return(e=(LM(i)?i.ownerDocument:i.document)||window.document)==null?void 0:e.documentElement}function LM(i){return Gh()?i instanceof Node||i instanceof mi(i).Node:!1}function Xi(i){return Gh()?i instanceof Element||i instanceof mi(i).Element:!1}function Sn(i){return Gh()?i instanceof HTMLElement||i instanceof mi(i).HTMLElement:!1}function Vx(i){return!Gh()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof mi(i).ShadowRoot}const cq=new Set(["inline","contents"]);function wc(i){const{overflow:e,overflowX:t,overflowY:n,display:r}=Ki(i);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!cq.has(r)}const uq=new Set(["table","td","th"]);function hq(i){return uq.has(Aa(i))}const dq=[":popover-open",":modal"];function qh(i){return dq.some(e=>{try{return i.matches(e)}catch{return!1}})}const fq=["transform","translate","scale","rotate","perspective"],pq=["transform","translate","scale","rotate","perspective","filter"],mq=["paint","layout","strict","content"];function Kb(i){const e=Zb(),t=Xi(i)?Ki(i):i;return fq.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||pq.some(n=>(t.willChange||"").includes(n))||mq.some(n=>(t.contain||"").includes(n))}function gq(i){let e=Yr(i);for(;Sn(e)&&!oa(e);){if(Kb(e))return e;if(qh(e))return null;e=Yr(e)}return null}function Zb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const vq=new Set(["html","body","#document"]);function oa(i){return vq.has(Aa(i))}function Ki(i){return mi(i).getComputedStyle(i)}function Wh(i){return Xi(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function Yr(i){if(Aa(i)==="html")return i;const e=i.assignedSlot||i.parentNode||Vx(i)&&i.host||Cn(i);return Vx(e)?e.host:e}function FM(i){const e=Yr(i);return oa(e)?i.ownerDocument?i.ownerDocument.body:i.body:Sn(e)&&wc(e)?e:FM(e)}function Gl(i,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=FM(i),s=r===((n=i.ownerDocument)==null?void 0:n.body),o=mi(r);if(s){const a=L_(o);return e.concat(o,o.visualViewport||[],wc(r)?r:[],a&&t?Gl(a):[])}return e.concat(r,Gl(r,[],t))}function L_(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function $M(i){const e=Ki(i);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=Sn(i),s=r?i.offsetWidth:t,o=r?i.offsetHeight:n,a=Qu(t)!==s||Qu(n)!==o;return a&&(t=s,n=o),{width:t,height:n,$:a}}function Qb(i){return Xi(i)?i:i.contextElement}function Vo(i){const e=Qb(i);if(!Sn(e))return _n(1);const t=e.getBoundingClientRect(),{width:n,height:r,$:s}=$M(e);let o=(s?Qu(t.width):t.width)/n,a=(s?Qu(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const yq=_n(0);function jM(i){const e=mi(i);return!Zb()||!e.visualViewport?yq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function _q(i,e,t){return e===void 0&&(e=!1),!t||e&&t!==mi(i)?!1:e}function As(i,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=i.getBoundingClientRect(),s=Qb(i);let o=_n(1);e&&(n?Xi(n)&&(o=Vo(n)):o=Vo(i));const a=_q(s,t,n)?jM(s):_n(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,h=r.height/o.y;if(s){const d=mi(s),f=n&&Xi(n)?mi(n):n;let p=d,m=L_(p);for(;m&&n&&f!==p;){const g=Vo(m),v=m.getBoundingClientRect(),y=Ki(m),b=v.left+(m.clientLeft+parseFloat(y.paddingLeft))*g.x,_=v.top+(m.clientTop+parseFloat(y.paddingTop))*g.y;l*=g.x,c*=g.y,u*=g.x,h*=g.y,l+=b,c+=_,p=mi(m),m=L_(p)}}return eh({width:u,height:h,x:l,y:c})}function Yh(i,e){const t=Wh(i).scrollLeft;return e?e.left+t:As(Cn(i)).left+t}function zM(i,e){const t=i.getBoundingClientRect(),n=t.left+e.scrollLeft-Yh(i,t),r=t.top+e.scrollTop;return{x:n,y:r}}function bq(i){let{elements:e,rect:t,offsetParent:n,strategy:r}=i;const s=r==="fixed",o=Cn(n),a=e?qh(e.floating):!1;if(n===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=_n(1);const u=_n(0),h=Sn(n);if((h||!h&&!s)&&((Aa(n)!=="body"||wc(o))&&(l=Wh(n)),Sn(n))){const f=As(n);c=Vo(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const d=o&&!h&&!s?zM(o,l):_n(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+d.x,y:t.y*c.y-l.scrollTop*c.y+u.y+d.y}}function wq(i){return Array.from(i.getClientRects())}function xq(i){const e=Cn(i),t=Wh(i),n=i.ownerDocument.body,r=di(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=di(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+Yh(i);const a=-t.scrollTop;return Ki(n).direction==="rtl"&&(o+=di(e.clientWidth,n.clientWidth)-r),{width:r,height:s,x:o,y:a}}const Xx=25;function Sq(i,e){const t=mi(i),n=Cn(i),r=t.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const u=Zb();(!u||u&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}const c=Yh(n);if(c<=0){const u=n.ownerDocument,h=u.body,d=getComputedStyle(h),f=u.compatMode==="CSS1Compat"&&parseFloat(d.marginLeft)+parseFloat(d.marginRight)||0,p=Math.abs(n.clientWidth-h.clientWidth-f);p<=Xx&&(s-=p)}else c<=Xx&&(s+=c);return{width:s,height:o,x:a,y:l}}const Eq=new Set(["absolute","fixed"]);function Cq(i,e){const t=As(i,!0,e==="fixed"),n=t.top+i.clientTop,r=t.left+i.clientLeft,s=Sn(i)?Vo(i):_n(1),o=i.clientWidth*s.x,a=i.clientHeight*s.y,l=r*s.x,c=n*s.y;return{width:o,height:a,x:l,y:c}}function Kx(i,e,t){let n;if(e==="viewport")n=Sq(i,t);else if(e==="document")n=xq(Cn(i));else if(Xi(e))n=Cq(e,t);else{const r=jM(i);n={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return eh(n)}function GM(i,e){const t=Yr(i);return t===e||!Xi(t)||oa(t)?!1:Ki(t).position==="fixed"||GM(t,e)}function Tq(i,e){const t=e.get(i);if(t)return t;let n=Gl(i,[],!1).filter(a=>Xi(a)&&Aa(a)!=="body"),r=null;const s=Ki(i).position==="fixed";let o=s?Yr(i):i;for(;Xi(o)&&!oa(o);){const a=Ki(o),l=Kb(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&Eq.has(r.position)||wc(o)&&!l&&GM(i,o))?n=n.filter(u=>u!==o):r=a,o=Yr(o)}return e.set(i,n),n}function Rq(i){let{element:e,boundary:t,rootBoundary:n,strategy:r}=i;const o=[...t==="clippingAncestors"?qh(e)?[]:Tq(e,this._c):[].concat(t),n],a=o[0],l=o.reduce((c,u)=>{const h=Kx(e,u,r);return c.top=di(h.top,c.top),c.right=Wr(h.right,c.right),c.bottom=Wr(h.bottom,c.bottom),c.left=di(h.left,c.left),c},Kx(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Iq(i){const{width:e,height:t}=$M(i);return{width:e,height:t}}function Oq(i,e,t){const n=Sn(e),r=Cn(e),s=t==="fixed",o=As(i,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=_n(0);function c(){l.x=Yh(r)}if(n||!n&&!s)if((Aa(e)!=="body"||wc(r))&&(a=Wh(e)),n){const f=As(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else r&&c();s&&!n&&r&&c();const u=r&&!n&&!s?zM(r,a):_n(0),h=o.left+a.scrollLeft-l.x-u.x,d=o.top+a.scrollTop-l.y-u.y;return{x:h,y:d,width:o.width,height:o.height}}function ff(i){return Ki(i).position==="static"}function Zx(i,e){if(!Sn(i)||Ki(i).position==="fixed")return null;if(e)return e(i);let t=i.offsetParent;return Cn(i)===t&&(t=t.ownerDocument.body),t}function qM(i,e){const t=mi(i);if(qh(i))return t;if(!Sn(i)){let r=Yr(i);for(;r&&!oa(r);){if(Xi(r)&&!ff(r))return r;r=Yr(r)}return t}let n=Zx(i,e);for(;n&&hq(n)&&ff(n);)n=Zx(n,e);return n&&oa(n)&&ff(n)&&!Kb(n)?t:n||gq(i)||t}const Pq=async function(i){const e=this.getOffsetParent||qM,t=this.getDimensions,n=await t(i.floating);return{reference:Oq(i.reference,await e(i.floating),i.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Dq(i){return Ki(i).direction==="rtl"}const Aq={convertOffsetParentRelativeRectToViewportRelativeRect:bq,getDocumentElement:Cn,getClippingRect:Rq,getOffsetParent:qM,getElementRects:Pq,getClientRects:wq,getDimensions:Iq,getScale:Vo,isElement:Xi,isRTL:Dq};function WM(i,e){return i.x===e.x&&i.y===e.y&&i.width===e.width&&i.height===e.height}function Mq(i,e){let t=null,n;const r=Cn(i);function s(){var a;clearTimeout(n),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=i.getBoundingClientRect(),{left:u,top:h,width:d,height:f}=c;if(a||e(),!d||!f)return;const p=fu(h),m=fu(r.clientWidth-(u+d)),g=fu(r.clientHeight-(h+f)),v=fu(u),b={rootMargin:-p+"px "+-m+"px "+-g+"px "+-v+"px",threshold:di(0,Wr(1,l))||1};let _=!0;function w(C){const E=C[0].intersectionRatio;if(E!==l){if(!_)return o();E?o(!1,E):n=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!WM(c,i.getBoundingClientRect())&&o(),_=!1}try{t=new IntersectionObserver(w,{...b,root:r.ownerDocument})}catch{t=new IntersectionObserver(w,b)}t.observe(i)}return o(!0),s}function kq(i,e,t,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=Qb(i),u=r||s?[...c?Gl(c):[],...Gl(e)]:[];u.forEach(v=>{r&&v.addEventListener("scroll",t,{passive:!0}),s&&v.addEventListener("resize",t)});const h=c&&a?Mq(c,t):null;let d=-1,f=null;o&&(f=new ResizeObserver(v=>{let[y]=v;y&&y.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=f)==null||b.observe(e)})),t()}),c&&!l&&f.observe(c),f.observe(e));let p,m=l?As(i):null;l&&g();function g(){const v=As(i);m&&!WM(m,v)&&t(),m=v,p=requestAnimationFrame(g)}return t(),()=>{var v;u.forEach(y=>{r&&y.removeEventListener("scroll",t),s&&y.removeEventListener("resize",t)}),h?.(),(v=f)==null||v.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const Nq=sq,Lq=oq,Fq=iq,$q=lq,jq=nq,Qx=tq,zq=aq,Gq=(i,e,t)=>{const n=new Map,r={platform:Aq,...t},s={...r.platform,_c:n};return eq(i,e,{...r,platform:s})};var qq=typeof document<"u",Wq=function(){},Wu=qq?S.useLayoutEffect:Wq;function th(i,e){if(i===e)return!0;if(typeof i!=typeof e)return!1;if(typeof i=="function"&&i.toString()===e.toString())return!0;let t,n,r;if(i&&e&&typeof i=="object"){if(Array.isArray(i)){if(t=i.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!th(i[n],e[n]))return!1;return!0}if(r=Object.keys(i),t=r.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,r[n]))return!1;for(n=t;n--!==0;){const s=r[n];if(!(s==="_owner"&&i.$$typeof)&&!th(i[s],e[s]))return!1}return!0}return i!==i&&e!==e}function YM(i){return typeof window>"u"?1:(i.ownerDocument.defaultView||window).devicePixelRatio||1}function Jx(i,e){const t=YM(i);return Math.round(e*t)/t}function pf(i){const e=S.useRef(i);return Wu(()=>{e.current=i}),e}function Yq(i){i===void 0&&(i={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=i,[u,h]=S.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[d,f]=S.useState(n);th(d,n)||f(n);const[p,m]=S.useState(null),[g,v]=S.useState(null),y=S.useCallback(P=>{P!==C.current&&(C.current=P,m(P))},[]),b=S.useCallback(P=>{P!==E.current&&(E.current=P,v(P))},[]),_=s||p,w=o||g,C=S.useRef(null),E=S.useRef(null),x=S.useRef(u),T=l!=null,O=pf(l),D=pf(r),A=pf(c),k=S.useCallback(()=>{if(!C.current||!E.current)return;const P={placement:e,strategy:t,middleware:d};D.current&&(P.platform=D.current),Gq(C.current,E.current,P).then(G=>{const V={...G,isPositioned:A.current!==!1};N.current&&!th(x.current,V)&&(x.current=V,qb.flushSync(()=>{h(V)}))})},[d,e,t,D,A]);Wu(()=>{c===!1&&x.current.isPositioned&&(x.current.isPositioned=!1,h(P=>({...P,isPositioned:!1})))},[c]);const N=S.useRef(!1);Wu(()=>(N.current=!0,()=>{N.current=!1}),[]),Wu(()=>{if(_&&(C.current=_),w&&(E.current=w),_&&w){if(O.current)return O.current(_,w,k);k()}},[_,w,k,O,T]);const z=S.useMemo(()=>({reference:C,floating:E,setReference:y,setFloating:b}),[y,b]),M=S.useMemo(()=>({reference:_,floating:w}),[_,w]),$=S.useMemo(()=>{const P={position:t,left:0,top:0};if(!M.floating)return P;const G=Jx(M.floating,u.x),V=Jx(M.floating,u.y);return a?{...P,transform:"translate("+G+"px, "+V+"px)",...YM(M.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:G,top:V}},[t,a,M.floating,u.x,u.y]);return S.useMemo(()=>({...u,update:k,refs:z,elements:M,floatingStyles:$}),[u,k,z,M,$])}const Bq=i=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:i,fn(t){const{element:n,padding:r}=typeof i=="function"?i(t):i;return n&&e(n)?n.current!=null?Qx({element:n.current,padding:r}).fn(t):{}:n?Qx({element:n,padding:r}).fn(t):{}}}},Hq=(i,e)=>({...Nq(i),options:[i,e]}),Uq=(i,e)=>({...Lq(i),options:[i,e]}),Vq=(i,e)=>({...zq(i),options:[i,e]}),Xq=(i,e)=>({...Fq(i),options:[i,e]}),Kq=(i,e)=>({...$q(i),options:[i,e]}),Zq=(i,e)=>({...jq(i),options:[i,e]}),Qq=(i,e)=>({...Bq(i),options:[i,e]});var Jq="Arrow",BM=S.forwardRef((i,e)=>{const{children:t,width:n=10,height:r=5,...s}=i;return I.jsx(ut.svg,{...s,ref:e,width:n,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:i.asChild?t:I.jsx("polygon",{points:"0,0 30,0 15,10"})})});BM.displayName=Jq;var eW=BM;function tW(i){const[e,t]=S.useState(void 0);return qr(()=>{if(i){t({width:i.offsetWidth,height:i.offsetHeight});const n=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=i.offsetWidth,a=i.offsetHeight;t({width:o,height:a})});return n.observe(i,{box:"border-box"}),()=>n.unobserve(i)}else t(void 0)},[i]),e}var Jb="Popper",[HM,UM]=Oa(Jb),[iW,VM]=HM(Jb),XM=i=>{const{__scopePopper:e,children:t}=i,[n,r]=S.useState(null);return I.jsx(iW,{scope:e,anchor:n,onAnchorChange:r,children:t})};XM.displayName=Jb;var KM="PopperAnchor",ZM=S.forwardRef((i,e)=>{const{__scopePopper:t,virtualRef:n,...r}=i,s=VM(KM,t),o=S.useRef(null),a=ii(e,o),l=S.useRef(null);return S.useEffect(()=>{const c=l.current;l.current=n?.current||o.current,c!==l.current&&s.onAnchorChange(l.current)}),n?null:I.jsx(ut.div,{...r,ref:a})});ZM.displayName=KM;var e0="PopperContent",[nW,rW]=HM(e0),QM=S.forwardRef((i,e)=>{const{__scopePopper:t,side:n="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:d=!1,updatePositionStrategy:f="optimized",onPlaced:p,...m}=i,g=VM(e0,t),[v,y]=S.useState(null),b=ii(e,q=>y(q)),[_,w]=S.useState(null),C=tW(_),E=C?.width??0,x=C?.height??0,T=n+(s!=="center"?"-"+s:""),O=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},D=Array.isArray(c)?c:[c],A=D.length>0,k={padding:O,boundary:D.filter(oW),altBoundary:A},{refs:N,floatingStyles:z,placement:M,isPositioned:$,middlewareData:P}=Yq({strategy:"fixed",placement:T,whileElementsMounted:(...q)=>kq(...q,{animationFrame:f==="always"}),elements:{reference:g.anchor},middleware:[Hq({mainAxis:r+x,alignmentAxis:o}),l&&Uq({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Vq():void 0,...k}),l&&Xq({...k}),Kq({...k,apply:({elements:q,rects:J,availableWidth:ne,availableHeight:oe})=>{const{width:Ye,height:Ve}=J.reference,he=q.floating.style;he.setProperty("--radix-popper-available-width",`${ne}px`),he.setProperty("--radix-popper-available-height",`${oe}px`),he.setProperty("--radix-popper-anchor-width",`${Ye}px`),he.setProperty("--radix-popper-anchor-height",`${Ve}px`)}}),_&&Qq({element:_,padding:a}),aW({arrowWidth:E,arrowHeight:x}),d&&Zq({strategy:"referenceHidden",...k})]}),[G,V]=tk(M),X=Ps(p);qr(()=>{$&&X?.()},[$,X]);const L=P.arrow?.x,j=P.arrow?.y,W=P.arrow?.centerOffset!==0,[H,U]=S.useState();return qr(()=>{v&&U(window.getComputedStyle(v).zIndex)},[v]),I.jsx("div",{ref:N.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:$?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[P.transformOrigin?.x,P.transformOrigin?.y].join(" "),...P.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:i.dir,children:I.jsx(nW,{scope:t,placedSide:G,onArrowChange:w,arrowX:L,arrowY:j,shouldHideArrow:W,children:I.jsx(ut.div,{"data-side":G,"data-align":V,...m,ref:b,style:{...m.style,animation:$?void 0:"none"}})})})});QM.displayName=e0;var JM="PopperArrow",sW={top:"bottom",right:"left",bottom:"top",left:"right"},ek=S.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,s=rW(JM,n),o=sW[s.placedSide];return I.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:I.jsx(eW,{...r,ref:t,style:{...r.style,display:"block"}})})});ek.displayName=JM;function oW(i){return i!==null}var aW=i=>({name:"transformOrigin",options:i,fn(e){const{placement:t,rects:n,middlewareData:r}=e,o=r.arrow?.centerOffset!==0,a=o?0:i.arrowWidth,l=o?0:i.arrowHeight,[c,u]=tk(t),h={start:"0%",center:"50%",end:"100%"}[u],d=(r.arrow?.x??0)+a/2,f=(r.arrow?.y??0)+l/2;let p="",m="";return c==="bottom"?(p=o?h:`${d}px`,m=`${-l}px`):c==="top"?(p=o?h:`${d}px`,m=`${n.floating.height+l}px`):c==="right"?(p=`${-l}px`,m=o?h:`${f}px`):c==="left"&&(p=`${n.floating.width+l}px`,m=o?h:`${f}px`),{data:{x:p,y:m}}}});function tk(i){const[e,t="center"]=i.split("-");return[e,t]}var lW=XM,cW=ZM,uW=QM,hW=ek,dW=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),fW="VisuallyHidden",ik=S.forwardRef((i,e)=>I.jsx(ut.span,{...i,ref:e,style:{...dW,...i.style}}));ik.displayName=fW;var pW=ik,[Bh]=Oa("Tooltip",[UM]),Hh=UM(),nk="TooltipProvider",mW=700,F_="tooltip.open",[gW,t0]=Bh(nk),rk=i=>{const{__scopeTooltip:e,delayDuration:t=mW,skipDelayDuration:n=300,disableHoverableContent:r=!1,children:s}=i,o=S.useRef(!0),a=S.useRef(!1),l=S.useRef(0);return S.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),I.jsx(gW,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:S.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:S.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:a,onPointerInTransitChange:S.useCallback(c=>{a.current=c},[]),disableHoverableContent:r,children:s})};rk.displayName=nk;var ql="Tooltip",[vW,Uh]=Bh(ql),sk=i=>{const{__scopeTooltip:e,children:t,open:n,defaultOpen:r,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=i,l=t0(ql,i.__scopeTooltip),c=Hh(e),[u,h]=S.useState(null),d=Ho(),f=S.useRef(0),p=o??l.disableHoverableContent,m=a??l.delayDuration,g=S.useRef(!1),[v,y]=$h({prop:n,defaultProp:r??!1,onChange:E=>{E?(l.onOpen(),document.dispatchEvent(new CustomEvent(F_))):l.onClose(),s?.(E)},caller:ql}),b=S.useMemo(()=>v?g.current?"delayed-open":"instant-open":"closed",[v]),_=S.useCallback(()=>{window.clearTimeout(f.current),f.current=0,g.current=!1,y(!0)},[y]),w=S.useCallback(()=>{window.clearTimeout(f.current),f.current=0,y(!1)},[y]),C=S.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{g.current=!0,y(!0),f.current=0},m)},[m,y]);return S.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),I.jsx(lW,{...c,children:I.jsx(vW,{scope:e,contentId:d,open:v,stateAttribute:b,trigger:u,onTriggerChange:h,onTriggerEnter:S.useCallback(()=>{l.isOpenDelayedRef.current?C():_()},[l.isOpenDelayedRef,C,_]),onTriggerLeave:S.useCallback(()=>{p?w():(window.clearTimeout(f.current),f.current=0)},[w,p]),onOpen:_,onClose:w,disableHoverableContent:p,children:t})})};sk.displayName=ql;var $_="TooltipTrigger",ok=S.forwardRef((i,e)=>{const{__scopeTooltip:t,...n}=i,r=Uh($_,t),s=t0($_,t),o=Hh(t),a=S.useRef(null),l=ii(e,a,r.onTriggerChange),c=S.useRef(!1),u=S.useRef(!1),h=S.useCallback(()=>c.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),I.jsx(cW,{asChild:!0,...o,children:I.jsx(ut.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...n,ref:l,onPointerMove:tt(i.onPointerMove,d=>{d.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),u.current=!0)}),onPointerLeave:tt(i.onPointerLeave,()=>{r.onTriggerLeave(),u.current=!1}),onPointerDown:tt(i.onPointerDown,()=>{r.open&&r.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:tt(i.onFocus,()=>{c.current||r.onOpen()}),onBlur:tt(i.onBlur,r.onClose),onClick:tt(i.onClick,r.onClose)})})});ok.displayName=$_;var yW="TooltipPortal",[lne,_W]=Bh(yW,{forceMount:void 0}),aa="TooltipContent",ak=S.forwardRef((i,e)=>{const t=_W(aa,i.__scopeTooltip),{forceMount:n=t.forceMount,side:r="top",...s}=i,o=Uh(aa,i.__scopeTooltip);return I.jsx(Pa,{present:n||o.open,children:o.disableHoverableContent?I.jsx(lk,{side:r,...s,ref:e}):I.jsx(bW,{side:r,...s,ref:e})})}),bW=S.forwardRef((i,e)=>{const t=Uh(aa,i.__scopeTooltip),n=t0(aa,i.__scopeTooltip),r=S.useRef(null),s=ii(e,r),[o,a]=S.useState(null),{trigger:l,onClose:c}=t,u=r.current,{onPointerInTransitChange:h}=n,d=S.useCallback(()=>{a(null),h(!1)},[h]),f=S.useCallback((p,m)=>{const g=p.currentTarget,v={x:p.clientX,y:p.clientY},y=CW(v,g.getBoundingClientRect()),b=TW(v,y),_=RW(m.getBoundingClientRect()),w=OW([...b,..._]);a(w),h(!0)},[h]);return S.useEffect(()=>()=>d(),[d]),S.useEffect(()=>{if(l&&u){const p=g=>f(g,u),m=g=>f(g,l);return l.addEventListener("pointerleave",p),u.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",m)}}},[l,u,f,d]),S.useEffect(()=>{if(o){const p=m=>{const g=m.target,v={x:m.clientX,y:m.clientY},y=l?.contains(g)||u?.contains(g),b=!IW(v,o);y?d():b&&(d(),c())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,u,o,c,d]),I.jsx(lk,{...i,ref:s})}),[wW,xW]=Bh(ql,{isInside:!1}),SW=wj("TooltipContent"),lk=S.forwardRef((i,e)=>{const{__scopeTooltip:t,children:n,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=i,l=Uh(aa,t),c=Hh(t),{onClose:u}=l;return S.useEffect(()=>(document.addEventListener(F_,u),()=>document.removeEventListener(F_,u)),[u]),S.useEffect(()=>{if(l.trigger){const h=d=>{d.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),I.jsx(Wb,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:I.jsxs(uW,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[I.jsx(SW,{children:n}),I.jsx(wW,{scope:t,isInside:!0,children:I.jsx(pW,{id:l.contentId,role:"tooltip",children:r||n})})]})})});ak.displayName=aa;var ck="TooltipArrow",EW=S.forwardRef((i,e)=>{const{__scopeTooltip:t,...n}=i,r=Hh(t);return xW(ck,t).isInside?null:I.jsx(hW,{...r,...n,ref:e})});EW.displayName=ck;function CW(i,e){const t=Math.abs(e.top-i.y),n=Math.abs(e.bottom-i.y),r=Math.abs(e.right-i.x),s=Math.abs(e.left-i.x);switch(Math.min(t,n,r,s)){case s:return"left";case r:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function TW(i,e,t=5){const n=[];switch(e){case"top":n.push({x:i.x-t,y:i.y+t},{x:i.x+t,y:i.y+t});break;case"bottom":n.push({x:i.x-t,y:i.y-t},{x:i.x+t,y:i.y-t});break;case"left":n.push({x:i.x+t,y:i.y-t},{x:i.x+t,y:i.y+t});break;case"right":n.push({x:i.x-t,y:i.y-t},{x:i.x-t,y:i.y+t});break}return n}function RW(i){const{top:e,right:t,bottom:n,left:r}=i;return[{x:r,y:e},{x:t,y:e},{x:t,y:n},{x:r,y:n}]}function IW(i,e){const{x:t,y:n}=i;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,h=l.x,d=l.y;u>n!=d>n&&t<(h-c)*(n-u)/(d-u)+c&&(r=!r)}return r}function OW(i){const e=i.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),PW(e)}function PW(i){if(i.length<=1)return i.slice();const e=[];for(let n=0;n<i.length;n++){const r=i[n];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let n=i.length-1;n>=0;n--){const r=i[n];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var DW=rk,AW=sk,MW=ok,uk=ak;const kW=DW,NW=AW,LW=MW,hk=S.forwardRef(({className:i,sideOffset:e=4,...t},n)=>I.jsx(uk,{ref:n,sideOffset:e,className:pe("z-50 origin-[--radix-tooltip-content-transform-origin] overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i),...t}));hk.displayName=uk.displayName;const FW="sidebar_state",$W=3600*24*7,jW="16rem",zW="18rem",GW="3rem",qW="b",dk=S.createContext(null);function Vh(){const i=S.useContext(dk);if(!i)throw new Error("useSidebar must be used within a SidebarProvider.");return i}const fk=S.forwardRef(({defaultOpen:i=!0,open:e,onOpenChange:t,className:n,style:r,children:s,...o},a)=>{const l=Cj(),[c,u]=S.useState(!1),[h,d]=S.useState(i),f=e??h,p=S.useCallback(y=>{const b=typeof y=="function"?y(f):y;t?t(b):d(b),document.cookie=`${FW}=${b}; path=/; max-age=${$W}`},[t,f]),m=S.useCallback(()=>l?u(y=>!y):p(y=>!y),[l,p,u]);S.useEffect(()=>{const y=b=>{b.key===qW&&(b.metaKey||b.ctrlKey)&&(b.preventDefault(),m())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[m]);const g=f?"expanded":"collapsed",v=S.useMemo(()=>({state:g,open:f,setOpen:p,isMobile:l,openMobile:c,setOpenMobile:u,toggleSidebar:m}),[g,f,p,l,c,u,m]);return I.jsx(dk.Provider,{value:v,children:I.jsx(kW,{delayDuration:0,children:I.jsx("div",{style:{"--sidebar-width":jW,"--sidebar-width-icon":GW,...r},className:pe("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",n),ref:a,...o,children:s})})})});fk.displayName="SidebarProvider";const pk=S.forwardRef(({side:i="left",variant:e="sidebar",collapsible:t="offcanvas",className:n,children:r,...s},o)=>{const{isMobile:a,state:l,openMobile:c,setOpenMobile:u}=Vh();return t==="none"?I.jsx("div",{className:pe("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",n),ref:o,...s,children:r}):a?I.jsx(zG,{open:c,onOpenChange:u,...s,children:I.jsxs(PM,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":zW},side:i,children:[I.jsxs(DM,{className:"sr-only",children:[I.jsx(AM,{children:"Sidebar"}),I.jsx(MM,{children:"Displays the mobile sidebar."})]}),I.jsx("div",{className:"flex h-full w-full flex-col",children:r})]})}):I.jsxs("div",{ref:o,className:"group peer hidden text-sidebar-foreground md:block","data-state":l,"data-collapsible":l==="collapsed"?t:"","data-variant":e,"data-side":i,children:[I.jsx("div",{className:pe("relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),I.jsx("div",{className:pe("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",i==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...s,children:I.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:r})})]})});pk.displayName="Sidebar";const WW=S.forwardRef(({className:i,onClick:e,...t},n)=>{const{toggleSidebar:r}=Vh();return I.jsxs(Bo,{ref:n,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:pe("h-7 w-7",i),onClick:s=>{e?.(s),r()},...t,children:[I.jsx(J$,{}),I.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});WW.displayName="SidebarTrigger";const mk=S.forwardRef(({className:i,...e},t)=>{const{toggleSidebar:n}=Vh();return I.jsx("button",{ref:t,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:n,className:pe("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",i),...e})});mk.displayName="SidebarRail";const gk=S.forwardRef(({className:i,...e},t)=>I.jsx("main",{ref:t,className:pe("relative flex w-full flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",i),...e}));gk.displayName="SidebarInset";const YW=S.forwardRef(({className:i,...e},t)=>I.jsx(HA,{ref:t,"data-sidebar":"input",className:pe("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",i),...e}));YW.displayName="SidebarInput";const vk=S.forwardRef(({className:i,...e},t)=>I.jsx("div",{ref:t,"data-sidebar":"header",className:pe("flex flex-col gap-2 p-2",i),...e}));vk.displayName="SidebarHeader";const BW=S.forwardRef(({className:i,...e},t)=>I.jsx("div",{ref:t,"data-sidebar":"footer",className:pe("flex flex-col gap-2 p-2",i),...e}));BW.displayName="SidebarFooter";const HW=S.forwardRef(({className:i,...e},t)=>I.jsx(XA,{ref:t,"data-sidebar":"separator",className:pe("mx-2 w-auto bg-sidebar-border",i),...e}));HW.displayName="SidebarSeparator";const yk=S.forwardRef(({className:i,...e},t)=>I.jsx("div",{ref:t,"data-sidebar":"content",className:pe("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",i),...e}));yk.displayName="SidebarContent";const _k=S.forwardRef(({className:i,...e},t)=>I.jsx("div",{ref:t,"data-sidebar":"group",className:pe("relative flex w-full min-w-0 flex-col p-2",i),...e}));_k.displayName="SidebarGroup";const bk=S.forwardRef(({className:i,asChild:e=!1,...t},n)=>{const r=e?Ta:"div";return I.jsx(r,{ref:n,"data-sidebar":"group-label",className:pe("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",i),...t})});bk.displayName="SidebarGroupLabel";const UW=S.forwardRef(({className:i,asChild:e=!1,...t},n)=>{const r=e?Ta:"button";return I.jsx(r,{ref:n,"data-sidebar":"group-action",className:pe("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",i),...t})});UW.displayName="SidebarGroupAction";const wk=S.forwardRef(({className:i,...e},t)=>I.jsx("div",{ref:t,"data-sidebar":"group-content",className:pe("w-full text-sm",i),...e}));wk.displayName="SidebarGroupContent";const xk=S.forwardRef(({className:i,...e},t)=>I.jsx("ul",{ref:t,"data-sidebar":"menu",className:pe("flex w-full min-w-0 flex-col gap-1",i),...e}));xk.displayName="SidebarMenu";const j_=S.forwardRef(({className:i,...e},t)=>I.jsx("li",{ref:t,"data-sidebar":"menu-item",className:pe("group/menu-item relative",i),...e}));j_.displayName="SidebarMenuItem";const VW=zb("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Yu=S.forwardRef(({asChild:i=!1,isActive:e=!1,variant:t="default",size:n="default",tooltip:r,className:s,...o},a)=>{const l=i?Ta:"button",{isMobile:c,state:u}=Vh(),h=I.jsx(l,{ref:a,"data-sidebar":"menu-button","data-size":n,"data-active":e,className:pe(VW({variant:t,size:n}),s),...o});return r?(typeof r=="string"&&(r={children:r}),I.jsxs(NW,{children:[I.jsx(LW,{asChild:!0,children:h}),I.jsx(hk,{side:"right",align:"center",hidden:u!=="collapsed"||c,...r})]})):h});Yu.displayName="SidebarMenuButton";const XW=S.forwardRef(({className:i,asChild:e=!1,showOnHover:t=!1,...n},r)=>{const s=e?Ta:"button";return I.jsx(s,{ref:r,"data-sidebar":"menu-action",className:pe("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",i),...n})});XW.displayName="SidebarMenuAction";const KW=S.forwardRef(({className:i,...e},t)=>I.jsx("div",{ref:t,"data-sidebar":"menu-badge",className:pe("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",i),...e}));KW.displayName="SidebarMenuBadge";const ZW=S.forwardRef(({className:i,showIcon:e=!1,...t},n)=>{const r=S.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return I.jsxs("div",{ref:n,"data-sidebar":"menu-skeleton",className:pe("flex h-8 items-center gap-2 rounded-md px-2",i),...t,children:[e&&I.jsx(Il,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),I.jsx(Il,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":r}})]})});ZW.displayName="SidebarMenuSkeleton";const QW=S.forwardRef(({className:i,...e},t)=>I.jsx("ul",{ref:t,"data-sidebar":"menu-sub",className:pe("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",i),...e}));QW.displayName="SidebarMenuSub";const JW=S.forwardRef(({...i},e)=>I.jsx("li",{ref:e,...i}));JW.displayName="SidebarMenuSubItem";const eY=S.forwardRef(({asChild:i=!1,size:e="md",isActive:t,className:n,...r},s)=>{const o=i?Ta:"a";return I.jsx(o,{ref:s,"data-sidebar":"menu-sub-button","data-size":e,"data-active":t,className:pe("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",n),...r})});eY.displayName="SidebarMenuSubButton";const Tt={ADD:"add",REMOVE:"remove"},la={PROPERTYCHANGE:"propertychange"},le={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Xh{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function tY(i,e,t){let n,r;t=t||Hn;let s=0,o=i.length,a=!1;for(;s<o;)n=s+(o-s>>1),r=+t(i[n],e),r<0?s=n+1:(o=n,a=!r);return a?s:~s}function Hn(i,e){return i>e?1:i<e?-1:0}function iY(i,e){return i<e?1:i>e?-1:0}function i0(i,e,t){if(i[0]<=e)return 0;const n=i.length;if(e<=i[n-1])return n-1;if(typeof t=="function"){for(let r=1;r<n;++r){const s=i[r];if(s===e)return r;if(s<e)return t(e,i[r-1],s)>0?r-1:r}return n-1}if(t>0){for(let r=1;r<n;++r)if(i[r]<e)return r-1;return n-1}if(t<0){for(let r=1;r<n;++r)if(i[r]<=e)return r;return n-1}for(let r=1;r<n;++r){if(i[r]==e)return r;if(i[r]<e)return i[r-1]-e<e-i[r]?r-1:r}return n-1}function nY(i,e,t){for(;e<t;){const n=i[e];i[e]=i[t],i[t]=n,++e,--t}}function ca(i,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let r=0;r<n;r++)i[i.length]=t[r]}function Ur(i,e){const t=i.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(i[n]!==e[n])return!1;return!0}function rY(i,e,t){const n=e||Hn;return i.every(function(r,s){if(s===0)return!0;const o=n(i[s-1],r);return!(o>0||o===0)})}function Ms(){return!0}function xc(){return!1}function Wl(){}function Sk(i){let e,t,n;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==n||!Ur(r,t))&&(n=this,t=r,e=i.apply(this,arguments)),e}}function sY(i){function e(){let t;try{t=i()}catch(n){return Promise.reject(n)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function Ma(i){for(const e in i)delete i[e]}function ua(i){let e;for(e in i)return!1;return!e}class Tn{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class Kh extends Xh{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),r=n[e]||(n[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,r=this.listeners_&&this.listeners_[n];if(!r)return;const s=t?new Tn(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let l;for(let c=0,u=r.length;c<u;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[n]===0){let c=a[n];for(delete a[n];c--;)this.removeEventListener(n,Wl);delete o[n]}return l}disposeInternal(){this.listeners_&&Ma(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const r=n.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[r]=Wl,++this.pendingRemovals_[e]):(n.splice(r,1),n.length===0&&delete this.listeners_[e]))}}function Re(i,e,t,n,r){if(r){const o=t;t=function(a){return i.removeEventListener(e,t),o.call(n??this,a)}}else n&&n!==i&&(t=t.bind(n));const s={target:i,type:e,listener:t};return i.addEventListener(e,t),s}function ih(i,e,t,n){return Re(i,e,t,n,!0)}function Be(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),Ma(i))}class Sc extends Kh{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(le.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=Re(this,e[s],t);return r}return Re(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const r=e.length;n=new Array(r);for(let s=0;s<r;++s)n[s]=ih(this,e[s],t)}else n=ih(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)oY(n);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}Sc.prototype.on;Sc.prototype.once;Sc.prototype.un;function oY(i){if(Array.isArray(i))for(let e=0,t=i.length;e<t;++e)Be(i[e]);else Be(i)}function Ie(){throw new Error("Unimplemented abstract method.")}let aY=0;function _e(i){return i.ol_uid||(i.ol_uid=String(++aY))}class eS extends Tn{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class rn extends Sc{constructor(e){super(),this.on,this.once,this.un,_e(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new eS(n,e,t)),n=la.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new eS(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const r=this.values_||(this.values_={});if(n)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],ua(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}const tS={LENGTH:"length"};class pu extends Tn{constructor(e,t,n){super(e),this.element=t,this.index=n}}let Yi=class extends rn{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,r=this.array_.length;n<r;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,r=t.length;n<r;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(tS.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new pu(Tt.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,r=t.length;n<r;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new pu(Tt.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new pu(Tt.REMOVE,r,e)),this.dispatchEvent(new pu(Tt.ADD,t,e))}updateLength_(){this.set(tS.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}};function Ae(i,e){if(!i)throw new Error(e)}class sr extends rn{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new sr(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Be(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Re(e,le.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?lY(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function lY(i){if(typeof i=="function")return i;let e;return Array.isArray(i)?e=i:(Ae(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[i]),function(){return e}}const Et={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function iS(i){const e=gi();for(let t=0,n=i.length;t<n;++t)Ol(e,i[t]);return e}function Zh(i,e,t){return t?(t[0]=i[0]-e,t[1]=i[1]-e,t[2]=i[2]+e,t[3]=i[3]+e,t):[i[0]-e,i[1]-e,i[2]+e,i[3]+e]}function Ek(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i.slice()}function n0(i,e,t){let n,r;return e<i[0]?n=i[0]-e:i[2]<e?n=e-i[2]:n=0,t<i[1]?r=i[1]-t:i[3]<t?r=t-i[3]:r=0,n*n+r*r}function ha(i,e){return Ck(i,e[0],e[1])}function ko(i,e){return i[0]<=e[0]&&e[2]<=i[2]&&i[1]<=e[1]&&e[3]<=i[3]}function Ck(i,e,t){return i[0]<=e&&e<=i[2]&&i[1]<=t&&t<=i[3]}function z_(i,e){const t=i[0],n=i[1],r=i[2],s=i[3],o=e[0],a=e[1];let l=Et.UNKNOWN;return o<t?l=l|Et.LEFT:o>r&&(l=l|Et.RIGHT),a<n?l=l|Et.BELOW:a>s&&(l=l|Et.ABOVE),l===Et.UNKNOWN&&(l=Et.INTERSECTING),l}function gi(){return[1/0,1/0,-1/0,-1/0]}function Br(i,e,t,n,r){return r?(r[0]=i,r[1]=e,r[2]=t,r[3]=n,r):[i,e,t,n]}function Qh(i){return Br(1/0,1/0,-1/0,-1/0,i)}function r0(i,e){const t=i[0],n=i[1];return Br(t,n,t,n,e)}function s0(i,e,t,n,r){const s=Qh(r);return Tk(s,i,e,t,n)}function Yl(i,e){return i[0]==e[0]&&i[2]==e[2]&&i[1]==e[1]&&i[3]==e[3]}function cY(i,e){return e[0]<i[0]&&(i[0]=e[0]),e[2]>i[2]&&(i[2]=e[2]),e[1]<i[1]&&(i[1]=e[1]),e[3]>i[3]&&(i[3]=e[3]),i}function Ol(i,e){e[0]<i[0]&&(i[0]=e[0]),e[0]>i[2]&&(i[2]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[1]>i[3]&&(i[3]=e[1])}function Tk(i,e,t,n,r){for(;t<n;t+=r)uY(i,e[t],e[t+1]);return i}function uY(i,e,t){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}function Rk(i,e){let t;return t=e(Jh(i)),t||(t=e(ed(i)),t)||(t=e(td(i)),t)||(t=e(Us(i)),t)?t:!1}function G_(i){let e=0;return id(i)||(e=Ne(i)*Yt(i)),e}function Jh(i){return[i[0],i[1]]}function ed(i){return[i[2],i[1]]}function Hr(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function hY(i,e){let t;if(e==="bottom-left")t=Jh(i);else if(e==="bottom-right")t=ed(i);else if(e==="top-left")t=Us(i);else if(e==="top-right")t=td(i);else throw new Error("Invalid corner");return t}function q_(i,e,t,n,r){const[s,o,a,l,c,u,h,d]=Ik(i,e,t,n);return Br(Math.min(s,a,c,h),Math.min(o,l,u,d),Math.max(s,a,c,h),Math.max(o,l,u,d),r)}function Ik(i,e,t,n){const r=e*n[0]/2,s=e*n[1]/2,o=Math.cos(t),a=Math.sin(t),l=r*o,c=r*a,u=s*o,h=s*a,d=i[0],f=i[1];return[d-l+h,f-c-u,d-l-h,f-c+u,d+l-h,f+c+u,d+l+h,f+c-u,d-l+h,f-c-u]}function Yt(i){return i[3]-i[1]}function xs(i,e,t){const n=t||gi();return Qt(i,e)?(i[0]>e[0]?n[0]=i[0]:n[0]=e[0],i[1]>e[1]?n[1]=i[1]:n[1]=e[1],i[2]<e[2]?n[2]=i[2]:n[2]=e[2],i[3]<e[3]?n[3]=i[3]:n[3]=e[3]):Qh(n),n}function Us(i){return[i[0],i[3]]}function td(i){return[i[2],i[3]]}function Ne(i){return i[2]-i[0]}function Qt(i,e){return i[0]<=e[2]&&i[2]>=e[0]&&i[1]<=e[3]&&i[3]>=e[1]}function id(i){return i[2]<i[0]||i[3]<i[1]}function dY(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i}function fY(i,e,t){let n=!1;const r=z_(i,e),s=z_(i,t);if(r===Et.INTERSECTING||s===Et.INTERSECTING)n=!0;else{const o=i[0],a=i[1],l=i[2],c=i[3],u=e[0],h=e[1],d=t[0],f=t[1],p=(f-h)/(d-u);let m,g;s&Et.ABOVE&&!(r&Et.ABOVE)&&(m=d-(f-c)/p,n=m>=o&&m<=l),!n&&s&Et.RIGHT&&!(r&Et.RIGHT)&&(g=f-(d-l)*p,n=g>=a&&g<=c),!n&&s&Et.BELOW&&!(r&Et.BELOW)&&(m=d-(f-a)/p,n=m>=o&&m<=l),!n&&s&Et.LEFT&&!(r&Et.LEFT)&&(g=f-(d-o)*p,n=g>=a&&g<=c)}return n}function Ok(i,e){const t=e.getExtent(),n=Hr(i);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const r=Ne(t),o=Math.floor((n[0]-t[0])/r)*r;i[0]-=o,i[2]-=o}return i}function Pk(i,e,t){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[n[0],i[1],n[2],i[3]]];Ok(i,e);const r=Ne(n);if(Ne(i)>r&&!t)return[[n[0],i[1],n[2],i[3]]];if(i[0]<n[0])return[[i[0]+r,i[1],n[2],i[3]],[n[0],i[1],i[2],i[3]]];if(i[2]>n[2])return[[i[0],i[1],n[2],i[3]],[n[0],i[1],i[2]-r,i[3]]]}return[i]}function it(i,e,t){return Math.min(Math.max(i,e),t)}function pY(i,e,t,n,r,s){const o=r-t,a=s-n;if(o!==0||a!==0){const l=((i-t)*o+(e-n)*a)/(o*o+a*a);l>1?(t=r,n=s):l>0&&(t+=o*l,n+=a*l)}return Xo(i,e,t,n)}function Xo(i,e,t,n){const r=t-i,s=n-e;return r*r+s*s}function mY(i){const e=i.length;for(let n=0;n<e;n++){let r=n,s=Math.abs(i[n][n]);for(let a=n+1;a<e;a++){const l=Math.abs(i[a][n]);l>s&&(s=l,r=a)}if(s===0)return null;const o=i[r];i[r]=i[n],i[n]=o;for(let a=n+1;a<e;a++){const l=-i[a][n]/i[n][n];for(let c=n;c<e+1;c++)n==c?i[a][c]=0:i[a][c]+=l*i[n][c]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=i[n][e]/i[n][n];for(let r=n-1;r>=0;r--)i[r][e]-=i[r][n]*t[n]}return t}function nS(i){return i*180/Math.PI}function Lr(i){return i*Math.PI/180}function Ko(i,e){const t=i%e;return t*e<0?t+e:t}function fi(i,e,t){return i+t*(e-i)}function nd(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}function mu(i,e){return Math.floor(nd(i,e))}function gu(i,e){return Math.ceil(nd(i,e))}function W_(i,e,t){if(i>=e&&i<t)return i;const n=t-e;return((i-e)%n+n)%n+e}const gY=63710088e-1;function rS(i,e,t){t=t||gY;const n=Lr(i[1]),r=Lr(e[1]),s=(r-n)/2,o=Lr(e[0]-i[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function Dk(...i){console.warn(...i)}function Ak(i,e){return i[0]+=+e[0],i[1]+=+e[1],i}function nh(i,e){let t=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=e[n]){t=!1;break}return t}function o0(i,e){const t=Math.cos(e),n=Math.sin(e),r=i[0]*t-i[1]*n,s=i[1]*t+i[0]*n;return i[0]=r,i[1]=s,i}function Mk(i,e){return i[0]*=e,i[1]*=e,i}function kk(i,e){if(e.canWrapX()){const t=Ne(e.getExtent()),n=vY(i,e,t);n&&(i[0]-=n*t)}return i}function vY(i,e,t){const n=e.getExtent();let r=0;return e.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(t=t||Ne(n),r=Math.floor((i[0]-n[0])/t)),r}const a0={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class l0{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||a0[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Ec=6378137,No=Math.PI*Ec,yY=[-No,-No,No,No],_Y=[-180,-85,180,85],vu=Ec*Math.log(Math.tan(Math.PI/2));class fo extends l0{constructor(e){super({code:e,units:"m",extent:yY,global:!0,worldExtent:_Y,getPointResolution:function(t,n){return t/Math.cosh(n[1]/Ec)}})}}const sS=[new fo("EPSG:3857"),new fo("EPSG:102100"),new fo("EPSG:102113"),new fo("EPSG:900913"),new fo("http://www.opengis.net/def/crs/EPSG/0/3857"),new fo("http://www.opengis.net/gml/srs/epsg.xml#3857")];function bY(i,e,t,n){const r=i.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=i.slice():e=new Array(r));for(let s=0;s<r;s+=n){e[s]=No*i[s]/180;let o=Ec*Math.log(Math.tan(Math.PI*(+i[s+1]+90)/360));o>vu?o=vu:o<-vu&&(o=-vu),e[s+1]=o}return e}function wY(i,e,t,n){const r=i.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=i.slice():e=new Array(r));for(let s=0;s<r;s+=n)e[s]=180*i[s]/No,e[s+1]=360*Math.atan(Math.exp(i[s+1]/Ec))/Math.PI-90;return e}const xY=6378137,oS=[-180,-90,180,90],SY=Math.PI*xY/180;class ss extends l0{constructor(e,t){super({code:e,units:"degrees",extent:oS,axisOrientation:t,global:!0,metersPerUnit:SY,worldExtent:oS})}}const aS=[new ss("CRS:84"),new ss("EPSG:4326","neu"),new ss("urn:ogc:def:crs:OGC:1.3:CRS84"),new ss("urn:ogc:def:crs:OGC:2:84"),new ss("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ss("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ss("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Y_={};function EY(i){return Y_[i]||Y_[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function CY(i,e){Y_[i]=e}let Zo={};function Bl(i,e,t){const n=i.getCode(),r=e.getCode();n in Zo||(Zo[n]={}),Zo[n][r]=t}function mf(i,e){return i in Zo&&e in Zo[i]?Zo[i][e]:null}const rh=.9996,Oi=.00669438,rd=Oi*Oi,sd=rd*Oi,fs=Oi/(1-Oi),lS=Math.sqrt(1-Oi),da=(1-lS)/(1+lS),Nk=da*da,c0=Nk*da,u0=c0*da,Lk=u0*da,Fk=1-Oi/4-3*rd/64-5*sd/256,TY=3*Oi/8+3*rd/32+45*sd/1024,RY=15*rd/256+45*sd/1024,IY=35*sd/3072,OY=3/2*da-27/32*c0+269/512*Lk,PY=21/16*Nk-55/32*u0,DY=151/96*c0-417/128*Lk,AY=1097/512*u0,sh=6378137;function MY(i,e,t){const n=i-5e5,o=(t.north?e:e-1e7)/rh/(sh*Fk),a=o+OY*Math.sin(2*o)+PY*Math.sin(4*o)+DY*Math.sin(6*o)+AY*Math.sin(8*o),l=Math.sin(a),c=l*l,u=Math.cos(a),h=l/u,d=h*h,f=d*d,p=1-Oi*c,m=Math.sqrt(1-Oi*c),g=sh/m,v=(1-Oi)/p,y=fs*u**2,b=y*y,_=n/(g*rh),w=_*_,C=w*_,E=C*_,x=E*_,T=x*_,O=a-h/v*(w/2-E/24*(5+3*d+10*y-4*b-9*fs))+T/720*(61+90*d+298*y+45*f-252*fs-3*b);let D=(_-C/6*(1+2*d+y)+x/120*(5-2*y+28*d-3*b+8*fs+24*f))/u;return D=W_(D+Lr($k(t.number)),-Math.PI,Math.PI),[nS(D),nS(O)]}const cS=-80,uS=84,kY=-180,NY=180;function LY(i,e,t){i=W_(i,kY,NY),e<cS?e=cS:e>uS&&(e=uS);const n=Lr(e),r=Math.sin(n),s=Math.cos(n),o=r/s,a=o*o,l=a*a,c=Lr(i),u=$k(t.number),h=Lr(u),d=sh/Math.sqrt(1-Oi*r**2),f=fs*s**2,p=s*W_(c-h,-Math.PI,Math.PI),m=p*p,g=m*p,v=g*p,y=v*p,b=y*p,_=sh*(Fk*n-TY*Math.sin(2*n)+RY*Math.sin(4*n)-IY*Math.sin(6*n)),w=rh*d*(p+g/6*(1-a+f)+y/120*(5-18*a+l+72*f-58*fs))+5e5;let C=rh*(_+d*o*(m/2+v/24*(5-a+9*f+4*f**2)+b/720*(61-58*a+l+600*f-330*fs)));return t.north||(C+=1e7),[w,C]}function $k(i){return(i-1)*6-180+3}const FY=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function jk(i){let e=0;for(const r of FY){const s=i.match(r);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,n=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(n=!0,t=e-32600),t?{number:t,north:n}:null}function hS(i,e){return function(t,n,r,s){const o=t.length;r=r>1?r:2,s=s??r,n||(r>2?n=t.slice():n=new Array(o));for(let a=0;a<o;a+=s){const l=t[a],c=t[a+1],u=i(l,c,e);n[a]=u[0],n[a+1]=u[1]}return n}}function $Y(i){return jk(i)?new l0({code:i,units:"m"}):null}function jY(i){const e=jk(i.getCode());return e?{forward:hS(LY,e),inverse:hS(MY,e)}:null}const zY=[jY],GY=[$Y];let B_=!0;function zk(i){B_=!1}function h0(i,e){if(e!==void 0){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];e=e}else e=i.slice();return e}function H_(i){CY(i.getCode(),i),Bl(i,i,h0)}function qY(i){i.forEach(H_)}function ni(i){if(typeof i!="string")return i;const e=EY(i);if(e)return e;for(const t of GY){const n=t(i);if(n)return n}return null}function dS(i,e,t,n){i=ni(i);let r;const s=i.getPointResolutionFunc();if(s)r=s(e,t);else{const o=i.getUnits();if(o=="degrees"&&!n||n=="degrees")r=e;else{const a=f0(i,ni("EPSG:4326"));if(!a&&o!=="degrees")r=e*i.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=a(c,c,2);const u=rS(c.slice(0,2),c.slice(2,4)),h=rS(c.slice(4,6),c.slice(6,8));r=(u+h)/2}const l=i.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function fS(i){qY(i),i.forEach(function(e){i.forEach(function(t){e!==t&&Bl(e,t,h0)})})}function WY(i,e,t,n){i.forEach(function(r){e.forEach(function(s){Bl(r,s,t),Bl(s,r,n)})})}function d0(i,e){return i?typeof i=="string"?ni(i):i:ni(e)}function YY(i){return(function(e,t,n,r){const s=e.length;n=n!==void 0?n:2,r=r??n,t=t!==void 0?t:new Array(s);for(let o=0;o<s;o+=r){const a=i(e.slice(o,o+n)),l=a.length;for(let c=0,u=r;c<u;++c)t[o+c]=c>=l?e[o+c]:a[c]}return t})}function Qo(i,e){return zk(),p0(i,"EPSG:4326","EPSG:3857")}function gf(i,e){if(i===e)return!0;const t=i.getUnits()===e.getUnits();return(i.getCode()===e.getCode()||f0(i,e)===h0)&&t}function f0(i,e){const t=i.getCode(),n=e.getCode();let r=mf(t,n);if(r)return r;let s=null,o=null;for(const l of zY)s||(s=l(i)),o||(o=l(e));if(!s&&!o)return null;const a="EPSG:4326";if(o)if(s)r=vf(s.inverse,o.forward);else{const l=mf(t,a);l&&(r=vf(l,o.forward))}else{const l=mf(a,n);l&&(r=vf(s.inverse,l))}return r&&(H_(i),H_(e),Bl(i,e,r)),r}function vf(i,e){return function(t,n,r,s){return n=i(t,n,r,s),e(n,n,r,s)}}function oh(i,e){const t=ni(i),n=ni(e);return f0(t,n)}function p0(i,e,t){const n=oh(e,t);if(!n){const r=ni(e).getCode(),s=ni(t).getCode();throw new Error(`No transform available between ${r} and ${s}`)}return n(i,void 0,i.length)}function U_(i,e){return i}function Fn(i,e){return B_&&!nh(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(B_=!1,Dk("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function Gk(i,e){return i}function Ar(i,e){return i}function BY(){fS(sS),fS(aS),WY(aS,sS,bY,wY)}BY();new Array(6);function Hi(){return[1,0,0,1,0,0]}function HY(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i}function Ct(i,e){const t=e[0],n=e[1];return e[0]=i[0]*t+i[2]*n+i[4],e[1]=i[1]*t+i[3]*n+i[5],e}function or(i,e,t,n,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return i[0]=n*c,i[1]=r*l,i[2]=-n*l,i[3]=r*c,i[4]=o*n*c-a*n*l+e,i[5]=o*r*l+a*r*c+t,i}function qk(i,e){const t=UY(e);Ae(t!==0,"Transformation matrix cannot be inverted");const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return i[0]=o/t,i[1]=-r/t,i[2]=-s/t,i[3]=n/t,i[4]=(s*l-o*a)/t,i[5]=-(n*l-r*a)/t,i}function UY(i){return i[0]*i[3]-i[1]*i[2]}const VY=[1e5,1e5,1e5,1e5,2,2];function XY(i){return"matrix("+i.join(", ")+")"}function pS(i){return i.substring(7,i.length-1).split(",").map(parseFloat)}function KY(i,e){const t=pS(i),n=pS(e);for(let r=0;r<6;++r)if(Math.round((t[r]-n[r])*VY[r])!==0)return!1;return!0}function Fr(i,e,t,n,r,s,o){s=s||[],o=o||2;let a=0;for(let l=e;l<t;l+=n){const c=i[l],u=i[l+1];s[a++]=r[0]*c+r[2]*u+r[4],s[a++]=r[1]*c+r[3]*u+r[5];for(let h=2;h<o;h++)s[a++]=i[l+h]}return s&&s.length!=a&&(s.length=a),s}function Wk(i,e,t,n,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],u=s[1];let h=0;for(let d=e;d<t;d+=n){const f=i[d]-c,p=i[d+1]-u;o[h++]=c+f*a-p*l,o[h++]=u+f*l+p*a;for(let m=d+2;m<d+n;++m)o[h++]=i[m]}return o&&o.length!=h&&(o.length=h),o}function ZY(i,e,t,n,r,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let h=e;h<t;h+=n){const d=i[h]-l,f=i[h+1]-c;a[u++]=l+r*d,a[u++]=c+s*f;for(let p=h+2;p<h+n;++p)a[u++]=i[p]}return a&&a.length!=u&&(a.length=u),a}function QY(i,e,t,n,r,s,o){o=o||[];let a=0;for(let l=e;l<t;l+=n){o[a++]=i[l]+r,o[a++]=i[l+1]+s;for(let c=l+2;c<l+n;++c)o[a++]=i[c]}return o&&o.length!=a&&(o.length=a),o}const mS=Hi(),JY=[NaN,NaN];class eB extends rn{constructor(){super(),this.extent_=gi(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Sk((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Ie()}closestPointXY(e,t,n,r){return Ie()}containsXY(e,t){return this.closestPointXY(e,t,JY,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Ie()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Qh(t),this.extentRevision_=this.getRevision()}return dY(this.extent_,e)}rotate(e,t){Ie()}scale(e,t,n){Ie()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Ie()}getType(){return Ie()}applyTransform(e){Ie()}intersectsExtent(e){return Ie()}translate(e,t){Ie()}transform(e,t){const n=ni(e),r=n.getUnits()=="tile-pixels"?function(s,o,a){const l=n.getExtent(),c=n.getWorldExtent(),u=Yt(c)/Yt(l);or(mS,c[0],c[3],u,-u,0,0,0);const h=Fr(s,0,s.length,a,mS,o),d=oh(n,t);return d?d(h,h,a):h}:oh(n,t);return this.applyTransform(r),this}}class od extends eB{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return s0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Ie()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=gS(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Ie()}setLayout(e,t,n){let r;if(e)r=gS(e);else{for(let s=0;s<n;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=tB(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const r=this.getStride();Wk(n,0,n.length,r,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=Hr(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();ZY(r,0,r.length,s,e,t,n,r),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const r=this.getStride();QY(n,0,n.length,r,e,t,n),this.changed()}}}function tB(i){let e;return i==2?e="XY":i==3?e="XYZ":i==4&&(e="XYZM"),e}function gS(i){let e;return i=="XY"?e=2:i=="XYZ"||i=="XYM"?e=3:i=="XYZM"&&(e=4),e}function iB(i,e,t){const n=i.getFlatCoordinates();if(!n)return null;const r=i.getStride();return Fr(n,0,n.length,r,e,t)}function Yk(i,e,t,n){let r=0;const s=i[t-n],o=i[t-n+1];let a=0,l=0;for(;e<t;e+=n){const c=i[e]-s,u=i[e+1]-o;r+=l*c-a*u,a=c,l=u}return r/2}function nB(i,e,t,n){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=Yk(i,e,a,n),e=a}return r}function vS(i,e,t,n,r,s,o){const a=i[e],l=i[e+1],c=i[t]-a,u=i[t+1]-l;let h;if(c===0&&u===0)h=e;else{const d=((r-a)*c+(s-l)*u)/(c*c+u*u);if(d>1)h=t;else if(d>0){for(let f=0;f<n;++f)o[f]=fi(i[e+f],i[t+f],d);o.length=n;return}else h=e}for(let d=0;d<n;++d)o[d]=i[h+d];o.length=n}function m0(i,e,t,n,r){let s=i[e],o=i[e+1];for(e+=n;e<t;e+=n){const a=i[e],l=i[e+1],c=Xo(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function rB(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=m0(i,e,a,n,r),e=a}return r}function g0(i,e,t,n,r,s,o,a,l,c,u){if(e==t)return c;let h,d;if(r===0){if(d=Xo(o,a,i[e],i[e+1]),d<c){for(h=0;h<n;++h)l[h]=i[e+h];return l.length=n,d}return c}u=u||[NaN,NaN];let f=e+n;for(;f<t;)if(vS(i,f-n,f,n,o,a,u),d=Xo(o,a,u[0],u[1]),d<c){for(c=d,h=0;h<n;++h)l[h]=u[h];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(d)-Math.sqrt(c))/r|0,1);if(s&&(vS(i,t-n,e,n,o,a,u),d=Xo(o,a,u[0],u[1]),d<c)){for(c=d,h=0;h<n;++h)l[h]=u[h];l.length=n}return c}function sB(i,e,t,n,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const f=t[h];c=g0(i,e,f,n,r,s,o,a,l,c,u),e=f}return c}function oB(i,e,t,n){for(let r=0,s=t.length;r<s;++r)i[e++]=t[r];return e}function v0(i,e,t,n){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0;a<n;++a)i[e++]=o[a]}return e}function aB(i,e,t,n,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=v0(i,e,t[o],n);r[s++]=l,e=l}return r.length=s,r}function ps(i,e,t,n,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<t;o+=n)r[s++]=i.slice(o,o+n);return r.length=s,r}function ah(i,e,t,n,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=ps(i,e,l,n,r[s]),e=l}return r.length=s,r}function yS(i,e,t,n,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=l.length===1&&l[0]===e?[]:ah(i,e,l,n,r[s]),e=l[l.length-1]}return r.length=s,r}function ad(i,e,t,n,r,s,o){const a=(t-e)/n;if(a<3){for(;e<t;e+=n)s[o++]=i[e],s[o++]=i[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,t-n];let u=0;for(;c.length>0;){const h=c.pop(),d=c.pop();let f=0;const p=i[d],m=i[d+1],g=i[h],v=i[h+1];for(let y=d+n;y<h;y+=n){const b=i[y],_=i[y+1],w=pY(b,_,p,m,g,v);w>f&&(u=y,f=w)}f>r&&(l[(u-e)/n]=1,d+n<u&&c.push(d,u),u+n<h&&c.push(u,h))}for(let h=0;h<a;++h)l[h]&&(s[o++]=i[e+h*n],s[o++]=i[e+h*n+1]);return o}function lB(i,e,t,n,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l];o=ad(i,e,u,n,r,s,o),a.push(o),e=u}return o}function us(i,e){return e*Math.round(i/e)}function cB(i,e,t,n,r,s,o){if(e==t)return o;let a=us(i[e],r),l=us(i[e+1],r);e+=n,s[o++]=a,s[o++]=l;let c,u;do if(c=us(i[e],r),u=us(i[e+1],r),e+=n,e==t)return s[o++]=c,s[o++]=u,o;while(c==a&&u==l);for(;e<t;){const h=us(i[e],r),d=us(i[e+1],r);if(e+=n,h==c&&d==u)continue;const f=c-a,p=u-l,m=h-a,g=d-l;if(f*g==p*m&&(f<0&&m<f||f==m||f>0&&m>f)&&(p<0&&g<p||p==g||p>0&&g>p)){c=h,u=d;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=h,u=d}return s[o++]=c,s[o++]=u,o}function Bk(i,e,t,n,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l];o=cB(i,e,u,n,r,s,o),a.push(o),e=u}return o}class Hl extends od{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Hl(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,r){return r<n0(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(m0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),g0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,r))}getArea(){return Yk(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return ps(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=ad(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Hl(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=v0(this.flatCoordinates,0,e,this.stride),this.changed()}}class Vr extends od{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Vr(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){const s=this.flatCoordinates,o=Xo(e,t,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)n[l]=s[l];return n.length=a,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return r0(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Ck(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=oB(this.flatCoordinates,0,e,this.stride),this.changed()}}function uB(i,e,t,n,r){return!Rk(r,function(o){return!ms(i,e,t,n,o[0],o[1])})}function ms(i,e,t,n,r,s){let o=0,a=i[t-n],l=i[t-n+1];for(;e<t;e+=n){const c=i[e],u=i[e+1];l<=s?u>s&&(c-a)*(s-l)-(r-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(r-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function Hk(i,e,t,n,r,s){if(t.length===0||!ms(i,e,t[0],n,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if(ms(i,t[o-1],t[o],n,r,s))return!1;return!0}function y0(i,e,t,n,r,s,o){let a,l,c,u,h,d,f;const p=r[s+1],m=[];for(let y=0,b=t.length;y<b;++y){const _=t[y];for(u=i[_-n],d=i[_-n+1],a=e;a<_;a+=n)h=i[a],f=i[a+1],(p<=d&&f<=p||d<=p&&p<=f)&&(c=(p-d)/(f-d)*(h-u)+u,m.push(c)),u=h,d=f}let g=NaN,v=-1/0;for(m.sort(Hn),u=m[0],a=1,l=m.length;a<l;++a){h=m[a];const y=Math.abs(h-u);y>v&&(c=(u+h)/2,Hk(i,e,t,n,c,p)&&(g=c,v=y)),u=h}return isNaN(g)&&(g=r[s]),o?(o.push(g,p,v),o):[g,p,v]}function hB(i,e,t,n,r){let s=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];s=y0(i,e,l,n,r,2*o,s),e=l[l.length-1]}return s}function Uk(i,e,t,n,r){let s;for(e+=n;e<t;e+=n)if(s=r(i.slice(e-n,e),i.slice(e,e+n)),s)return s;return!1}function _0(i,e,t,n,r,s){return s=s??Tk(gi(),i,e,t,n),Qt(r,s)?s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:Uk(i,e,t,n,function(o,a){return fY(r,o,a)}):!1}function Vk(i,e,t,n,r){return!!(_0(i,e,t,n,r)||ms(i,e,t,n,r[0],r[1])||ms(i,e,t,n,r[0],r[3])||ms(i,e,t,n,r[2],r[1])||ms(i,e,t,n,r[2],r[3]))}function dB(i,e,t,n,r){if(!Vk(i,e,t[0],n,r))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(uB(i,t[s-1],t[s],n,r)&&!_0(i,t[s-1],t[s],n,r))return!1;return!0}function fB(i,e,t,n){for(;e<t-n;){for(let r=0;r<n;++r){const s=i[e+r];i[e+r]=i[t-n+r],i[t-n+r]=s}e+=n,t-=n}}function b0(i,e,t,n){let r=0,s=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],l=i[e+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function pB(i,e,t,n,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=b0(i,e,a,n);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}function _S(i,e,t,n,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=b0(i,e,a,n);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&fB(i,e,a,n),e=a}return e}function mB(i,e){const t=[];let n=0,r=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=b0(i,n,l,2);if(s===void 0&&(s=c),c===s)t.push(e.slice(r,o+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=o+1,n=l}return t}class Ul extends od{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?ca(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Ul(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,r){return r<n0(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(rB(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),sB(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,r))}containsXY(e,t){return Hk(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return nB(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),_S(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,ah(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Hr(this.getExtent());this.flatInteriorPoint_=y0(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Vr(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Hl(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new Hl(t.slice(s,l),e);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;pB(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=_S(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=Bk(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new Ul(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return dB(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=aB(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function bS(i){if(id(i))throw new Error("Cannot create polygon from empty extent");const e=i[0],t=i[1],n=i[2],r=i[3],s=[e,t,e,r,n,r,n,t,e,t];return new Ul(s,"XY",[s.length])}function V_(i,e,t,n,r,s,o){let a,l;const c=(t-e)/n;if(c===1)a=e;else if(c===2)a=e,l=r;else if(c!==0){let u=i[e],h=i[e+1],d=0;const f=[0];for(let g=e+n;g<t;g+=n){const v=i[g],y=i[g+1];d+=Math.sqrt((v-u)*(v-u)+(y-h)*(y-h)),f.push(d),u=v,h=y}const p=r*d,m=tY(f,p);m<0?(l=(p-f[-m-2])/(f[-m-1]-f[-m-2]),a=e+(-m-2)*n):a=e+m*n}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=a===void 0?NaN:l===void 0?i[a+u]:fi(i[a+u],i[a+n+u],l);return s}function gB(i,e,t,n,r,s){if(t==e)return null;let o;if(r<i[e+n-1])return s?(o=i.slice(e,e+n),o[n-1]=r,o):null;if(i[t-1]<r)return s?(o=i.slice(t-n,t),o[n-1]=r,o):null;if(r==i[e+n-1])return i.slice(e,e+n);let a=e/n,l=t/n;for(;a<l;){const d=a+l>>1;r<i[(d+1)*n-1]?l=d:a=d+1}const c=i[a*n-1];if(r==c)return i.slice((a-1)*n,(a-1)*n+n);const u=i[(a+1)*n-1],h=(r-c)/(u-c);o=[];for(let d=0;d<n-1;++d)o.push(fi(i[(a-1)*n+d],i[a*n+d],h));return o.push(r),o}function Xk(i,e,t,n){let r=i[e],s=i[e+1],o=0;for(let a=e+n;a<t;a+=n){const l=i[a],c=i[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}class lh extends od{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){ca(this.flatCoordinates,e),this.changed()}clone(){const e=new lh(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){return r<n0(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(m0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),g0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,r))}forEachSegment(e){return Uk(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,gB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return ps(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return V_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return Xk(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=ad(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new lh(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return _0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=v0(this.flatCoordinates,0,e,this.stride),this.changed()}}const Ti={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ks=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",vB=ks.includes("safari")&&!ks.includes("chrom");vB&&(ks.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ks));const yB=ks.includes("webkit")&&!ks.includes("edge"),w0=ks.includes("macintosh"),_B=typeof devicePixelRatio<"u"?devicePixelRatio:1,x0=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Kk=typeof Image<"u"&&Image.prototype.decode,Zk=(function(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i})(),me={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function bt(i,e,t,n){let r;return t&&t.length?r=t.shift():x0?r=new OffscreenCanvas(i||300,e||300):r=document.createElement("canvas"),i&&(r.width=i),e&&(r.height=e),r.getContext("2d",n)}let yf;function ch(){return yf||(yf=bt(1,1)),yf}function ld(i){const e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}function bB(i){let e=i.offsetWidth;const t=getComputedStyle(i);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function wB(i){let e=i.offsetHeight;const t=getComputedStyle(i);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function wS(i,e){const t=e.parentNode;t&&t.replaceChild(i,e)}function Qk(i){for(;i.lastChild;)i.lastChild.remove()}function xB(i,e){const t=i.childNodes;for(let n=0;;++n){const r=t[n],s=e[n];if(!r&&!s)break;if(r!==s){if(!r){i.appendChild(s);continue}if(!s){i.removeChild(r),--n;continue}i.insertBefore(s,r)}}}const S0=[NaN,NaN,NaN,0];let _f;function SB(){return _f||(_f=bt(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),_f}const EB=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,CB=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,TB=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,RB=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function yu(i,e){return i.endsWith("%")?Number(i.substring(0,i.length-1))/e:Number(i)}function Pl(i){throw new Error('failed to parse "'+i+'" as color')}function Jk(i){if(i.toLowerCase().startsWith("rgb")){const s=i.match(CB)||i.match(EB)||i.match(TB);if(s){const o=s[4],a=100/255;return[it(yu(s[1],a)+.5|0,0,255),it(yu(s[2],a)+.5|0,0,255),it(yu(s[3],a)+.5|0,0,255),o!==void 0?it(yu(o,100),0,1):1]}Pl(i)}if(i.startsWith("#")){if(RB.test(i)){const s=i.substring(1),o=s.length<=4?1:2,a=[0,0,0,255];for(let l=0,c=s.length;l<c;l+=o){let u=parseInt(s.substring(l,l+o),16);o===1&&(u+=u<<4),a[l/o]=u}return a[3]=a[3]/255,a}Pl(i)}const e=SB();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=i,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=i,e.fillStyle===t&&Pl(i));const n=e.fillStyle;if(n.startsWith("#")||n.startsWith("rgba"))return Jk(n);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const r=Array.from(e.getImageData(0,0,1,1).data);return r[3]=nd(r[3]/255,3),r}function IB(i){return typeof i=="string"?i:C0(i)}const OB=1024,ol={};let bf=0;function PB(i){if(i.length===4)return i;const e=i.slice();return e[3]=1,e}function wf(i){return i>.0031308?Math.pow(i,1/2.4)*269.025-14.025:i*3294.6}function xf(i){return i>.2068965?Math.pow(i,3):(i-4/29)*(108/841)}function Sf(i){return i>10.314724?Math.pow((i+14.025)/269.025,2.4):i/3294.6}function Ef(i){return i>.0088564?Math.pow(i,1/3):i/(108/841)+4/29}function xS(i){const e=Sf(i[0]),t=Sf(i[1]),n=Sf(i[2]),r=Ef(e*.222488403+t*.716873169+n*.06060791),s=500*(Ef(e*.452247074+t*.399439023+n*.148375274)-r),o=200*(r-Ef(e*.016863605+t*.117638439+n*.865350722)),a=Math.atan2(o,s)*(180/Math.PI);return[116*r-16,Math.sqrt(s*s+o*o),a<0?a+360:a,i[3]]}function DB(i){const e=(i[0]+16)/116,t=i[1],n=i[2]*Math.PI/180,r=xf(e),s=xf(e+t/500*Math.cos(n)),o=xf(e-t/200*Math.sin(n)),a=wf(s*3.021973625-r*1.617392459-o*.404875592),l=wf(s*-.943766287+r*1.916279586+o*.027607165),c=wf(s*.069407491-r*.22898585+o*1.159737864);return[it(a+.5|0,0,255),it(l+.5|0,0,255),it(c+.5|0,0,255),i[3]]}function E0(i){if(i==="none")return S0;if(ol.hasOwnProperty(i))return ol[i];if(bf>=OB){let t=0;for(const n in ol)(t++&3)===0&&(delete ol[n],--bf)}const e=Jk(i);e.length!==4&&Pl(i);for(const t of e)isNaN(t)&&Pl(i);return ol[i]=e,++bf,e}function fa(i){return Array.isArray(i)?i:E0(i)}function C0(i){let e=i[0];e!=(e|0)&&(e=e+.5|0);let t=i[1];t!=(t|0)&&(t=t+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const r=i[3]===void 0?1:Math.round(i[3]*1e3)/1e3;return"rgba("+e+","+t+","+n+","+r+")"}function AB(i,e,t){const n=i;let r=!0,s=!1,o=!1;const a=[ih(n,le.LOAD,function(){o=!0,s||e()})];return n.src&&Kk?(s=!0,n.decode().then(function(){r&&e()}).catch(function(l){r&&(o?e():t())})):a.push(ih(n,le.ERROR,t)),function(){r=!1,a.forEach(Be)}}function MB(i,e){return new Promise((t,n)=>{function r(){o(),t(i)}function s(){o(),n(new Error("Image load error"))}function o(){i.removeEventListener("load",r),i.removeEventListener("error",s)}i.addEventListener("load",r),i.addEventListener("error",s)})}function kB(i,e){return e&&(i.src=e),i.src&&Kk?new Promise((t,n)=>i.decode().then(()=>t(i)).catch(r=>i.complete&&i.width?t(i):n(r))):MB(i)}class NB{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];(e++&3)===0&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){const r=Cf(e,t,n);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,n){const r=Cf(e,t,n);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,n,r,s){const o=Cf(e,t,n),a=o in this.cache_;this.cache_[o]=r,s&&(r.getImageState()===me.IDLE&&r.load(),r.getImageState()===me.LOADING?r.ready().then(()=>{this.patternCache_[o]=ch().createPattern(r.getImage(1),"repeat")}):this.patternCache_[o]=ch().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Cf(i,e,t){const n=t?fa(t):"null";return e+":"+i+":"+n}const Ri=new NB;let al=null;class eN extends Kh{constructor(e,t,n,r,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=s,this.imageState_=r===void 0?me.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===me.LOADED){al||(al=bt(1,1,void 0,{willReadFrequently:!0})),al.drawImage(this.image_,0,0);try{al.getImageData(0,0,1,1),this.tainted_=!1}catch{al=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(le.CHANGE)}handleImageError_(){this.imageState_=me.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=me.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=bt(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===me.IDLE){this.image_||this.initializeImage_(),this.imageState_=me.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&kB(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==me.LOADED)return;const t=this.image_,n=bt(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=n.canvas;n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=IB(this.color_),n.fillRect(0,0,r.width/e,r.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===me.LOADED||this.imageState_===me.ERROR)e();else{const t=()=>{(this.imageState_===me.LOADED||this.imageState_===me.ERROR)&&(this.removeEventListener(le.CHANGE,t),e())};this.addEventListener(le.CHANGE,t)}})),this.ready_}}function T0(i,e,t,n,r,s){let o=e===void 0?void 0:Ri.get(e,t,r);return o||(o=new eN(i,i&&"src"in i?i.src||void 0:e,t,n,r),Ri.set(e,t,r,o,s)),s&&o&&!Ri.getPattern(e,t,r)&&Ri.set(e,t,r,o,s),o}function mn(i){return i?Array.isArray(i)?C0(i):typeof i=="object"&&"src"in i?LB(i):i:null}function LB(i){if(!i.offset||!i.size)return Ri.getPattern(i.src,"anonymous",i.color);const e=i.src+":"+i.offset,t=Ri.getPattern(e,void 0,i.color);if(t)return t;const n=Ri.get(i.src,"anonymous",null);if(n.getImageState()!==me.LOADED)return null;const r=bt(i.size[0],i.size[1]);return r.drawImage(n.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),T0(r.canvas,e,void 0,me.LOADED,i.color,!0),Ri.getPattern(e,void 0,i.color)}class tN{drawCustom(e,t,n,r,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,n){}drawFeature(e,t,n){}drawGeometryCollection(e,t,n){}drawLineString(e,t,n){}drawMultiLineString(e,t,n){}drawMultiPoint(e,t,n){}drawMultiPolygon(e,t,n){}drawPoint(e,t,n){}drawPolygon(e,t,n){}drawText(e,t,n){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const _u="ol-hidden",FB="ol-selectable",cd="ol-unselectable",R0="ol-control",SS="ol-collapsed",$B=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),ES=["style","variant","weight","size","lineHeight","family"],X_={normal:400,bold:700},K_=function(i){const e=i.match($B);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let n=0,r=ES.length;n<r;++n){const s=e[n+1];s!==void 0&&(t[ES[n]]=typeof s=="string"?s.trim():s)}return isNaN(Number(t.weight))&&t.weight in X_&&(t.weight=X_[t.weight]),t.families=t.family.split(/,\s?/).map(n=>n.trim().replace(/^['"]|['"]$/g,"")),t},iN="10px sans-serif",Kt="#000",pa="round",Un=[],Vn=0,ma="round",Vl=10,Xl="#000",Kl="center",uh="middle",gs=[0,0,0,0],Zl=1,Io=new rn;let ll=null,CS;const Z_={},jB=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function zB(i,e,t){return`${i} ${e} 16px "${t}"`}const GB=(function(){let e,t;async function n(s){await t.ready;const o=await t.load(s);if(o.length===0)return!1;const a=K_(s),l=a.families[0].toLowerCase(),c=a.weight;return o.some(u=>{const h=u.family.replace(/^['"]|['"]$/g,"").toLowerCase(),d=X_[u.weight]||u.weight;return h===l&&u.style===a.style&&d==c})}async function r(){await t.ready;let s=!0;const o=Io.getProperties(),a=Object.keys(o).filter(l=>o[l]<100);for(let l=a.length-1;l>=0;--l){const c=a[l];let u=o[c];u<100&&(await n(c)?(Ma(Z_),Io.set(c,100)):(u+=10,Io.set(c,u,!0),u<100&&(s=!1)))}e=void 0,s||(e=setTimeout(r,100))}return async function(s){t||(t=x0?self.fonts:document.fonts);const o=K_(s);if(!o)return;const a=o.families;let l=!1;for(const c of a){if(jB.has(c))continue;const u=zB(o.style,o.weight,c);Io.get(u)===void 0&&(Io.set(u,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(r,100))}})(),qB=(function(){let i;return function(e){let t=Z_[e];if(t==null){if(x0){const n=K_(e),r=nN(e,"Žg");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);Z_[e]=t}return t}})();function nN(i,e){return ll||(ll=bt(1,1)),i!=CS&&(ll.font=i,CS=ll.font),ll.measureText(e)}function rN(i,e){return nN(i,e).width}function TS(i,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((r,s)=>Math.max(r,rN(i,s)),0);return t[e]=n,n}function WB(i,e){const t=[],n=[],r=[];let s=0,o=0,a=0,l=0;for(let c=0,u=e.length;c<=u;c+=2){const h=e[c];if(h===`
`||c===u){s=Math.max(s,o),r.push(o),o=0,a+=l,l=0;continue}const d=e[c+1]||i.font,f=rN(d,h);t.push(f),o+=f;const p=qB(d);n.push(p),l=Math.max(l,p)}return{width:s,height:a,widths:t,heights:n,lineWidths:r}}function YB(i,e,t,n,r,s,o,a,l,c,u){i.save(),t!==1&&(i.globalAlpha===void 0?i.globalAlpha=h=>h.globalAlpha*=t:i.globalAlpha*=t),e&&i.transform.apply(i,e),n.contextInstructions?(i.translate(l,c),i.scale(u[0],u[1]),BB(n,i)):u[0]<0||u[1]<0?(i.translate(l,c),i.scale(u[0],u[1]),i.drawImage(n,r,s,o,a,0,0,o,a)):i.drawImage(n,r,s,o,a,l,c,o*u[0],a*u[1]),i.restore()}function BB(i,e){const t=i.contextInstructions;for(let n=0,r=t.length;n<r;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class HB extends tN{constructor(e,t,n,r,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=r,this.transformRotation_=r?nd(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Hi()}drawImages_(e,t,n,r){if(!this.image_)return;const s=Fr(e,t,n,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,h=s.length;u<h;u+=2){const d=s[u]-this.imageAnchorX_,f=s[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const p=d+this.imageAnchorX_,m=f+this.imageAnchorY_;or(a,p,m,1,1,c,-p,-m),o.save(),o.transform.apply(o,a),o.translate(p,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,n,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Fr(e,t,n,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<n;t+=r){const l=s[t]+this.textOffsetX_,c=s[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,t,n,r,s){const o=this.context_,a=Fr(e,t,n,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),n}drawRings_(e,t,n,r){for(let s=0,o=n.length;s<o;++s)t=this.moveToLineTo_(e,t,n[s],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Qt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=iB(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(n*n+r*r),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);n&&(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,r=t.length;n<r;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Qt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Qt(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();n.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Qt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Qt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];r=this.drawRings_(n,r,c,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),Ur(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,r=e.textAlign?e.textAlign:Kl;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=r&&(n.textAlign=r,t.textAlign=r),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:mn(n||Kt)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),u=s||Un;this.strokeState_={lineCap:r!==void 0?r:pa,lineDash:this.pixelRatio_===1?u:u.map(h=>h*this.pixelRatio_),lineDashOffset:(o||Vn)*this.pixelRatio_,lineJoin:a!==void 0?a:ma,lineWidth:(l!==void 0?l:Zl)*this.pixelRatio_,miterLimit:c!==void 0?c:Vl,strokeStyle:mn(n||Xl)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*n,this.imageAnchorY_=r[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const f=t.getColor();this.textFillState_={fillStyle:mn(f||Kt)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const f=n.getColor(),p=n.getLineCap(),m=n.getLineDash(),g=n.getLineDashOffset(),v=n.getLineJoin(),y=n.getWidth(),b=n.getMiterLimit();this.textStrokeState_={lineCap:p!==void 0?p:pa,lineDash:m||Un,lineDashOffset:g||Vn,lineJoin:v!==void 0?v:ma,lineWidth:y!==void 0?y:Zl,miterLimit:b!==void 0?b:Vl,strokeStyle:mn(f||Xl)}}const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),u=e.getText(),h=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:r!==void 0?r:iN,textAlign:h!==void 0?h:Kl,textBaseline:d!==void 0?d:uh},this.text_=u!==void 0?Array.isArray(u)?u.reduce((f,p,m)=>f+=m%2?" ":p,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const UB=.5,sN={Point:tH,LineString:QB,Polygon:nH,MultiPoint:iH,MultiLineString:JB,MultiPolygon:eH,GeometryCollection:ZB,Circle:XB};function VB(i,e){return parseInt(_e(i),10)-parseInt(_e(e),10)}function RS(i,e){const t=oN(i,e);return t*t}function oN(i,e){return UB*i/e}function XB(i,e,t,n,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=i.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,n,r)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}function IS(i,e,t,n,r,s,o,a){const l=[],c=t.getImage();if(c){let d=!0;const f=c.getImageState();f==me.LOADED||f==me.ERROR?d=!1:f==me.IDLE&&c.load(),d&&l.push(c.ready())}const u=t.getFill();u&&u.loading()&&l.push(u.ready());const h=l.length>0;return h&&Promise.all(l).then(()=>r(null)),KB(i,e,t,n,s,o,a),h}function KB(i,e,t,n,r,s,o){const a=t.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(n,r);if(t.getRenderer())aN(i,l,t,e,o);else{const u=sN[l.getType()];u(i,l,t,e,o,s)}}function aN(i,e,t,n,r){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)aN(i,o[a],t,n,r);return}i.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer(),r)}function ZB(i,e,t,n,r,s){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const c=sN[o[a].getType()];c(i,o[a],t,n,r,s)}}function QB(i,e,t,n,r){const s=t.getStroke();if(s){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,n,r)}const o=t.getText();if(o&&o.getText()){const a=i.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n,r)}}function JB(i,e,t,n,r){const s=t.getStroke();if(s){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,n,r)}const o=t.getText();if(o&&o.getText()){const a=i.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n,r)}}function eH(i,e,t,n,r){const s=t.getFill(),o=t.getStroke();if(o||s){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,n,r)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n,r)}}function tH(i,e,t,n,r,s){const o=t.getImage(),a=t.getText(),l=a&&a.getText(),c=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=me.LOADED)return;const u=i.getBuilder(t.getZIndex(),"Image");u.setImageStyle(o,c),u.drawPoint(e,n,r)}if(l){const u=i.getBuilder(t.getZIndex(),"Text");u.setTextStyle(a,c),u.drawText(e,n,r)}}function iH(i,e,t,n,r,s){const o=t.getImage(),a=o&&o.getOpacity()!==0,l=t.getText(),c=l&&l.getText(),u=s&&a&&c?{}:void 0;if(a){if(o.getImageState()!=me.LOADED)return;const h=i.getBuilder(t.getZIndex(),"Image");h.setImageStyle(o,u),h.drawMultiPoint(e,n,r)}if(c){const h=i.getBuilder(t.getZIndex(),"Text");h.setTextStyle(l,u),h.drawText(e,n,r)}}function nH(i,e,t,n,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,n,r)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n,r)}}let rH=!1;function sH(i,e,t,n,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof i=="function"?i(t,n,r):i,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=rH,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();try{let u;c=="text"||c=="json"?u=a.responseText:c=="xml"?u=a.responseXML||a.responseText:c=="arraybuffer"&&(u=a.response),u?s(e.readFeatures(u,{extent:t,featureProjection:r}),e.readProjection(u)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function OS(i,e){return function(t,n,r,s,o){sH(i,e,t,n,r,(a,l)=>{this.addFeatures(a),s!==void 0&&s(a)},()=>{this.changed(),o!==void 0&&o()})}}function oH(i,e){return[[-1/0,-1/0,1/0,1/0]]}function aH(i,e,t,n){const r=[];let s=gi();for(let o=0,a=t.length;o<a;++o){const l=t[o];s=s0(i,e,l[0],n),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return r}const PS=Hi();class qi{constructor(e,t,n,r,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=s,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?r0(this.flatCoordinates_):s0(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Hr(this.getExtent());this.flatInteriorPoints_=y0(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=mB(this.flatCoordinates_,this.ends_),t=aH(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=hB(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=V_(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const n=this.ends_;for(let r=0,s=n.length;r<s;++r){const o=n[r],a=V_(e,t,o,2,.5);ca(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=ni(e);const t=e.getExtent(),n=e.getWorldExtent();if(t&&n){const r=Yt(n)/Yt(t);or(PS,n[0],n[3],r,-r,0,0,0),Fr(this.flatCoordinates_,0,this.flatCoordinates_.length,2,PS,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new qi(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Sk((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const n=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":n.length=ad(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),r=[n.length];break;case"MultiLineString":r=[],n.length=lB(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,r);break;case"Polygon":r=[],n.length=Bk(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,r);break}return r&&(this.simplifiedGeometry_=new qi(this.type_,n,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}qi.prototype.getFlatCoordinates=qi.prototype.getOrientedFlatCoordinates;function lN(i,e,t=0,n=i.length-1,r=lH){for(;n>t;){if(n-t>600){const l=n-t+1,c=e-t+1,u=Math.log(l),h=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*h*(l-h)/l)*(c-l/2<0?-1:1),f=Math.max(t,Math.floor(e-c*h/l+d)),p=Math.min(n,Math.floor(e+(l-c)*h/l+d));lN(i,e,f,p,r)}const s=i[e];let o=t,a=n;for(cl(i,t,e),r(i[n],s)>0&&cl(i,t,n);o<a;){for(cl(i,o,a),o++,a--;r(i[o],s)<0;)o++;for(;r(i[a],s)>0;)a--}r(i[t],s)===0?cl(i,t,a):(a++,cl(i,a,n)),a<=e&&(t=a+1),e<=a&&(n=a-1)}}function cl(i,e,t){const n=i[e];i[e]=i[t],i[t]=n}function lH(i,e){return i<e?-1:i>e?1:0}let cN=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!wu(e,t))return n;const r=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?r(a):a;wu(e,l)&&(t.leaf?n.push(a):Rf(e,l)?this._all(a,n):s.push(a))}t=s.pop()}return n}collides(e){let t=this.data;if(!wu(e,t))return!1;const n=[];for(;t;){for(let r=0;r<t.children.length;r++){const s=t.children[r],o=t.leaf?this.toBBox(s):s;if(wu(e,o)){if(t.leaf||Rf(e,o))return!0;n.push(s)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Oo([]),this}remove(e,t){if(!e)return this;let n=this.data;const r=this.toBBox(e),s=[],o=[];let a,l,c;for(;n||s.length;){if(n||(n=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),n.leaf){const u=cH(e,n.children,t);if(u!==-1)return n.children.splice(u,1),s.push(n),this._condense(s),this}!c&&!n.leaf&&Rf(n,r)?(s.push(n),o.push(a),a=0,l=n,n=n.children[0]):l?(a++,n=l.children[a],c=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,r){const s=n-t+1;let o=this._maxEntries,a;if(s<=o)return a=Oo(e.slice(t,n+1)),po(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=Oo([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));DS(e,t,n,c,this.compareMinX);for(let u=t;u<=n;u+=c){const h=Math.min(u+c-1,n);DS(e,u,h,l,this.compareMinY);for(let d=u;d<=h;d+=l){const f=Math.min(d+l-1,h);a.children.push(this._build(e,d,f,r-1))}}return po(a,this.toBBox),a}_chooseSubtree(e,t,n,r){for(;r.push(t),!(t.leaf||r.length-1===n);){let s=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const c=t.children[l],u=Tf(c),h=dH(e,c)-u;h<o?(o=h,s=u<s?u:s,a=c):h===o&&u<s&&(s=u,a=c)}t=a||t.children[0]}return t}_insert(e,t,n){const r=n?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,t,s);for(o.children.push(e),yl(o,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)}_split(e,t){const n=e[t],r=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,r);const o=this._chooseSplitIndex(n,s,r),a=Oo(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,po(n,this.toBBox),po(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this.data=Oo([e,t]),this.data.height=e.height+1,this.data.leaf=!1,po(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let r,s=1/0,o=1/0;for(let a=t;a<=n-t;a++){const l=vl(e,0,a,this.toBBox),c=vl(e,a,n,this.toBBox),u=fH(l,c),h=Tf(l)+Tf(c);u<s?(s=u,r=a,o=h<o?h:o):u===s&&h<o&&(o=h,r=a)}return r||n-t}_chooseSplitAxis(e,t,n){const r=e.leaf?this.compareMinX:uH,s=e.leaf?this.compareMinY:hH,o=this._allDistMargin(e,t,n,r),a=this._allDistMargin(e,t,n,s);o<a&&e.children.sort(r)}_allDistMargin(e,t,n,r){e.children.sort(r);const s=this.toBBox,o=vl(e,0,t,s),a=vl(e,n-t,n,s);let l=bu(o)+bu(a);for(let c=t;c<n-t;c++){const u=e.children[c];yl(o,e.leaf?s(u):u),l+=bu(o)}for(let c=n-t-1;c>=t;c--){const u=e.children[c];yl(a,e.leaf?s(u):u),l+=bu(a)}return l}_adjustParentBBoxes(e,t,n){for(let r=n;r>=0;r--)yl(t[r],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():po(e[t],this.toBBox)}};function cH(i,e,t){if(!t)return e.indexOf(i);for(let n=0;n<e.length;n++)if(t(i,e[n]))return n;return-1}function po(i,e){vl(i,0,i.children.length,e,i)}function vl(i,e,t,n,r){r||(r=Oo(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<t;s++){const o=i.children[s];yl(r,i.leaf?n(o):o)}return r}function yl(i,e){return i.minX=Math.min(i.minX,e.minX),i.minY=Math.min(i.minY,e.minY),i.maxX=Math.max(i.maxX,e.maxX),i.maxY=Math.max(i.maxY,e.maxY),i}function uH(i,e){return i.minX-e.minX}function hH(i,e){return i.minY-e.minY}function Tf(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function bu(i){return i.maxX-i.minX+(i.maxY-i.minY)}function dH(i,e){return(Math.max(e.maxX,i.maxX)-Math.min(e.minX,i.minX))*(Math.max(e.maxY,i.maxY)-Math.min(e.minY,i.minY))}function fH(i,e){const t=Math.max(i.minX,e.minX),n=Math.max(i.minY,e.minY),r=Math.min(i.maxX,e.maxX),s=Math.min(i.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,s-n)}function Rf(i,e){return i.minX<=e.minX&&i.minY<=e.minY&&e.maxX<=i.maxX&&e.maxY<=i.maxY}function wu(i,e){return e.minX<=i.maxX&&e.minY<=i.maxY&&e.maxX>=i.minX&&e.maxY>=i.minY}function Oo(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function DS(i,e,t,n,r){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=n)continue;const o=e+Math.ceil((t-e)/n/2)*n;lN(i,o,e,t,r),s.push(e,o,o,t)}}class AS{constructor(e){this.rbush_=new cN(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[_e(t)]=n}load(e,t){const n=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const o=e[r],a=t[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[r]=l,this.items_[_e(a)]=l}this.rbush_.load(n)}remove(e){const t=_e(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[_e(t)],r=[n.minX,n.minY,n.maxX,n.maxY];Yl(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let r=0,s=e.length;r<s;r++)if(n=t(e[r]),n)return n;return n}isEmpty(){return ua(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Br(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class uN extends rn{constructor(e){super(),this.projection=ni(e.projection),this.attributions_=MS(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,r){t.viewResolver=n,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=MS(e),this.changed()}setState(e){this.state_=e,this.changed()}}function MS(i){return i?typeof i=="function"?i:(Array.isArray(i)||(i=[i]),e=>i):null}const Si={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class br extends Tn{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class Q_ extends uN{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Wl,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Ae(this.format_,"`format` must be set when `url` is set"),this.loader_=OS(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:oH;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new AS:null,this.loadedExtentsRtree_=new AS,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,r;Array.isArray(e.features)?r=e.features:e.features&&(n=e.features,r=n.getArray()),!t&&n===void 0&&(n=new Yi(r)),r!==void 0&&this.addFeaturesInternal(r),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=_e(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const r=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new br(Si.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof qi||(this.featureChangeKeys_[e]=[Re(t,le.CHANGE,this.handleFeatureChange_,this),Re(t,la.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof qi){const s=this.idIndex_[r];s instanceof qi?Array.isArray(s)?s.push(t):this.idIndex_[r]=[s,t]:n=!1}else n=!1}return n&&(Ae(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=_e(a);this.addToIndex_(l,a)&&n.push(a)}for(let s=0,o=n.length;s<o;s++){const a=n[s],l=_e(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();t.push(u),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(Si.ADDFEATURE))for(let s=0,o=n.length;s<o;s++)this.dispatchEvent(new br(Si.ADDFEATURE,n[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Si.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(Si.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(Tt.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(Tt.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Be);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(n=>{this.removeFeatureInternal(n)});for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new br(Si.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(r){const s=r.getGeometry();if(s instanceof qi||s.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){const r=n.getGeometry();if(r instanceof qi||r.intersectsExtent(e)){const s=t(n);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),ua(this.nullGeometryFeatures_)||ca(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=Pk(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||Ms,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){const u=c.getGeometry(),h=a;if(a=u instanceof qi?0:u.closestPointXY(n,r,o,a),a<h){s=c;const d=Math.sqrt(a);l[0]=n-d,l[1]=r-d,l[2]=n+d,l[3]=r+d}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=_e(t),r=t.getGeometry();if(!r)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const o=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const s=t.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new br(Si.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:_e(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&ua(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,n);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(u){return ko(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new br(Si.FEATURESLOADSTART)),this.loader_.call(this,l,t,n,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new br(Si.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new br(Si.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,n=t.forEachInExtent(e,function(r){if(Yl(r.extent,e))return r});n&&t.remove(n)}removeFeatures(e){let t=!1;for(let n=0,r=e.length;n<r;++n)t=this.removeFeatureInternal(e[n])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=_e(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(Be),delete this.featureChangeKeys_[t];const r=e.getId();if(r!==void 0){const s=r.toString(),o=this.idIndex_[s];o===e?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[t],this.hasListener(Si.REMOVEFEATURE)&&this.dispatchEvent(new br(Si.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){Ae(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(OS(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class Pi{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Pi({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=T0(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===me.IDLE&&t.load(),t.getImageState()===me.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?_e(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:fa(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class bn{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new bn({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function kS(i){return i[0]>0&&i[1]>0}function pH(i,e,t){return t===void 0&&(t=[0,0]),t[0]=i[0]*e+.5|0,t[1]=i[1]*e+.5|0,t}function ei(i,e){return Array.isArray(i)?i:(e===void 0?e=[i,i]:(e[0]=i,e[1]=i),e)}class ud{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=ei(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ud({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Ie()}getImage(e){return Ie()}getHitDetectionImage(){return Ie()}getPixelRatio(e){return 1}getImageState(){return Ie()}getImageSize(){return Ie()}getOrigin(){return Ie()}getSize(){return Ie()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ei(e)}listenImageChange(e){Ie()}load(){Ie()}unlistenImageChange(e){Ie()}ready(){return Promise.resolve()}}class hd extends ud{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?me.LOADING:me.LOADED,this.imageState_===me.LOADING&&this.ready().then(()=>this.imageState_=me.LOADED),this.render()}clone(){const e=this.getScale(),t=new hd({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),n=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let r=Ri.get(n,null,null)?.getImage(1);if(!r){const s=this.renderOptions_,o=Math.ceil(s.size*e),a=bt(o,o);this.draw_(s,a,e),r=a.canvas,Ri.set(n,null,null,new eN(r,void 0,null,me.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const C=r;r=s,s=C}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),u=r-c,h=Math.sqrt(l*l+u*u),d=h/l;if(e==="miter"&&d<=n)return d*t;const f=t/2/d,p=t/2*(u/h),g=Math.sqrt((r+f)*(r+f)+p*p)-r;if(this.radius2_===void 0||e==="bevel")return g*2;const v=r*Math.sin(a),y=Math.sqrt(r*r-v*v),b=s-y,w=Math.sqrt(v*v+b*b)/v;if(w<=n){const C=w*t/2-s-r;return 2*Math.max(g,C)}return g*2}createRenderOptions(){let e=pa,t=ma,n=0,r=null,s=0,o,a=0;this.stroke_&&(o=mn(this.stroke_.getColor()??Xl),a=this.stroke_.getWidth()??Zl,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??ma,e=this.stroke_.getLineCap()??pa,n=this.stroke_.getMiterLimit()??Vl);const l=this.calculateLineJoinSize_(t,a,n),c=Math.max(this.radius,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=Kt),t.fillStyle=mn(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),r=0;typeof n=="string"&&(n=fa(n)),n===null?r=1:Array.isArray(n)&&(r=n.length===4?n[3]:1),r===0&&(t=bt(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const n=this.radius;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const r=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=s+a*o,c=a%2===0?n:r;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Kt,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class ar extends hd{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new ar({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class kt{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=NS,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new kt({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=NS,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function mH(i){let e;if(typeof i=="function")e=i;else{let t;Array.isArray(i)?t=i:(Ae(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[i]),e=function(){return t}}return e}let If=null;function hN(i,e){if(!If){const t=new Pi({color:"rgba(255,255,255,0.4)"}),n=new bn({color:"#3399CC",width:1.25});If=[new kt({image:new ar({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return If}function gH(){const i={},e=[255,255,255,1],t=[0,153,255,1],n=3;return i.Polygon=[new kt({fill:new Pi({color:[255,255,255,.5]})})],i.MultiPolygon=i.Polygon,i.LineString=[new kt({stroke:new bn({color:e,width:n+2})}),new kt({stroke:new bn({color:t,width:n})})],i.MultiLineString=i.LineString,i.Circle=i.Polygon.concat(i.LineString),i.Point=[new kt({image:new ar({radius:n*2,fill:new Pi({color:t}),stroke:new bn({color:e,width:n/2})}),zIndex:1/0})],i.MultiPoint=i.Point,i.GeometryCollection=i.Polygon.concat(i.LineString,i.Point),i}function NS(i){return i.getGeometry()}const vH="#333";class dd{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=ei(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Pi({color:vH}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new dd({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ei(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const $t={ANIMATING:0,INTERACTING:1},te={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},xu=[te.FILL],Mr=[te.STROKE],vs=[te.BEGIN_PATH],LS=[te.CLOSE_PATH];class Cc extends tN{constructor(e,t,n,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=t)r[0]=e[a],r[1]=e[a+1],ha(n,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,t,n,r,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(t+=r);let u=e[t],h=e[t+1];const d=this.tmpCoordinate_;let f=!0,p,m,g;for(p=t+r;p<n;p+=r)d[0]=e[p],d[1]=e[p+1],g=z_(c,d),g!==m?(f&&(a[l++]=u,a[l++]=h,f=!1),a[l++]=d[0],a[l++]=d[1]):g===Et.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],f=!1):f=!0,u=d[0],h=d[1],m=g;return(s&&f||p===t+r)&&(a[l++]=u,a[l++]=h),l}drawCustomCoordinates_(e,t,n,r,s){for(let o=0,a=n.length;o<a;++o){const l=n[o],c=this.appendFlatLineCoordinates(e,t,l,r,!1,!1);s.push(c),t=l}return t}drawCustom(e,t,n,r,s){this.beginGeometry(e,t,s);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let c,u,h,d,f;switch(o){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),d=[];const p=e.getEndss();f=0;for(let m=0,g=p.length;m<g;++m){const v=[];f=this.drawCustomCoordinates_(c,f,p[m],a,v),d.push(v)}this.instructions.push([te.CUSTOM,l,d,e,n,yS,s]),this.hitDetectionInstructions.push([te.CUSTOM,l,d,e,r||n,yS,s]);break;case"Polygon":case"MultiLineString":h=[],c=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(c,0,e.getEnds(),a,h),this.instructions.push([te.CUSTOM,l,h,e,n,ah,s]),this.hitDetectionInstructions.push([te.CUSTOM,l,h,e,r||n,ah,s]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),u=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([te.CUSTOM,l,u,e,n,ps,s]),this.hitDetectionInstructions.push([te.CUSTOM,l,u,e,r||n,ps,s]);break;case"MultiPoint":c=e.getFlatCoordinates(),u=this.appendFlatPointCoordinates(c,a),u>l&&(this.instructions.push([te.CUSTOM,l,u,e,n,ps,s]),this.hitDetectionInstructions.push([te.CUSTOM,l,u,e,r||n,ps,s]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),u=this.coordinates.length,this.instructions.push([te.CUSTOM,l,u,e,n,void 0,s]),this.hitDetectionInstructions.push([te.CUSTOM,l,u,e,r||n,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,n){this.beginGeometryInstruction1_=[te.BEGIN_GEOMETRY,t,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[te.BEGIN_GEOMETRY,t,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let r,s,o=-1;for(t=0;t<n;++t)r=e[t],s=r[0],s==te.END_GEOMETRY?o=t:s==te.BEGIN_GEOMETRY&&(r[2]=t,nY(this.hitDetectionInstructions,o,t),o=-1)}fillStyleToState(e,t={}){if(e){const n=e.getColor();t.fillPatternScale=n&&typeof n=="object"&&"src"in n?this.pixelRatio:1,t.fillStyle=mn(n||Kt)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const n=e.getColor();t.strokeStyle=mn(n||Xl);const r=e.getLineCap();t.lineCap=r!==void 0?r:pa;const s=e.getLineDash();t.lineDash=s?s.slice():Un;const o=e.getLineDashOffset();t.lineDashOffset=o||Vn;const a=e.getLineJoin();t.lineJoin=a!==void 0?a:ma;const l=e.getWidth();t.lineWidth=l!==void 0?l:Zl;const c=e.getMiterLimit();t.miterLimit=c!==void 0?c:Vl,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const n=this.state;this.fillStyleToState(e,n),this.strokeStyleToState(t,n)}createFill(e){const t=e.fillStyle,n=[te.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[te.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=r||s!=e.currentLineDash&&!Ur(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[te.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Ek(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Zh(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class yH extends Cc{constructor(e,t,n,r){super(e,t,n,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,n){if(!this.image_||this.maxExtent&&!ha(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,n);const r=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,s);this.instructions.push([te.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([te.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,n){if(!this.image_)return;this.beginGeometry(e,t,n);const r=e.getFlatCoordinates(),s=[];for(let l=0,c=r.length;l<c;l+=e.getStride())(!this.maxExtent||ha(this.maxExtent,r.slice(l,l+2)))&&s.push(r[l],r[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([te.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([te.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class _H extends Cc{constructor(e,t,n,r){super(e,t,n,r)}drawFlatCoordinates_(e,t,n,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,n,r,!1,!1),a=[te.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n}drawLineString(e,t,n){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([te.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Un,Vn],vs);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(Mr),this.endGeometry(t)}drawMultiLineString(e,t,n){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([te.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Un,Vn],vs);const a=e.getEnds(),l=e.getFlatCoordinates(),c=e.getStride();let u=0;for(let h=0,d=a.length;h<d;++h)u=this.drawFlatCoordinates_(l,u,a[h],c);this.hitDetectionInstructions.push(Mr),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Mr),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Mr),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(vs)}}class FS extends Cc{constructor(e,t,n,r){super(e,t,n,r)}drawFlatCoordinatess_(e,t,n,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=n.length;this.instructions.push(vs),this.hitDetectionInstructions.push(vs);for(let c=0;c<l;++c){const u=n[c],h=this.coordinates.length,d=this.appendFlatLineCoordinates(e,t,u,r,!0,!a),f=[te.MOVE_TO_LINE_TO,h,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(LS),this.hitDetectionInstructions.push(LS)),t=u}return o&&(this.instructions.push(xu),this.hitDetectionInstructions.push(xu)),a&&(this.instructions.push(Mr),this.hitDetectionInstructions.push(Mr)),t}drawCircle(e,t,n){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([te.SET_FILL_STYLE,Kt]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([te.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Un,Vn]);const a=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const u=[te.CIRCLE,c];this.instructions.push(vs,u),this.hitDetectionInstructions.push(vs,u),r.fillStyle!==void 0&&(this.instructions.push(xu),this.hitDetectionInstructions.push(xu)),r.strokeStyle!==void 0&&(this.instructions.push(Mr),this.hitDetectionInstructions.push(Mr)),this.endGeometry(t)}drawPolygon(e,t,n){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([te.SET_FILL_STYLE,Kt]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([te.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Un,Vn]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(t)}drawMultiPolygon(e,t,n){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([te.SET_FILL_STYLE,Kt]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([te.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Un,Vn]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride();let u=0;for(let h=0,d=a.length;h<d;++h)u=this.drawFlatCoordinatess_(l,u,a[h],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,r=t.length;n<r;++n)t[n]=us(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function bH(i,e,t,n,r){const s=[];let o=t,a=0,l=e.slice(t,2);for(;a<i&&o+r<n;){const[c,u]=l.slice(-2),h=e[o+r],d=e[o+r+1],f=Math.sqrt((h-c)*(h-c)+(d-u)*(d-u));if(a+=f,a>=i){const p=(i-a+f)/f,m=fi(c,h,p),g=fi(u,d,p);l.push(m,g),s.push(l),l=[m,g],a==i&&(o+=r),a=0}else if(a<i)l.push(e[o+r],e[o+r+1]),o+=r;else{const p=f-a,m=fi(c,h,p/f),g=fi(u,d,p/f);l.push(m,g),s.push(l),l=[m,g],a=0,o+=r}}return a>0&&s.push(l),s}function wH(i,e,t,n,r){let s=t,o=t,a=0,l=0,c=t,u,h,d,f,p,m,g,v,y,b;for(h=t;h<n;h+=r){const _=e[h],w=e[h+1];p!==void 0&&(y=_-p,b=w-m,f=Math.sqrt(y*y+b*b),g!==void 0&&(l+=d,u=Math.acos((g*y+v*b)/(d*f)),u>i&&(l>a&&(a=l,s=c,o=h),l=0,c=h-r)),d=f,g=y,v=b),p=_,m=w}return l+=f,l>a?[c,h]:[s,o]}const hh={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class xH extends Cc{constructor(e,t,n,r){super(e,t,n,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Kt]={fillStyle:Kt},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,n){const r=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!r&&!s)return;const a=this.coordinates;let l=a.length;const c=e.getType();let u=null,h=e.getStride();if(o.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!Qt(this.maxExtent,e.getExtent()))return;let d;if(u=e.getFlatCoordinates(),c=="LineString")d=[u.length];else if(c=="MultiLineString")d=e.getEnds();else if(c=="Polygon")d=e.getEnds().slice(0,1);else if(c=="MultiPolygon"){const g=e.getEndss();d=[];for(let v=0,y=g.length;v<y;++v)d.push(g[v][0])}this.beginGeometry(e,t,n);const f=o.repeat,p=f?void 0:o.textAlign;let m=0;for(let g=0,v=d.length;g<v;++g){let y;f?y=bH(f*this.resolution,u,m,d[g],h):y=[u.slice(m,d[g])];for(let b=0,_=y.length;b<_;++b){const w=y[b];let C=0,E=w.length;if(p==null){const T=wH(o.maxAngle,w,0,w.length,2);C=T[0],E=T[1]}for(let T=C;T<E;T+=h)a.push(w[T],w[T+1]);const x=a.length;m=d[g],this.drawChars_(l,x),l=x}}this.endGeometry(t)}else{let d=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":u=e.getFlatCoordinates();break;case"LineString":u=e.getFlatMidpoint();break;case"Circle":u=e.getCenter();break;case"MultiLineString":u=e.getFlatMidpoints(),h=2;break;case"Polygon":u=e.getFlatInteriorPoint(),o.overflow||d.push(u[2]/this.resolution),h=3;break;case"MultiPolygon":const _=e.getFlatInteriorPoints();u=[];for(let w=0,C=_.length;w<C;w+=3)o.overflow||d.push(_[w+2]/this.resolution),u.push(_[w],_[w+1]);if(u.length===0)return;h=2;break}const f=this.appendFlatPointCoordinates(u,h);if(f===l)return;if(d&&(f-l)/2!==u.length/h){let _=l/2;d=d.filter((w,C)=>{const E=a[(_+C)*2]===u[C*h]&&a[(_+C)*2+1]===u[C*h+1];return E||--_,E})}this.saveTextStates_();const p=o.backgroundFill?this.createFill(this.fillStyleToState(o.backgroundFill)):null,m=o.backgroundStroke?this.createStroke(this.strokeStyleToState(o.backgroundStroke)):null;this.beginGeometry(e,t,n);let g=o.padding;if(g!=gs&&(o.scale[0]<0||o.scale[1]<0)){let _=o.padding[0],w=o.padding[1],C=o.padding[2],E=o.padding[3];o.scale[0]<0&&(w=-w,E=-E),o.scale[1]<0&&(_=-_,C=-C),g=[_,w,C,E]}const v=this.pixelRatio;this.instructions.push([te.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,g==gs?gs:g.map(function(_){return _*v}),p,m,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const y=1/v,b=p?p.slice(0):null;b&&(b[1]=Kt),this.hitDetectionInstructions.push([te.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[y,y],NaN,this.declutterMode_,this.declutterImageWithText_,g,b,m,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Kt:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||Kl,justify:t.justify,textBaseline:t.textBaseline||uh,scale:t.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=hh[r.textBaseline],u=this.textOffsetY_*l,h=this.text_,d=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([te.DRAW_CHARS,e,t,c,r.overflow,a,r.maxAngle,l,u,s,d*l,h,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([te.DRAW_CHARS,e,t,c,r.overflow,a&&Kt,r.maxAngle,l,u,s,d*l,h,o,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let n,r,s;if(!e)this.text_="";else{const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=mn(o.getColor()||Kt)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const m=a.getLineDash(),g=a.getLineDashOffset(),v=a.getWidth(),y=a.getMiterLimit();s.lineCap=a.getLineCap()||pa,s.lineDash=m?m.slice():Un,s.lineDashOffset=g===void 0?Vn:g,s.lineJoin=a.getLineJoin()||ma,s.lineWidth=v===void 0?Zl:v,s.miterLimit=y===void 0?Vl:y,s.strokeStyle=mn(a.getColor()||Xl)}n=this.textState_;const l=e.getFont()||iN;GB(l);const c=e.getScaleArray();n.overflow=e.getOverflow(),n.font=l,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||uh,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||gs,n.scale=c===void 0?[1,1]:c;const u=e.getOffsetX(),h=e.getOffsetY(),d=e.getRotateWithView(),f=e.getKeepUpright(),p=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=d===void 0?!1:d,this.textKeepUpright_=f===void 0?!0:f,this.textRotation_=p===void 0?0:p,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:_e(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+_e(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const SH={Circle:FS,Default:Cc,Image:yH,LineString:_H,Polygon:FS,Text:xH};class EH{constructor(e,t,n,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const r in n){const s=n[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[n];r===void 0&&(r={},this.buildersByZIndex_[n]=r);let s=r[t];if(s===void 0){const o=SH[t];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s}return s}}function CH(i,e,t,n,r,s,o,a,l,c,u,h,d=!0){let f=i[e],p=i[e+1],m=0,g=0,v=0,y=0;function b(){m=f,g=p,e+=n,f=i[e],p=i[e+1],y+=v,v=Math.sqrt((f-m)*(f-m)+(p-g)*(p-g))}do b();while(e<t-n&&y+v<s);let _=v===0?0:(s-y)/v;const w=fi(m,f,_),C=fi(g,p,_),E=e-n,x=y,T=s+a*l(c,r,u);for(;e<t-n&&y+v<T;)b();_=v===0?0:(T-y)/v;const O=fi(m,f,_),D=fi(g,p,_);let A=!1;if(d)if(h){const $=[w,C,O,D];Wk($,0,4,2,h,$,$),A=$[0]>$[2]}else A=w>O;const k=Math.PI,N=[],z=E+n===e;e=E,v=0,y=x,f=i[e],p=i[e+1];let M;if(z){b(),M=Math.atan2(p-g,f-m),A&&(M+=M>0?-k:k);const $=(O+w)/2,P=(D+C)/2;return N[0]=[$,P,(T-s)/2,M,r],N}r=r.replace(/\n/g," ");for(let $=0,P=r.length;$<P;){b();let G=Math.atan2(p-g,f-m);if(A&&(G+=G>0?-k:k),M!==void 0){let H=G-M;if(H+=H>k?-2*k:H<-k?2*k:0,Math.abs(H)>o)return null}M=G;const V=$;let X=0;for(;$<P;++$){const H=A?P-$-1:$,U=a*l(c,r[H],u);if(e+n<t&&y+v<s+X+U/2)break;X+=U}if($===V)continue;const L=A?r.substring(P-V,P-$):r.substring(V,$);_=v===0?0:(s+X/2-y)/v;const j=fi(m,f,_),W=fi(g,p,_);N.push([j,W,X/2,G,L]),s+=X}return N}class dN{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(ch(),{get:(e,t)=>{if(typeof ch()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,n)=>(this.push_(t,n),!0)})}push_(...e){const t=this.instructions_,n=this.zIndex+this.offset_;t[n]||(t[n]=[]),t[n].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,r=t.length;n<r;++n){const s=t[n];if(typeof s=="function"){s(e);continue}const o=t[++n];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const mo=gi(),wr=[],kn=[],Nn=[],xr=[];function $S(i){return i[3].declutterBox}const jS=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function Of(i,e){return e==="start"?e=jS.test(i)?"right":"left":e==="end"&&(e=jS.test(i)?"left":"right"),hh[e]}function TH(i,e,t){return t>0&&i.push(`
`,""),i.push(e,""),i}function RH(i,e,t){return t%2===0&&(i+=e),i}class IH{constructor(e,t,n,r,s){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Hi(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new dN:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,n,r){const s=e+t+n+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=n?this.fillStates[n]:null,l=this.textStates[t],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],h=l.justify?hh[l.justify]:Of(Array.isArray(e)?e[0]:e,l.textAlign||Kl),d=r&&o.lineWidth?o.lineWidth:0,f=Array.isArray(e)?e:String(e).split(`
`).reduce(TH,[]),{width:p,height:m,widths:g,heights:v,lineWidths:y}=WB(l,f),b=p+d,_=[],w=(b+2)*u[0],C=(m+d)*u[1],E={width:w<0?Math.floor(w):Math.ceil(w),height:C<0?Math.floor(C):Math.ceil(C),contextInstructions:_};(u[0]!=1||u[1]!=1)&&_.push("scale",u),r&&(_.push("strokeStyle",o.strokeStyle),_.push("lineWidth",d),_.push("lineCap",o.lineCap),_.push("lineJoin",o.lineJoin),_.push("miterLimit",o.miterLimit),_.push("setLineDash",[o.lineDash]),_.push("lineDashOffset",o.lineDashOffset)),n&&_.push("fillStyle",a.fillStyle),_.push("textBaseline","middle"),_.push("textAlign","center");const x=.5-h;let T=h*b+x*d;const O=[],D=[];let A=0,k=0,N=0,z=0,M;for(let $=0,P=f.length;$<P;$+=2){const G=f[$];if(G===`
`){k+=A,A=0,T=h*b+x*d,++z;continue}const V=f[$+1]||l.font;V!==M&&(r&&O.push("font",V),n&&D.push("font",V),M=V),A=Math.max(A,v[N]);const X=[G,T+x*g[N]+h*(g[N]-y[z]),.5*(d+A)+k];T+=g[N],r&&O.push("strokeText",X),n&&D.push("fillText",X),++N}return Array.prototype.push.apply(_,O),Array.prototype.push.apply(_,D),this.labels_[s]=E,E}replayTextBackground_(e,t,n,r,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignAndScaleFill_=o[2],e.fillStyle=o[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,r,s,o,a,l,c,u,h,d,f,p,m,g){a*=d[0],l*=d[1];let v=n-a,y=r-l;const b=s+c>e?e-c:s,_=o+u>t?t-u:o,w=p[3]+b*d[0]+p[1],C=p[0]+_*d[1]+p[2],E=v-p[3],x=y-p[0];(m||h!==0)&&(wr[0]=E,xr[0]=E,wr[1]=x,kn[1]=x,kn[0]=E+w,Nn[0]=kn[0],Nn[1]=x+C,xr[1]=Nn[1]);let T;return h!==0?(T=or(Hi(),n,r,1,1,h,-n,-r),Ct(T,wr),Ct(T,kn),Ct(T,Nn),Ct(T,xr),Br(Math.min(wr[0],kn[0],Nn[0],xr[0]),Math.min(wr[1],kn[1],Nn[1],xr[1]),Math.max(wr[0],kn[0],Nn[0],xr[0]),Math.max(wr[1],kn[1],Nn[1],xr[1]),mo)):Br(Math.min(E,E+w),Math.min(x,x+C),Math.max(E,E+w),Math.max(x,x+C),mo),f&&(v=Math.round(v),y=Math.round(y)),{drawImageX:v,drawImageY:y,drawImageW:b,drawImageH:_,originX:c,originY:u,declutterBox:{minX:mo[0],minY:mo[1],maxX:mo[2],maxY:mo[3],value:g},canvasTransform:T,scale:d}}replayImageOrLabel_(e,t,n,r,s,o,a){const l=!!(o||a),c=r.declutterBox,u=a?a[2]*r.scale[0]/2:0;return c.minX-u<=t[0]&&c.maxX+u>=0&&c.minY-u<=t[1]&&c.maxY+u>=0&&(l&&this.replayTextBackground_(e,wr,kn,Nn,xr,o,a),YB(e,r.canvasTransform,s,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const n=Ct(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(n[0]%r,n[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,n,r){const s=this.textStates[t],o=this.createLabel(e,t,r,n),a=this.strokeStates[n],l=this.pixelRatio,c=Of(Array.isArray(e)?e[0]:e,s.textAlign||Kl),u=hh[s.textBaseline||uh],h=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*s.scale[0],f=c*d+2*(.5-c)*h,p=u*o.height/l+2*(.5-u)*h;return{label:o,anchorX:f,anchorY:p}}execute_(e,t,n,r,s,o,a,l){const c=this.zIndexContext_;let u;this.pixelCoordinates_&&Ur(n,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=Fr(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),HY(this.renderedTransform_,n));let h=0;const d=r.length;let f=0,p,m,g,v,y,b,_,w,C,E,x,T,O,D=0,A=0;const k=this.coordinateCache_,N=this.viewRotation_,z=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,M={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:N},$=this.instructions!=r||this.overlaps?0:200;let P,G,V,X;for(;h<d;){const L=r[h];switch(L[0]){case te.BEGIN_GEOMETRY:P=L[1],X=L[3],P.getGeometry()?a!==void 0&&!Qt(a,X.getExtent())?h=L[2]+1:++h:h=L[2],c&&(c.zIndex=L[4]);break;case te.BEGIN_PATH:D>$&&(this.fill_(e),D=0),A>$&&(e.stroke(),A=0),!D&&!A&&(e.beginPath(),y=NaN,b=NaN),++h;break;case te.CIRCLE:f=L[1];const W=u[f],H=u[f+1],U=u[f+2],q=u[f+3],J=U-W,ne=q-H,oe=Math.sqrt(J*J+ne*ne);e.moveTo(W+oe,H),e.arc(W,H,oe,0,2*Math.PI,!0),++h;break;case te.CLOSE_PATH:e.closePath(),++h;break;case te.CUSTOM:f=L[1],p=L[2];const Ye=L[3],Ve=L[4],he=L[5];M.geometry=Ye,M.feature=P,h in k||(k[h]=[]);const rt=k[h];he?he(u,f,p,2,rt):(rt[0]=u[f],rt[1]=u[f+1],rt.length=2),c&&(c.zIndex=L[6]),Ve(rt,M),++h;break;case te.DRAW_IMAGE:f=L[1],p=L[2],C=L[3],m=L[4],g=L[5];let ht=L[6];const xt=L[7],dt=L[8],Ge=L[9],an=L[10];let li=L[11];const zt=L[12];let ci=L[13];v=L[14]||"declutter";const Xe=L[15];if(!C&&L.length>=20){E=L[19],x=L[20],T=L[21],O=L[22];const bi=this.drawLabelWithPointPlacement_(E,x,T,O);C=bi.label,L[3]=C;const ns=L[23];m=(bi.anchorX-ns)*this.pixelRatio,L[4]=m;const wi=L[24];g=(bi.anchorY-wi)*this.pixelRatio,L[5]=g,ht=C.height,L[6]=ht,ci=C.width,L[13]=ci}let vr;L.length>25&&(vr=L[25]);let is,ao,yr;L.length>17?(is=L[16],ao=L[17],yr=L[18]):(is=gs,ao=null,yr=null),an&&z?li+=N:!an&&!z&&(li-=N);let nu=0;for(;f<p;f+=2){if(vr&&vr[nu++]<ci/this.pixelRatio)continue;const bi=this.calculateImageOrLabelDimensions_(C.width,C.height,u[f],u[f+1],ci,ht,m,g,dt,Ge,li,zt,s,is,!!ao||!!yr,P),ns=[e,t,C,bi,xt,ao,yr];if(l){let wi,ln,xi;if(Xe){const st=p-f;if(!Xe[st]){Xe[st]={args:ns,declutterMode:v};continue}const Gt=Xe[st];wi=Gt.args,ln=Gt.declutterMode,delete Xe[st],xi=$S(wi)}let Pn,Dn;if(wi&&(ln!=="declutter"||!l.collides(xi))&&(Pn=!0),(v!=="declutter"||!l.collides(bi.declutterBox))&&(Dn=!0),ln==="declutter"&&v==="declutter"){const st=Pn&&Dn;Pn=st,Dn=st}Pn&&(ln!=="none"&&l.insert(xi),this.replayImageOrLabel_.apply(this,wi)),Dn&&(v!=="none"&&l.insert(bi.declutterBox),this.replayImageOrLabel_.apply(this,ns))}else this.replayImageOrLabel_.apply(this,ns)}++h;break;case te.DRAW_CHARS:const Ja=L[1],el=L[2],Me=L[3],ve=L[4];O=L[5];const Se=L[6],be=L[7],Fe=L[8];T=L[9];const St=L[10];E=L[11],Array.isArray(E)&&(E=E.reduce(RH,"")),x=L[12];const tl=[L[13],L[13]];v=L[14]||"declutter";const ru=L[15],tf=this.textStates[x],il=tf.font,nl=[tf.scale[0]*be,tf.scale[1]*be];let rl;il in this.widths_?rl=this.widths_[il]:(rl={},this.widths_[il]=rl);const px=Xk(u,Ja,el,2),mx=Math.abs(nl[0])*TS(il,E,rl);if(ve||mx<=px){const bi=this.textStates[x].textAlign,ns=(px-mx)*Of(E,bi),wi=CH(u,Ja,el,2,E,ns,Se,Math.abs(nl[0]),TS,il,rl,z?0:this.viewRotation_,ru);e:if(wi){const ln=[];let xi,Pn,Dn,st,Gt;if(T)for(xi=0,Pn=wi.length;xi<Pn;++xi){Gt=wi[xi],Dn=Gt[4],st=this.createLabel(Dn,x,"",T),m=Gt[2]+(nl[0]<0?-St:St),g=Me*st.height+(.5-Me)*2*St*nl[1]/nl[0]-Fe;const An=this.calculateImageOrLabelDimensions_(st.width,st.height,Gt[0],Gt[1],st.width,st.height,m,g,0,0,Gt[3],tl,!1,gs,!1,P);if(l&&v==="declutter"&&l.collides(An.declutterBox))break e;ln.push([e,t,st,An,1,null,null])}if(O)for(xi=0,Pn=wi.length;xi<Pn;++xi){Gt=wi[xi],Dn=Gt[4],st=this.createLabel(Dn,x,O,""),m=Gt[2],g=Me*st.height-Fe;const An=this.calculateImageOrLabelDimensions_(st.width,st.height,Gt[0],Gt[1],st.width,st.height,m,g,0,0,Gt[3],tl,!1,gs,!1,P);if(l&&v==="declutter"&&l.collides(An.declutterBox))break e;ln.push([e,t,st,An,1,null,null])}l&&v!=="none"&&l.load(ln.map($S));for(let An=0,P$=ln.length;An<P$;++An)this.replayImageOrLabel_.apply(this,ln[An])}}++h;break;case te.END_GEOMETRY:if(o!==void 0){P=L[1];const bi=o(P,X,v);if(bi)return bi}++h;break;case te.FILL:$?D++:this.fill_(e),++h;break;case te.MOVE_TO_LINE_TO:for(f=L[1],p=L[2],G=u[f],V=u[f+1],e.moveTo(G,V),y=G+.5|0,b=V+.5|0,f+=2;f<p;f+=2)G=u[f],V=u[f+1],_=G+.5|0,w=V+.5|0,(f==p-2||_!==y||w!==b)&&(e.lineTo(G,V),y=_,b=w);++h;break;case te.SET_FILL_STYLE:this.alignAndScaleFill_=L[2],D&&(this.fill_(e),D=0,A&&(e.stroke(),A=0)),e.fillStyle=L[1],++h;break;case te.SET_STROKE_STYLE:A&&(e.stroke(),A=0),this.setStrokeStyle_(e,L),++h;break;case te.STROKE:$?A++:e.stroke(),++h;break;default:++h;break}}D&&this.fill_(e),A&&e.stroke()}execute(e,t,n,r,s,o){this.viewRotation_=r,this.execute_(e,t,n,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,n,r,s){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,s)}}const ds=["Polygon","Circle","LineString","Image","Text","Default"],fN=["Image","Text"],OH=ds.filter(i=>!fN.includes(i));class PH{constructor(e,t,n,r,s,o,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Hi(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,t){for(const n in e){let r=this.executorsByZIndex_[n];r===void 0&&(r={},this.executorsByZIndex_[n]=r);const s=e[n];for(const o in s){const a=s[o];r[o]=new IH(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,r,s,o){r=Math.round(r);const a=r*2+1,l=or(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-n,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=bt(a,a));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=gi(),Ol(h,e),Zh(h,t*(this.renderBuffer_+r),h));const d=DH(r);let f;function p(w,C,E){const x=u.getImageData(0,0,a,a).data;for(let T=0,O=d.length;T<O;T++)if(x[d[T]]>0){if(!o||E==="none"||f!=="Image"&&f!=="Text"||o.includes(w)){const D=(d[T]-3)/4,A=r-D%a,k=r-(D/a|0),N=s(w,C,A*A+k*k);if(N)return N}u.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(Hn);let g,v,y,b,_;for(g=m.length-1;g>=0;--g){const w=m[g].toString();for(y=this.executorsByZIndex_[w],v=ds.length-1;v>=0;--v)if(f=ds[v],b=y[f],b!==void 0&&(_=b.executeHitDetection(u,l,n,p,h),_))return _}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],r=t[1],s=t[2],o=t[3],a=[n,r,n,o,s,o,s,r];return Fr(a,0,8,2,e,a),a}isEmpty(){return ua(this.executorsByZIndex_)}execute(e,t,n,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?iY:Hn),o=o||ds;const c=ds.length;for(let u=0,h=l.length;u<h;++u){const d=l[u].toString(),f=this.executorsByZIndex_[d];for(let p=0,m=o.length;p<m;++p){const g=o[p],v=f[g];if(v!==void 0){const y=a===null?void 0:v.getZIndexContext(),b=y?y.getContext():e,_=this.maxExtent_&&g!=="Image"&&g!=="Text";if(_&&(b.save(),this.clip(b,n)),!y||g==="Text"||g==="Image"?v.execute(b,t,n,r,s,a):y.pushFunction(w=>v.execute(w,t,n,r,s,a)),_&&b.restore(),y){y.offset();const w=l[u]*c+ds.indexOf(g);this.deferredZIndexContexts_[w]||(this.deferredZIndexContexts_[w]=[]),this.deferredZIndexContexts_[w].push(y)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Hn);for(let n=0,r=t.length;n<r;++n)e[t[n]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[n]].length=0}}const Pf={};function DH(i){if(Pf[i]!==void 0)return Pf[i];const e=i*2+1,t=i*i,n=new Array(t+1);for(let s=0;s<=i;++s)for(let o=0;o<=i;++o){const a=s*s+o*o;if(a>t)break;let l=n[a];l||(l=[],n[a]=l),l.push(((i+s)*e+(i+o))*4+3),s>0&&l.push(((i-s)*e+(i+o))*4+3),o>0&&(l.push(((i+s)*e+(i-o))*4+3),s>0&&l.push(((i-s)*e+(i-o))*4+3))}const r=[];for(let s=0,o=n.length;s<o;++s)n[s]&&r.push(...n[s]);return Pf[i]=r,r}function zS(i,e,t,n){return t!==void 0&&n!==void 0?[t/i,n/e]:t!==void 0?t/i:n!==void 0?n/e:1}class Tc extends ud{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;Ae(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||_e(o)),Ae(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Ae(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=me.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?me.LOADED:me.IDLE:l=me.LOADING:l=me.LOADED),this.color_=e.color!==void 0?fa(e.color):null,this.iconImage_=T0(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let c,u;if(e.size)[c,u]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)c=h.width,u=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(zS(f[0],f[1],e.width,e.height))};this.listenImageChange(d);return}}c!==void 0&&this.setScale(zS(c,u,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Tc({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==me.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==me.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(le.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(le.CHANGE,e)}ready(){return this.iconImage_.ready()}}const hn=.5;function AH(i,e,t,n,r,s,o,a,l){const c=r,u=i[0]*hn,h=i[1]*hn,d=bt(u,h);d.imageSmoothingEnabled=!1;const f=d.canvas,p=new HB(d,hn,r,null,o,a,null),m=t.length,g=Math.floor((256*256*256-1)/m),v={};for(let b=1;b<=m;++b){const _=t[b-1],w=_.getStyleFunction()||n;if(!w)continue;let C=w(_,s);if(!C)continue;Array.isArray(C)||(C=[C]);const x=(b*g).toString(16).padStart(7,"#00000");for(let T=0,O=C.length;T<O;++T){const D=C[T],A=D.getGeometryFunction()(_);if(!A||!Qt(c,A.getExtent()))continue;const k=D.clone(),N=k.getFill();N&&N.setColor(x);const z=k.getStroke();z&&(z.setColor(x),z.setLineDash(null)),k.setText(void 0);const M=D.getImage();if(M){const V=M.getImageSize();if(!V)continue;const X=bt(V[0],V[1],void 0,{alpha:!1}),L=X.canvas;X.fillStyle=x,X.fillRect(0,0,L.width,L.height),k.setImage(new Tc({img:L,anchor:M.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:M.getOrigin(),opacity:1,size:M.getSize(),scale:M.getScale(),rotation:M.getRotation(),rotateWithView:M.getRotateWithView()}))}const $=k.getZIndex()||0;let P=v[$];P||(P={},v[$]=P,P.Polygon=[],P.Circle=[],P.LineString=[],P.Point=[]);const G=A.getType();if(G==="GeometryCollection"){const V=A.getGeometriesArrayRecursive();for(let X=0,L=V.length;X<L;++X){const j=V[X];P[j.getType().replace("Multi","")].push(j,k)}}else P[G.replace("Multi","")].push(A,k)}}const y=Object.keys(v).map(Number).sort(Hn);for(let b=0,_=y.length;b<_;++b){const w=v[y[b]];for(const C in w){const E=w[C];for(let x=0,T=E.length;x<T;x+=2){p.setStyle(E[x+1]);for(let O=0,D=e.length;O<D;++O)p.setTransform(e[O]),p.drawGeometry(E[x])}}}return d.getImageData(0,0,f.width,f.height)}function MH(i,e,t){const n=[];if(t){const r=Math.floor(Math.round(i[0])*hn),s=Math.floor(Math.round(i[1])*hn),o=(it(r,0,t.width-1)+it(s,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],u=t.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);u&&u%h===0&&n.push(e[u/h-1])}return n}class pN extends Tn{constructor(e,t,n,r){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=r}}const kH=5;class NH extends Sc{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=kH}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Ie()}getData(e){return null}prepareFrame(e){return Ie()}renderFrame(e,t){return Ie()}forEachFeatureAtCoordinate(e,t,n,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===me.LOADED||t.getState()===me.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=me.LOADED&&t!=me.ERROR&&e.addEventListener(le.CHANGE,this.boundHandleImageChange_),t==me.IDLE&&(e.load(),t=e.getState()),t==me.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const GS=[];let Po=null;function LH(){Po=bt(1,1,void 0,{willReadFrequently:!0})}class mN extends NH{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Hi(),this.pixelTransform=Hi(),this.inversePixelTransform=Hi(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,n){Po||LH(),Po.clearRect(0,0,1,1);let r;try{Po.drawImage(e,t,n,1,1,0,0,1,1),r=Po.getImageData(0,0,1,1).data}catch{return Po=null,null}return r}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!n||e&&e.style.backgroundColor&&Ur(fa(e.style.backgroundColor),fa(n)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&KY(o.canvas.style.transform,t)?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=bt();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const r=Us(n),s=td(n),o=ed(n),a=Jh(n);Ct(t.coordinateToPixelTransform,r),Ct(t.coordinateToPixelTransform,s),Ct(t.coordinateToPixelTransform,o),Ct(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Ct(l,r),Ct(l,s),Ct(l,o),Ct(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const n=e.extent,r=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(Ne(n)/r*o),l=Math.round(Yt(n)/r*o);or(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-l/2),qk(this.inversePixelTransform,this.pixelTransform);const c=XY(this.pixelTransform);if(this.useContainer(t,c,this.getBackground(e)),!this.containerReused){const u=this.context.canvas;u.width!=a||u.height!=l?(u.width=a,u.height=l):this.context.clearRect(0,0,a,l),c!==u.style.transform&&(u.style.transform=c)}}dispatchRenderEvent_(e,t,n){const r=this.getLayer();if(r.hasListener(e)){const s=new pN(e,this.inversePixelTransform,n,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Ti.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Ti.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new dN),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Ti.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Ti.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,r,s,o,a){const l=s/2,c=o/2,u=r/t,h=-u,d=-e[0]+a,f=-e[1];return or(this.tempTransform,l,c,u,h,-n,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class FH extends mN{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=gi(),this.wrappedRenderedExtent_=gi(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,n){const r=t.extent,s=t.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,u=l.getExtent(),h=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),f=t.pixelRatio,p=t.viewHints,m=!(p[$t.ANIMATING]||p[$t.INTERACTING]),g=this.context,v=Math.round(Ne(r)/a*f),y=Math.round(Yt(r)/a*f),b=h.getWrapX()&&l.canWrapX(),_=b?Ne(u):null,w=b?Math.ceil((r[2]-u[2])/_)+1:1;let C=b?Math.floor((r[0]-u[0])/_):0;do{let E=this.getRenderTransform(o,a,0,f,v,y,C*_);t.declutter&&(E=E.slice(0)),e.execute(g,[g.canvas.width,g.canvas.height],E,c,m,n===void 0?ds:n?fN:OH,n?d&&t.declutter[d]:void 0)}while(++C<w)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=bt(this.context.canvas.width,this.context.canvas.height,GS))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,ld(this.context),GS.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const r=e.viewState;this.prepareContainer(e,t);const s=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(Ti.PRERENDER)||this.getLayer().hasListener(Ti.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),r.projection,this.clipped_=!1,a&&n.extent&&this.clipping){const l=Ar(n.extent);a=Qt(l,e.extent),this.clipped_=a&&!ko(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return a&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],h=n[0]*hn,d=n[1]*hn;u.push(this.getRenderTransform(r,s,o,hn,h,d,0).slice());const f=c.getSource(),p=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!ko(p,l)){let m=l[0];const g=Ne(p);let v=0,y;for(;m<p[0];)--v,y=g*v,u.push(this.getRenderTransform(r,s,o,hn,h,d,y).slice()),m+=g;for(v=0,m=l[2];m>p[2];)++v,y=g*v,u.push(this.getRenderTransform(r,s,o,hn,h,d,y).slice()),m-=g}this.hitDetectionImageData_=AH(n,u,this.renderedFeatures_,c.getStyleFunction(),l,s,o,RS(s,this.renderedPixelRatio_))}t(MH(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,r,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),c={},u=function(d,f,p){const m=_e(d),g=c[m];if(g){if(g!==!0&&p<g.distanceSq){if(p===0)return c[m]=!0,s.splice(s.lastIndexOf(g),1),r(d,l,f);g.geometry=f,g.distanceSq=p}}else{if(p===0)return c[m]=!0,r(d,l,f);s.push(c[m]={feature:d,layer:l,geometry:f,distanceSq:p,callback:r})}},h=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,o,a,n,u,h?t.declutter?.[h]?.all().map(d=>d.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const r=e.viewHints[$t.ANIMATING],s=e.viewHints[$t.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,u=c.projection,h=c.resolution,d=e.pixelRatio,f=t.getRevision(),p=t.getRenderBuffer();let m=t.getRenderOrder();m===void 0&&(m=VB);const g=c.center.slice(),v=Zh(l,p*h),y=v.slice(),b=[v.slice()],_=u.getExtent();if(n.getWrapX()&&u.canWrapX()&&!ko(_,e.extent)){const N=Ne(_),z=Math.max(Ne(v)/2,N);v[0]=_[0]-z,v[2]=_[2]+z,kk(g,u);const M=Ok(b[0],u);M[0]<_[0]&&M[2]<_[2]?b.push([M[0]+N,M[1],M[2]+N,M[3]]):M[0]>_[0]&&M[2]>_[2]&&b.push([M[0]-N,M[1],M[2]-N,M[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==f&&this.renderedRenderOrder_==m&&this.renderedFrameDeclutter_===!!e.declutter&&ko(this.wrappedRenderedExtent_,v))return Ur(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const w=new EH(oN(h,d),v,h,d);let C;for(let N=0,z=b.length;N<z;++N)n.loadFeatures(b[N],h,u);const E=RS(h,d);let x=!0;const T=(N,z)=>{let M;const $=N.getStyleFunction()||t.getStyleFunction();if($&&(M=$(N,h)),M){const P=this.renderFeature(N,E,M,w,C,this.getLayer().getDeclutter(),z);x=x&&!P}},O=Gk(v),D=n.getFeaturesInExtent(O);m&&D.sort(m);for(let N=0,z=D.length;N<z;++N)T(D[N],N);this.renderedFeatures_=D,this.ready=x;const A=w.finish(),k=new PH(v,h,d,n.getOverlaps(),A,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=h,this.renderedRevision_=f,this.renderedRenderOrder_=m,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=y,this.wrappedRenderedExtent_=v,this.renderedCenter_=g,this.renderedProjection_=u,this.renderedPixelRatio_=d,this.replayGroup_=k,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,r,s,o,a){if(!n)return!1;let l=!1;if(Array.isArray(n))for(let c=0,u=n.length;c<u;++c)l=IS(r,e,n[c],t,this.boundHandleStyleImageChange_,s,o,a)||l;else l=IS(r,e,n,t,this.boundHandleStyleImageChange_,s,o,a);return l}}let Vs=0;const qt=1<<Vs++,Ee=1<<Vs++,Zt=1<<Vs++,Wi=1<<Vs++,Ns=1<<Vs++,_l=1<<Vs++,Su=Math.pow(2,Vs)-1,I0={[qt]:"boolean",[Ee]:"number",[Zt]:"string",[Wi]:"color",[Ns]:"number[]",[_l]:"size"},$H=Object.keys(I0).map(Number).sort(Hn);function jH(i){return i in I0}function bl(i){const e=[];for(const t of $H)wl(i,t)&&e.push(I0[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function wl(i,e){return(i&e)===e}function Sr(i,e){return i===e}class yt{constructor(e,t){if(!jH(e))throw new Error(`literal expressions must have a specific type, got ${bl(e)}`);this.type=e,this.value=t}}class zH{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}}function gN(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Nt(i,e,t){switch(typeof i){case"boolean":{if(Sr(e,Zt))return new yt(Zt,i?"true":"false");if(!wl(e,qt))throw new Error(`got a boolean, but expected ${bl(e)}`);return new yt(qt,i)}case"number":{if(Sr(e,_l))return new yt(_l,ei(i));if(Sr(e,qt))return new yt(qt,!!i);if(Sr(e,Zt))return new yt(Zt,i.toString());if(!wl(e,Ee))throw new Error(`got a number, but expected ${bl(e)}`);return new yt(Ee,i)}case"string":{if(Sr(e,Wi))return new yt(Wi,E0(i));if(Sr(e,qt))return new yt(qt,!!i);if(!wl(e,Zt))throw new Error(`got a string, but expected ${bl(e)}`);return new yt(Zt,i)}}if(!Array.isArray(i))throw new Error("expression must be an array or a primitive value");if(i.length===0)throw new Error("empty expression");if(typeof i[0]=="string")return ZH(i,e,t);for(const n of i)if(typeof n!="number")throw new Error("expected an array of numbers");if(Sr(e,_l)){if(i.length!==2)throw new Error(`expected an array of two values for a size, got ${i.length}`);return new yt(_l,i)}if(Sr(e,Wi)){if(i.length===3)return new yt(Wi,[...i,1]);if(i.length===4)return new yt(Wi,i);throw new Error(`expected an array of 3 or 4 values for a color, got ${i.length}`)}if(!wl(e,Ns))throw new Error(`got an array of numbers, but expected ${bl(e)}`);return new yt(Ns,i)}const F={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},GH={[F.Get]:re(de(1,1/0),qS),[F.Var]:re(de(1,1),qH),[F.Has]:re(de(1,1/0),qS),[F.Id]:re(WH,go),[F.Concat]:re(de(2,1/0),De(Zt)),[F.GeometryType]:re(YH,go),[F.LineMetric]:re(go),[F.Resolution]:re(Df,go),[F.Zoom]:re(Df,go),[F.Time]:re(Df,go),[F.Any]:re(de(2,1/0),De(qt)),[F.All]:re(de(2,1/0),De(qt)),[F.Not]:re(de(1,1),De(qt)),[F.Equal]:re(de(2,2),De(Su)),[F.NotEqual]:re(de(2,2),De(Su)),[F.GreaterThan]:re(de(2,2),De(Ee)),[F.GreaterThanOrEqualTo]:re(de(2,2),De(Ee)),[F.LessThan]:re(de(2,2),De(Ee)),[F.LessThanOrEqualTo]:re(de(2,2),De(Ee)),[F.Multiply]:re(de(2,1/0),WS),[F.Coalesce]:re(de(2,1/0),WS),[F.Divide]:re(de(2,2),De(Ee)),[F.Add]:re(de(2,1/0),De(Ee)),[F.Subtract]:re(de(2,2),De(Ee)),[F.Clamp]:re(de(3,3),De(Ee)),[F.Mod]:re(de(2,2),De(Ee)),[F.Pow]:re(de(2,2),De(Ee)),[F.Abs]:re(de(1,1),De(Ee)),[F.Floor]:re(de(1,1),De(Ee)),[F.Ceil]:re(de(1,1),De(Ee)),[F.Round]:re(de(1,1),De(Ee)),[F.Sin]:re(de(1,1),De(Ee)),[F.Cos]:re(de(1,1),De(Ee)),[F.Atan]:re(de(1,2),De(Ee)),[F.Sqrt]:re(de(1,1),De(Ee)),[F.Match]:re(de(4,1/0),YS,HH),[F.Between]:re(de(3,3),De(Ee)),[F.Interpolate]:re(de(6,1/0),YS,UH),[F.Case]:re(de(3,1/0),BH,VH),[F.In]:re(de(2,2),XH),[F.Number]:re(de(1,1/0),De(Su)),[F.String]:re(de(1,1/0),De(Su)),[F.Array]:re(de(1,1/0),De(Ee)),[F.Color]:re(de(1,4),De(Ee)),[F.Band]:re(de(1,3),De(Ee)),[F.Palette]:re(de(2,2),KH),[F.ToString]:re(de(1,1),De(qt|Ee|Zt|Wi))};function qS(i,e,t){const n=i.length-1,r=new Array(n);for(let s=0;s<n;++s){const o=i[s+1];switch(typeof o){case"number":{r[s]=new yt(Ee,o);break}case"string":{r[s]=new yt(Zt,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}s===0&&t.properties.add(String(o))}return r}function qH(i,e,t){const n=i[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return t.variables.add(n),[new yt(Zt,n)]}function WH(i,e,t){t.featureId=!0}function YH(i,e,t){t.geometryType=!0}function Df(i,e,t){t.mapState=!0}function go(i,e,t){const n=i[0];if(i.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function de(i,e){return function(t,n,r){const s=t[0],o=t.length-1;if(i===e){if(o!==i){const a=i===1?"":"s";throw new Error(`expected ${i} argument${a} for ${s}, got ${o}`)}}else if(o<i||o>e){const a=e===1/0?`${i} or more`:`${i} to ${e}`;throw new Error(`expected ${a} arguments for ${s}, got ${o}`)}}}function WS(i,e,t){const n=i.length-1,r=new Array(n);for(let s=0;s<n;++s){const o=Nt(i[s+1],e,t);r[s]=o}return r}function De(i){return function(e,t,n){const r=e.length-1,s=new Array(r);for(let o=0;o<r;++o){const a=Nt(e[o+1],i,n);s[o]=a}return s}}function BH(i,e,t){const n=i[0],r=i.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${r} instead`)}function YS(i,e,t){const n=i[0],r=i.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${r} instead`)}function HH(i,e,t){const n=i.length-1,r=Zt|Ee|qt,s=Nt(i[1],r,t),o=Nt(i[i.length-1],e,t),a=new Array(n-2);for(let l=0;l<n-2;l+=2){try{const c=Nt(i[l+2],s.type,t);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{const c=Nt(i[l+3],o.type,t);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[s,...a,o]}function UH(i,e,t){const n=i[1];let r;switch(n[0]){case"linear":r=1;break;case"exponential":const l=n[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);r=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const s=new yt(Ee,r);let o;try{o=Nt(i[2],Ee,t)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(i.length-3);for(let l=0;l<a.length;l+=2){try{const c=Nt(i[l+3],Ee,t);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{const c=Nt(i[l+4],e,t);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[s,o,...a]}function VH(i,e,t){const n=Nt(i[i.length-1],e,t),r=new Array(i.length-1);for(let s=0;s<r.length-1;s+=2){try{const o=Nt(i[s+1],qt,t);r[s]=o}catch(o){throw new Error(`failed to parse argument ${s} of case expression: ${o.message}`)}try{const o=Nt(i[s+2],n.type,t);r[s+1]=o}catch(o){throw new Error(`failed to parse argument ${s+1} of case expression: ${o.message}`)}}return r[r.length-1]=n,r}function XH(i,e,t){let n=i[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],r=Zt}else r=Ee;const s=new Array(n.length);for(let a=0;a<s.length;a++)try{const l=Nt(n[a],r,t);s[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[Nt(i[1],r,t),...s]}function KH(i,e,t){let n;try{n=Nt(i[1],Ee,t)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const r=i[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const s=new Array(r.length);for(let o=0;o<s.length;o++){let a;try{a=Nt(r[o],Wi,t)}catch(l){throw new Error(`failed to parse color at index ${o} in palette expression: ${l.message}`)}if(!(a instanceof yt))throw new Error(`the palette color at index ${o} must be a literal value`);s[o]=a}return[n,...s]}function re(...i){return function(e,t,n){const r=e[0];let s;for(let o=0;o<i.length;o++){const a=i[o](e,t,n);if(o==i.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");s=a}}return new zH(t,r,...s)}}function ZH(i,e,t){const n=i[0],r=GH[n];if(!r)throw new Error(`unknown operator: ${n}`);return r(i,e,t)}function vN(i){if(!i)return"";const e=i.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return vN(i.getGeometries()[0]);default:return""}}function yN(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function ur(i,e,t){const n=Nt(i,e,t);return Zi(n)}function Zi(i,e){if(i instanceof yt){if(i.type===Wi&&typeof i.value=="string"){const n=E0(i.value);return function(){return n}}return function(){return i.value}}const t=i.operator;switch(t){case F.Number:case F.String:case F.Coalesce:return QH(i);case F.Get:case F.Var:case F.Has:return JH(i);case F.Id:return n=>n.featureId;case F.GeometryType:return n=>n.geometryType;case F.Concat:{const n=i.args.map(r=>Zi(r));return r=>"".concat(...n.map(s=>s(r).toString()))}case F.Resolution:return n=>n.resolution;case F.Any:case F.All:case F.Between:case F.In:case F.Not:return tU(i);case F.Equal:case F.NotEqual:case F.LessThan:case F.LessThanOrEqualTo:case F.GreaterThan:case F.GreaterThanOrEqualTo:return eU(i);case F.Multiply:case F.Divide:case F.Add:case F.Subtract:case F.Clamp:case F.Mod:case F.Pow:case F.Abs:case F.Floor:case F.Ceil:case F.Round:case F.Sin:case F.Cos:case F.Atan:case F.Sqrt:return iU(i);case F.Case:return nU(i);case F.Match:return rU(i);case F.Interpolate:return sU(i);case F.ToString:return oU(i);default:throw new Error(`Unsupported operator ${t}`)}}function QH(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=Zi(i.args[s]);switch(t){case F.Coalesce:return s=>{for(let o=0;o<n;++o){const a=r[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case F.Number:case F.String:return s=>{for(let o=0;o<n;++o){const a=r[o](s);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function JH(i,e){const n=i.args[0].value;switch(i.operator){case F.Get:return r=>{const s=i.args;let o=r.properties[n];for(let a=1,l=s.length;a<l;++a){const u=s[a].value;o=o[u]}return o};case F.Var:return r=>r.variables[n];case F.Has:return r=>{const s=i.args;if(!(n in r.properties))return!1;let o=r.properties[n];for(let a=1,l=s.length;a<l;++a){const u=s[a].value;if(!o||!Object.hasOwn(o,u))return!1;o=o[u]}return!0};default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}function eU(i,e){const t=i.operator,n=Zi(i.args[0]),r=Zi(i.args[1]);switch(t){case F.Equal:return s=>n(s)===r(s);case F.NotEqual:return s=>n(s)!==r(s);case F.LessThan:return s=>n(s)<r(s);case F.LessThanOrEqualTo:return s=>n(s)<=r(s);case F.GreaterThan:return s=>n(s)>r(s);case F.GreaterThanOrEqualTo:return s=>n(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function tU(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=Zi(i.args[s]);switch(t){case F.Any:return s=>{for(let o=0;o<n;++o)if(r[o](s))return!0;return!1};case F.All:return s=>{for(let o=0;o<n;++o)if(!r[o](s))return!1;return!0};case F.Between:return s=>{const o=r[0](s),a=r[1](s),l=r[2](s);return o>=a&&o<=l};case F.In:return s=>{const o=r[0](s);for(let a=1;a<n;++a)if(o===r[a](s))return!0;return!1};case F.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function iU(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=Zi(i.args[s]);switch(t){case F.Multiply:return s=>{let o=1;for(let a=0;a<n;++a)o*=r[a](s);return o};case F.Divide:return s=>r[0](s)/r[1](s);case F.Add:return s=>{let o=0;for(let a=0;a<n;++a)o+=r[a](s);return o};case F.Subtract:return s=>r[0](s)-r[1](s);case F.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case F.Mod:return s=>r[0](s)%r[1](s);case F.Pow:return s=>Math.pow(r[0](s),r[1](s));case F.Abs:return s=>Math.abs(r[0](s));case F.Floor:return s=>Math.floor(r[0](s));case F.Ceil:return s=>Math.ceil(r[0](s));case F.Round:return s=>Math.round(r[0](s));case F.Sin:return s=>Math.sin(r[0](s));case F.Cos:return s=>Math.cos(r[0](s));case F.Atan:return n===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case F.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function nU(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=Zi(i.args[r]);return r=>{for(let s=0;s<t-1;s+=2)if(n[s](r))return n[s+1](r);return n[t-1](r)}}function rU(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=Zi(i.args[r]);return r=>{const s=n[0](r);for(let o=1;o<t-1;o+=2)if(s===n[o](r))return n[o+1](r);return n[t-1](r)}}function sU(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=Zi(i.args[r]);return r=>{const s=n[0](r),o=n[1](r);let a,l;for(let c=2;c<t;c+=2){const u=n[c](r);let h=n[c+1](r);const d=Array.isArray(h);if(d&&(h=PB(h)),u>=o)return c===2?h:d?aU(s,o,a,l,u,h):xl(s,o,a,l,u,h);a=u,l=h}return l}}function oU(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=Zi(i.args[s]);switch(t){case F.ToString:return s=>{const o=r[0](s);return i.args[0].type===Wi?C0(o):o.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function xl(i,e,t,n,r,s){const o=r-t;if(o===0)return n;const a=e-t,l=i===1?a/o:(Math.pow(i,a)-1)/(Math.pow(i,o)-1);return n+l*(s-n)}function aU(i,e,t,n,r,s){if(r-t===0)return n;const a=xS(n),l=xS(s);let c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const u=[xl(i,e,t,a[0],r,l[0]),xl(i,e,t,a[1],r,l[1]),a[2]+xl(i,e,t,0,r,c),xl(i,e,t,n[3],r,s[3])];return DB(u)}function lU(i){return!0}function cU(i){const e=gN(),t=uU(i,e),n=yN();return function(r,s){if(n.properties=r.getPropertiesInternal(),n.resolution=s,e.featureId){const o=r.getId();o!==void 0?n.featureId=o:n.featureId=null}return e.geometryType&&(n.geometryType=vN(r.getGeometry())),t(n)}}function BS(i){const e=gN(),t=i.length,n=new Array(t);for(let o=0;o<t;++o)n[o]=J_(i[o],e);const r=yN(),s=new Array(t);return function(o,a){if(r.properties=o.getPropertiesInternal(),r.resolution=a,e.featureId){const c=o.getId();c!==void 0?r.featureId=c:r.featureId=null}let l=0;for(let c=0;c<t;++c){const u=n[c](r);u&&(s[l]=u,l+=1)}return s.length=l,s}}function uU(i,e){const t=i.length,n=new Array(t);for(let r=0;r<t;++r){const s=i[r],o="filter"in s?ur(s.filter,qt,e):lU;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=J_(s.style[c],e)}else a=[J_(s.style,e)];n[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<t;++a){const l=n[a].filter;if(l(r)&&!(i[a].else&&o)){o=!0;for(const c of n[a].styles){const u=c(r);u&&s.push(u)}}}return s}}function J_(i,e){const t=Ql(i,"",e),n=Jl(i,"",e),r=hU(i,e),s=dU(i,e),o=Jt(i,"z-index",e);if(!t&&!n&&!r&&!s&&!ua(i))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const a=new kt;return function(l){let c=!0;if(t){const u=t(l);u&&(c=!1),a.setFill(u)}if(n){const u=n(l);u&&(c=!1),a.setStroke(u)}if(r){const u=r(l);u&&(c=!1),a.setText(u)}if(s){const u=s(l);u&&(c=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),c?null:a}}function Ql(i,e,t){let n;if(e+"fill-pattern-src"in i)n=gU(i,e+"fill-",t);else{if(i[e+"fill-color"]==="none")return s=>null;n=O0(i,e+"fill-color",t)}if(!n)return null;const r=new Pi;return function(s){const o=n(s);return o===S0?null:(r.setColor(o),r)}}function Jl(i,e,t){const n=Jt(i,e+"stroke-width",t),r=O0(i,e+"stroke-color",t);if(!n&&!r)return null;const s=zn(i,e+"stroke-line-cap",t),o=zn(i,e+"stroke-line-join",t),a=_N(i,e+"stroke-line-dash",t),l=Jt(i,e+"stroke-line-dash-offset",t),c=Jt(i,e+"stroke-miter-limit",t),u=new bn;return function(h){if(r){const d=r(h);if(d===S0)return null;u.setColor(d)}if(n&&u.setWidth(n(h)),s){const d=s(h);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(d)}if(o){const d=o(h);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(d)}return a&&u.setLineDash(a(h)),l&&u.setLineDashOffset(l(h)),c&&u.setMiterLimit(c(h)),u}}function hU(i,e){const t="text-",n=zn(i,t+"value",e);if(!n)return null;const r=Ql(i,t,e),s=Ql(i,t+"background-",e),o=Jl(i,t,e),a=Jl(i,t+"background-",e),l=zn(i,t+"font",e),c=Jt(i,t+"max-angle",e),u=Jt(i,t+"offset-x",e),h=Jt(i,t+"offset-y",e),d=Jo(i,t+"overflow",e),f=zn(i,t+"placement",e),p=Jt(i,t+"repeat",e),m=fd(i,t+"scale",e),g=Jo(i,t+"rotate-with-view",e),v=Jt(i,t+"rotation",e),y=zn(i,t+"align",e),b=zn(i,t+"justify",e),_=zn(i,t+"baseline",e),w=Jo(i,t+"keep-upright",e),C=_N(i,t+"padding",e),E=pd(i,t+"declutter-mode"),x=new dd({declutterMode:E});return function(T){if(x.setText(n(T)),r&&x.setFill(r(T)),s&&x.setBackgroundFill(s(T)),o&&x.setStroke(o(T)),a&&x.setBackgroundStroke(a(T)),l&&x.setFont(l(T)),c&&x.setMaxAngle(c(T)),u&&x.setOffsetX(u(T)),h&&x.setOffsetY(h(T)),d&&x.setOverflow(d(T)),f){const O=f(T);if(O!=="point"&&O!=="line")throw new Error("Expected point or line for text-placement");x.setPlacement(O)}if(p&&x.setRepeat(p(T)),m&&x.setScale(m(T)),g&&x.setRotateWithView(g(T)),v&&x.setRotation(v(T)),y){const O=y(T);if(O!=="left"&&O!=="center"&&O!=="right"&&O!=="end"&&O!=="start")throw new Error("Expected left, right, center, start, or end for text-align");x.setTextAlign(O)}if(b){const O=b(T);if(O!=="left"&&O!=="right"&&O!=="center")throw new Error("Expected left, right, or center for text-justify");x.setJustify(O)}if(_){const O=_(T);if(O!=="bottom"&&O!=="top"&&O!=="middle"&&O!=="alphabetic"&&O!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");x.setTextBaseline(O)}return C&&x.setPadding(C(T)),w&&x.setKeepUpright(w(T)),x}}function dU(i,e){return"icon-src"in i?fU(i,e):"shape-points"in i?pU(i,e):"circle-radius"in i?mU(i,e):null}function fU(i,e){const t="icon-",n=t+"src",r=bN(i[n],n),s=dh(i,t+"anchor",e),o=fd(i,t+"scale",e),a=Jt(i,t+"opacity",e),l=dh(i,t+"displacement",e),c=Jt(i,t+"rotation",e),u=Jo(i,t+"rotate-with-view",e),h=US(i,t+"anchor-origin"),d=VS(i,t+"anchor-x-units"),f=VS(i,t+"anchor-y-units"),p=bU(i,t+"color"),m=yU(i,t+"cross-origin"),g=_U(i,t+"offset"),v=US(i,t+"offset-origin"),y=fh(i,t+"width"),b=fh(i,t+"height"),_=vU(i,t+"size"),w=pd(i,t+"declutter-mode"),C=new Tc({src:r,anchorOrigin:h,anchorXUnits:d,anchorYUnits:f,color:p,crossOrigin:m,offset:g,offsetOrigin:v,height:b,width:y,size:_,declutterMode:w});return function(E){return a&&C.setOpacity(a(E)),l&&C.setDisplacement(l(E)),c&&C.setRotation(c(E)),u&&C.setRotateWithView(u(E)),o&&C.setScale(o(E)),s&&C.setAnchor(s(E)),C}}function pU(i,e){const t="shape-",n=t+"points",r=t+"radius",s=eb(i[n],n),o=eb(i[r],r),a=Ql(i,t,e),l=Jl(i,t,e),c=fd(i,t+"scale",e),u=dh(i,t+"displacement",e),h=Jt(i,t+"rotation",e),d=Jo(i,t+"rotate-with-view",e),f=fh(i,t+"radius2"),p=fh(i,t+"angle"),m=pd(i,t+"declutter-mode"),g=new hd({points:s,radius:o,radius2:f,angle:p,declutterMode:m});return function(v){return a&&g.setFill(a(v)),l&&g.setStroke(l(v)),u&&g.setDisplacement(u(v)),h&&g.setRotation(h(v)),d&&g.setRotateWithView(d(v)),c&&g.setScale(c(v)),g}}function mU(i,e){const t="circle-",n=Ql(i,t,e),r=Jl(i,t,e),s=Jt(i,t+"radius",e),o=fd(i,t+"scale",e),a=dh(i,t+"displacement",e),l=Jt(i,t+"rotation",e),c=Jo(i,t+"rotate-with-view",e),u=pd(i,t+"declutter-mode"),h=new ar({radius:5,declutterMode:u});return function(d){return s&&h.setRadius(s(d)),n&&h.setFill(n(d)),r&&h.setStroke(r(d)),a&&h.setDisplacement(a(d)),l&&h.setRotation(l(d)),c&&h.setRotateWithView(c(d)),o&&h.setScale(o(d)),h}}function Jt(i,e,t){if(!(e in i))return;const n=ur(i[e],Ee,t);return function(r){return eb(n(r),e)}}function zn(i,e,t){if(!(e in i))return null;const n=ur(i[e],Zt,t);return function(r){return bN(n(r),e)}}function gU(i,e,t){const n=zn(i,e+"pattern-src",t),r=HS(i,e+"pattern-offset",t),s=HS(i,e+"pattern-size",t),o=O0(i,e+"color",t);return function(a){return{src:n(a),offset:r&&r(a),size:s&&s(a),color:o&&o(a)}}}function Jo(i,e,t){if(!(e in i))return null;const n=ur(i[e],qt,t);return function(r){const s=n(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function O0(i,e,t){if(!(e in i))return null;const n=ur(i[e],Wi,t);return function(r){return wN(n(r),e)}}function _N(i,e,t){if(!(e in i))return null;const n=ur(i[e],Ns,t);return function(r){return Rc(n(r),e)}}function dh(i,e,t){if(!(e in i))return null;const n=ur(i[e],Ns,t);return function(r){const s=Rc(n(r),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function HS(i,e,t){if(!(e in i))return null;const n=ur(i[e],Ns,t);return function(r){return xN(n(r),e)}}function fd(i,e,t){if(!(e in i))return null;const n=ur(i[e],Ns|Ee,t);return function(r){return wU(n(r),e)}}function fh(i,e){const t=i[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function vU(i,e){const t=i[e];if(t!==void 0){if(typeof t=="number")return ei(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function yU(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function US(i,e){const t=i[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function VS(i,e){const t=i[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function _U(i,e){const t=i[e];if(t!==void 0)return Rc(t,e)}function pd(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function bU(i,e){const t=i[e];if(t!==void 0)return wN(t,e)}function Rc(i,e){if(!Array.isArray(i))throw new Error(`Expected an array for ${e}`);const t=i.length;for(let n=0;n<t;++n)if(typeof i[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return i}function bN(i,e){if(typeof i!="string")throw new Error(`Expected a string for ${e}`);return i}function eb(i,e){if(typeof i!="number")throw new Error(`Expected a number for ${e}`);return i}function wN(i,e){if(typeof i=="string")return i;const t=Rc(i,e),n=t.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function xN(i,e){const t=Rc(i,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function wU(i,e){return typeof i=="number"?i:xN(i,e)}const ji={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function XS(i,e,t){return(function(n,r,s,o,a){if(!n)return;if(!r&&!e)return n;const l=e?0:s[0]*r,c=e?0:s[1]*r,u=a?a[0]:0,h=a?a[1]:0;let d=i[0]+l/2+u,f=i[2]-l/2+u,p=i[1]+c/2+h,m=i[3]-c/2+h;d>f&&(d=(f+d)/2,f=d),p>m&&(p=(m+p)/2,m=p);let g=it(n[0],d,f),v=it(n[1],p,m);if(o&&t&&r){const y=30*r;g+=-y*Math.log(1+Math.max(0,d-n[0])/y)+y*Math.log(1+Math.max(0,n[0]-f)/y),v+=-y*Math.log(1+Math.max(0,p-n[1])/y)+y*Math.log(1+Math.max(0,n[1]-m)/y)}return[g,v]})}function xU(i){return i}function SN(i){return Math.pow(i,3)}function ka(i){return 1-SN(1-i)}function SU(i){return 3*i*i-2*i*i*i}function EU(i){return i}function P0(i,e,t,n){const r=Ne(e)/t[0],s=Yt(e)/t[1];return n?Math.min(i,Math.max(r,s)):Math.min(i,Math.min(r,s))}function D0(i,e,t){let n=Math.min(i,e);const r=50;return n*=Math.log(1+r*Math.max(0,i/e-1))/r+1,t&&(n=Math.max(n,t),n/=Math.log(1+r*Math.max(0,t/i-1))/r+1),it(n,t/2,e*2)}function CU(i,e,t,n){return e=e!==void 0?e:!0,(function(r,s,o,a){if(r!==void 0){const l=i[0],c=i[i.length-1],u=t?P0(l,t,o,n):l;if(a)return e?D0(r,u,c):it(r,c,u);const h=Math.min(u,r),d=Math.floor(i0(i,h,s));return i[d]>u&&d<i.length-1?i[d+1]:i[d]}})}function TU(i,e,t,n,r,s){return n=n!==void 0?n:!0,t=t!==void 0?t:0,(function(o,a,l,c){if(o!==void 0){const u=r?P0(e,r,l,s):e;if(c)return n?D0(o,u,t):it(o,t,u);const h=1e-9,d=Math.ceil(Math.log(e/u)/Math.log(i)-h),f=-a*(.5-h)+.5,p=Math.min(u,o),m=Math.floor(Math.log(e/p)/Math.log(i)+f),g=Math.max(d,m),v=e/Math.pow(i,g);return it(v,t,u)}})}function KS(i,e,t,n,r){return t=t!==void 0?t:!0,(function(s,o,a,l){if(s!==void 0){const c=n?P0(i,n,a,r):i;return!t||!l?it(s,e,c):D0(s,c,e)}})}function A0(i){if(i!==void 0)return 0}function ZS(i){if(i!==void 0)return i}function RU(i){const e=2*Math.PI/i;return(function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function IU(i){const e=Lr(5);return(function(t,n){return n||t===void 0?t:Math.abs(t)<=e?0:t})}const OU=42,M0=256,Af=0;class dn extends rn{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=d0(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&zk(),e.center&&(e.center=Fn(e.center,this.projection_)),e.extent&&(e.extent=Ar(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in ji)delete t[a];this.setProperties(t,!0);const n=DU(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const r=PU(e),s=n.constraint,o=AU(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-t[3]+t[1]-r[1]),a=s/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let r=arguments[n];r.center&&(r=Object.assign({},r),r.center=Fn(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Fn(r.anchor,this.getProjection())),t[n]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const u=arguments[r];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(r===t){n&&Eu(n,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<t;++r){const u=arguments[r],h={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||SU,callback:n};if(u.center&&(h.sourceCenter=o,h.targetCenter=u.center.slice(),o=h.targetCenter),u.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(u.zoom),a=h.targetResolution):u.resolution&&(h.sourceResolution=a,h.targetResolution=u.resolution,a=h.targetResolution),u.rotation!==void 0){h.sourceRotation=l;const d=Ko(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+d,l=h.targetRotation}MU(h)?h.complete=!0:s+=h.duration,c.push(h)}this.animations_.push(c),this.setHint($t.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[$t.ANIMATING]>0}getInteracting(){return this.hints_[$t.INTERACTING]>0}cancelAnimations(){this.setHint($t.ANIMATING,-this.hints_[$t.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const r=this.animations_[t];if(r[0].callback&&Eu(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const r=this.animations_[n];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const c=e-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const h=l.easing(u);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],p=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const g=d+h*(p-d),v=f+h*(m-f);this.targetCenter_=[g,v]}if(l.sourceResolution&&l.targetResolution){const d=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),p=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(p,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=h===1?Ko(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[n]=null,this.setHint($t.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&Eu(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const r=this.getCenterInternal();return r!==void 0&&(n=[r[0]-t[0],r[1]-t[1]],o0(n,e-this.getRotation()),Ak(n,t)),n}calculateCenterZoom(e,t){let n;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=t[0]-e*(t[0]-r[0])/s,a=t[1]-e*(t[1]-r[1])/s;n=[o,a]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],r=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&U_(e,this.getProjection())}getCenterInternal(){return this.get(ji.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return Gk(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Ae(t,"The view center is not defined");const n=this.getResolution();Ae(n!==void 0,"The view resolution is not defined");const r=this.getRotation();return Ae(r!==void 0,"The view rotation is not defined"),q_(t,n,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ji.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Ar(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=Ne(e)/t[0],r=Yt(e)/t[1];return Math.max(n,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(t/n)/Math.log(e);return(function(s){return t/Math.pow(e,s*r)})}getRotation(){return this.get(ji.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(n/r)/t;return(function(o){return Math.log(n/o)/t/s})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=Mf(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,n)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,r;if(this.resolutions_){const s=i0(this.resolutions_,e,1);t=s,n=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=n/this.resolutions_[s+1]}else n=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(n/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=it(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(n,it(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(Ae(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Ae(!id(e),"Cannot fit empty extent provided as `geometry`");const r=Ar(e,this.getProjection());n=bS(r)}else if(e.getType()==="Circle"){const r=Ar(e.getExtent(),this.getProjection());n=bS(r),n.rotate(this.getRotation(),Hr(r))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let h=0,d=s.length;h<d;h+=o){const f=s[h]*n-s[h+1]*r,p=s[h]*r+s[h+1]*n;a=Math.min(a,f),l=Math.min(l,p),c=Math.max(c,f),u=Math.max(u,p)}return[a,l,c,u]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),u=Math.sin(c),h=Math.cos(c),d=Hr(a);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;const f=d[0]*h-d[1]*u,p=d[1]*h+d[0]*u,m=this.getConstrainedCenter([f,p],l),g=t.callback?t.callback:Wl;t.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:t.duration,easing:t.easing},g):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),Eu(g,!0))}centerOn(e,t,n){this.centerOnInternal(Fn(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(Mf(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-n),l=Mf(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,n);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=U_(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Fn(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,n);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Fn(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Fn(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,n),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,n),a=this.constraints_.center(this.targetCenter_,o,s,n,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(ji.ROTATION)!==r&&this.set(ji.ROTATION,r),this.get(ji.RESOLUTION)!==o&&(this.set(ji.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(ji.CENTER)||!nh(this.get(ji.CENTER),a))&&this.set(ji.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!nh(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:ka,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint($t.INTERACTING,1)}endInteraction(e,t,n){n=n&&Fn(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint($t.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function Eu(i,e){setTimeout(function(){i(e)},0)}function PU(i){if(i.extent!==void 0){const t=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return XS(i.extent,i.constrainOnlyCenter,t)}const e=d0(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,XS(t,!1,!1)}return xU}function DU(i){let e,t,n,o=i.minZoom!==void 0?i.minZoom:Af,a=i.maxZoom!==void 0?i.maxZoom:28;const l=i.zoomFactor!==void 0?i.zoomFactor:2,c=i.multiWorld!==void 0?i.multiWorld:!1,u=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,h=i.showFullExtent!==void 0?i.showFullExtent:!1,d=d0(i.projection,"EPSG:3857"),f=d.getExtent();let p=i.constrainOnlyCenter,m=i.extent;if(!c&&!m&&d.isGlobal()&&(p=!1,m=f),i.resolutions!==void 0){const g=i.resolutions;t=g[o],n=g[a]!==void 0?g[a]:g[g.length-1],i.constrainResolution?e=CU(g,u,!p&&m,h):e=KS(t,n,u,!p&&m,h)}else{const v=(f?Math.max(Ne(f),Yt(f)):360*a0.degrees/d.getMetersPerUnit())/M0/Math.pow(2,Af),y=v/Math.pow(2,28-Af);t=i.maxResolution,t!==void 0?o=0:t=v/Math.pow(l,o),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=t/Math.pow(l,a):n=v/Math.pow(l,a):n=y),a=o+Math.floor(Math.log(t/n)/Math.log(l)),n=t/Math.pow(l,a-o),i.constrainResolution?e=TU(l,t,n,u,!p&&m,h):e=KS(t,n,u,!p&&m,h)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:o,zoomFactor:l}}function AU(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const t=i.constrainRotation;return t===void 0||t===!0?IU():t===!1?ZS:typeof t=="number"?RU(t):ZS}return A0}function MU(i){return!(i.sourceCenter&&i.targetCenter&&!nh(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function Mf(i,e,t,n,r){const s=Math.cos(-r);let o=Math.sin(-r),a=i[0]*s-i[1]*o,l=i[1]*s+i[0]*o;a+=(e[0]/2-t[0])*n,l+=(t[1]-e[1]/2)*n,o=-o;const c=a*s-l*o,u=l*s+a*o;return[c,u]}const ke={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class EN extends rn{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[ke.OPACITY]=e.opacity!==void 0?e.opacity:1,Ae(typeof t[ke.OPACITY]=="number","Layer opacity must be a number"),t[ke.VISIBLE]=e.visible!==void 0?e.visible:!0,t[ke.Z_INDEX]=e.zIndex,t[ke.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[ke.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[ke.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[ke.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=it(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Ie()}getLayerStatesArray(e){return Ie()}getExtent(){return this.get(ke.EXTENT)}getMaxResolution(){return this.get(ke.MAX_RESOLUTION)}getMinResolution(){return this.get(ke.MIN_RESOLUTION)}getMinZoom(){return this.get(ke.MIN_ZOOM)}getMaxZoom(){return this.get(ke.MAX_ZOOM)}getOpacity(){return this.get(ke.OPACITY)}getSourceState(){return Ie()}getVisible(){return this.get(ke.VISIBLE)}getZIndex(){return this.get(ke.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(ke.EXTENT,e)}setMaxResolution(e){this.set(ke.MAX_RESOLUTION,e)}setMinResolution(e){this.set(ke.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(ke.MAX_ZOOM,e)}setMinZoom(e){this.set(ke.MIN_ZOOM,e)}setOpacity(e){Ae(typeof e=="number","Layer opacity must be a number"),this.set(ke.OPACITY,e)}setVisible(e){this.set(ke.VISIBLE,e)}setZIndex(e){this.set(ke.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class md extends EN{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(ke.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(ke.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Be(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Re(e,le.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof dn?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(o=>o.layer===this),!r)return!1}else r=this.getLayerState();const s=this.getExtent();return k0(r,t.viewState)&&(!s||Qt(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const n=e instanceof dn?e.getViewStateAndExtent():e;let r=t(n);return Array.isArray(r)||(r=[r]),r}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(ke.MAP,e)}getMapInternal(){return this.get(ke.MAP)}setMap(e){this.mapPrecomposeKey_&&(Be(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Be(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Re(e,Ti.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Re(this,le.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,n=this.getLayerState(!1);Ae(!t.some(r=>r.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(n)}setSource(e){this.set(ke.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function k0(i,e){if(!i.visible)return!1;const t=e.resolution;if(t<i.minResolution||t>=i.maxResolution)return!1;const n=e.zoom;return n>i.minZoom&&n<=i.maxZoom}const QS={RENDER_ORDER:"renderOrder"};class CN extends md{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(QS.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new cN(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(QS.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?hN:e;const t=kU(e);this.styleFunction_=e===null?void 0:mH(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function kU(i){if(i===void 0)return hN;if(!i)return null;if(typeof i=="function"||i instanceof kt)return i;if(!Array.isArray(i))return BS([i]);if(i.length===0)return[];const e=i.length,t=i[0];if(t instanceof kt){const r=new Array(e);for(let s=0;s<e;++s){const o=i[s];if(!(o instanceof kt))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in t){const r=new Array(e);for(let s=0;s<e;++s){const o=i[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return cU(r)}return BS(i)}class tb extends CN{constructor(e){super(e)}createRenderer(){return new FH(this)}}const ie={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class N0 extends Kh{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(le.CHANGE)}release(){this.setState(ie.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==ie.EMPTY){if(this.state!==ie.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Ie()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const r=t-n+1e3/60;return r>=this.transition_?1:SN(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class TN extends N0{constructor(e,t,n,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=n,this.key=n,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=ie.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=ie.ERROR,this.unlistenImage_(),this.image_=NU(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=ie.LOADED:this.state=ie.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==ie.ERROR&&(this.state=ie.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ie.IDLE&&(this.state=ie.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=AB(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function NU(){const i=bt(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}class LU{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const r=this.points_[t+2]-this.points_[n+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[n],o=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class Do extends Tn{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}class Rr extends Do{constructor(e,t,n,r,s,o){super(e,t,s),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const et={SINGLECLICK:"singleclick",CLICK:le.CLICK,DBLCLICK:le.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},ib={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class FU extends Kh{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Re(n,ib.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Re(n,ib.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(le.TOUCHMOVE,this.boundHandleTouchMove_,Zk?{passive:!1}:!1)}emulateClick_(e){let t=new Rr(et.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Rr(et.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Rr(et.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==et.POINTERUP||t.type==et.POINTERCANCEL){delete this.trackedTouches_[n];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==et.POINTERDOWN||t.type==et.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Rr(et.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Be),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Rr(et.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Re(n,et.POINTERMOVE,this.handlePointerMove_,this),Re(n,et.POINTERUP,this.handlePointerUp_,this),Re(this.element_,et.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Re(this.element_.getRootNode(),et.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Rr(et.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Rr(et.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Be(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(le.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Be(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Be),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const $n={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Ft={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ph=1/0;class $U{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Ma(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(n);return delete this.queuedElements_[r],n}enqueue(e){Ae(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=ph?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,r=t.length,s=t[e],o=n[e],a=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),u=c<r&&n[c]<n[l]?c:l;t[e]=t[u],n[e]=n[u],e=u}t[e]=s,n[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const n=this.elements_,r=this.priorities_,s=n[t],o=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>o)n[t]=n[a],r[t]=r[a],t=a;else break}n[t]=s,r[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let r=0;const s=t.length;let o,a,l;for(a=0;a<s;++a)o=t[a],l=e(o),l==ph?delete this.queuedElements_[this.keyFunction_(o)]:(n[r]=l,t[r++]=o);t.length=r,n.length=r,this.heapify_()}}class jU extends $U{constructor(e,t){super(n=>e.apply(null,n),n=>n[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(le.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===ie.LOADED||n===ie.ERROR||n===ie.EMPTY){n!==ie.ERROR&&t.removeEventListener(le.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;){const r=this.dequeue()[0],s=r.getKey();r.getState()===ie.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++n,r.load())}}}function zU(i,e,t,n,r){if(!i||!(t in i.wantedTiles)||!i.wantedTiles[t][e.getKey()])return ph;const s=i.viewState.center,o=n[0]-s[0],a=n[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class L0 extends rn{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,n=this.listenerKeys.length;t<n;++t)Be(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==Wl&&this.listenerKeys.push(Re(e,$n.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class GU extends L0{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"›",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(le.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+cd+" "+R0+(this.collapsed_&&this.collapsible_?" "+SS:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),n=new Set(t.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>n.add(r)):n.add(this.attributions_)),!this.overrideCollapsible_){const r=!t.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(n)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(r=>sY(()=>r))),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Ur(t,this.renderedAttributions_)){Qk(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const o=document.createElement("li");o.innerHTML=t[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(SS),this.collapsed_?wS(this.collapseLabel_,this.label_):wS(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class qU extends L0{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"⇧",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(le.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+cd+" "+R0,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(_u)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:ka}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const r="rotate("+n+"rad)";if(this.autoHide_){const s=this.element.classList.contains(_u);!s&&n===0?this.element.classList.add(_u):s&&n!==0&&this.element.classList.remove(_u)}this.label_.style.transform=r}this.rotation_=n}}class WU extends L0{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(le.CLICK,this.handleClick_.bind(this,n),!1);const h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=c,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(le.CLICK,this.handleClick_.bind(this,-n),!1);const d=t+" "+cd+" "+R0,f=this.element;f.className=d,f.appendChild(u),f.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const r=n.getZoom();if(r!==void 0){const s=n.getConstrainedZoom(r+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:s,duration:this.duration_,easing:ka})):n.setZoom(s)}}}function YU(i){i=i||{};const e=new Yi;return(i.zoom!==void 0?i.zoom:!0)&&e.push(new WU(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&e.push(new qU(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&e.push(new GU(i.attributionOptions)),e}const JS={ACTIVE:"active"};class Na extends rn{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(JS.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(JS.ACTIVE,e)}setMap(e){this.map_=e}}function BU(i,e,t){const n=i.getCenterInternal();if(n){const r=[n[0]+e[0],n[1]+e[1]];i.animateInternal({duration:t!==void 0?t:250,easing:EU,center:i.getConstrainedCenter(r)})}}function F0(i,e,t,n){const r=i.getZoom();if(r===void 0)return;const s=i.getConstrainedZoom(r+e),o=i.getResolutionForZoom(s);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:t,duration:n!==void 0?n:250,easing:ka})}class HU extends Na{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==et.DBLCLICK){const n=e.originalEvent,r=e.map,s=e.coordinate,o=n.shiftKey?-this.delta_:this.delta_,a=r.getView();F0(a,o,s,this.duration_),n.preventDefault(),t=!0}return!t}}function nb(i){const e=arguments;return function(t){let n=!0;for(let r=0,s=e.length;r<s&&(n=n&&e[r](t),!!n);++r);return n}}const UU=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},VU=function(i){const e=i.map.getTargetElement(),t=e.getRootNode(),n=i.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(n):e.contains(n)},RN=function(i){const e=i.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?VU(i):!0},XU=Ms,IN=function(i){const e=i.originalEvent;return"pointerId"in e&&e.button==0&&!(yB&&w0&&e.ctrlKey)},eE=xc,KU=function(i){return i.type==et.SINGLECLICK},ON=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},ZU=function(i){const e=i.originalEvent;return!e.altKey&&(w0?e.metaKey:e.ctrlKey)&&!e.shiftKey},QU=function(i){const e=i.originalEvent;return w0?e.metaKey:e.ctrlKey},$0=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},PN=function(i){const e=i.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},kf=function(i){const e=i.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},JU=function(i){const e=i.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class Ic extends Na{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==et.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==et.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==et.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==et.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function j0(i){const e=i.length;let t=0,n=0;for(let r=0;r<e;r++)t+=i[r].clientX,n+=i[r].clientY;return{clientX:t/e,clientY:n/e}}class eV extends Ic{constructor(e){super({stopDown:xc}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:nb(ON,JU);this.condition_=e.onFocusOnly?nb(RN,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,r=t.getEventPixel(j0(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();Mk(s,a.getResolution()),o0(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:ka})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class tV extends Ic{constructor(e){e=e||{},super({stopDown:xc}),this.condition_=e.condition?e.condition:UU,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!kf(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===A0)return;const r=t.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return kf(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return kf(e)&&IN(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class iV extends Xh{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+n,r.top=Math.min(e[1],t[1])+n,r.width=Math.abs(t[0]-e[0])+n,r.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Ul([r])}getGeometry(){return this.geometry_}}const vo={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class ul extends Tn{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class DN extends Ic{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new iV(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??IN,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const r=n[0]-t[0],s=n[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new ul(vo.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new ul(t?vo.BOXEND:vo.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ul(vo.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new ul(vo.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new ul(vo.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class nV extends DN{constructor(e){e=e||{};const t=e.condition?e.condition:$0;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=n.rotatedExtentForGeometry(r),o=n.getResolutionForExtentInternal(s),a=n.getResolution()/o;r=r.clone(),r.scale(a*a)}n.fitInternal(r,{duration:this.duration_,easing:ka})}}const os={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class rV extends Na{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return ON(t)&&PN(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==le.KEYDOWN){const n=e.originalEvent,r=n.key;if(this.condition_(e)&&(r==os.DOWN||r==os.LEFT||r==os.RIGHT||r==os.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;r==os.DOWN?c=-a:r==os.LEFT?l=-a:r==os.RIGHT?l=a:c=a;const u=[l,c];o0(u,o.getRotation()),BU(o,u,this.duration_),n.preventDefault(),t=!0}}return!t}}class sV extends Na{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!QU(t)&&PN(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==le.KEYDOWN||e.type==le.KEYPRESS){const n=e.originalEvent,r=n.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();F0(a,o,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}const oV=40,aV=300;class lV extends Na{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:XU;this.condition_=e.onFocusOnly?nb(RN,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==le.WHEEL)return!0;const n=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=oV;break;case WheelEvent.DOM_DELTA_PAGE:s*=aV;break}if(s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=n.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-it(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),F0(t,n,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class cV extends Ic{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=xc),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==A0&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(j0(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class uV extends Ic{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=xc),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],r=this.targetPointers[1],s=n.clientX-r.clientX,o=n.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(j0(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function hV(i){i=i||{};const e=new Yi,t=new LU(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&e.push(new tV),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&e.push(new HU({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&e.push(new eV({onFocusOnly:i.onFocusOnly,kinetic:t})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&e.push(new cV),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&e.push(new uV({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(e.push(new rV),e.push(new sV({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&e.push(new lV({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&e.push(new nV({duration:i.zoomDuration})),e}class Ir extends Tn{constructor(e,t){super(e),this.layer=t}}const Nf={LAYERS:"layers"};class La extends EN{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Nf.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new Yi(n.slice(),{unique:!0}):Ae(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new Yi(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Be),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Re(e,Tt.ADD,this.handleLayersAdd_,this),Re(e,Tt.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Be);Ma(this.listenerKeys_);const t=e.getArray();for(let n=0,r=t.length;n<r;n++){const s=t[n];this.registerLayerListeners_(s),this.dispatchEvent(new Ir("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[Re(e,la.PROPERTYCHANGE,this.handleLayerChange_,this),Re(e,le.CHANGE,this.handleLayerChange_,this)];e instanceof La&&t.push(Re(e,"addlayer",this.handleLayerGroupAdd_,this),Re(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[_e(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Ir("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Ir("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Ir("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=_e(t);this.listenerKeys_[n].forEach(Be),delete this.listenerKeys_[n],this.dispatchEvent(new Ir("removelayer",t)),this.changed()}getLayers(){return this.get(Nf.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let r=0,s=n.length;r<s;++r)this.dispatchEvent(new Ir("removelayer",n[r]))}this.set(Nf.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=n,a=t.length;o<a;o++){const l=t[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=xs(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}}class dV extends Xh{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Ie()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;or(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),qk(r,n)}forEachFeatureAtCoordinate(e,t,n,r,s,o,a,l){let c;const u=t.viewState;function h(_,w,C,E){return s.call(o,w,_?C:null,E)}const d=u.projection,f=kk(e.slice(),d),p=[[0,0]];if(d.canWrapX()&&r){const _=d.getExtent(),w=Ne(_);p.push([-w,0],[w,0])}const m=t.layerStatesArray,g=m.length,v=[],y=[];for(let _=0;_<p.length;_++)for(let w=g-1;w>=0;--w){const C=m[w],E=C.layer;if(E.hasRenderer()&&k0(C,u)&&a.call(l,E)){const x=E.getRenderer(),T=E.getSource();if(x&&T){const O=T.getWrapX()?f:e,D=h.bind(null,C.managed);y[0]=O[0]+p[_][0],y[1]=O[1]+p[_][1],c=x.forEachFeatureAtCoordinate(y,t,n,D,v)}if(c)return c}}if(v.length===0)return;const b=1/v.length;return v.forEach((_,w)=>_.distanceSq+=w*b),v.sort((_,w)=>_.distanceSq-w.distanceSq),v.some(_=>c=_.callback(_.feature,_.layer,_.geometry)),c}hasFeatureAtCoordinate(e,t,n,r,s,o){return this.forEachFeatureAtCoordinate(e,t,n,r,Ms,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){Ie()}scheduleExpireIconCache(e){Ri.canExpireCache()&&e.postRenderFunctions.push(fV)}}function fV(i,e){Ri.expire()}class pV extends dV{constructor(e){super(e),this.fontChangeListenerKey_=Re(Io,la.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=cd+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const r=new pN(e,void 0,t);n.dispatchEvent(r)}}disposeInternal(){Be(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ti.PRECOMPOSE,e);const t=e.layerStatesArray.sort((a,l)=>a.zIndex-l.zIndex);t.some(a=>a.layer instanceof CN&&a.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const s=[];let o=null;for(let a=0,l=t.length;a<l;++a){const c=t[a];e.layerIndex=a;const u=c.layer,h=u.getSourceState();if(!k0(c,r)||h!="ready"&&h!="undefined"){u.unrender();continue}const d=u.render(e,o);d&&(d!==o&&(this.children_.push(d),o=d),s.push(c))}this.declutter(e,s),xB(this.element_,this.children_),this.dispatchRenderEvent(Ti.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let n=t.length-1;n>=0;--n){const r=t[n],s=r.layer;s.getDeclutter()&&s.renderDeclutter(e,r)}t.forEach(n=>n.layer.renderDeferred(e))}}}function AN(i){if(i instanceof md){i.setMapInternal(null);return}i instanceof La&&i.getLayers().forEach(AN)}function MN(i,e){if(i instanceof md){i.setMapInternal(e);return}if(i instanceof La){const t=i.getLayers().getArray();for(let n=0,r=t.length;n<r;++n)MN(t[n],e)}}let mV=class extends rn{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=gV(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:_B,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Hi(),this.pixelToCoordinateTransform_=Hi(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||YU(),this.interactions=t.interactions||hV({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new jU(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Ft.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Ft.VIEW,this.handleViewChanged_),this.addChangeListener(Ft.SIZE,this.handleSizeChanged_),this.addChangeListener(Ft.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof dn)&&e.view.then(function(r){n.setView(new dn(r))}),this.controls.addEventListener(Tt.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(Tt.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Tt.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Tt.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Tt.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Tt.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){MN(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:Ms,a=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,t,null,o,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(r){n.push(r)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(r){r instanceof La?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:Ms,s=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,s,o,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=n.width/r[0],o=n.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-n.left)/s,(a.clientY-n.top)/o]}getTarget(){return this.get(Ft.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return U_(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Ct(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Ft.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Yi){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Fn(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Ct(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ft.SIZE)}getView(){return this.get(Ft.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,r){return zU(this.frameState_,e,t,n,r)}handleBrowserEvent(e,t){t=t||e.type;const n=new Rr(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===ib.POINTERDOWN||n===le.WHEEL||n===le.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target,a=s instanceof ShadowRoot?s.host===o?s.host.ownerDocument:s:s===r?r.documentElement:s;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[$t.ANIMATING]||o[$t.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Ti.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ti.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Do($n.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Do($n.LOADSTART,this,e))));const n=this.postRenderFunctions_;if(e)for(let r=0,s=n.length;r<s;++r)n[r](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,r=this.targetChangeHandlerKeys_.length;n<r;++n)Be(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(le.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(le.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new pV(this)),this.mapBrowserEventHandler_=new FU(this,this.moveTolerance_);for(const s in et)this.mapBrowserEventHandler_.addEventListener(et[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(le.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(le.WHEEL,this.boundHandleBrowserEvent_,Zk?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const s=t.getRootNode();n=s instanceof ShadowRoot?s.host:t}this.targetChangeHandlerKeys_=[Re(n,le.KEYDOWN,this.handleBrowserEvent,this),Re(n,le.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Be(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Be(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Re(e,la.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Re(e,le.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Be),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Ir("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Re(e,la.PROPERTYCHANGE,this.render,this),Re(e,le.CHANGE,this.render,this),Re(e,"addlayer",this.handleLayerAdd_,this),Re(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,n=e.length;t<n;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){AN(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),r=this.frameState_;let s=null;if(t!==void 0&&kS(t)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:q_(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:_e(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=q_(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!id(this.previousExtent_)&&!Yl(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Do($n.MOVESTART,this,r)),this.previousExtent_=Qh(this.previousExtent_)),this.previousExtent_&&!s.viewHints[$t.ANIMATING]&&!s.viewHints[$t.INTERACTING]&&!Yl(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Do($n.MOVEEND,this,s)),Ek(s.extent,this.previousExtent_))),this.dispatchEvent(new Do($n.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener($n.LOADSTART)||this.hasListener($n.LOADEND)||this.hasListener(Ti.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Ir("removelayer",t)),this.set(Ft.LAYERGROUP,e)}setSize(e){this.set(Ft.SIZE,e)}setTarget(e){this.set(Ft.TARGET,e)}setView(e){if(!e||e instanceof dn){this.set(Ft.VIEW,e);return}this.set(Ft.VIEW,new dn);const t=this;e.then(function(n){t.setView(new dn(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(t=[Math.max(0,s),Math.max(0,o)],!kS(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Dk("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!Ur(t,n))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function gV(i){let e=null;i.keyboardEventTarget!==void 0&&(e=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const t={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new La({layers:i.layers});t[Ft.LAYERGROUP]=n,t[Ft.TARGET]=i.target,t[Ft.VIEW]=i.view instanceof dn?i.view:new dn;let r;i.controls!==void 0&&(Array.isArray(i.controls)?r=new Yi(i.controls.slice()):(Ae(typeof i.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=i.controls));let s;i.interactions!==void 0&&(Array.isArray(i.interactions)?s=new Yi(i.interactions.slice()):(Ae(typeof i.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=i.interactions));let o;return i.overlays!==void 0?Array.isArray(i.overlays)?o=new Yi(i.overlays.slice()):(Ae(typeof i.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=i.overlays):o=new Yi,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}const Lt={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class vV extends rn{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+FB,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Lt.ELEMENT,this.handleElementChanged),this.addChangeListener(Lt.MAP,this.handleMapChanged),this.addChangeListener(Lt.OFFSET,this.handleOffsetChanged),this.addChangeListener(Lt.POSITION,this.handlePositionChanged),this.addChangeListener(Lt.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Lt.ELEMENT)}getId(){return this.id}getMap(){return this.get(Lt.MAP)||null}getOffset(){return this.get(Lt.OFFSET)}getPosition(){return this.get(Lt.POSITION)}getPositioning(){return this.get(Lt.POSITIONING)}handleElementChanged(){Qk(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),Be(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Re(e,$n.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Lt.ELEMENT,e)}setMap(e){this.set(Lt.MAP,e)}setOffset(e){this.set(Lt.OFFSET,e)}setPosition(e){this.set(Lt.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Lt.POSITION))return;const n=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),s=this.getRect(r,[bB(r),wB(r)]);e=e||{};const o=e.margin===void 0?20:e.margin;if(!ko(n,s)){const a=s[0]-n[0],l=n[2]-s[2],c=s[1]-n[1],u=n[3]-s[3],h=[0,0];if(a<0?h[0]=a-o:l<0&&(h[0]=Math.abs(l)+o),c<0?h[1]=c-o:u<0&&(h[1]=Math.abs(u)+o),h[0]!==0||h[1]!==0){const d=t.getView().getCenterInternal(),f=t.getPixelFromCoordinateInternal(d);if(!f)return;const p=[f[0]+h[0],f[1]+h[1]],m=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(p),duration:m.duration,easing:m.easing})}}}getRect(e,t){const n=e.getBoundingClientRect(),r=n.left+window.pageXOffset,s=n.top+window.pageYOffset;return[r,s,r+t[0],s+t[1]]}setPositioning(e){this.set(Lt.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const n=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(n,r)}updateRenderedPosition(e,t){const n=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=`${e[0]+r[0]}px`,a=`${e[1]+r[1]}px`;let l="0%",c="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?c="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(c="-50%");const u=`translate(${l}, ${c}) translate(${o}, ${a})`;this.rendered.transform_!=u&&(this.rendered.transform_=u,n.transform=u)}getOptions(){return this.options}}class z0{constructor(e,t,n,r){this.minX=e,this.maxX=t,this.minY=n,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function yo(i,e,t,n,r){return r!==void 0?(r.minX=i,r.maxX=e,r.minY=t,r.maxY=n,r):new z0(i,e,t,n)}const yV={SELECT:"select"};class _V extends Tn{constructor(e,t,n,r){super(e),this.selected=t,this.deselected=n,this.mapBrowserEvent=r}}const Cu={};class G0 extends Na{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:KU,this.addCondition_=e.addCondition?e.addCondition:eE,this.removeCondition_=e.removeCondition?e.removeCondition:eE,this.toggleCondition_=e.toggleCondition?e.toggleCondition:$0,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Ms,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:bV(),this.features_=e.features||new Yi;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const n=e.layers;t=function(r){return n.includes(r)}}else t=Ms;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[_e(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[_e(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(Tt.ADD,this.boundAddFeature_),this.features_.addEventListener(Tt.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(Tt.ADD,this.boundAddFeature_),this.features_.removeEventListener(Tt.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const n=this.getMap().getAllLayers().find(function(r){if(r instanceof tb&&r.getSource()&&r.getSource().hasFeature(t))return r});n&&this.addFeatureLayerAssociation_(t,n)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=_e(e);t in Cu||(Cu[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let r=t.length-1;r>=0;--r){const s=t[r];if(s!==this&&s instanceof G0&&s.getStyle()&&s.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(s.getStyle());return}}const n=_e(e);e.setStyle(Cu[n]),delete Cu[n]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[_e(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),n=this.removeCondition_(e),r=this.toggleCondition_(e),s=!t&&!n&&!r,o=e.map,a=this.getFeatures(),l=[],c=[];if(s){Ma(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,(u,h)=>{if(!(!(u instanceof sr)||!this.filter_(u,h)))return this.addFeatureLayerAssociation_(u,h),c.push(u),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=a.getLength()-1;u>=0;--u){const h=a.item(u),d=c.indexOf(h);d>-1?c.splice(d,1):(a.remove(h),l.push(h))}c.length!==0&&a.extend(c)}else{o.forEachFeatureAtPixel(e.pixel,(u,h)=>{if(!(!(u instanceof sr)||!this.filter_(u,h)))return(t||r)&&!a.getArray().includes(u)?(this.addFeatureLayerAssociation_(u,h),c.push(u)):(n||r)&&a.getArray().includes(u)&&(l.push(u),this.removeFeatureLayerAssociation_(u)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=l.length-1;u>=0;--u)a.remove(l[u]);a.extend(c)}return(c.length>0||l.length>0)&&this.dispatchEvent(new _V(yV.SELECT,c,l,e)),!0}}function bV(){const i=gH();return ca(i.Polygon,i.LineString),ca(i.GeometryCollection,i.LineString),function(e){return e.getGeometry()?i[e.getGeometry().getType()]:null}}function rb(i){return i instanceof Image||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageBitmap?i:null}const wV=new Error("disposed"),xV=[256,256];class tE extends N0{constructor(e){const t=ie.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=rb(this.data_);return e?[e.width,e.height]:xV}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==ie.IDLE&&this.state!==ie.ERROR)return;this.state=ie.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=ie.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=ie.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(wV),this.controller_=null),super.disposeInternal()}}let Lf;const ea=[];function iE(i,e,t,n,r){i.beginPath(),i.moveTo(0,0),i.lineTo(e,t),i.lineTo(n,r),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,n)+1,Math.max(t,r)),i.restore()}function Ff(i,e){return Math.abs(i[e*4]-210)>2||Math.abs(i[e*4+3]-.75*255)>2}function SV(){if(Lf===void 0){const i=bt(6,6,ea);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",iE(i,4,5,4,0),iE(i,4,5,0,5);const e=i.getImageData(0,0,3,3).data;Lf=Ff(e,0)||Ff(e,4)||Ff(e,8),ld(i),ea.push(i.canvas)}return Lf}function nE(i,e,t,n){const r=p0(t,e,i);let s=dS(e,n,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=i.getMetersPerUnit();a!==void 0&&(s/=a);const l=i.getExtent();if(!l||ha(l,r)){const c=dS(i,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function EV(i,e,t,n){const r=Hr(t);let s=nE(i,e,r,n);return(!isFinite(s)||s<=0)&&Rk(t,function(o){return s=nE(i,e,o,n),isFinite(s)&&s>0}),s}function CV(i,e,t,n,r,s,o,a,l,c,u,h,d,f){const p=bt(Math.round(t*i),Math.round(t*e),ea);if(h||(p.imageSmoothingEnabled=!1),l.length===0)return p.canvas;p.scale(t,t);function m(w){return Math.round(w*t)/t}p.globalCompositeOperation="lighter";const g=gi();l.forEach(function(w,C,E){cY(g,w.extent)});let v;const y=t/n,b=(h?1:1+Math.pow(2,-24))/y;v=bt(Math.round(Ne(g)*y),Math.round(Yt(g)*y),ea),h||(v.imageSmoothingEnabled=!1),l.forEach(function(w,C,E){if(w.image.width>0&&w.image.height>0){if(w.clipExtent){v.save();const A=(w.clipExtent[0]-g[0])*y,k=-(w.clipExtent[3]-g[3])*y,N=Ne(w.clipExtent)*y,z=Yt(w.clipExtent)*y;v.rect(h?A:Math.round(A),h?k:Math.round(k),h?N:Math.round(A+N)-Math.round(A),h?z:Math.round(k+z)-Math.round(k)),v.clip()}const x=(w.extent[0]-g[0])*y,T=-(w.extent[3]-g[3])*y,O=Ne(w.extent)*y,D=Yt(w.extent)*y;v.drawImage(w.image,c,c,w.image.width-2*c,w.image.height-2*c,h?x:Math.round(x),h?T:Math.round(T),h?O:Math.round(x+O)-Math.round(x),h?D:Math.round(T+D)-Math.round(T)),w.clipExtent&&v.restore()}});const _=Us(o);return a.getTriangles().forEach(function(w,C,E){const x=w.source,T=w.target;let O=x[0][0],D=x[0][1],A=x[1][0],k=x[1][1],N=x[2][0],z=x[2][1];const M=m((T[0][0]-_[0])/s),$=m(-(T[0][1]-_[1])/s),P=m((T[1][0]-_[0])/s),G=m(-(T[1][1]-_[1])/s),V=m((T[2][0]-_[0])/s),X=m(-(T[2][1]-_[1])/s),L=O,j=D;O=0,D=0,A-=L,k-=j,N-=L,z-=j;const W=[[A,k,0,0,P-M],[N,z,0,0,V-M],[0,0,A,k,G-$],[0,0,N,z,X-$]],H=mY(W);if(!H)return;if(p.save(),p.beginPath(),SV()||!h){p.moveTo(P,G);const q=4,J=M-P,ne=$-G;for(let oe=0;oe<q;oe++)p.lineTo(P+m((oe+1)*J/q),G+m(oe*ne/(q-1))),oe!=q-1&&p.lineTo(P+m((oe+1)*J/q),G+m((oe+1)*ne/(q-1)));p.lineTo(V,X)}else p.moveTo(P,G),p.lineTo(M,$),p.lineTo(V,X);p.clip(),p.transform(H[0],H[2],H[1],H[3],M,$),p.translate(g[0]-L,g[3]-j);let U;if(v)U=v.canvas,p.scale(b,-b);else{const q=l[0],J=q.extent;U=q.image,p.scale(Ne(J)/U.width,-Yt(J)/U.height)}p.drawImage(U,0,0),p.restore()}),v&&(ld(v),ea.push(v.canvas)),u&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,a.getTriangles().forEach(function(w,C,E){const x=w.target,T=(x[0][0]-_[0])/s,O=-(x[0][1]-_[1])/s,D=(x[1][0]-_[0])/s,A=-(x[1][1]-_[1])/s,k=(x[2][0]-_[0])/s,N=-(x[2][1]-_[1])/s;p.beginPath(),p.moveTo(D,A),p.lineTo(T,O),p.lineTo(k,N),p.closePath(),p.stroke()}),p.restore()),p.canvas}const TV=10,rE=.25;class RV{constructor(e,t,n,r,s,o,a){this.sourceProj_=e,this.targetProj_=t;let l={};const c=a?YY(b=>Ct(a,p0(b,this.targetProj_,this.sourceProj_))):oh(this.targetProj_,this.sourceProj_);this.transformInv_=function(b){const _=b[0]+"/"+b[1];return l[_]||(l[_]=c(b)),l[_]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Ne(r)>=Ne(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ne(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ne(this.targetProj_.getExtent()):null;const u=Us(n),h=td(n),d=ed(n),f=Jh(n),p=this.transformInv_(u),m=this.transformInv_(h),g=this.transformInv_(d),v=this.transformInv_(f),y=TV+(o?Math.max(0,Math.ceil(Math.log2(G_(n)/(o*o*256*256)))):0);if(this.addQuad_(u,h,d,f,p,m,g,v,y),this.wrapsXInSource_){let b=1/0;this.triangles_.forEach(function(_,w,C){b=Math.min(b,_.source[0][0],_.source[1][0],_.source[2][0])}),this.triangles_.forEach(_=>{if(Math.max(_.source[0][0],_.source[1][0],_.source[2][0])-b>this.sourceWorldWidth_/2){const w=[[_.source[0][0],_.source[0][1]],[_.source[1][0],_.source[1][1]],[_.source[2][0],_.source[2][1]]];w[0][0]-b>this.sourceWorldWidth_/2&&(w[0][0]-=this.sourceWorldWidth_),w[1][0]-b>this.sourceWorldWidth_/2&&(w[1][0]-=this.sourceWorldWidth_),w[2][0]-b>this.sourceWorldWidth_/2&&(w[2][0]-=this.sourceWorldWidth_);const C=Math.min(w[0][0],w[1][0],w[2][0]);Math.max(w[0][0],w[1][0],w[2][0])-C<this.sourceWorldWidth_/2&&(_.source=w)}})}l={}}addTriangle_(e,t,n,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,n]})}addQuad_(e,t,n,r,s,o,a,l,c){const u=iS([s,o,a,l]),h=this.sourceWorldWidth_?Ne(u)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&h>.5&&h<1;let p=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const g=iS([e,t,n,r]);p=Ne(g)/this.targetWorldWidth_>rE||p}!f&&this.sourceProj_.isGlobal()&&h&&(p=h>rE||p)}if(!p&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!Qt(u,this.maxSourceExtent_))return;let m=0;if(!p&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)p=!0;else if(m=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(c>0){if(!p){const g=[(e[0]+n[0])/2,(e[1]+n[1])/2],v=this.transformInv_(g);let y;f?y=(Ko(s[0],d)+Ko(a[0],d))/2-Ko(v[0],d):y=(s[0]+a[0])/2-v[0];const b=(s[1]+a[1])/2-v[1];p=y*y+b*b>this.errorThresholdSquared_}if(p){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const g=[(t[0]+n[0])/2,(t[1]+n[1])/2],v=this.transformInv_(g),y=[(r[0]+e[0])/2,(r[1]+e[1])/2],b=this.transformInv_(y);this.addQuad_(e,t,g,y,s,o,v,b,c-1),this.addQuad_(y,g,n,r,b,v,a,l,c-1)}else{const g=[(e[0]+t[0])/2,(e[1]+t[1])/2],v=this.transformInv_(g),y=[(n[0]+r[0])/2,(n[1]+r[1])/2],b=this.transformInv_(y);this.addQuad_(e,g,y,r,s,v,b,l,c-1),this.addQuad_(g,t,n,y,v,o,a,b,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(m&11)==0&&this.addTriangle_(e,n,r,s,a,l),(m&14)==0&&this.addTriangle_(e,n,t,s,a,o),m&&((m&13)==0&&this.addTriangle_(t,r,e,o,l,s),(m&7)==0&&this.addTriangle_(t,r,n,o,l,a))}calculateSourceExtent(){const e=gi();return this.triangles_.forEach(function(t,n,r){const s=t.source;Ol(e,s[0]),Ol(e,s[1]),Ol(e,s[2])}),e}getTriangles(){return this.triangles_}}const IV=.5;class kN extends N0{constructor(e,t,n,r,s,o,a,l,c,u,h,d){super(s,ie.IDLE,d),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const f=r.getTileCoordExtent(this.wrappedTileCoord_),p=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const g=p?xs(f,p):f;if(G_(g)===0){this.state=ie.EMPTY;return}const v=e.getExtent();v&&(m?m=xs(m,v):m=v);const y=r.getResolution(this.wrappedTileCoord_[0]),b=EV(e,n,g,y);if(!isFinite(b)||b<=0){this.state=ie.EMPTY;return}const _=u!==void 0?u:IV;if(this.triangulation_=new RV(e,n,g,m,b*_,y),this.triangulation_.getTriangles().length===0){this.state=ie.EMPTY;return}this.sourceZ_=t.getZForResolution(b);let w=this.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(w[1]=it(w[1],m[1],m[3]),w[3]=it(w[3],m[1],m[3])):w=xs(w,m)),!G_(w))this.state=ie.EMPTY;else{let C=0,E=0;e.canWrapX()&&(C=Ne(v),E=Math.floor((w[0]-v[0])/C)),Pk(w.slice(),e,!0).forEach(T=>{const O=t.getTileRangeForExtentAndZ(T,this.sourceZ_);for(let D=O.minX;D<=O.maxX;D++)for(let A=O.minY;A<=O.maxY;A++){const k=c(this.sourceZ_,D,A,a);if(k){const N=E*C;this.sourceTiles_.push({tile:k,offset:N})}}++E}),this.sourceTiles_.length===0&&(this.state=ie.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const n=t.tile;if(n&&n.getState()==ie.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);r[0]+=t.offset,r[2]+=t.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=t.offset,s[2]+=t.offset),e.push({extent:r,clipExtent:s,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=ie.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),r=typeof n=="number"?n:n[0],s=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=CV(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=ie.LOADED}this.changed()}load(){if(this.state==ie.IDLE){this.state=ie.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n==ie.IDLE||n==ie.LOADING){e++;const r=Re(t,le.CHANGE,s=>{const o=t.getState();(o==ie.LOADED||o==ie.ERROR||o==ie.EMPTY)&&(Be(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},n,r){t.getState()==ie.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Be),this.sourcesListenerKeys_=null}release(){this.canvas_&&(ld(this.canvas_.getContext("2d")),ea.push(this.canvas_),this.canvas_=null),super.release()}}class OV{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Xh&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return Ae(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return Ae(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Ae(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}function mh(i,e,t,n){return n!==void 0?(n[0]=i,n[1]=e,n[2]=t,n):[i,e,t]}function PV(i,e,t){return i+"/"+e+"/"+t}function DV(i){return AV(i[0],i[1],i[2])}function AV(i,e,t){return(e<<i)+t}function MV(i,e){const t=i[0],n=i[1],r=i[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(n,r):!0}function $f(i,e,t,n,r){return`${_e(i)},${e},${PV(t,n,r)}`}function jf(i,e,t){if(!(t in i))return i[t]=new Set([e]),!0;const n=i[t],r=n.has(e);return r||n.add(e),!r}function kV(i,e,t){const n=i[t];return n?n.delete(e):!1}function sE(i,e){const t=i.layerStatesArray[i.layerIndex];t.extent&&(e=xs(e,Ar(t.extent,i.viewState.projection)));const n=t.layer.getRenderSource();if(!n.getWrapX()){const r=n.getTileGridForProjection(i.viewState.projection).getExtent();r&&(e=xs(e,r))}return e}class NV extends mN{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=gi(),this.tempTileRange_=new z0(0,0,0,0),this.tempTileCoord_=mh(0,0,0);const n=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new OV(n),this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,n,r){const s=this.tileCache_,a=this.getLayer().getSource(),l=$f(a,a.getKey(),e,t,n);let c;if(s.containsKey(l))c=s.get(l);else{if(c=a.getTile(e,t,n,r.pixelRatio,r.viewState.projection),!c)return null;s.set(l,c)}return c}getTile(e,t,n,r){const s=this.getOrCreateTile(e,t,n,r);return s||null}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),r=Ct(t.pixelToCoordinateTransform,e.slice()),s=n.getExtent();if(s&&!ha(s,r))return null;const o=t.viewState,a=n.getRenderSource(),l=a.getTileGridForProjection(o.projection),c=a.getTilePixelRatio(t.pixelRatio);for(let u=l.getZForResolution(o.resolution);u>=l.getMinZoom();--u){const h=l.getTileCoordForCoordAndZ(r,u),d=this.getTile(u,h[1],h[2],t);if(!d||d.getState()!==ie.LOADED)continue;const f=l.getOrigin(u),p=ei(l.getTileSize(u)),m=l.getResolution(u);let g;if(d instanceof TN||d instanceof kN)g=d.getImage();else if(d instanceof tE){if(g=rb(d.getData()),!g)continue}else continue;const v=Math.floor(c*((r[0]-f[0])/m-h[1]*p[0])),y=Math.floor(c*((f[1]-r[1])/m-h[2]*p[1])),b=Math.round(c*a.getGutterForProjection(o.projection));return this.getImageData(g,v+b,y+b)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const n=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==n&&(this.renderedSourceRevision_=n,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=n,!0}enqueueTiles(e,t,n,r,s){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(o.projection),u=_e(l);u in e.wantedTiles||(e.wantedTiles[u]={});const h=e.wantedTiles[u],d=a.getMapInternal(),f=Math.max(n-s,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),d?d.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),p=o.rotation,m=p?Ik(o.center,o.resolution,p,e.size):void 0;for(let g=n;g>=f;--g){const v=c.getTileRangeForExtentAndZ(t,g,this.tempTileRange_),y=c.getResolution(g);for(let b=v.minX;b<=v.maxX;++b)for(let _=v.minY;_<=v.maxY;++_){if(p&&!c.tileCoordIntersectsViewport([g,b,_],m))continue;const w=this.getTile(g,b,_,e);if(!w||!jf(r,w,g))continue;const E=w.getKey();if(h[E]=!0,w.getState()===ie.IDLE&&!e.tileQueue.isKeyQueued(E)){const x=mh(g,b,_,this.tempTileCoord_);e.tileQueue.enqueue([w,u,c.getTileCoordCenter(x),y])}}}}findStaleTile_(e,t){const n=this.tileCache_,r=e[0],s=e[1],o=e[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const c=$f(this.getLayer().getSource(),a[l],r,s,o);if(n.containsKey(c)){const u=n.peek(c);if(u.getState()===ie.LOADED)return u.endTransition(_e(this)),jf(t,u,r),!0}}return!1}findAltTiles_(e,t,n,r){const s=e.getTileRangeForTileCoordAndZ(t,n,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileCache_,l=this.getLayer().getRenderSource(),c=l.getKey();for(let u=s.minX;u<=s.maxX;++u)for(let h=s.minY;h<=s.maxY;++h){const d=$f(l,c,n,u,h);let f=!1;if(a.containsKey(d)){const p=a.peek(d);p.getState()===ie.LOADED&&(jf(r,p,n),f=!0)}f||(o=!1)}return o}renderFrame(e,t){this.renderComplete=!0;const n=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,l=e.pixelRatio,c=this.getLayer(),u=c.getSource(),h=u.getTileGridForProjection(s),d=h.getZForResolution(o,u.zDirection),f=h.getResolution(d),p=u.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==p&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=p):this.renderedSourceKey_=p;let m=e.extent;const g=u.getTilePixelRatio(l);this.prepareContainer(e,t);const v=this.context.canvas.width,y=this.context.canvas.height,b=n.extent&&Ar(n.extent);b&&(m=xs(m,Ar(n.extent)));const _=f*v/2/g,w=f*y/2/g,C=[a[0]-_,a[1]-w,a[0]+_,a[1]+w],E={};this.renderedTiles.length=0;const x=c.getPreload();if(e.nextExtent){const P=h.getZForResolution(r.nextResolution,u.zDirection),G=sE(e,e.nextExtent);this.enqueueTiles(e,G,P,E,x)}const T=sE(e,m);if(this.enqueueTiles(e,T,d,E,0),x>0&&setTimeout(()=>{this.enqueueTiles(e,T,d-1,E,x-1)},0),!(d in E))return this.container;const O=_e(this),D=e.time;for(const P of E[d]){const G=P.getState();if(G===ie.EMPTY)continue;const V=P.tileCoord;if(G===ie.LOADED&&P.getAlpha(O,D)===1){P.endTransition(O);continue}if(G!==ie.ERROR&&(this.renderComplete=!1),this.findStaleTile_(V,E)){kV(E,P,d),e.animate=!0;continue}if(this.findAltTiles_(h,V,d+1,E))continue;const j=h.getMinZoom();for(let W=d-1;W>=j&&!this.findAltTiles_(h,V,W,E);--W);}const A=f/o*l/g,k=this.getRenderContext(e);or(this.tempTransform,v/2,y/2,A,A,0,-v/2,-y/2),n.extent&&this.clipUnrotated(k,e,b),u.getInterpolate()||(k.imageSmoothingEnabled=!1),this.preRender(k,e);const N=Object.keys(E).map(Number);N.sort(Hn);let z;const M=[],$=[];for(let P=N.length-1;P>=0;--P){const G=N[P],V=u.getTilePixelSize(G,l,s),L=h.getResolution(G)/f,j=V[0]*L*A,W=V[1]*L*A,H=h.getTileCoordForCoordAndZ(Us(C),G),U=h.getTileCoordExtent(H),q=Ct(this.tempTransform,[g*(U[0]-C[0])/f,g*(C[3]-U[3])/f]),J=g*u.getGutterForProjection(s);for(const ne of E[G]){if(ne.getState()!==ie.LOADED)continue;const oe=ne.tileCoord,Ye=H[1]-oe[1],Ve=Math.round(q[0]-(Ye-1)*j),he=H[2]-oe[2],rt=Math.round(q[1]-(he-1)*W),ht=Math.round(q[0]-Ye*j),xt=Math.round(q[1]-he*W),dt=Ve-ht,Ge=rt-xt,an=N.length===1;let li=!1;z=[ht,xt,ht+dt,xt,ht+dt,xt+Ge,ht,xt+Ge];for(let zt=0,ci=M.length;zt<ci;++zt)if(!an&&G<$[zt]){const Xe=M[zt];Qt([ht,xt,ht+dt,xt+Ge],[Xe[0],Xe[3],Xe[4],Xe[7]])&&(li||(k.save(),li=!0),k.beginPath(),k.moveTo(z[0],z[1]),k.lineTo(z[2],z[3]),k.lineTo(z[4],z[5]),k.lineTo(z[6],z[7]),k.moveTo(Xe[6],Xe[7]),k.lineTo(Xe[4],Xe[5]),k.lineTo(Xe[2],Xe[3]),k.lineTo(Xe[0],Xe[1]),k.clip())}M.push(z),$.push(G),this.drawTile(ne,e,ht,xt,dt,Ge,J,an),li&&k.restore(),this.renderedTiles.unshift(ne),this.updateUsedTiles(e.usedTiles,u,ne)}}if(this.renderedResolution=f,this.extentChanged=!this.renderedExtent_||!Yl(this.renderedExtent_,C),this.renderedExtent_=C,this.renderedPixelRatio=l,this.postRender(this.context,e),n.extent&&k.restore(),k.imageSmoothingEnabled=!0,this.renderComplete){const P=(G,V)=>{const X=_e(u),L=V.wantedTiles[X],j=L?Object.keys(L).length:0;this.updateCacheSize(j),this.tileCache_.expireCache()};e.postRenderFunctions.push(P)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,n,r,s,o,a,l){let c;if(e instanceof tE){if(c=rb(e.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(e);if(!c)return;const u=this.getRenderContext(t),h=_e(this),d=t.layerStatesArray[t.layerIndex],f=d.opacity*(l?e.getAlpha(h,t.time):1),p=f!==u.globalAlpha;p&&(u.save(),u.globalAlpha=f),u.drawImage(c,a,a,c.width-2*a,c.height-2*a,n,r,s,o),p&&u.restore(),f!==d.opacity?t.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,n){const r=_e(t);r in e||(e[r]={}),e[r][n.getKey()]=!0}}const Tu={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class LV extends md{constructor(e){e=e||{};const t=Object.assign({},e),n=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Tu.PRELOAD)}setPreload(e){this.set(Tu.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Tu.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Tu.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class FV extends LV{constructor(e){super(e)}createRenderer(){return new NV(this,{cacheSize:this.getCacheSize()})}}const _o=[0,0,0],Er=5;class NN{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Ae(rY(this.resolutions_,(r,s)=>s-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Ae(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Us(n)),Ae(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Ae(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:M0,Ae(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,s)=>{const o=new z0(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)n([t,s,a])}forEachTileCoordParentTileRange(e,t,n,r){let s,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);c>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=yo(o,o,a,a,n)):s=this.getTileRangeForExtentAndZ(l,c,n),t(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return yo(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return yo(s,o,s,o,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-r),c=Math.floor(s*l),u=Math.floor(o*l);if(t<r)return yo(c,c,u,u,n);const h=Math.floor(l*(s+1))-1,d=Math.floor(l*(o+1))-1;return yo(c,h,u,d,n)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,_o);const r=_o[1],s=_o[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,_o);const o=_o[1],a=_o[2];return yo(r,o,s,a,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),r=ei(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*n,t[1]-(e[2]+.5)*r[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=ei(this.getTileSize(e[0]),this.tmpSize_),o=n[0]+e[1]*s[0]*r,a=n[1]-(e[2]+1)*s[1]*r,l=o+s[0]*r,c=a+s[1]*r;return Br(o,a,l,c,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,r,s){const o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),c=ei(this.getTileSize(o),this.tmpSize_);let u=a*(e-l[0])/n/c[0],h=a*(l[1]-t)/n/c[1];return r?(u=gu(u,Er)-1,h=gu(h,Er)-1):(u=mu(u,Er),h=mu(h,Er)),mh(o,u,h,s)}getTileCoordForXYAndZ_(e,t,n,r,s){const o=this.getOrigin(n),a=this.getResolution(n),l=ei(this.getTileSize(n),this.tmpSize_);let c=(e-o[0])/a/l[0],u=(o[1]-t)/a/l[1];return r?(c=gu(c,Er)-1,u=gu(u,Er)-1):(c=mu(c,Er),u=mu(u,Er)),mh(n,c,u,s)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=i0(this.resolutions_,e,t||0);return it(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Vk(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let r=this.minZoom;r<t;++r)n[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=n}}function LN(i){let e=i.getDefaultTileGrid();return e||(e=GV(i),i.setDefaultTileGrid(e)),e}function $V(i,e,t){const n=e[0],r=i.getTileCoordCenter(e),s=q0(t);if(!ha(s,r)){const o=Ne(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,i.getTileCoordForCoordAndZ(r,n)}return e}function jV(i,e,t,n){n=n!==void 0?n:"top-left";const r=FN(i,e,t);return new NN({extent:i,origin:hY(i,n),resolutions:r,tileSize:t})}function zV(i){const e=i||{},t=e.extent||ni("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:FN(t,e.maxZoom,e.tileSize,e.maxResolution)};return new NN(n)}function FN(i,e,t,n){e=e!==void 0?e:OU,t=ei(t!==void 0?t:M0);const r=Yt(i),s=Ne(i);n=n>0?n:Math.max(s/t[0],r/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=n/Math.pow(2,l);return a}function GV(i,e,t,n){const r=q0(i);return jV(r,e,t,n)}function q0(i){i=ni(i);let e=i.getExtent();if(!e){const t=180*a0.degrees/i.getMetersPerUnit();e=Br(-t,-t,t,t)}return e}const qV=/\{z\}/g,WV=/\{x\}/g,YV=/\{y\}/g,BV=/\{-y\}/g;function HV(i,e,t,n,r){return i.replace(qV,e.toString()).replace(WV,t.toString()).replace(YV,n.toString()).replace(BV,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-n).toString()})}function UV(i){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(i);if(t){const n=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=n;s<=r;++s)e.push(i.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(i),t){const n=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=n;r++)e.push(i.replace(t[0],r.toString()));return e}return e.push(i),e}function VV(i,e){return(function(t,n,r){if(!t)return;let s;const o=t[0];if(e){const a=e.getFullTileRange(o);a&&(s=a.getHeight()-1)}return HV(i,o,t[1],t[2],s)})}function XV(i,e){const t=i.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=VV(i[r],e);return KV(n)}function KV(i){return i.length===1?i[0]:(function(e,t,n){if(!e)return;const r=DV(e),s=Ko(r,i.length);return i[s](e,t,n)})}class ZV extends uN{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&ei(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||_e(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,r,s){return Ie()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:LN(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const r=this.getTileGridForProjection(n),s=this.getTilePixelRatio(t),o=ei(r.getTileSize(e),this.tmpSize);return s==1?o:pH(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const n=t!==void 0?t:this.getProjection(),r=t!==void 0?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=$V(r,e,n)),MV(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class QV extends Tn{constructor(e,t){super(e),this.tile=t}}const zf={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class W0 extends ZV{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===W0.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=_e(t),r=t.getState();let s;r==ie.LOADING?(this.tileLoadingKeys_[n]=!0,s=zf.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],s=r==ie.ERROR?zf.TILELOADERROR:r==ie.LOADED?zf.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new QV(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=UV(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(XV(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}}class JV extends W0{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:e5,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:TN,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!gf(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||gf(t,e)))return this.tileGrid;const n=_e(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=LN(e)),this.tileGridForProjection[n]}createTile_(e,t,n,r,s,o){const a=[e,t,n],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,u=new this.tileClass(a,c!==void 0?ie.IDLE:ie.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(le.CHANGE,this.handleTileChange.bind(this)),u}getTile(e,t,n,r,s){const o=this.getProjection();if(!o||!s||gf(o,s))return this.getTileInternal(e,t,n,r,o||s);const a=[e,t,n],l=this.getKey(),c=this.getTileGridForProjection(o),u=this.getTileGridForProjection(s),h=this.getTileCoordForTileUrlFunction(a,s),d=new kN(o,c,s,u,a,h,this.getTilePixelRatio(r),this.getGutter(),(f,p,m,g)=>this.getTileInternal(f,p,m,g,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return d.key=l,d}getTileInternal(e,t,n,r,s){const o=this.getKey();return this.createTile_(e,t,n,r,s,o)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const n=ni(e);if(n){const r=_e(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}}function e5(i,e){i.getImage().src=e}class t5 extends JV{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:zV({extent:q0(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}class i5 extends Q_{constructor(e){e=e||{},super({attributions:e.attributions,wrapX:e.wrapX}),this.resolution=void 0,this.distance=e.distance!==void 0?e.distance:20,this.minDistance=e.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=e.geometryFunction||function(t){const n=t.getGeometry();return Ae(!n||n.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),n},this.createCustomCluster_=e.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(e.source||null)}clear(e){this.features.length=0,super.clear(e)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(e,t,n){this.source?.loadFeatures(e,t,n),t!==this.resolution&&(this.resolution=t,this.refresh())}setDistance(e){this.updateDistance(e,this.minDistance)}setMinDistance(e){this.updateDistance(this.distance,e)}getMinDistance(){return this.minDistance}setSource(e){this.source&&this.source.removeEventListener(le.CHANGE,this.boundRefresh_),this.source=e,e&&e.addEventListener(le.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(e,t){const n=e===0?0:Math.min(t,e)/e,r=e!==this.distance||this.interpolationRatio!==n;this.distance=e,this.minDistance=t,this.interpolationRatio=n,r&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const e=gi(),t=this.distance*this.resolution,n=this.source.getFeatures(),r={};for(let s=0,o=n.length;s<o;s++){const a=n[s];if(!(_e(a)in r)){const l=this.geometryFunction(a);if(l){const c=l.getCoordinates();r0(c,e),Zh(e,t,e);const u=this.source.getFeaturesInExtent(e).filter(function(h){const d=_e(h);return d in r?!1:(r[d]=!0,!0)});this.features.push(this.createCluster(u,e))}}}}createCluster(e,t){const n=[0,0];for(let a=e.length-1;a>=0;--a){const l=this.geometryFunction(e[a]);l?Ak(n,l.getCoordinates()):e.splice(a,1)}Mk(n,1/e.length);const r=Hr(t),s=this.interpolationRatio,o=new Vr([n[0]*(1-s)+r[0]*s,n[1]*(1-s)+r[1]*s]);return this.createCustomCluster_?this.createCustomCluster_(o,e):new sr({geometry:o,features:e})}}const oE=i=>{let e;const t=new Set,n=(c,u)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const d=e;e=u??(typeof h!="object"||h===null)?h:Object.assign({},e,h),t.forEach(f=>f(e,d))}},r=()=>e,a={setState:n,getState:r,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=i(n,r,a);return a},n5=(i=>i?oE(i):oE),r5=i=>i;function s5(i,e=r5){const t=Gi.useSyncExternalStore(i.subscribe,Gi.useCallback(()=>e(i.getState()),[i,e]),Gi.useCallback(()=>e(i.getInitialState()),[i,e]));return Gi.useDebugValue(t),t}const Y0=new kt({image:new ar({radius:8,fill:new Pi({color:"hsl(97 22% 40%)"}),stroke:new bn({color:"silver",width:2})})}),o5=new kt({image:new ar({radius:10,fill:new Pi({color:"hsl(95 25% 45%)"}),stroke:new bn({color:"silver",width:2})})}),a5=i=>{const e=i.get("features").length;return e===1?i.get("features")[0].getStyle():[new kt({image:new ar({radius:10,fill:new Pi({color:"hsl(97 22% 40% / 0.7)"})})}),new kt({image:new ar({radius:14,fill:new Pi({color:"hsl(100 20% 35% / 0.7)"})}),text:new dd({text:e.toString(),fill:new Pi({color:"#fff"})})})]},l5=new kt({stroke:new bn({color:"hsl(100 20% 35%)",width:2})}),c5=(i,e,t)=>new kt({geometry:new Vr([i,e]),image:new Tc({src:'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12"><polygon points="0,0 12,7 0,12" stroke="silver" fill="hsl(100 20% 35%)"/></svg>',anchor:[.75,.5],rotateWithView:!0,rotation:t})});function u5(i,e){const t=[l5],r=i.getGeometry().getCoordinates();for(let s=1;s<r.length;s++){const[o,a]=r[s-1],[l,c]=r[s],u=l-o,h=c-a,d=Math.atan2(h,u);t.push(c5(l,c,-d))}return t}function h5(){return new FV({source:new t5({url:"https://basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attributions:'&copy; <a href="https://carto.com/">CARTO</a>'})})}const d5=()=>n5(i=>({selectedEntities:[],setSelectedEntities:e=>i({selectedEntities:e})}));function f5(){const i=new Q_,e=new i5({distance:10,minDistance:5,source:i}),t=new tb({source:e,style:a5}),n=new Q_,r=new tb({source:n}),s=d5(),o=new mV({target:void 0,layers:[h5(),t,r],view:new dn({center:Qo([35,31]),zoom:7.5}),controls:[]}),{select:a}=p5(o,s,i,{excludeLayers:[r]});return{map:o,select:a,entities:i,entitiesCluster:e,histories:n,store:s}}function p5(i,e,t,{excludeLayers:n}){const r=new G0({toggleCondition:ZU,style:o5,filter:(a,l)=>!n?.includes(l)});i.addInteraction(r);const s=r.getFeatures(),o=new DN({condition:$0});return o.on("boxend",()=>{const a=o.getGeometry().getExtent();t.forEachFeatureIntersectingExtent(a,l=>{l.getId()&&s.push(l)})}),i.addInteraction(o),s.on("change:length",a=>{const l=s.getArray(),c=l.flatMap(u=>u.get("features")??[]).concat(l.filter(u=>u.getId()));e.getState().setSelectedEntities(c.map(u=>u?.getId()))}),{select:r,dragBox:o}}function m5(i){const e=new sr({geometry:new Vr(Qo([34.8+Math.random()*.1,31.2+Math.random()*.1]))});i.addFeature(e),e.setStyle(Y0),e.setId(`entity-${Math.floor(Math.random()*1e4)}`)}function g5(i,e){const t=e.map(n=>{const r=new sr({geometry:new Vr(Qo([n.location[0],n.location[1]]))});return r.setId(`${n.type}-${n.id}`),r.setStyle(Y0),r});i.addFeatures(t)}function v5(i,e,t){const n=e.getFeatures();i.getFeatures().clear(),t.forEach(r=>{const s=n.find(o=>o.getId()===r);s&&i.getFeatures().push(s)})}function y5(i,e,t){const n=e.getFeatureById(t)?.getGeometry();n&&i?.getView().fit(n,{duration:1e3,maxZoom:14})}function _5(i,e){i.clear();const t=[];Object.entries(e).forEach(([n,r])=>{r.sort((a,l)=>a.time.localeCompare(l.time));const s=.5,o=(1-s)/(r.length-1);r.forEach((a,l)=>{const c=s+l*o,u=new sr({geometry:new Vr(Qo([a.coords[0],a.coords[1]]))});u.setId(`${n}-${a.time}`);const h=Y0.clone();h.getImage()?.setOpacity(c),u.setStyle(h),t.push(u)});for(let a=0;a<r.length-1;a++){const l=r[a],c=r[a+1],u=new sr({geometry:new lh([Qo([l.coords[0],l.coords[1]]),Qo([c.coords[0],c.coords[1]])])});u.setId(`${n}-${l.time}-${c.time}`),u.setStyle(u5),t.push(u)}}),i.addFeatures(t)}function b5(i){i.clear()}function w5({entities:i,entitiesCluster:e}){const[,t]=S.useState(0),n=()=>t(r=>r+1);return I.jsxs(pk,{side:"right",collapsible:"icon",dir:"rtl",children:[I.jsxs(yk,{children:[I.jsx(vk,{children:I.jsxs(Yu,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[I.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-sidebar-primary text-sidebar-primary-foreground",children:I.jsx(nj,{className:"size-4"})}),I.jsxs("div",{className:"grid flex-1 text-right text-sm leading-tight",children:[I.jsx("span",{className:"truncate font-medium",children:"???"}),I.jsx("span",{className:"truncate text-xs",children:"?????"})]})]})}),I.jsxs(_k,{children:[I.jsx(bk,{children:"דיבוג"}),I.jsx(wk,{children:I.jsxs(xk,{children:[I.jsx(j_,{children:I.jsxs(Yu,{onClick:()=>m5(i),children:[I.jsx(_x,{}),I.jsx("div",{children:"add entity"})]})}),I.jsx(j_,{className:"group-data-[collapsible=icon]:hidden",children:I.jsxs(Yu,{onClick:()=>{e.setDistance(50),n()},children:[I.jsx(_x,{}),I.jsxs("div",{children:["change cluster distance - ",e.getDistance()]})]})})]})})]})]}),I.jsx(mk,{})]})}function x5({map:i,select:e,onViewEntity:t}){const n=S.useRef(null),r=S.useRef(null),s=S.useRef(null),[o,a]=S.useState();return S.useEffect(()=>{if(n.current){i.setTarget(n.current);const l=new vV({element:r.current,offset:[0,-80],positioning:"top-center",autoPan:{animation:{duration:250}}});return s.current=l,i.addOverlay(l),e?.on("select",c=>{const u=c.target.getFeatures();if(c.selected.length===1&&u.getLength()===1){const h=c.selected[0].getGeometry()?.getCoordinates();l.setPosition(h),a(c.selected[0].get("features")[0].getId())}else l.setPosition(void 0),a(void 0),t(void 0)}),()=>{i.setTarget(void 0),i.removeOverlay(l)}}},[i,t,e]),I.jsxs(I.Fragment,{children:[I.jsx("div",{ref:n,className:"h-full w-full overflow-hidden"}),I.jsx("div",{ref:r,className:"tooltip-thing absolute text-primary",children:I.jsxs("div",{className:pe("absolute -translate-x-1/2 transition-all duration-300",o?"pointer-events-auto translate-y-0 opacity-100":"pointer-events-none translate-y-2 opacity-0"),children:[I.jsxs("div",{className:"flex gap-2 rounded-xl border border-border bg-card p-2 shadow-2xl backdrop-blur-sm",children:[I.jsx(Bo,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0",onClick:()=>o&&t(o),children:I.jsx(B$,{className:"h-4 w-4"})}),I.jsx(Bo,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0",children:I.jsx(j$,{className:"h-4 w-4"})}),I.jsx(Bo,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0",children:I.jsx(W$,{className:"h-4 w-4"})})]}),I.jsx("div",{className:"absolute left-1/2 top-full -mt-[5px] -translate-x-1/2",children:I.jsx("div",{className:"h-3 w-3 rotate-45 border-b border-r border-border bg-card"})})]})})]})}function S5(i){const e=i+"CollectionProvider",[t,n]=Oa(e),[r,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:g,children:v}=m,y=Gi.useRef(null),b=Gi.useRef(new Map).current;return I.jsx(r,{scope:g,itemMap:b,collectionRef:y,children:v})};o.displayName=e;const a=i+"CollectionSlot",l=jl(a),c=Gi.forwardRef((m,g)=>{const{scope:v,children:y}=m,b=s(a,v),_=ii(g,b.collectionRef);return I.jsx(l,{ref:_,children:y})});c.displayName=a;const u=i+"CollectionItemSlot",h="data-radix-collection-item",d=jl(u),f=Gi.forwardRef((m,g)=>{const{scope:v,children:y,...b}=m,_=Gi.useRef(null),w=ii(g,_),C=s(u,v);return Gi.useEffect(()=>(C.itemMap.set(_,{ref:_,...b}),()=>void C.itemMap.delete(_))),I.jsx(d,{[h]:"",ref:w,children:y})});f.displayName=u;function p(m){const g=s(i+"CollectionConsumer",m);return Gi.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((C,E)=>b.indexOf(C.ref.current)-b.indexOf(E.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},p,n]}var E5=S.createContext(void 0);function $N(i){const e=S.useContext(E5);return i||e||"ltr"}var Gf="rovingFocusGroup.onEntryFocus",C5={bubbles:!1,cancelable:!0},Oc="RovingFocusGroup",[sb,jN,T5]=S5(Oc),[R5,zN]=Oa(Oc,[T5]),[I5,O5]=R5(Oc),GN=S.forwardRef((i,e)=>I.jsx(sb.Provider,{scope:i.__scopeRovingFocusGroup,children:I.jsx(sb.Slot,{scope:i.__scopeRovingFocusGroup,children:I.jsx(P5,{...i,ref:e})})}));GN.displayName=Oc;var P5=S.forwardRef((i,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=i,d=S.useRef(null),f=ii(e,d),p=$N(s),[m,g]=$h({prop:o,defaultProp:a??null,onChange:l,caller:Oc}),[v,y]=S.useState(!1),b=Ps(c),_=jN(t),w=S.useRef(!1),[C,E]=S.useState(0);return S.useEffect(()=>{const x=d.current;if(x)return x.addEventListener(Gf,b),()=>x.removeEventListener(Gf,b)},[b]),I.jsx(I5,{scope:t,orientation:n,dir:p,loop:r,currentTabStopId:m,onItemFocus:S.useCallback(x=>g(x),[g]),onItemShiftTab:S.useCallback(()=>y(!0),[]),onFocusableItemAdd:S.useCallback(()=>E(x=>x+1),[]),onFocusableItemRemove:S.useCallback(()=>E(x=>x-1),[]),children:I.jsx(ut.div,{tabIndex:v||C===0?-1:0,"data-orientation":n,...h,ref:f,style:{outline:"none",...i.style},onMouseDown:tt(i.onMouseDown,()=>{w.current=!0}),onFocus:tt(i.onFocus,x=>{const T=!w.current;if(x.target===x.currentTarget&&T&&!v){const O=new CustomEvent(Gf,C5);if(x.currentTarget.dispatchEvent(O),!O.defaultPrevented){const D=_().filter(M=>M.focusable),A=D.find(M=>M.active),k=D.find(M=>M.id===m),z=[A,k,...D].filter(Boolean).map(M=>M.ref.current);YN(z,u)}}w.current=!1}),onBlur:tt(i.onBlur,()=>y(!1))})})}),qN="RovingFocusGroupItem",WN=S.forwardRef((i,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:r=!1,tabStopId:s,children:o,...a}=i,l=Ho(),c=s||l,u=O5(qN,t),h=u.currentTabStopId===c,d=jN(t),{onFocusableItemAdd:f,onFocusableItemRemove:p,currentTabStopId:m}=u;return S.useEffect(()=>{if(n)return f(),()=>p()},[n,f,p]),I.jsx(sb.ItemSlot,{scope:t,id:c,focusable:n,active:r,children:I.jsx(ut.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:tt(i.onMouseDown,g=>{n?u.onItemFocus(c):g.preventDefault()}),onFocus:tt(i.onFocus,()=>u.onItemFocus(c)),onKeyDown:tt(i.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const v=M5(g,u.orientation,u.dir);if(v!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let b=d().filter(_=>_.focusable).map(_=>_.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const _=b.indexOf(g.currentTarget);b=u.loop?k5(b,_+1):b.slice(_+1)}setTimeout(()=>YN(b))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:m!=null}):o})})});WN.displayName=qN;var D5={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function A5(i,e){return e!=="rtl"?i:i==="ArrowLeft"?"ArrowRight":i==="ArrowRight"?"ArrowLeft":i}function M5(i,e,t){const n=A5(i.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return D5[n]}function YN(i,e=!1){const t=document.activeElement;for(const n of i)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function k5(i,e){return i.map((t,n)=>i[(e+n)%i.length])}var N5=GN,L5=WN,gd="Tabs",[F5]=Oa(gd,[zN]),BN=zN(),[$5,B0]=F5(gd),HN=S.forwardRef((i,e)=>{const{__scopeTabs:t,value:n,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=i,u=$N(a),[h,d]=$h({prop:n,onChange:r,defaultProp:s??"",caller:gd});return I.jsx($5,{scope:t,baseId:Ho(),value:h,onValueChange:d,orientation:o,dir:u,activationMode:l,children:I.jsx(ut.div,{dir:u,"data-orientation":o,...c,ref:e})})});HN.displayName=gd;var UN="TabsList",VN=S.forwardRef((i,e)=>{const{__scopeTabs:t,loop:n=!0,...r}=i,s=B0(UN,t),o=BN(t);return I.jsx(N5,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:n,children:I.jsx(ut.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});VN.displayName=UN;var XN="TabsTrigger",KN=S.forwardRef((i,e)=>{const{__scopeTabs:t,value:n,disabled:r=!1,...s}=i,o=B0(XN,t),a=BN(t),l=QN(o.baseId,n),c=JN(o.baseId,n),u=n===o.value;return I.jsx(L5,{asChild:!0,...a,focusable:!r,active:u,children:I.jsx(ut.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:e,onMouseDown:tt(i.onMouseDown,h=>{!r&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:tt(i.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:tt(i.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!r&&h&&o.onValueChange(n)})})})});KN.displayName=XN;var ZN="TabsContent",gh=S.forwardRef((i,e)=>{const{__scopeTabs:t,value:n,forceMount:r,children:s,...o}=i,a=B0(ZN,t),l=QN(a.baseId,n),c=JN(a.baseId,n),u=n===a.value,h=S.useRef(u);return S.useEffect(()=>{const d=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(d)},[]),I.jsx(Pa,{present:r||u,children:({present:d})=>I.jsx(ut.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!d,id:c,tabIndex:0,...o,ref:e,style:{...i.style,animationDuration:h.current?"0s":void 0},children:d&&s})})});gh.displayName=ZN;function QN(i,e){return`${i}-trigger-${e}`}function JN(i,e){return`${i}-content-${e}`}var j5=HN,eL=VN,tL=KN,iL=gh;const z5=j5,nL=S.forwardRef(({className:i,...e},t)=>I.jsx(eL,{ref:t,className:pe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",i),...e}));nL.displayName=eL.displayName;const ob=S.forwardRef(({className:i,...e},t)=>I.jsx(tL,{ref:t,className:pe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",i),...e}));ob.displayName=tL.displayName;const G5=S.forwardRef(({className:i,...e},t)=>I.jsx(iL,{ref:t,className:pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",i),...e}));G5.displayName=iL.displayName;function q5({focusedEntityId:i,onFocus:e}){const t={value:123456,coordinates:[37.7749,-122.4194]};return I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"mb-6 flex items-start gap-4",children:[I.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-lg bg-primary/20",children:I.jsx(Z$,{className:"h-6 w-6 text-primary"})}),I.jsxs("div",{className:"flex-1",children:[I.jsx("p",{className:"text-muted-foreground",children:"מראה פרטים על:"}),i,I.jsx(Bo,{variant:"ghost",onClick:e,className:"ml-auto",children:I.jsx(G$,{})})]})]}),I.jsxs("div",{className:"mb-6 grid grid-cols-2 gap-4",children:[I.jsxs("div",{className:"rounded-lg bg-secondary/50 p-4",children:[I.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[I.jsx(X$,{className:"h-4 w-4 text-primary"}),I.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"מספר גדול"})]}),I.jsx("p",{className:"text-2xl font-bold text-foreground",children:t.value})]}),I.jsxs("div",{className:"rounded-lg bg-secondary/50 p-4",children:[I.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[I.jsx(tj,{className:"h-4 w-4 text-primary"}),I.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"מיקום"})]}),I.jsxs("p",{className:"text-right font-mono text-sm text-foreground",dir:"ltr",children:[t.coordinates[1].toFixed(4),", ",t.coordinates[0].toFixed(4)]})]})]}),I.jsxs("div",{className:"space-y-3",children:[I.jsx("h3",{className:"font-semibold text-foreground",children:"פירוט"}),I.jsx("div",{className:"rounded-lg bg-secondary/30 p-4",children:I.jsx("p",{className:"text-sm leading-relaxed text-muted-foreground",children:"העיר י׳ שוכנת במרומי הרי הי׳. ככה הייתי רוצָה לפתוח את הסיפור שלי; בריחוק מיושב, בנשימה עמוקה, בצילום פנורמי שמתמקד לאט מאוד ברחוב אחד, ולאט מאוד בבית אחד, ״זה הבית שבו נולדתי״. אבל צחוק תעשי מעצמך כשי׳ שלך היא ירושלים, וכל אידיוט הרי יודע על ירושלים. ועל ירושלים אי אפשר לדבר כבר בכלל. כלומר אי אפשר בלי ״סמטה מתפתלת״ ו״מבואות של אבן״, ״שיחי צלף״ ו״ערבייה בשוק״. ולי אין מילה לומר על שיחי צלף ומבואות של אבן ואין לי שמץ רצון לתבל בעגה עסיסית של ימאים ירושלמים. אלה העסיסיים שיושבים בנמל באגריפס ומגלגלים מעשיות ושפם."})})]})]})}const rL={queryKey:["entities"],queryFn:async()=>[{type:"truck",id:"1",name:"Entity 1",location:[34.8,31.2]},{type:"truck",id:"2",name:"Entity 2",location:[34.9,31.3]},{type:"truck",id:"3",name:"Entity 3",location:[35.01,31.4]},{type:"truck",id:"4",name:"Entity 4",location:[34.85,31.25]},{type:"truck",id:"5",name:"Entity 5",location:[34.95,31.32]},{type:"truck",id:"6",name:"Entity 6",location:[34.84,31.28]},{type:"truck",id:"7",name:"Fast Truck",location:[34.8,31.28],history:[{coords:[34.7818,31.0853],time:"2025-10-20T10:00:00Z"},{coords:[34.7418,31.153],time:"2025-10-20T12:00:00Z"},{coords:[34.7618,31.28],time:"2025-10-20T15:00:00Z"},{coords:[34.8,31.28],time:"2025-10-20T18:00:00Z"}]}]},W5=async(i,e,t)=>(await i.fetchQuery(rL)).find(n=>n.id===t&&n.type===e)?.history,Y5={queryKey:["events"],queryFn:async()=>[{id:"event-1",entityIds:["truck-1"],type:"speeding",timestamp:"2024-01-01T00:00:00Z"},{id:"event-2",entityIds:["truck-2"],type:"harsh_braking",timestamp:"2024-01-01T11:00:00Z"},{id:"event-3",entityIds:["truck-1"],type:"geofence_exit",timestamp:"2024-01-01T12:00:00Z"},{id:"event-4",entityIds:["truck-3"],type:"speeding",timestamp:"2024-01-01T19:00:00Z"},{id:"event-5",entityIds:["truck-2"],type:"harsh_acceleration",timestamp:"2024-01-01T14:00:00Z",timestampEnd:"2024-01-01T14:20:00Z"},{id:"event-6",entityIds:["truck-4"],type:"speeding",timestamp:"2024-01-01T16:00:00Z"},{id:"event-7",entityIds:["truck-5"],type:"harsh_braking",timestamp:"2024-01-01T17:00:00Z"},{id:"event-8",entityIds:["truck-6"],type:"geofence_exit",timestamp:"2024-01-01T18:00:00Z"},{id:"event-9",entityIds:["truck-4"],type:"speeding",timestamp:"2024-01-01T20:00:00Z"},{id:"event-10",entityIds:["truck-5"],type:"harsh_acceleration",timestamp:"2024-01-01T21:00:00Z",timestampEnd:"2024-01-01T21:20:00Z"},{id:"event-12",entityIds:["truck-7"],type:"speeding",timestamp:"2024-01-01T23:00:00Z"},{id:"event-13",entityIds:["truck-7"],type:"speeding",timestamp:"2024-01-01T12:00:00Z"},{id:"event-14",entityIds:["truck-7"],type:"speeding",timestamp:"2024-01-01T11:30:00Z"},{id:"event-15",entityIds:["truck-7"],type:"speeding",timestamp:"2024-01-01T12:15:00Z"},{id:"event-16",entityIds:["truck-7"],type:"speeding",timestamp:"2024-01-01T13:00:00Z"}]};/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var aE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xe(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var qf={exports:{}},lE={},hl,cE;function mt(){if(cE)return hl;cE=1;var i=function(e){return e&&e.Math===Math&&e};return hl=i(typeof globalThis=="object"&&globalThis)||i(typeof window=="object"&&window)||i(typeof self=="object"&&self)||i(typeof aE=="object"&&aE)||i(typeof hl=="object"&&hl)||(function(){return this})()||Function("return this")(),hl}var Wf,uE;function Le(){return uE||(uE=1,Wf=function(i){try{return!!i()}catch{return!0}}),Wf}var Yf,hE;function Pc(){if(hE)return Yf;hE=1;var i=Le();return Yf=!i(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),Yf}var Bf,dE;function vd(){if(dE)return Bf;dE=1;var i=Pc(),e=Function.prototype,t=e.apply,n=e.call;return Bf=typeof Reflect=="object"&&Reflect.apply||(i?n.bind(t):function(){return n.apply(t,arguments)}),Bf}var Hf,fE;function qe(){if(fE)return Hf;fE=1;var i=Pc(),e=Function.prototype,t=e.call,n=i&&e.bind.bind(t,t);return Hf=i?n:function(r){return function(){return t.apply(r,arguments)}},Hf}var Uf,pE;function hr(){if(pE)return Uf;pE=1;var i=qe(),e=i({}.toString),t=i("".slice);return Uf=function(n){return t(e(n),8,-1)},Uf}var Vf,mE;function sL(){if(mE)return Vf;mE=1;var i=hr(),e=qe();return Vf=function(t){if(i(t)==="Function")return e(t)},Vf}var Xf,gE;function Rt(){if(gE)return Xf;gE=1;var i=typeof document=="object"&&document.all;return Xf=typeof i>"u"&&i!==void 0?function(e){return typeof e=="function"||e===i}:function(e){return typeof e=="function"},Xf}var Kf={},Zf,vE;function gt(){if(vE)return Zf;vE=1;var i=Le();return Zf=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),Zf}var Qf,yE;function oi(){if(yE)return Qf;yE=1;var i=Pc(),e=Function.prototype.call;return Qf=i?e.bind(e):function(){return e.apply(e,arguments)},Qf}var Jf={},_E;function H0(){if(_E)return Jf;_E=1;var i={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,t=e&&!i.call({1:2},1);return Jf.f=t?function(r){var s=e(this,r);return!!s&&s.enumerable}:i,Jf}var ep,bE;function Dc(){return bE||(bE=1,ep=function(i,e){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:e}}),ep}var tp,wE;function yd(){if(wE)return tp;wE=1;var i=qe(),e=Le(),t=hr(),n=Object,r=i("".split);return tp=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return t(s)==="String"?r(s,""):n(s)}:n,tp}var ip,xE;function Ac(){return xE||(xE=1,ip=function(i){return i==null}),ip}var np,SE;function Xs(){if(SE)return np;SE=1;var i=Ac(),e=TypeError;return np=function(t){if(i(t))throw new e("Can't call method on "+t);return t},np}var rp,EE;function Rn(){if(EE)return rp;EE=1;var i=yd(),e=Xs();return rp=function(t){return i(e(t))},rp}var sp,CE;function Vt(){if(CE)return sp;CE=1;var i=Rt();return sp=function(e){return typeof e=="object"?e!==null:i(e)},sp}var op,TE;function wt(){return TE||(TE=1,op={}),op}var ap,RE;function yi(){if(RE)return ap;RE=1;var i=wt(),e=mt(),t=Rt(),n=function(r){return t(r)?r:void 0};return ap=function(r,s){return arguments.length<2?n(i[r])||n(e[r]):i[r]&&i[r][s]||e[r]&&e[r][s]},ap}var lp,IE;function It(){if(IE)return lp;IE=1;var i=qe();return lp=i({}.isPrototypeOf),lp}var cp,OE;function Fa(){if(OE)return cp;OE=1;var i=mt(),e=i.navigator,t=e&&e.userAgent;return cp=t?String(t):"",cp}var up,PE;function Mc(){if(PE)return up;PE=1;var i=mt(),e=Fa(),t=i.process,n=i.Deno,r=t&&t.versions||n&&n.version,s=r&&r.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),up=a,up}var hp,DE;function $a(){if(DE)return hp;DE=1;var i=Mc(),e=Le(),t=mt(),n=t.String;return hp=!!Object.getOwnPropertySymbols&&!e(function(){var r=Symbol("symbol detection");return!n(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&i&&i<41}),hp}var dp,AE;function oL(){if(AE)return dp;AE=1;var i=$a();return dp=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol",dp}var fp,ME;function kc(){if(ME)return fp;ME=1;var i=yi(),e=Rt(),t=It(),n=oL(),r=Object;return fp=n?function(s){return typeof s=="symbol"}:function(s){var o=i("Symbol");return e(o)&&t(o.prototype,r(s))},fp}var pp,kE;function ja(){if(kE)return pp;kE=1;var i=String;return pp=function(e){try{return i(e)}catch{return"Object"}},pp}var mp,NE;function dr(){if(NE)return mp;NE=1;var i=Rt(),e=ja(),t=TypeError;return mp=function(n){if(i(n))return n;throw new t(e(n)+" is not a function")},mp}var gp,LE;function U0(){if(LE)return gp;LE=1;var i=dr(),e=Ac();return gp=function(t,n){var r=t[n];return e(r)?void 0:i(r)},gp}var vp,FE;function B5(){if(FE)return vp;FE=1;var i=oi(),e=Rt(),t=Vt(),n=TypeError;return vp=function(r,s){var o,a;if(s==="string"&&e(o=r.toString)&&!t(a=i(o,r))||e(o=r.valueOf)&&!t(a=i(o,r))||s!=="string"&&e(o=r.toString)&&!t(a=i(o,r)))return a;throw new n("Can't convert object to primitive value")},vp}var yp={exports:{}},_p,$E;function za(){return $E||($E=1,_p=!0),_p}var bp,jE;function H5(){if(jE)return bp;jE=1;var i=mt(),e=Object.defineProperty;return bp=function(t,n){try{e(i,t,{value:n,configurable:!0,writable:!0})}catch{i[t]=n}return n},bp}var zE;function V0(){if(zE)return yp.exports;zE=1;var i=za(),e=mt(),t=H5(),n="__core-js_shared__",r=yp.exports=e[n]||t(n,{});return(r.versions||(r.versions=[])).push({version:"3.44.0",mode:i?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),yp.exports}var wp,GE;function Ga(){if(GE)return wp;GE=1;var i=V0();return wp=function(e,t){return i[e]||(i[e]=t||{})},wp}var xp,qE;function sn(){if(qE)return xp;qE=1;var i=Xs(),e=Object;return xp=function(t){return e(i(t))},xp}var Sp,WE;function Ot(){if(WE)return Sp;WE=1;var i=qe(),e=sn(),t=i({}.hasOwnProperty);return Sp=Object.hasOwn||function(r,s){return t(e(r),s)},Sp}var Ep,YE;function _d(){if(YE)return Ep;YE=1;var i=qe(),e=0,t=Math.random(),n=i(1.1.toString);return Ep=function(r){return"Symbol("+(r===void 0?"":r)+")_"+n(++e+t,36)},Ep}var Cp,BE;function Pt(){if(BE)return Cp;BE=1;var i=mt(),e=Ga(),t=Ot(),n=_d(),r=$a(),s=oL(),o=i.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return Cp=function(c){return t(a,c)||(a[c]=r&&t(o,c)?o[c]:l("Symbol."+c)),a[c]},Cp}var Tp,HE;function aL(){if(HE)return Tp;HE=1;var i=oi(),e=Vt(),t=kc(),n=U0(),r=B5(),s=Pt(),o=TypeError,a=s("toPrimitive");return Tp=function(l,c){if(!e(l)||t(l))return l;var u=n(l,a),h;if(u){if(c===void 0&&(c="default"),h=i(u,l,c),!e(h)||t(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),r(l,c)},Tp}var Rp,UE;function X0(){if(UE)return Rp;UE=1;var i=aL(),e=kc();return Rp=function(t){var n=i(t,"string");return e(n)?n:n+""},Rp}var Ip,VE;function lL(){if(VE)return Ip;VE=1;var i=mt(),e=Vt(),t=i.document,n=e(t)&&e(t.createElement);return Ip=function(r){return n?t.createElement(r):{}},Ip}var Op,XE;function cL(){if(XE)return Op;XE=1;var i=gt(),e=Le(),t=lL();return Op=!i&&!e(function(){return Object.defineProperty(t("div"),"a",{get:function(){return 7}}).a!==7}),Op}var KE;function bd(){if(KE)return Kf;KE=1;var i=gt(),e=oi(),t=H0(),n=Dc(),r=Rn(),s=X0(),o=Ot(),a=cL(),l=Object.getOwnPropertyDescriptor;return Kf.f=i?l:function(u,h){if(u=r(u),h=s(h),a)try{return l(u,h)}catch{}if(o(u,h))return n(!e(t.f,u,h),u[h])},Kf}var Pp,ZE;function U5(){if(ZE)return Pp;ZE=1;var i=Le(),e=Rt(),t=/#|\.prototype\./,n=function(l,c){var u=s[r(l)];return u===a?!0:u===o?!1:e(c)?i(c):!!c},r=n.normalize=function(l){return String(l).replace(t,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return Pp=n,Pp}var Dp,QE;function wd(){if(QE)return Dp;QE=1;var i=sL(),e=dr(),t=Pc(),n=i(i.bind);return Dp=function(r,s){return e(r),s===void 0?r:t?n(r,s):function(){return r.apply(s,arguments)}},Dp}var Ap={},Mp,JE;function uL(){if(JE)return Mp;JE=1;var i=gt(),e=Le();return Mp=i&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Mp}var kp,e1;function fr(){if(e1)return kp;e1=1;var i=Vt(),e=String,t=TypeError;return kp=function(n){if(i(n))return n;throw new t(e(n)+" is not an object")},kp}var t1;function ki(){if(t1)return Ap;t1=1;var i=gt(),e=cL(),t=uL(),n=fr(),r=X0(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",u="writable";return Ap.f=i?t?function(d,f,p){if(n(d),f=r(f),n(p),typeof d=="function"&&f==="prototype"&&"value"in p&&u in p&&!p[u]){var m=a(d,f);m&&m[u]&&(d[f]=p.value,p={configurable:c in p?p[c]:m[c],enumerable:l in p?p[l]:m[l],writable:!1})}return o(d,f,p)}:o:function(d,f,p){if(n(d),f=r(f),n(p),e)try{return o(d,f,p)}catch{}if("get"in p||"set"in p)throw new s("Accessors not supported");return"value"in p&&(d[f]=p.value),d},Ap}var Np,i1;function qa(){if(i1)return Np;i1=1;var i=gt(),e=ki(),t=Dc();return Np=i?function(n,r,s){return e.f(n,r,t(1,s))}:function(n,r,s){return n[r]=s,n},Np}var Lp,n1;function ce(){if(n1)return Lp;n1=1;var i=mt(),e=vd(),t=sL(),n=Rt(),r=bd().f,s=U5(),o=wt(),a=wd(),l=qa(),c=Ot(),u=function(h){var d=function(f,p,m){if(this instanceof d){switch(arguments.length){case 0:return new h;case 1:return new h(f);case 2:return new h(f,p)}return new h(f,p,m)}return e(h,this,arguments)};return d.prototype=h.prototype,d};return Lp=function(h,d){var f=h.target,p=h.global,m=h.stat,g=h.proto,v=p?i:m?i[f]:i[f]&&i[f].prototype,y=p?o:o[f]||l(o,f,{})[f],b=y.prototype,_,w,C,E,x,T,O,D,A;for(E in d)_=s(p?E:f+(m?".":"#")+E,h.forced),w=!_&&v&&c(v,E),T=y[E],w&&(h.dontCallGetSet?(A=r(v,E),O=A&&A.value):O=v[E]),x=w&&O?O:d[E],!(!_&&!g&&typeof T==typeof x)&&(h.bind&&w?D=a(x,i):h.wrap&&w?D=u(x):g&&n(x)?D=t(x):D=x,(h.sham||x&&x.sham||T&&T.sham)&&l(D,"sham",!0),l(y,E,D),g&&(C=f+"Prototype",c(o,C)||l(o,C,{}),l(o[C],E,x),h.real&&b&&(_||!b[E])&&l(b,E,x)))},Lp}var r1;function V5(){if(r1)return lE;r1=1;var i=ce(),e=gt(),t=ki().f;return i({target:"Object",stat:!0,forced:Object.defineProperty!==t,sham:!e},{defineProperty:t}),lE}var s1;function X5(){if(s1)return qf.exports;s1=1,V5();var i=wt(),e=i.Object,t=qf.exports=function(r,s,o){return e.defineProperty(r,s,o)};return e.defineProperty.sham&&(t.sham=!0),qf.exports}var Fp,o1;function hL(){if(o1)return Fp;o1=1;var i=X5();return Fp=i,Fp}var $p,a1;function K5(){if(a1)return $p;a1=1;var i=hL();return $p=i,$p}var jp,l1;function Z5(){if(l1)return jp;l1=1;var i=K5();return jp=i,jp}var zp,c1;function Q5(){return c1||(c1=1,zp=Z5()),zp}var J5=Q5(),e3=xe(J5),u1={},Gp,h1;function Ks(){if(h1)return Gp;h1=1;var i=hr();return Gp=Array.isArray||function(t){return i(t)==="Array"},Gp}var qp,d1;function t3(){if(d1)return qp;d1=1;var i=Math.ceil,e=Math.floor;return qp=Math.trunc||function(n){var r=+n;return(r>0?e:i)(r)},qp}var Wp,f1;function Wa(){if(f1)return Wp;f1=1;var i=t3();return Wp=function(e){var t=+e;return t!==t||t===0?0:i(t)},Wp}var Yp,p1;function dL(){if(p1)return Yp;p1=1;var i=Wa(),e=Math.min;return Yp=function(t){var n=i(t);return n>0?e(n,9007199254740991):0},Yp}var Bp,m1;function Xr(){if(m1)return Bp;m1=1;var i=dL();return Bp=function(e){return i(e.length)},Bp}var Hp,g1;function fL(){if(g1)return Hp;g1=1;var i=TypeError,e=9007199254740991;return Hp=function(t){if(t>e)throw i("Maximum allowed index exceeded");return t},Hp}var Up,v1;function xd(){if(v1)return Up;v1=1;var i=gt(),e=ki(),t=Dc();return Up=function(n,r,s){i?e.f(n,r,t(0,s)):n[r]=s},Up}var Vp,y1;function K0(){if(y1)return Vp;y1=1;var i=Pt(),e=i("toStringTag"),t={};return t[e]="z",Vp=String(t)==="[object z]",Vp}var Xp,_1;function Kr(){if(_1)return Xp;_1=1;var i=K0(),e=Rt(),t=hr(),n=Pt(),r=n("toStringTag"),s=Object,o=t((function(){return arguments})())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return Xp=i?t:function(l){var c,u,h;return l===void 0?"Undefined":l===null?"Null":typeof(u=a(c=s(l),r))=="string"?u:o?t(c):(h=t(c))==="Object"&&e(c.callee)?"Arguments":h},Xp}var Kp,b1;function i3(){if(b1)return Kp;b1=1;var i=qe(),e=Rt(),t=V0(),n=i(Function.toString);return e(t.inspectSource)||(t.inspectSource=function(r){return n(r)}),Kp=t.inspectSource,Kp}var Zp,w1;function pL(){if(w1)return Zp;w1=1;var i=qe(),e=Le(),t=Rt(),n=Kr(),r=yi(),s=i3(),o=function(){},a=r("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=i(l.exec),u=!l.test(o),h=function(p){if(!t(p))return!1;try{return a(o,[],p),!0}catch{return!1}},d=function(p){if(!t(p))return!1;switch(n(p)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return u||!!c(l,s(p))}catch{return!0}};return d.sham=!0,Zp=!a||e(function(){var f;return h(h.call)||!h(Object)||!h(function(){f=!0})||f})?d:h,Zp}var Qp,x1;function n3(){if(x1)return Qp;x1=1;var i=Ks(),e=pL(),t=Vt(),n=Pt(),r=n("species"),s=Array;return Qp=function(o){var a;return i(o)&&(a=o.constructor,e(a)&&(a===s||i(a.prototype))?a=void 0:t(a)&&(a=a[r],a===null&&(a=void 0))),a===void 0?s:a},Qp}var Jp,S1;function Z0(){if(S1)return Jp;S1=1;var i=n3();return Jp=function(e,t){return new(i(e))(t===0?0:t)},Jp}var em,E1;function Nc(){if(E1)return em;E1=1;var i=Le(),e=Pt(),t=Mc(),n=e("species");return em=function(r){return t>=51||!i(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[r](Boolean).foo!==1})},em}var C1;function mL(){if(C1)return u1;C1=1;var i=ce(),e=Le(),t=Ks(),n=Vt(),r=sn(),s=Xr(),o=fL(),a=xd(),l=Z0(),c=Nc(),u=Pt(),h=Mc(),d=u("isConcatSpreadable"),f=h>=51||!e(function(){var g=[];return g[d]=!1,g.concat()[0]!==g}),p=function(g){if(!n(g))return!1;var v=g[d];return v!==void 0?!!v:t(g)},m=!f||!c("concat");return i({target:"Array",proto:!0,arity:1,forced:m},{concat:function(v){var y=r(this),b=l(y,0),_=0,w,C,E,x,T;for(w=-1,E=arguments.length;w<E;w++)if(T=w===-1?y:arguments[w],p(T))for(x=s(T),o(_+x),C=0;C<x;C++,_++)C in T&&a(b,_,T[C]);else o(_+1),a(b,_++,T);return b.length=_,b}}),u1}var T1={},R1={},tm,I1;function Zr(){if(I1)return tm;I1=1;var i=Kr(),e=String;return tm=function(t){if(i(t)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(t)},tm}var im={},nm,O1;function Q0(){if(O1)return nm;O1=1;var i=Wa(),e=Math.max,t=Math.min;return nm=function(n,r){var s=i(n);return s<0?e(s+r,0):t(s,r)},nm}var rm,P1;function r3(){if(P1)return rm;P1=1;var i=Rn(),e=Q0(),t=Xr(),n=function(r){return function(s,o,a){var l=i(s),c=t(l);if(c===0)return!r&&-1;var u=e(a,c),h;if(r&&o!==o){for(;c>u;)if(h=l[u++],h!==h)return!0}else for(;c>u;u++)if((r||u in l)&&l[u]===o)return r||u||0;return!r&&-1}};return rm={includes:n(!0),indexOf:n(!1)},rm}var sm,D1;function Lc(){return D1||(D1=1,sm={}),sm}var om,A1;function gL(){if(A1)return om;A1=1;var i=qe(),e=Ot(),t=Rn(),n=r3().indexOf,r=Lc(),s=i([].push);return om=function(o,a){var l=t(o),c=0,u=[],h;for(h in l)!e(r,h)&&e(l,h)&&s(u,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(u,h)||s(u,h));return u},om}var am,M1;function J0(){return M1||(M1=1,am=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),am}var lm,k1;function Sd(){if(k1)return lm;k1=1;var i=gL(),e=J0();return lm=Object.keys||function(n){return i(n,e)},lm}var N1;function ew(){if(N1)return im;N1=1;var i=gt(),e=uL(),t=ki(),n=fr(),r=Rn(),s=Sd();return im.f=i&&!e?Object.defineProperties:function(a,l){n(a);for(var c=r(l),u=s(l),h=u.length,d=0,f;h>d;)t.f(a,f=u[d++],c[f]);return a},im}var cm,L1;function s3(){if(L1)return cm;L1=1;var i=yi();return cm=i("document","documentElement"),cm}var um,F1;function Ed(){if(F1)return um;F1=1;var i=Ga(),e=_d(),t=i("keys");return um=function(n){return t[n]||(t[n]=e(n))},um}var hm,$1;function Fc(){if($1)return hm;$1=1;var i=fr(),e=ew(),t=J0(),n=Lc(),r=s3(),s=lL(),o=Ed(),a=">",l="<",c="prototype",u="script",h=o("IE_PROTO"),d=function(){},f=function(y){return l+u+a+y+l+"/"+u+a},p=function(y){y.write(f("")),y.close();var b=y.parentWindow.Object;return y=null,b},m=function(){var y=s("iframe"),b="java"+u+":",_;return y.style.display="none",r.appendChild(y),y.src=String(b),_=y.contentWindow.document,_.open(),_.write(f("document.F=Object")),_.close(),_.F},g,v=function(){try{g=new ActiveXObject("htmlfile")}catch{}v=typeof document<"u"?document.domain&&g?p(g):m():p(g);for(var y=t.length;y--;)delete v[c][t[y]];return v()};return n[h]=!0,hm=Object.create||function(b,_){var w;return b!==null?(d[c]=i(b),w=new d,d[c]=null,w[h]=b):w=v(),_===void 0?w:e.f(w,_)},hm}var dm={},j1;function Cd(){if(j1)return dm;j1=1;var i=gL(),e=J0(),t=e.concat("length","prototype");return dm.f=Object.getOwnPropertyNames||function(r){return i(r,t)},dm}var fm={},pm,z1;function Ya(){if(z1)return pm;z1=1;var i=qe();return pm=i([].slice),pm}var G1;function vL(){if(G1)return fm;G1=1;var i=hr(),e=Rn(),t=Cd().f,n=Ya(),r=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return t(o)}catch{return n(r)}};return fm.f=function(a){return r&&i(a)==="Window"?s(a):t(e(a))},fm}var mm={},q1;function Td(){return q1||(q1=1,mm.f=Object.getOwnPropertySymbols),mm}var gm,W1;function $c(){if(W1)return gm;W1=1;var i=qa();return gm=function(e,t,n,r){return r&&r.enumerable?e[t]=n:i(e,t,n),e},gm}var vm,Y1;function tw(){if(Y1)return vm;Y1=1;var i=ki();return vm=function(e,t,n){return i.f(e,t,n)},vm}var ym={},B1;function Rd(){if(B1)return ym;B1=1;var i=Pt();return ym.f=i,ym}var _m,H1;function nt(){if(H1)return _m;H1=1;var i=wt(),e=Ot(),t=Rd(),n=ki().f;return _m=function(r){var s=i.Symbol||(i.Symbol={});e(s,r)||n(s,r,{value:t.f(r)})},_m}var bm,U1;function yL(){if(U1)return bm;U1=1;var i=oi(),e=yi(),t=Pt(),n=$c();return bm=function(){var r=e("Symbol"),s=r&&r.prototype,o=s&&s.valueOf,a=t("toPrimitive");s&&!s[a]&&n(s,a,function(l){return i(o,this)},{arity:1})},bm}var wm,V1;function o3(){if(V1)return wm;V1=1;var i=K0(),e=Kr();return wm=i?{}.toString:function(){return"[object "+e(this)+"]"},wm}var xm,X1;function Zs(){if(X1)return xm;X1=1;var i=K0(),e=ki().f,t=qa(),n=Ot(),r=o3(),s=Pt(),o=s("toStringTag");return xm=function(a,l,c,u){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),u&&!i&&t(h,"toString",r))},xm}var Sm,K1;function a3(){if(K1)return Sm;K1=1;var i=mt(),e=Rt(),t=i.WeakMap;return Sm=e(t)&&/native code/.test(String(t)),Sm}var Em,Z1;function jc(){if(Z1)return Em;Z1=1;var i=a3(),e=mt(),t=Vt(),n=qa(),r=Ot(),s=V0(),o=Ed(),a=Lc(),l="Object already initialized",c=e.TypeError,u=e.WeakMap,h,d,f,p=function(y){return f(y)?d(y):h(y,{})},m=function(y){return function(b){var _;if(!t(b)||(_=d(b)).type!==y)throw new c("Incompatible receiver, "+y+" required");return _}};if(i||s.state){var g=s.state||(s.state=new u);g.get=g.get,g.has=g.has,g.set=g.set,h=function(y,b){if(g.has(y))throw new c(l);return b.facade=y,g.set(y,b),b},d=function(y){return g.get(y)||{}},f=function(y){return g.has(y)}}else{var v=o("state");a[v]=!0,h=function(y,b){if(r(y,v))throw new c(l);return b.facade=y,n(y,v,b),b},d=function(y){return r(y,v)?y[v]:{}},f=function(y){return r(y,v)}}return Em={set:h,get:d,has:f,enforce:p,getterFor:m},Em}var Cm,Q1;function Ba(){if(Q1)return Cm;Q1=1;var i=wd(),e=qe(),t=yd(),n=sn(),r=Xr(),s=Z0(),o=e([].push),a=function(l){var c=l===1,u=l===2,h=l===3,d=l===4,f=l===6,p=l===7,m=l===5||f;return function(g,v,y,b){for(var _=n(g),w=t(_),C=r(w),E=i(v,y),x=0,T=b||s,O=c?T(g,C):u||p?T(g,0):void 0,D,A;C>x;x++)if((m||x in w)&&(D=w[x],A=E(D,x,_),l))if(c)O[x]=A;else if(A)switch(l){case 3:return!0;case 5:return D;case 6:return x;case 2:o(O,D)}else switch(l){case 4:return!1;case 7:o(O,D)}return f?-1:h||d?d:O}};return Cm={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},Cm}var J1;function l3(){if(J1)return R1;J1=1;var i=ce(),e=mt(),t=oi(),n=qe(),r=za(),s=gt(),o=$a(),a=Le(),l=Ot(),c=It(),u=fr(),h=Rn(),d=X0(),f=Zr(),p=Dc(),m=Fc(),g=Sd(),v=Cd(),y=vL(),b=Td(),_=bd(),w=ki(),C=ew(),E=H0(),x=$c(),T=tw(),O=Ga(),D=Ed(),A=Lc(),k=_d(),N=Pt(),z=Rd(),M=nt(),$=yL(),P=Zs(),G=jc(),V=Ba().forEach,X=D("hidden"),L="Symbol",j="prototype",W=G.set,H=G.getterFor(L),U=Object[j],q=e.Symbol,J=q&&q[j],ne=e.RangeError,oe=e.TypeError,Ye=e.QObject,Ve=_.f,he=w.f,rt=y.f,ht=E.f,xt=n([].push),dt=O("symbols"),Ge=O("op-symbols"),an=O("wks"),li=!Ye||!Ye[j]||!Ye[j].findChild,zt=function(Me,ve,Se){var be=Ve(U,ve);be&&delete U[ve],he(Me,ve,Se),be&&Me!==U&&he(U,ve,be)},ci=s&&a(function(){return m(he({},"a",{get:function(){return he(this,"a",{value:7}).a}})).a!==7})?zt:he,Xe=function(Me,ve){var Se=dt[Me]=m(J);return W(Se,{type:L,tag:Me,description:ve}),s||(Se.description=ve),Se},vr=function(ve,Se,be){ve===U&&vr(Ge,Se,be),u(ve);var Fe=d(Se);return u(be),l(dt,Fe)?(be.enumerable?(l(ve,X)&&ve[X][Fe]&&(ve[X][Fe]=!1),be=m(be,{enumerable:p(0,!1)})):(l(ve,X)||he(ve,X,p(1,m(null))),ve[X][Fe]=!0),ci(ve,Fe,be)):he(ve,Fe,be)},is=function(ve,Se){u(ve);var be=h(Se),Fe=g(be).concat(el(be));return V(Fe,function(St){(!s||t(yr,be,St))&&vr(ve,St,be[St])}),ve},ao=function(ve,Se){return Se===void 0?m(ve):is(m(ve),Se)},yr=function(ve){var Se=d(ve),be=t(ht,this,Se);return this===U&&l(dt,Se)&&!l(Ge,Se)?!1:be||!l(this,Se)||!l(dt,Se)||l(this,X)&&this[X][Se]?be:!0},nu=function(ve,Se){var be=h(ve),Fe=d(Se);if(!(be===U&&l(dt,Fe)&&!l(Ge,Fe))){var St=Ve(be,Fe);return St&&l(dt,Fe)&&!(l(be,X)&&be[X][Fe])&&(St.enumerable=!0),St}},Ja=function(ve){var Se=rt(h(ve)),be=[];return V(Se,function(Fe){!l(dt,Fe)&&!l(A,Fe)&&xt(be,Fe)}),be},el=function(Me){var ve=Me===U,Se=rt(ve?Ge:h(Me)),be=[];return V(Se,function(Fe){l(dt,Fe)&&(!ve||l(U,Fe))&&xt(be,dt[Fe])}),be};return o||(q=function(){if(c(J,this))throw new oe("Symbol is not a constructor");var ve=!arguments.length||arguments[0]===void 0?void 0:f(arguments[0]),Se=k(ve),be=function(Fe){var St=this===void 0?e:this;St===U&&t(be,Ge,Fe),l(St,X)&&l(St[X],Se)&&(St[X][Se]=!1);var tl=p(1,Fe);try{ci(St,Se,tl)}catch(ru){if(!(ru instanceof ne))throw ru;zt(St,Se,tl)}};return s&&li&&ci(U,Se,{configurable:!0,set:be}),Xe(Se,ve)},J=q[j],x(J,"toString",function(){return H(this).tag}),x(q,"withoutSetter",function(Me){return Xe(k(Me),Me)}),E.f=yr,w.f=vr,C.f=is,_.f=nu,v.f=y.f=Ja,b.f=el,z.f=function(Me){return Xe(N(Me),Me)},s&&(T(J,"description",{configurable:!0,get:function(){return H(this).description}}),r||x(U,"propertyIsEnumerable",yr,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:q}),V(g(an),function(Me){M(Me)}),i({target:L,stat:!0,forced:!o},{useSetter:function(){li=!0},useSimple:function(){li=!1}}),i({target:"Object",stat:!0,forced:!o,sham:!s},{create:ao,defineProperty:vr,defineProperties:is,getOwnPropertyDescriptor:nu}),i({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ja}),$(),P(q,L),A[X]=!0,R1}var eC={},Tm,tC;function _L(){if(tC)return Tm;tC=1;var i=$a();return Tm=i&&!!Symbol.for&&!!Symbol.keyFor,Tm}var iC;function c3(){if(iC)return eC;iC=1;var i=ce(),e=yi(),t=Ot(),n=Zr(),r=Ga(),s=_L(),o=r("string-to-symbol-registry"),a=r("symbol-to-string-registry");return i({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(t(o,c))return o[c];var u=e("Symbol")(c);return o[c]=u,a[u]=c,u}}),eC}var nC={},rC;function u3(){if(rC)return nC;rC=1;var i=ce(),e=Ot(),t=kc(),n=ja(),r=Ga(),s=_L(),o=r("symbol-to-string-registry");return i({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!t(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),nC}var sC={},Rm,oC;function h3(){if(oC)return Rm;oC=1;var i=qe(),e=Ks(),t=Rt(),n=hr(),r=Zr(),s=i([].push);return Rm=function(o){if(t(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var u=o[c];typeof u=="string"?s(l,u):(typeof u=="number"||n(u)==="Number"||n(u)==="String")&&s(l,r(u))}var h=l.length,d=!0;return function(f,p){if(d)return d=!1,p;if(e(this))return p;for(var m=0;m<h;m++)if(l[m]===f)return p}}},Rm}var aC;function bL(){if(aC)return sC;aC=1;var i=ce(),e=yi(),t=vd(),n=oi(),r=qe(),s=Le(),o=Rt(),a=kc(),l=Ya(),c=h3(),u=$a(),h=String,d=e("JSON","stringify"),f=r(/./.exec),p=r("".charAt),m=r("".charCodeAt),g=r("".replace),v=r(1.1.toString),y=/[\uD800-\uDFFF]/g,b=/^[\uD800-\uDBFF]$/,_=/^[\uDC00-\uDFFF]$/,w=!u||s(function(){var T=e("Symbol")("stringify detection");return d([T])!=="[null]"||d({a:T})!=="{}"||d(Object(T))!=="{}"}),C=s(function(){return d("\uDF06\uD834")!=='"\\udf06\\ud834"'||d("\uDEAD")!=='"\\udead"'}),E=function(T,O){var D=l(arguments),A=c(O);if(!(!o(A)&&(T===void 0||a(T))))return D[1]=function(k,N){if(o(A)&&(N=n(A,this,h(k),N)),!a(N))return N},t(d,null,D)},x=function(T,O,D){var A=p(D,O-1),k=p(D,O+1);return f(b,T)&&!f(_,k)||f(_,T)&&!f(b,A)?"\\u"+v(m(T,0),16):T};return d&&i({target:"JSON",stat:!0,arity:3,forced:w||C},{stringify:function(O,D,A){var k=l(arguments),N=t(w?E:d,null,k);return C&&typeof N=="string"?g(N,y,x):N}}),sC}var lC={},cC;function d3(){if(cC)return lC;cC=1;var i=ce(),e=$a(),t=Le(),n=Td(),r=sn(),s=!e||t(function(){n.f(1)});return i({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(r(a)):[]}}),lC}var uC;function wL(){return uC||(uC=1,l3(),c3(),u3(),bL(),d3()),T1}var hC={},dC;function xL(){if(dC)return hC;dC=1;var i=nt();return i("asyncDispose"),hC}var fC={},pC;function f3(){if(pC)return fC;pC=1;var i=nt();return i("asyncIterator"),fC}var mC={},gC;function SL(){if(gC)return mC;gC=1;var i=nt();return i("dispose"),mC}var vC={},yC;function p3(){if(yC)return vC;yC=1;var i=nt();return i("hasInstance"),vC}var _C={},bC;function m3(){if(bC)return _C;bC=1;var i=nt();return i("isConcatSpreadable"),_C}var wC={},xC;function EL(){if(xC)return wC;xC=1;var i=nt();return i("iterator"),wC}var SC={},EC;function g3(){if(EC)return SC;EC=1;var i=nt();return i("match"),SC}var CC={},TC;function v3(){if(TC)return CC;TC=1;var i=nt();return i("matchAll"),CC}var RC={},IC;function y3(){if(IC)return RC;IC=1;var i=nt();return i("replace"),RC}var OC={},PC;function _3(){if(PC)return OC;PC=1;var i=nt();return i("search"),OC}var DC={},AC;function b3(){if(AC)return DC;AC=1;var i=nt();return i("species"),DC}var MC={},kC;function w3(){if(kC)return MC;kC=1;var i=nt();return i("split"),MC}var NC={},LC;function CL(){if(LC)return NC;LC=1;var i=nt(),e=yL();return i("toPrimitive"),e(),NC}var FC={},$C;function x3(){if($C)return FC;$C=1;var i=yi(),e=nt(),t=Zs();return e("toStringTag"),t(i("Symbol"),"Symbol"),FC}var jC={},zC;function S3(){if(zC)return jC;zC=1;var i=nt();return i("unscopables"),jC}var GC={},qC;function E3(){if(qC)return GC;qC=1;var i=mt(),e=Zs();return e(i.JSON,"JSON",!0),GC}var Im,WC;function C3(){if(WC)return Im;WC=1,mL(),wL(),xL(),f3(),SL(),p3(),m3(),EL(),g3(),v3(),y3(),_3(),b3(),w3(),CL(),x3(),S3(),E3();var i=wt();return Im=i.Symbol,Im}var YC={},Om,BC;function T3(){return BC||(BC=1,Om=function(){}),Om}var Pm,HC;function Ha(){return HC||(HC=1,Pm={}),Pm}var Dm,UC;function R3(){if(UC)return Dm;UC=1;var i=gt(),e=Ot(),t=Function.prototype,n=i&&Object.getOwnPropertyDescriptor,r=e(t,"name"),s=r&&(function(){}).name==="something",o=r&&(!i||i&&n(t,"name").configurable);return Dm={EXISTS:r,PROPER:s,CONFIGURABLE:o},Dm}var Am,VC;function I3(){if(VC)return Am;VC=1;var i=Le();return Am=!i(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Am}var Mm,XC;function TL(){if(XC)return Mm;XC=1;var i=Ot(),e=Rt(),t=sn(),n=Ed(),r=I3(),s=n("IE_PROTO"),o=Object,a=o.prototype;return Mm=r?o.getPrototypeOf:function(l){var c=t(l);if(i(c,s))return c[s];var u=c.constructor;return e(u)&&c instanceof u?u.prototype:c instanceof o?a:null},Mm}var km,KC;function RL(){if(KC)return km;KC=1;var i=Le(),e=Rt(),t=Vt(),n=Fc(),r=TL(),s=$c(),o=Pt(),a=za(),l=o("iterator"),c=!1,u,h,d;[].keys&&(d=[].keys(),"next"in d?(h=r(r(d)),h!==Object.prototype&&(u=h)):c=!0);var f=!t(u)||i(function(){var p={};return u[l].call(p)!==p});return f?u={}:a&&(u=n(u)),e(u[l])||s(u,l,function(){return this}),km={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:c},km}var Nm,ZC;function O3(){if(ZC)return Nm;ZC=1;var i=RL().IteratorPrototype,e=Fc(),t=Dc(),n=Zs(),r=Ha(),s=function(){return this};return Nm=function(o,a,l,c){var u=a+" Iterator";return o.prototype=e(i,{next:t(+!c,l)}),n(o,u,!1,!0),r[u]=s,o},Nm}var Lm,QC;function P3(){if(QC)return Lm;QC=1;var i=qe(),e=dr();return Lm=function(t,n,r){try{return i(e(Object.getOwnPropertyDescriptor(t,n)[r]))}catch{}},Lm}var Fm,JC;function D3(){if(JC)return Fm;JC=1;var i=Vt();return Fm=function(e){return i(e)||e===null},Fm}var $m,eT;function A3(){if(eT)return $m;eT=1;var i=D3(),e=String,t=TypeError;return $m=function(n){if(i(n))return n;throw new t("Can't set "+e(n)+" as a prototype")},$m}var jm,tT;function M3(){if(tT)return jm;tT=1;var i=P3(),e=Vt(),t=Xs(),n=A3();return jm=Object.setPrototypeOf||("__proto__"in{}?(function(){var r=!1,s={},o;try{o=i(Object.prototype,"__proto__","set"),o(s,[]),r=s instanceof Array}catch{}return function(l,c){return t(l),n(c),e(l)&&(r?o(l,c):l.__proto__=c),l}})():void 0),jm}var zm,iT;function iw(){if(iT)return zm;iT=1;var i=ce(),e=oi(),t=za(),n=R3(),r=Rt(),s=O3(),o=TL(),a=M3(),l=Zs(),c=qa(),u=$c(),h=Pt(),d=Ha(),f=RL(),p=n.PROPER,m=n.CONFIGURABLE,g=f.IteratorPrototype,v=f.BUGGY_SAFARI_ITERATORS,y=h("iterator"),b="keys",_="values",w="entries",C=function(){return this};return zm=function(E,x,T,O,D,A,k){s(T,x,O);var N=function(W){if(W===D&&G)return G;if(!v&&W&&W in $)return $[W];switch(W){case b:return function(){return new T(this,W)};case _:return function(){return new T(this,W)};case w:return function(){return new T(this,W)}}return function(){return new T(this)}},z=x+" Iterator",M=!1,$=E.prototype,P=$[y]||$["@@iterator"]||D&&$[D],G=!v&&P||N(D),V=x==="Array"&&$.entries||P,X,L,j;if(V&&(X=o(V.call(new E)),X!==Object.prototype&&X.next&&(!t&&o(X)!==g&&(a?a(X,g):r(X[y])||u(X,y,C)),l(X,z,!0,!0),t&&(d[z]=C))),p&&D===_&&P&&P.name!==_&&(!t&&m?c($,"name",_):(M=!0,G=function(){return e(P,this)})),D)if(L={values:N(_),keys:A?G:N(b),entries:N(w)},k)for(j in L)(v||M||!(j in $))&&u($,j,L[j]);else i({target:x,proto:!0,forced:v||M},L);return(!t||k)&&$[y]!==G&&u($,y,G,{name:D}),d[x]=G,L},zm}var Gm,nT;function nw(){return nT||(nT=1,Gm=function(i,e){return{value:i,done:e}}),Gm}var qm,rT;function Qr(){if(rT)return qm;rT=1;var i=Rn(),e=T3(),t=Ha(),n=jc(),r=ki().f,s=iw(),o=nw(),a=za(),l=gt(),c="Array Iterator",u=n.set,h=n.getterFor(c);qm=s(Array,"Array",function(f,p){u(this,{type:c,target:i(f),index:0,kind:p})},function(){var f=h(this),p=f.target,m=f.index++;if(!p||m>=p.length)return f.target=null,o(void 0,!0);switch(f.kind){case"keys":return o(m,!1);case"values":return o(p[m],!1)}return o([m,p[m]],!1)},"values");var d=t.Arguments=t.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&d.name!=="values")try{r(d,"name",{value:"values"})}catch{}return qm}var Wm,sT;function k3(){return sT||(sT=1,Wm={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),Wm}var oT;function Jr(){if(oT)return YC;oT=1,Qr();var i=k3(),e=mt(),t=Zs(),n=Ha();for(var r in i)t(e[r],r),n[r]=n.Array;return YC}var Ym,aT;function IL(){if(aT)return Ym;aT=1;var i=C3();return Jr(),Ym=i,Ym}var lT={},cT;function N3(){if(cT)return lT;cT=1;var i=Pt(),e=ki().f,t=i("metadata"),n=Function.prototype;return n[t]===void 0&&e(n,t,{value:null}),lT}var uT={},hT;function L3(){return hT||(hT=1,xL()),uT}var dT={},fT;function F3(){return fT||(fT=1,SL()),dT}var pT={},mT;function $3(){if(mT)return pT;mT=1;var i=nt();return i("metadata"),pT}var Bm,gT;function j3(){if(gT)return Bm;gT=1;var i=IL();return N3(),L3(),F3(),$3(),Bm=i,Bm}var vT={},Hm,yT;function OL(){if(yT)return Hm;yT=1;var i=yi(),e=qe(),t=i("Symbol"),n=t.keyFor,r=e(t.prototype.valueOf);return Hm=t.isRegisteredSymbol||function(o){try{return n(r(o))!==void 0}catch{return!1}},Hm}var _T;function z3(){if(_T)return vT;_T=1;var i=ce(),e=OL();return i({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),vT}var bT={},Um,wT;function PL(){if(wT)return Um;wT=1;for(var i=Ga(),e=yi(),t=qe(),n=kc(),r=Pt(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=t(s.prototype.valueOf),c=i("wks"),u=0,h=a(s),d=h.length;u<d;u++)try{var f=h[u];n(s[f])&&r(f)}catch{}return Um=function(m){if(o&&o(m))return!0;try{for(var g=l(m),v=0,y=a(c),b=y.length;v<b;v++)if(c[y[v]]==g)return!0}catch{}return!1},Um}var xT;function G3(){if(xT)return bT;xT=1;var i=ce(),e=PL();return i({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),bT}var ST={},ET;function q3(){if(ET)return ST;ET=1;var i=nt();return i("customMatcher"),ST}var CT={},TT;function W3(){if(TT)return CT;TT=1;var i=nt();return i("observable"),CT}var RT={},IT;function Y3(){if(IT)return RT;IT=1;var i=ce(),e=OL();return i({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),RT}var OT={},PT;function B3(){if(PT)return OT;PT=1;var i=ce(),e=PL();return i({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),OT}var DT={},AT;function H3(){if(AT)return DT;AT=1;var i=nt();return i("matcher"),DT}var MT={},kT;function U3(){if(kT)return MT;kT=1;var i=nt();return i("metadataKey"),MT}var NT={},LT;function V3(){if(LT)return NT;LT=1;var i=nt();return i("patternMatch"),NT}var FT={},$T;function X3(){if($T)return FT;$T=1;var i=nt();return i("replaceAll"),FT}var Vm,jT;function K3(){if(jT)return Vm;jT=1;var i=j3();return z3(),G3(),q3(),W3(),Y3(),B3(),H3(),U3(),V3(),X3(),Vm=i,Vm}var Xm,zT;function Z3(){return zT||(zT=1,Xm=K3()),Xm}var Q3=Z3(),Ru=xe(Q3),GT={},Km,qT;function J3(){if(qT)return Km;qT=1;var i=qe(),e=Wa(),t=Zr(),n=Xs(),r=i("".charAt),s=i("".charCodeAt),o=i("".slice),a=function(l){return function(c,u){var h=t(n(c)),d=e(u),f=h.length,p,m;return d<0||d>=f?l?"":void 0:(p=s(h,d),p<55296||p>56319||d+1===f||(m=s(h,d+1))<56320||m>57343?l?r(h,d):p:l?o(h,d,d+2):(p-55296<<10)+(m-56320)+65536)}};return Km={codeAt:a(!1),charAt:a(!0)},Km}var WT;function Id(){if(WT)return GT;WT=1;var i=J3().charAt,e=Zr(),t=jc(),n=iw(),r=nw(),s="String Iterator",o=t.set,a=t.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),u=c.string,h=c.index,d;return h>=u.length?r(void 0,!0):(d=i(u,h),c.index+=d.length,r(d,!1))}),GT}var Zm,YT;function eX(){if(YT)return Zm;YT=1,Qr(),Id(),EL();var i=Rd();return Zm=i.f("iterator"),Zm}var Qm,BT;function DL(){if(BT)return Qm;BT=1;var i=eX();return Jr(),Qm=i,Qm}var Jm,HT;function tX(){if(HT)return Jm;HT=1;var i=DL();return Jm=i,Jm}var eg,UT;function iX(){if(UT)return eg;UT=1;var i=tX();return eg=i,eg}var tg,VT;function nX(){return VT||(VT=1,tg=iX()),tg}var rX=nX(),sX=xe(rX);function ec(i){"@babel/helpers - typeof";return ec=typeof Ru=="function"&&typeof sX=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Ru=="function"&&e.constructor===Ru&&e!==Ru.prototype?"symbol":typeof e},ec(i)}var ig,XT;function oX(){if(XT)return ig;XT=1,CL();var i=Rd();return ig=i.f("toPrimitive"),ig}var ng,KT;function aX(){if(KT)return ng;KT=1;var i=oX();return ng=i,ng}var rg,ZT;function lX(){if(ZT)return rg;ZT=1;var i=aX();return rg=i,rg}var sg,QT;function cX(){if(QT)return sg;QT=1;var i=lX();return sg=i,sg}var og,JT;function uX(){return JT||(JT=1,og=cX()),og}var hX=uX(),dX=xe(hX);function fX(i,e){if(ec(i)!="object"||!i)return i;var t=i[dX];if(t!==void 0){var n=t.call(i,e);if(ec(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function pX(i){var e=fX(i,"string");return ec(e)=="symbol"?e:e+""}function $r(i,e,t){return(e=pX(e))in i?e3(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var eR={},ag,tR;function mX(){if(tR)return ag;tR=1;var i=qe(),e=dr(),t=Vt(),n=Ot(),r=Ya(),s=Pc(),o=Function,a=i([].concat),l=i([].join),c={},u=function(h,d,f){if(!n(c,d)){for(var p=[],m=0;m<d;m++)p[m]="a["+m+"]";c[d]=o("C,a","return new C("+l(p,",")+")")}return c[d](h,f)};return ag=s?o.bind:function(d){var f=e(this),p=f.prototype,m=r(arguments,1),g=function(){var y=a(m,r(arguments));return this instanceof g?u(f,y.length,y):f.apply(d,y)};return t(p)&&(g.prototype=p),g},ag}var iR;function gX(){if(iR)return eR;iR=1;var i=ce(),e=mX();return i({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),eR}var lg,nR;function ai(){if(nR)return lg;nR=1;var i=mt(),e=wt();return lg=function(t,n){var r=e[t+"Prototype"],s=r&&r[n];if(s)return s;var o=i[t],a=o&&o.prototype;return a&&a[n]},lg}var cg,rR;function vX(){if(rR)return cg;rR=1,gX();var i=ai();return cg=i("Function","bind"),cg}var ug,sR;function yX(){if(sR)return ug;sR=1;var i=It(),e=vX(),t=Function.prototype;return ug=function(n){var r=n.bind;return n===t||i(t,n)&&r===t.bind?e:r},ug}var hg,oR;function _X(){if(oR)return hg;oR=1;var i=yX();return hg=i,hg}var dg,aR;function bX(){return aR||(aR=1,dg=_X()),dg}var wX=bX(),AL=xe(wX),lR={},fg,cR;function xX(){if(cR)return fg;cR=1;var i=dr(),e=sn(),t=yd(),n=Xr(),r=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,u,h){var d=e(l),f=t(d),p=n(d);if(i(c),p===0&&u<2)throw new r(s);var m=a?p-1:0,g=a?-1:1;if(u<2)for(;;){if(m in f){h=f[m],m+=g;break}if(m+=g,a?m<0:p<=m)throw new r(s)}for(;a?m>=0:p>m;m+=g)m in f&&(h=c(h,f[m],m,d));return h}};return fg={left:o(!1),right:o(!0)},fg}var pg,uR;function Od(){if(uR)return pg;uR=1;var i=Le();return pg=function(e,t){var n=[][e];return!!n&&i(function(){n.call(null,t||function(){return 1},1)})},pg}var mg,hR;function ML(){if(hR)return mg;hR=1;var i=mt(),e=Fa(),t=hr(),n=function(r){return e.slice(0,r.length)===r};return mg=(function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":i.Bun&&typeof Bun.version=="string"?"BUN":i.Deno&&typeof Deno.version=="object"?"DENO":t(i.process)==="process"?"NODE":i.window&&i.document?"BROWSER":"REST"})(),mg}var gg,dR;function SX(){if(dR)return gg;dR=1;var i=ML();return gg=i==="NODE",gg}var fR;function EX(){if(fR)return lR;fR=1;var i=ce(),e=xX().left,t=Od(),n=Mc(),r=SX(),s=!r&&n>79&&n<83,o=s||!t("reduce");return i({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),lR}var vg,pR;function CX(){if(pR)return vg;pR=1,EX();var i=ai();return vg=i("Array","reduce"),vg}var yg,mR;function TX(){if(mR)return yg;mR=1;var i=It(),e=CX(),t=Array.prototype;return yg=function(n){var r=n.reduce;return n===t||i(t,n)&&r===t.reduce?e:r},yg}var _g,gR;function RX(){if(gR)return _g;gR=1;var i=TX();return _g=i,_g}var bg,vR;function IX(){return vR||(vR=1,bg=RX()),bg}var OX=IX(),PX=xe(OX),yR={},_R;function DX(){if(_R)return yR;_R=1;var i=ce(),e=Ba().filter,t=Nc(),n=t("filter");return i({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),yR}var wg,bR;function AX(){if(bR)return wg;bR=1,DX();var i=ai();return wg=i("Array","filter"),wg}var xg,wR;function MX(){if(wR)return xg;wR=1;var i=It(),e=AX(),t=Array.prototype;return xg=function(n){var r=n.filter;return n===t||i(t,n)&&r===t.filter?e:r},xg}var Sg,xR;function kX(){if(xR)return Sg;xR=1;var i=MX();return Sg=i,Sg}var Eg,SR;function NX(){return SR||(SR=1,Eg=kX()),Eg}var LX=NX(),Lo=xe(LX),ER={},CR;function FX(){if(CR)return ER;CR=1;var i=ce(),e=Ba().map,t=Nc(),n=t("map");return i({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),ER}var Cg,TR;function $X(){if(TR)return Cg;TR=1,FX();var i=ai();return Cg=i("Array","map"),Cg}var Tg,RR;function jX(){if(RR)return Tg;RR=1;var i=It(),e=$X(),t=Array.prototype;return Tg=function(n){var r=n.map;return n===t||i(t,n)&&r===t.map?e:r},Tg}var Rg,IR;function zX(){if(IR)return Rg;IR=1;var i=jX();return Rg=i,Rg}var Ig,OR;function GX(){return OR||(OR=1,Ig=zX()),Ig}var qX=GX(),Gn=xe(qX),Og,PR;function WX(){return PR||(PR=1,Og=IL()),Og}var YX=WX(),BX=xe(YX),DR={},AR;function HX(){if(AR)return DR;AR=1;var i=ce(),e=Ks(),t=pL(),n=Vt(),r=Q0(),s=Xr(),o=Rn(),a=xd(),l=Pt(),c=Nc(),u=Ya(),h=c("slice"),d=l("species"),f=Array,p=Math.max;return i({target:"Array",proto:!0,forced:!h},{slice:function(g,v){var y=o(this),b=s(y),_=r(g,b),w=r(v===void 0?b:v,b),C,E,x;if(e(y)&&(C=y.constructor,t(C)&&(C===f||e(C.prototype))?C=void 0:n(C)&&(C=C[d],C===null&&(C=void 0)),C===f||C===void 0))return u(y,_,w);for(E=new(C===void 0?f:C)(p(w-_,0)),x=0;_<w;_++,x++)_ in y&&a(E,x,y[_]);return E.length=x,E}}),DR}var Pg,MR;function UX(){if(MR)return Pg;MR=1,HX();var i=ai();return Pg=i("Array","slice"),Pg}var Dg,kR;function VX(){if(kR)return Dg;kR=1;var i=It(),e=UX(),t=Array.prototype;return Dg=function(n){var r=n.slice;return n===t||i(t,n)&&r===t.slice?e:r},Dg}var Ag,NR;function XX(){if(NR)return Ag;NR=1;var i=VX();return Ag=i,Ag}var Mg,LR;function KX(){return LR||(LR=1,Mg=XX()),Mg}var ZX=KX(),QX=xe(ZX),FR={},kg,$R;function kL(){if($R)return kg;$R=1;var i=yi(),e=qe(),t=Cd(),n=Td(),r=fr(),s=e([].concat);return kg=i("Reflect","ownKeys")||function(a){var l=t.f(r(a)),c=n.f;return c?s(l,c(a)):l},kg}var jR;function JX(){if(jR)return FR;jR=1;var i=ce(),e=kL();return i({target:"Reflect",stat:!0},{ownKeys:e}),FR}var Ng,zR;function eK(){if(zR)return Ng;zR=1,JX();var i=wt();return Ng=i.Reflect.ownKeys,Ng}var Lg,GR;function tK(){if(GR)return Lg;GR=1;var i=eK();return Lg=i,Lg}var Fg,qR;function iK(){return qR||(qR=1,Fg=tK()),Fg}var nK=iK(),rK=xe(nK),WR={},YR;function sK(){if(YR)return WR;YR=1;var i=ce(),e=Ks();return i({target:"Array",stat:!0},{isArray:e}),WR}var $g,BR;function oK(){if(BR)return $g;BR=1,sK();var i=wt();return $g=i.Array.isArray,$g}var jg,HR;function aK(){if(HR)return jg;HR=1;var i=oK();return jg=i,jg}var zg,UR;function lK(){return UR||(UR=1,zg=aK()),zg}var cK=lK(),cn=xe(cK),VR={},XR;function uK(){if(XR)return VR;XR=1;var i=ce(),e=sn(),t=Sd(),n=Le(),r=n(function(){t(1)});return i({target:"Object",stat:!0,forced:r},{keys:function(o){return t(e(o))}}),VR}var Gg,KR;function hK(){if(KR)return Gg;KR=1,uK();var i=wt();return Gg=i.Object.keys,Gg}var qg,ZR;function dK(){if(ZR)return qg;ZR=1;var i=hK();return qg=i,qg}var Wg,QR;function fK(){return QR||(QR=1,Wg=dK()),Wg}var pK=fK(),rw=xe(pK),JR={},Yg,eI;function mK(){if(eI)return Yg;eI=1;var i=Ba().forEach,e=Od(),t=e("forEach");return Yg=t?[].forEach:function(r){return i(this,r,arguments.length>1?arguments[1]:void 0)},Yg}var tI;function gK(){if(tI)return JR;tI=1;var i=ce(),e=mK();return i({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),JR}var Bg,iI;function vK(){if(iI)return Bg;iI=1,gK();var i=ai();return Bg=i("Array","forEach"),Bg}var Hg,nI;function yK(){if(nI)return Hg;nI=1;var i=vK();return Hg=i,Hg}var Ug,rI;function _K(){if(rI)return Ug;rI=1;var i=Kr(),e=Ot(),t=It(),n=yK(),r=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return Ug=function(o){var a=o.forEach;return o===r||t(r,o)&&a===r.forEach||e(s,i(o))?n:a},Ug}var Vg,sI;function bK(){return sI||(sI=1,Vg=_K()),Vg}var wK=bK(),tc=xe(wK),oI={},aI;function xK(){if(aI)return oI;aI=1;var i=ce(),e=qe(),t=Ks(),n=e([].reverse),r=[1,2];return i({target:"Array",proto:!0,forced:String(r)===String(r.reverse())},{reverse:function(){return t(this)&&(this.length=this.length),n(this)}}),oI}var Xg,lI;function SK(){if(lI)return Xg;lI=1,xK();var i=ai();return Xg=i("Array","reverse"),Xg}var Kg,cI;function EK(){if(cI)return Kg;cI=1;var i=It(),e=SK(),t=Array.prototype;return Kg=function(n){var r=n.reverse;return n===t||i(t,n)&&r===t.reverse?e:r},Kg}var Zg,uI;function CK(){if(uI)return Zg;uI=1;var i=EK();return Zg=i,Zg}var Qg,hI;function TK(){return hI||(hI=1,Qg=CK()),Qg}var RK=TK(),IK=xe(RK),dI={},Jg,fI;function OK(){if(fI)return Jg;fI=1;var i=gt(),e=Ks(),t=TypeError,n=Object.getOwnPropertyDescriptor,r=i&&!(function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}})();return Jg=r?function(s,o){if(e(s)&&!n(s,"length").writable)throw new t("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},Jg}var ev,pI;function NL(){if(pI)return ev;pI=1;var i=ja(),e=TypeError;return ev=function(t,n){if(!delete t[n])throw new e("Cannot delete property "+i(n)+" of "+i(t))},ev}var mI;function PK(){if(mI)return dI;mI=1;var i=ce(),e=sn(),t=Q0(),n=Wa(),r=Xr(),s=OK(),o=fL(),a=Z0(),l=xd(),c=NL(),u=Nc(),h=u("splice"),d=Math.max,f=Math.min;return i({target:"Array",proto:!0,forced:!h},{splice:function(m,g){var v=e(this),y=r(v),b=t(m,y),_=arguments.length,w,C,E,x,T,O;for(_===0?w=C=0:_===1?(w=0,C=y-b):(w=_-2,C=f(d(n(g),0),y-b)),o(y+w-C),E=a(v,C),x=0;x<C;x++)T=b+x,T in v&&l(E,x,v[T]);if(E.length=C,w<C){for(x=b;x<y-C;x++)T=x+C,O=x+w,T in v?v[O]=v[T]:c(v,O);for(x=y;x>y-C+w;x--)c(v,x-1)}else if(w>C)for(x=y-C;x>b;x--)T=x+C-1,O=x+w-1,T in v?v[O]=v[T]:c(v,O);for(x=0;x<w;x++)v[x+b]=arguments[x+2];return s(v,y-C+w),E}}),dI}var tv,gI;function DK(){if(gI)return tv;gI=1,PK();var i=ai();return tv=i("Array","splice"),tv}var iv,vI;function AK(){if(vI)return iv;vI=1;var i=It(),e=DK(),t=Array.prototype;return iv=function(n){var r=n.splice;return n===t||i(t,n)&&r===t.splice?e:r},iv}var nv,yI;function MK(){if(yI)return nv;yI=1;var i=AK();return nv=i,nv}var rv,_I;function kK(){return _I||(_I=1,rv=MK()),rv}var NK=kK(),LL=xe(NK),bI={},sv,wI;function LK(){if(wI)return sv;wI=1;var i=gt(),e=qe(),t=oi(),n=Le(),r=Sd(),s=Td(),o=H0(),a=sn(),l=yd(),c=Object.assign,u=Object.defineProperty,h=e([].concat);return sv=!c||n(function(){if(i&&c({b:1},c(u({},"a",{enumerable:!0,get:function(){u(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var d={},f={},p=Symbol("assign detection"),m="abcdefghijklmnopqrst";return d[p]=7,m.split("").forEach(function(g){f[g]=g}),c({},d)[p]!==7||r(c({},f)).join("")!==m})?function(f,p){for(var m=a(f),g=arguments.length,v=1,y=s.f,b=o.f;g>v;)for(var _=l(arguments[v++]),w=y?h(r(_),y(_)):r(_),C=w.length,E=0,x;C>E;)x=w[E++],(!i||t(b,_,x))&&(m[x]=_[x]);return m}:c,sv}var xI;function FK(){if(xI)return bI;xI=1;var i=ce(),e=LK();return i({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),bI}var ov,SI;function $K(){if(SI)return ov;SI=1,FK();var i=wt();return ov=i.Object.assign,ov}var av,EI;function jK(){if(EI)return av;EI=1;var i=$K();return av=i,av}var lv,CI;function zK(){return CI||(CI=1,lv=jK()),lv}var GK=zK(),qK=xe(GK),cv,TI;function WK(){if(TI)return cv;TI=1,mL();var i=ai();return cv=i("Array","concat"),cv}var uv,RI;function YK(){if(RI)return uv;RI=1;var i=It(),e=WK(),t=Array.prototype;return uv=function(n){var r=n.concat;return n===t||i(t,n)&&r===t.concat?e:r},uv}var hv,II;function BK(){if(II)return hv;II=1;var i=YK();return hv=i,hv}var dv,OI;function HK(){return OI||(OI=1,dv=BK()),dv}var UK=HK(),VK=xe(UK),PI={},DI;function XK(){if(DI)return PI;DI=1;var i=ce(),e=gt(),t=Fc();return i({target:"Object",stat:!0,sham:!e},{create:t}),PI}var fv,AI;function KK(){if(AI)return fv;AI=1,XK();var i=wt(),e=i.Object;return fv=function(n,r){return e.create(n,r)},fv}var pv,MI;function ZK(){if(MI)return pv;MI=1;var i=KK();return pv=i,pv}var mv,kI;function QK(){return kI||(kI=1,mv=ZK()),mv}var JK=QK(),e4=xe(JK),NI={},gv,LI;function t4(){if(LI)return gv;LI=1;var i=Wa(),e=Zr(),t=Xs(),n=RangeError;return gv=function(s){var o=e(t(this)),a="",l=i(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},gv}var vv,FI;function i4(){if(FI)return vv;FI=1;var i=qe(),e=dL(),t=Zr(),n=t4(),r=Xs(),s=i(n),o=i("".slice),a=Math.ceil,l=function(c){return function(u,h,d){var f=t(r(u)),p=e(h),m=f.length,g=d===void 0?" ":t(d),v,y;return p<=m||g===""?f:(v=p-m,y=s(g,a(v/g.length)),y.length>v&&(y=o(y,0,v)),c?f+y:y+f)}};return vv={start:l(!1),end:l(!0)},vv}var yv,$I;function n4(){if($I)return yv;$I=1;var i=qe(),e=Le(),t=i4().start,n=RangeError,r=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=i(o.getTime),c=i(o.getUTCDate),u=i(o.getUTCFullYear),h=i(o.getUTCHours),d=i(o.getUTCMilliseconds),f=i(o.getUTCMinutes),p=i(o.getUTCMonth),m=i(o.getUTCSeconds);return yv=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!r(l(this)))throw new n("Invalid time value");var v=this,y=u(v),b=d(v),_=y<0?"-":y>9999?"+":"";return _+t(s(y),_?6:4,0)+"-"+t(p(v)+1,2,0)+"-"+t(c(v),2,0)+"T"+t(h(v),2,0)+":"+t(f(v),2,0)+":"+t(m(v),2,0)+"."+t(b,3,0)+"Z"}:a,yv}var jI;function r4(){if(jI)return NI;jI=1;var i=ce(),e=oi(),t=sn(),n=aL(),r=n4(),s=hr(),o=Le(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return i({target:"Date",proto:!0,forced:a},{toJSON:function(c){var u=t(this),h=n(u,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in u)&&s(u)==="Date"?e(r,u):u.toISOString()}}),NI}var _v,zI;function s4(){if(zI)return _v;zI=1,r4(),bL();var i=wt(),e=vd();return i.JSON||(i.JSON={stringify:JSON.stringify}),_v=function(n,r,s){return e(i.JSON.stringify,null,arguments)},_v}var bv,GI;function o4(){if(GI)return bv;GI=1;var i=s4();return bv=i,bv}var wv,qI;function a4(){return qI||(qI=1,wv=o4()),wv}var l4=a4(),c4=xe(l4),WI={},YI={},xv,BI;function u4(){if(BI)return xv;BI=1;var i=TypeError;return xv=function(e,t){if(e<t)throw new i("Not enough arguments");return e},xv}var Sv,HI;function FL(){if(HI)return Sv;HI=1;var i=mt(),e=vd(),t=Rt(),n=ML(),r=Fa(),s=Ya(),o=u4(),a=i.Function,l=/MSIE .\./.test(r)||n==="BUN"&&(function(){var c=i.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")})();return Sv=function(c,u){var h=u?2:1;return l?function(d,f){var p=o(arguments.length,1)>h,m=t(d)?d:a(d),g=p?s(arguments,h):[],v=p?function(){e(m,this,g)}:m;return u?c(v,f):c(v)}:c},Sv}var UI;function h4(){if(UI)return YI;UI=1;var i=ce(),e=mt(),t=FL(),n=t(e.setInterval,!0);return i({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),YI}var VI={},XI;function d4(){if(XI)return VI;XI=1;var i=ce(),e=mt(),t=FL(),n=t(e.setTimeout,!0);return i({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),VI}var KI;function f4(){return KI||(KI=1,h4(),d4()),WI}var Ev,ZI;function p4(){if(ZI)return Ev;ZI=1,f4();var i=wt();return Ev=i.setTimeout,Ev}var Cv,QI;function m4(){return QI||(QI=1,Cv=p4()),Cv}var g4=m4(),v4=xe(g4),Tv={exports:{}},JI;function y4(){return JI||(JI=1,(function(i){function e(n){if(n)return t(n);this._callbacks=new Map}function t(n){return Object.assign(n,e.prototype),n._callbacks=new Map,n}e.prototype.on=function(n,r){const s=this._callbacks.get(n)??[];return s.push(r),this._callbacks.set(n,s),this},e.prototype.once=function(n,r){const s=(...o)=>{this.off(n,s),r.apply(this,o)};return s.fn=r,this.on(n,s),this},e.prototype.off=function(n,r){if(n===void 0&&r===void 0)return this._callbacks.clear(),this;if(r===void 0)return this._callbacks.delete(n),this;const s=this._callbacks.get(n);if(s){for(const[o,a]of s.entries())if(a===r||a.fn===r){s.splice(o,1);break}s.length===0?this._callbacks.delete(n):this._callbacks.set(n,s)}return this},e.prototype.emit=function(n,...r){const s=this._callbacks.get(n);if(s){const o=[...s];for(const a of o)a.apply(this,r)}return this},e.prototype.listeners=function(n){return this._callbacks.get(n)??[]},e.prototype.listenerCount=function(n){if(n)return this.listeners(n).length;let r=0;for(const s of this._callbacks.values())r+=s.length;return r},e.prototype.hasListeners=function(n){return this.listenerCount(n)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,i.exports=e})(Tv)),Tv.exports}var _4=y4(),b4=xe(_4);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function Qi(){return Qi=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Qi.apply(this,arguments)}function Ni(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}function Iu(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}var ab;typeof Object.assign!="function"?ab=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])}return t}:ab=Object.assign;var Ls=ab,eO=["","webkit","Moz","MS","ms","o"],w4=typeof document>"u"?{style:{}}:document.createElement("div"),x4="function",Fo=Math.round,Fs=Math.abs,sw=Date.now;function Pd(i,e){for(var t,n,r=e[0].toUpperCase()+e.slice(1),s=0;s<eO.length;){if(t=eO[s],n=t?t+r:e,n in i)return n;s++}}var Xn;typeof window>"u"?Xn={}:Xn=window;var $L=Pd(w4.style,"touchAction"),jL=$L!==void 0;function S4(){if(!jL)return!1;var i={},e=Xn.CSS&&Xn.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return i[t]=e?Xn.CSS.supports("touch-action",t):!0}),i}var zL="compute",GL="auto",lb="manipulation",Ss="none",ic="pan-x",nc="pan-y",Ou=S4(),E4=/mobile|tablet|ip(ad|hone|od)|android/i,qL="ontouchstart"in Xn,C4=Pd(Xn,"PointerEvent")!==void 0,T4=qL&&E4.test(navigator.userAgent),zc="touch",R4="pen",ow="mouse",I4="kinect",O4=25,Ht=1,Qs=2,ft=4,ri=8,vh=1,Gc=2,qc=4,Wc=8,ga=16,wn=Gc|qc,Es=Wc|ga,WL=wn|Es,YL=["x","y"],yh=["clientX","clientY"];function Kn(i,e,t){var n;if(i)if(i.forEach)i.forEach(e,t);else if(i.length!==void 0)for(n=0;n<i.length;)e.call(t,i[n],n,i),n++;else for(n in i)i.hasOwnProperty(n)&&e.call(t,i[n],n,i)}function Dd(i,e){return typeof i===x4?i.apply(e&&e[0]||void 0,e):i}function ys(i,e){return i.indexOf(e)>-1}function P4(i){if(ys(i,Ss))return Ss;var e=ys(i,ic),t=ys(i,nc);return e&&t?Ss:e||t?e?ic:nc:ys(i,lb)?lb:GL}var BL=(function(){function i(t,n){this.manager=t,this.set(n)}var e=i.prototype;return e.set=function(n){n===zL&&(n=this.compute()),jL&&this.manager.element.style&&Ou[n]&&(this.manager.element.style[$L]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return Kn(this.manager.recognizers,function(r){Dd(r.options.enable,[r])&&(n=n.concat(r.getTouchAction()))}),P4(n.join(" "))},e.preventDefaults=function(n){var r=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){r.preventDefault();return}var o=this.actions,a=ys(o,Ss)&&!Ou[Ss],l=ys(o,nc)&&!Ou[nc],c=ys(o,ic)&&!Ou[ic];if(a){var u=n.pointers.length===1,h=n.distance<2,d=n.deltaTime<250;if(u&&h&&d)return}if(!(c&&l)&&(a||l&&s&wn||c&&s&Es))return this.preventSrc(r)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},i})();function aw(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}function HL(i){var e=i.length;if(e===1)return{x:Fo(i[0].clientX),y:Fo(i[0].clientY)};for(var t=0,n=0,r=0;r<e;)t+=i[r].clientX,n+=i[r].clientY,r++;return{x:Fo(t/e),y:Fo(n/e)}}function tO(i){for(var e=[],t=0;t<i.pointers.length;)e[t]={clientX:Fo(i.pointers[t].clientX),clientY:Fo(i.pointers[t].clientY)},t++;return{timeStamp:sw(),pointers:e,center:HL(e),deltaX:i.deltaX,deltaY:i.deltaY}}function _h(i,e,t){t||(t=YL);var n=e[t[0]]-i[t[0]],r=e[t[1]]-i[t[1]];return Math.sqrt(n*n+r*r)}function cb(i,e,t){t||(t=YL);var n=e[t[0]]-i[t[0]],r=e[t[1]]-i[t[1]];return Math.atan2(r,n)*180/Math.PI}function UL(i,e){return i===e?vh:Fs(i)>=Fs(e)?i<0?Gc:qc:e<0?Wc:ga}function D4(i,e){var t=e.center,n=i.offsetDelta||{},r=i.prevDelta||{},s=i.prevInput||{};(e.eventType===Ht||s.eventType===ft)&&(r=i.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=i.offsetDelta={x:t.x,y:t.y}),e.deltaX=r.x+(t.x-n.x),e.deltaY=r.y+(t.y-n.y)}function VL(i,e,t){return{x:e/i||0,y:t/i||0}}function A4(i,e){return _h(e[0],e[1],yh)/_h(i[0],i[1],yh)}function M4(i,e){return cb(e[1],e[0],yh)+cb(i[1],i[0],yh)}function k4(i,e){var t=i.lastInterval||e,n=e.timeStamp-t.timeStamp,r,s,o,a;if(e.eventType!==ri&&(n>O4||t.velocity===void 0)){var l=e.deltaX-t.deltaX,c=e.deltaY-t.deltaY,u=VL(n,l,c);s=u.x,o=u.y,r=Fs(u.x)>Fs(u.y)?u.x:u.y,a=UL(l,c),i.lastInterval=e}else r=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;e.velocity=r,e.velocityX=s,e.velocityY=o,e.direction=a}function N4(i,e){var t=i.session,n=e.pointers,r=n.length;t.firstInput||(t.firstInput=tO(e)),r>1&&!t.firstMultiple?t.firstMultiple=tO(e):r===1&&(t.firstMultiple=!1);var s=t.firstInput,o=t.firstMultiple,a=o?o.center:s.center,l=e.center=HL(n);e.timeStamp=sw(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=cb(a,l),e.distance=_h(a,l),D4(t,e),e.offsetDirection=UL(e.deltaX,e.deltaY);var c=VL(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=Fs(c.x)>Fs(c.y)?c.x:c.y,e.scale=o?A4(o.pointers,n):1,e.rotation=o?M4(o.pointers,n):0,e.maxPointers=t.prevInput?e.pointers.length>t.prevInput.maxPointers?e.pointers.length:t.prevInput.maxPointers:e.pointers.length,k4(t,e);var u=i.element,h=e.srcEvent,d;h.composedPath?d=h.composedPath()[0]:h.path?d=h.path[0]:d=h.target,aw(d,u)&&(u=d),e.target=u}function L4(i,e,t){var n=t.pointers.length,r=t.changedPointers.length,s=e&Ht&&n-r===0,o=e&(ft|ri)&&n-r===0;t.isFirst=!!s,t.isFinal=!!o,s&&(i.session={}),t.eventType=e,N4(i,t),i.emit("hammer.input",t),i.recognize(t),i.session.prevInput=t}function rc(i){return i.trim().split(/\s+/g)}function Dl(i,e,t){Kn(rc(e),function(n){i.addEventListener(n,t,!1)})}function Al(i,e,t){Kn(rc(e),function(n){i.removeEventListener(n,t,!1)})}function iO(i){var e=i.ownerDocument||i;return e.defaultView||e.parentWindow||window}var Ua=(function(){function i(t,n){var r=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){Dd(t.options.enable,[t])&&r.handler(s)},this.init()}var e=i.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Dl(this.element,this.evEl,this.domHandler),this.evTarget&&Dl(this.target,this.evTarget,this.domHandler),this.evWin&&Dl(iO(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Al(this.element,this.evEl,this.domHandler),this.evTarget&&Al(this.target,this.evTarget,this.domHandler),this.evWin&&Al(iO(this.element),this.evWin,this.domHandler)},i})();function $s(i,e,t){if(i.indexOf&&!t)return i.indexOf(e);for(var n=0;n<i.length;){if(t&&i[n][t]==e||!t&&i[n]===e)return n;n++}return-1}var F4={pointerdown:Ht,pointermove:Qs,pointerup:ft,pointercancel:ri,pointerout:ri},$4={2:zc,3:R4,4:ow,5:I4},XL="pointerdown",KL="pointermove pointerup pointercancel";Xn.MSPointerEvent&&!Xn.PointerEvent&&(XL="MSPointerDown",KL="MSPointerMove MSPointerUp MSPointerCancel");var ZL=(function(i){Ni(e,i);function e(){var n,r=e.prototype;return r.evEl=XL,r.evWin=KL,n=i.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=e.prototype;return t.handler=function(r){var s=this.store,o=!1,a=r.type.toLowerCase().replace("ms",""),l=F4[a],c=$4[r.pointerType]||r.pointerType,u=c===zc,h=$s(s,r.pointerId,"pointerId");l&Ht&&(r.button===0||u)?h<0&&(s.push(r),h=s.length-1):l&(ft|ri)&&(o=!0),!(h<0)&&(s[h]=r,this.callback(this.manager,l,{pointers:s,changedPointers:[r],pointerType:c,srcEvent:r}),o&&s.splice(h,1))},e})(Ua);function sc(i){return Array.prototype.slice.call(i,0)}function lw(i,e,t){for(var n=[],r=[],s=0;s<i.length;){var o=e?i[s][e]:i[s];$s(r,o)<0&&n.push(i[s]),r[s]=o,s++}return t&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var j4={touchstart:Ht,touchmove:Qs,touchend:ft,touchcancel:ri},z4="touchstart touchmove touchend touchcancel",cw=(function(i){Ni(e,i);function e(){var n;return e.prototype.evTarget=z4,n=i.apply(this,arguments)||this,n.targetIds={},n}var t=e.prototype;return t.handler=function(r){var s=j4[r.type],o=G4.call(this,r,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:zc,srcEvent:r})},e})(Ua);function G4(i,e){var t=sc(i.touches),n=this.targetIds;if(e&(Ht|Qs)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var r,s,o=sc(i.changedTouches),a=[],l=this.target;if(s=t.filter(function(c){return aw(c.target,l)}),e===Ht)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;for(r=0;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(ft|ri)&&delete n[o[r].identifier],r++;if(a.length)return[lw(s.concat(a),"identifier",!0),a]}var q4={mousedown:Ht,mousemove:Qs,mouseup:ft},W4="mousedown",Y4="mousemove mouseup",uw=(function(i){Ni(e,i);function e(){var n,r=e.prototype;return r.evEl=W4,r.evWin=Y4,n=i.apply(this,arguments)||this,n.pressed=!1,n}var t=e.prototype;return t.handler=function(r){var s=q4[r.type];s&Ht&&r.button===0&&(this.pressed=!0),s&Qs&&r.which!==1&&(s=ft),this.pressed&&(s&ft&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[r],changedPointers:[r],pointerType:ow,srcEvent:r}))},e})(Ua),B4=2500,nO=25;function rO(i){var e=i.changedPointers,t=e[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},r=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=r.indexOf(n);a>-1&&r.splice(a,1)};setTimeout(s,B4)}}function H4(i,e){i&Ht?(this.primaryTouch=e.changedPointers[0].identifier,rO.call(this,e)):i&(ft|ri)&&rO.call(this,e)}function U4(i){for(var e=i.srcEvent.clientX,t=i.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(t-r.y);if(s<=nO&&o<=nO)return!0}return!1}var QL=(function(){var i=(function(e){Ni(t,e);function t(r,s){var o;return o=e.call(this,r,s)||this,o.handler=function(a,l,c){var u=c.pointerType===zc,h=c.pointerType===ow;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(u)H4.call(Iu(Iu(o)),l,c);else if(h&&U4.call(Iu(Iu(o)),c))return;o.callback(a,l,c)}},o.touch=new cw(o.manager,o.handler),o.mouse=new uw(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t})(Ua);return i})();function V4(i){var e,t=i.options.inputClass;return t?e=t:C4?e=ZL:T4?e=cw:qL?e=QL:e=uw,new e(i,L4)}function $o(i,e,t){return Array.isArray(i)?(Kn(i,t[e],t),!0):!1}var Bu=1,Di=2,va=4,jr=8,Zn=jr,oc=16,gn=32,X4=1;function K4(){return X4++}function Pu(i,e){var t=e.manager;return t?t.get(i):i}function sO(i){return i&oc?"cancel":i&jr?"end":i&va?"move":i&Di?"start":""}var Yc=(function(){function i(t){t===void 0&&(t={}),this.options=Qi({enable:!0},t),this.id=K4(),this.manager=null,this.state=Bu,this.simultaneous={},this.requireFail=[]}var e=i.prototype;return e.set=function(n){return Ls(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if($o(n,"recognizeWith",this))return this;var r=this.simultaneous;return n=Pu(n,this),r[n.id]||(r[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return $o(n,"dropRecognizeWith",this)?this:(n=Pu(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if($o(n,"requireFailure",this))return this;var r=this.requireFail;return n=Pu(n,this),$s(r,n)===-1&&(r.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if($o(n,"dropRequireFailure",this))return this;n=Pu(n,this);var r=$s(this.requireFail,n);return r>-1&&this.requireFail.splice(r,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var r=this,s=this.state;function o(a){r.manager.emit(a,n)}s<jr&&o(r.options.event+sO(s)),o(r.options.event),n.additionalEvent&&o(n.additionalEvent),s>=jr&&o(r.options.event+sO(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=gn},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(gn|Bu)))return!1;n++}return!0},e.recognize=function(n){var r=Ls({},n);if(!Dd(this.options.enable,[this,r])){this.reset(),this.state=gn;return}this.state&(Zn|oc|gn)&&(this.state=Bu),this.state=this.process(r),this.state&(Di|va|jr|oc)&&this.tryEmit(r)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},i})(),ub=(function(i){Ni(e,i);function e(n){var r;return n===void 0&&(n={}),r=i.call(this,Qi({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,r.pTime=!1,r.pCenter=!1,r._timer=null,r._input=null,r.count=0,r}var t=e.prototype;return t.getTouchAction=function(){return[lb]},t.process=function(r){var s=this,o=this.options,a=r.pointers.length===o.pointers,l=r.distance<o.threshold,c=r.deltaTime<o.time;if(this.reset(),r.eventType&Ht&&this.count===0)return this.failTimeout();if(l&&c&&a){if(r.eventType!==ft)return this.failTimeout();var u=this.pTime?r.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||_h(this.pCenter,r.center)<o.posThreshold;this.pTime=r.timeStamp,this.pCenter=r.center,!h||!u?this.count=1:this.count+=1,this._input=r;var d=this.count%o.taps;if(d===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=Zn,s.tryEmit()},o.interval),Di):Zn}return gn},t.failTimeout=function(){var r=this;return this._timer=setTimeout(function(){r.state=gn},this.options.interval),gn},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===Zn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e})(Yc),ya=(function(i){Ni(e,i);function e(n){return n===void 0&&(n={}),i.call(this,Qi({pointers:1},n))||this}var t=e.prototype;return t.attrTest=function(r){var s=this.options.pointers;return s===0||r.pointers.length===s},t.process=function(r){var s=this.state,o=r.eventType,a=s&(Di|va),l=this.attrTest(r);return a&&(o&ri||!l)?s|oc:a||l?o&ft?s|jr:s&Di?s|va:Di:gn},e})(Yc);function JL(i){return i===ga?"down":i===Wc?"up":i===Gc?"left":i===qc?"right":""}var hw=(function(i){Ni(e,i);function e(n){var r;return n===void 0&&(n={}),r=i.call(this,Qi({event:"pan",threshold:10,pointers:1,direction:WL},n))||this,r.pX=null,r.pY=null,r}var t=e.prototype;return t.getTouchAction=function(){var r=this.options.direction,s=[];return r&wn&&s.push(nc),r&Es&&s.push(ic),s},t.directionTest=function(r){var s=this.options,o=!0,a=r.distance,l=r.direction,c=r.deltaX,u=r.deltaY;return l&s.direction||(s.direction&wn?(l=c===0?vh:c<0?Gc:qc,o=c!==this.pX,a=Math.abs(r.deltaX)):(l=u===0?vh:u<0?Wc:ga,o=u!==this.pY,a=Math.abs(r.deltaY))),r.direction=l,o&&a>s.threshold&&l&s.direction},t.attrTest=function(r){return ya.prototype.attrTest.call(this,r)&&(this.state&Di||!(this.state&Di)&&this.directionTest(r))},t.emit=function(r){this.pX=r.deltaX,this.pY=r.deltaY;var s=JL(r.direction);s&&(r.additionalEvent=this.options.event+s),i.prototype.emit.call(this,r)},e})(ya),eF=(function(i){Ni(e,i);function e(n){return n===void 0&&(n={}),i.call(this,Qi({event:"swipe",threshold:10,velocity:.3,direction:wn|Es,pointers:1},n))||this}var t=e.prototype;return t.getTouchAction=function(){return hw.prototype.getTouchAction.call(this)},t.attrTest=function(r){var s=this.options.direction,o;return s&(wn|Es)?o=r.overallVelocity:s&wn?o=r.overallVelocityX:s&Es&&(o=r.overallVelocityY),i.prototype.attrTest.call(this,r)&&s&r.offsetDirection&&r.distance>this.options.threshold&&r.maxPointers===this.options.pointers&&Fs(o)>this.options.velocity&&r.eventType&ft},t.emit=function(r){var s=JL(r.offsetDirection);s&&this.manager.emit(this.options.event+s,r),this.manager.emit(this.options.event,r)},e})(ya),tF=(function(i){Ni(e,i);function e(n){return n===void 0&&(n={}),i.call(this,Qi({event:"pinch",threshold:0,pointers:2},n))||this}var t=e.prototype;return t.getTouchAction=function(){return[Ss]},t.attrTest=function(r){return i.prototype.attrTest.call(this,r)&&(Math.abs(r.scale-1)>this.options.threshold||this.state&Di)},t.emit=function(r){if(r.scale!==1){var s=r.scale<1?"in":"out";r.additionalEvent=this.options.event+s}i.prototype.emit.call(this,r)},e})(ya),iF=(function(i){Ni(e,i);function e(n){return n===void 0&&(n={}),i.call(this,Qi({event:"rotate",threshold:0,pointers:2},n))||this}var t=e.prototype;return t.getTouchAction=function(){return[Ss]},t.attrTest=function(r){return i.prototype.attrTest.call(this,r)&&(Math.abs(r.rotation)>this.options.threshold||this.state&Di)},e})(ya),nF=(function(i){Ni(e,i);function e(n){var r;return n===void 0&&(n={}),r=i.call(this,Qi({event:"press",pointers:1,time:251,threshold:9},n))||this,r._timer=null,r._input=null,r}var t=e.prototype;return t.getTouchAction=function(){return[GL]},t.process=function(r){var s=this,o=this.options,a=r.pointers.length===o.pointers,l=r.distance<o.threshold,c=r.deltaTime>o.time;if(this._input=r,!l||!a||r.eventType&(ft|ri)&&!c)this.reset();else if(r.eventType&Ht)this.reset(),this._timer=setTimeout(function(){s.state=Zn,s.tryEmit()},o.time);else if(r.eventType&ft)return Zn;return gn},t.reset=function(){clearTimeout(this._timer)},t.emit=function(r){this.state===Zn&&(r&&r.eventType&ft?this.manager.emit(this.options.event+"up",r):(this._input.timeStamp=sw(),this.manager.emit(this.options.event,this._input)))},e})(Yc),rF={domEvents:!1,touchAction:zL,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},oO=[[iF,{enable:!1}],[tF,{enable:!1},["rotate"]],[eF,{direction:wn}],[hw,{direction:wn},["swipe"]],[ub],[ub,{event:"doubletap",taps:2},["tap"]],[nF]],Z4=1,aO=2;function lO(i,e){var t=i.element;if(t.style){var n;Kn(i.options.cssProps,function(r,s){n=Pd(t.style,s),e?(i.oldCssProps[n]=t.style[n],t.style[n]=r):t.style[n]=i.oldCssProps[n]||""}),e||(i.oldCssProps={})}}function Q4(i,e){var t=document.createEvent("Event");t.initEvent(i,!0,!0),t.gesture=e,e.target.dispatchEvent(t)}var cO=(function(){function i(t,n){var r=this;this.options=Ls({},rF,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=V4(this),this.touchAction=new BL(this,this.options.touchAction),lO(this,!0),Kn(this.options.recognizers,function(s){var o=r.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=i.prototype;return e.set=function(n){return Ls(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?aO:Z4},e.recognize=function(n){var r=this.session;if(!r.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=r.curRecognizer;(!a||a&&a.state&Zn)&&(r.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],r.stopped!==aO&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Di|va|jr)&&(r.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof Yc)return n;for(var r=this.recognizers,s=0;s<r.length;s++)if(r[s].options.event===n)return r[s];return null},e.add=function(n){if($o(n,"add",this))return this;var r=this.get(n.options.event);return r&&this.remove(r),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if($o(n,"remove",this))return this;var r=this.get(n);if(n){var s=this.recognizers,o=$s(s,r);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,r){if(n===void 0||r===void 0)return this;var s=this.handlers;return Kn(rc(n),function(o){s[o]=s[o]||[],s[o].push(r)}),this},e.off=function(n,r){if(n===void 0)return this;var s=this.handlers;return Kn(rc(n),function(o){r?s[o]&&s[o].splice($s(s[o],r),1):delete s[o]}),this},e.emit=function(n,r){this.options.domEvents&&Q4(n,r);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){r.type=n,r.preventDefault=function(){r.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](r),o++}},e.destroy=function(){this.element&&lO(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},i})(),J4={touchstart:Ht,touchmove:Qs,touchend:ft,touchcancel:ri},e6="touchstart",t6="touchstart touchmove touchend touchcancel",i6=(function(i){Ni(e,i);function e(){var n,r=e.prototype;return r.evTarget=e6,r.evWin=t6,n=i.apply(this,arguments)||this,n.started=!1,n}var t=e.prototype;return t.handler=function(r){var s=J4[r.type];if(s===Ht&&(this.started=!0),!!this.started){var o=n6.call(this,r,s);s&(ft|ri)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:zc,srcEvent:r})}},e})(Ua);function n6(i,e){var t=sc(i.touches),n=sc(i.changedTouches);return e&(ft|ri)&&(t=lw(t.concat(n),"identifier",!0)),[t,n]}function sF(i,e,t){var n="DEPRECATED METHOD: "+e+`
`+t+` AT 
`;return function(){var r=new Error("get-stack-trace"),s=r&&r.stack?r.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),i.apply(this,arguments)}}var oF=sF(function(i,e,t){for(var n=Object.keys(e),r=0;r<n.length;)(!t||t&&i[n[r]]===void 0)&&(i[n[r]]=e[n[r]]),r++;return i},"extend","Use `assign`."),r6=sF(function(i,e){return oF(i,e,!0)},"merge","Use `assign`.");function s6(i,e,t){var n=e.prototype,r;r=i.prototype=Object.create(n),r.constructor=i,r._super=n,t&&Ls(r,t)}function uO(i,e){return function(){return i.apply(e,arguments)}}var o6=(function(){var i=function(t,n){return n===void 0&&(n={}),new cO(t,Qi({recognizers:oO.concat()},n))};return i.VERSION="2.0.17-rc",i.DIRECTION_ALL=WL,i.DIRECTION_DOWN=ga,i.DIRECTION_LEFT=Gc,i.DIRECTION_RIGHT=qc,i.DIRECTION_UP=Wc,i.DIRECTION_HORIZONTAL=wn,i.DIRECTION_VERTICAL=Es,i.DIRECTION_NONE=vh,i.DIRECTION_DOWN=ga,i.INPUT_START=Ht,i.INPUT_MOVE=Qs,i.INPUT_END=ft,i.INPUT_CANCEL=ri,i.STATE_POSSIBLE=Bu,i.STATE_BEGAN=Di,i.STATE_CHANGED=va,i.STATE_ENDED=jr,i.STATE_RECOGNIZED=Zn,i.STATE_CANCELLED=oc,i.STATE_FAILED=gn,i.Manager=cO,i.Input=Ua,i.TouchAction=BL,i.TouchInput=cw,i.MouseInput=uw,i.PointerEventInput=ZL,i.TouchMouseInput=QL,i.SingleTouchInput=i6,i.Recognizer=Yc,i.AttrRecognizer=ya,i.Tap=ub,i.Pan=hw,i.Swipe=eF,i.Pinch=tF,i.Rotate=iF,i.Press=nF,i.on=Dl,i.off=Al,i.each=Kn,i.merge=r6,i.extend=oF,i.bindFn=uO,i.assign=Ls,i.inherit=s6,i.bindFn=uO,i.prefixed=Pd,i.toArray=sc,i.inArray=$s,i.uniqueArray=lw,i.splitStr=rc,i.boolOrFn=Dd,i.hasParent=aw,i.addEventListeners=Dl,i.removeEventListeners=Al,i.defaults=Ls({},rF,{preset:oO}),i})();const aF=BX("DELETE");function a6(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return lF({},i,...t)}function lF(){const i=bh(...arguments);return uF(i),i}function bh(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];if(e.length<2)return e[0];if(e.length>2)return bh(lF(e[0],e[1]),...QX(e).call(e,2));const n=e[0],r=e[1];if(n instanceof Date&&r instanceof Date)return n.setTime(r.getTime()),n;for(const s of rK(r))Object.prototype.propertyIsEnumerable.call(r,s)&&(r[s]===aF?delete n[s]:n[s]!==null&&r[s]!==null&&typeof n[s]=="object"&&typeof r[s]=="object"&&!cn(n[s])&&!cn(r[s])?n[s]=bh(n[s],r[s]):n[s]=cF(r[s]));return n}function cF(i){return cn(i)?Gn(i).call(i,e=>cF(e)):typeof i=="object"&&i!==null?i instanceof Date?new Date(i.getTime()):bh({},i):i}function uF(i){for(const e of rw(i))i[e]===aF?delete i[e]:typeof i[e]=="object"&&i[e]!==null&&uF(i[e])}function l6(){const i=()=>{};return{on:i,off:i,destroy:i,emit:i,get(){return{set:i}}}}const c6=typeof window<"u"?window.Hammer||o6:function(){return l6()};function Wn(i){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:i,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const t=c6(this._dom.overlay);t.on("tap",AL(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{t.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];tc(n).call(n,r=>{t.on(r,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=r=>{u6(r.target,i)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=r=>{("key"in r?r.key==="Escape":r.keyCode===27)&&this.deactivate()}}b4(Wn.prototype);Wn.current=null;Wn.prototype.destroy=function(){this.deactivate();for(const t of IK(i=LL(e=this._cleanupQueue).call(e,0)).call(i)){var i,e;t()}};Wn.prototype.activate=function(){Wn.current&&Wn.current.deactivate(),Wn.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Wn.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Wn.prototype._onTapOverlay=function(i){this.activate(),i.srcEvent.stopPropagation()};function u6(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}var Rv,hO;function h6(){if(hO)return Rv;hO=1,wL();var i=wt();return Rv=i.Object.getOwnPropertySymbols,Rv}var Iv,dO;function d6(){if(dO)return Iv;dO=1;var i=h6();return Iv=i,Iv}var Ov,fO;function f6(){return fO||(fO=1,Ov=d6()),Ov}var p6=f6(),pO=xe(p6),Pv={exports:{}},mO={},gO;function m6(){if(gO)return mO;gO=1;var i=ce(),e=Le(),t=Rn(),n=bd().f,r=gt(),s=!r||e(function(){n(1)});return i({target:"Object",stat:!0,forced:s,sham:!r},{getOwnPropertyDescriptor:function(a,l){return n(t(a),l)}}),mO}var vO;function g6(){if(vO)return Pv.exports;vO=1,m6();var i=wt(),e=i.Object,t=Pv.exports=function(r,s){return e.getOwnPropertyDescriptor(r,s)};return e.getOwnPropertyDescriptor.sham&&(t.sham=!0),Pv.exports}var Dv,yO;function v6(){if(yO)return Dv;yO=1;var i=g6();return Dv=i,Dv}var Av,_O;function y6(){return _O||(_O=1,Av=v6()),Av}var _6=y6(),hF=xe(_6),bO={},wO;function b6(){if(wO)return bO;wO=1;var i=ce(),e=gt(),t=kL(),n=Rn(),r=bd(),s=xd();return i({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=r.f,u=t(l),h={},d=0,f,p;u.length>d;)p=c(l,f=u[d++]),p!==void 0&&s(h,f,p);return h}}),bO}var Mv,xO;function w6(){if(xO)return Mv;xO=1,b6();var i=wt();return Mv=i.Object.getOwnPropertyDescriptors,Mv}var kv,SO;function x6(){if(SO)return kv;SO=1;var i=w6();return kv=i,kv}var Nv,EO;function S6(){return EO||(EO=1,Nv=x6()),Nv}var E6=S6(),CO=xe(E6),Lv={exports:{}},TO={},RO;function C6(){if(RO)return TO;RO=1;var i=ce(),e=gt(),t=ew().f;return i({target:"Object",stat:!0,forced:Object.defineProperties!==t,sham:!e},{defineProperties:t}),TO}var IO;function T6(){if(IO)return Lv.exports;IO=1,C6();var i=wt(),e=i.Object,t=Lv.exports=function(r,s){return e.defineProperties(r,s)};return e.defineProperties.sham&&(t.sham=!0),Lv.exports}var Fv,OO;function R6(){if(OO)return Fv;OO=1;var i=T6();return Fv=i,Fv}var $v,PO;function I6(){return PO||(PO=1,$v=R6()),$v}var O6=I6(),P6=xe(O6),jv,DO;function D6(){return DO||(DO=1,jv=hL()),jv}var A6=D6(),M6=xe(A6),AO={},MO={},zv={exports:{}},Gv,kO;function k6(){if(kO)return Gv;kO=1;var i=Le();return Gv=i(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),Gv}var qv,NO;function N6(){if(NO)return qv;NO=1;var i=Le(),e=Vt(),t=hr(),n=k6(),r=Object.isExtensible,s=i(function(){});return qv=s||n?function(a){return!e(a)||n&&t(a)==="ArrayBuffer"?!1:r?r(a):!0}:r,qv}var Wv,LO;function L6(){if(LO)return Wv;LO=1;var i=Le();return Wv=!i(function(){return Object.isExtensible(Object.preventExtensions({}))}),Wv}var FO;function dF(){if(FO)return zv.exports;FO=1;var i=ce(),e=qe(),t=Lc(),n=Vt(),r=Ot(),s=ki().f,o=Cd(),a=vL(),l=N6(),c=_d(),u=L6(),h=!1,d=c("meta"),f=0,p=function(_){s(_,d,{value:{objectID:"O"+f++,weakData:{}}})},m=function(_,w){if(!n(_))return typeof _=="symbol"?_:(typeof _=="string"?"S":"P")+_;if(!r(_,d)){if(!l(_))return"F";if(!w)return"E";p(_)}return _[d].objectID},g=function(_,w){if(!r(_,d)){if(!l(_))return!0;if(!w)return!1;p(_)}return _[d].weakData},v=function(_){return u&&h&&l(_)&&!r(_,d)&&p(_),_},y=function(){b.enable=function(){},h=!0;var _=o.f,w=e([].splice),C={};C[d]=1,_(C).length&&(o.f=function(E){for(var x=_(E),T=0,O=x.length;T<O;T++)if(x[T]===d){w(x,T,1);break}return x},i({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},b=zv.exports={enable:y,fastKey:m,getWeakData:g,onFreeze:v};return t[d]=!0,zv.exports}var Yv,$O;function F6(){if($O)return Yv;$O=1;var i=Pt(),e=Ha(),t=i("iterator"),n=Array.prototype;return Yv=function(r){return r!==void 0&&(e.Array===r||n[t]===r)},Yv}var Bv,jO;function fF(){if(jO)return Bv;jO=1;var i=Kr(),e=U0(),t=Ac(),n=Ha(),r=Pt(),s=r("iterator");return Bv=function(o){if(!t(o))return e(o,s)||e(o,"@@iterator")||n[i(o)]},Bv}var Hv,zO;function pF(){if(zO)return Hv;zO=1;var i=oi(),e=dr(),t=fr(),n=ja(),r=fF(),s=TypeError;return Hv=function(o,a){var l=arguments.length<2?r(o):a;if(e(l))return t(i(l,o));throw new s(n(o)+" is not iterable")},Hv}var Uv,GO;function dw(){if(GO)return Uv;GO=1;var i=oi(),e=fr(),t=U0();return Uv=function(n,r,s){var o,a;e(n);try{if(o=t(n,"return"),!o){if(r==="throw")throw s;return s}o=i(o,n)}catch(l){a=!0,o=l}if(r==="throw")throw s;if(a)throw o;return e(o),s},Uv}var Vv,qO;function fw(){if(qO)return Vv;qO=1;var i=wd(),e=oi(),t=fr(),n=ja(),r=F6(),s=Xr(),o=It(),a=pF(),l=fF(),c=dw(),u=TypeError,h=function(f,p){this.stopped=f,this.result=p},d=h.prototype;return Vv=function(f,p,m){var g=m&&m.that,v=!!(m&&m.AS_ENTRIES),y=!!(m&&m.IS_RECORD),b=!!(m&&m.IS_ITERATOR),_=!!(m&&m.INTERRUPTED),w=i(p,g),C,E,x,T,O,D,A,k=function(z){return C&&c(C,"normal"),new h(!0,z)},N=function(z){return v?(t(z),_?w(z[0],z[1],k):w(z[0],z[1])):_?w(z,k):w(z)};if(y)C=f.iterator;else if(b)C=f;else{if(E=l(f),!E)throw new u(n(f)+" is not iterable");if(r(E)){for(x=0,T=s(f);T>x;x++)if(O=N(f[x]),O&&o(d,O))return O;return new h(!1)}C=a(f,E)}for(D=y?f.next:C.next;!(A=e(D,C)).done;){try{O=N(A.value)}catch(z){c(C,"throw",z)}if(typeof O=="object"&&O&&o(d,O))return O}return new h(!1)},Vv}var Xv,WO;function mF(){if(WO)return Xv;WO=1;var i=It(),e=TypeError;return Xv=function(t,n){if(i(n,t))return t;throw new e("Incorrect invocation")},Xv}var Kv,YO;function gF(){if(YO)return Kv;YO=1;var i=ce(),e=mt(),t=dF(),n=Le(),r=qa(),s=fw(),o=mF(),a=Rt(),l=Vt(),c=Ac(),u=Zs(),h=ki().f,d=Ba().forEach,f=gt(),p=jc(),m=p.set,g=p.getterFor;return Kv=function(v,y,b){var _=v.indexOf("Map")!==-1,w=v.indexOf("Weak")!==-1,C=_?"set":"add",E=e[v],x=E&&E.prototype,T={},O;if(!f||!a(E)||!(w||x.forEach&&!n(function(){new E().entries().next()})))O=b.getConstructor(y,v,_,C),t.enable();else{O=y(function(k,N){m(o(k,D),{type:v,collection:new E}),c(N)||s(N,k[C],{that:k,AS_ENTRIES:_})});var D=O.prototype,A=g(v);d(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(k){var N=k==="add"||k==="set";k in x&&!(w&&k==="clear")&&r(D,k,function(z,M){var $=A(this).collection;if(!N&&w&&!l(z))return k==="get"?void 0:!1;var P=$[k](z===0?0:z,M);return N?this:P})}),w||h(D,"size",{configurable:!0,get:function(){return A(this).collection.size}})}return u(O,v,!1,!0),T[v]=O,i({global:!0,forced:!0},T),w||b.setStrong(O,v,_),O},Kv}var Zv,BO;function $6(){if(BO)return Zv;BO=1;var i=$c();return Zv=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:i(e,r,t[r],n);return e},Zv}var Qv,HO;function j6(){if(HO)return Qv;HO=1;var i=yi(),e=tw(),t=Pt(),n=gt(),r=t("species");return Qv=function(s){var o=i(s);n&&o&&!o[r]&&e(o,r,{configurable:!0,get:function(){return this}})},Qv}var Jv,UO;function vF(){if(UO)return Jv;UO=1;var i=Fc(),e=tw(),t=$6(),n=wd(),r=mF(),s=Ac(),o=fw(),a=iw(),l=nw(),c=j6(),u=gt(),h=dF().fastKey,d=jc(),f=d.set,p=d.getterFor;return Jv={getConstructor:function(m,g,v,y){var b=m(function(x,T){r(x,_),f(x,{type:g,index:i(null),first:null,last:null,size:0}),u||(x.size=0),s(T)||o(T,x[y],{that:x,AS_ENTRIES:v})}),_=b.prototype,w=p(g),C=function(x,T,O){var D=w(x),A=E(x,T),k,N;return A?A.value=O:(D.last=A={index:N=h(T,!0),key:T,value:O,previous:k=D.last,next:null,removed:!1},D.first||(D.first=A),k&&(k.next=A),u?D.size++:x.size++,N!=="F"&&(D.index[N]=A)),x},E=function(x,T){var O=w(x),D=h(T),A;if(D!=="F")return O.index[D];for(A=O.first;A;A=A.next)if(A.key===T)return A};return t(_,{clear:function(){for(var T=this,O=w(T),D=O.first;D;)D.removed=!0,D.previous&&(D.previous=D.previous.next=null),D=D.next;O.first=O.last=null,O.index=i(null),u?O.size=0:T.size=0},delete:function(x){var T=this,O=w(T),D=E(T,x);if(D){var A=D.next,k=D.previous;delete O.index[D.index],D.removed=!0,k&&(k.next=A),A&&(A.previous=k),O.first===D&&(O.first=A),O.last===D&&(O.last=k),u?O.size--:T.size--}return!!D},forEach:function(T){for(var O=w(this),D=n(T,arguments.length>1?arguments[1]:void 0),A;A=A?A.next:O.first;)for(D(A.value,A.key,this);A&&A.removed;)A=A.previous},has:function(T){return!!E(this,T)}}),t(_,v?{get:function(T){var O=E(this,T);return O&&O.value},set:function(T,O){return C(this,T===0?0:T,O)}}:{add:function(T){return C(this,T=T===0?0:T,T)}}),u&&e(_,"size",{configurable:!0,get:function(){return w(this).size}}),b},setStrong:function(m,g,v){var y=g+" Iterator",b=p(g),_=p(y);a(m,g,function(w,C){f(this,{type:y,target:w,state:b(w),kind:C,last:null})},function(){for(var w=_(this),C=w.kind,E=w.last;E&&E.removed;)E=E.previous;return!w.target||!(w.last=E=E?E.next:w.state.first)?(w.target=null,l(void 0,!0)):l(C==="keys"?E.key:C==="values"?E.value:[E.key,E.value],!1)},v?"entries":"values",!v,!0),c(g)}},Jv}var VO;function z6(){if(VO)return MO;VO=1;var i=gF(),e=vF();return i("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},e),MO}var XO;function G6(){return XO||(XO=1,z6()),AO}var KO={},ey,ZO;function yF(){return ZO||(ZO=1,ey=function(i,e){return e===1?function(t,n){return t[i](n)}:function(t,n,r){return t[i](n,r)}}),ey}var ty,QO;function q6(){if(QO)return ty;QO=1;var i=yi(),e=yF(),t=i("Map");return ty={Map:t,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:t.prototype},ty}var JO;function W6(){if(JO)return KO;JO=1;var i=ce(),e=qe(),t=dr(),n=Xs(),r=fw(),s=q6(),o=za(),a=Le(),l=s.Map,c=s.has,u=s.get,h=s.set,d=e([].push),f=o||a(function(){return l.groupBy("ab",function(p){return p}).get("a").length!==1});return i({target:"Map",stat:!0,forced:o||f},{groupBy:function(m,g){n(m),t(g);var v=new l,y=0;return r(m,function(b){var _=g(b,y++);c(v,_)?d(u(v,_),b):h(v,_,[b])}),v}}),KO}var iy,eP;function Y6(){if(eP)return iy;eP=1,Qr(),G6(),W6(),Id();var i=wt();return iy=i.Map,iy}var ny,tP;function B6(){if(tP)return ny;tP=1;var i=Y6();return Jr(),ny=i,ny}var ry,iP;function H6(){return iP||(iP=1,ry=B6()),ry}var U6=H6(),_F=xe(U6),nP={},rP;function V6(){if(rP)return nP;rP=1;var i=ce(),e=Ba().some,t=Od(),n=t("some");return i({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),nP}var sy,sP;function X6(){if(sP)return sy;sP=1,V6();var i=ai();return sy=i("Array","some"),sy}var oy,oP;function K6(){if(oP)return oy;oP=1;var i=It(),e=X6(),t=Array.prototype;return oy=function(n){var r=n.some;return n===t||i(t,n)&&r===t.some?e:r},oy}var ay,aP;function Z6(){if(aP)return ay;aP=1;var i=K6();return ay=i,ay}var ly,lP;function Q6(){return lP||(lP=1,ly=Z6()),ly}var J6=Q6(),e8=xe(J6),cy,cP;function t8(){if(cP)return cy;cP=1,Qr();var i=ai();return cy=i("Array","keys"),cy}var uy,uP;function i8(){if(uP)return uy;uP=1;var i=t8();return uy=i,uy}var hy,hP;function n8(){if(hP)return hy;hP=1,Jr();var i=Kr(),e=Ot(),t=It(),n=i8(),r=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return hy=function(o){var a=o.keys;return o===r||t(r,o)&&a===r.keys||e(s,i(o))?n:a},hy}var dy,dP;function r8(){return dP||(dP=1,dy=n8()),dy}var s8=r8(),bo=xe(s8),fP={},fy,pP;function o8(){if(pP)return fy;pP=1;var i=Ya(),e=Math.floor,t=function(n,r){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&r(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),u=t(i(n,0,c),r),h=t(i(n,c),r),d=u.length,f=h.length,p=0,m=0;p<d||m<f;)n[p+m]=p<d&&m<f?r(u[p],h[m])<=0?u[p++]:h[m++]:p<d?u[p++]:h[m++];return n};return fy=t,fy}var py,mP;function a8(){if(mP)return py;mP=1;var i=Fa(),e=i.match(/firefox\/(\d+)/i);return py=!!e&&+e[1],py}var my,gP;function l8(){if(gP)return my;gP=1;var i=Fa();return my=/MSIE|Trident/.test(i),my}var gy,vP;function c8(){if(vP)return gy;vP=1;var i=Fa(),e=i.match(/AppleWebKit\/(\d+)\./);return gy=!!e&&+e[1],gy}var yP;function u8(){if(yP)return fP;yP=1;var i=ce(),e=qe(),t=dr(),n=sn(),r=Xr(),s=NL(),o=Zr(),a=Le(),l=o8(),c=Od(),u=a8(),h=l8(),d=Mc(),f=c8(),p=[],m=e(p.sort),g=e(p.push),v=a(function(){p.sort(void 0)}),y=a(function(){p.sort(null)}),b=c("sort"),_=!a(function(){if(d)return d<70;if(!(u&&u>3)){if(h)return!0;if(f)return f<603;var E="",x,T,O,D;for(x=65;x<76;x++){switch(T=String.fromCharCode(x),x){case 66:case 69:case 70:case 72:O=3;break;case 68:case 71:O=4;break;default:O=2}for(D=0;D<47;D++)p.push({k:T+D,v:O})}for(p.sort(function(A,k){return k.v-A.v}),D=0;D<p.length;D++)T=p[D].k.charAt(0),E.charAt(E.length-1)!==T&&(E+=T);return E!=="DGBEFHACIJK"}}),w=v||!y||!b||!_,C=function(E){return function(x,T){return T===void 0?-1:x===void 0?1:E!==void 0?+E(x,T)||0:o(x)>o(T)?1:-1}};return i({target:"Array",proto:!0,forced:w},{sort:function(x){x!==void 0&&t(x);var T=n(this);if(_)return x===void 0?m(T):m(T,x);var O=[],D=r(T),A,k;for(k=0;k<D;k++)k in T&&g(O,T[k]);for(l(O,C(x)),A=r(O),k=0;k<A;)T[k]=O[k++];for(;k<D;)s(T,k++);return T}}),fP}var vy,_P;function h8(){if(_P)return vy;_P=1,u8();var i=ai();return vy=i("Array","sort"),vy}var yy,bP;function d8(){if(bP)return yy;bP=1;var i=It(),e=h8(),t=Array.prototype;return yy=function(n){var r=n.sort;return n===t||i(t,n)&&r===t.sort?e:r},yy}var _y,wP;function f8(){if(wP)return _y;wP=1;var i=d8();return _y=i,_y}var by,xP;function p8(){return xP||(xP=1,by=f8()),by}var m8=p8(),hb=xe(m8),wy,SP;function g8(){if(SP)return wy;SP=1,Qr();var i=ai();return wy=i("Array","values"),wy}var xy,EP;function v8(){if(EP)return xy;EP=1;var i=g8();return xy=i,xy}var Sy,CP;function y8(){if(CP)return Sy;CP=1,Jr();var i=Kr(),e=Ot(),t=It(),n=v8(),r=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return Sy=function(o){var a=o.values;return o===r||t(r,o)&&a===r.values||e(s,i(o))?n:a},Sy}var Ey,TP;function _8(){return TP||(TP=1,Ey=y8()),Ey}var b8=_8(),RP=xe(b8),Cy,IP;function w8(){return IP||(IP=1,Cy=DL()),Cy}var x8=w8(),jo=xe(x8),Ty,OP;function S8(){if(OP)return Ty;OP=1,Qr();var i=ai();return Ty=i("Array","entries"),Ty}var Ry,PP;function E8(){if(PP)return Ry;PP=1;var i=S8();return Ry=i,Ry}var Iy,DP;function C8(){if(DP)return Iy;DP=1,Jr();var i=Kr(),e=Ot(),t=It(),n=E8(),r=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return Iy=function(o){var a=o.entries;return o===r||t(r,o)&&a===r.entries||e(s,i(o))?n:a},Iy}var Oy,AP;function T8(){return AP||(AP=1,Oy=C8()),Oy}var R8=T8(),I8=xe(R8);const Dt=[];for(let i=0;i<256;++i)Dt.push((i+256).toString(16).slice(1));function O8(i,e=0){return(Dt[i[e+0]]+Dt[i[e+1]]+Dt[i[e+2]]+Dt[i[e+3]]+"-"+Dt[i[e+4]]+Dt[i[e+5]]+"-"+Dt[i[e+6]]+Dt[i[e+7]]+"-"+Dt[i[e+8]]+Dt[i[e+9]]+"-"+Dt[i[e+10]]+Dt[i[e+11]]+Dt[i[e+12]]+Dt[i[e+13]]+Dt[i[e+14]]+Dt[i[e+15]]).toLowerCase()}let Py;const P8=new Uint8Array(16);function D8(){if(!Py){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Py=crypto.getRandomValues.bind(crypto)}return Py(P8)}const A8=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var MP={randomUUID:A8};function M8(i,e,t){i=i||{};const n=i.random??i.rng?.()??D8();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,O8(n)}function k8(i,e,t){return MP.randomUUID&&!i?MP.randomUUID():M8(i)}function kP(i){return typeof i=="string"||typeof i=="number"}let N8=class bF{constructor(e){$r(this,"_queue",[]),$r(this,"_timeout",null),$r(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,t){const n=new bF(t);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const r=[{name:"flush",original:void 0}];if(t&&t.replace)for(let s=0;s<t.replace.length;s++){const o=t.replace[s];r.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:r},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,t=this._extended.methods;for(let n=0;n<t.length;n++){const r=t[n];r.original?e[r.name]=r.original:delete e[r.name]}this._extended=null}}replace(e,t){const n=this,r=e[t];if(!r)throw new Error("Method "+t+" undefined");e[t]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];n.queue({args:o,fn:r,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=v4(()=>{this.flush()},this.delay))}flush(){var e,t;tc(e=LL(t=this._queue).call(t,0)).call(e,n=>{n.fn.apply(n.context||n.fn,n.args||[])})}},L8=class db{constructor(){$r(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),$r(this,"subscribe",db.prototype.on),$r(this,"unsubscribe",db.prototype.off)}_trigger(e,t,n){var r;if(e==="*")throw new Error("Cannot trigger event *");tc(r=[...this._subscribers[e],...this._subscribers["*"]]).call(r,s=>{s(e,t,n??null)})}on(e,t){typeof t=="function"&&this._subscribers[e].push(t)}off(e,t){var n;this._subscribers[e]=Lo(n=this._subscribers[e]).call(n,r=>r!==t)}};var NP={},LP={},FP;function F8(){if(FP)return LP;FP=1;var i=gF(),e=vF();return i("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},e),LP}var $P;function $8(){return $P||($P=1,F8()),NP}var jP={},Dy,zP;function Js(){if(zP)return Dy;zP=1;var i=ja(),e=TypeError;return Dy=function(t){if(typeof t=="object"&&"size"in t&&"has"in t&&"add"in t&&"delete"in t&&"keys"in t)return t;throw new e(i(t)+" is not a set")},Dy}var Ay,GP;function eo(){if(GP)return Ay;GP=1;var i=yi(),e=yF(),t=i("Set"),n=t.prototype;return Ay={Set:t,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},Ay}var My,qP;function to(){if(qP)return My;qP=1;var i=oi();return My=function(e,t,n){for(var r=n?e:e.iterator,s=e.next,o,a;!(o=i(s,r)).done;)if(a=t(o.value),a!==void 0)return a},My}var ky,WP;function Bc(){if(WP)return ky;WP=1;var i=to();return ky=function(e,t,n){return n?i(e.keys(),t,!0):e.forEach(t)},ky}var Ny,YP;function pw(){if(YP)return Ny;YP=1;var i=eo(),e=Bc(),t=i.Set,n=i.add;return Ny=function(r){var s=new t;return e(r,function(o){n(s,o)}),s},Ny}var Ly,BP;function Hc(){return BP||(BP=1,Ly=function(i){return i.size}),Ly}var Fy,HP;function j8(){return HP||(HP=1,Fy=function(i){return{iterator:i,next:i.next,done:!1}}),Fy}var $y,UP;function io(){if(UP)return $y;UP=1;var i=dr(),e=fr(),t=oi(),n=Wa(),r=j8(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(u,h){this.set=u,this.size=l(h,0),this.has=i(u.has),this.keys=i(u.keys)};return c.prototype={getIterator:function(){return r(e(t(this.keys,this.set)))},includes:function(u){return t(this.has,this.set,u)}},$y=function(u){e(u);var h=+u.size;if(h!==h)throw new a(s);var d=n(h);if(d<0)throw new o(s);return new c(u,d)},$y}var jy,VP;function z8(){if(VP)return jy;VP=1;var i=Js(),e=eo(),t=pw(),n=Hc(),r=io(),s=Bc(),o=to(),a=e.has,l=e.remove;return jy=function(u){var h=i(this),d=r(u),f=t(h);return n(h)<=d.size?s(h,function(p){d.includes(p)&&l(f,p)}):o(d.getIterator(),function(p){a(f,p)&&l(f,p)}),f},jy}var zy,XP;function no(){return XP||(XP=1,zy=function(){return!1}),zy}var KP;function G8(){if(KP)return jP;KP=1;var i=ce(),e=z8(),t=Le(),n=no(),r=!n("difference",function(o){return o.size===0}),s=r||t(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return i({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),jP}var ZP={},Gy,QP;function q8(){if(QP)return Gy;QP=1;var i=Js(),e=eo(),t=Hc(),n=io(),r=Bc(),s=to(),o=e.Set,a=e.add,l=e.has;return Gy=function(u){var h=i(this),d=n(u),f=new o;return t(h)>d.size?s(d.getIterator(),function(p){l(h,p)&&a(f,p)}):r(h,function(p){d.includes(p)&&a(f,p)}),f},Gy}var JP;function W8(){if(JP)return ZP;JP=1;var i=ce(),e=Le(),t=q8(),n=no(),r=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return i({target:"Set",proto:!0,real:!0,forced:r},{intersection:t}),ZP}var eD={},qy,tD;function Y8(){if(tD)return qy;tD=1;var i=Js(),e=eo().has,t=Hc(),n=io(),r=Bc(),s=to(),o=dw();return qy=function(l){var c=i(this),u=n(l);if(t(c)<=u.size)return r(c,function(d){if(u.includes(d))return!1},!0)!==!1;var h=u.getIterator();return s(h,function(d){if(e(c,d))return o(h,"normal",!1)})!==!1},qy}var iD;function B8(){if(iD)return eD;iD=1;var i=ce(),e=Y8(),t=no(),n=!t("isDisjointFrom",function(r){return!r});return i({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),eD}var nD={},Wy,rD;function H8(){if(rD)return Wy;rD=1;var i=Js(),e=Hc(),t=Bc(),n=io();return Wy=function(s){var o=i(this),a=n(s);return e(o)>a.size?!1:t(o,function(l){if(!a.includes(l))return!1},!0)!==!1},Wy}var sD;function U8(){if(sD)return nD;sD=1;var i=ce(),e=H8(),t=no(),n=!t("isSubsetOf",function(r){return r});return i({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),nD}var oD={},Yy,aD;function V8(){if(aD)return Yy;aD=1;var i=Js(),e=eo().has,t=Hc(),n=io(),r=to(),s=dw();return Yy=function(a){var l=i(this),c=n(a);if(t(l)<c.size)return!1;var u=c.getIterator();return r(u,function(h){if(!e(l,h))return s(u,"normal",!1)})!==!1},Yy}var lD;function X8(){if(lD)return oD;lD=1;var i=ce(),e=V8(),t=no(),n=!t("isSupersetOf",function(r){return!r});return i({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),oD}var cD={},By,uD;function K8(){if(uD)return By;uD=1;var i=Js(),e=eo(),t=pw(),n=io(),r=to(),s=e.add,o=e.has,a=e.remove;return By=function(c){var u=i(this),h=n(c).getIterator(),d=t(u);return r(h,function(f){o(u,f)?a(d,f):s(d,f)}),d},By}var Hy,hD;function wF(){return hD||(hD=1,Hy=function(i){try{var e=new Set,t={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[i](t);return n.size===1&&n.values().next().value===4}catch{return!1}}),Hy}var dD;function Z8(){if(dD)return cD;dD=1;var i=ce(),e=K8(),t=wF(),n=no(),r=!n("symmetricDifference")||!t("symmetricDifference");return i({target:"Set",proto:!0,real:!0,forced:r},{symmetricDifference:e}),cD}var fD={},Uy,pD;function Q8(){if(pD)return Uy;pD=1;var i=Js(),e=eo().add,t=pw(),n=io(),r=to();return Uy=function(o){var a=i(this),l=n(o).getIterator(),c=t(a);return r(l,function(u){e(c,u)}),c},Uy}var mD;function J8(){if(mD)return fD;mD=1;var i=ce(),e=Q8(),t=wF(),n=no(),r=!n("union")||!t("union");return i({target:"Set",proto:!0,real:!0,forced:r},{union:e}),fD}var Vy,gD;function eZ(){if(gD)return Vy;gD=1,Qr(),$8(),G8(),W8(),B8(),U8(),X8(),Z8(),J8(),Id();var i=wt();return Vy=i.Set,Vy}var Xy,vD;function tZ(){if(vD)return Xy;vD=1;var i=eZ();return Jr(),Xy=i,Xy}var Ky,yD;function iZ(){return yD||(yD=1,Ky=tZ()),Ky}var nZ=iZ(),Zy=xe(nZ),Qy,_D;function rZ(){if(_D)return Qy;_D=1,Qr(),Id();var i=pF();return Qy=i,Qy}var Jy,bD;function sZ(){if(bD)return Jy;bD=1;var i=rZ();return Jr(),Jy=i,Jy}var e_,wD;function oZ(){if(wD)return e_;wD=1;var i=sZ();return e_=i,e_}var t_,xD;function aZ(){if(xD)return t_;xD=1;var i=oZ();return t_=i,t_}var i_,SD;function lZ(){return SD||(SD=1,i_=aZ()),i_}var n_,ED;function cZ(){return ED||(ED=1,n_=lZ()),n_}var uZ=cZ(),r_=xe(uZ);let CD=class Sl{constructor(e){this._pairs=e}*[jo](){for(const[e,t]of this._pairs)yield[e,t]}*entries(){for(const[e,t]of this._pairs)yield[e,t]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return Gn(e=[...this._pairs]).call(e,t=>t[0])}toItemArray(){var e;return Gn(e=[...this._pairs]).call(e,t=>t[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=e4(null);for(const[t,n]of this._pairs)e[t]=n;return e}toMap(){return new _F(this._pairs)}toIdSet(){return new Zy(this.toIdArray())}toItemSet(){return new Zy(this.toItemArray())}cache(){return new Sl([...this._pairs])}distinct(e){const t=new Zy;for(const[n,r]of this._pairs)t.add(e(r,n));return t}filter(e){const t=this._pairs;return new Sl({*[jo](){for(const[n,r]of t)e(r,n)&&(yield[n,r])}})}forEach(e){for(const[t,n]of this._pairs)e(n,t)}map(e){const t=this._pairs;return new Sl({*[jo](){for(const[n,r]of t)yield[n,e(r,n)]}})}max(e){const t=r_(this._pairs);let n=t.next();if(n.done)return null;let r=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=t.next()).done;){const[o,a]=n.value,l=e(a,o);l>s&&(s=l,r=a)}return r}min(e){const t=r_(this._pairs);let n=t.next();if(n.done)return null;let r=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=t.next()).done;){const[o,a]=n.value,l=e(a,o);l<s&&(s=l,r=a)}return r}reduce(e,t){for(const[n,r]of this._pairs)t=e(t,r,n);return t}sort(e){return new Sl({[jo]:()=>{var t;return r_(hb(t=[...this._pairs]).call(t,(n,r)=>{let[s,o]=n,[a,l]=r;return e(o,l,s,a)}))}})}};function TD(i,e){var t=rw(i);if(pO){var n=pO(i);e&&(n=Lo(n).call(n,function(r){return hF(i,r).enumerable})),t.push.apply(t,n)}return t}function RD(i){for(var e=1;e<arguments.length;e++){var t,n,r=arguments[e]!=null?arguments[e]:{};e%2?tc(t=TD(Object(r),!0)).call(t,function(s){$r(i,s,r[s])}):CO?P6(i,CO(r)):tc(n=TD(Object(r))).call(n,function(s){M6(i,s,hF(r,s))})}return i}function hZ(i,e){return i[e]==null&&(i[e]=k8()),i}let ID=class extends L8{get idProp(){return this._idProp}constructor(e,t){super(),$r(this,"_queue",null),e&&!cn(e)&&(t=e,e=[]),this._options=t||{},this._data=new _F,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(t)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=N8.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,t){const n=[];let r;if(cn(e)){const s=Gn(e).call(e,o=>o[this._idProp]);if(e8(s).call(s,o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,a=e.length;o<a;o++)r=this._addItem(e[o]),n.push(r)}else if(e&&typeof e=="object")r=this._addItem(e),n.push(r);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},t),n}update(e,t){const n=[],r=[],s=[],o=[],a=this._idProp,l=c=>{const u=c[a];if(u!=null&&this._data.has(u)){const h=c,d=qK({},this._data.get(u)),f=this._updateItem(h);r.push(f),o.push(h),s.push(d)}else{const h=this._addItem(c);n.push(h)}};if(cn(e))for(let c=0,u=e.length;c<u;c++)e[c]&&typeof e[c]=="object"?l(e[c]):console.warn("Ignoring input item, which is not an object at index "+c);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},t),r.length){const c={items:r,oldData:s,data:o};this._trigger("update",c,t)}return VK(n).call(n,r)}updateOnly(e,t){var n;cn(e)||(e=[e]);const r=Gn(n=Gn(e).call(e,s=>{const o=this._data.get(s[this._idProp]);if(o==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:o,update:s}})).call(n,s=>{let{oldData:o,update:a}=s;const l=o[this._idProp],c=a6(o,a);return this._data.set(l,c),{id:l,oldData:o,updatedData:c}});if(r.length){const s={items:Gn(r).call(r,o=>o.id),oldData:Gn(r).call(r,o=>o.oldData),data:Gn(r).call(r,o=>o.updatedData)};return this._trigger("update",s,t),s.items}else return[]}get(e,t){let n,r,s;kP(e)?(n=e,s=t):cn(e)?(r=e,s=t):s=e;const o=s&&s.returnType==="Object"?"Object":"Array",a=s&&Lo(s),l=[];let c,u,h;if(n!=null)c=this._data.get(n),c&&a&&!a(c)&&(c=void 0);else if(r!=null)for(let f=0,p=r.length;f<p;f++)c=this._data.get(r[f]),c!=null&&(!a||a(c))&&l.push(c);else{var d;u=[...bo(d=this._data).call(d)];for(let f=0,p=u.length;f<p;f++)h=u[f],c=this._data.get(h),c!=null&&(!a||a(c))&&l.push(c)}if(s&&s.order&&n==null&&this._sort(l,s.order),s&&s.fields){const f=s.fields;if(n!=null&&c!=null)c=this._filterFields(c,f);else for(let p=0,m=l.length;p<m;p++)l[p]=this._filterFields(l[p],f)}if(o=="Object"){const f={};for(let p=0,m=l.length;p<m;p++){const g=l[p],v=g[this._idProp];f[v]=g}return f}else return n!=null?c??null:l}getIds(e){const t=this._data,n=e&&Lo(e),r=e&&e.order,s=[...bo(t).call(t)],o=[];if(n)if(r){const a=[];for(let l=0,c=s.length;l<c;l++){const u=s[l],h=this._data.get(u);h!=null&&n(h)&&a.push(h)}this._sort(a,r);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],u=this._data.get(c);u!=null&&n(u)&&o.push(u[this._idProp])}else if(r){const a=[];for(let l=0,c=s.length;l<c;l++){const u=s[l];a.push(t.get(u))}this._sort(a,r);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],u=t.get(c);u!=null&&o.push(u[this._idProp])}return o}getDataSet(){return this}forEach(e,t){const n=t&&Lo(t),r=this._data,s=[...bo(r).call(r)];if(t&&t.order){const o=this.get(t);for(let a=0,l=o.length;a<l;a++){const c=o[a],u=c[this._idProp];e(c,u)}}else for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._data.get(l);c!=null&&(!n||n(c))&&e(c,l)}}map(e,t){const n=t&&Lo(t),r=[],s=this._data,o=[...bo(s).call(s)];for(let a=0,l=o.length;a<l;a++){const c=o[a],u=this._data.get(c);u!=null&&(!n||n(u))&&r.push(e(u,c))}return t&&t.order&&this._sort(r,t.order),r}_filterFields(e,t){var n;return e&&PX(n=cn(t)?t:rw(t)).call(n,(r,s)=>(r[s]=e[s],r),{})}_sort(e,t){if(typeof t=="string"){const n=t;hb(e).call(e,(r,s)=>{const o=r[n],a=s[n];return o>a?1:o<a?-1:0})}else if(typeof t=="function")hb(e).call(e,t);else throw new TypeError("Order must be a function or a string")}remove(e,t){const n=[],r=[],s=cn(e)?e:[e];for(let o=0,a=s.length;o<a;o++){const l=this._remove(s[o]);if(l){const c=l[this._idProp];c!=null&&(n.push(c),r.push(l))}}return n.length&&this._trigger("remove",{items:n,oldData:r},t),n}_remove(e){let t;if(kP(e)?t=e:e&&typeof e=="object"&&(t=e[this._idProp]),t!=null&&this._data.has(t)){const n=this._data.get(t)||null;return this._data.delete(t),--this.length,n}return null}clear(e){var t;const n=[...bo(t=this._data).call(t)],r=[];for(let s=0,o=n.length;s<o;s++)r.push(this._data.get(n[s]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:r},e),n}max(e){let t=null,n=null;for(const s of RP(r=this._data).call(r)){var r;const o=s[e];typeof o=="number"&&(n==null||o>n)&&(t=s,n=o)}return t||null}min(e){let t=null,n=null;for(const s of RP(r=this._data).call(r)){var r;const o=s[e];typeof o=="number"&&(n==null||o<n)&&(t=s,n=o)}return t||null}distinct(e){const t=this._data,n=[...bo(t).call(t)],r=[];let s=0;for(let o=0,a=n.length;o<a;o++){const l=n[o],u=t.get(l)[e];let h=!1;for(let d=0;d<s;d++)if(r[d]==u){h=!0;break}!h&&u!==void 0&&(r[s]=u,s++)}return r}_addItem(e){const t=hZ(e,this._idProp),n=t[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,t),++this.length,n}_updateItem(e){const t=e[this._idProp];if(t==null)throw new Error("Cannot update item: item has no id (item: "+c4(e)+")");const n=this._data.get(t);if(!n)throw new Error("Cannot update item: no item with id "+t+" found");return this._data.set(t,RD(RD({},n),e)),t}stream(e){if(e){const n=this._data;return new CD({*[jo](){for(const r of e){const s=n.get(r);s!=null&&(yield[r,s])}}})}else{var t;return new CD({[jo]:AL(t=I8(this._data)).call(t,this._data)})}}};//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var xF;function B(){return xF.apply(null,arguments)}function dZ(i){xF=i}function Ji(i){return i instanceof Array||Object.prototype.toString.call(i)==="[object Array]"}function Cs(i){return i!=null&&Object.prototype.toString.call(i)==="[object Object]"}function Oe(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function mw(i){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(i).length===0;var e;for(e in i)if(Oe(i,e))return!1;return!0}function Xt(i){return i===void 0}function lr(i){return typeof i=="number"||Object.prototype.toString.call(i)==="[object Number]"}function Uc(i){return i instanceof Date||Object.prototype.toString.call(i)==="[object Date]"}function SF(i,e){var t=[],n,r=i.length;for(n=0;n<r;++n)t.push(e(i[n],n));return t}function kr(i,e){for(var t in e)Oe(e,t)&&(i[t]=e[t]);return Oe(e,"toString")&&(i.toString=e.toString),Oe(e,"valueOf")&&(i.valueOf=e.valueOf),i}function In(i,e,t,n){return HF(i,e,t,n,!0).utc()}function fZ(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function fe(i){return i._pf==null&&(i._pf=fZ()),i._pf}var fb;Array.prototype.some?fb=Array.prototype.some:fb=function(i){var e=Object(this),t=e.length>>>0,n;for(n=0;n<t;n++)if(n in e&&i.call(this,e[n],n,e))return!0;return!1};function gw(i){var e=null,t=!1,n=i._d&&!isNaN(i._d.getTime());if(n&&(e=fe(i),t=fb.call(e.parsedDateParts,function(r){return r!=null}),n=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),i._strict&&(n=n&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(i))i._isValid=n;else return n;return i._isValid}function Ad(i){var e=In(NaN);return i!=null?kr(fe(e),i):fe(e).userInvalidated=!0,e}var OD=B.momentProperties=[],s_=!1;function vw(i,e){var t,n,r,s=OD.length;if(Xt(e._isAMomentObject)||(i._isAMomentObject=e._isAMomentObject),Xt(e._i)||(i._i=e._i),Xt(e._f)||(i._f=e._f),Xt(e._l)||(i._l=e._l),Xt(e._strict)||(i._strict=e._strict),Xt(e._tzm)||(i._tzm=e._tzm),Xt(e._isUTC)||(i._isUTC=e._isUTC),Xt(e._offset)||(i._offset=e._offset),Xt(e._pf)||(i._pf=fe(e)),Xt(e._locale)||(i._locale=e._locale),s>0)for(t=0;t<s;t++)n=OD[t],r=e[n],Xt(r)||(i[n]=r);return i}function Vc(i){vw(this,i),this._d=new Date(i._d!=null?i._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),s_===!1&&(s_=!0,B.updateOffset(this),s_=!1)}function en(i){return i instanceof Vc||i!=null&&i._isAMomentObject!=null}function EF(i){B.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+i)}function Li(i,e){var t=!0;return kr(function(){if(B.deprecationHandler!=null&&B.deprecationHandler(null,i),t){var n=[],r,s,o,a=arguments.length;for(s=0;s<a;s++){if(r="",typeof arguments[s]=="object"){r+=`
[`+s+"] ";for(o in arguments[0])Oe(arguments[0],o)&&(r+=o+": "+arguments[0][o]+", ");r=r.slice(0,-2)}else r=arguments[s];n.push(r)}EF(i+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var PD={};function CF(i,e){B.deprecationHandler!=null&&B.deprecationHandler(i,e),PD[i]||(EF(e),PD[i]=!0)}B.suppressDeprecationWarnings=!1;B.deprecationHandler=null;function On(i){return typeof Function<"u"&&i instanceof Function||Object.prototype.toString.call(i)==="[object Function]"}function pZ(i){var e,t;for(t in i)Oe(i,t)&&(e=i[t],On(e)?this[t]=e:this["_"+t]=e);this._config=i,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function pb(i,e){var t=kr({},i),n;for(n in e)Oe(e,n)&&(Cs(i[n])&&Cs(e[n])?(t[n]={},kr(t[n],i[n]),kr(t[n],e[n])):e[n]!=null?t[n]=e[n]:delete t[n]);for(n in i)Oe(i,n)&&!Oe(e,n)&&Cs(i[n])&&(t[n]=kr({},t[n]));return t}function yw(i){i!=null&&this.set(i)}var mb;Object.keys?mb=Object.keys:mb=function(i){var e,t=[];for(e in i)Oe(i,e)&&t.push(e);return t};var mZ={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function gZ(i,e,t){var n=this._calendar[i]||this._calendar.sameElse;return On(n)?n.call(e,t):n}function En(i,e,t){var n=""+Math.abs(i),r=e-n.length,s=i>=0;return(s?t?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}var _w=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Du=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,o_={},ta={};function ee(i,e,t,n){var r=n;typeof n=="string"&&(r=function(){return this[n]()}),i&&(ta[i]=r),e&&(ta[e[0]]=function(){return En(r.apply(this,arguments),e[1],e[2])}),t&&(ta[t]=function(){return this.localeData().ordinal(r.apply(this,arguments),i)})}function vZ(i){return i.match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"")}function yZ(i){var e=i.match(_w),t,n;for(t=0,n=e.length;t<n;t++)ta[e[t]]?e[t]=ta[e[t]]:e[t]=vZ(e[t]);return function(r){var s="",o;for(o=0;o<n;o++)s+=On(e[o])?e[o].call(r,i):e[o];return s}}function Hu(i,e){return i.isValid()?(e=TF(e,i.localeData()),o_[e]=o_[e]||yZ(e),o_[e](i)):i.localeData().invalidDate()}function TF(i,e){var t=5;function n(r){return e.longDateFormat(r)||r}for(Du.lastIndex=0;t>=0&&Du.test(i);)i=i.replace(Du,n),Du.lastIndex=0,t-=1;return i}var _Z={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function bZ(i){var e=this._longDateFormat[i],t=this._longDateFormat[i.toUpperCase()];return e||!t?e:(this._longDateFormat[i]=t.match(_w).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[i])}var wZ="Invalid date";function xZ(){return this._invalidDate}var SZ="%d",EZ=/\d{1,2}/;function CZ(i){return this._ordinal.replace("%d",i)}var TZ={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function RZ(i,e,t,n){var r=this._relativeTime[t];return On(r)?r(i,e,t,n):r.replace(/%d/i,i)}function IZ(i,e){var t=this._relativeTime[i>0?"future":"past"];return On(t)?t(e):t.replace(/%s/i,e)}var DD={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Fi(i){return typeof i=="string"?DD[i]||DD[i.toLowerCase()]:void 0}function bw(i){var e={},t,n;for(n in i)Oe(i,n)&&(t=Fi(n),t&&(e[t]=i[n]));return e}var OZ={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function PZ(i){var e=[],t;for(t in i)Oe(i,t)&&e.push({unit:t,priority:OZ[t]});return e.sort(function(n,r){return n.priority-r.priority}),e}var RF=/\d/,_i=/\d\d/,IF=/\d{3}/,ww=/\d{4}/,Md=/[+-]?\d{6}/,Ue=/\d\d?/,OF=/\d\d\d\d?/,PF=/\d\d\d\d\d\d?/,kd=/\d{1,3}/,xw=/\d{1,4}/,Nd=/[+-]?\d{1,6}/,Va=/\d+/,Ld=/[+-]?\d+/,DZ=/Z|[+-]\d\d:?\d\d/gi,Fd=/Z|[+-]\d\d(?::?\d\d)?/gi,AZ=/[+-]?\d+(\.\d{1,3})?/,Xc=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Xa=/^[1-9]\d?/,Sw=/^([1-9]\d|\d)/,wh;wh={};function K(i,e,t){wh[i]=On(e)?e:function(n,r){return n&&t?t:e}}function MZ(i,e){return Oe(wh,i)?wh[i](e._strict,e._locale):new RegExp(kZ(i))}function kZ(i){return Qn(i.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,s){return t||n||r||s}))}function Qn(i){return i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ci(i){return i<0?Math.ceil(i)||0:Math.floor(i)}function we(i){var e=+i,t=0;return e!==0&&isFinite(e)&&(t=Ci(e)),t}var gb={};function je(i,e){var t,n=e,r;for(typeof i=="string"&&(i=[i]),lr(e)&&(n=function(s,o){o[e]=we(s)}),r=i.length,t=0;t<r;t++)gb[i[t]]=n}function Kc(i,e){je(i,function(t,n,r,s){r._w=r._w||{},e(t,r._w,r,s)})}function NZ(i,e,t){e!=null&&Oe(gb,i)&&gb[i](e,t._a,t,i)}function $d(i){return i%4===0&&i%100!==0||i%400===0}var jt=0,Yn=1,fn=2,_t=3,Bi=4,Bn=5,_s=6,LZ=7,FZ=8;ee("Y",0,0,function(){var i=this.year();return i<=9999?En(i,4):"+"+i});ee(0,["YY",2],0,function(){return this.year()%100});ee(0,["YYYY",4],0,"year");ee(0,["YYYYY",5],0,"year");ee(0,["YYYYYY",6,!0],0,"year");K("Y",Ld);K("YY",Ue,_i);K("YYYY",xw,ww);K("YYYYY",Nd,Md);K("YYYYYY",Nd,Md);je(["YYYYY","YYYYYY"],jt);je("YYYY",function(i,e){e[jt]=i.length===2?B.parseTwoDigitYear(i):we(i)});je("YY",function(i,e){e[jt]=B.parseTwoDigitYear(i)});je("Y",function(i,e){e[jt]=parseInt(i,10)});function Ml(i){return $d(i)?366:365}B.parseTwoDigitYear=function(i){return we(i)+(we(i)>68?1900:2e3)};var DF=Ka("FullYear",!0);function $Z(){return $d(this.year())}function Ka(i,e){return function(t){return t!=null?(AF(this,i,t),B.updateOffset(this,e),this):ac(this,i)}}function ac(i,e){if(!i.isValid())return NaN;var t=i._d,n=i._isUTC;switch(e){case"Milliseconds":return n?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return n?t.getUTCSeconds():t.getSeconds();case"Minutes":return n?t.getUTCMinutes():t.getMinutes();case"Hours":return n?t.getUTCHours():t.getHours();case"Date":return n?t.getUTCDate():t.getDate();case"Day":return n?t.getUTCDay():t.getDay();case"Month":return n?t.getUTCMonth():t.getMonth();case"FullYear":return n?t.getUTCFullYear():t.getFullYear();default:return NaN}}function AF(i,e,t){var n,r,s,o,a;if(!(!i.isValid()||isNaN(t))){switch(n=i._d,r=i._isUTC,e){case"Milliseconds":return void(r?n.setUTCMilliseconds(t):n.setMilliseconds(t));case"Seconds":return void(r?n.setUTCSeconds(t):n.setSeconds(t));case"Minutes":return void(r?n.setUTCMinutes(t):n.setMinutes(t));case"Hours":return void(r?n.setUTCHours(t):n.setHours(t));case"Date":return void(r?n.setUTCDate(t):n.setDate(t));case"FullYear":break;default:return}s=t,o=i.month(),a=i.date(),a=a===29&&o===1&&!$d(s)?28:a,r?n.setUTCFullYear(s,o,a):n.setFullYear(s,o,a)}}function jZ(i){return i=Fi(i),On(this[i])?this[i]():this}function zZ(i,e){if(typeof i=="object"){i=bw(i);var t=PZ(i),n,r=t.length;for(n=0;n<r;n++)this[t[n].unit](i[t[n].unit])}else if(i=Fi(i),On(this[i]))return this[i](e);return this}function GZ(i,e){return(i%e+e)%e}var ct;Array.prototype.indexOf?ct=Array.prototype.indexOf:ct=function(i){var e;for(e=0;e<this.length;++e)if(this[e]===i)return e;return-1};function Ew(i,e){if(isNaN(i)||isNaN(e))return NaN;var t=GZ(e,12);return i+=(e-t)/12,t===1?$d(i)?29:28:31-t%7%2}ee("M",["MM",2],"Mo",function(){return this.month()+1});ee("MMM",0,0,function(i){return this.localeData().monthsShort(this,i)});ee("MMMM",0,0,function(i){return this.localeData().months(this,i)});K("M",Ue,Xa);K("MM",Ue,_i);K("MMM",function(i,e){return e.monthsShortRegex(i)});K("MMMM",function(i,e){return e.monthsRegex(i)});je(["M","MM"],function(i,e){e[Yn]=we(i)-1});je(["MMM","MMMM"],function(i,e,t,n){var r=t._locale.monthsParse(i,n,t._strict);r!=null?e[Yn]=r:fe(t).invalidMonth=i});var qZ="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),MF="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),kF=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,WZ=Xc,YZ=Xc;function BZ(i,e){return i?Ji(this._months)?this._months[i.month()]:this._months[(this._months.isFormat||kF).test(e)?"format":"standalone"][i.month()]:Ji(this._months)?this._months:this._months.standalone}function HZ(i,e){return i?Ji(this._monthsShort)?this._monthsShort[i.month()]:this._monthsShort[kF.test(e)?"format":"standalone"][i.month()]:Ji(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function UZ(i,e,t){var n,r,s,o=i.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)s=In([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(s,"").toLocaleLowerCase();return t?e==="MMM"?(r=ct.call(this._shortMonthsParse,o),r!==-1?r:null):(r=ct.call(this._longMonthsParse,o),r!==-1?r:null):e==="MMM"?(r=ct.call(this._shortMonthsParse,o),r!==-1?r:(r=ct.call(this._longMonthsParse,o),r!==-1?r:null)):(r=ct.call(this._longMonthsParse,o),r!==-1?r:(r=ct.call(this._shortMonthsParse,o),r!==-1?r:null))}function VZ(i,e,t){var n,r,s;if(this._monthsParseExact)return UZ.call(this,i,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(r=In([2e3,n]),t&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!t&&!this._monthsParse[n]&&(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[n].test(i))return n;if(t&&e==="MMM"&&this._shortMonthsParse[n].test(i))return n;if(!t&&this._monthsParse[n].test(i))return n}}function NF(i,e){if(!i.isValid())return i;if(typeof e=="string"){if(/^\d+$/.test(e))e=we(e);else if(e=i.localeData().monthsParse(e),!lr(e))return i}var t=e,n=i.date();return n=n<29?n:Math.min(n,Ew(i.year(),t)),i._isUTC?i._d.setUTCMonth(t,n):i._d.setMonth(t,n),i}function LF(i){return i!=null?(NF(this,i),B.updateOffset(this,!0),this):ac(this,"Month")}function XZ(){return Ew(this.year(),this.month())}function KZ(i){return this._monthsParseExact?(Oe(this,"_monthsRegex")||FF.call(this),i?this._monthsShortStrictRegex:this._monthsShortRegex):(Oe(this,"_monthsShortRegex")||(this._monthsShortRegex=WZ),this._monthsShortStrictRegex&&i?this._monthsShortStrictRegex:this._monthsShortRegex)}function ZZ(i){return this._monthsParseExact?(Oe(this,"_monthsRegex")||FF.call(this),i?this._monthsStrictRegex:this._monthsRegex):(Oe(this,"_monthsRegex")||(this._monthsRegex=YZ),this._monthsStrictRegex&&i?this._monthsStrictRegex:this._monthsRegex)}function FF(){function i(l,c){return c.length-l.length}var e=[],t=[],n=[],r,s,o,a;for(r=0;r<12;r++)s=In([2e3,r]),o=Qn(this.monthsShort(s,"")),a=Qn(this.months(s,"")),e.push(o),t.push(a),n.push(a),n.push(o);e.sort(i),t.sort(i),n.sort(i),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function QZ(i,e,t,n,r,s,o){var a;return i<100&&i>=0?(a=new Date(i+400,e,t,n,r,s,o),isFinite(a.getFullYear())&&a.setFullYear(i)):a=new Date(i,e,t,n,r,s,o),a}function lc(i){var e,t;return i<100&&i>=0?(t=Array.prototype.slice.call(arguments),t[0]=i+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(i)):e=new Date(Date.UTC.apply(null,arguments)),e}function xh(i,e,t){var n=7+e-t,r=(7+lc(i,0,n).getUTCDay()-e)%7;return-r+n-1}function $F(i,e,t,n,r){var s=(7+t-n)%7,o=xh(i,n,r),a=1+7*(e-1)+s+o,l,c;return a<=0?(l=i-1,c=Ml(l)+a):a>Ml(i)?(l=i+1,c=a-Ml(i)):(l=i,c=a),{year:l,dayOfYear:c}}function cc(i,e,t){var n=xh(i.year(),e,t),r=Math.floor((i.dayOfYear()-n-1)/7)+1,s,o;return r<1?(o=i.year()-1,s=r+Jn(o,e,t)):r>Jn(i.year(),e,t)?(s=r-Jn(i.year(),e,t),o=i.year()+1):(o=i.year(),s=r),{week:s,year:o}}function Jn(i,e,t){var n=xh(i,e,t),r=xh(i+1,e,t);return(Ml(i)-n+r)/7}ee("w",["ww",2],"wo","week");ee("W",["WW",2],"Wo","isoWeek");K("w",Ue,Xa);K("ww",Ue,_i);K("W",Ue,Xa);K("WW",Ue,_i);Kc(["w","ww","W","WW"],function(i,e,t,n){e[n.substr(0,1)]=we(i)});function JZ(i){return cc(i,this._week.dow,this._week.doy).week}var e9={dow:0,doy:6};function t9(){return this._week.dow}function i9(){return this._week.doy}function n9(i){var e=this.localeData().week(this);return i==null?e:this.add((i-e)*7,"d")}function r9(i){var e=cc(this,1,4).week;return i==null?e:this.add((i-e)*7,"d")}ee("d",0,"do","day");ee("dd",0,0,function(i){return this.localeData().weekdaysMin(this,i)});ee("ddd",0,0,function(i){return this.localeData().weekdaysShort(this,i)});ee("dddd",0,0,function(i){return this.localeData().weekdays(this,i)});ee("e",0,0,"weekday");ee("E",0,0,"isoWeekday");K("d",Ue);K("e",Ue);K("E",Ue);K("dd",function(i,e){return e.weekdaysMinRegex(i)});K("ddd",function(i,e){return e.weekdaysShortRegex(i)});K("dddd",function(i,e){return e.weekdaysRegex(i)});Kc(["dd","ddd","dddd"],function(i,e,t,n){var r=t._locale.weekdaysParse(i,n,t._strict);r!=null?e.d=r:fe(t).invalidWeekday=i});Kc(["d","e","E"],function(i,e,t,n){e[n]=we(i)});function s9(i,e){return typeof i!="string"?i:isNaN(i)?(i=e.weekdaysParse(i),typeof i=="number"?i:null):parseInt(i,10)}function o9(i,e){return typeof i=="string"?e.weekdaysParse(i)%7||7:isNaN(i)?null:i}function Cw(i,e){return i.slice(e,7).concat(i.slice(0,e))}var a9="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),jF="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),l9="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),c9=Xc,u9=Xc,h9=Xc;function d9(i,e){var t=Ji(this._weekdays)?this._weekdays:this._weekdays[i&&i!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return i===!0?Cw(t,this._week.dow):i?t[i.day()]:t}function f9(i){return i===!0?Cw(this._weekdaysShort,this._week.dow):i?this._weekdaysShort[i.day()]:this._weekdaysShort}function p9(i){return i===!0?Cw(this._weekdaysMin,this._week.dow):i?this._weekdaysMin[i.day()]:this._weekdaysMin}function m9(i,e,t){var n,r,s,o=i.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)s=In([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(s,"").toLocaleLowerCase();return t?e==="dddd"?(r=ct.call(this._weekdaysParse,o),r!==-1?r:null):e==="ddd"?(r=ct.call(this._shortWeekdaysParse,o),r!==-1?r:null):(r=ct.call(this._minWeekdaysParse,o),r!==-1?r:null):e==="dddd"?(r=ct.call(this._weekdaysParse,o),r!==-1||(r=ct.call(this._shortWeekdaysParse,o),r!==-1)?r:(r=ct.call(this._minWeekdaysParse,o),r!==-1?r:null)):e==="ddd"?(r=ct.call(this._shortWeekdaysParse,o),r!==-1||(r=ct.call(this._weekdaysParse,o),r!==-1)?r:(r=ct.call(this._minWeekdaysParse,o),r!==-1?r:null)):(r=ct.call(this._minWeekdaysParse,o),r!==-1||(r=ct.call(this._weekdaysParse,o),r!==-1)?r:(r=ct.call(this._shortWeekdaysParse,o),r!==-1?r:null))}function g9(i,e,t){var n,r,s;if(this._weekdaysParseExact)return m9.call(this,i,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(r=In([2e3,1]).day(n),t&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(s="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(s.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[n].test(i))return n;if(t&&e==="ddd"&&this._shortWeekdaysParse[n].test(i))return n;if(t&&e==="dd"&&this._minWeekdaysParse[n].test(i))return n;if(!t&&this._weekdaysParse[n].test(i))return n}}function v9(i){if(!this.isValid())return i!=null?this:NaN;var e=ac(this,"Day");return i!=null?(i=s9(i,this.localeData()),this.add(i-e,"d")):e}function y9(i){if(!this.isValid())return i!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return i==null?e:this.add(i-e,"d")}function _9(i){if(!this.isValid())return i!=null?this:NaN;if(i!=null){var e=o9(i,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function b9(i){return this._weekdaysParseExact?(Oe(this,"_weekdaysRegex")||Tw.call(this),i?this._weekdaysStrictRegex:this._weekdaysRegex):(Oe(this,"_weekdaysRegex")||(this._weekdaysRegex=c9),this._weekdaysStrictRegex&&i?this._weekdaysStrictRegex:this._weekdaysRegex)}function w9(i){return this._weekdaysParseExact?(Oe(this,"_weekdaysRegex")||Tw.call(this),i?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Oe(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=u9),this._weekdaysShortStrictRegex&&i?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function x9(i){return this._weekdaysParseExact?(Oe(this,"_weekdaysRegex")||Tw.call(this),i?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Oe(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=h9),this._weekdaysMinStrictRegex&&i?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Tw(){function i(u,h){return h.length-u.length}var e=[],t=[],n=[],r=[],s,o,a,l,c;for(s=0;s<7;s++)o=In([2e3,1]).day(s),a=Qn(this.weekdaysMin(o,"")),l=Qn(this.weekdaysShort(o,"")),c=Qn(this.weekdays(o,"")),e.push(a),t.push(l),n.push(c),r.push(a),r.push(l),r.push(c);e.sort(i),t.sort(i),n.sort(i),r.sort(i),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Rw(){return this.hours()%12||12}function S9(){return this.hours()||24}ee("H",["HH",2],0,"hour");ee("h",["hh",2],0,Rw);ee("k",["kk",2],0,S9);ee("hmm",0,0,function(){return""+Rw.apply(this)+En(this.minutes(),2)});ee("hmmss",0,0,function(){return""+Rw.apply(this)+En(this.minutes(),2)+En(this.seconds(),2)});ee("Hmm",0,0,function(){return""+this.hours()+En(this.minutes(),2)});ee("Hmmss",0,0,function(){return""+this.hours()+En(this.minutes(),2)+En(this.seconds(),2)});function zF(i,e){ee(i,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}zF("a",!0);zF("A",!1);function GF(i,e){return e._meridiemParse}K("a",GF);K("A",GF);K("H",Ue,Sw);K("h",Ue,Xa);K("k",Ue,Xa);K("HH",Ue,_i);K("hh",Ue,_i);K("kk",Ue,_i);K("hmm",OF);K("hmmss",PF);K("Hmm",OF);K("Hmmss",PF);je(["H","HH"],_t);je(["k","kk"],function(i,e,t){var n=we(i);e[_t]=n===24?0:n});je(["a","A"],function(i,e,t){t._isPm=t._locale.isPM(i),t._meridiem=i});je(["h","hh"],function(i,e,t){e[_t]=we(i),fe(t).bigHour=!0});je("hmm",function(i,e,t){var n=i.length-2;e[_t]=we(i.substr(0,n)),e[Bi]=we(i.substr(n)),fe(t).bigHour=!0});je("hmmss",function(i,e,t){var n=i.length-4,r=i.length-2;e[_t]=we(i.substr(0,n)),e[Bi]=we(i.substr(n,2)),e[Bn]=we(i.substr(r)),fe(t).bigHour=!0});je("Hmm",function(i,e,t){var n=i.length-2;e[_t]=we(i.substr(0,n)),e[Bi]=we(i.substr(n))});je("Hmmss",function(i,e,t){var n=i.length-4,r=i.length-2;e[_t]=we(i.substr(0,n)),e[Bi]=we(i.substr(n,2)),e[Bn]=we(i.substr(r))});function E9(i){return(i+"").toLowerCase().charAt(0)==="p"}var C9=/[ap]\.?m?\.?/i,T9=Ka("Hours",!0);function R9(i,e,t){return i>11?t?"pm":"PM":t?"am":"AM"}var qF={calendar:mZ,longDateFormat:_Z,invalidDate:wZ,ordinal:SZ,dayOfMonthOrdinalParse:EZ,relativeTime:TZ,months:qZ,monthsShort:MF,week:e9,weekdays:a9,weekdaysMin:l9,weekdaysShort:jF,meridiemParse:C9},Je={},dl={},uc;function I9(i,e){var t,n=Math.min(i.length,e.length);for(t=0;t<n;t+=1)if(i[t]!==e[t])return t;return n}function AD(i){return i&&i.toLowerCase().replace("_","-")}function O9(i){for(var e=0,t,n,r,s;e<i.length;){for(s=AD(i[e]).split("-"),t=s.length,n=AD(i[e+1]),n=n?n.split("-"):null;t>0;){if(r=jd(s.slice(0,t).join("-")),r)return r;if(n&&n.length>=t&&I9(s,n)>=t-1)break;t--}e++}return uc}function P9(i){return!!(i&&i.match("^[^/\\\\]*$"))}function jd(i){var e=null,t;if(Je[i]===void 0&&typeof module<"u"&&module&&module.exports&&P9(i))try{e=uc._abbr,t=require,t("./locale/"+i),zr(e)}catch{Je[i]=null}return Je[i]}function zr(i,e){var t;return i&&(Xt(e)?t=pr(i):t=Iw(i,e),t?uc=t:typeof console<"u"&&console.warn&&console.warn("Locale "+i+" not found. Did you forget to load it?")),uc._abbr}function Iw(i,e){if(e!==null){var t,n=qF;if(e.abbr=i,Je[i]!=null)CF("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Je[i]._config;else if(e.parentLocale!=null)if(Je[e.parentLocale]!=null)n=Je[e.parentLocale]._config;else if(t=jd(e.parentLocale),t!=null)n=t._config;else return dl[e.parentLocale]||(dl[e.parentLocale]=[]),dl[e.parentLocale].push({name:i,config:e}),null;return Je[i]=new yw(pb(n,e)),dl[i]&&dl[i].forEach(function(r){Iw(r.name,r.config)}),zr(i),Je[i]}else return delete Je[i],null}function D9(i,e){if(e!=null){var t,n,r=qF;Je[i]!=null&&Je[i].parentLocale!=null?Je[i].set(pb(Je[i]._config,e)):(n=jd(i),n!=null&&(r=n._config),e=pb(r,e),n==null&&(e.abbr=i),t=new yw(e),t.parentLocale=Je[i],Je[i]=t),zr(i)}else Je[i]!=null&&(Je[i].parentLocale!=null?(Je[i]=Je[i].parentLocale,i===zr()&&zr(i)):Je[i]!=null&&delete Je[i]);return Je[i]}function pr(i){var e;if(i&&i._locale&&i._locale._abbr&&(i=i._locale._abbr),!i)return uc;if(!Ji(i)){if(e=jd(i),e)return e;i=[i]}return O9(i)}function A9(){return mb(Je)}function Ow(i){var e,t=i._a;return t&&fe(i).overflow===-2&&(e=t[Yn]<0||t[Yn]>11?Yn:t[fn]<1||t[fn]>Ew(t[jt],t[Yn])?fn:t[_t]<0||t[_t]>24||t[_t]===24&&(t[Bi]!==0||t[Bn]!==0||t[_s]!==0)?_t:t[Bi]<0||t[Bi]>59?Bi:t[Bn]<0||t[Bn]>59?Bn:t[_s]<0||t[_s]>999?_s:-1,fe(i)._overflowDayOfYear&&(e<jt||e>fn)&&(e=fn),fe(i)._overflowWeeks&&e===-1&&(e=LZ),fe(i)._overflowWeekday&&e===-1&&(e=FZ),fe(i).overflow=e),i}var M9=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,k9=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,N9=/Z|[+-]\d\d(?::?\d\d)?/,Au=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],a_=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],L9=/^\/?Date\((-?\d+)/i,F9=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,$9={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function WF(i){var e,t,n=i._i,r=M9.exec(n)||k9.exec(n),s,o,a,l,c=Au.length,u=a_.length;if(r){for(fe(i).iso=!0,e=0,t=c;e<t;e++)if(Au[e][1].exec(r[1])){o=Au[e][0],s=Au[e][2]!==!1;break}if(o==null){i._isValid=!1;return}if(r[3]){for(e=0,t=u;e<t;e++)if(a_[e][1].exec(r[3])){a=(r[2]||" ")+a_[e][0];break}if(a==null){i._isValid=!1;return}}if(!s&&a!=null){i._isValid=!1;return}if(r[4])if(N9.exec(r[4]))l="Z";else{i._isValid=!1;return}i._f=o+(a||"")+(l||""),Dw(i)}else i._isValid=!1}function j9(i,e,t,n,r,s){var o=[z9(i),MF.indexOf(e),parseInt(t,10),parseInt(n,10),parseInt(r,10)];return s&&o.push(parseInt(s,10)),o}function z9(i){var e=parseInt(i,10);return e<=49?2e3+e:e<=999?1900+e:e}function G9(i){return i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function q9(i,e,t){if(i){var n=jF.indexOf(i),r=new Date(e[0],e[1],e[2]).getDay();if(n!==r)return fe(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function W9(i,e,t){if(i)return $9[i];if(e)return 0;var n=parseInt(t,10),r=n%100,s=(n-r)/100;return s*60+r}function YF(i){var e=F9.exec(G9(i._i)),t;if(e){if(t=j9(e[4],e[3],e[2],e[5],e[6],e[7]),!q9(e[1],t,i))return;i._a=t,i._tzm=W9(e[8],e[9],e[10]),i._d=lc.apply(null,i._a),i._d.setUTCMinutes(i._d.getUTCMinutes()-i._tzm),fe(i).rfc2822=!0}else i._isValid=!1}function Y9(i){var e=L9.exec(i._i);if(e!==null){i._d=new Date(+e[1]);return}if(WF(i),i._isValid===!1)delete i._isValid;else return;if(YF(i),i._isValid===!1)delete i._isValid;else return;i._strict?i._isValid=!1:B.createFromInputFallback(i)}B.createFromInputFallback=Li("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(i){i._d=new Date(i._i+(i._useUTC?" UTC":""))});function Ao(i,e,t){return i??e??t}function B9(i){var e=new Date(B.now());return i._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Pw(i){var e,t,n=[],r,s,o;if(!i._d){for(r=B9(i),i._w&&i._a[fn]==null&&i._a[Yn]==null&&H9(i),i._dayOfYear!=null&&(o=Ao(i._a[jt],r[jt]),(i._dayOfYear>Ml(o)||i._dayOfYear===0)&&(fe(i)._overflowDayOfYear=!0),t=lc(o,0,i._dayOfYear),i._a[Yn]=t.getUTCMonth(),i._a[fn]=t.getUTCDate()),e=0;e<3&&i._a[e]==null;++e)i._a[e]=n[e]=r[e];for(;e<7;e++)i._a[e]=n[e]=i._a[e]==null?e===2?1:0:i._a[e];i._a[_t]===24&&i._a[Bi]===0&&i._a[Bn]===0&&i._a[_s]===0&&(i._nextDay=!0,i._a[_t]=0),i._d=(i._useUTC?lc:QZ).apply(null,n),s=i._useUTC?i._d.getUTCDay():i._d.getDay(),i._tzm!=null&&i._d.setUTCMinutes(i._d.getUTCMinutes()-i._tzm),i._nextDay&&(i._a[_t]=24),i._w&&typeof i._w.d<"u"&&i._w.d!==s&&(fe(i).weekdayMismatch=!0)}}function H9(i){var e,t,n,r,s,o,a,l,c;e=i._w,e.GG!=null||e.W!=null||e.E!=null?(s=1,o=4,t=Ao(e.GG,i._a[jt],cc(He(),1,4).year),n=Ao(e.W,1),r=Ao(e.E,1),(r<1||r>7)&&(l=!0)):(s=i._locale._week.dow,o=i._locale._week.doy,c=cc(He(),s,o),t=Ao(e.gg,i._a[jt],c.year),n=Ao(e.w,c.week),e.d!=null?(r=e.d,(r<0||r>6)&&(l=!0)):e.e!=null?(r=e.e+s,(e.e<0||e.e>6)&&(l=!0)):r=s),n<1||n>Jn(t,s,o)?fe(i)._overflowWeeks=!0:l!=null?fe(i)._overflowWeekday=!0:(a=$F(t,n,r,s,o),i._a[jt]=a.year,i._dayOfYear=a.dayOfYear)}B.ISO_8601=function(){};B.RFC_2822=function(){};function Dw(i){if(i._f===B.ISO_8601){WF(i);return}if(i._f===B.RFC_2822){YF(i);return}i._a=[],fe(i).empty=!0;var e=""+i._i,t,n,r,s,o,a=e.length,l=0,c,u;for(r=TF(i._f,i._locale).match(_w)||[],u=r.length,t=0;t<u;t++)s=r[t],n=(e.match(MZ(s,i))||[])[0],n&&(o=e.substr(0,e.indexOf(n)),o.length>0&&fe(i).unusedInput.push(o),e=e.slice(e.indexOf(n)+n.length),l+=n.length),ta[s]?(n?fe(i).empty=!1:fe(i).unusedTokens.push(s),NZ(s,n,i)):i._strict&&!n&&fe(i).unusedTokens.push(s);fe(i).charsLeftOver=a-l,e.length>0&&fe(i).unusedInput.push(e),i._a[_t]<=12&&fe(i).bigHour===!0&&i._a[_t]>0&&(fe(i).bigHour=void 0),fe(i).parsedDateParts=i._a.slice(0),fe(i).meridiem=i._meridiem,i._a[_t]=U9(i._locale,i._a[_t],i._meridiem),c=fe(i).era,c!==null&&(i._a[jt]=i._locale.erasConvertYear(c,i._a[jt])),Pw(i),Ow(i)}function U9(i,e,t){var n;return t==null?e:i.meridiemHour!=null?i.meridiemHour(e,t):(i.isPM!=null&&(n=i.isPM(t),n&&e<12&&(e+=12),!n&&e===12&&(e=0)),e)}function V9(i){var e,t,n,r,s,o,a=!1,l=i._f.length;if(l===0){fe(i).invalidFormat=!0,i._d=new Date(NaN);return}for(r=0;r<l;r++)s=0,o=!1,e=vw({},i),i._useUTC!=null&&(e._useUTC=i._useUTC),e._f=i._f[r],Dw(e),gw(e)&&(o=!0),s+=fe(e).charsLeftOver,s+=fe(e).unusedTokens.length*10,fe(e).score=s,a?s<n&&(n=s,t=e):(n==null||s<n||o)&&(n=s,t=e,o&&(a=!0));kr(i,t||e)}function X9(i){if(!i._d){var e=bw(i._i),t=e.day===void 0?e.date:e.day;i._a=SF([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(n){return n&&parseInt(n,10)}),Pw(i)}}function K9(i){var e=new Vc(Ow(BF(i)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function BF(i){var e=i._i,t=i._f;return i._locale=i._locale||pr(i._l),e===null||t===void 0&&e===""?Ad({nullInput:!0}):(typeof e=="string"&&(i._i=e=i._locale.preparse(e)),en(e)?new Vc(Ow(e)):(Uc(e)?i._d=e:Ji(t)?V9(i):t?Dw(i):Z9(i),gw(i)||(i._d=null),i))}function Z9(i){var e=i._i;Xt(e)?i._d=new Date(B.now()):Uc(e)?i._d=new Date(e.valueOf()):typeof e=="string"?Y9(i):Ji(e)?(i._a=SF(e.slice(0),function(t){return parseInt(t,10)}),Pw(i)):Cs(e)?X9(i):lr(e)?i._d=new Date(e):B.createFromInputFallback(i)}function HF(i,e,t,n,r){var s={};return(e===!0||e===!1)&&(n=e,e=void 0),(t===!0||t===!1)&&(n=t,t=void 0),(Cs(i)&&mw(i)||Ji(i)&&i.length===0)&&(i=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=t,s._i=i,s._f=e,s._strict=n,K9(s)}function He(i,e,t,n){return HF(i,e,t,n,!1)}var Q9=Li("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var i=He.apply(null,arguments);return this.isValid()&&i.isValid()?i<this?this:i:Ad()}),J9=Li("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var i=He.apply(null,arguments);return this.isValid()&&i.isValid()?i>this?this:i:Ad()});function UF(i,e){var t,n;if(e.length===1&&Ji(e[0])&&(e=e[0]),!e.length)return He();for(t=e[0],n=1;n<e.length;++n)(!e[n].isValid()||e[n][i](t))&&(t=e[n]);return t}function e7(){var i=[].slice.call(arguments,0);return UF("isBefore",i)}function t7(){var i=[].slice.call(arguments,0);return UF("isAfter",i)}var i7=function(){return Date.now?Date.now():+new Date},fl=["year","quarter","month","week","day","hour","minute","second","millisecond"];function n7(i){var e,t=!1,n,r=fl.length;for(e in i)if(Oe(i,e)&&!(ct.call(fl,e)!==-1&&(i[e]==null||!isNaN(i[e]))))return!1;for(n=0;n<r;++n)if(i[fl[n]]){if(t)return!1;parseFloat(i[fl[n]])!==we(i[fl[n]])&&(t=!0)}return!0}function r7(){return this._isValid}function s7(){return on(NaN)}function zd(i){var e=bw(i),t=e.year||0,n=e.quarter||0,r=e.month||0,s=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=n7(e),this._milliseconds=+u+c*1e3+l*6e4+a*1e3*60*60,this._days=+o+s*7,this._months=+r+n*3+t*12,this._data={},this._locale=pr(),this._bubble()}function Uu(i){return i instanceof zd}function vb(i){return i<0?Math.round(-1*i)*-1:Math.round(i)}function o7(i,e,t){var n=Math.min(i.length,e.length),r=Math.abs(i.length-e.length),s=0,o;for(o=0;o<n;o++)we(i[o])!==we(e[o])&&s++;return s+r}function VF(i,e){ee(i,0,0,function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+En(~~(t/60),2)+e+En(~~t%60,2)})}VF("Z",":");VF("ZZ","");K("Z",Fd);K("ZZ",Fd);je(["Z","ZZ"],function(i,e,t){t._useUTC=!0,t._tzm=Aw(Fd,i)});var a7=/([\+\-]|\d\d)/gi;function Aw(i,e){var t=(e||"").match(i),n,r,s;return t===null?null:(n=t[t.length-1]||[],r=(n+"").match(a7)||["-",0,0],s=+(r[1]*60)+we(r[2]),s===0?0:r[0]==="+"?s:-s)}function Mw(i,e){var t,n;return e._isUTC?(t=e.clone(),n=(en(i)||Uc(i)?i.valueOf():He(i).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+n),B.updateOffset(t,!1),t):He(i).local()}function yb(i){return-Math.round(i._d.getTimezoneOffset())}B.updateOffset=function(){};function l7(i,e,t){var n=this._offset||0,r;if(!this.isValid())return i!=null?this:NaN;if(i!=null){if(typeof i=="string"){if(i=Aw(Fd,i),i===null)return this}else Math.abs(i)<16&&!t&&(i=i*60);return!this._isUTC&&e&&(r=yb(this)),this._offset=i,this._isUTC=!0,r!=null&&this.add(r,"m"),n!==i&&(!e||this._changeInProgress?ZF(this,on(i-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,B.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:yb(this)}function c7(i,e){return i!=null?(typeof i!="string"&&(i=-i),this.utcOffset(i,e),this):-this.utcOffset()}function u7(i){return this.utcOffset(0,i)}function h7(i){return this._isUTC&&(this.utcOffset(0,i),this._isUTC=!1,i&&this.subtract(yb(this),"m")),this}function d7(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var i=Aw(DZ,this._i);i!=null?this.utcOffset(i):this.utcOffset(0,!0)}return this}function f7(i){return this.isValid()?(i=i?He(i).utcOffset():0,(this.utcOffset()-i)%60===0):!1}function p7(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function m7(){if(!Xt(this._isDSTShifted))return this._isDSTShifted;var i={},e;return vw(i,this),i=BF(i),i._a?(e=i._isUTC?In(i._a):He(i._a),this._isDSTShifted=this.isValid()&&o7(i._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function g7(){return this.isValid()?!this._isUTC:!1}function v7(){return this.isValid()?this._isUTC:!1}function XF(){return this.isValid()?this._isUTC&&this._offset===0:!1}var y7=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,_7=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function on(i,e){var t=i,n=null,r,s,o;return Uu(i)?t={ms:i._milliseconds,d:i._days,M:i._months}:lr(i)||!isNaN(+i)?(t={},e?t[e]=+i:t.milliseconds=+i):(n=y7.exec(i))?(r=n[1]==="-"?-1:1,t={y:0,d:we(n[fn])*r,h:we(n[_t])*r,m:we(n[Bi])*r,s:we(n[Bn])*r,ms:we(vb(n[_s]*1e3))*r}):(n=_7.exec(i))?(r=n[1]==="-"?-1:1,t={y:as(n[2],r),M:as(n[3],r),w:as(n[4],r),d:as(n[5],r),h:as(n[6],r),m:as(n[7],r),s:as(n[8],r)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=b7(He(t.from),He(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),s=new zd(t),Uu(i)&&Oe(i,"_locale")&&(s._locale=i._locale),Uu(i)&&Oe(i,"_isValid")&&(s._isValid=i._isValid),s}on.fn=zd.prototype;on.invalid=s7;function as(i,e){var t=i&&parseFloat(i.replace(",","."));return(isNaN(t)?0:t)*e}function MD(i,e){var t={};return t.months=e.month()-i.month()+(e.year()-i.year())*12,i.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+i.clone().add(t.months,"M"),t}function b7(i,e){var t;return i.isValid()&&e.isValid()?(e=Mw(e,i),i.isBefore(e)?t=MD(i,e):(t=MD(e,i),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function KF(i,e){return function(t,n){var r,s;return n!==null&&!isNaN(+n)&&(CF(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=t,t=n,n=s),r=on(t,n),ZF(this,r,i),this}}function ZF(i,e,t,n){var r=e._milliseconds,s=vb(e._days),o=vb(e._months);i.isValid()&&(n=n??!0,o&&NF(i,ac(i,"Month")+o*t),s&&AF(i,"Date",ac(i,"Date")+s*t),r&&i._d.setTime(i._d.valueOf()+r*t),n&&B.updateOffset(i,s||o))}var w7=KF(1,"add"),x7=KF(-1,"subtract");function QF(i){return typeof i=="string"||i instanceof String}function S7(i){return en(i)||Uc(i)||QF(i)||lr(i)||C7(i)||E7(i)||i===null||i===void 0}function E7(i){var e=Cs(i)&&!mw(i),t=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,s,o=n.length;for(r=0;r<o;r+=1)s=n[r],t=t||Oe(i,s);return e&&t}function C7(i){var e=Ji(i),t=!1;return e&&(t=i.filter(function(n){return!lr(n)&&QF(i)}).length===0),e&&t}function T7(i){var e=Cs(i)&&!mw(i),t=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,s;for(r=0;r<n.length;r+=1)s=n[r],t=t||Oe(i,s);return e&&t}function R7(i,e){var t=i.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function I7(i,e){arguments.length===1&&(arguments[0]?S7(arguments[0])?(i=arguments[0],e=void 0):T7(arguments[0])&&(e=arguments[0],i=void 0):(i=void 0,e=void 0));var t=i||He(),n=Mw(t,this).startOf("day"),r=B.calendarFormat(this,n)||"sameElse",s=e&&(On(e[r])?e[r].call(this,t):e[r]);return this.format(s||this.localeData().calendar(r,this,He(t)))}function O7(){return new Vc(this)}function P7(i,e){var t=en(i)?i:He(i);return this.isValid()&&t.isValid()?(e=Fi(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function D7(i,e){var t=en(i)?i:He(i);return this.isValid()&&t.isValid()?(e=Fi(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function A7(i,e,t,n){var r=en(i)?i:He(i),s=en(e)?e:He(e);return this.isValid()&&r.isValid()&&s.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(r,t):!this.isBefore(r,t))&&(n[1]===")"?this.isBefore(s,t):!this.isAfter(s,t))):!1}function M7(i,e){var t=en(i)?i:He(i),n;return this.isValid()&&t.isValid()?(e=Fi(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(n=t.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf())):!1}function k7(i,e){return this.isSame(i,e)||this.isAfter(i,e)}function N7(i,e){return this.isSame(i,e)||this.isBefore(i,e)}function L7(i,e,t){var n,r,s;if(!this.isValid())return NaN;if(n=Mw(i,this),!n.isValid())return NaN;switch(r=(n.utcOffset()-this.utcOffset())*6e4,e=Fi(e),e){case"year":s=Vu(this,n)/12;break;case"month":s=Vu(this,n);break;case"quarter":s=Vu(this,n)/3;break;case"second":s=(this-n)/1e3;break;case"minute":s=(this-n)/6e4;break;case"hour":s=(this-n)/36e5;break;case"day":s=(this-n-r)/864e5;break;case"week":s=(this-n-r)/6048e5;break;default:s=this-n}return t?s:Ci(s)}function Vu(i,e){if(i.date()<e.date())return-Vu(e,i);var t=(e.year()-i.year())*12+(e.month()-i.month()),n=i.clone().add(t,"months"),r,s;return e-n<0?(r=i.clone().add(t-1,"months"),s=(e-n)/(n-r)):(r=i.clone().add(t+1,"months"),s=(e-n)/(r-n)),-(t+s)||0}B.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";B.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function F7(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function $7(i){if(!this.isValid())return null;var e=i!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?Hu(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):On(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Hu(t,"Z")):Hu(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function j7(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var i="moment",e="",t,n,r,s;return this.isLocal()||(i=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+i+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",s=e+'[")]',this.format(t+n+r+s)}function z7(i){i||(i=this.isUtc()?B.defaultFormatUtc:B.defaultFormat);var e=Hu(this,i);return this.localeData().postformat(e)}function G7(i,e){return this.isValid()&&(en(i)&&i.isValid()||He(i).isValid())?on({to:this,from:i}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function q7(i){return this.from(He(),i)}function W7(i,e){return this.isValid()&&(en(i)&&i.isValid()||He(i).isValid())?on({from:this,to:i}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Y7(i){return this.to(He(),i)}function JF(i){var e;return i===void 0?this._locale._abbr:(e=pr(i),e!=null&&(this._locale=e),this)}var e2=Li("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(i){return i===void 0?this.localeData():this.locale(i)});function t2(){return this._locale}var Sh=1e3,ia=60*Sh,Eh=60*ia,i2=(365*400+97)*24*Eh;function na(i,e){return(i%e+e)%e}function n2(i,e,t){return i<100&&i>=0?new Date(i+400,e,t)-i2:new Date(i,e,t).valueOf()}function r2(i,e,t){return i<100&&i>=0?Date.UTC(i+400,e,t)-i2:Date.UTC(i,e,t)}function B7(i){var e,t;if(i=Fi(i),i===void 0||i==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?r2:n2,i){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=na(e+(this._isUTC?0:this.utcOffset()*ia),Eh);break;case"minute":e=this._d.valueOf(),e-=na(e,ia);break;case"second":e=this._d.valueOf(),e-=na(e,Sh);break}return this._d.setTime(e),B.updateOffset(this,!0),this}function H7(i){var e,t;if(i=Fi(i),i===void 0||i==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?r2:n2,i){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=Eh-na(e+(this._isUTC?0:this.utcOffset()*ia),Eh)-1;break;case"minute":e=this._d.valueOf(),e+=ia-na(e,ia)-1;break;case"second":e=this._d.valueOf(),e+=Sh-na(e,Sh)-1;break}return this._d.setTime(e),B.updateOffset(this,!0),this}function U7(){return this._d.valueOf()-(this._offset||0)*6e4}function V7(){return Math.floor(this.valueOf()/1e3)}function X7(){return new Date(this.valueOf())}function K7(){var i=this;return[i.year(),i.month(),i.date(),i.hour(),i.minute(),i.second(),i.millisecond()]}function Z7(){var i=this;return{years:i.year(),months:i.month(),date:i.date(),hours:i.hours(),minutes:i.minutes(),seconds:i.seconds(),milliseconds:i.milliseconds()}}function Q7(){return this.isValid()?this.toISOString():null}function J7(){return gw(this)}function eQ(){return kr({},fe(this))}function tQ(){return fe(this).overflow}function iQ(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ee("N",0,0,"eraAbbr");ee("NN",0,0,"eraAbbr");ee("NNN",0,0,"eraAbbr");ee("NNNN",0,0,"eraName");ee("NNNNN",0,0,"eraNarrow");ee("y",["y",1],"yo","eraYear");ee("y",["yy",2],0,"eraYear");ee("y",["yyy",3],0,"eraYear");ee("y",["yyyy",4],0,"eraYear");K("N",kw);K("NN",kw);K("NNN",kw);K("NNNN",fQ);K("NNNNN",pQ);je(["N","NN","NNN","NNNN","NNNNN"],function(i,e,t,n){var r=t._locale.erasParse(i,n,t._strict);r?fe(t).era=r:fe(t).invalidEra=i});K("y",Va);K("yy",Va);K("yyy",Va);K("yyyy",Va);K("yo",mQ);je(["y","yy","yyy","yyyy"],jt);je(["yo"],function(i,e,t,n){var r;t._locale._eraYearOrdinalRegex&&(r=i.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[jt]=t._locale.eraYearOrdinalParse(i,r):e[jt]=parseInt(i,10)});function nQ(i,e){var t,n,r,s=this._eras||pr("en")._eras;for(t=0,n=s.length;t<n;++t){switch(typeof s[t].since){case"string":r=B(s[t].since).startOf("day"),s[t].since=r.valueOf();break}switch(typeof s[t].until){case"undefined":s[t].until=1/0;break;case"string":r=B(s[t].until).startOf("day").valueOf(),s[t].until=r.valueOf();break}}return s}function rQ(i,e,t){var n,r,s=this.eras(),o,a,l;for(i=i.toUpperCase(),n=0,r=s.length;n<r;++n)if(o=s[n].name.toUpperCase(),a=s[n].abbr.toUpperCase(),l=s[n].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(a===i)return s[n];break;case"NNNN":if(o===i)return s[n];break;case"NNNNN":if(l===i)return s[n];break}else if([o,a,l].indexOf(i)>=0)return s[n]}function sQ(i,e){var t=i.since<=i.until?1:-1;return e===void 0?B(i.since).year():B(i.since).year()+(e-i.offset)*t}function oQ(){var i,e,t,n=this.localeData().eras();for(i=0,e=n.length;i<e;++i)if(t=this.clone().startOf("day").valueOf(),n[i].since<=t&&t<=n[i].until||n[i].until<=t&&t<=n[i].since)return n[i].name;return""}function aQ(){var i,e,t,n=this.localeData().eras();for(i=0,e=n.length;i<e;++i)if(t=this.clone().startOf("day").valueOf(),n[i].since<=t&&t<=n[i].until||n[i].until<=t&&t<=n[i].since)return n[i].narrow;return""}function lQ(){var i,e,t,n=this.localeData().eras();for(i=0,e=n.length;i<e;++i)if(t=this.clone().startOf("day").valueOf(),n[i].since<=t&&t<=n[i].until||n[i].until<=t&&t<=n[i].since)return n[i].abbr;return""}function cQ(){var i,e,t,n,r=this.localeData().eras();for(i=0,e=r.length;i<e;++i)if(t=r[i].since<=r[i].until?1:-1,n=this.clone().startOf("day").valueOf(),r[i].since<=n&&n<=r[i].until||r[i].until<=n&&n<=r[i].since)return(this.year()-B(r[i].since).year())*t+r[i].offset;return this.year()}function uQ(i){return Oe(this,"_erasNameRegex")||Nw.call(this),i?this._erasNameRegex:this._erasRegex}function hQ(i){return Oe(this,"_erasAbbrRegex")||Nw.call(this),i?this._erasAbbrRegex:this._erasRegex}function dQ(i){return Oe(this,"_erasNarrowRegex")||Nw.call(this),i?this._erasNarrowRegex:this._erasRegex}function kw(i,e){return e.erasAbbrRegex(i)}function fQ(i,e){return e.erasNameRegex(i)}function pQ(i,e){return e.erasNarrowRegex(i)}function mQ(i,e){return e._eraYearOrdinalRegex||Va}function Nw(){var i=[],e=[],t=[],n=[],r,s,o,a,l,c=this.eras();for(r=0,s=c.length;r<s;++r)o=Qn(c[r].name),a=Qn(c[r].abbr),l=Qn(c[r].narrow),e.push(o),i.push(a),t.push(l),n.push(o),n.push(a),n.push(l);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}ee(0,["gg",2],0,function(){return this.weekYear()%100});ee(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Gd(i,e){ee(0,[i,i.length],0,e)}Gd("gggg","weekYear");Gd("ggggg","weekYear");Gd("GGGG","isoWeekYear");Gd("GGGGG","isoWeekYear");K("G",Ld);K("g",Ld);K("GG",Ue,_i);K("gg",Ue,_i);K("GGGG",xw,ww);K("gggg",xw,ww);K("GGGGG",Nd,Md);K("ggggg",Nd,Md);Kc(["gggg","ggggg","GGGG","GGGGG"],function(i,e,t,n){e[n.substr(0,2)]=we(i)});Kc(["gg","GG"],function(i,e,t,n){e[n]=B.parseTwoDigitYear(i)});function gQ(i){return s2.call(this,i,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function vQ(i){return s2.call(this,i,this.isoWeek(),this.isoWeekday(),1,4)}function yQ(){return Jn(this.year(),1,4)}function _Q(){return Jn(this.isoWeekYear(),1,4)}function bQ(){var i=this.localeData()._week;return Jn(this.year(),i.dow,i.doy)}function wQ(){var i=this.localeData()._week;return Jn(this.weekYear(),i.dow,i.doy)}function s2(i,e,t,n,r){var s;return i==null?cc(this,n,r).year:(s=Jn(i,n,r),e>s&&(e=s),xQ.call(this,i,e,t,n,r))}function xQ(i,e,t,n,r){var s=$F(i,e,t,n,r),o=lc(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}ee("Q",0,"Qo","quarter");K("Q",RF);je("Q",function(i,e){e[Yn]=(we(i)-1)*3});function SQ(i){return i==null?Math.ceil((this.month()+1)/3):this.month((i-1)*3+this.month()%3)}ee("D",["DD",2],"Do","date");K("D",Ue,Xa);K("DD",Ue,_i);K("Do",function(i,e){return i?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});je(["D","DD"],fn);je("Do",function(i,e){e[fn]=we(i.match(Ue)[0])});var o2=Ka("Date",!0);ee("DDD",["DDDD",3],"DDDo","dayOfYear");K("DDD",kd);K("DDDD",IF);je(["DDD","DDDD"],function(i,e,t){t._dayOfYear=we(i)});function EQ(i){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return i==null?e:this.add(i-e,"d")}ee("m",["mm",2],0,"minute");K("m",Ue,Sw);K("mm",Ue,_i);je(["m","mm"],Bi);var CQ=Ka("Minutes",!1);ee("s",["ss",2],0,"second");K("s",Ue,Sw);K("ss",Ue,_i);je(["s","ss"],Bn);var TQ=Ka("Seconds",!1);ee("S",0,0,function(){return~~(this.millisecond()/100)});ee(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ee(0,["SSS",3],0,"millisecond");ee(0,["SSSS",4],0,function(){return this.millisecond()*10});ee(0,["SSSSS",5],0,function(){return this.millisecond()*100});ee(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ee(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ee(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ee(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});K("S",kd,RF);K("SS",kd,_i);K("SSS",kd,IF);var Nr,a2;for(Nr="SSSS";Nr.length<=9;Nr+="S")K(Nr,Va);function RQ(i,e){e[_s]=we(("0."+i)*1e3)}for(Nr="S";Nr.length<=9;Nr+="S")je(Nr,RQ);a2=Ka("Milliseconds",!1);ee("z",0,0,"zoneAbbr");ee("zz",0,0,"zoneName");function IQ(){return this._isUTC?"UTC":""}function OQ(){return this._isUTC?"Coordinated Universal Time":""}var Y=Vc.prototype;Y.add=w7;Y.calendar=I7;Y.clone=O7;Y.diff=L7;Y.endOf=H7;Y.format=z7;Y.from=G7;Y.fromNow=q7;Y.to=W7;Y.toNow=Y7;Y.get=jZ;Y.invalidAt=tQ;Y.isAfter=P7;Y.isBefore=D7;Y.isBetween=A7;Y.isSame=M7;Y.isSameOrAfter=k7;Y.isSameOrBefore=N7;Y.isValid=J7;Y.lang=e2;Y.locale=JF;Y.localeData=t2;Y.max=J9;Y.min=Q9;Y.parsingFlags=eQ;Y.set=zZ;Y.startOf=B7;Y.subtract=x7;Y.toArray=K7;Y.toObject=Z7;Y.toDate=X7;Y.toISOString=$7;Y.inspect=j7;typeof Symbol<"u"&&Symbol.for!=null&&(Y[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});Y.toJSON=Q7;Y.toString=F7;Y.unix=V7;Y.valueOf=U7;Y.creationData=iQ;Y.eraName=oQ;Y.eraNarrow=aQ;Y.eraAbbr=lQ;Y.eraYear=cQ;Y.year=DF;Y.isLeapYear=$Z;Y.weekYear=gQ;Y.isoWeekYear=vQ;Y.quarter=Y.quarters=SQ;Y.month=LF;Y.daysInMonth=XZ;Y.week=Y.weeks=n9;Y.isoWeek=Y.isoWeeks=r9;Y.weeksInYear=bQ;Y.weeksInWeekYear=wQ;Y.isoWeeksInYear=yQ;Y.isoWeeksInISOWeekYear=_Q;Y.date=o2;Y.day=Y.days=v9;Y.weekday=y9;Y.isoWeekday=_9;Y.dayOfYear=EQ;Y.hour=Y.hours=T9;Y.minute=Y.minutes=CQ;Y.second=Y.seconds=TQ;Y.millisecond=Y.milliseconds=a2;Y.utcOffset=l7;Y.utc=u7;Y.local=h7;Y.parseZone=d7;Y.hasAlignedHourOffset=f7;Y.isDST=p7;Y.isLocal=g7;Y.isUtcOffset=v7;Y.isUtc=XF;Y.isUTC=XF;Y.zoneAbbr=IQ;Y.zoneName=OQ;Y.dates=Li("dates accessor is deprecated. Use date instead.",o2);Y.months=Li("months accessor is deprecated. Use month instead",LF);Y.years=Li("years accessor is deprecated. Use year instead",DF);Y.zone=Li("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",c7);Y.isDSTShifted=Li("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",m7);function PQ(i){return He(i*1e3)}function DQ(){return He.apply(null,arguments).parseZone()}function l2(i){return i}var Pe=yw.prototype;Pe.calendar=gZ;Pe.longDateFormat=bZ;Pe.invalidDate=xZ;Pe.ordinal=CZ;Pe.preparse=l2;Pe.postformat=l2;Pe.relativeTime=RZ;Pe.pastFuture=IZ;Pe.set=pZ;Pe.eras=nQ;Pe.erasParse=rQ;Pe.erasConvertYear=sQ;Pe.erasAbbrRegex=hQ;Pe.erasNameRegex=uQ;Pe.erasNarrowRegex=dQ;Pe.months=BZ;Pe.monthsShort=HZ;Pe.monthsParse=VZ;Pe.monthsRegex=ZZ;Pe.monthsShortRegex=KZ;Pe.week=JZ;Pe.firstDayOfYear=i9;Pe.firstDayOfWeek=t9;Pe.weekdays=d9;Pe.weekdaysMin=p9;Pe.weekdaysShort=f9;Pe.weekdaysParse=g9;Pe.weekdaysRegex=b9;Pe.weekdaysShortRegex=w9;Pe.weekdaysMinRegex=x9;Pe.isPM=E9;Pe.meridiem=R9;function Ch(i,e,t,n){var r=pr(),s=In().set(n,e);return r[t](s,i)}function c2(i,e,t){if(lr(i)&&(e=i,i=void 0),i=i||"",e!=null)return Ch(i,e,t,"month");var n,r=[];for(n=0;n<12;n++)r[n]=Ch(i,n,t,"month");return r}function Lw(i,e,t,n){typeof i=="boolean"?(lr(e)&&(t=e,e=void 0),e=e||""):(e=i,t=e,i=!1,lr(e)&&(t=e,e=void 0),e=e||"");var r=pr(),s=i?r._week.dow:0,o,a=[];if(t!=null)return Ch(e,(t+s)%7,n,"day");for(o=0;o<7;o++)a[o]=Ch(e,(o+s)%7,n,"day");return a}function AQ(i,e){return c2(i,e,"months")}function MQ(i,e){return c2(i,e,"monthsShort")}function kQ(i,e,t){return Lw(i,e,t,"weekdays")}function NQ(i,e,t){return Lw(i,e,t,"weekdaysShort")}function LQ(i,e,t){return Lw(i,e,t,"weekdaysMin")}zr("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(i){var e=i%10,t=we(i%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return i+t}});B.lang=Li("moment.lang is deprecated. Use moment.locale instead.",zr);B.langData=Li("moment.langData is deprecated. Use moment.localeData instead.",pr);var Ln=Math.abs;function FQ(){var i=this._data;return this._milliseconds=Ln(this._milliseconds),this._days=Ln(this._days),this._months=Ln(this._months),i.milliseconds=Ln(i.milliseconds),i.seconds=Ln(i.seconds),i.minutes=Ln(i.minutes),i.hours=Ln(i.hours),i.months=Ln(i.months),i.years=Ln(i.years),this}function u2(i,e,t,n){var r=on(e,t);return i._milliseconds+=n*r._milliseconds,i._days+=n*r._days,i._months+=n*r._months,i._bubble()}function $Q(i,e){return u2(this,i,e,1)}function jQ(i,e){return u2(this,i,e,-1)}function kD(i){return i<0?Math.floor(i):Math.ceil(i)}function zQ(){var i=this._milliseconds,e=this._days,t=this._months,n=this._data,r,s,o,a,l;return i>=0&&e>=0&&t>=0||i<=0&&e<=0&&t<=0||(i+=kD(_b(t)+e)*864e5,e=0,t=0),n.milliseconds=i%1e3,r=Ci(i/1e3),n.seconds=r%60,s=Ci(r/60),n.minutes=s%60,o=Ci(s/60),n.hours=o%24,e+=Ci(o/24),l=Ci(h2(e)),t+=l,e-=kD(_b(l)),a=Ci(t/12),t%=12,n.days=e,n.months=t,n.years=a,this}function h2(i){return i*4800/146097}function _b(i){return i*146097/4800}function GQ(i){if(!this.isValid())return NaN;var e,t,n=this._milliseconds;if(i=Fi(i),i==="month"||i==="quarter"||i==="year")switch(e=this._days+n/864e5,t=this._months+h2(e),i){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(_b(this._months)),i){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return e*24+n/36e5;case"minute":return e*1440+n/6e4;case"second":return e*86400+n/1e3;case"millisecond":return Math.floor(e*864e5)+n;default:throw new Error("Unknown unit "+i)}}function mr(i){return function(){return this.as(i)}}var d2=mr("ms"),qQ=mr("s"),WQ=mr("m"),YQ=mr("h"),BQ=mr("d"),HQ=mr("w"),UQ=mr("M"),VQ=mr("Q"),XQ=mr("y"),KQ=d2;function ZQ(){return on(this)}function QQ(i){return i=Fi(i),this.isValid()?this[i+"s"]():NaN}function ro(i){return function(){return this.isValid()?this._data[i]:NaN}}var JQ=ro("milliseconds"),eJ=ro("seconds"),tJ=ro("minutes"),iJ=ro("hours"),nJ=ro("days"),rJ=ro("months"),sJ=ro("years");function oJ(){return Ci(this.days()/7)}var jn=Math.round,zo={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function aJ(i,e,t,n,r){return r.relativeTime(e||1,!!t,i,n)}function lJ(i,e,t,n){var r=on(i).abs(),s=jn(r.as("s")),o=jn(r.as("m")),a=jn(r.as("h")),l=jn(r.as("d")),c=jn(r.as("M")),u=jn(r.as("w")),h=jn(r.as("y")),d=s<=t.ss&&["s",s]||s<t.s&&["ss",s]||o<=1&&["m"]||o<t.m&&["mm",o]||a<=1&&["h"]||a<t.h&&["hh",a]||l<=1&&["d"]||l<t.d&&["dd",l];return t.w!=null&&(d=d||u<=1&&["w"]||u<t.w&&["ww",u]),d=d||c<=1&&["M"]||c<t.M&&["MM",c]||h<=1&&["y"]||["yy",h],d[2]=e,d[3]=+i>0,d[4]=n,aJ.apply(null,d)}function cJ(i){return i===void 0?jn:typeof i=="function"?(jn=i,!0):!1}function uJ(i,e){return zo[i]===void 0?!1:e===void 0?zo[i]:(zo[i]=e,i==="s"&&(zo.ss=e-1),!0)}function hJ(i,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,n=zo,r,s;return typeof i=="object"&&(e=i,i=!1),typeof i=="boolean"&&(t=i),typeof e=="object"&&(n=Object.assign({},zo,e),e.s!=null&&e.ss==null&&(n.ss=e.s-1)),r=this.localeData(),s=lJ(this,!t,n,r),t&&(s=r.pastFuture(+this,s)),r.postformat(s)}var l_=Math.abs;function wo(i){return(i>0)-(i<0)||+i}function qd(){if(!this.isValid())return this.localeData().invalidDate();var i=l_(this._milliseconds)/1e3,e=l_(this._days),t=l_(this._months),n,r,s,o,a=this.asSeconds(),l,c,u,h;return a?(n=Ci(i/60),r=Ci(n/60),i%=60,n%=60,s=Ci(t/12),t%=12,o=i?i.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",c=wo(this._months)!==wo(a)?"-":"",u=wo(this._days)!==wo(a)?"-":"",h=wo(this._milliseconds)!==wo(a)?"-":"",l+"P"+(s?c+s+"Y":"")+(t?c+t+"M":"")+(e?u+e+"D":"")+(r||n||i?"T":"")+(r?h+r+"H":"")+(n?h+n+"M":"")+(i?h+o+"S":"")):"P0D"}var Ce=zd.prototype;Ce.isValid=r7;Ce.abs=FQ;Ce.add=$Q;Ce.subtract=jQ;Ce.as=GQ;Ce.asMilliseconds=d2;Ce.asSeconds=qQ;Ce.asMinutes=WQ;Ce.asHours=YQ;Ce.asDays=BQ;Ce.asWeeks=HQ;Ce.asMonths=UQ;Ce.asQuarters=VQ;Ce.asYears=XQ;Ce.valueOf=KQ;Ce._bubble=zQ;Ce.clone=ZQ;Ce.get=QQ;Ce.milliseconds=JQ;Ce.seconds=eJ;Ce.minutes=tJ;Ce.hours=iJ;Ce.days=nJ;Ce.weeks=oJ;Ce.months=rJ;Ce.years=sJ;Ce.humanize=hJ;Ce.toISOString=qd;Ce.toString=qd;Ce.toJSON=qd;Ce.locale=JF;Ce.localeData=t2;Ce.toIsoString=Li("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",qd);Ce.lang=e2;ee("X",0,0,"unix");ee("x",0,0,"valueOf");K("x",Ld);K("X",AZ);je("X",function(i,e,t){t._d=new Date(parseFloat(i)*1e3)});je("x",function(i,e,t){t._d=new Date(we(i))});//! moment.js
B.version="2.30.1";dZ(He);B.fn=Y;B.min=e7;B.max=t7;B.now=i7;B.utc=In;B.unix=PQ;B.months=AQ;B.isDate=Uc;B.locale=zr;B.invalid=Ad;B.duration=on;B.isMoment=en;B.weekdays=kQ;B.parseZone=DQ;B.localeData=pr;B.isDuration=Uu;B.monthsShort=MQ;B.weekdaysMin=LQ;B.defineLocale=Iw;B.updateLocale=D9;B.locales=A9;B.weekdaysShort=NQ;B.normalizeUnits=Fi;B.relativeTimeRounding=cJ;B.relativeTimeThreshold=uJ;B.calendarFormat=R7;B.prototype=Y;B.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};var c_={exports:{}},ND;function dJ(){return ND||(ND=1,(function(i){i.exports=e;function e(n){if(n)return t(n)}function t(n){for(var r in e.prototype)n[r]=e.prototype[r];return n}e.prototype.on=e.prototype.addEventListener=function(n,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(r),this},e.prototype.once=function(n,r){function s(){this.off(n,s),r.apply(this,arguments)}return s.fn=r,this.on(n,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===r||o.fn===r){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var r=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,r)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(c_)),c_.exports}var fJ=dJ();const Fw=Fb(fJ);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function tn(){return tn=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},tn.apply(this,arguments)}function $i(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}function Mu(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}var bb;typeof Object.assign!="function"?bb=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])}return t}:bb=Object.assign;var js=bb,LD=["","webkit","Moz","MS","ms","o"],pJ=typeof document>"u"?{style:{}}:document.createElement("div"),mJ="function",Go=Math.round,zs=Math.abs,$w=Date.now;function Wd(i,e){for(var t,n,r=e[0].toUpperCase()+e.slice(1),s=0;s<LD.length;){if(t=LD[s],n=t?t+r:e,n in i)return n;s++}}var er;typeof window>"u"?er={}:er=window;var f2=Wd(pJ.style,"touchAction"),p2=f2!==void 0;function gJ(){if(!p2)return!1;var i={},e=er.CSS&&er.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return i[t]=e?er.CSS.supports("touch-action",t):!0}),i}var m2="compute",g2="auto",wb="manipulation",Ts="none",hc="pan-x",dc="pan-y",ku=gJ(),vJ=/mobile|tablet|ip(ad|hone|od)|android/i,v2="ontouchstart"in er,yJ=Wd(er,"PointerEvent")!==void 0,_J=v2&&vJ.test(navigator.userAgent),Zc="touch",bJ="pen",jw="mouse",wJ="kinect",xJ=25,Ut=1,so=2,pt=4,si=8,Th=1,Qc=2,Jc=4,eu=8,_a=16,xn=Qc|Jc,Rs=eu|_a,y2=xn|Rs,_2=["x","y"],Rh=["clientX","clientY"];function tr(i,e,t){var n;if(i)if(i.forEach)i.forEach(e,t);else if(i.length!==void 0)for(n=0;n<i.length;)e.call(t,i[n],n,i),n++;else for(n in i)i.hasOwnProperty(n)&&e.call(t,i[n],n,i)}function Yd(i,e){return typeof i===mJ?i.apply(e&&e[0]||void 0,e):i}function bs(i,e){return i.indexOf(e)>-1}function SJ(i){if(bs(i,Ts))return Ts;var e=bs(i,hc),t=bs(i,dc);return e&&t?Ts:e||t?e?hc:dc:bs(i,wb)?wb:g2}var b2=(function(){function i(t,n){this.manager=t,this.set(n)}var e=i.prototype;return e.set=function(n){n===m2&&(n=this.compute()),p2&&this.manager.element.style&&ku[n]&&(this.manager.element.style[f2]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return tr(this.manager.recognizers,function(r){Yd(r.options.enable,[r])&&(n=n.concat(r.getTouchAction()))}),SJ(n.join(" "))},e.preventDefaults=function(n){var r=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){r.preventDefault();return}var o=this.actions,a=bs(o,Ts)&&!ku[Ts],l=bs(o,dc)&&!ku[dc],c=bs(o,hc)&&!ku[hc];if(a){var u=n.pointers.length===1,h=n.distance<2,d=n.deltaTime<250;if(u&&h&&d)return}if(!(c&&l)&&(a||l&&s&xn||c&&s&Rs))return this.preventSrc(r)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},i})();function zw(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}function w2(i){var e=i.length;if(e===1)return{x:Go(i[0].clientX),y:Go(i[0].clientY)};for(var t=0,n=0,r=0;r<e;)t+=i[r].clientX,n+=i[r].clientY,r++;return{x:Go(t/e),y:Go(n/e)}}function FD(i){for(var e=[],t=0;t<i.pointers.length;)e[t]={clientX:Go(i.pointers[t].clientX),clientY:Go(i.pointers[t].clientY)},t++;return{timeStamp:$w(),pointers:e,center:w2(e),deltaX:i.deltaX,deltaY:i.deltaY}}function Ih(i,e,t){t||(t=_2);var n=e[t[0]]-i[t[0]],r=e[t[1]]-i[t[1]];return Math.sqrt(n*n+r*r)}function xb(i,e,t){t||(t=_2);var n=e[t[0]]-i[t[0]],r=e[t[1]]-i[t[1]];return Math.atan2(r,n)*180/Math.PI}function x2(i,e){return i===e?Th:zs(i)>=zs(e)?i<0?Qc:Jc:e<0?eu:_a}function EJ(i,e){var t=e.center,n=i.offsetDelta||{},r=i.prevDelta||{},s=i.prevInput||{};(e.eventType===Ut||s.eventType===pt)&&(r=i.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=i.offsetDelta={x:t.x,y:t.y}),e.deltaX=r.x+(t.x-n.x),e.deltaY=r.y+(t.y-n.y)}function S2(i,e,t){return{x:e/i||0,y:t/i||0}}function CJ(i,e){return Ih(e[0],e[1],Rh)/Ih(i[0],i[1],Rh)}function TJ(i,e){return xb(e[1],e[0],Rh)+xb(i[1],i[0],Rh)}function RJ(i,e){var t=i.lastInterval||e,n=e.timeStamp-t.timeStamp,r,s,o,a;if(e.eventType!==si&&(n>xJ||t.velocity===void 0)){var l=e.deltaX-t.deltaX,c=e.deltaY-t.deltaY,u=S2(n,l,c);s=u.x,o=u.y,r=zs(u.x)>zs(u.y)?u.x:u.y,a=x2(l,c),i.lastInterval=e}else r=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;e.velocity=r,e.velocityX=s,e.velocityY=o,e.direction=a}function IJ(i,e){var t=i.session,n=e.pointers,r=n.length;t.firstInput||(t.firstInput=FD(e)),r>1&&!t.firstMultiple?t.firstMultiple=FD(e):r===1&&(t.firstMultiple=!1);var s=t.firstInput,o=t.firstMultiple,a=o?o.center:s.center,l=e.center=w2(n);e.timeStamp=$w(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=xb(a,l),e.distance=Ih(a,l),EJ(t,e),e.offsetDirection=x2(e.deltaX,e.deltaY);var c=S2(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=zs(c.x)>zs(c.y)?c.x:c.y,e.scale=o?CJ(o.pointers,n):1,e.rotation=o?TJ(o.pointers,n):0,e.maxPointers=t.prevInput?e.pointers.length>t.prevInput.maxPointers?e.pointers.length:t.prevInput.maxPointers:e.pointers.length,RJ(t,e);var u=i.element,h=e.srcEvent,d;h.composedPath?d=h.composedPath()[0]:h.path?d=h.path[0]:d=h.target,zw(d,u)&&(u=d),e.target=u}function OJ(i,e,t){var n=t.pointers.length,r=t.changedPointers.length,s=e&Ut&&n-r===0,o=e&(pt|si)&&n-r===0;t.isFirst=!!s,t.isFinal=!!o,s&&(i.session={}),t.eventType=e,IJ(i,t),i.emit("hammer.input",t),i.recognize(t),i.session.prevInput=t}function fc(i){return i.trim().split(/\s+/g)}function kl(i,e,t){tr(fc(e),function(n){i.addEventListener(n,t,!1)})}function Nl(i,e,t){tr(fc(e),function(n){i.removeEventListener(n,t,!1)})}function $D(i){var e=i.ownerDocument||i;return e.defaultView||e.parentWindow||window}var Za=(function(){function i(t,n){var r=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){Yd(t.options.enable,[t])&&r.handler(s)},this.init()}var e=i.prototype;return e.handler=function(){},e.init=function(){this.evEl&&kl(this.element,this.evEl,this.domHandler),this.evTarget&&kl(this.target,this.evTarget,this.domHandler),this.evWin&&kl($D(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Nl(this.element,this.evEl,this.domHandler),this.evTarget&&Nl(this.target,this.evTarget,this.domHandler),this.evWin&&Nl($D(this.element),this.evWin,this.domHandler)},i})();function Gs(i,e,t){if(i.indexOf&&!t)return i.indexOf(e);for(var n=0;n<i.length;){if(t&&i[n][t]==e||!t&&i[n]===e)return n;n++}return-1}var PJ={pointerdown:Ut,pointermove:so,pointerup:pt,pointercancel:si,pointerout:si},DJ={2:Zc,3:bJ,4:jw,5:wJ},E2="pointerdown",C2="pointermove pointerup pointercancel";er.MSPointerEvent&&!er.PointerEvent&&(E2="MSPointerDown",C2="MSPointerMove MSPointerUp MSPointerCancel");var T2=(function(i){$i(e,i);function e(){var n,r=e.prototype;return r.evEl=E2,r.evWin=C2,n=i.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=e.prototype;return t.handler=function(r){var s=this.store,o=!1,a=r.type.toLowerCase().replace("ms",""),l=PJ[a],c=DJ[r.pointerType]||r.pointerType,u=c===Zc,h=Gs(s,r.pointerId,"pointerId");l&Ut&&(r.button===0||u)?h<0&&(s.push(r),h=s.length-1):l&(pt|si)&&(o=!0),!(h<0)&&(s[h]=r,this.callback(this.manager,l,{pointers:s,changedPointers:[r],pointerType:c,srcEvent:r}),o&&s.splice(h,1))},e})(Za);function pc(i){return Array.prototype.slice.call(i,0)}function Gw(i,e,t){for(var n=[],r=[],s=0;s<i.length;){var o=e?i[s][e]:i[s];Gs(r,o)<0&&n.push(i[s]),r[s]=o,s++}return t&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var AJ={touchstart:Ut,touchmove:so,touchend:pt,touchcancel:si},MJ="touchstart touchmove touchend touchcancel",qw=(function(i){$i(e,i);function e(){var n;return e.prototype.evTarget=MJ,n=i.apply(this,arguments)||this,n.targetIds={},n}var t=e.prototype;return t.handler=function(r){var s=AJ[r.type],o=kJ.call(this,r,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Zc,srcEvent:r})},e})(Za);function kJ(i,e){var t=pc(i.touches),n=this.targetIds;if(e&(Ut|so)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var r,s,o=pc(i.changedTouches),a=[],l=this.target;if(s=t.filter(function(c){return zw(c.target,l)}),e===Ut)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;for(r=0;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(pt|si)&&delete n[o[r].identifier],r++;if(a.length)return[Gw(s.concat(a),"identifier",!0),a]}var NJ={mousedown:Ut,mousemove:so,mouseup:pt},LJ="mousedown",FJ="mousemove mouseup",Ww=(function(i){$i(e,i);function e(){var n,r=e.prototype;return r.evEl=LJ,r.evWin=FJ,n=i.apply(this,arguments)||this,n.pressed=!1,n}var t=e.prototype;return t.handler=function(r){var s=NJ[r.type];s&Ut&&r.button===0&&(this.pressed=!0),s&so&&r.which!==1&&(s=pt),this.pressed&&(s&pt&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[r],changedPointers:[r],pointerType:jw,srcEvent:r}))},e})(Za),$J=2500,jD=25;function zD(i){var e=i.changedPointers,t=e[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},r=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=r.indexOf(n);a>-1&&r.splice(a,1)};setTimeout(s,$J)}}function jJ(i,e){i&Ut?(this.primaryTouch=e.changedPointers[0].identifier,zD.call(this,e)):i&(pt|si)&&zD.call(this,e)}function zJ(i){for(var e=i.srcEvent.clientX,t=i.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(t-r.y);if(s<=jD&&o<=jD)return!0}return!1}var R2=(function(){var i=(function(e){$i(t,e);function t(r,s){var o;return o=e.call(this,r,s)||this,o.handler=function(a,l,c){var u=c.pointerType===Zc,h=c.pointerType===jw;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(u)jJ.call(Mu(Mu(o)),l,c);else if(h&&zJ.call(Mu(Mu(o)),c))return;o.callback(a,l,c)}},o.touch=new qw(o.manager,o.handler),o.mouse=new Ww(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t})(Za);return i})();function GJ(i){var e,t=i.options.inputClass;return t?e=t:yJ?e=T2:_J?e=qw:v2?e=R2:e=Ww,new e(i,OJ)}function qo(i,e,t){return Array.isArray(i)?(tr(i,t[e],t),!0):!1}var Xu=1,Ai=2,ba=4,Gr=8,ir=Gr,mc=16,vn=32,qJ=1;function WJ(){return qJ++}function Nu(i,e){var t=e.manager;return t?t.get(i):i}function GD(i){return i&mc?"cancel":i&Gr?"end":i&ba?"move":i&Ai?"start":""}var tu=(function(){function i(t){t===void 0&&(t={}),this.options=tn({enable:!0},t),this.id=WJ(),this.manager=null,this.state=Xu,this.simultaneous={},this.requireFail=[]}var e=i.prototype;return e.set=function(n){return js(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(qo(n,"recognizeWith",this))return this;var r=this.simultaneous;return n=Nu(n,this),r[n.id]||(r[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return qo(n,"dropRecognizeWith",this)?this:(n=Nu(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(qo(n,"requireFailure",this))return this;var r=this.requireFail;return n=Nu(n,this),Gs(r,n)===-1&&(r.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(qo(n,"dropRequireFailure",this))return this;n=Nu(n,this);var r=Gs(this.requireFail,n);return r>-1&&this.requireFail.splice(r,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var r=this,s=this.state;function o(a){r.manager.emit(a,n)}s<Gr&&o(r.options.event+GD(s)),o(r.options.event),n.additionalEvent&&o(n.additionalEvent),s>=Gr&&o(r.options.event+GD(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=vn},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(vn|Xu)))return!1;n++}return!0},e.recognize=function(n){var r=js({},n);if(!Yd(this.options.enable,[this,r])){this.reset(),this.state=vn;return}this.state&(ir|mc|vn)&&(this.state=Xu),this.state=this.process(r),this.state&(Ai|ba|Gr|mc)&&this.tryEmit(r)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},i})(),Sb=(function(i){$i(e,i);function e(n){var r;return n===void 0&&(n={}),r=i.call(this,tn({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,r.pTime=!1,r.pCenter=!1,r._timer=null,r._input=null,r.count=0,r}var t=e.prototype;return t.getTouchAction=function(){return[wb]},t.process=function(r){var s=this,o=this.options,a=r.pointers.length===o.pointers,l=r.distance<o.threshold,c=r.deltaTime<o.time;if(this.reset(),r.eventType&Ut&&this.count===0)return this.failTimeout();if(l&&c&&a){if(r.eventType!==pt)return this.failTimeout();var u=this.pTime?r.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Ih(this.pCenter,r.center)<o.posThreshold;this.pTime=r.timeStamp,this.pCenter=r.center,!h||!u?this.count=1:this.count+=1,this._input=r;var d=this.count%o.taps;if(d===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=ir,s.tryEmit()},o.interval),Ai):ir}return vn},t.failTimeout=function(){var r=this;return this._timer=setTimeout(function(){r.state=vn},this.options.interval),vn},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===ir&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e})(tu),wa=(function(i){$i(e,i);function e(n){return n===void 0&&(n={}),i.call(this,tn({pointers:1},n))||this}var t=e.prototype;return t.attrTest=function(r){var s=this.options.pointers;return s===0||r.pointers.length===s},t.process=function(r){var s=this.state,o=r.eventType,a=s&(Ai|ba),l=this.attrTest(r);return a&&(o&si||!l)?s|mc:a||l?o&pt?s|Gr:s&Ai?s|ba:Ai:vn},e})(tu);function I2(i){return i===_a?"down":i===eu?"up":i===Qc?"left":i===Jc?"right":""}var Yw=(function(i){$i(e,i);function e(n){var r;return n===void 0&&(n={}),r=i.call(this,tn({event:"pan",threshold:10,pointers:1,direction:y2},n))||this,r.pX=null,r.pY=null,r}var t=e.prototype;return t.getTouchAction=function(){var r=this.options.direction,s=[];return r&xn&&s.push(dc),r&Rs&&s.push(hc),s},t.directionTest=function(r){var s=this.options,o=!0,a=r.distance,l=r.direction,c=r.deltaX,u=r.deltaY;return l&s.direction||(s.direction&xn?(l=c===0?Th:c<0?Qc:Jc,o=c!==this.pX,a=Math.abs(r.deltaX)):(l=u===0?Th:u<0?eu:_a,o=u!==this.pY,a=Math.abs(r.deltaY))),r.direction=l,o&&a>s.threshold&&l&s.direction},t.attrTest=function(r){return wa.prototype.attrTest.call(this,r)&&(this.state&Ai||!(this.state&Ai)&&this.directionTest(r))},t.emit=function(r){this.pX=r.deltaX,this.pY=r.deltaY;var s=I2(r.direction);s&&(r.additionalEvent=this.options.event+s),i.prototype.emit.call(this,r)},e})(wa),O2=(function(i){$i(e,i);function e(n){return n===void 0&&(n={}),i.call(this,tn({event:"swipe",threshold:10,velocity:.3,direction:xn|Rs,pointers:1},n))||this}var t=e.prototype;return t.getTouchAction=function(){return Yw.prototype.getTouchAction.call(this)},t.attrTest=function(r){var s=this.options.direction,o;return s&(xn|Rs)?o=r.overallVelocity:s&xn?o=r.overallVelocityX:s&Rs&&(o=r.overallVelocityY),i.prototype.attrTest.call(this,r)&&s&r.offsetDirection&&r.distance>this.options.threshold&&r.maxPointers===this.options.pointers&&zs(o)>this.options.velocity&&r.eventType&pt},t.emit=function(r){var s=I2(r.offsetDirection);s&&this.manager.emit(this.options.event+s,r),this.manager.emit(this.options.event,r)},e})(wa),P2=(function(i){$i(e,i);function e(n){return n===void 0&&(n={}),i.call(this,tn({event:"pinch",threshold:0,pointers:2},n))||this}var t=e.prototype;return t.getTouchAction=function(){return[Ts]},t.attrTest=function(r){return i.prototype.attrTest.call(this,r)&&(Math.abs(r.scale-1)>this.options.threshold||this.state&Ai)},t.emit=function(r){if(r.scale!==1){var s=r.scale<1?"in":"out";r.additionalEvent=this.options.event+s}i.prototype.emit.call(this,r)},e})(wa),D2=(function(i){$i(e,i);function e(n){return n===void 0&&(n={}),i.call(this,tn({event:"rotate",threshold:0,pointers:2},n))||this}var t=e.prototype;return t.getTouchAction=function(){return[Ts]},t.attrTest=function(r){return i.prototype.attrTest.call(this,r)&&(Math.abs(r.rotation)>this.options.threshold||this.state&Ai)},e})(wa),A2=(function(i){$i(e,i);function e(n){var r;return n===void 0&&(n={}),r=i.call(this,tn({event:"press",pointers:1,time:251,threshold:9},n))||this,r._timer=null,r._input=null,r}var t=e.prototype;return t.getTouchAction=function(){return[g2]},t.process=function(r){var s=this,o=this.options,a=r.pointers.length===o.pointers,l=r.distance<o.threshold,c=r.deltaTime>o.time;if(this._input=r,!l||!a||r.eventType&(pt|si)&&!c)this.reset();else if(r.eventType&Ut)this.reset(),this._timer=setTimeout(function(){s.state=ir,s.tryEmit()},o.time);else if(r.eventType&pt)return ir;return vn},t.reset=function(){clearTimeout(this._timer)},t.emit=function(r){this.state===ir&&(r&&r.eventType&pt?this.manager.emit(this.options.event+"up",r):(this._input.timeStamp=$w(),this.manager.emit(this.options.event,this._input)))},e})(tu),M2={domEvents:!1,touchAction:m2,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},qD=[[D2,{enable:!1}],[P2,{enable:!1},["rotate"]],[O2,{direction:xn}],[Yw,{direction:xn},["swipe"]],[Sb],[Sb,{event:"doubletap",taps:2},["tap"]],[A2]],YJ=1,WD=2;function YD(i,e){var t=i.element;if(t.style){var n;tr(i.options.cssProps,function(r,s){n=Wd(t.style,s),e?(i.oldCssProps[n]=t.style[n],t.style[n]=r):t.style[n]=i.oldCssProps[n]||""}),e||(i.oldCssProps={})}}function BJ(i,e){var t=document.createEvent("Event");t.initEvent(i,!0,!0),t.gesture=e,e.target.dispatchEvent(t)}var BD=(function(){function i(t,n){var r=this;this.options=js({},M2,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=GJ(this),this.touchAction=new b2(this,this.options.touchAction),YD(this,!0),tr(this.options.recognizers,function(s){var o=r.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=i.prototype;return e.set=function(n){return js(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?WD:YJ},e.recognize=function(n){var r=this.session;if(!r.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=r.curRecognizer;(!a||a&&a.state&ir)&&(r.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],r.stopped!==WD&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Ai|ba|Gr)&&(r.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof tu)return n;for(var r=this.recognizers,s=0;s<r.length;s++)if(r[s].options.event===n)return r[s];return null},e.add=function(n){if(qo(n,"add",this))return this;var r=this.get(n.options.event);return r&&this.remove(r),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(qo(n,"remove",this))return this;var r=this.get(n);if(n){var s=this.recognizers,o=Gs(s,r);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,r){if(n===void 0||r===void 0)return this;var s=this.handlers;return tr(fc(n),function(o){s[o]=s[o]||[],s[o].push(r)}),this},e.off=function(n,r){if(n===void 0)return this;var s=this.handlers;return tr(fc(n),function(o){r?s[o]&&s[o].splice(Gs(s[o],r),1):delete s[o]}),this},e.emit=function(n,r){this.options.domEvents&&BJ(n,r);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){r.type=n,r.preventDefault=function(){r.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](r),o++}},e.destroy=function(){this.element&&YD(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},i})(),HJ={touchstart:Ut,touchmove:so,touchend:pt,touchcancel:si},UJ="touchstart",VJ="touchstart touchmove touchend touchcancel",XJ=(function(i){$i(e,i);function e(){var n,r=e.prototype;return r.evTarget=UJ,r.evWin=VJ,n=i.apply(this,arguments)||this,n.started=!1,n}var t=e.prototype;return t.handler=function(r){var s=HJ[r.type];if(s===Ut&&(this.started=!0),!!this.started){var o=KJ.call(this,r,s);s&(pt|si)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Zc,srcEvent:r})}},e})(Za);function KJ(i,e){var t=pc(i.touches),n=pc(i.changedTouches);return e&(pt|si)&&(t=Gw(t.concat(n),"identifier",!0)),[t,n]}function k2(i,e,t){var n="DEPRECATED METHOD: "+e+`
`+t+` AT 
`;return function(){var r=new Error("get-stack-trace"),s=r&&r.stack?r.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),i.apply(this,arguments)}}var N2=k2(function(i,e,t){for(var n=Object.keys(e),r=0;r<n.length;)(!t||t&&i[n[r]]===void 0)&&(i[n[r]]=e[n[r]]),r++;return i},"extend","Use `assign`."),ZJ=k2(function(i,e){return N2(i,e,!0)},"merge","Use `assign`.");function QJ(i,e,t){var n=e.prototype,r;r=i.prototype=Object.create(n),r.constructor=i,r._super=n,t&&js(r,t)}function HD(i,e){return function(){return i.apply(e,arguments)}}var Bw=(function(){var i=function(t,n){return n===void 0&&(n={}),new BD(t,tn({recognizers:qD.concat()},n))};return i.VERSION="2.0.17-rc",i.DIRECTION_ALL=y2,i.DIRECTION_DOWN=_a,i.DIRECTION_LEFT=Qc,i.DIRECTION_RIGHT=Jc,i.DIRECTION_UP=eu,i.DIRECTION_HORIZONTAL=xn,i.DIRECTION_VERTICAL=Rs,i.DIRECTION_NONE=Th,i.DIRECTION_DOWN=_a,i.INPUT_START=Ut,i.INPUT_MOVE=so,i.INPUT_END=pt,i.INPUT_CANCEL=si,i.STATE_POSSIBLE=Xu,i.STATE_BEGAN=Ai,i.STATE_CHANGED=ba,i.STATE_ENDED=Gr,i.STATE_RECOGNIZED=ir,i.STATE_CANCELLED=mc,i.STATE_FAILED=vn,i.Manager=BD,i.Input=Za,i.TouchAction=b2,i.TouchInput=qw,i.MouseInput=Ww,i.PointerEventInput=T2,i.TouchMouseInput=R2,i.SingleTouchInput=XJ,i.Recognizer=tu,i.AttrRecognizer=wa,i.Tap=Sb,i.Pan=Yw,i.Swipe=O2,i.Pinch=P2,i.Rotate=D2,i.Press=A2,i.on=kl,i.off=Nl,i.each=tr,i.merge=ZJ,i.extend=N2,i.bindFn=HD,i.assign=js,i.inherit=QJ,i.bindFn=HD,i.prefixed=Wd,i.toArray=pc,i.inArray=Gs,i.uniqueArray=Gw,i.splitStr=fc,i.boolOrFn=Yd,i.hasParent=zw,i.addEventListeners=kl,i.removeEventListeners=Nl,i.defaults=js({},M2,{preset:qD}),i})();Bw.defaults;/**
 * vis-util
 * https://github.com/visjs/vis-util
 *
 * utilitie collection for visjs
 *
 * @version 6.0.0
 * @date    2025-07-12T18:02:43.836Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */const Hw=Symbol("DELETE");function L2(i,...e){return Uw({},i,...e)}function Uw(...i){const e=Oh(...i);return $2(e),e}function Oh(...i){if(i.length<2)return i[0];if(i.length>2)return Oh(Uw(i[0],i[1]),...i.slice(2));const e=i[0],t=i[1];if(e instanceof Date&&t instanceof Date)return e.setTime(t.getTime()),e;for(const n of Reflect.ownKeys(t))Object.prototype.propertyIsEnumerable.call(t,n)&&(t[n]===Hw?delete e[n]:e[n]!==null&&t[n]!==null&&typeof e[n]=="object"&&typeof t[n]=="object"&&!Array.isArray(e[n])&&!Array.isArray(t[n])?e[n]=Oh(e[n],t[n]):e[n]=F2(t[n]));return e}function F2(i){return Array.isArray(i)?i.map(e=>F2(e)):typeof i=="object"&&i!==null?i instanceof Date?new Date(i.getTime()):Oh({},i):i}function $2(i){for(const e of Object.keys(i))i[e]===Hw?delete i[e]:typeof i[e]=="object"&&i[e]!==null&&$2(i[e])}function JJ(...i){return eee(i.length?i:[Date.now()])}function eee(i){let[e,t,n]=tee(i),r=1;const s=()=>{const o=2091639*e+r*23283064365386963e-26;return e=t,t=n,n=o-(r=o|0)};return s.uint32=()=>s()*4294967296,s.fract53=()=>s()+(s()*2097152|0)*11102230246251565e-32,s.algorithm="Alea",s.seed=i,s.version="0.9",s}function tee(...i){const e=iee();let t=e(" "),n=e(" "),r=e(" ");for(let s=0;s<i.length;s++)t-=e(i[s]),t<0&&(t+=1),n-=e(i[s]),n<0&&(n+=1),r-=e(i[s]),r<0&&(r+=1);return[t,n,r]}function iee(){let i=4022871197;return function(e){const t=e.toString();for(let n=0;n<t.length;n++){i+=t.charCodeAt(n);let r=.02519603282416938*i;i=r>>>0,r-=i,r*=i,i=r>>>0,r-=i,i+=r*4294967296}return(i>>>0)*23283064365386963e-26}}function nee(){const i=()=>{};return{on:i,off:i,destroy:i,emit:i,get(){return{set:i}}}}const Vw=typeof window<"u"?window.Hammer||Bw:function(){return nee()};function yn(i){this._cleanupQueue=[],this.active=!1,this._dom={container:i,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const e=Vw(this._dom.overlay);e.on("tap",this._onTapOverlay.bind(this)),this._cleanupQueue.push(()=>{e.destroy()}),["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(n=>{e.on(n,r=>{r.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=n=>{ree(n.target,i)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=n=>{("key"in n?n.key==="Escape":n.keyCode===27)&&this.deactivate()}}Fw(yn.prototype);yn.current=null;yn.prototype.destroy=function(){this.deactivate();for(const i of this._cleanupQueue.splice(0).reverse())i()};yn.prototype.activate=function(){yn.current&&yn.current.deactivate(),yn.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};yn.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};yn.prototype._onTapOverlay=function(i){this.activate(),i.srcEvent.stopPropagation()};function ree(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}const see=/^\/?Date\((-?\d+)/i,oee=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,aee=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,lee=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,cee=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function Ll(i){return i instanceof Number||typeof i=="number"}function j2(i){if(i)for(;i.hasChildNodes()===!0;){const e=i.firstChild;e&&(j2(e),i.removeChild(e))}}function pi(i){return i instanceof String||typeof i=="string"}function Eb(i){return typeof i=="object"&&i!==null}function uee(i){if(i instanceof Date)return!0;if(pi(i)){if(see.exec(i))return!0;if(!isNaN(Date.parse(i)))return!0}return!1}function qs(i,e,t,n){let r=!1;n===!0&&(r=e[t]===null&&i[t]!==void 0),r?delete i[t]:i[t]=e[t]}function z2(i,e,t=!1){for(const n in i)if(e[n]!==void 0)if(e[n]===null||typeof e[n]!="object")qs(i,e,n,t);else{const r=i[n],s=e[n];Eb(r)&&Eb(s)&&z2(r,s,t)}}const hee=Object.assign;function dee(i,e,...t){if(!Array.isArray(i))throw new Error("Array with property names expected as first argument");for(const n of t)for(let r=0;r<i.length;r++){const s=i[r];n&&Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}function fee(i,e,t,n=!1){if(Array.isArray(t))throw new TypeError("Arrays are not supported by deepExtend");for(let r=0;r<i.length;r++){const s=i[r];if(Object.prototype.hasOwnProperty.call(t,s))if(t[s]&&t[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?gc(e[s],t[s],!1,n):qs(e,t,s,n);else{if(Array.isArray(t[s]))throw new TypeError("Arrays are not supported by deepExtend");qs(e,t,s,n)}}return e}function pee(i,e,t,n=!1){if(Array.isArray(t))throw new TypeError("Arrays are not supported by deepExtend");for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&!i.includes(r))if(t[r]&&t[r].constructor===Object)e[r]===void 0&&(e[r]={}),e[r].constructor===Object?gc(e[r],t[r]):qs(e,t,r,n);else if(Array.isArray(t[r])){e[r]=[];for(let s=0;s<t[r].length;s++)e[r].push(t[r][s])}else qs(e,t,r,n);return e}function gc(i,e,t=!1,n=!1){for(const r in e)(Object.prototype.hasOwnProperty.call(e,r)||t===!0)&&(typeof e[r]=="object"&&e[r]!==null&&Object.getPrototypeOf(e[r])===Object.prototype?i[r]===void 0?i[r]=gc({},e[r],t):typeof i[r]=="object"&&i[r]!==null&&Object.getPrototypeOf(i[r])===Object.prototype?gc(i[r],e[r],t):qs(i,e,r,n):Array.isArray(e[r])?i[r]=e[r].slice():qs(i,e,r,n));return i}function mee(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!=e[t])return!1;return!0}function El(i){const e=typeof i;return e==="object"?i===null?"null":i instanceof Boolean?"Boolean":i instanceof Number?"Number":i instanceof String?"String":Array.isArray(i)?"Array":i instanceof Date?"Date":"Object":e==="number"?"Number":e==="boolean"?"Boolean":e==="string"?"String":e===void 0?"undefined":e}function vc(i,e){return[...i,e]}function G2(i){return i.slice()}function gee(i){return i.getBoundingClientRect().left}function vee(i){return i.getBoundingClientRect().right}function yee(i){return i.getBoundingClientRect().top}function _ee(i,e){let t=i.className.split(" ");const n=e.split(" ");t=t.concat(n.filter(function(r){return!t.includes(r)})),i.className=t.join(" ")}function bee(i,e){let t=i.className.split(" ");const n=e.split(" ");t=t.filter(function(r){return!n.includes(r)}),i.className=t.join(" ")}function wee(i,e){if(Array.isArray(i)){const t=i.length;for(let n=0;n<t;n++)e(i[n],n,i)}else for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(i[t],t,i)}const xee=Object.values;function See(i,e,t){return i[e]!==t?(i[e]=t,!0):!1}function Eee(i){let e=!1;return()=>{e||(e=!0,requestAnimationFrame(()=>{e=!1,i()}))}}function Cee(i){i||(i=window.event),i&&(i.preventDefault?i.preventDefault():i.returnValue=!1)}function Tee(i=window.event){let e=null;return i&&(i.target?e=i.target:i.srcElement&&(e=i.srcElement)),!(e instanceof Element)||e.nodeType!=null&&e.nodeType==3&&(e=e.parentNode,!(e instanceof Element))?null:e}function Ree(i,e){let t=i;for(;t;){if(t===e)return!0;if(t.parentNode)t=t.parentNode;else return!1}return!1}const Iee={asBoolean(i,e){return typeof i=="function"&&(i=i()),i!=null?i!=!1:e||null},asNumber(i,e){return typeof i=="function"&&(i=i()),i!=null?Number(i)||e||null:e||null},asString(i,e){return typeof i=="function"&&(i=i()),i!=null?String(i):e||null},asSize(i,e){return typeof i=="function"&&(i=i()),pi(i)?i:Ll(i)?i+"px":e||null},asElement(i,e){return typeof i=="function"&&(i=i()),i||e||null}};function Bd(i){let e;switch(i.length){case 3:case 4:return e=aee.exec(i),e?{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16)}:null;case 6:case 7:return e=oee.exec(i),e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null;default:return null}}function Oee(i,e){if(i.includes("rgba"))return i;if(i.includes("rgb")){const t=i.substr(i.indexOf("(")+1).replace(")","").split(",");return"rgba("+t[0]+","+t[1]+","+t[2]+","+e+")"}else{const t=Bd(i);return t==null?i:"rgba("+t.r+","+t.g+","+t.b+","+e+")"}}function Xw(i,e,t){return"#"+((1<<24)+(i<<16)+(e<<8)+t).toString(16).slice(1)}function Pee(i,e){if(pi(i)){let t=i;if(Zw(t)){const n=t.substr(4).substr(0,t.length-5).split(",").map(function(r){return parseInt(r)});t=Xw(n[0],n[1],n[2])}if(Kw(t)===!0){const n=W2(t),r={h:n.h,s:n.s*.8,v:Math.min(1,n.v*1.02)},s={h:n.h,s:Math.min(1,n.s*1.25),v:n.v*.8},o=Cb(s.h,s.s,s.v),a=Cb(r.h,r.s,r.v);return{background:t,border:o,highlight:{background:a,border:o},hover:{background:a,border:o}}}else return{background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else return e?{background:i.background||e.background,border:i.border||e.border,highlight:pi(i.highlight)?{border:i.highlight,background:i.highlight}:{background:i.highlight&&i.highlight.background||e.highlight.background,border:i.highlight&&i.highlight.border||e.highlight.border},hover:pi(i.hover)?{border:i.hover,background:i.hover}:{border:i.hover&&i.hover.border||e.hover.border,background:i.hover&&i.hover.background||e.hover.background}}:{background:i.background||void 0,border:i.border||void 0,highlight:pi(i.highlight)?{border:i.highlight,background:i.highlight}:{background:i.highlight&&i.highlight.background||void 0,border:i.highlight&&i.highlight.border||void 0},hover:pi(i.hover)?{border:i.hover,background:i.hover}:{border:i.hover&&i.hover.border||void 0,background:i.hover&&i.hover.background||void 0}}}function Wo(i,e,t){i=i/255,e=e/255,t=t/255;const n=Math.min(i,Math.min(e,t)),r=Math.max(i,Math.max(e,t));if(n===r)return{h:0,s:0,v:n};const s=i===n?e-t:t===n?i-e:t-i,a=60*((i===n?3:t===n?1:5)-s/(r-n))/360,l=(r-n)/r;return{h:a,s:l,v:r}}function q2(i){const e=document.createElement("div"),t={};e.style.cssText=i;for(let n=0;n<e.style.length;++n)t[e.style[n]]=e.style.getPropertyValue(e.style[n]);return t}function Dee(i,e){const t=q2(e);for(const[n,r]of Object.entries(t))i.style.setProperty(n,r)}function Aee(i,e){const t=q2(e);for(const n of Object.keys(t))i.style.removeProperty(n)}function Fl(i,e,t){let n,r,s;const o=Math.floor(i*6),a=i*6-o,l=t*(1-e),c=t*(1-a*e),u=t*(1-(1-a)*e);switch(o%6){case 0:n=t,r=u,s=l;break;case 1:n=c,r=t,s=l;break;case 2:n=l,r=t,s=u;break;case 3:n=l,r=c,s=t;break;case 4:n=u,r=l,s=t;break;case 5:n=t,r=l,s=c;break}return{r:Math.floor(n*255),g:Math.floor(r*255),b:Math.floor(s*255)}}function Cb(i,e,t){const n=Fl(i,e,t);return Xw(n.r,n.g,n.b)}function W2(i){const e=Bd(i);if(!e)throw new TypeError(`'${i}' is not a valid color.`);return Wo(e.r,e.g,e.b)}function Kw(i){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(i)}function Zw(i){return lee.test(i)}function Y2(i){return cee.test(i)}function Mee(i,e){if(e!==null&&typeof e=="object"){const t=Object.create(e);for(let n=0;n<i.length;n++)Object.prototype.hasOwnProperty.call(e,i[n])&&typeof e[i[n]]=="object"&&(t[i[n]]=Qw(e[i[n]]));return t}else return null}function Qw(i){if(i===null||typeof i!="object")return null;if(i instanceof Element)return i;const e=Object.create(i);for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&typeof i[t]=="object"&&(e[t]=Qw(i[t]));return e}function kee(i,e){for(let t=0;t<i.length;t++){const n=i[t];let r;for(r=t;r>0&&e(n,i[r-1])<0;r--)i[r]=i[r-1];i[r]=n}return i}function Nee(i,e,t,n={}){const r=function(f){return f!=null},s=function(f){return f!==null&&typeof f=="object"},o=function(f){for(const p in f)if(Object.prototype.hasOwnProperty.call(f,p))return!1;return!0};if(!s(i))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!r(t))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");const a=function(f,p,m){s(f[m])||(f[m]={});const g=p[m],v=f[m];for(const y in g)Object.prototype.hasOwnProperty.call(g,y)&&(v[y]=g[y])},l=e[t],u=s(n)&&!o(n)?n[t]:void 0,h=u?u.enabled:void 0;if(l===void 0)return;if(typeof l=="boolean"){s(i[t])||(i[t]={}),i[t].enabled=l;return}if(l===null&&!s(i[t]))if(r(u))i[t]=Object.create(u);else return;if(!s(l))return;let d=!0;l.enabled!==void 0?d=l.enabled:h!==void 0&&(d=u.enabled),a(i,e,t),i[t].enabled=d}function Lee(i,e,t,n){let s=0,o=0,a=i.length-1;for(;o<=a&&s<1e4;){const l=Math.floor((o+a)/2),c=i[l],u=n===void 0?c[t]:c[t][n],h=e(u);if(h==0)return l;h==-1?o=l+1:a=l-1,s++}return-1}function Fee(i,e,t,n,r){let o=0,a=0,l=i.length-1,c,u,h,d;for(r=r??function(f,p){return f==p?0:f<p?-1:1};a<=l&&o<1e4;){if(d=Math.floor(.5*(l+a)),c=i[Math.max(0,d-1)][t],u=i[d][t],h=i[Math.min(i.length-1,d+1)][t],r(u,e)==0)return d;if(r(c,e)<0&&r(u,e)>0)return n=="before"?Math.max(0,d-1):d;if(r(u,e)<0&&r(h,e)>0)return n=="before"?d:Math.min(i.length-1,d+1);r(u,e)<0?a=d+1:l=d-1,o++}return-1}const $ee={linear(i){return i},easeInQuad(i){return i*i},easeOutQuad(i){return i*(2-i)},easeInOutQuad(i){return i<.5?2*i*i:-1+(4-2*i)*i},easeInCubic(i){return i*i*i},easeOutCubic(i){return--i*i*i+1},easeInOutCubic(i){return i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1},easeInQuart(i){return i*i*i*i},easeOutQuart(i){return 1- --i*i*i*i},easeInOutQuart(i){return i<.5?8*i*i*i*i:1-8*--i*i*i*i},easeInQuint(i){return i*i*i*i*i},easeOutQuint(i){return 1+--i*i*i*i*i},easeInOutQuint(i){return i<.5?16*i*i*i*i*i:1+16*--i*i*i*i*i}};function jee(){const i=document.createElement("p");i.style.width="100%",i.style.height="200px";const e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(i),document.body.appendChild(e);const t=i.offsetWidth;e.style.overflow="scroll";let n=i.offsetWidth;return t==n&&(n=e.clientWidth),document.body.removeChild(e),t-n}function zee(i,e){let t;Array.isArray(e)||(e=[e]);for(const n of i)if(n){t=n[e[0]];for(let r=1;r<e.length;r++)t&&(t=t[e[r]]);if(typeof t<"u")break}return t}const Gee={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let B2=class{constructor(e=1){this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return Gee[e]}setColor(e,t=!0){if(e==="none")return;let n;const r=this._isColorString(e);if(r!==void 0&&(e=r),pi(e)===!0){if(Zw(e)===!0){const s=e.substr(4).substr(0,e.length-5).split(",");n={r:s[0],g:s[1],b:s[2],a:1}}else if(Y2(e)===!0){const s=e.substr(5).substr(0,e.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(Kw(e)===!0){const s=Bd(e);n={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const s=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:s}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(e));this._setColor(n,t)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(e=!0){e===!0&&(this.previousColor=Object.assign({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e,t=!0){t===!0&&(this.initialColor=Object.assign({},e)),this.color=e;const n=Wo(e.r,e.g,e.b),r=2*Math.PI,s=this.r*n.s,o=this.centerCoordinates.x+s*Math.sin(r*n.h),a=this.centerCoordinates.y+s*Math.cos(r*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const t=Wo(this.color.r,this.color.g,this.color.b);t.v=e/100;const n=Fl(t.h,t.s,t.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(e=this.color){const t=Wo(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,r,s),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-t.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),n.fill(),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const t=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(t)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const e=this;this.opacityRange.onchange=function(){e._setOpacity(this.value)},this.opacityRange.oninput=function(){e._setOpacity(this.value)},this.brightnessRange.onchange=function(){e._setBrightness(this.value)},this.brightnessRange.oninput=function(){e._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new Vw(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const t=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,t,n);let r,s,o,a;this.centerCoordinates={x:t*.5,y:n*.5},this.r=.49*t;const l=2*Math.PI/360,c=1/360,u=1/this.r;let h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)r=this.centerCoordinates.x+a*Math.sin(l*o),s=this.centerCoordinates.y+a*Math.cos(l*o),h=Fl(o*c,a*u,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(r-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,t,n)}this.generated=!0}_moveSelector(e){const t=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-t.left,r=e.center.y-t.top,s=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,l=r-s,c=Math.atan2(a,l),u=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(c)*u+s,d=Math.sin(c)*u+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=d-.5*this.colorPickerSelector.clientWidth+"px";let f=c/(2*Math.PI);f=f<0?f+1:f;const p=u/this.r,m=Wo(this.color.r,this.color.g,this.color.b);m.h=f,m.s=p;const g=Fl(m.h,m.s,m.v);g.a=this.color.a,this.color=g,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function Tb(...i){if(i.length<1)throw new TypeError("Invalid arguments.");if(i.length===1)return document.createTextNode(i[0]);{const e=document.createElement(i[0]);return e.appendChild(Tb(...i.slice(1))),e}}let qee=class{constructor(e,t,n,r=1,s=()=>!1){this.parent=e,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Object.assign(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new B2(r),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let t=!0;if(typeof e=="string")this.options.filter=e;else if(Array.isArray(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),e.filter!==void 0&&(this.options.filter=e.filter),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(t=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,t=e):typeof e=="function"&&(this.options.filter=e,t=!0);this.options.filter===!1&&(t=!1),this.options.enabled=t}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=this.options.filter;let t=0,n=!1;for(const r in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,r)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(r,[]),n=n||this._handleObject(this.configureOptions[r],[r],!0)):(e===!0||e.indexOf(r)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,t>0&&this._makeItem([]),this._makeHeader(r),this._handleObject(this.configureOptions[r],[r])),t++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let t=this.moduleOptions;for(let n=0;n<e.length;n++)if(t[e[n]]!==void 0)t=t[e[n]];else{t=void 0;break}return t}_makeItem(e,...t){if(this.allowCreation===!0){const n=document.createElement("div");return n.className="vis-configuration vis-config-item vis-config-s"+e.length,t.forEach(r=>{n.appendChild(r)}),this.domElements.push(n),this.domElements.length}return 0}_makeHeader(e){const t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerText=e,this._makeItem([],t)}_makeLabel(e,t,n=!1){const r=document.createElement("div");if(r.className="vis-configuration vis-config-label vis-config-s"+t.length,n===!0){for(;r.firstChild;)r.removeChild(r.firstChild);r.appendChild(Tb("i","b",e))}else r.innerText=e+":";return r}_makeDropdown(e,t,n){const r=document.createElement("select");r.className="vis-configuration vis-config-select";let s=0;t!==void 0&&e.indexOf(t)!==-1&&(s=e.indexOf(t));for(let l=0;l<e.length;l++){const c=document.createElement("option");c.value=e[l],l===s&&(c.selected="selected"),c.innerText=e[l],r.appendChild(c)}const o=this;r.onchange=function(){o._update(this.value,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,r)}_makeRange(e,t,n){const r=e[0],s=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=o}catch{}l.step=a;let c="",u=0;t!==void 0?(t<0&&t*1.2<s?(l.min=Math.ceil(t*1.2),u=l.min,c="range increased"):t/1.2<s&&(l.min=Math.ceil(t/1.2),u=l.min,c="range increased"),t*1.2>o&&o!==1&&(l.max=Math.ceil(t*1.2),u=l.max,c="range increased"),l.value=t):l.value=r;const h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=l.value;const d=this;l.onchange=function(){h.value=this.value,d._update(Number(this.value),n)},l.oninput=function(){h.value=this.value};const f=this._makeLabel(n[n.length-1],n),p=this._makeItem(n,f,l,h);c!==""&&this.popupHistory[p]!==u&&(this.popupHistory[p]=u,this._setupPopup(c,p))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,t){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=e,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:t}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const t=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=t.left+"px",this.popupDiv.html.style.top=t.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(()=>{this._removePopup()},1800)}}_makeCheckbox(e,t,n){const r=document.createElement("input");r.type="checkbox",r.className="vis-configuration vis-config-checkbox",r.checked=e,t!==void 0&&(r.checked=t,t!==e&&(typeof e=="object"?t!==e.enabled&&this.changedOptions.push({path:n,value:t}):this.changedOptions.push({path:n,value:t})));const s=this;r.onchange=function(){s._update(this.checked,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,r)}_makeTextInput(e,t,n){const r=document.createElement("input");r.type="text",r.className="vis-configuration vis-config-text",r.value=t,t!==e&&this.changedOptions.push({path:n,value:t});const s=this;r.onchange=function(){s._update(this.value,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,r)}_makeColorField(e,t,n){const r=e[1],s=document.createElement("div");t=t===void 0?r:t,t!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=t):s.className="vis-configuration vis-config-colorBlock none",t=t===void 0?r:t,s.onclick=()=>{this._showColorPicker(t,s,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}_showColorPicker(e,t,n){t.onclick=function(){},this.colorPicker.insertTo(t),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(r=>{const s="rgba("+r.r+","+r.g+","+r.b+","+r.a+")";t.style.backgroundColor=s,this._update(s,n)}),this.colorPicker.setCloseCallback(()=>{t.onclick=()=>{this._showColorPicker(e,t,n)}})}_handleObject(e,t=[],n=!1){let r=!1;const s=this.options.filter;let o=!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){r=!0;const l=e[a],c=vc(t,a);if(typeof s=="function"&&(r=s(a,t),r===!1&&!Array.isArray(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,r=this._handleObject(l,c,!0),this.allowCreation=n===!1)),r!==!1){o=!0;const u=this._getValue(c);if(Array.isArray(l))this._handleArray(l,u,c);else if(typeof l=="string")this._makeTextInput(l,u,c);else if(typeof l=="boolean")this._makeCheckbox(l,u,c);else if(l instanceof Object){if(!this.hideOption(t,a,this.moduleOptions))if(l.enabled!==void 0){const h=vc(c,"enabled"),d=this._getValue(h);if(d===!0){const f=this._makeLabel(a,c,!0);this._makeItem(c,f),o=this._handleObject(l,c)||o}else this._makeCheckbox(l,d,c)}else{const h=this._makeLabel(a,c,!0);this._makeItem(c,h),o=this._handleObject(l,c)||o}}else console.error("dont know how to handle",l,a,c)}}return o}_handleArray(e,t,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,t,n),e[1]!==t&&this.changedOptions.push({path:n,value:t})):typeof e[0]=="string"?(this._makeDropdown(e,t,n),e[0]!==t&&this.changedOptions.push({path:n,value:t})):typeof e[0]=="number"&&(this._makeRange(e,t,n),e[0]!==t&&this.changedOptions.push({path:n,value:Number(t)}))}_update(e,t){const n=this._constructOptions(e,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,t,n={}){let r=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<t.length;s++)t[s]!=="global"&&(r[t[s]]===void 0&&(r[t[s]]={}),s!==t.length-1?r=r[t[s]]:r[t[s]]=e);return n}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(Tb("pre","const options = "+JSON.stringify(e,null,2)))}getOptions(){const e={};for(let t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,e);return e}},Wee=class{constructor(e,t){this.container=e,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,t){this.x=parseInt(e),this.y=parseInt(t)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const t=this.frame.clientHeight,n=this.frame.clientWidth,r=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth;let o=0,a=0;if(this.overflowMethod=="flip"){let l=!1,c=!0;this.y-t<this.padding&&(c=!1),this.x+n>s-this.padding&&(l=!0),l?o=this.x-n:o=this.x,c?a=this.y-t:a=this.y}else a=this.y-t,a+t+this.padding>r&&(a=r-t-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+n+this.padding>s&&(o=s-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},pl=!1,UD;const Rb="background: #FFeeee; color: #dd0000";let Yee=class ot{static validate(e,t,n){pl=!1,UD=t;let r=t;return n!==void 0&&(r=t[n]),ot.parse(e,r,[]),pl}static parse(e,t,n){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&ot.check(r,e,t,n)}static check(e,t,n,r){if(n[e]===void 0&&n.__any__===void 0){ot.getSuggestion(e,n,r);return}let s=e,o=!0;n[e]===void 0&&n.__any__!==void 0&&(s="__any__",o=ot.getType(t[e])==="object");let a=n[s];o&&a.__type__!==void 0&&(a=a.__type__),ot.checkFields(e,t,n,s,a,r)}static checkFields(e,t,n,r,s,o){const a=function(u){console.error("%c"+u+ot.printLocation(o,e),Rb)},l=ot.getType(t[e]),c=s[l];c!==void 0?ot.getType(c)==="array"&&c.indexOf(t[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+ot.print(c)+' not "'+t[e]+'". '),pl=!0):l==="object"&&r!=="__any__"&&(o=vc(o,e),ot.parse(t[e],n[r],o)):s.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+ot.print(Object.keys(s))+". Received ["+l+'] "'+t[e]+'"'),pl=!0)}static getType(e){const t=typeof e;return t==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Array.isArray(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":t==="number"?"number":t==="boolean"?"boolean":t==="string"?"string":t===void 0?"undefined":t}static getSuggestion(e,t,n){const r=ot.findInOptions(e,t,n,!1),s=ot.findInOptions(e,UD,[],!0),o=8,a=4;let l;r.indexMatch!==void 0?l=" in "+ot.printLocation(r.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+r.indexMatch+`"?

`:s.distance<=a&&r.distance>s.distance?l=" in "+ot.printLocation(r.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+ot.printLocation(s.path,s.closestMatch,""):r.distance<=o?l='. Did you mean "'+r.closestMatch+'"?'+ot.printLocation(r.path,e):l=". Did you mean one of these: "+ot.print(Object.keys(t))+ot.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+l,Rb),pl=!0}static findInOptions(e,t,n,r=!1){let s=1e9,o="",a=[];const l=e.toLowerCase();let c;for(const u in t){let h;if(t[u].__type__!==void 0&&r===!0){const d=ot.findInOptions(e,t[u],vc(n,u));s>d.distance&&(o=d.closestMatch,a=d.path,s=d.distance,c=d.indexMatch)}else u.toLowerCase().indexOf(l)!==-1&&(c=u),h=ot.levenshteinDistance(e,u),s>h&&(o=u,a=G2(n),s=h)}return{closestMatch:o,path:a,distance:s,indexMatch:c}}static printLocation(e,t,n=`Problem value found at: 
`){let r=`

`+n+`options = {
`;for(let s=0;s<e.length;s++){for(let o=0;o<s+1;o++)r+="  ";r+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)r+="  ";r+=t+`
`;for(let s=0;s<e.length+1;s++){for(let o=0;o<e.length-s;o++)r+="  ";r+=`}
`}return r+`

`}static print(e){return JSON.stringify(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,t){if(e.length===0)return t.length;if(t.length===0)return e.length;const n=[];let r;for(r=0;r<=t.length;r++)n[r]=[r];let s;for(s=0;s<=e.length;s++)n[0][s]=s;for(r=1;r<=t.length;r++)for(s=1;s<=e.length;s++)t.charAt(r-1)==e.charAt(s-1)?n[r][s]=n[r-1][s-1]:n[r][s]=Math.min(n[r-1][s-1]+1,Math.min(n[r][s-1]+1,n[r-1][s]+1));return n[t.length][e.length]}};const Bee=yn,Hee=B2,Uee=qee,Vee=Vw,Xee=Wee,Kee=Rb,Zee=Yee,Qee=Object.freeze(Object.defineProperty({__proto__:null,Activator:Bee,Alea:JJ,ColorPicker:Hee,Configurator:Uee,DELETE:Hw,HSVToHex:Cb,HSVToRGB:Fl,Hammer:Vee,Popup:Xee,RGBToHSV:Wo,RGBToHex:Xw,VALIDATOR_PRINT_STYLE:Kee,Validator:Zee,addClassName:_ee,addCssText:Dee,binarySearchCustom:Lee,binarySearchValue:Fee,bridgeObject:Qw,copyAndExtendArray:vc,copyArray:G2,deepExtend:gc,deepObjectAssign:Uw,easingFunctions:$ee,equalArray:mee,extend:hee,fillIfDefined:z2,forEach:wee,getAbsoluteLeft:gee,getAbsoluteRight:vee,getAbsoluteTop:yee,getScrollBarWidth:jee,getTarget:Tee,getType:El,hasParent:Ree,hexToHSV:W2,hexToRGB:Bd,insertSort:kee,isDate:uee,isNumber:Ll,isObject:Eb,isString:pi,isValidHex:Kw,isValidRGB:Zw,isValidRGBA:Y2,mergeOptions:Nee,option:Iee,overrideOpacity:Oee,parseColor:Pee,preventDefault:Cee,pureDeepObjectAssign:L2,recursiveDOMDelete:j2,removeClassName:bee,removeCssText:Aee,selectiveBridgeObject:Mee,selectiveDeepExtend:fee,selectiveExtend:dee,selectiveNotDeepExtend:pee,throttle:Eee,toArray:xee,topMost:zee,updateProperty:See},Symbol.toStringTag,{value:"Module"})),At=[];for(let i=0;i<256;++i)At.push((i+256).toString(16).slice(1));function Jee(i,e=0){return(At[i[e+0]]+At[i[e+1]]+At[i[e+2]]+At[i[e+3]]+"-"+At[i[e+4]]+At[i[e+5]]+"-"+At[i[e+6]]+At[i[e+7]]+"-"+At[i[e+8]]+At[i[e+9]]+"-"+At[i[e+10]]+At[i[e+11]]+At[i[e+12]]+At[i[e+13]]+At[i[e+14]]+At[i[e+15]]).toLowerCase()}let u_;const ete=new Uint8Array(16);function tte(){if(!u_){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");u_=crypto.getRandomValues.bind(crypto)}return u_(ete)}const ite=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),VD={randomUUID:ite};function nte(i,e,t){i=i||{};const n=i.random??i.rng?.()??tte();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Jee(n)}function Is(i,e,t){return VD.randomUUID&&!i?VD.randomUUID():nte(i)}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function rte(i){return new ote(i)}class ste{_source;_transformers;_target;_listeners={add:this._add.bind(this),remove:this._remove.bind(this),update:this._update.bind(this)};constructor(e,t,n){this._source=e,this._transformers=t,this._target=n}all(){return this._target.update(this._transformItems(this._source.get())),this}start(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}stop(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}_transformItems(e){return this._transformers.reduce((t,n)=>n(t),e)}_add(e,t){t!=null&&this._target.add(this._transformItems(this._source.get(t.items)))}_update(e,t){t!=null&&this._target.update(this._transformItems(this._source.get(t.items)))}_remove(e,t){t!=null&&this._target.remove(this._transformItems(t.oldData))}}class ote{_source;_transformers=[];constructor(e){this._source=e}filter(e){return this._transformers.push(t=>t.filter(e)),this}map(e){return this._transformers.push(t=>t.map(e)),this}flatMap(e){return this._transformers.push(t=>t.flatMap(e)),this}to(e){return new ste(this._source,this._transformers,e)}}function Ib(i){return typeof i=="string"||typeof i=="number"}class Jw{delay;max;_queue=[];_timeout=null;_extended=null;constructor(e){this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,t){const n=new Jw(t);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const r=[{name:"flush",original:void 0}];if(t&&t.replace)for(let s=0;s<t.replace.length;s++){const o=t.replace[s];r.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:r},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,t=this._extended.methods;for(let n=0;n<t.length;n++){const r=t[n];r.original?e[r.name]=r.original:delete e[r.name]}this._extended=null}}replace(e,t){const n=this,r=e[t];if(!r)throw new Error("Method "+t+" undefined");e[t]=function(...s){n.queue({args:s,fn:r,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=setTimeout(()=>{this.flush()},this.delay))}flush(){this._queue.splice(0).forEach(e=>{e.fn.apply(e.context||e.fn,e.args||[])})}}class yc{_subscribers={"*":[],add:[],remove:[],update:[]};_trigger(e,t,n){if(e==="*")throw new Error("Cannot trigger event *");[...this._subscribers[e],...this._subscribers["*"]].forEach(r=>{r(e,t,n??null)})}on(e,t){typeof t=="function"&&this._subscribers[e].push(t)}off(e,t){this._subscribers[e]=this._subscribers[e].filter(n=>n!==t)}subscribe=yc.prototype.on;unsubscribe=yc.prototype.off}class ws{_pairs;constructor(e){this._pairs=e}*[Symbol.iterator](){for(const[e,t]of this._pairs)yield[e,t]}*entries(){for(const[e,t]of this._pairs)yield[e,t]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){return[...this._pairs].map(e=>e[0])}toItemArray(){return[...this._pairs].map(e=>e[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=Object.create(null);for(const[t,n]of this._pairs)e[t]=n;return e}toMap(){return new Map(this._pairs)}toIdSet(){return new Set(this.toIdArray())}toItemSet(){return new Set(this.toItemArray())}cache(){return new ws([...this._pairs])}distinct(e){const t=new Set;for(const[n,r]of this._pairs)t.add(e(r,n));return t}filter(e){const t=this._pairs;return new ws({*[Symbol.iterator](){for(const[n,r]of t)e(r,n)&&(yield[n,r])}})}forEach(e){for(const[t,n]of this._pairs)e(n,t)}map(e){const t=this._pairs;return new ws({*[Symbol.iterator](){for(const[n,r]of t)yield[n,e(r,n)]}})}max(e){const t=this._pairs[Symbol.iterator]();let n=t.next();if(n.done)return null;let r=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=t.next()).done;){const[o,a]=n.value,l=e(a,o);l>s&&(s=l,r=a)}return r}min(e){const t=this._pairs[Symbol.iterator]();let n=t.next();if(n.done)return null;let r=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=t.next()).done;){const[o,a]=n.value,l=e(a,o);l<s&&(s=l,r=a)}return r}reduce(e,t){for(const[n,r]of this._pairs)t=e(t,r,n);return t}sort(e){return new ws({[Symbol.iterator]:()=>[...this._pairs].sort(([t,n],[r,s])=>e(n,s,t,r))[Symbol.iterator]()})}}function ate(i,e){return i[e]==null&&(i[e]=Is()),i}class xa extends yc{flush;length;get idProp(){return this._idProp}_options;_data;_idProp;_queue=null;constructor(e,t){super(),e&&!Array.isArray(e)&&(t=e,e=[]),this._options=t||{},this._data=new Map,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(t)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=Jw.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,t){const n=[];let r;if(Array.isArray(e)){if(e.map(o=>o[this._idProp]).some(o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,a=e.length;o<a;o++)r=this._addItem(e[o]),n.push(r)}else if(e&&typeof e=="object")r=this._addItem(e),n.push(r);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},t),n}update(e,t){const n=[],r=[],s=[],o=[],a=this._idProp,l=c=>{const u=c[a];if(u!=null&&this._data.has(u)){const h=c,d=Object.assign({},this._data.get(u)),f=this._updateItem(h);r.push(f),o.push(h),s.push(d)}else{const h=this._addItem(c);n.push(h)}};if(Array.isArray(e))for(let c=0,u=e.length;c<u;c++)e[c]&&typeof e[c]=="object"?l(e[c]):console.warn("Ignoring input item, which is not an object at index "+c);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},t),r.length){const c={items:r,oldData:s,data:o};this._trigger("update",c,t)}return n.concat(r)}updateOnly(e,t){Array.isArray(e)||(e=[e]);const n=e.map(r=>{const s=this._data.get(r[this._idProp]);if(s==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:s,update:r}}).map(({oldData:r,update:s})=>{const o=r[this._idProp],a=L2(r,s);return this._data.set(o,a),{id:o,oldData:r,updatedData:a}});if(n.length){const r={items:n.map(s=>s.id),oldData:n.map(s=>s.oldData),data:n.map(s=>s.updatedData)};return this._trigger("update",r,t),r.items}else return[]}get(e,t){let n,r,s;Ib(e)?(n=e,s=t):Array.isArray(e)?(r=e,s=t):s=e;const o=s&&s.returnType==="Object"?"Object":"Array",a=s&&s.filter,l=[];let c,u,h;if(n!=null)c=this._data.get(n),c&&a&&!a(c)&&(c=void 0);else if(r!=null)for(let d=0,f=r.length;d<f;d++)c=this._data.get(r[d]),c!=null&&(!a||a(c))&&l.push(c);else{u=[...this._data.keys()];for(let d=0,f=u.length;d<f;d++)h=u[d],c=this._data.get(h),c!=null&&(!a||a(c))&&l.push(c)}if(s&&s.order&&n==null&&this._sort(l,s.order),s&&s.fields){const d=s.fields;if(n!=null&&c!=null)c=this._filterFields(c,d);else for(let f=0,p=l.length;f<p;f++)l[f]=this._filterFields(l[f],d)}if(o=="Object"){const d={};for(let f=0,p=l.length;f<p;f++){const m=l[f],g=m[this._idProp];d[g]=m}return d}else return n!=null?c??null:l}getIds(e){const t=this._data,n=e&&e.filter,r=e&&e.order,s=[...t.keys()],o=[];if(n)if(r){const a=[];for(let l=0,c=s.length;l<c;l++){const u=s[l],h=this._data.get(u);h!=null&&n(h)&&a.push(h)}this._sort(a,r);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],u=this._data.get(c);u!=null&&n(u)&&o.push(u[this._idProp])}else if(r){const a=[];for(let l=0,c=s.length;l<c;l++){const u=s[l];a.push(t.get(u))}this._sort(a,r);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],u=t.get(c);u!=null&&o.push(u[this._idProp])}return o}getDataSet(){return this}forEach(e,t){const n=t&&t.filter,s=[...this._data.keys()];if(t&&t.order){const o=this.get(t);for(let a=0,l=o.length;a<l;a++){const c=o[a],u=c[this._idProp];e(c,u)}}else for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._data.get(l);c!=null&&(!n||n(c))&&e(c,l)}}map(e,t){const n=t&&t.filter,r=[],o=[...this._data.keys()];for(let a=0,l=o.length;a<l;a++){const c=o[a],u=this._data.get(c);u!=null&&(!n||n(u))&&r.push(e(u,c))}return t&&t.order&&this._sort(r,t.order),r}_filterFields(e,t){return e&&(Array.isArray(t)?t:Object.keys(t)).reduce((n,r)=>(n[r]=e[r],n),{})}_sort(e,t){if(typeof t=="string"){const n=t;e.sort((r,s)=>{const o=r[n],a=s[n];return o>a?1:o<a?-1:0})}else if(typeof t=="function")e.sort(t);else throw new TypeError("Order must be a function or a string")}remove(e,t){const n=[],r=[],s=Array.isArray(e)?e:[e];for(let o=0,a=s.length;o<a;o++){const l=this._remove(s[o]);if(l){const c=l[this._idProp];c!=null&&(n.push(c),r.push(l))}}return n.length&&this._trigger("remove",{items:n,oldData:r},t),n}_remove(e){let t;if(Ib(e)?t=e:e&&typeof e=="object"&&(t=e[this._idProp]),t!=null&&this._data.has(t)){const n=this._data.get(t)||null;return this._data.delete(t),--this.length,n}return null}clear(e){const t=[...this._data.keys()],n=[];for(let r=0,s=t.length;r<s;r++)n.push(this._data.get(t[r]));return this._data.clear(),this.length=0,this._trigger("remove",{items:t,oldData:n},e),t}max(e){let t=null,n=null;for(const r of this._data.values()){const s=r[e];typeof s=="number"&&(n==null||s>n)&&(t=r,n=s)}return t||null}min(e){let t=null,n=null;for(const r of this._data.values()){const s=r[e];typeof s=="number"&&(n==null||s<n)&&(t=r,n=s)}return t||null}distinct(e){const t=this._data,n=[...t.keys()],r=[];let s=0;for(let o=0,a=n.length;o<a;o++){const l=n[o],u=t.get(l)[e];let h=!1;for(let d=0;d<s;d++)if(r[d]==u){h=!0;break}!h&&u!==void 0&&(r[s]=u,s++)}return r}_addItem(e){const t=ate(e,this._idProp),n=t[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,t),++this.length,n}_updateItem(e){const t=e[this._idProp];if(t==null)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(e)+")");const n=this._data.get(t);if(!n)throw new Error("Cannot update item: no item with id "+t+" found");return this._data.set(t,{...n,...e}),t}stream(e){if(e){const t=this._data;return new ws({*[Symbol.iterator](){for(const n of e){const r=t.get(n);r!=null&&(yield[n,r])}}})}else return new ws({[Symbol.iterator]:this._data.entries.bind(this._data)})}}class ex extends yc{length=0;get idProp(){return this.getDataSet().idProp}_listener;_data;_ids=new Set;_options;constructor(e,t){super(),this._options=t||{},this._listener=this._onEvent.bind(this),this.setData(e)}setData(e){if(this._data){this._data.off&&this._data.off("*",this._listener);const t=this._data.getIds({filter:this._options.filter}),n=this._data.get(t);this._ids.clear(),this.length=0,this._trigger("remove",{items:t,oldData:n})}if(e!=null){this._data=e;const t=this._data.getIds({filter:this._options.filter});for(let n=0,r=t.length;n<r;n++){const s=t[n];this._ids.add(s)}this.length=t.length,this._trigger("add",{items:t})}else this._data=new xa;this._data.on&&this._data.on("*",this._listener)}refresh(){const e=this._data.getIds({filter:this._options.filter}),t=[...this._ids],n={},r=[],s=[],o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];n[c]=!0,this._ids.has(c)||(r.push(c),this._ids.add(c))}for(let a=0,l=t.length;a<l;a++){const c=t[a],u=this._data.get(c);u==null?console.error("If you see this, report it please."):n[c]||(s.push(c),o.push(u),this._ids.delete(c))}this.length+=r.length-s.length,r.length&&this._trigger("add",{items:r}),s.length&&this._trigger("remove",{items:s,oldData:o})}get(e,t){if(this._data==null)return null;let n=null,r;Ib(e)||Array.isArray(e)?(n=e,r=t):r=e;const s=Object.assign({},this._options,r),o=this._options.filter,a=r&&r.filter;return o&&a&&(s.filter=l=>o(l)&&a(l)),n==null?this._data.get(s):this._data.get(n,s)}getIds(e){if(this._data.length){const t=this._options.filter,n=e!=null?e.filter:null;let r;return n?t?r=s=>t(s)&&n(s):r=n:r=t,this._data.getIds({filter:r,order:e&&e.order})}else return[]}forEach(e,t){if(this._data){const n=this._options.filter,r=t&&t.filter;let s;r?n?s=function(o){return n(o)&&r(o)}:s=r:s=n,this._data.forEach(e,{filter:s,order:t&&t.order})}}map(e,t){if(this._data){const n=this._options.filter,r=t&&t.filter;let s;return r?n?s=o=>n(o)&&r(o):s=r:s=n,this._data.map(e,{filter:s,order:t&&t.order})}else return[]}getDataSet(){return this._data.getDataSet()}stream(e){return this._data.stream(e||{[Symbol.iterator]:this._ids.keys.bind(this._ids)})}dispose(){this._data?.off&&this._data.off("*",this._listener);const e="This data view has already been disposed of.",t={get:()=>{throw new Error(e)},set:()=>{throw new Error(e)},configurable:!1};for(const n of Reflect.ownKeys(ex.prototype))Object.defineProperty(this,n,t)}_onEvent(e,t,n){if(!t||!t.items||!this._data)return;const r=t.items,s=[],o=[],a=[],l=[],c=[],u=[];switch(e){case"add":for(let h=0,d=r.length;h<d;h++){const f=r[h];this.get(f)&&(this._ids.add(f),s.push(f))}break;case"update":for(let h=0,d=r.length;h<d;h++){const f=r[h];this.get(f)?this._ids.has(f)?(o.push(f),c.push(t.data[h]),l.push(t.oldData[h])):(this._ids.add(f),s.push(f)):this._ids.has(f)&&(this._ids.delete(f),a.push(f),u.push(t.oldData[h]))}break;case"remove":for(let h=0,d=r.length;h<d;h++){const f=r[h];this._ids.has(f)&&(this._ids.delete(f),a.push(f),u.push(t.oldData[h]))}break}this.length+=s.length-a.length,s.length&&this._trigger("add",{items:s},n),o.length&&this._trigger("update",{items:o,oldData:l,data:c},n),a.length&&this._trigger("remove",{items:a,oldData:u},n)}}function lte(i,e){return typeof e=="object"&&e!==null&&i===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof e.forEach=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof e.map=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function cte(i,e){return typeof e=="object"&&e!==null&&i===e.idProp&&typeof e.forEach=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof e.map=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&lte(i,e.getDataSet())}var Lu={exports:{}},Ke={},Fu={exports:{}},ls={},XD;function H2(){if(XD)return ls;XD=1;function i(){var s={};return s["align-content"]=!1,s["align-items"]=!1,s["align-self"]=!1,s["alignment-adjust"]=!1,s["alignment-baseline"]=!1,s.all=!1,s["anchor-point"]=!1,s.animation=!1,s["animation-delay"]=!1,s["animation-direction"]=!1,s["animation-duration"]=!1,s["animation-fill-mode"]=!1,s["animation-iteration-count"]=!1,s["animation-name"]=!1,s["animation-play-state"]=!1,s["animation-timing-function"]=!1,s.azimuth=!1,s["backface-visibility"]=!1,s.background=!0,s["background-attachment"]=!0,s["background-clip"]=!0,s["background-color"]=!0,s["background-image"]=!0,s["background-origin"]=!0,s["background-position"]=!0,s["background-repeat"]=!0,s["background-size"]=!0,s["baseline-shift"]=!1,s.binding=!1,s.bleed=!1,s["bookmark-label"]=!1,s["bookmark-level"]=!1,s["bookmark-state"]=!1,s.border=!0,s["border-bottom"]=!0,s["border-bottom-color"]=!0,s["border-bottom-left-radius"]=!0,s["border-bottom-right-radius"]=!0,s["border-bottom-style"]=!0,s["border-bottom-width"]=!0,s["border-collapse"]=!0,s["border-color"]=!0,s["border-image"]=!0,s["border-image-outset"]=!0,s["border-image-repeat"]=!0,s["border-image-slice"]=!0,s["border-image-source"]=!0,s["border-image-width"]=!0,s["border-left"]=!0,s["border-left-color"]=!0,s["border-left-style"]=!0,s["border-left-width"]=!0,s["border-radius"]=!0,s["border-right"]=!0,s["border-right-color"]=!0,s["border-right-style"]=!0,s["border-right-width"]=!0,s["border-spacing"]=!0,s["border-style"]=!0,s["border-top"]=!0,s["border-top-color"]=!0,s["border-top-left-radius"]=!0,s["border-top-right-radius"]=!0,s["border-top-style"]=!0,s["border-top-width"]=!0,s["border-width"]=!0,s.bottom=!1,s["box-decoration-break"]=!0,s["box-shadow"]=!0,s["box-sizing"]=!0,s["box-snap"]=!0,s["box-suppress"]=!0,s["break-after"]=!0,s["break-before"]=!0,s["break-inside"]=!0,s["caption-side"]=!1,s.chains=!1,s.clear=!0,s.clip=!1,s["clip-path"]=!1,s["clip-rule"]=!1,s.color=!0,s["color-interpolation-filters"]=!0,s["column-count"]=!1,s["column-fill"]=!1,s["column-gap"]=!1,s["column-rule"]=!1,s["column-rule-color"]=!1,s["column-rule-style"]=!1,s["column-rule-width"]=!1,s["column-span"]=!1,s["column-width"]=!1,s.columns=!1,s.contain=!1,s.content=!1,s["counter-increment"]=!1,s["counter-reset"]=!1,s["counter-set"]=!1,s.crop=!1,s.cue=!1,s["cue-after"]=!1,s["cue-before"]=!1,s.cursor=!1,s.direction=!1,s.display=!0,s["display-inside"]=!0,s["display-list"]=!0,s["display-outside"]=!0,s["dominant-baseline"]=!1,s.elevation=!1,s["empty-cells"]=!1,s.filter=!1,s.flex=!1,s["flex-basis"]=!1,s["flex-direction"]=!1,s["flex-flow"]=!1,s["flex-grow"]=!1,s["flex-shrink"]=!1,s["flex-wrap"]=!1,s.float=!1,s["float-offset"]=!1,s["flood-color"]=!1,s["flood-opacity"]=!1,s["flow-from"]=!1,s["flow-into"]=!1,s.font=!0,s["font-family"]=!0,s["font-feature-settings"]=!0,s["font-kerning"]=!0,s["font-language-override"]=!0,s["font-size"]=!0,s["font-size-adjust"]=!0,s["font-stretch"]=!0,s["font-style"]=!0,s["font-synthesis"]=!0,s["font-variant"]=!0,s["font-variant-alternates"]=!0,s["font-variant-caps"]=!0,s["font-variant-east-asian"]=!0,s["font-variant-ligatures"]=!0,s["font-variant-numeric"]=!0,s["font-variant-position"]=!0,s["font-weight"]=!0,s.grid=!1,s["grid-area"]=!1,s["grid-auto-columns"]=!1,s["grid-auto-flow"]=!1,s["grid-auto-rows"]=!1,s["grid-column"]=!1,s["grid-column-end"]=!1,s["grid-column-start"]=!1,s["grid-row"]=!1,s["grid-row-end"]=!1,s["grid-row-start"]=!1,s["grid-template"]=!1,s["grid-template-areas"]=!1,s["grid-template-columns"]=!1,s["grid-template-rows"]=!1,s["hanging-punctuation"]=!1,s.height=!0,s.hyphens=!1,s.icon=!1,s["image-orientation"]=!1,s["image-resolution"]=!1,s["ime-mode"]=!1,s["initial-letters"]=!1,s["inline-box-align"]=!1,s["justify-content"]=!1,s["justify-items"]=!1,s["justify-self"]=!1,s.left=!1,s["letter-spacing"]=!0,s["lighting-color"]=!0,s["line-box-contain"]=!1,s["line-break"]=!1,s["line-grid"]=!1,s["line-height"]=!1,s["line-snap"]=!1,s["line-stacking"]=!1,s["line-stacking-ruby"]=!1,s["line-stacking-shift"]=!1,s["line-stacking-strategy"]=!1,s["list-style"]=!0,s["list-style-image"]=!0,s["list-style-position"]=!0,s["list-style-type"]=!0,s.margin=!0,s["margin-bottom"]=!0,s["margin-left"]=!0,s["margin-right"]=!0,s["margin-top"]=!0,s["marker-offset"]=!1,s["marker-side"]=!1,s.marks=!1,s.mask=!1,s["mask-box"]=!1,s["mask-box-outset"]=!1,s["mask-box-repeat"]=!1,s["mask-box-slice"]=!1,s["mask-box-source"]=!1,s["mask-box-width"]=!1,s["mask-clip"]=!1,s["mask-image"]=!1,s["mask-origin"]=!1,s["mask-position"]=!1,s["mask-repeat"]=!1,s["mask-size"]=!1,s["mask-source-type"]=!1,s["mask-type"]=!1,s["max-height"]=!0,s["max-lines"]=!1,s["max-width"]=!0,s["min-height"]=!0,s["min-width"]=!0,s["move-to"]=!1,s["nav-down"]=!1,s["nav-index"]=!1,s["nav-left"]=!1,s["nav-right"]=!1,s["nav-up"]=!1,s["object-fit"]=!1,s["object-position"]=!1,s.opacity=!1,s.order=!1,s.orphans=!1,s.outline=!1,s["outline-color"]=!1,s["outline-offset"]=!1,s["outline-style"]=!1,s["outline-width"]=!1,s.overflow=!1,s["overflow-wrap"]=!1,s["overflow-x"]=!1,s["overflow-y"]=!1,s.padding=!0,s["padding-bottom"]=!0,s["padding-left"]=!0,s["padding-right"]=!0,s["padding-top"]=!0,s.page=!1,s["page-break-after"]=!1,s["page-break-before"]=!1,s["page-break-inside"]=!1,s["page-policy"]=!1,s.pause=!1,s["pause-after"]=!1,s["pause-before"]=!1,s.perspective=!1,s["perspective-origin"]=!1,s.pitch=!1,s["pitch-range"]=!1,s["play-during"]=!1,s.position=!1,s["presentation-level"]=!1,s.quotes=!1,s["region-fragment"]=!1,s.resize=!1,s.rest=!1,s["rest-after"]=!1,s["rest-before"]=!1,s.richness=!1,s.right=!1,s.rotation=!1,s["rotation-point"]=!1,s["ruby-align"]=!1,s["ruby-merge"]=!1,s["ruby-position"]=!1,s["shape-image-threshold"]=!1,s["shape-outside"]=!1,s["shape-margin"]=!1,s.size=!1,s.speak=!1,s["speak-as"]=!1,s["speak-header"]=!1,s["speak-numeral"]=!1,s["speak-punctuation"]=!1,s["speech-rate"]=!1,s.stress=!1,s["string-set"]=!1,s["tab-size"]=!1,s["table-layout"]=!1,s["text-align"]=!0,s["text-align-last"]=!0,s["text-combine-upright"]=!0,s["text-decoration"]=!0,s["text-decoration-color"]=!0,s["text-decoration-line"]=!0,s["text-decoration-skip"]=!0,s["text-decoration-style"]=!0,s["text-emphasis"]=!0,s["text-emphasis-color"]=!0,s["text-emphasis-position"]=!0,s["text-emphasis-style"]=!0,s["text-height"]=!0,s["text-indent"]=!0,s["text-justify"]=!0,s["text-orientation"]=!0,s["text-overflow"]=!0,s["text-shadow"]=!0,s["text-space-collapse"]=!0,s["text-transform"]=!0,s["text-underline-position"]=!0,s["text-wrap"]=!0,s.top=!1,s.transform=!1,s["transform-origin"]=!1,s["transform-style"]=!1,s.transition=!1,s["transition-delay"]=!1,s["transition-duration"]=!1,s["transition-property"]=!1,s["transition-timing-function"]=!1,s["unicode-bidi"]=!1,s["vertical-align"]=!1,s.visibility=!1,s["voice-balance"]=!1,s["voice-duration"]=!1,s["voice-family"]=!1,s["voice-pitch"]=!1,s["voice-range"]=!1,s["voice-rate"]=!1,s["voice-stress"]=!1,s["voice-volume"]=!1,s.volume=!1,s["white-space"]=!1,s.widows=!1,s.width=!0,s["will-change"]=!1,s["word-break"]=!0,s["word-spacing"]=!0,s["word-wrap"]=!0,s["wrap-flow"]=!1,s["wrap-through"]=!1,s["writing-mode"]=!1,s["z-index"]=!1,s}function e(s,o,a){}function t(s,o,a){}var n=/javascript\s*\:/img;function r(s,o){return n.test(o)?"":o}return ls.whiteList=i(),ls.getDefaultWhiteList=i,ls.onAttr=e,ls.onIgnoreAttr=t,ls.safeAttrValue=r,ls}var h_,KD;function U2(){return KD||(KD=1,h_={indexOf:function(i,e){var t,n;if(Array.prototype.indexOf)return i.indexOf(e);for(t=0,n=i.length;t<n;t++)if(i[t]===e)return t;return-1},forEach:function(i,e,t){var n,r;if(Array.prototype.forEach)return i.forEach(e,t);for(n=0,r=i.length;n<r;n++)e.call(t,i[n],n,i)},trim:function(i){return String.prototype.trim?i.trim():i.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(i){return String.prototype.trimRight?i.trimRight():i.replace(/(\s*$)/g,"")}}),h_}var d_,ZD;function ute(){if(ZD)return d_;ZD=1;var i=U2();function e(t,n){t=i.trimRight(t),t[t.length-1]!==";"&&(t+=";");var r=t.length,s=!1,o=0,a=0,l="";function c(){if(!s){var d=i.trim(t.slice(o,a)),f=d.indexOf(":");if(f!==-1){var p=i.trim(d.slice(0,f)),m=i.trim(d.slice(f+1));if(p){var g=n(o,l.length,p,m,d);g&&(l+=g+"; ")}}}o=a+1}for(;a<r;a++){var u=t[a];if(u==="/"&&t[a+1]==="*"){var h=t.indexOf("*/",a+2);if(h===-1)break;a=h+1,o=a+1,s=!1}else u==="("?s=!0:u===")"?s=!1:u===";"?s||c():u===`
`&&c()}return i.trim(l)}return d_=e,d_}var f_,QD;function hte(){if(QD)return f_;QD=1;var i=H2(),e=ute();U2();function t(s){return s==null}function n(s){var o={};for(var a in s)o[a]=s[a];return o}function r(s){s=n(s||{}),s.whiteList=s.whiteList||i.whiteList,s.onAttr=s.onAttr||i.onAttr,s.onIgnoreAttr=s.onIgnoreAttr||i.onIgnoreAttr,s.safeAttrValue=s.safeAttrValue||i.safeAttrValue,this.options=s}return r.prototype.process=function(s){if(s=s||"",s=s.toString(),!s)return"";var o=this,a=o.options,l=a.whiteList,c=a.onAttr,u=a.onIgnoreAttr,h=a.safeAttrValue,d=e(s,function(f,p,m,g,v){var y=l[m],b=!1;if(y===!0?b=y:typeof y=="function"?b=y(g):y instanceof RegExp&&(b=y.test(g)),b!==!0&&(b=!1),g=h(m,g),!!g){var _={position:p,sourcePosition:f,source:v,isWhite:b};if(b){var w=c(m,g,_);return t(w)?m+":"+g:w}else{var w=u(m,g,_);if(!t(w))return w}}});return d},f_=r,f_}var JD;function Ob(){return JD||(JD=1,(function(i,e){var t=H2(),n=hte();function r(o,a){var l=new n(a);return l.process(o)}e=i.exports=r,e.FilterCSS=n;for(var s in t)e[s]=t[s];typeof window<"u"&&(window.filterCSS=i.exports)})(Fu,Fu.exports)),Fu.exports}var p_,eA;function tx(){return eA||(eA=1,p_={indexOf:function(i,e){var t,n;if(Array.prototype.indexOf)return i.indexOf(e);for(t=0,n=i.length;t<n;t++)if(i[t]===e)return t;return-1},forEach:function(i,e,t){var n,r;if(Array.prototype.forEach)return i.forEach(e,t);for(n=0,r=i.length;n<r;n++)e.call(t,i[n],n,i)},trim:function(i){return String.prototype.trim?i.trim():i.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(i){var e=/\s|\n|\t/,t=e.exec(i);return t?t.index:-1}}),p_}var tA;function V2(){if(tA)return Ke;tA=1;var i=Ob().FilterCSS,e=Ob().getDefaultWhiteList,t=tx();function n(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var r=new i;function s(M,$,P){}function o(M,$,P){}function a(M,$,P){}function l(M,$,P){}function c(M){return M.replace(h,"&lt;").replace(d,"&gt;")}function u(M,$,P,G){if(P=O(P),$==="href"||$==="src"){if(P=t.trim(P),P==="#")return"#";if(!(P.substr(0,7)==="http://"||P.substr(0,8)==="https://"||P.substr(0,7)==="mailto:"||P.substr(0,4)==="tel:"||P.substr(0,11)==="data:image/"||P.substr(0,6)==="ftp://"||P.substr(0,2)==="./"||P.substr(0,3)==="../"||P[0]==="#"||P[0]==="/"))return""}else if($==="background"){if(y.lastIndex=0,y.test(P))return""}else if($==="style"){if(b.lastIndex=0,b.test(P)||(_.lastIndex=0,_.test(P)&&(y.lastIndex=0,y.test(P))))return"";G!==!1&&(G=G||r,P=G.process(P))}return P=D(P),P}var h=/</g,d=/>/g,f=/"/g,p=/&quot;/g,m=/&#([a-zA-Z0-9]*);?/gim,g=/&colon;?/gim,v=/&newline;?/gim,y=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,b=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,_=/u\s*r\s*l\s*\(.*/gi;function w(M){return M.replace(f,"&quot;")}function C(M){return M.replace(p,'"')}function E(M){return M.replace(m,function(P,G){return G[0]==="x"||G[0]==="X"?String.fromCharCode(parseInt(G.substr(1),16)):String.fromCharCode(parseInt(G,10))})}function x(M){return M.replace(g,":").replace(v," ")}function T(M){for(var $="",P=0,G=M.length;P<G;P++)$+=M.charCodeAt(P)<32?" ":M.charAt(P);return t.trim($)}function O(M){return M=C(M),M=E(M),M=x(M),M=T(M),M}function D(M){return M=w(M),M=c(M),M}function A(){return""}function k(M,$){typeof $!="function"&&($=function(){});var P=!Array.isArray(M);function G(L){return P?!0:t.indexOf(M,L)!==-1}var V=[],X=!1;return{onIgnoreTag:function(L,j,W){if(G(L))if(W.isClosing){var H="[/removed]",U=W.position+H.length;return V.push([X!==!1?X:W.position,U]),X=!1,H}else return X||(X=W.position),"[removed]";else return $(L,j,W)},remove:function(L){var j="",W=0;return t.forEach(V,function(H){j+=L.slice(W,H[0]),W=H[1]}),j+=L.slice(W),j}}}function N(M){for(var $="",P=0;P<M.length;){var G=M.indexOf("<!--",P);if(G===-1){$+=M.slice(P);break}$+=M.slice(P,G);var V=M.indexOf("-->",G);if(V===-1)break;P=V+3}return $}function z(M){var $=M.split("");return $=$.filter(function(P){var G=P.charCodeAt(0);return G===127?!1:G<=31?G===10||G===13:!0}),$.join("")}return Ke.whiteList=n(),Ke.getDefaultWhiteList=n,Ke.onTag=s,Ke.onIgnoreTag=o,Ke.onTagAttr=a,Ke.onIgnoreTagAttr=l,Ke.safeAttrValue=u,Ke.escapeHtml=c,Ke.escapeQuote=w,Ke.unescapeQuote=C,Ke.escapeHtmlEntities=E,Ke.escapeDangerHtml5Entities=x,Ke.clearNonPrintableCharacter=T,Ke.friendlyAttrValue=O,Ke.escapeAttrValue=D,Ke.onIgnoreTagStripAll=A,Ke.StripTagBody=k,Ke.stripCommentTag=N,Ke.stripBlankChar=z,Ke.attributeWrapSign='"',Ke.cssFilter=r,Ke.getDefaultCSSWhiteList=e,Ke}var $u={},iA;function X2(){if(iA)return $u;iA=1;var i=tx();function e(h){var d=i.spaceIndex(h),f;return d===-1?f=h.slice(1,-1):f=h.slice(1,d+1),f=i.trim(f).toLowerCase(),f.slice(0,1)==="/"&&(f=f.slice(1)),f.slice(-1)==="/"&&(f=f.slice(0,-1)),f}function t(h){return h.slice(0,2)==="</"}function n(h,d,f){var p="",m=0,g=!1,v=!1,y=0,b=h.length,_="",w="";e:for(y=0;y<b;y++){var C=h.charAt(y);if(g===!1){if(C==="<"){g=y;continue}}else if(v===!1){if(C==="<"){p+=f(h.slice(m,y)),g=y,m=y;continue}if(C===">"||y===b-1){p+=f(h.slice(m,g)),w=h.slice(g,y+1),_=e(w),p+=d(g,p.length,_,w,t(w)),m=y+1,g=!1;continue}if(C==='"'||C==="'")for(var E=1,x=h.charAt(y-E);x.trim()===""||x==="=";){if(x==="="){v=C;continue e}x=h.charAt(y-++E)}}else if(C===v){v=!1;continue}}return m<b&&(p+=f(h.substr(m))),p}var r=/[^a-zA-Z0-9\\_:.-]/gim;function s(h,d){var f=0,p=0,m=[],g=!1,v=h.length;function y(E,x){if(E=i.trim(E),E=E.replace(r,"").toLowerCase(),!(E.length<1)){var T=d(E,x||"");T&&m.push(T)}}for(var b=0;b<v;b++){var _=h.charAt(b),w,C;if(g===!1&&_==="="){g=h.slice(f,b),f=b+1,p=h.charAt(f)==='"'||h.charAt(f)==="'"?f:a(h,b+1);continue}if(g!==!1&&b===p){if(C=h.indexOf(_,b+1),C===-1)break;w=i.trim(h.slice(p+1,C)),y(g,w),g=!1,b=C,f=b+1;continue}if(/\s|\n|\t/.test(_))if(h=h.replace(/\s|\n|\t/g," "),g===!1)if(C=o(h,b),C===-1){w=i.trim(h.slice(f,b)),y(w),g=!1,f=b+1;continue}else{b=C-1;continue}else if(C=l(h,b-1),C===-1){w=i.trim(h.slice(f,b)),w=u(w),y(g,w),g=!1,f=b+1;continue}else continue}return f<h.length&&(g===!1?y(h.slice(f)):y(g,u(i.trim(h.slice(f))))),i.trim(m.join(" "))}function o(h,d){for(;d<h.length;d++){var f=h[d];if(f!==" ")return f==="="?d:-1}}function a(h,d){for(;d<h.length;d++){var f=h[d];if(f!==" ")return f==="'"||f==='"'?d:-1}}function l(h,d){for(;d>0;d--){var f=h[d];if(f!==" ")return f==="="?d:-1}}function c(h){return h[0]==='"'&&h[h.length-1]==='"'||h[0]==="'"&&h[h.length-1]==="'"}function u(h){return c(h)?h.substr(1,h.length-2):h}return $u.parseTag=n,$u.parseAttr=s,$u}var m_,nA;function dte(){if(nA)return m_;nA=1;var i=Ob().FilterCSS,e=V2(),t=X2(),n=t.parseTag,r=t.parseAttr,s=tx();function o(h){return h==null}function a(h){var d=s.spaceIndex(h);if(d===-1)return{html:"",closing:h[h.length-2]==="/"};h=s.trim(h.slice(d+1,-1));var f=h[h.length-1]==="/";return f&&(h=s.trim(h.slice(0,-1))),{html:h,closing:f}}function l(h){var d={};for(var f in h)d[f]=h[f];return d}function c(h){var d={};for(var f in h)Array.isArray(h[f])?d[f.toLowerCase()]=h[f].map(function(p){return p.toLowerCase()}):d[f.toLowerCase()]=h[f];return d}function u(h){h=l(h||{}),h.stripIgnoreTag&&(h.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),h.onIgnoreTag=e.onIgnoreTagStripAll),h.whiteList||h.allowList?h.whiteList=c(h.whiteList||h.allowList):h.whiteList=e.whiteList,this.attributeWrapSign=h.singleQuotedAttributeValue===!0?"'":e.attributeWrapSign,h.onTag=h.onTag||e.onTag,h.onTagAttr=h.onTagAttr||e.onTagAttr,h.onIgnoreTag=h.onIgnoreTag||e.onIgnoreTag,h.onIgnoreTagAttr=h.onIgnoreTagAttr||e.onIgnoreTagAttr,h.safeAttrValue=h.safeAttrValue||e.safeAttrValue,h.escapeHtml=h.escapeHtml||e.escapeHtml,this.options=h,h.css===!1?this.cssFilter=!1:(h.css=h.css||{},this.cssFilter=new i(h.css))}return u.prototype.process=function(h){if(h=h||"",h=h.toString(),!h)return"";var d=this,f=d.options,p=f.whiteList,m=f.onTag,g=f.onIgnoreTag,v=f.onTagAttr,y=f.onIgnoreTagAttr,b=f.safeAttrValue,_=f.escapeHtml,w=d.attributeWrapSign,C=d.cssFilter;f.stripBlankChar&&(h=e.stripBlankChar(h)),f.allowCommentTag||(h=e.stripCommentTag(h));var E=!1;f.stripIgnoreTagBody&&(E=e.StripTagBody(f.stripIgnoreTagBody,g),g=E.onIgnoreTag);var x=n(h,function(T,O,D,A,k){var N={sourcePosition:T,position:O,isClosing:k,isWhite:Object.prototype.hasOwnProperty.call(p,D)},z=m(D,A,N);if(!o(z))return z;if(N.isWhite){if(N.isClosing)return"</"+D+">";var M=a(A),$=p[D],P=r(M.html,function(G,V){var X=s.indexOf($,G)!==-1,L=v(D,G,V,X);return o(L)?X?(V=b(D,G,V,C),V?G+"="+w+V+w:G):(L=y(D,G,V,X),o(L)?void 0:L):L});return A="<"+D,P&&(A+=" "+P),M.closing&&(A+=" /"),A+=">",A}else return z=g(D,A,N),o(z)?_(A):z},_);return E&&(x=E.remove(x)),x},m_=u,m_}var rA;function fte(){return rA||(rA=1,(function(i,e){var t=V2(),n=X2(),r=dte();function s(a,l){var c=new r(l);return c.process(a)}e=i.exports=s,e.filterXSS=s,e.FilterXSS=r,(function(){for(var a in t)e[a]=t[a];for(var l in n)e[l]=n[l]})(),typeof window<"u"&&(window.filterXSS=i.exports);function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=i.exports)})(Lu,Lu.exports)),Lu.exports}var pte=fte();const mte=Fb(pte);var ml=null;function Pb(i,e){var t=e||{preventDefault:!1};if(i.Manager){var n=i,r=function(c,u){var h=Object.create(t);return u&&n.assign(h,u),Pb(new n(c,h),h)};return n.assign(r,n),r.Manager=function(c,u){var h=Object.create(t);return u&&n.assign(h,u),Pb(new n.Manager(c,h),h)},r}var s=Object.create(i),o=i.element;o.hammer||(o.hammer=[]),o.hammer.push(s),i.on("hammer.input",function(c){(t.preventDefault===!0||t.preventDefault===c.pointerType)&&c.preventDefault(),c.isFirst&&(ml=c.target)}),s._handlers={},s.on=function(c,u){return a(c).forEach(function(h){var d=s._handlers[h];d||(s._handlers[h]=d=[],i.on(h,l)),d.push(u)}),s},s.off=function(c,u){return a(c).forEach(function(h){var d=s._handlers[h];d&&(d=u?d.filter(function(f){return f!==u}):[],d.length>0?s._handlers[h]=d:(i.off(h,l),delete s._handlers[h]))}),s},s.emit=function(c,u){ml=u.target,i.emit(c,u)},s.destroy=function(){var c=i.element.hammer,u=c.indexOf(s);u!==-1&&c.splice(u,1),c.length||delete i.element.hammer,s._handlers={},i.destroy()};function a(c){return c.match(/[^ ]+/g)}function l(c){if(c.type!=="hammer.input"){if(c.srcEvent._handled||(c.srcEvent._handled={}),c.srcEvent._handled[c.type])return;c.srcEvent._handled[c.type]=!0}var u=!1;c.stopPropagation=function(){u=!0};var h=c.srcEvent.stopPropagation.bind(c.srcEvent);typeof h=="function"&&(c.srcEvent.stopPropagation=function(){h(),c.stopPropagation()}),c.firstTarget=ml;for(var d=ml.isConnected?ml:c.target;d&&!u;){var f=d.hammer;if(f){for(var p,m=0;m<f.length;m++)if(p=f[m]._handlers[c.type],p)for(var g=0;g<p.length&&!u;g++)p[g](c)}d=d.parentNode}}return s}function gte(i){var e=window,t={},n={keydown:{},keyup:{}},r={},s;for(s=97;s<=122;s++)r[String.fromCharCode(s)]={code:65+(s-97),shift:!1};for(s=65;s<=90;s++)r[String.fromCharCode(s)]={code:s,shift:!0};for(s=0;s<=9;s++)r[""+s]={code:48+s,shift:!1};for(s=1;s<=12;s++)r["F"+s]={code:111+s,shift:!1};for(s=0;s<=9;s++)r["num"+s]={code:96+s,shift:!1};r["num*"]={code:106,shift:!1},r["num+"]={code:107,shift:!1},r["num-"]={code:109,shift:!1},r["num/"]={code:111,shift:!1},r["num."]={code:110,shift:!1},r.left={code:37,shift:!1},r.up={code:38,shift:!1},r.right={code:39,shift:!1},r.down={code:40,shift:!1},r.space={code:32,shift:!1},r.enter={code:13,shift:!1},r.shift={code:16,shift:void 0},r.esc={code:27,shift:!1},r.backspace={code:8,shift:!1},r.tab={code:9,shift:!1},r.ctrl={code:17,shift:!1},r.alt={code:18,shift:!1},r.delete={code:46,shift:!1},r.pageup={code:33,shift:!1},r.pagedown={code:34,shift:!1},r["="]={code:187,shift:!1},r["-"]={code:189,shift:!1},r["]"]={code:221,shift:!1},r["["]={code:219,shift:!1};var o=function(c){l(c,"keydown")},a=function(c){l(c,"keyup")},l=function(c,u){if(n[u][c.keyCode]!==void 0)for(var h=n[u][c.keyCode],d=0;d<h.length;d++)(h[d].shift===void 0||h[d].shift==!0&&c.shiftKey==!0||h[d].shift==!1&&c.shiftKey==!1)&&h[d].fn(c)};return t.bind=function(c,u,h){if(h===void 0&&(h="keydown"),r[c]===void 0)throw new Error("unsupported key: "+c);n[h][r[c].code]===void 0&&(n[h][r[c].code]=[]),n[h][r[c].code].push({fn:u,shift:r[c].shift})},t.bindAll=function(c,u){u===void 0&&(u="keydown");for(var h in r)r.hasOwnProperty(h)&&t.bind(h,c,u)},t.getKey=function(c){for(var u in r)if(r.hasOwnProperty(u)){if(c.shiftKey==!0&&r[u].shift==!0&&c.keyCode==r[u].code)return u;if(c.shiftKey==!1&&r[u].shift==!1&&c.keyCode==r[u].code)return u;if(c.keyCode==r[u].code&&u=="shift")return u}return"unknown key, currently not supported"},t.unbind=function(c,u,h){if(h===void 0&&(h="keydown"),r[c]===void 0)throw new Error("unsupported key: "+c);if(u!==void 0){var d=[],f=n[h][r[c].code];if(f!==void 0)for(var p=0;p<f.length;p++)f[p].fn==u&&f[p].shift==r[c].shift||d.push(n[h][r[c].code][p]);n[h][r[c].code]=d}else n[h][r[c].code]=[]},t.reset=function(){n={keydown:{},keyup:{}}},t.destroy=function(){n={keydown:{},keyup:{}},e.removeEventListener("keydown",o,!0),e.removeEventListener("keyup",a,!0)},e.addEventListener("keydown",o,!0),e.addEventListener("keyup",a,!0),t}/**
 * vis-timeline and vis-graph2d
 * https://visjs.github.io/vis-timeline/
 *
 * Create a fully customizable, interactive timeline with items and ranges.
 *
 * @version 8.3.1
 * @date    2025-09-15T17:43:30.491Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */const ti=typeof window<"u"&&window.moment||B;function cr(i){if(!i)return!1;let e=i.idProp??i._idProp;return e?cte(e,i):!1}const g_=/^\/?Date\((-?\d+)/i,vte=/^\d+$/;function ix(i,e){let t;if(i!==void 0){if(i===null)return null;if(!e)return i;if(typeof e!="string"&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return!!i;case"number":case"Number":return pi(i)&&!isNaN(Date.parse(i))?B(i).valueOf():Number(i.valueOf());case"string":case"String":return String(i);case"Date":try{return ix(i,"Moment").toDate()}catch(n){throw n instanceof TypeError?new TypeError("Cannot convert object of type "+El(i)+" to type "+e):n}case"Moment":if(Ll(i))return B(i);if(i instanceof Date)return B(i.valueOf());if(B.isMoment(i))return B(i);if(pi(i))return t=g_.exec(i),t?B(Number(t[1])):(t=vte.exec(i),B(t?Number(i):i));throw new TypeError("Cannot convert object of type "+El(i)+" to type "+e);case"ISODate":if(Ll(i))return new Date(i);if(i instanceof Date)return i.toISOString();if(B.isMoment(i))return i.toDate().toISOString();if(pi(i))return t=g_.exec(i),t?new Date(Number(t[1])).toISOString():B(i).format();throw new Error("Cannot convert object of type "+El(i)+" to type ISODate");case"ASPDate":if(Ll(i))return"/Date("+i+")/";if(i instanceof Date||B.isMoment(i))return"/Date("+i.valueOf()+")/";if(pi(i)){t=g_.exec(i);let n;return t?n=new Date(Number(t[1])).valueOf():n=new Date(i).valueOf(),"/Date("+n+")/"}else throw new Error("Cannot convert object of type "+El(i)+" to type ASPDate");default:throw new Error(`Unknown type ${e}`)}}}function Sa(i,e={start:"Date",end:"Date"}){const t=i._idProp,n=new xa({fieldId:t}),r=rte(i).map(s=>Object.keys(s).reduce((o,a)=>(o[a]=ix(s[a],e[a]),o),{})).to(n);return r.all().start(),{add:(...s)=>i.getDataSet().add(...s),remove:(...s)=>i.getDataSet().remove(...s),update:(...s)=>i.getDataSet().update(...s),updateOnly:(...s)=>i.getDataSet().updateOnly(...s),clear:(...s)=>i.getDataSet().clear(...s),forEach:n.forEach.bind(n),get:n.get.bind(n),getIds:n.getIds.bind(n),off:n.off.bind(n),on:n.on.bind(n),get length(){return n.length},idProp:t,type:e,rawDS:i,coercedDS:n,dispose:()=>r.stop()}}const K2=i=>{const e=new mte.FilterXSS(i);return t=>typeof t=="string"?e.process(t):t},yte=i=>i;let Db=K2();const _te=i=>{i&&(i.disabled===!0?(Db=yte,console.warn("You disabled XSS protection for vis-Timeline. I sure hope you know what you're doing!")):i.filterOptions&&(Db=K2(i.filterOptions)))},R={...Qee,convert:ix,setupXSSProtection:_te};Object.defineProperty(R,"xss",{get:function(){return Db}});class es{constructor(){this.options=null,this.props=null}setOptions(e){e&&R.extend(this.options,e)}redraw(){return!1}destroy(){}_isResized(){const e=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,e}}function nx(i,e,t){if(t&&!Array.isArray(t))return nx(i,e,[t]);if(e.hiddenDates=[],t&&Array.isArray(t)==!0){for(let n=0;n<t.length;n++)if(t[n].repeat===void 0){const r={};r.start=i(t[n].start).toDate().valueOf(),r.end=i(t[n].end).toDate().valueOf(),e.hiddenDates.push(r)}e.hiddenDates.sort((n,r)=>n.start-r.start)}}function Ph(i,e,t){if(t&&!Array.isArray(t))return Ph(i,e,[t]);if(t&&e.domProps.centerContainer.width!==void 0){nx(i,e,t);const n=i(e.range.start),r=i(e.range.end),o=(e.range.end-e.range.start)/e.domProps.centerContainer.width;for(let h=0;h<t.length;h++)if(t[h].repeat!==void 0){let d=i(t[h].start),f=i(t[h].end);if(d._d=="Invalid Date")throw new Error(`Supplied start date is not valid: ${t[h].start}`);if(f._d=="Invalid Date")throw new Error(`Supplied end date is not valid: ${t[h].end}`);if(f-d>=4*o){let m=0,g=r.clone();switch(t[h].repeat){case"daily":d.day()!=f.day()&&(m=1),d=d.dayOfYear(n.dayOfYear()).year(n.year()).subtract(7,"days"),f=f.dayOfYear(n.dayOfYear()).year(n.year()).subtract(7-m,"days"),g.add(1,"weeks");break;case"weekly":{const v=f.diff(d,"days"),y=d.day();d=d.date(n.date()).month(n.month()).year(n.year()),f=d.clone(),d=d.day(y).subtract(1,"weeks"),f=f.day(y).add(v,"days").subtract(1,"weeks"),g.add(1,"weeks");break}case"monthly":d.month()!=f.month()&&(m=1),d=d.month(n.month()).year(n.year()).subtract(1,"months"),f=f.month(n.month()).year(n.year()).subtract(1,"months").add(m,"months"),g.add(1,"months");break;case"yearly":d.year()!=f.year()&&(m=1),d=d.year(n.year()).subtract(1,"years"),f=f.year(n.year()).subtract(1,"years").add(m,"years"),g.add(1,"years");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",t[h].repeat);return}for(;d<g;)switch(e.hiddenDates.push({start:d.valueOf(),end:f.valueOf()}),t[h].repeat){case"daily":d=d.add(1,"days"),f=f.add(1,"days");break;case"weekly":d=d.add(1,"weeks"),f=f.add(1,"weeks");break;case"monthly":d=d.add(1,"months"),f=f.add(1,"months");break;case"yearly":d=d.add(1,"y"),f=f.add(1,"y");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",t[h].repeat);return}e.hiddenDates.push({start:d.valueOf(),end:f.valueOf()})}}bte(e);const a=Ah(e.range.start,e.hiddenDates),l=Ah(e.range.end,e.hiddenDates);let c=e.range.start,u=e.range.end;a.hidden==!0&&(c=e.range.startToFront==!0?a.startDate-1:a.endDate+1),l.hidden==!0&&(u=e.range.endToFront==!0?l.startDate-1:l.endDate+1),(a.hidden==!0||l.hidden==!0)&&e.range._applyRange(c,u)}}function bte(i){const e=i.hiddenDates,t=[];for(var n=0;n<e.length;n++)for(let r=0;r<e.length;r++)n!=r&&e[r].remove!=!0&&e[n].remove!=!0&&(e[r].start>=e[n].start&&e[r].end<=e[n].end?e[r].remove=!0:e[r].start>=e[n].start&&e[r].start<=e[n].end?(e[n].end=e[r].end,e[r].remove=!0):e[r].end>=e[n].start&&e[r].end<=e[n].end&&(e[n].start=e[r].start,e[r].remove=!0));for(n=0;n<e.length;n++)e[n].remove!==!0&&t.push(e[n]);i.hiddenDates=t,i.hiddenDates.sort((r,s)=>r.start-s.start)}function wte(i,e,t){let n=!1;const r=e.current.valueOf();for(let o=0;o<e.hiddenDates.length;o++){const a=e.hiddenDates[o].start;var s=e.hiddenDates[o].end;if(r>=a&&r<s){n=!0;break}}if(n==!0&&r<e._end.valueOf()&&r!=t){const o=i(t),a=i(s);o.year()!=a.year()?e.switchedYear=!0:o.month()!=a.month()?e.switchedMonth=!0:o.dayOfYear()!=a.dayOfYear()&&(e.switchedDay=!0),e.current=a}}function sA(i,e,t){let n;if(i.body.hiddenDates.length==0)return n=i.range.conversion(t),(e.valueOf()-n.offset)*n.scale;{const r=Ah(e,i.body.hiddenDates);r.hidden==!0&&(e=r.startDate);const s=$l(i.body.hiddenDates,i.range.start,i.range.end);if(e<i.range.start){n=i.range.conversion(t,s);const o=xte(i.body.hiddenDates,e,n.offset);return e=i.options.moment(e).toDate().valueOf(),e=e+o,-(n.offset-e.valueOf())*n.scale}else if(e>i.range.end){const o={start:i.range.start,end:e};return e=aA(i.options.moment,i.body.hiddenDates,o,e),n=i.range.conversion(t,s),(e.valueOf()-n.offset)*n.scale}else return e=aA(i.options.moment,i.body.hiddenDates,i.range,e),n=i.range.conversion(t,s),(e.valueOf()-n.offset)*n.scale}}function oA(i,e,t){if(i.body.hiddenDates.length==0){const n=i.range.conversion(t);return new Date(e/n.scale+n.offset)}else{const n=$l(i.body.hiddenDates,i.range.start,i.range.end),s=(i.range.end-i.range.start-n)*e/t,o=Ste(i.body.hiddenDates,i.range,s);return new Date(o+s+i.range.start)}}function $l(i,e,t){let n=0;for(let r=0;r<i.length;r++){const s=i[r].start,o=i[r].end;s>=e&&o<t&&(n+=o-s)}return n}function xte(i,e,t){let n=0;for(let r=0;r<i.length;r++){const s=i[r].start,o=i[r].end;s>=e&&o<=t&&(n+=o-s)}return n}function aA(i,e,t,n){return n=i(n).toDate().valueOf(),n-=Dh(i,e,t,n),n}function Dh(i,e,t,n){let r=0;n=i(n).toDate().valueOf();for(let s=0;s<e.length;s++){const o=e[s].start,a=e[s].end;o>=t.start&&a<t.end&&n>=a&&(r+=a-o)}return r}function Ste(i,e,t){let n=0,r=0,s=e.start;for(let o=0;o<i.length;o++){const a=i[o].start,l=i[o].end;if(a>=e.start&&l<e.end){if(r+=a-s,s=l,r>=t)break;n+=l-a}}return n}function hs(i,e,t,n){const r=Ah(e,i);return r.hidden==!0?t<0?n==!0?r.startDate-(r.endDate-e)-1:r.startDate-1:n==!0?r.endDate+(e-r.startDate)+1:r.endDate+1:e}function Ah(i,e){for(let r=0;r<e.length;r++){var t=e[r].start,n=e[r].end;if(i>=t&&i<n)return{hidden:!0,startDate:t,endDate:n}}return{hidden:!1,startDate:t,endDate:n}}class Hd extends es{constructor(e,t){super();const n=ti().hours(0).minutes(0).seconds(0).milliseconds(0),r=n.clone().add(-3,"days").valueOf(),s=n.clone().add(3,"days").valueOf();this.millisecondsPerPixelCache=void 0,t===void 0?(this.start=r,this.end=s):(this.start=t.start||r,this.end=t.end||s),this.rolling=!1,this.body=e,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={rtl:!1,start:null,end:null,moment:ti,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:1e3*60*60*24*365*1e4,rollingMode:{follow:!1,offset:.5}},this.options=R.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",this._onDragStart.bind(this)),this.body.emitter.on("panmove",this._onDrag.bind(this)),this.body.emitter.on("panend",this._onDragEnd.bind(this)),this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this)),this.body.dom.rollingModeBtn.addEventListener("click",this.startRolling.bind(this)),this.setOptions(t)}setOptions(e){if(e){const t=["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","zoomFriction","rtl","showCurrentTime","rollingMode","horizontalScroll","horizontalScrollKey","horizontalScrollInvert","verticalScroll"];R.selectiveExtend(t,this.options,e),e.rollingMode&&e.rollingMode.follow&&this.startRolling(),("start"in e||"end"in e)&&this.setRange(e.start,e.end)}}startRolling(){const e=this;function t(){e.stopRolling(),e.rolling=!0;let n=e.end-e.start;const r=R.convert(new Date,"Date").valueOf(),s=e.options.rollingMode&&e.options.rollingMode.offset||.5,o=r-n*s,a=r+n*(1-s),l={animation:!1};e.setRange(o,a,l),n=1/e.conversion(e.body.domProps.center.width).scale/10,n<30&&(n=30),n>1e3&&(n=1e3),e.body.dom.rollingModeBtn.style.visibility="hidden",e.currentTimeTimer=setTimeout(t,n)}t()}stopRolling(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")}setRange(e,t,n,r,s){n||(n={}),n.byUser!==!0&&(n.byUser=!1);const o=this,a=e!=null?R.convert(e,"Date").valueOf():null,l=t!=null?R.convert(t,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,n.animation){const u=this.start,h=this.end,d=typeof n.animation=="object"&&"duration"in n.animation?n.animation.duration:500,f=typeof n.animation=="object"&&"easingFunction"in n.animation?n.animation.easingFunction:"easeInOutQuad",p=R.easingFunctions[f];if(!p)throw new Error(`Unknown easing function ${JSON.stringify(f)}. Choose from: ${Object.keys(R.easingFunctions).join(", ")}`);const m=Date.now();let g=!1;const v=()=>{if(!o.props.touch.dragging){const b=Date.now()-m,_=p(b/d),w=b>d,C=w||a===null?a:u+(a-u)*_,E=w||l===null?l:h+(l-h)*_;c=o._applyRange(C,E),Ph(o.options.moment,o.body,o.options.hiddenDates),g=g||c;const x={start:new Date(o.start),end:new Date(o.end),byUser:n.byUser,event:n.event};if(s&&s(_,c,w),c&&o.body.emitter.emit("rangechange",x),w){if(g&&(o.body.emitter.emit("rangechanged",x),r))return r()}else o.animationTimer=setTimeout(v,20)}};return v()}else{var c=this._applyRange(a,l);if(Ph(this.options.moment,this.body,this.options.hiddenDates),c){const u={start:new Date(this.start),end:new Date(this.end),byUser:n.byUser,event:n.event};if(this.body.emitter.emit("rangechange",u),clearTimeout(o.timeoutID),o.timeoutID=setTimeout(()=>{o.body.emitter.emit("rangechanged",u)},200),r)return r()}}}getMillisecondsPerPixel(){return this.millisecondsPerPixelCache===void 0&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth),this.millisecondsPerPixelCache}_cancelAnimation(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)}_applyRange(e,t){let n=e!=null?R.convert(e,"Date").valueOf():this.start,r=t!=null?R.convert(t,"Date").valueOf():this.end;const s=this.options.max!=null?R.convert(this.options.max,"Date").valueOf():null,o=this.options.min!=null?R.convert(this.options.min,"Date").valueOf():null;let a;if(isNaN(n)||n===null)throw new Error(`Invalid start "${e}"`);if(isNaN(r)||r===null)throw new Error(`Invalid end "${t}"`);if(r<n&&(r=n),o!==null&&n<o&&(a=o-n,n+=a,r+=a,s!=null&&r>s&&(r=s)),s!==null&&r>s&&(a=r-s,n-=a,r-=a,o!=null&&n<o&&(n=o)),this.options.zoomMin!==null){let c=parseFloat(this.options.zoomMin);c<0&&(c=0),r-n<c&&(this.end-this.start===c&&n>=this.start-.5&&r<=this.end?(n=this.start,r=this.end):(a=c-(r-n),n-=a/2,r+=a/2))}if(this.options.zoomMax!==null){let c=parseFloat(this.options.zoomMax);c<0&&(c=0),r-n>c&&(this.end-this.start===c&&n<this.start&&r>this.end?(n=this.start,r=this.end):(a=r-n-c,n+=a/2,r-=a/2))}const l=this.start!=n||this.end!=r;return!(n>=this.start&&n<=this.end||r>=this.start&&r<=this.end)&&!(this.start>=n&&this.start<=r||this.end>=n&&this.end<=r)&&this.body.emitter.emit("checkRangedItems"),this.start=n,this.end=r,l}getRange(){return{start:this.start,end:this.end}}conversion(e,t){return Hd.conversion(this.start,this.end,e,t)}static conversion(e,t,n,r){return r===void 0&&(r=0),n!=0&&t-e!=0?{offset:e,scale:n/(t-e-r)}:{offset:0,scale:1}}_onDragStart(e){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(e)&&this.props.touch.allowDragging&&(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))}_onDrag(e){if(!e||!this.props.touch.dragging||!this.options.moveable||!this.props.touch.allowDragging)return;const t=this.options.direction;lA(t);let n=t=="horizontal"?e.deltaX:e.deltaY;n-=this.deltaDifference;let r=this.props.touch.end-this.props.touch.start;const s=$l(this.body.hiddenDates,this.start,this.end);r-=s;const o=t=="horizontal"?this.body.domProps.center.width:this.body.domProps.center.height;let a;this.options.rtl?a=n/o*r:a=-n/o*r;const l=this.props.touch.start+a,c=this.props.touch.end+a,u=hs(this.body.hiddenDates,l,this.previousDelta-n,!0),h=hs(this.body.hiddenDates,c,this.previousDelta-n,!0);if(u!=l||h!=c){this.deltaDifference+=n,this.props.touch.start=u,this.props.touch.end=h,this._onDrag(e);return}this.previousDelta=n,this._applyRange(l,c);const d=new Date(this.start),f=new Date(this.end);this.body.emitter.emit("rangechange",{start:d,end:f,byUser:!0,event:e}),this.body.emitter.emit("panmove")}_onDragEnd(e){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:e}))}_onMouseWheel(e){let t=0;if(e.wheelDelta?t=e.wheelDelta/120:e.detail?t=-e.detail/3:e.deltaY&&(t=-e.deltaY/3),!(this.options.zoomKey&&!e[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&this.options.zoomable&&this.options.moveable&&this._isInsideRange(e)&&t){const n=this.options.zoomFriction||5;let r;t<0?r=1-t/n:r=1/(1+t/n);let s;if(this.rolling){const o=this.options.rollingMode&&this.options.rollingMode.offset||.5;s=this.start+(this.end-this.start)*o}else{const o=this.getPointer({x:e.clientX,y:e.clientY},this.body.dom.center);s=this._pointerToDate(o)}this.zoom(r,s,t,e),e.preventDefault()}}_onTouch(e){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.props.touch.centerDate=null,this.scaleOffset=0,this.deltaDifference=0,R.preventDefault(e)}_onPinch(e){if(!(this.options.zoomable&&this.options.moveable))return;R.preventDefault(e),this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(e.center,this.body.dom.center),this.props.touch.centerDate=this._pointerToDate(this.props.touch.center)),this.stopRolling();const t=1/(e.scale+this.scaleOffset),n=this.props.touch.centerDate,r=$l(this.body.hiddenDates,this.start,this.end),s=Dh(this.options.moment,this.body.hiddenDates,this,n),o=r-s;let a=n-s+(this.props.touch.start-(n-s))*t,l=n+o+(this.props.touch.end-(n+o))*t;this.startToFront=1-t<=0,this.endToFront=t-1<=0;const c=hs(this.body.hiddenDates,a,1-t,!0),u=hs(this.body.hiddenDates,l,t-1,!0);(c!=a||u!=l)&&(this.props.touch.start=c,this.props.touch.end=u,this.scaleOffset=1-e.scale,a=c,l=u);const h={animation:!1,byUser:!0,event:e};this.setRange(a,l,h),this.startToFront=!1,this.endToFront=!0}_isInsideRange(e){const t=e.center?e.center.x:e.clientX,n=this.body.dom.centerContainer.getBoundingClientRect(),r=this.options.rtl?t-n.left:n.right-t,s=this.body.util.toTime(r);return s>=this.start&&s<=this.end}_pointerToDate(e){let t;const n=this.options.direction;if(lA(n),n=="horizontal")return this.body.util.toTime(e.x).valueOf();{const r=this.body.domProps.center.height;return t=this.conversion(r),e.y/t.scale+t.offset}}getPointer(e,t){const n=t.getBoundingClientRect();return this.options.rtl?{x:n.right-e.x,y:e.y-n.top}:{x:e.x-n.left,y:e.y-n.top}}zoom(e,t,n,r){t==null&&(t=(this.start+this.end)/2);const s=$l(this.body.hiddenDates,this.start,this.end),o=Dh(this.options.moment,this.body.hiddenDates,this,t),a=s-o;let l=t-o+(this.start-(t-o))*e,c=t+a+(this.end-(t+a))*e;this.startToFront=!(n>0),this.endToFront=!(-n>0);const u=hs(this.body.hiddenDates,l,n,!0),h=hs(this.body.hiddenDates,c,-n,!0);(u!=l||h!=c)&&(l=u,c=h);const d={animation:!1,byUser:!0,event:r};this.setRange(l,c,d),this.startToFront=!1,this.endToFront=!0}move(e){const t=this.end-this.start,n=this.start+t*e,r=this.end+t*e;this.start=n,this.end=r}moveTo(e){const n=(this.start+this.end)/2-e,r=this.start-n,s=this.end-n,o={animation:!1,byUser:!0,event:null};this.setRange(r,s,o)}destroy(){this.stopRolling()}}function lA(i){if(i!="horizontal"&&i!="vertical")throw new TypeError(`Unknown direction "${i}". Choose "horizontal" or "vertical".`)}function Ete(){const i=()=>{};return{on:i,off:i,destroy:i,emit:i,get(){return{set:i}}}}let Ab;if(typeof window<"u"){const i=window.Hammer||Bw;Ab=Pb(i,{preventDefault:"mouse"})}else Ab=function(){return Ete()};var Wt=Ab;function Z2(i,e){e.inputHandler=function(t){t.isFirst&&e(t)},i.on("hammer.input",e.inputHandler)}function Cte(i,e){return e.inputHandler=function(t){t.isFinal&&e(t)},i.on("hammer.input",e.inputHandler)}function Tte(i){const e="pan-y";return i.getTouchAction=function(){return[e]},i}class Ws{constructor(e,t,n,r,s){this.moment=s&&s.moment||ti,this.options=s||{},this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(e,t,n),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Array.isArray(r)?this.hiddenDates=r:r!=null?this.hiddenDates=[r]:this.hiddenDates=[],this.format=Ws.FORMAT}setMoment(e){this.moment=e,this.current=this.moment(this.current.valueOf()),this._start=this.moment(this._start.valueOf()),this._end=this.moment(this._end.valueOf())}setFormat(e){const t=R.deepExtend({},Ws.FORMAT);this.format=R.deepExtend(t,e)}setRange(e,t,n){if(!(e instanceof Date)||!(t instanceof Date))throw"No legal start or end date in method setRange";this._start=e!=null?this.moment(e.valueOf()):Date.now(),this._end=t!=null?this.moment(t.valueOf()):Date.now(),this.autoScale&&this.setMinimumStep(n)}start(){this.current=this._start.clone(),this.roundToMinor()}roundToMinor(){switch(this.scale=="week"&&this.current.weekday(0),this.scale){case"year":this.current=this.current.year(this.step*Math.floor(this.current.year()/this.step)).month(0);case"month":this.current=this.current.date(1);case"week":case"day":case"weekday":this.current=this.current.hours(0);case"hour":this.current=this.current.minutes(0);case"minute":this.current=this.current.seconds(0);case"second":this.current=this.current.milliseconds(0)}if(this.step!=1){let e=this.current.clone();switch(this.scale){case"millisecond":this.current=this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current=this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current=this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current=this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current=this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current=this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current=this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current=this.current.subtract(this.current.year()%this.step,"year");break}e.isSame(this.current)||(this.current=this.moment(hs(this.hiddenDates,this.current.valueOf(),-1,!0)))}}hasNext(){return this.current.valueOf()<=this._end.valueOf()}next(){const e=this.current.valueOf();switch(this.scale){case"millisecond":this.current=this.current.add(this.step,"millisecond");break;case"second":this.current=this.current.add(this.step,"second");break;case"minute":this.current=this.current.add(this.step,"minute");break;case"hour":this.current=this.current.add(this.step,"hour"),this.current.month()<6?this.current=this.current.subtract(this.current.hours()%this.step,"hour"):this.current.hours()%this.step!==0&&(this.current=this.current.add(this.step-this.current.hours()%this.step,"hour"));break;case"weekday":case"day":this.current=this.current.add(this.step,"day");break;case"week":if(this.current.weekday()!==0)this.current=this.current.weekday(0).add(this.step,"week");else if(this.options.showMajorLabels===!1)this.current=this.current.add(this.step,"week");else{const t=this.current.clone();t.add(1,"week"),t.isSame(this.current,"month")?this.current=this.current.add(this.step,"week"):this.current=this.current.add(this.step,"week").date(1)}break;case"month":this.current=this.current.add(this.step,"month");break;case"year":this.current=this.current.add(this.step,"year");break}if(this.step!=1)switch(this.scale){case"millisecond":this.current.milliseconds()>0&&this.current.milliseconds()<this.step&&(this.current=this.current.milliseconds(0));break;case"second":this.current.seconds()>0&&this.current.seconds()<this.step&&(this.current=this.current.seconds(0));break;case"minute":this.current.minutes()>0&&this.current.minutes()<this.step&&(this.current=this.current.minutes(0));break;case"hour":this.current.hours()>0&&this.current.hours()<this.step&&(this.current=this.current.hours(0));break;case"weekday":case"day":this.current.date()<this.step+1&&(this.current=this.current.date(1));break;case"week":this.current.week()<this.step&&(this.current=this.current.week(1));break;case"month":this.current.month()<this.step&&(this.current=this.current.month(0));break}this.current.valueOf()==e&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,wte(this.moment,this,e)}getCurrent(){return this.current.clone()}setScale(e){e&&typeof e.scale=="string"&&(this.scale=e.scale,this.step=e.step>0?e.step:1,this.autoScale=!1)}setAutoScale(e){this.autoScale=e}setMinimumStep(e){if(e==null)return;const t=1e3*60*60*24*30*12,n=1e3*60*60*24*30,r=1e3*60*60*24,s=1e3*60*60,o=1e3*60,a=1e3,l=1;t*1e3>e&&(this.scale="year",this.step=1e3),t*500>e&&(this.scale="year",this.step=500),t*100>e&&(this.scale="year",this.step=100),t*50>e&&(this.scale="year",this.step=50),t*10>e&&(this.scale="year",this.step=10),t*5>e&&(this.scale="year",this.step=5),t>e&&(this.scale="year",this.step=1),n*3>e&&(this.scale="month",this.step=3),n>e&&(this.scale="month",this.step=1),r*7>e&&this.options.showWeekScale&&(this.scale="week",this.step=1),r*2>e&&(this.scale="day",this.step=2),r>e&&(this.scale="day",this.step=1),r/2>e&&(this.scale="weekday",this.step=1),s*4>e&&(this.scale="hour",this.step=4),s>e&&(this.scale="hour",this.step=1),o*15>e&&(this.scale="minute",this.step=15),o*10>e&&(this.scale="minute",this.step=10),o*5>e&&(this.scale="minute",this.step=5),o>e&&(this.scale="minute",this.step=1),a*15>e&&(this.scale="second",this.step=15),a*10>e&&(this.scale="second",this.step=10),a*5>e&&(this.scale="second",this.step=5),a>e&&(this.scale="second",this.step=1),l*200>e&&(this.scale="millisecond",this.step=200),l*100>e&&(this.scale="millisecond",this.step=100),l*50>e&&(this.scale="millisecond",this.step=50),l*10>e&&(this.scale="millisecond",this.step=10),l*5>e&&(this.scale="millisecond",this.step=5),l>e&&(this.scale="millisecond",this.step=1)}static snap(e,t,n){let r=ti(e);if(t=="year"){const s=r.year()+Math.round(r.month()/12);r=r.year(Math.round(s/n)*n).month(0).date(0).hours(0).minutes(0).seconds(0).milliseconds(0)}else if(t=="month")r.date()>15?r=r.date(1).add(1,"month"):r=r.date(1),r=r.hours(0).minutes(0).seconds(0).milliseconds(0);else if(t=="week")r.weekday()>2?r=r.weekday(0).add(1,"week"):r=r.weekday(0),r=r.hours(0).minutes(0).seconds(0).milliseconds(0);else if(t=="day"){switch(n){case 5:case 2:r=r.hours(Math.round(r.hours()/24)*24);break;default:r=r.hours(Math.round(r.hours()/12)*12);break}r=r.minutes(0).seconds(0).milliseconds(0)}else if(t=="weekday"){switch(n){case 5:case 2:r=r.hours(Math.round(r.hours()/12)*12);break;default:r=r.hours(Math.round(r.hours()/6)*6);break}r=r.minutes(0).seconds(0).milliseconds(0)}else if(t=="hour"){switch(n){case 4:r=r.minutes(Math.round(r.minutes()/60)*60);break;default:r=r.minutes(Math.round(r.minutes()/30)*30);break}r=r.seconds(0).milliseconds(0)}else if(t=="minute"){switch(n){case 15:case 10:r=r.minutes(Math.round(r.minutes()/5)*5).seconds(0);break;case 5:r=r.seconds(Math.round(r.seconds()/60)*60);break;default:r=r.seconds(Math.round(r.seconds()/30)*30);break}r=r.milliseconds(0)}else if(t=="second")switch(n){case 15:case 10:r=r.seconds(Math.round(r.seconds()/5)*5).milliseconds(0);break;case 5:r=r.milliseconds(Math.round(r.milliseconds()/1e3)*1e3);break;default:r=r.milliseconds(Math.round(r.milliseconds()/500)*500);break}else if(t=="millisecond"){const s=n>5?n/2:1;r=r.milliseconds(Math.round(r.milliseconds()/s)*s)}return r}isMajor(){if(this.switchedYear==!0)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedMonth==!0)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedDay==!0)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}const e=this.moment(this.current);switch(this.scale){case"millisecond":return e.milliseconds()==0;case"second":return e.seconds()==0;case"minute":return e.hours()==0&&e.minutes()==0;case"hour":return e.hours()==0;case"weekday":case"day":return this.options.showWeekScale?e.isoWeekday()==1:e.date()==1;case"week":return e.date()==1;case"month":return e.month()==0;case"year":return!1;default:return!1}}getLabelMinor(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.minorLabels=="function")return this.format.minorLabels(e,this.scale,this.step);const t=this.format.minorLabels[this.scale];switch(this.scale){case"week":if(e.date()===1&&e.weekday()!==0)return"";default:return t&&t.length>0?this.moment(e).format(t):""}}getLabelMajor(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.majorLabels=="function")return this.format.majorLabels(e,this.scale,this.step);const t=this.format.majorLabels[this.scale];return t&&t.length>0?this.moment(e).format(t):""}getClassName(){const e=this.moment,t=this.moment(this.current),n=t.locale?t.locale("en"):t.lang("en"),r=this.step,s=[];function o(h){return h/r%2==0?" vis-even":" vis-odd"}function a(h){return h.isSame(Date.now(),"day")?" vis-today":h.isSame(e().add(1,"day"),"day")?" vis-tomorrow":h.isSame(e().add(-1,"day"),"day")?" vis-yesterday":""}function l(h){return h.isSame(Date.now(),"week")?" vis-current-week":""}function c(h){return h.isSame(Date.now(),"month")?" vis-current-month":""}function u(h){return h.isSame(Date.now(),"year")?" vis-current-year":""}switch(this.scale){case"millisecond":s.push(a(n)),s.push(o(n.milliseconds()));break;case"second":s.push(a(n)),s.push(o(n.seconds()));break;case"minute":s.push(a(n)),s.push(o(n.minutes()));break;case"hour":s.push(`vis-h${n.hours()}${this.step==4?"-h"+(n.hours()+4):""}`),s.push(a(n)),s.push(o(n.hours()));break;case"weekday":s.push(`vis-${n.format("dddd").toLowerCase()}`),s.push(a(n)),s.push(l(n)),s.push(o(n.date()));break;case"day":s.push(`vis-day${n.date()}`),s.push(`vis-${n.format("MMMM").toLowerCase()}`),s.push(a(n)),s.push(c(n)),s.push(this.step<=2?a(n):""),s.push(this.step<=2?`vis-${n.format("dddd").toLowerCase()}`:""),s.push(o(n.date()-1));break;case"week":s.push(`vis-week${n.format("w")}`),s.push(l(n)),s.push(o(n.week()));break;case"month":s.push(`vis-${n.format("MMMM").toLowerCase()}`),s.push(c(n)),s.push(o(n.month()));break;case"year":s.push(`vis-year${n.year()}`),s.push(u(n)),s.push(o(n.year()));break}return s.filter(String).join(" ")}}Ws.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}};class Mh extends es{constructor(e,t){super(),this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,maxMinorChars:7,format:R.extend({},Ws.FORMAT),moment:ti,timeAxis:null},this.options=R.extend({},this.defaultOptions),this.body=e,this._create(),this.setOptions(t)}setOptions(e){e&&(R.selectiveExtend(["showMinorLabels","showMajorLabels","showWeekScale","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,e),R.selectiveDeepExtend(["format"],this.options,e),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation.axis=e.orientation:typeof e.orientation=="object"&&"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis)),"locale"in e&&(typeof ti.locale=="function"?ti.locale(e.locale):ti.lang(e.locale)))}_create(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"}destroy(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null}redraw(){const e=this.props,t=this.dom.foreground,n=this.dom.background,r=this.options.orientation.axis=="top"?this.body.dom.top:this.body.dom.bottom,s=t.parentNode!==r;this._calculateCharSize();const o=this.options.showMinorLabels&&this.options.orientation.axis!=="none",a=this.options.showMajorLabels&&this.options.orientation.axis!=="none";e.minorLabelHeight=o?e.minorCharHeight:0,e.majorLabelHeight=a?e.majorCharHeight:0,e.height=e.minorLabelHeight+e.majorLabelHeight,e.width=t.offsetWidth,e.minorLineHeight=this.body.domProps.root.height-e.majorLabelHeight-(this.options.orientation.axis=="top"?this.body.domProps.bottom.height:this.body.domProps.top.height),e.minorLineWidth=1,e.majorLineHeight=e.minorLineHeight+e.majorLabelHeight,e.majorLineWidth=1;const l=t.nextSibling,c=n.nextSibling;return t.parentNode&&t.parentNode.removeChild(t),n.parentNode&&n.parentNode.removeChild(n),t.style.height=`${this.props.height}px`,this._repaintLabels(),l?r.insertBefore(t,l):r.appendChild(t),c?this.body.dom.backgroundVertical.insertBefore(n,c):this.body.dom.backgroundVertical.appendChild(n),this._isResized()||s}_repaintLabels(){const e=this.options.orientation.axis,t=R.convert(this.body.range.start,"Number"),n=R.convert(this.body.range.end,"Number"),r=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf();let s=r-Dh(this.options.moment,this.body.hiddenDates,this.body.range,r);s-=this.body.util.toTime(0).valueOf();const o=new Ws(new Date(t),new Date(n),s,this.body.hiddenDates,this.options);o.setMoment(this.options.moment),this.options.format&&o.setFormat(this.options.format),this.options.timeAxis&&o.setScale(this.options.timeAxis),this.step=o;const a=this.dom;a.redundant.lines=a.lines,a.redundant.majorTexts=a.majorTexts,a.redundant.minorTexts=a.minorTexts,a.lines=[],a.majorTexts=[],a.minorTexts=[];let l,c,u,h,d,f,p=0,m,g,v,y=0;const b=1e3;let _;for(o.start(),c=o.getCurrent(),h=this.body.util.toScreen(c);o.hasNext()&&y<b;){switch(y++,d=o.isMajor(),_=o.getClassName(),l=c,u=h,o.next(),c=o.getCurrent(),h=this.body.util.toScreen(c),m=p,p=h-u,o.scale){case"week":f=!0;break;default:f=p>=m*.4;break}if(this.options.showMinorLabels&&f){var w=this._repaintMinorText(u,o.getLabelMinor(l),e,_);w.style.width=`${p}px`}d&&this.options.showMajorLabels?(u>0&&(v==null&&(v=u),w=this._repaintMajorText(u,o.getLabelMajor(l),e,_)),g=this._repaintMajorLine(u,p,e,_)):f?g=this._repaintMinorLine(u,p,e,_):g&&(g.style.width=`${parseInt(g.style.width)+p}px`)}if(y===b&&!cA&&(console.warn(`Something is wrong with the Timeline scale. Limited drawing of grid lines to ${b} lines.`),cA=!0),this.options.showMajorLabels){const C=this.body.util.toTime(0),E=o.getLabelMajor(C),x=E.length*(this.props.majorCharWidth||10)+10;(v==null||x<v)&&this._repaintMajorText(0,E,e,_)}R.forEach(this.dom.redundant,C=>{for(;C.length;){const E=C.pop();E&&E.parentNode&&E.parentNode.removeChild(E)}})}_repaintMinorText(e,t,n,r){let s=this.dom.redundant.minorTexts.shift();if(!s){const a=document.createTextNode("");s=document.createElement("div"),s.appendChild(a),this.dom.foreground.appendChild(s)}this.dom.minorTexts.push(s),s.innerHTML=R.xss(t);let o=n=="top"?this.props.majorLabelHeight:0;return this._setXY(s,e,o),s.className=`vis-text vis-minor ${r}`,s}_repaintMajorText(e,t,n,r){let s=this.dom.redundant.majorTexts.shift();if(!s){const a=document.createElement("div");s=document.createElement("div"),s.appendChild(a),this.dom.foreground.appendChild(s)}s.childNodes[0].innerHTML=R.xss(t),s.className=`vis-text vis-major ${r}`;let o=n=="top"?0:this.props.minorLabelHeight;return this._setXY(s,e,o),this.dom.majorTexts.push(s),s}_setXY(e,t,n){const r=this.options.rtl?t*-1:t;e.style.transform=`translate(${r}px, ${n}px)`}_repaintMinorLine(e,t,n,r){let s=this.dom.redundant.lines.shift();s||(s=document.createElement("div"),this.dom.background.appendChild(s)),this.dom.lines.push(s);const o=this.props;s.style.width=`${t}px`,s.style.height=`${o.minorLineHeight}px`;let a=n=="top"?o.majorLabelHeight:this.body.domProps.top.height,l=e-o.minorLineWidth/2;return this._setXY(s,l,a),s.className=`vis-grid ${this.options.rtl?"vis-vertical-rtl":"vis-vertical"} vis-minor ${r}`,s}_repaintMajorLine(e,t,n,r){let s=this.dom.redundant.lines.shift();s||(s=document.createElement("div"),this.dom.background.appendChild(s)),this.dom.lines.push(s);const o=this.props;s.style.width=`${t}px`,s.style.height=`${o.majorLineHeight}px`;let a=n=="top"?0:this.body.domProps.top.height,l=e-o.majorLineWidth/2;return this._setXY(s,l,a),s.className=`vis-grid ${this.options.rtl?"vis-vertical-rtl":"vis-vertical"} vis-major ${r}`,s}_calculateCharSize(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth}}var cA=!1;function Ii(i){this.active=!1,this.dom={container:i},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=Wt(this.dom.overlay),this.hammer.on("tap",this._onTapOverlay.bind(this));var e=this,t=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];t.forEach(function(n){e.hammer.on(n,function(r){r.stopPropagation()})}),document&&document.body&&(this.onClick=function(n){Rte(n.target,i)||e.deactivate()},document.body.addEventListener("click",this.onClick)),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=gte(),this.escListener=this.deactivate.bind(this)}Fw(Ii.prototype);Ii.current=null;Ii.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null};Ii.prototype.activate=function(){Ii.current&&Ii.current.deactivate(),Ii.current=this,this.active=!0,this.dom.overlay.style.display="none",R.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)};Ii.prototype.deactivate=function(){Ii.current===this&&(Ii.current=null),this.active=!1,this.dom.overlay.style.display="",R.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")};Ii.prototype._onTapOverlay=function(i){this.activate(),i.stopPropagation()};function Rte(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}const rx={current:"current",time:"time",deleteSelected:"Delete selected"},Ite=rx,Ote=rx,sx={current:"attuale",time:"tempo",deleteSelected:"Cancella la selezione"},Pte=sx,Dte=sx,ox={current:"huidige",time:"tijd",deleteSelected:"Selectie verwijderen"},Ate=ox,Mte=ox,Q2={current:"Aktuelle",time:"Zeit",deleteSelected:"Lösche Auswahl"},kte=Q2,Ud={current:"actuel",time:"heure",deleteSelected:"Effacer la selection"},Nte=Ud,Lte=Ud,Fte=Ud,J2={current:"corriente",time:"hora",deleteSelected:"Eliminar selección"},$te=J2,e$={current:"поточний",time:"час",deleteSelected:"Видалити обране"},jte=e$,t$={current:"текущее",time:"время",deleteSelected:"Удалить выбранное"},zte=t$,i$={current:"aktualny",time:"czas",deleteSelected:"Usuń wybrane"},Gte=i$,ax={current:"atual",time:"data",deleteSelected:"Apagar selecionado"},qte=ax,Wte=ax,n$={current:"現在",time:"時刻",deleteSelected:"選択されたものを削除"},Yte=n$,r$={current:"nuvarande",time:"tid",deleteSelected:"Radera valda"},Bte=r$,Vd={current:"nåværende",time:"tid",deleteSelected:"Slett valgte"},Hte=Vd,Ute=Vd,Vte=Vd,s$={current:"einamas",time:"laikas",deleteSelected:"Pašalinti pasirinktą"},Xte=s$,Ea={en:rx,en_EN:Ite,en_US:Ote,it:sx,it_IT:Pte,it_CH:Dte,nl:ox,nl_NL:Ate,nl_BE:Mte,de:Q2,de_DE:kte,fr:Ud,fr_FR:Nte,fr_CA:Lte,fr_BE:Fte,es:J2,es_ES:$te,uk:e$,uk_UA:jte,ru:t$,ru_RU:zte,pl:i$,pl_PL:Gte,pt:ax,pt_BR:qte,pt_PT:Wte,ja:n$,ja_JP:Yte,lt:s$,lt_LT:Xte,sv:r$,sv_SE:Bte,nb:Vd,nn:Ute,nb_NO:Hte,nn_NO:Vte};class lx extends es{constructor(e,t){super(),this.body=e,this.defaultOptions={moment:ti,locales:Ea,locale:"en",id:void 0,title:void 0},this.options=R.extend({},this.defaultOptions),this.setOptions(t),this.options.locales=R.extend({},Ea,this.options.locales);const n=this.defaultOptions.locales[this.defaultOptions.locale];Object.keys(this.options.locales).forEach(r=>{this.options.locales[r]=R.extend({},n,this.options.locales[r])}),t&&t.time!=null?this.customTime=t.time:this.customTime=new Date,this.eventParams={},this._create()}setOptions(e){e&&R.selectiveExtend(["moment","locale","locales","id","title","rtl","snap"],this.options,e)}_create(){const e=document.createElement("div");e["custom-time"]=this,e.className=`vis-custom-time ${this.options.id||""}`,e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e;const t=document.createElement("div");t.style.position="relative",t.style.top="0px",this.options.rtl?t.style.right="-10px":t.style.left="-10px",t.style.height="100%",t.style.width="20px";function n(r){this.body.range._onMouseWheel(r)}t.addEventListener?(t.addEventListener("mousewheel",n.bind(this),!1),t.addEventListener("DOMMouseScroll",n.bind(this),!1)):t.attachEvent("onmousewheel",n.bind(this)),e.appendChild(t),this.hammer=new Wt(t),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:Wt.DIRECTION_ALL}),this.hammer.get("press").set({time:1e4})}destroy(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null}redraw(){const e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar));const t=this.body.util.toScreen(this.customTime);let n=this.options.locales[this.options.locale];n||(this.warned||(console.warn(`WARNING: options.locales['${this.options.locale}'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization`),this.warned=!0),n=this.options.locales.en);let r=this.options.title;return r===void 0?(r=`${n.time}: ${this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")}`,r=r.charAt(0).toUpperCase()+r.substring(1)):typeof r=="function"&&(r=r.call(this,this.customTime)),this.options.rtl?this.bar.style.right=`${t}px`:this.bar.style.left=`${t}px`,this.bar.title=r,!1}hide(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}setCustomTime(e){this.customTime=R.convert(e,"Date"),this.redraw()}getCustomTime(){return new Date(this.customTime.valueOf())}setCustomMarker(e,t){this.marker&&this.bar.removeChild(this.marker),this.marker=document.createElement("div"),this.marker.className="vis-custom-time-marker",this.marker.innerHTML=R.xss(e),this.marker.style.position="absolute",t&&(this.marker.setAttribute("contenteditable","true"),this.marker.addEventListener("pointerdown",()=>{this.marker.focus()}),this.marker.addEventListener("input",this._onMarkerChange.bind(this)),this.marker.title=e,this.marker.addEventListener("blur",n=>{this.title!=n.target.innerHTML&&(this._onMarkerChanged(n),this.title=n.target.innerHTML)})),this.bar.appendChild(this.marker)}setCustomTitle(e){this.options.title=e}_onDragStart(e){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,e.stopPropagation()}_onDrag(e){if(!this.eventParams.dragging)return;let t=this.options.rtl?-1*e.deltaX:e.deltaX;const n=this.body.util.toScreen(this.eventParams.customTime)+t,r=this.body.util.toTime(n),s=this.body.util.getScale(),o=this.body.util.getStep(),a=this.options.snap,l=a?a(r,s,o):r;this.setCustomTime(l),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e}),e.stopPropagation()}_onDragEnd(e){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e}),e.stopPropagation())}_onMarkerChange(e){this.body.emitter.emit("markerchange",{id:this.options.id,title:e.target.innerHTML,event:e}),e.stopPropagation()}_onMarkerChanged(e){this.body.emitter.emit("markerchanged",{id:this.options.id,title:e.target.innerHTML,event:e}),e.stopPropagation()}static customTimeFromTarget(e){let t=e.target;for(;t;){if(Object.prototype.hasOwnProperty.call(t,"custom-time"))return t["custom-time"];t=t.parentNode}return null}}class ra{_create(e){this.dom={},this.dom.container=e,this.dom.container.style.position="relative",this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.rollingModeBtn=document.createElement("div"),this.dom.loadingScreen=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.rollingModeBtn.className="vis-rolling-mode-btn",this.dom.loadingScreen.className="vis-loading-screen",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.rollingModeBtn),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.on("rangechange",()=>{this.initialDrawDone===!0&&this._redraw()}),this.on("rangechanged",()=>{this.initialRangeChangeDone||(this.initialRangeChangeDone=!0)}),this.on("touch",this._onTouch.bind(this)),this.on("panmove",this._onDrag.bind(this));const t=this;this._origRedraw=this._redraw.bind(this),this._redraw=R.throttle(this._origRedraw),this.on("_change",h=>{t.itemSet&&t.itemSet.initialItemSetDrawn&&h&&h.queue==!0?t._redraw():t._origRedraw()}),this.hammer=new Wt(this.dom.root);const n=this.hammer.get("pinch").set({enable:!0});n&&Tte(n),this.hammer.get("pan").set({threshold:5,direction:Wt.DIRECTION_ALL}),this.timelineListeners={},["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(h=>{const d=f=>{t.isActive()&&t.emit(h,f)};t.hammer.on(h,d),t.timelineListeners[h]=d}),Z2(this.hammer,h=>{t.emit("touch",h)}),Cte(this.hammer,h=>{t.emit("release",h)});function s(h){if(!this.isActive())return;if(this.emit("mousewheel",h),this.options.preferZoom){if(!this.options.zoomKey||h[this.options.zoomKey])return}else if(this.options.zoomKey&&h[this.options.zoomKey])return;if(!this.options.verticalScroll&&!this.options.horizontalScroll)return;let d=0,f=0;"detail"in h&&(f=h.detail*-1),"wheelDelta"in h&&(f=h.wheelDelta),"wheelDeltaY"in h&&(f=h.wheelDeltaY),"wheelDeltaX"in h&&(d=h.wheelDeltaX*-1),"axis"in h&&h.axis===h.HORIZONTAL_AXIS&&(d=f*-1,f=0),"deltaY"in h&&(f=h.deltaY*-1),"deltaX"in h&&(d=h.deltaX);var p=40,m=800;h.deltaMode&&(h.deltaMode===1?(d*=p,f*=p):(d*=p,f*=m));const g=this.options.verticalScroll,v=Math.abs(f)>=Math.abs(d),y=this.options.horizontalScroll&&this.options.horizontalScrollKey&&h[this.options.horizontalScrollKey];if(g&&v&&!y){const b=this.props.scrollTop,_=b+f;this._setScrollTop(_)!==b&&(this._redraw(),this.emit("scroll",h),h.preventDefault());return}if(this.options.horizontalScroll){this.range.stopRolling();let _=(v?f:d)/120*(this.range.end-this.range.start)/20;this.options.horizontalScrollInvert&&v&&(_=-_);const w=this.range.start+_,C=this.range.end+_,E={animation:!1,byUser:!0,event:h};this.range.setRange(w,C,E),h.preventDefault();return}}const o="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":this.dom.centerContainer.addEventListener?"DOMMouseScroll":"onmousewheel";this.dom.top.addEventListener,this.dom.bottom.addEventListener,this.dom.centerContainer.addEventListener(o,s.bind(this),!1),this.dom.top.addEventListener(o,s.bind(this),!1),this.dom.bottom.addEventListener(o,s.bind(this),!1);function a(h){if(t.options.verticalScroll&&(h.preventDefault(),t.isActive())){const d=-h.target.scrollTop;t._setScrollTop(d),t._redraw(),t.emit("scrollSide",h)}}this.dom.left.parentNode.addEventListener("scroll",a.bind(this)),this.dom.right.parentNode.addEventListener("scroll",a.bind(this));let l=!1;function c(h){if(h.preventDefault&&(t.emit("dragover",t.getEventProperties(h)),h.preventDefault()),h.target.className.indexOf("timeline")>-1&&!l)return h.dataTransfer.dropEffect="move",l=!0,!1}function u(h){h.preventDefault&&h.preventDefault(),h.stopPropagation&&h.stopPropagation();try{var d=JSON.parse(h.dataTransfer.getData("text"));if(!d||!d.content)return}catch{return!1}return l=!1,h.center={x:h.clientX,y:h.clientY},d.target!=="item"?t.itemSet._onAddItem(h):t.itemSet._onDropObjectOnItem(h),t.emit("drop",t.getEventProperties(h)),!1}if(this.dom.center.addEventListener("dragover",c.bind(this),!1),this.dom.center.addEventListener("drop",u.bind(this),!1),this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!e)throw new Error("No container provided");e.appendChild(this.dom.root),e.appendChild(this.dom.loadingScreen)}setOptions(e){if(e){const t=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","preferZoom","rtl","zoomKey","horizontalScroll","horizontalScrollKey","horizontalScrollInvert","verticalScroll","longSelectPressTime","snap"];if(R.selectiveExtend(t,this.options,e),this.dom.rollingModeBtn.style.visibility="hidden",this.options.rtl&&(this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"),this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"),typeof this.options.orientation!="object"&&(this.options.orientation={item:void 0,axis:void 0}),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation={item:e.orientation,axis:e.orientation}:typeof e.orientation=="object"&&("item"in e.orientation&&(this.options.orientation.item=e.orientation.item),"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis))),this.options.orientation.axis==="both"){if(!this.timeAxis2){const n=this.timeAxis2=new Mh(this.body,this.options);n.setOptions=r=>{const s=r?R.extend({},r):{};s.orientation="top",Mh.prototype.setOptions.call(n,s)},this.components.push(n)}}else if(this.timeAxis2){const n=this.components.indexOf(this.timeAxis2);n!==-1&&this.components.splice(n,1),this.timeAxis2.destroy(),this.timeAxis2=null}typeof e.drawPoints=="function"&&(e.drawPoints={onRender:e.drawPoints}),"hiddenDates"in this.options&&nx(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in e&&(e.clickToUse?this.activator||(this.activator=new Ii(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),this._initAutoResize()}if(this.components.forEach(t=>t.setOptions(e)),"configure"in e){this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(e.configure);const t=R.deepExtend({},this.options);this.components.forEach(n=>{R.deepExtend(t,n.options)}),this.configurator.setModuleOptions({global:t})}this._redraw()}isActive(){return!this.activator||this.activator.active}destroy(){this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(const e in this.timelineListeners)Object.prototype.hasOwnProperty.call(this.timelineListeners,e)&&delete this.timelineListeners[e];this.timelineListeners=null,this.hammer&&this.hammer.destroy(),this.hammer=null,this.components.forEach(e=>e.destroy()),this.body=null}setCustomTime(e,t){const n=this.customTimes.filter(r=>t===r.options.id);if(n.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(t)}`);n.length>0&&n[0].setCustomTime(e)}getCustomTime(e){const t=this.customTimes.filter(n=>n.options.id===e);if(t.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(e)}`);return t[0].getCustomTime()}setCustomTimeMarker(e,t,n){const r=this.customTimes.filter(s=>s.options.id===t);if(r.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(t)}`);r.length>0&&r[0].setCustomMarker(e,n)}setCustomTimeTitle(e,t){const n=this.customTimes.filter(r=>r.options.id===t);if(n.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(t)}`);if(n.length>0)return n[0].setCustomTitle(e)}getEventProperties(e){return{event:e}}addCustomTime(e,t){const n=e!==void 0?R.convert(e,"Date"):new Date;if(this.customTimes.some(o=>o.options.id===t))throw new Error(`A custom time with id ${JSON.stringify(t)} already exists`);const s=new lx(this.body,R.extend({},this.options,{time:n,id:t,snap:this.itemSet?this.itemSet.options.snap:this.options.snap}));return this.customTimes.push(s),this.components.push(s),this._redraw(),t}removeCustomTime(e){const t=this.customTimes.filter(n=>n.options.id===e);if(t.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(e)}`);t.forEach(n=>{this.customTimes.splice(this.customTimes.indexOf(n),1),this.components.splice(this.components.indexOf(n),1),n.destroy()})}getVisibleItems(){return this.itemSet&&this.itemSet.getVisibleItems()||[]}getItemsAtCurrentTime(e){return this.time=e,this.itemSet&&this.itemSet.getItemsAtCurrentTime(this.time)||[]}getVisibleGroups(){return this.itemSet&&this.itemSet.getVisibleGroups()||[]}fit(e,t){const n=this.getDataRange();if(n.min===null&&n.max===null)return;const r=n.max-n.min,s=new Date(n.min.valueOf()-r*.01),o=new Date(n.max.valueOf()+r*.01),a=e&&e.animation!==void 0?e.animation:!0;this.range.setRange(s,o,{animation:a},t)}getDataRange(){throw new Error("Cannot invoke abstract method getDataRange")}setWindow(e,t,n,r){typeof arguments[2]=="function"&&(r=arguments[2],n={});let s,o;arguments.length==1?(o=arguments[0],s=o.animation!==void 0?o.animation:!0,this.range.setRange(o.start,o.end,{animation:s})):arguments.length==2&&typeof arguments[1]=="function"?(o=arguments[0],r=arguments[1],s=o.animation!==void 0?o.animation:!0,this.range.setRange(o.start,o.end,{animation:s},r)):(s=n&&n.animation!==void 0?n.animation:!0,this.range.setRange(e,t,{animation:s},r))}moveTo(e,t,n){typeof arguments[1]=="function"&&(n=arguments[1],t={});const r=this.range.end-this.range.start,s=R.convert(e,"Date").valueOf(),o=s-r/2,a=s+r/2,l=t&&t.animation!==void 0?t.animation:!0;this.range.setRange(o,a,{animation:l},n)}getWindow(){const e=this.range.getRange();return{start:new Date(e.start),end:new Date(e.end)}}zoomIn(e,t,n){if(!e||e<0||e>1)return;typeof arguments[1]=="function"&&(n=arguments[1],t={});const r=this.getWindow(),s=r.start.valueOf(),o=r.end.valueOf(),a=o-s,l=a/(1+e),c=(a-l)/2,u=s+c,h=o-c;this.setWindow(u,h,t,n)}zoomOut(e,t,n){if(!e||e<0||e>1)return;typeof arguments[1]=="function"&&(n=arguments[1],t={});const r=this.getWindow(),s=r.start.valueOf(),o=r.end.valueOf(),a=o-s,l=s-a*e/2,c=o+a*e/2;this.setWindow(l,c,t,n)}redraw(){this._redraw()}_redraw(){this.redrawCount++;const e=this.dom;if(!e||!e.container||e.root.offsetWidth==0)return;let t=!1;const n=this.options,r=this.props;Ph(this.options.moment,this.body,this.options.hiddenDates),n.orientation=="top"?(R.addClassName(e.root,"vis-top"),R.removeClassName(e.root,"vis-bottom")):(R.removeClassName(e.root,"vis-top"),R.addClassName(e.root,"vis-bottom")),n.rtl?(R.addClassName(e.root,"vis-rtl"),R.removeClassName(e.root,"vis-ltr")):(R.addClassName(e.root,"vis-ltr"),R.removeClassName(e.root,"vis-rtl")),e.root.style.maxHeight=R.option.asSize(n.maxHeight,""),e.root.style.minHeight=R.option.asSize(n.minHeight,""),e.root.style.width=R.option.asSize(n.width,"");const s=e.root.offsetWidth;r.border.left=1,r.border.right=1,r.border.top=1,r.border.bottom=1,r.center.height=e.center.offsetHeight,r.left.height=e.left.offsetHeight,r.right.height=e.right.offsetHeight,r.top.height=e.top.clientHeight||-r.border.top,r.bottom.height=Math.round(e.bottom.getBoundingClientRect().height)||e.bottom.clientHeight||-r.border.bottom;const o=Math.max(r.left.height,r.center.height,r.right.height),a=r.top.height+o+r.bottom.height+r.border.top+r.border.bottom;e.root.style.height=R.option.asSize(n.height,`${a}px`),r.root.height=e.root.offsetHeight,r.background.height=r.root.height;const l=r.root.height-r.top.height-r.bottom.height;r.centerContainer.height=l,r.leftContainer.height=l,r.rightContainer.height=r.leftContainer.height,r.root.width=s,r.background.width=r.root.width,this.initialDrawDone||(r.scrollbarWidth=R.getScrollBarWidth());const c=e.leftContainer.clientWidth,u=e.rightContainer.clientWidth;n.verticalScroll?n.rtl?(r.left.width=c||-r.border.left,r.right.width=u+r.scrollbarWidth||-r.border.right):(r.left.width=c+r.scrollbarWidth||-r.border.left,r.right.width=u||-r.border.right):(r.left.width=c||-r.border.left,r.right.width=u||-r.border.right),this._setDOM();let h=this._updateScrollTop();n.orientation.item!="top"&&(h+=Math.max(r.centerContainer.height-r.center.height-r.border.top-r.border.bottom,0)),e.center.style.transform=`translateY(${h}px)`;const d=r.scrollTop==0?"hidden":"",f=r.scrollTop==r.scrollTopMin?"hidden":"";e.shadowTop.style.visibility=d,e.shadowBottom.style.visibility=f,e.shadowTopLeft.style.visibility=d,e.shadowBottomLeft.style.visibility=f,e.shadowTopRight.style.visibility=d,e.shadowBottomRight.style.visibility=f,n.verticalScroll&&(e.rightContainer.className="vis-panel vis-right vis-vertical-scroll",e.leftContainer.className="vis-panel vis-left vis-vertical-scroll",e.shadowTopRight.style.visibility="hidden",e.shadowBottomRight.style.visibility="hidden",e.shadowTopLeft.style.visibility="hidden",e.shadowBottomLeft.style.visibility="hidden",e.left.style.top="0px",e.right.style.top="0px"),(!n.verticalScroll||r.center.height<r.centerContainer.height)&&(e.left.style.top=`${h}px`,e.right.style.top=`${h}px`,e.rightContainer.className=e.rightContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),e.leftContainer.className=e.leftContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),r.left.width=c||-r.border.left,r.right.width=u||-r.border.right,this._setDOM());const p=r.center.height>r.centerContainer.height;this.hammer.get("pan").set({direction:p?Wt.DIRECTION_ALL:Wt.DIRECTION_HORIZONTAL}),this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.components.forEach(g=>{t=g.redraw()||t});const m=5;if(t)if(this.redrawCount<m){this.body.emitter.emit("_change");return}else console.log("WARNING: infinite loop in redraw?");else this.redrawCount=0;this.body.emitter.emit("changed")}_setDOM(){const e=this.props,t=this.dom;e.leftContainer.width=e.left.width,e.rightContainer.width=e.right.width;const n=e.root.width-e.left.width-e.right.width;e.center.width=n,e.centerContainer.width=n,e.top.width=n,e.bottom.width=n,t.background.style.height=`${e.background.height}px`,t.backgroundVertical.style.height=`${e.background.height}px`,t.backgroundHorizontal.style.height=`${e.centerContainer.height}px`,t.centerContainer.style.height=`${e.centerContainer.height}px`,t.leftContainer.style.height=`${e.leftContainer.height}px`,t.rightContainer.style.height=`${e.rightContainer.height}px`,t.background.style.width=`${e.background.width}px`,t.backgroundVertical.style.width=`${e.centerContainer.width}px`,t.backgroundHorizontal.style.width=`${e.background.width}px`,t.centerContainer.style.width=`${e.center.width}px`,t.top.style.width=`${e.top.width}px`,t.bottom.style.width=`${e.bottom.width}px`,t.background.style.left="0",t.background.style.top="0",t.backgroundVertical.style.left=`${e.left.width+e.border.left}px`,t.backgroundVertical.style.top="0",t.backgroundHorizontal.style.left="0",t.backgroundHorizontal.style.top=`${e.top.height}px`,t.centerContainer.style.left=`${e.left.width}px`,t.centerContainer.style.top=`${e.top.height}px`,t.leftContainer.style.left="0",t.leftContainer.style.top=`${e.top.height}px`,t.rightContainer.style.left=`${e.left.width+e.center.width}px`,t.rightContainer.style.top=`${e.top.height}px`,t.top.style.left=`${e.left.width}px`,t.top.style.top="0",t.bottom.style.left=`${e.left.width}px`,t.bottom.style.top=`${e.top.height+e.centerContainer.height}px`,t.center.style.left="0",t.left.style.left="0",t.right.style.left="0"}setCurrentTime(e){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(e)}getCurrentTime(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()}_toTime(e){return oA(this,e,this.props.center.width)}_toGlobalTime(e){return oA(this,e,this.props.root.width)}_toScreen(e){return sA(this,e,this.props.center.width)}_toGlobalScreen(e){return sA(this,e,this.props.root.width)}_initAutoResize(){this.options.autoResize==!0?this._startAutoResize():this._stopAutoResize()}_startAutoResize(){const e=this;this._stopAutoResize(),this._onResize=()=>{if(e.options.autoResize!=!0){e._stopAutoResize();return}if(e.dom.root){const t=e.dom.root.offsetHeight,n=e.dom.root.offsetWidth;(n!=e.props.lastWidth||t!=e.props.lastHeight)&&(e.props.lastWidth=n,e.props.lastHeight=t,e.props.scrollbarWidth=R.getScrollBarWidth(),e.body.emitter.emit("_change"))}},window.addEventListener("resize",this._onResize),e.dom.root&&(e.props.lastWidth=e.dom.root.offsetWidth,e.props.lastHeight=e.dom.root.offsetHeight),this.watchTimer=setInterval(this._onResize,1e3)}_stopAutoResize(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(window.removeEventListener("resize",this._onResize),this._onResize=null)}_onTouch(){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop}_onPinch(){this.touch.allowDragging=!1}_onDrag(e){if(!e||!this.touch.allowDragging)return;const t=e.deltaY,n=this._getScrollTop(),r=this._setScrollTop(this.touch.initialScrollTop+t);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),r!=n&&this.emit("verticalDrag")}_setScrollTop(e){return this.props.scrollTop=e,this._updateScrollTop(),this.props.scrollTop}_updateScrollTop(){const e=Math.min(this.props.centerContainer.height-this.props.border.top-this.props.border.bottom-this.props.center.height,0);return e!=this.props.scrollTopMin&&(this.options.orientation.item!="top"&&(this.props.scrollTop+=e-this.props.scrollTopMin),this.props.scrollTopMin=e),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<e&&(this.props.scrollTop=e),this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.props.scrollTop}_getScrollTop(){return this.props.scrollTop}_createConfigurator(){throw new Error("Cannot invoke abstract method _createConfigurator")}}Fw(ra.prototype);class o$ extends es{constructor(e,t){super(),this.body=e,this.defaultOptions={rtl:!1,showCurrentTime:!0,alignCurrentTime:void 0,moment:ti,locales:Ea,locale:"en"},this.options=R.extend({},this.defaultOptions),this.setOptions(t),this.options.locales=R.extend({},Ea,this.options.locales);const n=this.defaultOptions.locales[this.defaultOptions.locale];Object.keys(this.options.locales).forEach(r=>{this.options.locales[r]=R.extend({},n,this.options.locales[r])}),this.offset=0,this._create()}_create(){const e=document.createElement("div");e.className="vis-current-time",e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e}destroy(){this.options.showCurrentTime=!1,this.redraw(),this.body=null}setOptions(e){e&&R.selectiveExtend(["rtl","showCurrentTime","alignCurrentTime","moment","locale","locales"],this.options,e)}redraw(){if(this.options.showCurrentTime){const e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar),this.start());let t=this.options.moment(Date.now()+this.offset);this.options.alignCurrentTime&&(t=t.startOf(this.options.alignCurrentTime));const n=this.body.util.toScreen(t);let r=this.options.locales[this.options.locale];r||(this.warned||(console.warn(`WARNING: options.locales['${this.options.locale}'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization`),this.warned=!0),r=this.options.locales.en);let s=`${r.current} ${r.time}: ${t.format("dddd, MMMM Do YYYY, H:mm:ss")}`;s=s.charAt(0).toUpperCase()+s.substring(1),this.options.rtl?this.bar.style.transform=`translateX(${n*-1}px)`:this.bar.style.transform=`translateX(${n}px)`,this.bar.title=s}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1}start(){const e=this;function t(){e.stop();let r=1/e.body.range.conversion(e.body.domProps.center.width).scale/10;r<30&&(r=30),r>1e3&&(r=1e3),e.redraw(),e.body.emitter.emit("currentTimeTick"),e.currentTimeTimer=setTimeout(t,r)}t()}stop(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)}setCurrentTime(e){const t=R.convert(e,"Date").valueOf(),n=Date.now();this.offset=t-n,this.redraw()}getCurrentTime(){return new Date(Date.now()+this.offset)}}const ui=.001;function Kte(i){i.sort((e,t)=>e.data.start-t.data.start)}function Zte(i){i.sort((e,t)=>{const n="end"in e.data?e.data.end:e.data.start,r="end"in t.data?t.data.end:t.data.start;return n-r})}function uA(i,e,t,n){return cx(i,e.item,!1,s=>s.stack&&(t||s.top===null),s=>s.stack,()=>e.axis,n)===null}function Qte(i,e,t){const n=cx(i,e.item,!1,r=>r.stack,()=>!0,r=>r.baseTop);t.height=n-t.top+.5*e.item.vertical}function Jte(i,e,t,n){for(let r=0;r<i.length;r++){if(i[r].data.subgroup==null){i[r].top=e.item.vertical;continue}if(i[r].data.subgroup===void 0||!n)continue;let s=0;for(const o in t)!Object.prototype.hasOwnProperty.call(t,o)||t[o].visible!==!0||t[o].index>=t[i[r].data.subgroup].index||(s+=t[o].height,t[i[r].data.subgroup].top=s);i[r].top=s+.5*e.item.vertical}n||eie(i,e,t)}function eie(i,e,t){cx(Object.values(t).sort((n,r)=>n.index>r.index?1:n.index<r.index?-1:0),{vertical:0},!0,()=>!0,()=>!0,()=>0);for(let n=0;n<i.length;n++)i[n].data.subgroup!==void 0&&(i[n].top=t[i[n].data.subgroup].top+.5*e.item.vertical)}function hA(i,e,t){let n=!1;const r=[];for(let s in t)Object.prototype.hasOwnProperty.call(t[s],"index")?r[t[s].index]=s:r.push(s);for(let s=0;s<r.length;s++){let o=r[s];if(!Object.prototype.hasOwnProperty.call(t,o))continue;n=n||t[o].stack,t[o].top=0;for(const l in t)t[l].visible&&t[o].index>t[l].index&&(t[o].top+=t[l].height);const a=i[o];for(let l=0;l<a.length;l++)a[l].data.subgroup!==void 0&&(a[l].top=t[a[l].data.subgroup].top+.5*e.item.vertical,t[o].stack&&(a[l].baseTop=a[l].top));n&&t[o].stack&&Qte(i[o],e,t[o])}}function cx(i,e,t,n,r,s,o){let a=v=>v.start,l=v=>v.end;t||(!!(i[0]&&i[0].options.rtl)?a=y=>y.right:a=y=>y.left,l=y=>a(y)+y.width+e.horizontal);const c=[],u=[];let h=null,d=0;for(const v of i)if(n(v))c.push(v);else if(r(v)){const y=a(v);h!==null&&y<h-ui&&(d=0),h=y,d=ju(u,b=>a(b)-ui>y,d),u.splice(d,0,v),d++}h=null;let f=null;d=0;let p=0,m=0,g=0;for(;c.length>0;){const v=c.shift();v.top=s(v);const y=a(v),b=l(v);h!==null&&y<h-ui&&(p=0,m=0,d=0,f=null),(h===null||y>h+ui)&&(p=ju(u,C=>y<l(C)-ui,p)),h=y,(f===null||f<b-ui)&&(m=ju(u,C=>b<a(C)-ui,Math.max(p,m))),f!==null&&f-ui>b&&(m=iie(u,C=>b+ui>=a(C),p,m)+1),f=b;const _=nie(u,C=>y<l(C)-ui,p,m).sort((C,E)=>C.top-E.top);for(let C=0;C<_.length;C++){const E=_[C];tie(v,E,e)&&(v.top=E.top+E.height+e.vertical)}r(v)&&(d=ju(u,C=>a(C)-ui>y,d),u.splice(d,0,v),d<p&&p++,d<=m&&m++,d++);const w=v.top+v.height;if(w>g&&(g=w),o&&o())return null}return g}function tie(i,e,t){return i.top-t.vertical+ui<e.top+e.height&&i.top+i.height+t.vertical-ui>e.top}function ju(i,e,t){t||(t=0);for(let n=t;n<i.length;n++)if(e(i[n]))return n;return i.length}function iie(i,e,t,n){t||(t=0),n||(n=i.length);for(let r=n-1;r>=t;r--)if(e(i[r]))return r;return t-1}function nie(i,e,t,n){t||(t=0),n?n=Math.min(n,i.length):n=i.length;const r=[];for(let s=t;s<n;s++)e(i[s])&&r.push(i[s]);return r}const rie="__background__",dA={BACKGROUND:rie};class Mb{constructor(e,t,n){if(this.groupId=e,this.subgroups={},this.subgroupStack={},this.subgroupStackAll=!1,this.subgroupVisibility={},this.doInnerStack=!1,this.shouldBailStackItems=!1,this.subgroupIndex=0,this.subgroupOrderer=t&&t.subgroupOrder,this.itemSet=n,this.isVisible=null,this.height=0,this.stackDirty=!0,this._disposeCallbacks=[],t&&t.nestedGroups&&(this.nestedGroups=t.nestedGroups,t.showNested==!1?this.showNested=!1:this.showNested=!0),t&&t.subgroupStack)if(typeof t.subgroupStack=="boolean")this.doInnerStack=t.subgroupStack,this.subgroupStackAll=t.subgroupStack;else for(const s in t.subgroupStack)Object.prototype.hasOwnProperty.call(t.subgroupStack,s)&&(this.subgroupStack[s]=t.subgroupStack[s],this.doInnerStack=this.doInnerStack||t.subgroupStack[s]);t&&t.heightMode?this.heightMode=t.heightMode:this.heightMode=n.options.groupHeightMode,this.nestedInGroup=null,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.itemsInRange=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;const r=()=>{this.checkRangedItems=!0};this.itemSet.body.emitter.on("checkRangedItems",r),this._disposeCallbacks.push(()=>{this.itemSet.body.emitter.off("checkRangedItems",r)}),this._create(),this.setData(t)}_create(){const e=document.createElement("div");this.itemSet.options.groupEditable.order?e.className="vis-label draggable":e.className="vis-label",this.dom.label=e;const t=document.createElement("div");t.className="vis-inner",e.appendChild(t),this.dom.inner=t;const n=document.createElement("div");n.className="vis-group",n["vis-group"]=this,this.dom.foreground=n,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.style.position="absolute",this.dom.marker.innerHTML="",this.dom.background.appendChild(this.dom.marker)}setData(e){if(this.itemSet.groupTouchParams.isDragging)return;let t,n;if(e&&e.subgroupVisibility)for(const s in e.subgroupVisibility)Object.prototype.hasOwnProperty.call(e.subgroupVisibility,s)&&(this.subgroupVisibility[s]=e.subgroupVisibility[s]);if(this.itemSet.options&&this.itemSet.options.groupTemplate?(n=this.itemSet.options.groupTemplate.bind(this),t=n(e,this.dom.inner)):t=e&&e.content,t instanceof Element){for(;this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(t)}else t instanceof Object&&t.isReactComponent||(t instanceof Object?n(e,this.dom.inner):t!=null?this.dom.inner.innerHTML=R.xss(t):this.dom.inner.innerHTML=R.xss(this.groupId||""));this.dom.label.title=e&&e.title||"",this.dom.inner.firstChild?R.removeClassName(this.dom.inner,"vis-hidden"):R.addClassName(this.dom.inner,"vis-hidden"),e&&e.nestedGroups?((!this.nestedGroups||this.nestedGroups!=e.nestedGroups)&&(this.nestedGroups=e.nestedGroups),(e.showNested!==void 0||this.showNested===void 0)&&(e.showNested==!1?this.showNested=!1:this.showNested=!0),R.addClassName(this.dom.label,"vis-nesting-group"),this.showNested?(R.removeClassName(this.dom.label,"collapsed"),R.addClassName(this.dom.label,"expanded")):(R.removeClassName(this.dom.label,"expanded"),R.addClassName(this.dom.label,"collapsed"))):this.nestedGroups&&(this.nestedGroups=null,R.removeClassName(this.dom.label,"collapsed"),R.removeClassName(this.dom.label,"expanded"),R.removeClassName(this.dom.label,"vis-nesting-group")),e&&(e.treeLevel||e.nestedInGroup)?(R.addClassName(this.dom.label,"vis-nested-group"),e.treeLevel?R.addClassName(this.dom.label,"vis-group-level-"+e.treeLevel):R.addClassName(this.dom.label,"vis-group-level-unknown-but-gte1")):R.addClassName(this.dom.label,"vis-group-level-0");const r=e&&e.className||null;r!=this.className&&(this.className&&(R.removeClassName(this.dom.label,this.className),R.removeClassName(this.dom.foreground,this.className),R.removeClassName(this.dom.background,this.className),R.removeClassName(this.dom.axis,this.className)),R.addClassName(this.dom.label,r),R.addClassName(this.dom.foreground,r),R.addClassName(this.dom.background,r),R.addClassName(this.dom.axis,r),this.className=r),this.style&&(R.removeCssText(this.dom.label,this.style),this.style=null),e&&e.style&&(R.addCssText(this.dom.label,e.style),this.style=e.style)}getLabelWidth(){return this.props.label.width}_didMarkerHeightChange(){const e=this.dom.marker.clientHeight;if(e!=this.lastMarkerHeight){this.lastMarkerHeight=e;const t={};let n=0;if(R.forEach(this.items,(s,o)=>{s.dirty=!0,s.displayed&&(t[o]=s.redraw(!0),n=t[o].length)}),n>0)for(let s=0;s<n;s++)R.forEach(t,o=>{o[s]()});return!0}else return!1}_calculateGroupSizeAndPosition(){const{offsetTop:e,offsetLeft:t,offsetWidth:n}=this.dom.foreground;this.top=e,this.right=t,this.width=n}_shouldBailItemsRedraw(){const e=this,t=this.itemSet.options.onTimeout,n={relativeBailingTime:this.itemSet.itemsSettingTime,bailTimeMs:t&&t.timeoutMs,userBailFunction:t&&t.callback,shouldBailStackItems:this.shouldBailStackItems};let r=null;if(!this.itemSet.initialDrawDone){if(n.shouldBailStackItems)return!0;Math.abs(Date.now()-new Date(n.relativeBailingTime))>n.bailTimeMs&&(n.userBailFunction&&this.itemSet.userContinueNotBail==null?n.userBailFunction(s=>{e.itemSet.userContinueNotBail=s,r=!s}):e.itemSet.userContinueNotBail==!1?r=!0:r=!1)}return r}_redrawItems(e,t,n,r){if(e||this.stackDirty||this.isVisible&&!t){const o={byEnd:this.orderedItems.byEnd.filter(u=>!u.isCluster),byStart:this.orderedItems.byStart.filter(u=>!u.isCluster)},a={byEnd:[...new Set(this.orderedItems.byEnd.map(u=>u.cluster).filter(u=>!!u))],byStart:[...new Set(this.orderedItems.byStart.map(u=>u.cluster).filter(u=>!!u))]},l=()=>{const u=this._updateItemsInRange(o,this.visibleItems.filter(d=>!d.isCluster),r),h=this._updateClustersInRange(a,this.visibleItems.filter(d=>d.isCluster),r);return[...u,...h]},c=u=>{let h={};for(const d in this.subgroups){if(!Object.prototype.hasOwnProperty.call(this.subgroups,d))continue;const f=this.visibleItems.filter(p=>p.data.subgroup===d);h[d]=u?f.sort((p,m)=>u(p.data,m.data)):f}return h};if(typeof this.itemSet.options.order=="function"){const u=this;if(this.doInnerStack&&this.itemSet.options.stackSubgroups){const h=c(this.itemSet.options.order);hA(h,n,this.subgroups),this.visibleItems=l(),this._updateSubGroupHeights(n)}else{this.visibleItems=l(),this._updateSubGroupHeights(n);const h=this.visibleItems.slice().filter(d=>d.isCluster||!d.isCluster&&!d.cluster).sort((d,f)=>u.itemSet.options.order(d.data,f.data));this.shouldBailStackItems=uA(h,n,!0,this._shouldBailItemsRedraw.bind(this))}}else if(this.visibleItems=l(),this._updateSubGroupHeights(n),this.itemSet.options.stack)if(this.doInnerStack&&this.itemSet.options.stackSubgroups){const u=c();hA(u,n,this.subgroups)}else this.shouldBailStackItems=uA(this.visibleItems,n,!0,this._shouldBailItemsRedraw.bind(this));else Jte(this.visibleItems,n,this.subgroups,this.itemSet.options.stackSubgroups);for(let u=0;u<this.visibleItems.length;u++)this.visibleItems[u].repositionX(),this.subgroupVisibility[this.visibleItems[u].data.subgroup]!==void 0&&(this.subgroupVisibility[this.visibleItems[u].data.subgroup]||this.visibleItems[u].hide());this.itemSet.options.cluster&&R.forEach(this.items,u=>{u.cluster&&u.displayed&&u.hide()}),this.shouldBailStackItems&&this.itemSet.body.emitter.emit("destroyTimeline"),this.stackDirty=!1}}_didResize(e,t){e=R.updateProperty(this,"height",t)||e;const n=this.dom.inner.clientWidth,r=this.dom.inner.clientHeight;return e=R.updateProperty(this.props.label,"width",n)||e,e=R.updateProperty(this.props.label,"height",r)||e,e}_applyGroupHeight(e){this.dom.background.style.height=`${e}px`,this.dom.foreground.style.height=`${e}px`,this.dom.label.style.height=`${e}px`}_updateItemsVerticalPosition(e){for(let t=0,n=this.visibleItems.length;t<n;t++){const r=this.visibleItems[t];r.repositionY(e),!this.isVisible&&this.groupId!=dA.BACKGROUND&&r.displayed&&r.hide()}}redraw(e,t,n,r){let s=!1;const o=this.isVisible;let a;const l=[()=>{n=this._didMarkerHeightChange.call(this)||n},this._updateSubGroupHeights.bind(this,t),this._calculateGroupSizeAndPosition.bind(this),()=>{this.isVisible=this._isGroupVisible.bind(this)(e,t)},()=>{this._redrawItems.bind(this)(n,o,t,e)},this._updateSubgroupsSizes.bind(this),()=>{a=this.height=this._calculateHeight.bind(this)(t)},this._calculateGroupSizeAndPosition.bind(this),()=>{s=this._didResize.bind(this)(s,a)},()=>{this._applyGroupHeight.bind(this)(a)},()=>{this._updateItemsVerticalPosition.bind(this)(t)},(()=>(!this.isVisible&&this.height&&(s=!1),s)).bind(this)];if(r)return l;{let c;return l.forEach(u=>{c=u()}),c}}_updateSubGroupHeights(e){if(Object.keys(this.subgroups).length>0){const t=this;this._resetSubgroups(),R.forEach(this.visibleItems,n=>{n.data.subgroup!==void 0&&(t.subgroups[n.data.subgroup].height=Math.max(t.subgroups[n.data.subgroup].height,n.height+e.item.vertical),t.subgroups[n.data.subgroup].visible=typeof this.subgroupVisibility[n.data.subgroup]>"u"?!0:!!this.subgroupVisibility[n.data.subgroup])})}}_isGroupVisible(e,t){return this.top<=e.body.domProps.centerContainer.height-e.body.domProps.scrollTop+t.axis&&this.top+this.height+t.axis>=-e.body.domProps.scrollTop}_calculateHeight(e){let t,n;if(this.heightMode==="fixed"?n=R.toArray(this.items):n=this.visibleItems,!this.isVisible&&this.height)t=Math.max(this.height,this.props.label.height);else if(n.length>0){let r=n[0].top,s=n[0].top+n[0].height;if(R.forEach(n,o=>{r=Math.min(r,o.top),s=Math.max(s,o.top+o.height)}),r>e.axis){const o=r-e.axis;s-=o,R.forEach(n,a=>{a.top-=o})}t=Math.ceil(s+e.item.vertical/2),this.heightMode!=="fitItems"&&(t=Math.max(t,this.props.label.height))}else t=this.props.label.height;return t}show(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)}hide(){const e=this.dom.label;e.parentNode&&e.parentNode.removeChild(e);const t=this.dom.foreground;t.parentNode&&t.parentNode.removeChild(t);const n=this.dom.background;n.parentNode&&n.parentNode.removeChild(n);const r=this.dom.axis;r.parentNode&&r.parentNode.removeChild(r)}add(e){if(this.items[e.id]=e,e.setParent(this),this.stackDirty=!0,e.data.subgroup!==void 0&&(this._addToSubgroup(e),this.orderSubgroups()),!this.visibleItems.includes(e)){const t=this.itemSet.body.range;this._checkIfVisible(e,this.visibleItems,t)}}_addToSubgroup(e,t=e.data.subgroup){t!=null&&this.subgroups[t]===void 0&&(this.subgroups[t]={height:0,top:0,start:e.data.start,end:e.data.end||e.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[t]||!1},this.subgroupIndex++),new Date(e.data.start)<new Date(this.subgroups[t].start)&&(this.subgroups[t].start=e.data.start);const n=e.data.end||e.data.start;new Date(n)>new Date(this.subgroups[t].end)&&(this.subgroups[t].end=n),this.subgroups[t].items.push(e)}_updateSubgroupsSizes(){const e=this;if(e.subgroups)for(const t in e.subgroups){if(!Object.prototype.hasOwnProperty.call(e.subgroups,t))continue;const n=e.subgroups[t].items[0].data.end||e.subgroups[t].items[0].data.start;let r=e.subgroups[t].items[0].data.start,s=n-1;e.subgroups[t].items.forEach(o=>{new Date(o.data.start)<new Date(r)&&(r=o.data.start);const a=o.data.end||o.data.start;new Date(a)>new Date(s)&&(s=a)}),e.subgroups[t].start=r,e.subgroups[t].end=new Date(s-1)}}orderSubgroups(){if(this.subgroupOrderer!==void 0){const e=[];if(typeof this.subgroupOrderer=="string"){for(const t in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,t)&&e.push({subgroup:t,sortField:this.subgroups[t].items[0].data[this.subgroupOrderer]});e.sort((t,n)=>t.sortField-n.sortField)}else if(typeof this.subgroupOrderer=="function"){for(const t in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,t)&&e.push(this.subgroups[t].items[0].data);e.sort(this.subgroupOrderer)}if(e.length>0)for(let t=0;t<e.length;t++)this.subgroups[e[t].subgroup].index=t}}_resetSubgroups(){for(const e in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,e)&&(this.subgroups[e].visible=!1,this.subgroups[e].height=0)}remove(e){delete this.items[e.id],e.setParent(null),this.stackDirty=!0;const t=this.visibleItems.indexOf(e);t!=-1&&this.visibleItems.splice(t,1),e.data.subgroup!==void 0&&(this._removeFromSubgroup(e),this.orderSubgroups())}_removeFromSubgroup(e,t=e.data.subgroup){if(t!=null){const n=this.subgroups[t];if(n){const r=n.items.indexOf(e);r>=0&&(n.items.splice(r,1),n.items.length?this._updateSubgroupsSizes():delete this.subgroups[t])}}}removeFromDataSet(e){this.itemSet.removeItem(e.id)}order(){const e=R.toArray(this.items),t=[],n=[];for(let r=0;r<e.length;r++)e[r].data.end!==void 0&&n.push(e[r]),t.push(e[r]);this.orderedItems={byStart:t,byEnd:n},Kte(this.orderedItems.byStart),Zte(this.orderedItems.byEnd)}_updateItemsInRange(e,t,n){const r=[],s={};if(!this.isVisible&&this.height!==void 0&&this.groupId!=dA.BACKGROUND){for(let g=0;g<t.length;g++){var o=t[g];o.displayed&&o.hide()}return r}const a=(n.end-n.start)/4,l=n.start-a,c=n.end+a,u=g=>g<l?-1:g<=c?0:1,h=g=>{const{start:v,end:y}=g;return y<l?-1:v<=c?0:1};if(t.length>0)for(let g=0;g<t.length;g++)this._checkIfVisibleWithReference(t[g],r,s,n);const d=R.binarySearchCustom(e.byStart,u,"data","start");if(this._traceVisible(d,e.byStart,r,s,g=>g.data.start<l||g.data.start>c),this.checkRangedItems==!0){this.checkRangedItems=!1;for(let g=0;g<e.byEnd.length;g++)this._checkIfVisibleWithReference(e.byEnd[g],r,s,n)}else{const g=R.binarySearchCustom(e.byEnd,h,"data");this._traceVisible(g,e.byEnd,r,s,v=>v.data.end<l||v.data.start>c)}this._sortVisibleItems(e.byStart,r,s);const f={};let p=0;for(let g=0;g<r.length;g++){const v=r[g];v.displayed||(f[g]=v.redraw(!0),p=f[g].length)}if(p>0)for(let g=0;g<p;g++)R.forEach(f,v=>{v[g]()});for(let g=0;g<r.length;g++)r[g].repositionX();return r}_traceVisible(e,t,n,r,s){if(e!=-1){for(let o=e;o>=0;o--){let a=t[o];if(s(a))break;!(a.isCluster&&!a.hasItems())&&!a.cluster&&r[a.id]===void 0&&(r[a.id]=!0,n.unshift(a))}for(let o=e+1;o<t.length;o++){let a=t[o];if(s(a))break;!(a.isCluster&&!a.hasItems())&&!a.cluster&&r[a.id]===void 0&&(r[a.id]=!0,n.push(a))}}}_sortVisibleItems(e,t,n){t.length=0;for(let r=0;r<e.length;r++){let s=e[r];n[s.id]&&t.push(s)}}_checkIfVisible(e,t,n){e.isVisible(n)?(e.displayed||e.show(),e.repositionX(),t.push(e)):e.displayed&&e.hide()}_checkIfVisibleWithReference(e,t,n,r){e.isVisible(r)?n[e.id]===void 0&&(n[e.id]=!0,t.push(e)):e.displayed&&e.hide()}_updateClustersInRange(e,t,n){const r=[],s={};if(t.length>0)for(let u=0;u<t.length;u++)this._checkIfVisibleWithReference(t[u],r,s,n);for(let u=0;u<e.byStart.length;u++)this._checkIfVisibleWithReference(e.byStart[u],r,s,n);for(let u=0;u<e.byEnd.length;u++)this._checkIfVisibleWithReference(e.byEnd[u],r,s,n);const o={};let a=0;for(let u=0;u<r.length;u++){const h=r[u];h.displayed||(o[u]=h.redraw(!0),a=o[u].length)}if(a>0)for(var c=0;c<a;c++)R.forEach(o,function(u){u[c]()});for(let u=0;u<r.length;u++)r[u].repositionX();return r}changeSubgroup(e,t,n){this._removeFromSubgroup(e,t),this._addToSubgroup(e,n),this.orderSubgroups()}dispose(){this.hide();let e;for(;e=this._disposeCallbacks.pop();)e()}}class a$ extends Mb{constructor(e,t,n){super(e,t,n),this.width=0,this.height=0,this.top=0,this.left=0}redraw(e,t){this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,e),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(let r=0,s=this.visibleItems.length;r<s;r++)this.visibleItems[r].repositionY(t);return!1}show(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)}}class Qa{constructor(e,t,n){this.id=null,this.parent=null,this.data=e,this.dom=null,this.conversion=t||{},this.defaultOptions={locales:Ea,locale:"en"},this.options=R.extend({},this.defaultOptions,n),this.options.locales=R.extend({},Ea,this.options.locales);const r=this.defaultOptions.locales[this.defaultOptions.locale];Object.keys(this.options.locales).forEach(s=>{this.options.locales[s]=R.extend({},r,this.options.locales[s])}),this.selected=!1,this.displayed=!1,this.groupShowing=!0,this.selectable=n&&n.selectable||!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.setSelectability(e),this.editable=null,this._updateEditStatus()}select(){this.selectable&&(this.selected=!0,this.dirty=!0,this.displayed&&this.redraw())}unselect(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()}setData(e){e.group!=null&&this.data.group!=e.group&&this.parent!=null&&this.parent.itemSet._moveToGroup(this,e.group),this.setSelectability(e),this.parent&&(this.parent.stackDirty=!0),e.subgroup!=null&&this.data.subgroup!=e.subgroup&&this.parent!=null&&this.parent.changeSubgroup(this,this.data.subgroup,e.subgroup),this.data=e,this._updateEditStatus(),this.dirty=!0,this.displayed&&this.redraw()}setSelectability(e){e&&(this.selectable=typeof e.selectable>"u"?!0:!!e.selectable)}setParent(e){this.displayed?(this.hide(),this.parent=e,this.parent&&this.show()):this.parent=e}isVisible(){return!1}show(){return!1}hide(){return!1}redraw(){}repositionX(){}repositionY(){}_repaintDragCenter(){if(this.selected&&this.editable.updateTime&&!this.dom.dragCenter){const e=this,t=document.createElement("div");t.className="vis-drag-center",t.dragCenterItem=this,this.hammerDragCenter=new Wt(t),this.hammerDragCenter.on("tap",n=>{e.parent.itemSet.body.emitter.emit("click",{event:n,item:e.id})}),this.hammerDragCenter.on("doubletap",n=>{n.stopPropagation(),e.parent.itemSet._onUpdateItem(e),e.parent.itemSet.body.emitter.emit("doubleClick",{event:n,item:e.id})}),this.hammerDragCenter.on("panstart",n=>{n.stopPropagation(),e.parent.itemSet._onDragStart(n)}),this.hammerDragCenter.on("panmove",e.parent.itemSet._onDrag.bind(e.parent.itemSet)),this.hammerDragCenter.on("panend",e.parent.itemSet._onDragEnd.bind(e.parent.itemSet)),this.hammerDragCenter.get("press").set({time:1e4}),this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(t,this.dom.dragLeft):this.dom.box.appendChild(t):this.dom.point&&this.dom.point.appendChild(t),this.dom.dragCenter=t}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null,this.hammerDragCenter&&(this.hammerDragCenter.destroy(),this.hammerDragCenter=null))}_repaintDeleteButton(e){const t=(this.options.editable.overrideItems||this.editable==null)&&this.options.editable.remove||!this.options.editable.overrideItems&&this.editable!=null&&this.editable.remove;if(this.selected&&t&&!this.dom.deleteButton){const n=this,r=document.createElement("div");this.options.rtl?r.className="vis-delete-rtl":r.className="vis-delete";let s=this.options.locales[this.options.locale];s||(this.warned||(console.warn(`WARNING: options.locales['${this.options.locale}'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization`),this.warned=!0),s=this.options.locales.en),r.title=s.deleteSelected,this.hammerDeleteButton=new Wt(r).on("tap",o=>{o.stopPropagation(),n.parent.removeFromDataSet(n)}),e.appendChild(r),this.dom.deleteButton=r}else(!this.selected||!t)&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null,this.hammerDeleteButton&&(this.hammerDeleteButton.destroy(),this.hammerDeleteButton=null))}_repaintOnItemUpdateTimeTooltip(e){if(!this.options.tooltipOnItemUpdateTime)return;const t=(this.options.editable.updateTime||this.data.editable===!0)&&this.data.editable!==!1;if(this.selected&&t&&!this.dom.onItemUpdateTimeTooltip){const n=document.createElement("div");n.className="vis-onUpdateTime-tooltip",e.appendChild(n),this.dom.onItemUpdateTimeTooltip=n}else!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.dom.onItemUpdateTimeTooltip.style.transform="translateX(-50%)",this.dom.onItemUpdateTimeTooltip.style.left="50%";const n=50,r=this.parent.itemSet.body.domProps.scrollTop;let s;this.options.orientation.item=="top"?s=this.top:s=this.parent.height-this.top-this.height,s+this.parent.top-n<-r?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top=`${this.height+2}px`):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom=`${this.height+2}px`);let a,l;this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template?(l=this.options.tooltipOnItemUpdateTime.template.bind(this),a=l(this.data)):(a=`start: ${ti(this.data.start).format("MM/DD/YYYY hh:mm")}`,this.data.end&&(a+=`<br> end: ${ti(this.data.end).format("MM/DD/YYYY hh:mm")}`)),this.dom.onItemUpdateTimeTooltip.innerHTML=R.xss(a)}}_getItemData(){return this.parent.itemSet.itemsData.get(this.id)}_updateContents(e){let t,n,r,s,o;const a=this._getItemData(),c=(this.dom.box||this.dom.point).getElementsByClassName("vis-item-visible-frame")[0];if(this.options.visibleFrameTemplate?(o=this.options.visibleFrameTemplate.bind(this),s=R.xss(o(a,c))):s="",c){if(s instanceof Object&&!(s instanceof Element))o(a,c);else if(n=this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(s),n){if(s instanceof Element)c.innerHTML="",c.appendChild(s);else if(s!=null)c.innerHTML=R.xss(s);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error(`Property "content" missing in item ${this.id}`);this.itemVisibleFrameContent=s}}if(this.options.template?(r=this.options.template.bind(this),t=r(a,e,this.data)):t=this.data.content,t instanceof Object&&!(t instanceof Element))r(a,e);else if(n=this._contentToString(this.content)!==this._contentToString(t),n){if(t instanceof Element)e.innerHTML="",e.appendChild(t);else if(t!=null)e.innerHTML=R.xss(t);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error(`Property "content" missing in item ${this.id}`);this.content=t}}_updateDataAttributes(e){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){let t=[];if(Array.isArray(this.options.dataAttributes))t=this.options.dataAttributes;else if(this.options.dataAttributes=="all")t=Object.keys(this.data);else return;for(const n of t){const r=this.data[n];r!=null?e.setAttribute(`data-${n}`,r):e.removeAttribute(`data-${n}`)}}}_updateStyle(e){this.style&&(R.removeCssText(e,this.style),this.style=null),this.data.style&&(R.addCssText(e,this.data.style),this.style=this.data.style)}_contentToString(e){return typeof e=="string"?e:e&&"outerHTML"in e?e.outerHTML:e}_updateEditStatus(){this.options&&(typeof this.options.editable=="boolean"?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:typeof this.options.editable=="object"&&(this.editable={},R.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable))),(!this.options||!this.options.editable||this.options.editable.overrideItems!==!0)&&this.data&&(typeof this.data.editable=="boolean"?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:typeof this.data.editable=="object"&&(this.editable={},R.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))}getWidthLeft(){return 0}getWidthRight(){return 0}getTitle(){return this.options.tooltip&&this.options.tooltip.template?this.options.tooltip.template.bind(this)(this._getItemData(),this.data):this.data.title}}Qa.prototype.stack=!0;class sie extends Qa{constructor(e,t,n){if(super(e,t,n),this.props={dot:{width:0,height:0},line:{width:0,height:0}},e&&e.start==null)throw new Error(`Property "start" missing in item ${e}`)}isVisible(e){if(this.cluster)return!1;let t;const n=this.data.align||this.options.align,r=this.width*e.getMillisecondsPerPixel();return n=="right"?t=this.data.start.getTime()>e.start&&this.data.start.getTime()-r<e.end:n=="left"?t=this.data.start.getTime()+r>e.start&&this.data.start.getTime()<e.end:t=this.data.start.getTime()+r/2>e.start&&this.data.start.getTime()-r/2<e.end,t}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){const t=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");t.appendChild(this.dom.dot)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.editable.updateTime||this.editable.updateGroup,t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.box.className=`vis-item vis-box${t}`,this.dom.line.className=`vis-item vis-line${t}`,this.dom.dot.className=`vis-item vis-dot${t}`}}_getDomComponentsSizes(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(e){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.props.dot.height=e.dot.height,this.props.dot.width=e.dot.width,this.props.line.width=e.line.width,this.width=e.box.width,this.height=e.box.height,this.options.rtl?this.dom.box.style.right=e.previous.right:this.dom.box.style.left=e.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.box)}redraw(e){let t;const n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(t=this._getDomComponentsSizes())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(t)},this._repaintDomAdditionals.bind(this)];if(e)return n;{let r;return n.forEach(s=>{r=s()}),r}}show(e){if(!this.displayed)return this.redraw(e)}hide(){if(this.displayed){const e=this.dom;e.box.remove?e.box.remove():e.box.parentNode&&e.box.parentNode.removeChild(e.box),e.line.remove?e.line.remove():e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.remove?e.dot.remove():e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot),this.displayed=!1}}repositionXY(){const e=this.options.rtl,t=(n,r,s,o=!1)=>{if(r===void 0&&s===void 0)return;const a=o?r*-1:r;if(s===void 0){n.style.transform=`translateX(${a}px)`;return}if(r===void 0){n.style.transform=`translateY(${s}px)`;return}n.style.transform=`translate(${a}px, ${s}px)`};t(this.dom.box,this.boxX,this.boxY,e),t(this.dom.dot,this.dotX,this.dotY,e),t(this.dom.line,this.lineX,this.lineY,e)}repositionX(){const e=this.conversion.toScreen(this.data.start),t=this.data.align===void 0?this.options.align:this.data.align,n=this.props.line.width,r=this.props.dot.width;t=="right"?(this.boxX=e-this.width,this.lineX=e-n,this.dotX=e-n/2-r/2):t=="left"?(this.boxX=e,this.lineX=e,this.dotX=e+n/2-r/2):(this.boxX=e-this.width/2,this.lineX=this.options.rtl?e-n:e-n/2,this.dotX=e-r/2),this.options.rtl?this.right=this.boxX:this.left=this.boxX,this.repositionXY()}repositionY(){const e=this.options.orientation.item,t=this.dom.line.style;if(e=="top"){const n=this.parent.top+this.top+1;this.boxY=this.top||0,t.height=`${n}px`,t.bottom="",t.top="0"}else{const r=this.parent.itemSet.props.height-this.parent.top-this.parent.height+this.top;this.boxY=this.parent.height-this.top-(this.height||0),t.height=`${r}px`,t.top="",t.bottom="0"}this.dotY=-this.props.dot.height/2,this.repositionXY()}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}}class oie extends Qa{constructor(e,t,n){if(super(e,t,n),this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},e&&e.start==null)throw new Error(`Property "start" missing in item ${e}`)}isVisible(e){if(this.cluster)return!1;const t=this.width*e.getMillisecondsPerPixel();return this.data.start.getTime()+t>e.start&&this.data.start<e.end}_createDomElement(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),this.dom.point["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){const e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(this.dom.point)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);const e=this.editable.updateTime||this.editable.updateGroup,t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.point.className=`vis-item vis-point${t}`,this.dom.dot.className=`vis-item vis-dot${t}`}}_getDomComponentsSizes(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}}_updateDomComponentsSizes(e){this.props.dot.width=e.dot.width,this.props.dot.height=e.dot.height,this.props.content.height=e.content.height,this.options.rtl?this.dom.content.style.marginRight=`${this.props.dot.width/2}px`:this.dom.content.style.marginLeft=`${this.props.dot.width/2}px`,this.width=e.point.width,this.height=e.point.height,this.dom.dot.style.top=`${(this.height-this.props.dot.height)/2}px`;const t=this.props.dot.width,n=this.options.rtl?t/2:t/2*-1;this.dom.dot.style.transform=`translateX(${n}px`,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.point),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.point)}redraw(e){let t;const n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(t=this._getDomComponentsSizes())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(t)},this._repaintDomAdditionals.bind(this)];if(e)return n;{let r;return n.forEach(s=>{r=s()}),r}}repositionXY(){const e=this.options.rtl;((n,r,s,o=!1)=>{if(r===void 0&&s===void 0)return;const a=o?r*-1:r;if(s===void 0){n.style.transform=`translateX(${a}px)`;return}if(r===void 0){n.style.transform=`translateY(${s}px)`;return}n.style.transform=`translate(${a}px, ${s}px)`})(this.dom.point,this.pointX,this.pointY,e)}show(e){if(!this.displayed)return this.redraw(e)}hide(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)}repositionX(){const e=this.conversion.toScreen(this.data.start);this.pointX=e,this.options.rtl?this.right=e-this.props.dot.width:this.left=e-this.props.dot.width,this.repositionXY()}repositionY(){this.options.orientation.item=="top"?this.pointY=this.top:this.pointY=this.parent.height-this.top-this.height,this.repositionXY()}getWidthLeft(){return this.props.dot.width}getWidthRight(){return this.props.dot.width}}class Ys extends Qa{constructor(e,t,n){if(super(e,t,n),this.props={content:{width:0}},this.overflow=!1,e){if(e.start==null)throw new Error(`Property "start" missing in item ${e.id}`);if(e.end==null)throw new Error(`Property "end" missing in item ${e.id}`)}}isVisible(e){return this.cluster?!1:this.data.start<e.end&&this.data.end>e.start}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.editable.updateTime||this.editable.updateGroup,t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.box.className=this.baseClassName+t,this.dom.content.style.maxWidth="none"}}_getDomComponentsSizes(){return this.overflow=window.getComputedStyle(this.dom.frame).overflow!=="hidden",this.whiteSpace=window.getComputedStyle(this.dom.content).whiteSpace!=="nowrap",{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(e){this.props.content.width=e.content.width,this.height=e.box.height,this.dom.content.style.maxWidth="",this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDeleteButton(this.dom.box),this._repaintDragCenter(),this._repaintDragLeft(),this._repaintDragRight()}redraw(e){let t;const n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(t=this._getDomComponentsSizes.bind(this)())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(t)},this._repaintDomAdditionals.bind(this)];if(e)return n;{let r;return n.forEach(s=>{r=s()}),r}}show(e){if(!this.displayed)return this.redraw(e)}hide(){if(this.displayed){const e=this.dom.box;e.parentNode&&e.parentNode.removeChild(e),this.displayed=!1}}repositionX(e){const t=this.parent.width;let n=this.conversion.toScreen(this.data.start),r=this.conversion.toScreen(this.data.end);const s=this.data.align===void 0?this.options.align:this.data.align;let o,a;this.data.limitSize!==!1&&(e===void 0||e===!0)&&(n<-t&&(n=-t),r>2*t&&(r=2*t));const l=Math.max(Math.round((r-n)*1e3)/1e3,1);switch(this.overflow?(this.options.rtl?this.right=n:this.left=n,this.width=l+this.props.content.width,a=this.props.content.width):(this.options.rtl?this.right=n:this.left=n,this.width=l,a=Math.min(r-n,this.props.content.width)),this.options.rtl?this.dom.box.style.transform=`translateX(${this.right*-1}px)`:this.dom.box.style.transform=`translateX(${this.left}px)`,this.dom.box.style.width=`${l}px`,this.whiteSpace&&(this.height=this.dom.box.offsetHeight),s){case"left":this.dom.content.style.transform="translateX(0)";break;case"right":if(this.options.rtl){const c=Math.max(l-a,0)*-1;this.dom.content.style.transform=`translateX(${c}px)`}else this.dom.content.style.transform=`translateX(${Math.max(l-a,0)}px)`;break;case"center":if(this.options.rtl){const c=Math.max((l-a)/2,0)*-1;this.dom.content.style.transform=`translateX(${c}px)`}else this.dom.content.style.transform=`translateX(${Math.max((l-a)/2,0)}px)`;break;default:if(this.overflow?r>0?o=Math.max(-n,0):o=-a:n<0?o=-n:o=0,this.options.rtl){const c=o*-1;this.dom.content.style.transform=`translateX(${c}px)`}else this.dom.content.style.transform=`translateX(${o}px)`}}repositionY(){const e=this.options.orientation.item,t=this.dom.box;e=="top"?t.style.top=`${this.top}px`:t.style.top=`${this.parent.height-this.top-this.height}px`}_repaintDragLeft(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragLeft){const e=document.createElement("div");e.className="vis-drag-left",e.dragLeftItem=this,this.dom.box.appendChild(e),this.dom.dragLeft=e}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)}_repaintDragRight(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragRight){const e=document.createElement("div");e.className="vis-drag-right",e.dragRightItem=this,this.dom.box.appendChild(e),this.dom.dragRight=e}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)}}Ys.prototype.baseClassName="vis-item vis-range";class oo extends Qa{constructor(e,t,n){if(super(e,t,n),this.props={content:{width:0}},this.overflow=!1,e){if(e.start==null)throw new Error(`Property "start" missing in item ${e.id}`);if(e.end==null)throw new Error(`Property "end" missing in item ${e.id}`)}}isVisible(e){return this.data.start<e.end&&this.data.end>e.start}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);const e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");this.dom.box.className=this.baseClassName+e}}_getDomComponentsSizes(){return this.overflow=window.getComputedStyle(this.dom.content).overflow!=="hidden",{content:{width:this.dom.content.offsetWidth}}}_updateDomComponentsSizes(e){this.props.content.width=e.content.width,this.height=0,this.dirty=!1}_repaintDomAdditionals(){}redraw(e){let t;const n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(t=this._getDomComponentsSizes.bind(this)())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(t)},this._repaintDomAdditionals.bind(this)];if(e)return n;{let r;return n.forEach(s=>{r=s()}),r}}repositionY(){let e;const t=this.options.orientation.item;if(this.data.subgroup!==void 0){const n=this.data.subgroup;this.dom.box.style.height=`${this.parent.subgroups[n].height}px`,t=="top"?this.dom.box.style.top=`${this.parent.top+this.parent.subgroups[n].top}px`:this.dom.box.style.top=`${this.parent.top+this.parent.height-this.parent.subgroups[n].top-this.parent.subgroups[n].height}px`,this.dom.box.style.bottom=""}else this.parent instanceof a$?(e=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.bottom=t=="bottom"?"0":"",this.dom.box.style.top=t=="top"?"0":""):(e=this.parent.height,this.dom.box.style.top=`${this.parent.top}px`,this.dom.box.style.bottom="");this.dom.box.style.height=`${e}px`}}oo.prototype.baseClassName="vis-item vis-background";oo.prototype.stack=!1;oo.prototype.show=Ys.prototype.show;oo.prototype.hide=Ys.prototype.hide;oo.prototype.repositionX=Ys.prototype.repositionX;class aie{constructor(e,t){this.container=e,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,t){this.x=parseInt(e),this.y=parseInt(t)}setText(e){e instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(e)):this.frame.innerHTML=R.xss(e)}show(e){if(e===void 0&&(e=!0),e===!0){var t=this.frame.clientHeight,n=this.frame.clientWidth,r=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth,o=0,a=0;if(this.overflowMethod=="flip"||this.overflowMethod=="none"){let l=!1,c=!0;this.overflowMethod=="flip"&&(this.y-t<this.padding&&(c=!1),this.x+n>s-this.padding&&(l=!0)),l?o=this.x-n:o=this.x,c?a=this.y-t:a=this.y}else a=this.y-t,a+t+this.padding>r&&(a=r-t-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+n+this.padding>s&&(o=s-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}}class Xd extends Qa{constructor(e,t,n){const r=Object.assign({},{fitOnDoubleClick:!0},n,{editable:!1});if(super(e,t,r),this.props={content:{width:0,height:0}},!e||e.uiItems==null)throw new Error('Property "uiItems" missing in item '+e.id);this.id=Is(),this.group=e.group,this._setupRange(),this.emitter=this.data.eventEmitter,this.range=this.data.range,this.attached=!1,this.isCluster=!0,this.data.isCluster=!0}hasItems(){return this.data.uiItems&&this.data.uiItems.length&&this.attached}setUiItems(e){this.detach(),this.data.uiItems=e,this._setupRange(),this.attach()}isVisible(e){const t=this.data.end?this.data.end-this.data.start:0,n=this.width*e.getMillisecondsPerPixel(),r=Math.max(this.data.start.getTime()+t,this.data.start.getTime()+n);return this.data.start<e.end&&r>e.start&&this.hasItems()}getData(){return{isCluster:!0,id:this.id,items:this.data.items||[],data:this.data}}redraw(e){var t,n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),(function(){this.dirty&&(t=this._getDomComponentsSizes())}).bind(this),(function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(t)}).bind(this),this._repaintDomAdditionals.bind(this)];if(e)return n;var r;return n.forEach(function(s){r=s()}),r}show(){this.displayed||this.redraw()}hide(){if(this.displayed){var e=this.dom;e.box.parentNode&&e.box.parentNode.removeChild(e.box),this.options.showStipes&&(e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot)),this.displayed=!1}}repositionX(){let e=this.conversion.toScreen(this.data.start),t=this.data.end?this.conversion.toScreen(this.data.end):0;if(t)this.repositionXWithRanges(e,t);else{let n=this.data.align===void 0?this.options.align:this.data.align;this.repositionXWithoutRanges(e,n)}this.options.showStipes&&(this.dom.line.style.display=this._isStipeVisible()?"block":"none",this.dom.dot.style.display=this._isStipeVisible()?"block":"none",this._isStipeVisible()&&this.repositionStype(e,t))}repositionStype(e,t){this.dom.line.style.display="block",this.dom.dot.style.display="block";const n=this.dom.line.offsetWidth,r=this.dom.dot.offsetWidth;if(t){const s=n+e+(t-e)/2,o=s-r/2,a=this.options.rtl?s*-1:s,l=this.options.rtl?o*-1:o;this.dom.line.style.transform=`translateX(${a}px)`,this.dom.dot.style.transform=`translateX(${l}px)`}else{const s=this.options.rtl?e*-1:e,o=this.options.rtl?(e-r/2)*-1:e-r/2;this.dom.line.style.transform=`translateX(${s}px)`,this.dom.dot.style.transform=`translateX(${o}px)`}}repositionXWithoutRanges(e,t){t=="right"?this.options.rtl?(this.right=e-this.width,this.dom.box.style.right=this.right+"px"):(this.left=e-this.width,this.dom.box.style.left=this.left+"px"):t=="left"?this.options.rtl?(this.right=e,this.dom.box.style.right=this.right+"px"):(this.left=e,this.dom.box.style.left=this.left+"px"):this.options.rtl?(this.right=e-this.width/2,this.dom.box.style.right=this.right+"px"):(this.left=e-this.width/2,this.dom.box.style.left=this.left+"px")}repositionXWithRanges(e,t){let n=Math.round(Math.max(t-e+.5,1));this.options.rtl?this.right=e:this.left=e,this.width=Math.max(n,this.minWidth||0),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=n+"px"}repositionY(){var e=this.options.orientation.item,t=this.dom.box;if(e=="top"?t.style.top=(this.top||0)+"px":t.style.top=(this.parent.height-this.top-this.height||0)+"px",this.options.showStipes){if(e=="top")this.dom.line.style.top="0",this.dom.line.style.height=this.parent.top+this.top+1+"px",this.dom.line.style.bottom="";else{var n=this.parent.itemSet.props.height,r=n-this.parent.top-this.parent.height+this.top;this.dom.line.style.top=n-r+"px",this.dom.line.style.bottom="0"}this.dom.dot.style.top=-this.dom.dot.offsetHeight/2+"px"}}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}move(){this.repositionX(),this.repositionY()}attach(){for(let e of this.data.uiItems)e.cluster=this;this.data.items=this.data.uiItems.map(e=>e.data),this.attached=!0,this.dirty=!0}detach(e=!1){if(this.hasItems()){for(let t of this.data.uiItems)delete t.cluster;this.attached=!1,e&&this.group&&(this.group.remove(this),this.group=null),this.data.items=[],this.dirty=!0}}_onDoubleClick(){this._fit()}_setupRange(){const e=this.data.uiItems.map(r=>({start:r.data.start.valueOf(),end:r.data.end?r.data.end.valueOf():r.data.start.valueOf()}));this.data.min=Math.min(...e.map(r=>Math.min(r.start,r.end||r.start))),this.data.max=Math.max(...e.map(r=>Math.max(r.start,r.end||r.start)));const n=this.data.uiItems.map(r=>r.center).reduce((r,s)=>r+s,0)/this.data.uiItems.length;this.data.uiItems.some(r=>r.data.end)?(this.data.start=new Date(this.data.min),this.data.end=new Date(this.data.max)):(this.data.start=new Date(n),this.data.end=null)}_getUiItems(){return this.data.uiItems&&this.data.uiItems.length?this.data.uiItems.filter(e=>e.cluster===this):[]}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.options.showStipes&&(this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-cluster-line",this.dom.line.style.display="none",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-cluster-dot",this.dom.dot.style.display="none"),this.options.fitOnDoubleClick&&(this.dom.box.ondblclick=Xd.prototype._onDoubleClick.bind(this)),this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const n=this.parent.dom.foreground;if(!n)throw new Error("Cannot redraw item: parent has no foreground container element");n.appendChild(this.dom.box)}const e=this.parent.dom.background;if(this.options.showStipes){if(!this.dom.line.parentNode){if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var t=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");t.appendChild(this.dom.dot)}}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.baseClassName+" "+(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+" vis-readonly";this.dom.box.className="vis-item "+e,this.options.showStipes&&(this.dom.line.className="vis-item vis-cluster-line "+(this.selected?" vis-selected":""),this.dom.dot.className="vis-item vis-cluster-dot "+(this.selected?" vis-selected":"")),this.data.end&&(this.dom.content.style.maxWidth="none")}}_getDomComponentsSizes(){const e={previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}};return this.options.showStipes&&(e.dot={height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},e.line={width:this.dom.line.offsetWidth}),e}_updateDomComponentsSizes(e){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.data.end?this.minWidth=e.box.width:this.width=e.box.width,this.height=e.box.height,this.options.rtl?this.dom.box.style.right=e.previous.right:this.dom.box.style.left=e.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box)}_isStipeVisible(){return this.minWidth>=this.width||!this.data.end}_getFitRange(){const e=.05*(this.data.max-this.data.min)/2;return{fitStart:this.data.min-e,fitEnd:this.data.max+e}}_fit(){if(this.emitter){const{fitStart:e,fitEnd:t}=this._getFitRange(),n={start:new Date(e),end:new Date(t),animation:!0};this.emitter.emit("fit",n)}}_getItemData(){return this.data}}Xd.prototype.baseClassName="vis-item vis-range vis-cluster";const lie="__ungrouped__",cie={UNGROUPED:lie};class uie{constructor(e){this.itemSet=e,this.groups={},this.cache={},this.cache[-1]=[]}createClusterItem(e,t,n){return new Xd(e,t,n)}setItems(e,t){this.items=e||[],this.dataChanged=!0,this.applyOnChangedLevel=!1,t&&t.applyOnChangedLevel&&(this.applyOnChangedLevel=t.applyOnChangedLevel)}updateData(){this.dataChanged=!0,this.applyOnChangedLevel=!1}getClusters(e,t,n){let{maxItems:r,clusterCriteria:s}=typeof n=="boolean"?{}:n;s||(s=()=>!0),r=r||1;let o=-1,a=2,l=0;if(t>0){if(t>=1)return[];o=Math.abs(Math.round(Math.log(100/t)/Math.log(a))),l=Math.abs(Math.pow(a,o))}if(this.dataChanged){const u=o!=this.cacheLevel;(this.applyOnChangedLevel?u:!0)&&(this._dropLevelsCache(),this._filterData())}this.cacheLevel=o;let c=this.cache[o];if(!c){c=[];for(let u in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,u))continue;const h=this.groups[u],d=h.length;let f=0;for(;f<d;){let p=h[f],m=1,g=f-1;for(;g>=0&&p.center-h[g].center<l/2;)!h[g].cluster&&s(p.data,h[g].data)&&m++,g--;let v=f+1;for(;v<h.length&&h[v].center-p.center<l/2;)s(p.data,h[v].data)&&m++,v++;let y=c.length-1;for(;y>=0&&p.center-c[y].center<l;)p.group==c[y].group&&s(p.data,c[y].data)&&m++,y--;if(m>r){const b=m-r+1,_=[];let w=f;for(;_.length<b&&w<h.length;)s(h[f].data,h[w].data)&&_.push(h[w]),w++;const C=this.itemSet.getGroupId(p.data),E=this.itemSet.groups[C]||this.itemSet.groups[cie.UNGROUPED];let x=this._getClusterForItems(_,E,e,n);c.push(x),f+=b}else delete p.cluster,f+=1}}this.cache[o]=c}return c}_filterData(){const e={};this.groups=e;for(const t of Object.values(this.items)){const n=t.parent?t.parent.groupId:"";let r=e[n];r||(r=[],e[n]=r),r.push(t),t.data.start&&(t.data.end?t.center=(t.data.start.valueOf()+t.data.end.valueOf())/2:t.center=t.data.start.valueOf())}for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&e[t].sort((n,r)=>n.center-r.center);this.dataChanged=!1}_getClusterForItems(e,t,n,r){const s=(n||[]).map(f=>({cluster:f,itemsIds:new Set(f.data.uiItems.map(p=>p.id))}));let o;if(s.length){for(let f of s)if(f.itemsIds.size===e.length&&e.every(p=>f.itemsIds.has(p.id))){o=f.cluster;break}}if(o)return o.setUiItems(e),o.group!==t&&(o.group&&o.group.remove(o),t&&(t.add(o),o.group=t)),o;let a=r.titleTemplate||"";const l={toScreen:this.itemSet.body.util.toScreen,toTime:this.itemSet.body.util.toTime},c=a.replace(/{count}/,e.length),u='<div title="'+c+'">'+e.length+"</div>",h=Object.assign({},r,this.itemSet.options),d={content:u,title:c,group:t,uiItems:e,eventEmitter:this.itemSet.body.emitter,range:this.itemSet.body.range};return o=this.createClusterItem(d,l,h),t&&(t.add(o),o.group=t),o.attach(),o}_dropLevelsCache(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]}}const xo="__ungrouped__",Cr="__background__";class Bs extends es{constructor(e,t){super(),this.body=e,this.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap(r,s){const o=s.order;s.order=r.order,r.order=o},groupOrder:"order",selectable:!0,multiselect:!1,longSelectPressTime:251,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:Ws.snap,onDropObjectOnItem(r,s,o){o(s)},onAdd(r,s){s(r)},onUpdate(r,s){s(r)},onMove(r,s){s(r)},onRemove(r,s){s(r)},onMoving(r,s){s(r)},onAddGroup(r,s){s(r)},onMoveGroup(r,s){s(r)},onRemoveGroup(r,s){s(r)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:500},tooltipOnItemUpdateTime:!1},this.options=R.extend({},this.defaultOptions),this.options.rtl=t.rtl,this.options.onTimeout=t.onTimeout,this.conversion={toScreen:e.util.toScreen,toTime:e.util.toTime},this.dom={},this.props={},this.hammer=null;const n=this;this.itemsData=null,this.groupsData=null,this.itemsSettingTime=null,this.initialItemSetDrawn=!1,this.userContinueNotBail=null,this.sequentialSelection=!1,this.itemListeners={add(r,s){n._onAdd(s.items),n.options.cluster&&n.clusterGenerator.setItems(n.items,{applyOnChangedLevel:!1}),n.redraw()},update(r,s){n._onUpdate(s.items),n.options.cluster&&n.clusterGenerator.setItems(n.items,{applyOnChangedLevel:!1}),n.redraw()},remove(r,s){n._onRemove(s.items),n.options.cluster&&n.clusterGenerator.setItems(n.items,{applyOnChangedLevel:!1}),n.redraw()}},this.groupListeners={add(r,s,o){if(n._onAddGroups(s.items),n.groupsData&&n.groupsData.length>0){const a=n.groupsData.getDataSet();a.get().forEach(l=>{if(l.nestedGroups){l.showNested!=!1&&(l.showNested=!0);let c=[];l.nestedGroups.forEach(u=>{const h=a.get(u);h&&(h.nestedInGroup=l.id,l.showNested==!1&&(h.visible=!1),c=c.concat(h))}),a.update(c,o)}})}},update(r,s){n._onUpdateGroups(s.items)},remove(r,s){n._onRemoveGroups(s.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.popup=null,this.popupTimer=null,this.touchParams={},this.groupTouchParams={group:null,isDragging:!1},this._create(),this.setOptions(t),this.clusters=[]}_create(){const e=document.createElement("div");e.className="vis-itemset",e["vis-itemset"]=this,this.dom.frame=e;const t=document.createElement("div");t.className="vis-background",e.appendChild(t),this.dom.background=t;const n=document.createElement("div");n.className="vis-foreground",e.appendChild(n),this.dom.foreground=n;const r=document.createElement("div");r.className="vis-axis",this.dom.axis=r;const s=document.createElement("div");s.className="vis-labelset",this.dom.labelSet=s,this._updateUngrouped();const o=new a$(Cr,null,this);o.show(),this.groups[Cr]=o,this.hammer=new Wt(this.body.dom.centerContainer),this.hammer.on("hammer.input",a=>{a.isFirst&&this._onTouch(a)}),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:Wt.ALL}),this.hammer.get("press").set({time:1e4}),this.hammer.on("tap",this._onSelectItem.bind(this)),this.hammer.on("press",this._onMultiSelectItem.bind(this)),this.hammer.get("press").set({time:1e4}),this.hammer.on("doubletap",this._onAddItem.bind(this)),this.options.rtl?this.groupHammer=new Wt(this.body.dom.rightContainer):this.groupHammer=new Wt(this.body.dom.leftContainer),this.groupHammer.on("tap",this._onGroupClick.bind(this)),this.groupHammer.on("panstart",this._onGroupDragStart.bind(this)),this.groupHammer.on("panmove",this._onGroupDrag.bind(this)),this.groupHammer.on("panend",this._onGroupDragEnd.bind(this)),this.groupHammer.get("pan").set({threshold:5,direction:Wt.DIRECTION_VERTICAL}),this.body.dom.centerContainer.addEventListener("mouseover",this._onMouseOver.bind(this)),this.body.dom.centerContainer.addEventListener("mouseout",this._onMouseOut.bind(this)),this.body.dom.centerContainer.addEventListener("mousemove",this._onMouseMove.bind(this)),this.body.dom.centerContainer.addEventListener("contextmenu",this._onDragEnd.bind(this)),this.body.dom.centerContainer.addEventListener("mousewheel",this._onMouseWheel.bind(this)),this.show()}setOptions(e){if(e){const t=["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","sequentialSelection","multiselectPerGroup","longSelectPressTime","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime","groupHeightMode","onTimeout"];R.selectiveExtend(t,this.options,e),"itemsAlwaysDraggable"in e&&(typeof e.itemsAlwaysDraggable=="boolean"?(this.options.itemsAlwaysDraggable.item=e.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):typeof e.itemsAlwaysDraggable=="object"&&(R.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,e.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"sequentialSelection"in e&&typeof e.sequentialSelection=="boolean"&&(this.options.sequentialSelection=e.sequentialSelection),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation.item=e.orientation==="top"?"top":"bottom":typeof e.orientation=="object"&&"item"in e.orientation&&(this.options.orientation.item=e.orientation.item)),"margin"in e&&(typeof e.margin=="number"?(this.options.margin.axis=e.margin,this.options.margin.item.horizontal=e.margin,this.options.margin.item.vertical=e.margin):typeof e.margin=="object"&&(R.selectiveExtend(["axis"],this.options.margin,e.margin),"item"in e.margin&&(typeof e.margin.item=="number"?(this.options.margin.item.horizontal=e.margin.item,this.options.margin.item.vertical=e.margin.item):typeof e.margin.item=="object"&&R.selectiveExtend(["horizontal","vertical"],this.options.margin.item,e.margin.item)))),["locale","locales"].forEach(r=>{r in e&&(this.options[r]=e[r])}),"editable"in e&&(typeof e.editable=="boolean"?(this.options.editable.updateTime=e.editable,this.options.editable.updateGroup=e.editable,this.options.editable.add=e.editable,this.options.editable.remove=e.editable,this.options.editable.overrideItems=!1):typeof e.editable=="object"&&R.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,e.editable)),"groupEditable"in e&&(typeof e.groupEditable=="boolean"?(this.options.groupEditable.order=e.groupEditable,this.options.groupEditable.add=e.groupEditable,this.options.groupEditable.remove=e.groupEditable):typeof e.groupEditable=="object"&&R.selectiveExtend(["order","add","remove"],this.options.groupEditable,e.groupEditable));const n=r=>{const s=e[r];if(s){if(typeof s!="function")throw new Error(`option ${r} must be a function ${r}(item, callback)`);this.options[r]=s}};["onDropObjectOnItem","onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"].forEach(n),e.cluster?(Object.assign(this.options,{cluster:e.cluster}),this.clusterGenerator||(this.clusterGenerator=new uie(this)),this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.clusterGenerator?(this._detachAllClusters(),this.clusters=[],this.clusterGenerator=null,this.options.cluster=void 0,this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.markDirty()}}markDirty(e){this.groupIds=[],e&&(e.refreshItems&&R.forEach(this.items,t=>{t.dirty=!0,t.displayed&&t.redraw()}),e.restackGroups&&R.forEach(this.groups,(t,n)=>{n!==Cr&&(t.stackDirty=!0)}))}destroy(){this.clearPopupTimer(),this.hide(),this.setItems(null),this.setGroups(null),this.hammer&&this.hammer.destroy(),this.groupHammer&&this.groupHammer.destroy(),this.hammer=null,this.body=null,this.conversion=null}hide(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)}show(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))}setPopupTimer(e){if(this.clearPopupTimer(),e){const t=this.options.tooltip.delay||typeof this.options.tooltip.delay=="number"?this.options.tooltip.delay:500;this.popupTimer=setTimeout(function(){e.show()},t)}}clearPopupTimer(){this.popupTimer!=null&&(clearTimeout(this.popupTimer),this.popupTimer=null)}setSelection(e){e==null&&(e=[]),Array.isArray(e)||(e=[e]);const t=this.selection.filter(n=>e.indexOf(n)===-1);for(let n of t){const r=this.getItemById(n);r&&r.unselect()}this.selection=[...e];for(let n of e){const r=this.getItemById(n);r&&r.select()}}getSelection(){return this.selection.concat([])}getVisibleItems(){const e=this.body.range.getRange();let t,n;this.options.rtl?(t=this.body.util.toScreen(e.start),n=this.body.util.toScreen(e.end)):(n=this.body.util.toScreen(e.start),t=this.body.util.toScreen(e.end));const r=[];for(const s in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,s))continue;const o=this.groups[s],a=o.isVisible?o.visibleItems:[];for(const l of a)this.options.rtl?l.right<n&&l.right+l.width>t&&r.push(l.id):l.left<t&&l.left+l.width>n&&r.push(l.id)}return r}getItemsAtCurrentTime(e){let t,n;this.options.rtl?(t=this.body.util.toScreen(e),n=this.body.util.toScreen(e)):(n=this.body.util.toScreen(e),t=this.body.util.toScreen(e));const r=[];for(const s in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,s))continue;const o=this.groups[s],a=o.isVisible?o.visibleItems:[];for(const l of a)this.options.rtl?l.right<n&&l.right+l.width>t&&r.push(l.id):l.left<t&&l.left+l.width>n&&r.push(l.id)}return r}getVisibleGroups(){const e=[];for(const t in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,t))continue;this.groups[t].isVisible&&e.push(t)}return e}getItemById(e){return this.items[e]||this.clusters.find(t=>t.id===e)}_deselect(e){const t=this.selection;for(let n=0,r=t.length;n<r;n++)if(t[n]==e){t.splice(n,1);break}}redraw(){const e=this.options.margin,t=this.body.range,n=R.option.asSize,r=this.options,s=r.orientation.item;let o=!1;const a=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,a.className="vis-itemset",this.options.cluster&&this._clusterItems(),o=this._orderGroups()||o;const l=t.end-t.start,c=l!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth,u=t.start!=this.lastRangeStart,h=r.stack!=this.lastStack,d=r.stackSubgroups!=this.lastStackSubgroups,f=c||u||h||d;this.lastVisibleInterval=l,this.lastRangeStart=t.start,this.lastStack=r.stack,this.lastStackSubgroups=r.stackSubgroups,this.props.lastWidth=this.props.width;const p=this._firstGroup(),m={item:e.item,axis:e.axis},g={item:e.item,axis:e.item.vertical/2};let v=0;const y=e.axis+e.item.vertical;this.groups[Cr].redraw(t,g,f);const b={};let _=0;if(R.forEach(this.groups,(C,E)=>{if(E===Cr)return;const x=C==p?m:g,T=!0;b[E]=C.redraw(t,x,f,T),_=b[E].length}),_>0){const C={};for(let E=0;E<_;E++)R.forEach(b,(x,T)=>{C[T]=x[E]()});R.forEach(this.groups,(E,x)=>{if(x===Cr)return;o=C[x]||o,v+=E.height}),v=Math.max(v,y)}return v=Math.max(v,y),a.style.height=n(v),this.props.width=a.offsetWidth,this.props.height=v,this.dom.axis.style.top=n(s=="top"?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.initialItemSetDrawn=!0,o=this._isResized()||o,o}_firstGroup(){const e=this.options.orientation.item=="top"?0:this.groupIds.length-1,t=this.groupIds[e];return this.groups[t]||this.groups[xo]||null}_updateUngrouped(){let e=this.groups[xo],t,n;if(this.groupsData){if(e){e.dispose(),delete this.groups[xo];for(n in this.items){if(!Object.prototype.hasOwnProperty.call(this.items,n))continue;t=this.items[n],t.parent&&t.parent.remove(t);const r=this.getGroupId(t.data),s=this.groups[r];s&&s.add(t)||t.hide()}}}else if(!e){e=new Mb(null,null,this),this.groups[xo]=e;for(n in this.items)Object.prototype.hasOwnProperty.call(this.items,n)&&(t=this.items[n],e.add(t));e.show()}}getLabelSet(){return this.dom.labelSet}setItems(e){this.itemsSettingTime=new Date;const t=this;let n;const r=this.itemsData;if(!e)this.itemsData=null;else if(cr(e))this.itemsData=Sa(e);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(r&&(R.forEach(this.itemListeners,(s,o)=>{r.off(o,s)}),r.dispose(),n=r.getIds(),this._onRemove(n)),this.itemsData){const s=this.id;R.forEach(this.itemListeners,(o,a)=>{t.itemsData.on(a,o,s)}),n=this.itemsData.getIds(),this._onAdd(n),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})}getItems(){return this.itemsData!=null?this.itemsData.rawDS:null}setGroups(e){const t=this;let n;if(this.groupsData&&(R.forEach(this.groupListeners,(r,s)=>{t.groupsData.off(s,r)}),n=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(n)),!e)this.groupsData=null;else if(cr(e))this.groupsData=e;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){const r=this.groupsData.getDataSet();r.get().forEach(o=>{o.nestedGroups&&o.nestedGroups.forEach(a=>{const l=r.get(a);l.nestedInGroup=o.id,o.showNested==!1&&(l.visible=!1),r.update(l)})});const s=this.id;R.forEach(this.groupListeners,(o,a)=>{t.groupsData.on(a,o,s)}),n=this.groupsData.getIds(),this._onAddGroups(n)}this._updateUngrouped(),this._order(),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems(),this.markDirty({refreshItems:!0,restackGroups:!0})),this.body.emitter.emit("_change",{queue:!0})}getGroups(){return this.groupsData}removeItem(e){const t=this.itemsData.get(e);t&&this.options.onRemove(t,n=>{n&&this.itemsData.remove(e)})}_getType(e){return e.type||this.options.type||(e.end?"range":"box")}getGroupId(e){return this._getType(e)=="background"&&e.group==null?Cr:this.groupsData?e.group:xo}_onUpdate(e){const t=this;e.forEach(n=>{const r=t.itemsData.get(n);let s=t.items[n];const o=r?t._getType(r):null,a=Bs.types[o];let l;if(s&&(!a||!(s instanceof a)?(l=s.selected,t._removeItem(s),s=null):t._updateItem(s,r)),!s&&r)if(a)s=new a(r,t.conversion,t.options),s.id=n,t._addItem(s),l&&(this.selection.push(n),s.select());else throw new TypeError(`Unknown item type "${o}"`)}),this._order(),this.options.cluster&&(this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this._clusterItems()),this.body.emitter.emit("_change",{queue:!0})}_onRemove(e){let t=0;const n=this;e.forEach(r=>{const s=n.items[r];s&&(t++,n._removeItem(s))}),t&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))}_order(){R.forEach(this.groups,e=>{e.order()})}_onUpdateGroups(e){this._onAddGroups(e)}_onAddGroups(e){const t=this;e.forEach(n=>{const r=t.groupsData.get(n);let s=t.groups[n];if(s)s.setData(r);else{if(n==xo||n==Cr)throw new Error(`Illegal group id. ${n} is a reserved id.`);const o=Object.create(t.options);R.extend(o,{height:null}),s=new Mb(n,r,t),t.groups[n]=s;for(const a in t.items){if(!Object.prototype.hasOwnProperty.call(t.items,a))continue;const l=t.items[a];l.data.group==n&&s.add(l)}s.order(),s.show()}}),this.body.emitter.emit("_change",{queue:!0})}_onRemoveGroups(e){e.forEach(t=>{const n=this.groups[t];n&&(n.dispose(),delete this.groups[t])}),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems()),this.markDirty({restackGroups:!!this.options.cluster}),this.body.emitter.emit("_change",{queue:!0})}_orderGroups(){if(this.groupsData){let e=this.groupsData.getIds({order:this.options.groupOrder});e=this._orderNestedGroups(e);const t=!R.equalArray(e,this.groupIds);if(t){const n=this.groups;e.forEach(r=>{n[r].hide()}),e.forEach(r=>{n[r].show()}),this.groupIds=e}return t}else return!1}_orderNestedGroups(e){function t(r,s){let o=[];return s.forEach(a=>{if(o.push(a),r.groupsData.get(a).nestedGroups){const c=r.groupsData.get({filter(u){return u.nestedInGroup==a},order:r.options.groupOrder}).map(u=>u.id);o=o.concat(t(r,c))}}),o}const n=e.filter(r=>!this.groupsData.get(r).nestedInGroup);return t(this,n)}_addItem(e){this.items[e.id]=e;const t=this.getGroupId(e.data),n=this.groups[t];n?n&&n.data&&n.data.showNested&&(e.groupShowing=!0):e.groupShowing=!1,n&&n.add(e)}_updateItem(e,t){e.setData(t);const n=this.getGroupId(e.data),r=this.groups[n];r?r&&r.data&&r.data.showNested&&(e.groupShowing=!0):e.groupShowing=!1}_removeItem(e){e.hide(),delete this.items[e.id];const t=this.selection.indexOf(e.id);t!=-1&&this.selection.splice(t,1),e.parent&&e.parent.remove(e),this.popup!=null&&this.popup.hide()}_constructByEndArray(e){const t=[];for(let n=0;n<e.length;n++)e[n]instanceof Ys&&t.push(e[n]);return t}_onTouch(e){this.touchParams.item=this.itemFromTarget(e),this.touchParams.dragLeftItem=e.target.dragLeftItem||!1,this.touchParams.dragRightItem=e.target.dragRightItem||!1,this.touchParams.itemProps=null}_getGroupIndex(e){for(let t=0;t<this.groupIds.length;t++)if(e==this.groupIds[t])return t}_onDragStart(e){if(this.touchParams.itemIsDragging)return;const t=this.touchParams.item||null,n=this;let r;if(t&&(t.selected||this.options.itemsAlwaysDraggable.item)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup||t.editable!=null&&!t.editable.updateTime&&!t.editable.updateGroup&&!this.options.editable.overrideItems)return;const s=this.touchParams.dragLeftItem,o=this.touchParams.dragRightItem;if(this.touchParams.itemIsDragging=!0,this.touchParams.selectedItem=t,s)r={item:s,initialX:e.center.x,dragLeft:!0,data:this._cloneItemData(t.data)},this.touchParams.itemProps=[r];else if(o)r={item:o,initialX:e.center.x,dragRight:!0,data:this._cloneItemData(t.data)},this.touchParams.itemProps=[r];else if(this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey))this._onDragStartAddItem(e);else{this.groupIds.length<1&&this.redraw();const a=this._getGroupIndex(t.data.group),l=this.options.itemsAlwaysDraggable.item&&!t.selected?[t.id]:this.getSelection();this.touchParams.itemProps=l.map(c=>{const u=n.items[c],h=n._getGroupIndex(u.data.group);return{item:u,initialX:e.center.x,groupOffset:a-h,data:this._cloneItemData(u.data)}})}e.stopPropagation()}else this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey)&&this._onDragStartAddItem(e)}_onDragStartAddItem(e){const t=this.options.snap||null,n=this.dom.frame.getBoundingClientRect(),r=this.options.rtl?n.right-e.center.x+10:e.center.x-n.left-10,s=this.body.util.toTime(r),o=this.body.util.getScale(),a=this.body.util.getStep(),l=t?t(s,o,a):s,u={type:"range",start:l,end:l,content:"new item"},h=Is();u[this.itemsData.idProp]=h;const d=this.groupFromTarget(e);d&&(u.group=d.groupId);const f=new Ys(u,this.conversion,this.options);f.id=h,f.data=this._cloneItemData(u),this._addItem(f),this.touchParams.selectedItem=f;const p={item:f,initialX:e.center.x,data:f.data};this.options.rtl?p.dragLeft=!0:p.dragRight=!0,this.touchParams.itemProps=[p],e.stopPropagation()}_onDrag(e){if(this.popup!=null&&this.options.showTooltips&&!this.popup.hidden){const t=this.body.dom.centerContainer,n=t.getBoundingClientRect();this.popup.setPosition(e.center.x-n.left+t.offsetLeft,e.center.y-n.top+t.offsetTop),this.popup.show()}if(this.touchParams.itemProps){e.stopPropagation();const t=this,n=this.options.snap||null,r=this.body.dom.root.offsetLeft,s=this.options.rtl?r+this.body.domProps.right.width:r+this.body.domProps.left.width,o=this.body.util.getScale(),a=this.body.util.getStep(),l=this.touchParams.selectedItem,c=(this.options.editable.overrideItems||l.editable==null)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&l.editable!=null&&l.editable.updateGroup;let u=null;if(c&&l&&l.data.group!=null){const h=t.groupFromTarget(e);h&&(u=this._getGroupIndex(h.groupId))}this.touchParams.itemProps.forEach(h=>{const d=t.body.util.toTime(e.center.x-s),f=t.body.util.toTime(h.initialX-s);let p,m,g,v,y;this.options.rtl?p=-(d-f):p=d-f;let b=this._cloneItemData(h.item.data);if(h.item.editable!=null&&!h.item.editable.updateTime&&!h.item.editable.updateGroup&&!t.options.editable.overrideItems)return;if((this.options.editable.overrideItems||l.editable==null)&&this.options.editable.updateTime||!this.options.editable.overrideItems&&l.editable!=null&&l.editable.updateTime){if(h.dragLeft)this.options.rtl?b.end!=null&&(g=R.convert(h.data.end,"Date"),y=new Date(g.valueOf()+p),b.end=n?n(y,o,a):y):b.start!=null&&(m=R.convert(h.data.start,"Date"),v=new Date(m.valueOf()+p),b.start=n?n(v,o,a):v);else if(h.dragRight)this.options.rtl?b.start!=null&&(m=R.convert(h.data.start,"Date"),v=new Date(m.valueOf()+p),b.start=n?n(v,o,a):v):b.end!=null&&(g=R.convert(h.data.end,"Date"),y=new Date(g.valueOf()+p),b.end=n?n(y,o,a):y);else if(b.start!=null)if(m=R.convert(h.data.start,"Date").valueOf(),v=new Date(m+p),b.end!=null){g=R.convert(h.data.end,"Date");const w=g.valueOf()-m.valueOf();b.start=n?n(v,o,a):v,b.end=new Date(b.start.valueOf()+w)}else b.start=n?n(v,o,a):v}if(c&&!h.dragLeft&&!h.dragRight&&u!=null&&b.group!=null){let w=u-h.groupOffset;w=Math.max(0,w),w=Math.min(t.groupIds.length-1,w),b.group=t.groupIds[w]}b=this._cloneItemData(b),t.options.onMoving(b,w=>{w&&h.item.setData(this._cloneItemData(w,"Date"))})}),this.body.emitter.emit("_change")}}_moveToGroup(e,t){const n=this.groups[t];if(n&&n.groupId!=e.data.group){const r=e.parent;r.remove(e),r.order(),e.data.group=n.groupId,n.add(e),n.order()}}_onDragEnd(e){if(this.touchParams.itemIsDragging=!1,this.touchParams.itemProps){e.stopPropagation();const t=this,n=this.touchParams.itemProps;this.touchParams.itemProps=null,n.forEach(r=>{const s=r.item.id;if(!(t.itemsData.get(s)!=null))t.options.onAdd(r.item.data,a=>{t._removeItem(r.item),a&&t.itemsData.add(a),t.body.emitter.emit("_change")});else{const a=this._cloneItemData(r.item.data);t.options.onMove(a,l=>{l?(l[this.itemsData.idProp]=s,this.itemsData.update(l)):(r.item.setData(r.data),t.body.emitter.emit("_change"))})}})}}_onGroupClick(e){const t=this.groupFromTarget(e);setTimeout(()=>{this.toggleGroupShowNested(t)},1)}toggleGroupShowNested(e,t=void 0){if(!e||!e.nestedGroups)return;const n=this.groupsData.getDataSet();t!=null?e.showNested=!!t:e.showNested=!e.showNested;let r=n.get(e.groupId);r.showNested=e.showNested;let s=e.nestedGroups,o=s;for(;o.length>0;){let c=o;o=[];for(let u=0;u<c.length;u++){let h=n.get(c[u]);h.nestedGroups&&(o=o.concat(h.nestedGroups))}o.length>0&&(s=s.concat(o))}var a;if(r.showNested){var l=n.get(r.nestedGroups);for(let c=0;c<l.length;c++){let u=l[c];u.nestedGroups&&u.nestedGroups.length>0&&(u.showNested==null||u.showNested==!0)&&l.push(...n.get(u.nestedGroups))}a=l.map(function(c){return c.visible==null&&(c.visible=!0),c.visible=!!r.showNested,c})}else a=n.get(s).map(function(c){return c.visible==null&&(c.visible=!0),c.visible=!!r.showNested,c});n.update(a.concat(r)),r.showNested?(R.removeClassName(e.dom.label,"collapsed"),R.addClassName(e.dom.label,"expanded")):(R.removeClassName(e.dom.label,"expanded"),R.addClassName(e.dom.label,"collapsed"))}toggleGroupDragClassName(e){e.dom.label.classList.toggle("vis-group-is-dragging"),e.dom.foreground.classList.toggle("vis-group-is-dragging")}_onGroupDragStart(e){this.groupTouchParams.isDragging||this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(e),this.groupTouchParams.group&&(e.stopPropagation(),this.groupTouchParams.isDragging=!0,this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))}_onGroupDrag(e){if(this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();const t=this.groupsData.getDataSet(),n=this.groupFromTarget(e);if(n&&n.height!=this.groupTouchParams.group.height){const r=n.top<this.groupTouchParams.group.top,s=e.center?e.center.y:e.clientY,o=n.dom.foreground.getBoundingClientRect(),a=this.groupTouchParams.group.height;if(r){if(o.top+a<s)return}else{const l=n.height;if(o.top+l-a>s)return}}if(n&&n!=this.groupTouchParams.group){const r=t.get(n.groupId),s=t.get(this.groupTouchParams.group.groupId);s&&r&&(this.options.groupOrderSwap(s,r,t),t.update(s),t.update(r));const o=t.getIds({order:this.options.groupOrder});if(!R.equalArray(o,this.groupTouchParams.originalOrder)){const a=this.groupTouchParams.originalOrder,l=this.groupTouchParams.group.groupId,c=Math.min(a.length,o.length);let u=0,h=0,d=0;for(;u<c;){for(;u+h<c&&u+d<c&&o[u+h]==a[u+d];)u++;if(u+h>=c)break;if(o[u+h]==l)h=1;else if(a[u+d]==l)d=1;else{const f=o.indexOf(a[u+d]),p=t.get(o[u+h]),m=t.get(a[u+d]);this.options.groupOrderSwap(p,m,t),t.update(p),t.update(m);const g=o[u+h];o[u+h]=a[u+d],o[f]=g,u++}}}}}}_onGroupDragEnd(e){if(this.groupTouchParams.isDragging=!1,this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();const t=this,n=t.groupTouchParams.group.groupId,r=t.groupsData.getDataSet(),s=R.extend({},r.get(n));t.options.onMoveGroup(s,o=>{if(o)o[r._idProp]=n,r.update(o);else{const a=r.getIds({order:t.options.groupOrder});if(!R.equalArray(a,t.groupTouchParams.originalOrder)){const l=t.groupTouchParams.originalOrder,c=Math.min(l.length,a.length);let u=0;for(;u<c;){for(;u<c&&a[u]==l[u];)u++;if(u>=c)break;const h=a.indexOf(l[u]),d=r.get(a[u]),f=r.get(l[u]);t.options.groupOrderSwap(d,f,r),r.update(d),r.update(f);const p=a[u];a[u]=l[u],a[h]=p,u++}}}}),t.body.emitter.emit("groupDragged",{groupId:n}),this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.group=null}}_onSelectItem(e){if(!this.options.selectable)return;const t=e.srcEvent&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey),n=e.srcEvent&&e.srcEvent.shiftKey;if(t||n){this._onMultiSelectItem(e);return}const r=this.getSelection(),s=this.itemFromTarget(e),o=s&&s.selectable?[s.id]:[];this.setSelection(o);const a=this.getSelection();(a.length>0||r.length>0)&&this.body.emitter.emit("select",{items:a,event:e})}_onMouseOver(e){const t=this.itemFromTarget(e);if(!t)return;const n=this.itemFromRelatedTarget(e);if(t===n)return;const r=t.getTitle();if(this.options.showTooltips&&r){this.popup==null&&(this.popup=new aie(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")),this.popup.setText(r);const s=this.body.dom.centerContainer,o=s.getBoundingClientRect();this.popup.setPosition(e.clientX-o.left+s.offsetLeft,e.clientY-o.top+s.offsetTop),this.setPopupTimer(this.popup)}else this.clearPopupTimer(),this.popup!=null&&this.popup.hide();this.body.emitter.emit("itemover",{item:t.id,event:e})}_onMouseOut(e){const t=this.itemFromTarget(e);if(!t)return;const n=this.itemFromRelatedTarget(e);t!==n&&(this.clearPopupTimer(),this.popup!=null&&this.popup.hide(),this.body.emitter.emit("itemout",{item:t.id,event:e}))}_onMouseMove(e){if(this.itemFromTarget(e)&&(this.popupTimer!=null&&this.setPopupTimer(this.popup),this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden)){const n=this.body.dom.centerContainer,r=n.getBoundingClientRect();this.popup.setPosition(e.clientX-r.left+n.offsetLeft,e.clientY-r.top+n.offsetTop),this.popup.show()}}_onMouseWheel(e){this.touchParams.itemIsDragging&&this._onDragEnd(e)}_onUpdateItem(e){if(!this.options.selectable||!this.options.editable.updateTime&&!this.options.editable.updateGroup)return;const t=this;if(e){const n=t.itemsData.get(e.id);this.options.onUpdate(n,r=>{r&&t.itemsData.update(r)})}}_onDropObjectOnItem(e){const t=this.itemFromTarget(e),n=JSON.parse(e.dataTransfer.getData("text"));this.options.onDropObjectOnItem(n,t)}_onAddItem(e){if(!this.options.selectable||!this.options.editable.add)return;const t=this,n=this.options.snap||null,r=this.dom.frame.getBoundingClientRect(),s=this.options.rtl?r.right-e.center.x:e.center.x-r.left,o=this.body.util.toTime(s),a=this.body.util.getScale(),l=this.body.util.getStep();let c,u;e.type=="drop"?(u=JSON.parse(e.dataTransfer.getData("text")),u.content=u.content?u.content:"new item",u.start=u.start?u.start:n?n(o,a,l):o,u.type=u.type||"box",u[this.itemsData.idProp]=u.id||Is(),u.type=="range"&&!u.end&&(c=this.body.util.toTime(s+this.props.width/5),u.end=n?n(c,a,l):c)):(u={start:n?n(o,a,l):o,content:"new item"},u[this.itemsData.idProp]=Is(),this.options.type==="range"&&(c=this.body.util.toTime(s+this.props.width/5),u.end=n?n(c,a,l):c));const h=this.groupFromTarget(e);h&&(u.group=h.groupId),u=this._cloneItemData(u),this.options.onAdd(u,d=>{d&&(t.itemsData.add(d),e.type=="drop"&&t.setSelection([d.id]))})}_onMultiSelectItem(e){if(!this.options.selectable)return;const t=this.itemFromTarget(e);if(t){let n=this.options.multiselect?this.getSelection():[];if((e.srcEvent&&e.srcEvent.shiftKey||!1||this.options.sequentialSelection)&&this.options.multiselect){const o=this.itemsData.get(t.id).group;let a;this.options.multiselectPerGroup&&n.length>0&&(a=this.itemsData.get(n[0]).group),(!this.options.multiselectPerGroup||a==null||a==o)&&n.push(t.id);const l=Bs._getItemRange(this.itemsData.get(n));if(!this.options.multiselectPerGroup||a==o){n=[];for(const c in this.items){if(!Object.prototype.hasOwnProperty.call(this.items,c))continue;const u=this.items[c],h=u.data.start,d=u.data.end!==void 0?u.data.end:h;h>=l.min&&d<=l.max&&(!this.options.multiselectPerGroup||a==this.itemsData.get(u.id).group)&&!(u instanceof oo)&&n.push(u.id)}}}else{const o=n.indexOf(t.id);o==-1?n.push(t.id):n.splice(o,1)}const s=n.filter(o=>this.getItemById(o).selectable);this.setSelection(s),this.body.emitter.emit("select",{items:this.getSelection(),event:e})}}static _getItemRange(e){let t=null,n=null;return e.forEach(r=>{(n==null||r.start<n)&&(n=r.start),r.end!=null?(t==null||r.end>t)&&(t=r.end):(t==null||r.start>t)&&(t=r.start)}),{min:n,max:t}}itemFromElement(e){let t=e;for(;t;){if(Object.prototype.hasOwnProperty.call(t,"vis-item"))return t["vis-item"];t=t.parentNode}return null}itemFromTarget(e){return this.itemFromElement(e.target)}itemFromRelatedTarget(e){return this.itemFromElement(e.relatedTarget)}groupFromTarget(e){const t=e.center?e.center.y:e.clientY;let n=this.groupIds;n.length<=0&&this.groupsData&&(n=this.groupsData.getIds({order:this.options.groupOrder}));for(let r=0;r<n.length;r++){const s=n[r],o=this.groups[s],a=o.dom.foreground,l=a.getBoundingClientRect();if(t>=l.top&&t<l.top+a.offsetHeight)return o;if(this.options.orientation.item==="top"){if(r===this.groupIds.length-1&&t>l.top)return o}else if(r===0&&t<l.top+a.offset)return o}return null}static itemSetFromTarget(e){let t=e.target;for(;t;){if(Object.prototype.hasOwnProperty.call(t,"vis-itemset"))return t["vis-itemset"];t=t.parentNode}return null}_cloneItemData(e,t){const n=R.extend({},e);return t||(t=this.itemsData.type),n.start!=null&&(n.start=R.convert(n.start,t&&t.start||"Date")),n.end!=null&&(n.end=R.convert(n.end,t&&t.end||"Date")),n}_clusterItems(){if(!this.options.cluster)return;const{scale:e}=this.body.range.conversion(this.body.domProps.center.width),t=this.clusterGenerator.getClusters(this.clusters,e,this.options.cluster);if(this.clusters!=t){if(this._detachAllClusters(),t){for(let n of t)n.attach();this.clusters=t}this._updateClusters(t)}}_detachAllClusters(){if(this.options.cluster&&this.clusters&&this.clusters.length)for(let e of this.clusters)e.detach()}_updateClusters(e){if(this.clusters&&this.clusters.length){const t=new Set(e.map(s=>s.id)),n=this.clusters.filter(s=>!t.has(s.id));let r=!1;for(let s of n){const o=this.selection.indexOf(s.id);o!==-1&&(s.unselect(),this.selection.splice(o,1),r=!0)}if(r){const s=this.getSelection();this.body.emitter.emit("select",{items:s,event})}}this.clusters=e||[]}}Bs.types={background:oo,box:sie,range:Ys,point:oie};Bs.prototype._onAdd=Bs.prototype._onUpdate;let gl=!1,fA,kh="background: #FFeeee; color: #dd0000";class Qe{constructor(){}static validate(e,t,n){gl=!1,fA=t;let r=t;return n!==void 0&&(r=t[n]),Qe.parse(e,r,[]),gl}static parse(e,t,n){for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&Qe.check(r,e,t,n)}static check(e,t,n,r){if(n[e]===void 0&&n.__any__===void 0){Qe.getSuggestion(e,n,r);return}let s=e,o=!0;n[e]===void 0&&n.__any__!==void 0&&(s="__any__",o=Qe.getType(t[e])==="object");let a=n[s];o&&a.__type__!==void 0&&(a=a.__type__),Qe.checkFields(e,t,n,s,a,r)}static checkFields(e,t,n,r,s,o){let a=function(u){console.log("%c"+u+Qe.printLocation(o,e),kh)},l=Qe.getType(t[e]),c=s[l];c!==void 0?Qe.getType(c)==="array"&&c.indexOf(t[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+Qe.print(c)+' not "'+t[e]+'". '),gl=!0):l==="object"&&r!=="__any__"&&(o=R.copyAndExtendArray(o,e),Qe.parse(t[e],n[r],o)):s.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+Qe.print(Object.keys(s))+". Received ["+l+'] "'+t[e]+'"'),gl=!0)}static getType(e){var t=typeof e;return t==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Array.isArray(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":t==="number"?"number":t==="boolean"?"boolean":t==="string"?"string":t===void 0?"undefined":t}static getSuggestion(e,t,n){let r=Qe.findInOptions(e,t,n,!1),s=Qe.findInOptions(e,fA,[],!0),o=8,a=4,l;r.indexMatch!==void 0?l=" in "+Qe.printLocation(r.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+r.indexMatch+`"?

`:s.distance<=a&&r.distance>s.distance?l=" in "+Qe.printLocation(r.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+Qe.printLocation(s.path,s.closestMatch,""):r.distance<=o?l='. Did you mean "'+r.closestMatch+'"?'+Qe.printLocation(r.path,e):l=". Did you mean one of these: "+Qe.print(Object.keys(t))+Qe.printLocation(n,e),console.log('%cUnknown option detected: "'+e+'"'+l,kh),gl=!0}static findInOptions(e,t,n,r=!1){let s=1e9,o="",a=[],l=e.toLowerCase(),c;for(let u in t){if(!Object.prototype.hasOwnProperty.call(t,u))continue;let h;if(t[u].__type__!==void 0&&r===!0){let d=Qe.findInOptions(e,t[u],R.copyAndExtendArray(n,u));s>d.distance&&(o=d.closestMatch,a=d.path,s=d.distance,c=d.indexMatch)}else u.toLowerCase().indexOf(l)!==-1&&(c=u),h=Qe.levenshteinDistance(e,u),s>h&&(o=u,a=R.copyArray(n),s=h)}return{closestMatch:o,path:a,distance:s,indexMatch:c}}static printLocation(e,t,n=`Problem value found at: 
`){let r=`

`+n+`options = {
`;for(let s=0;s<e.length;s++){for(let o=0;o<s+1;o++)r+="  ";r+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)r+="  ";r+=t+`
`;for(let s=0;s<e.length+1;s++){for(let o=0;o<e.length-s;o++)r+="  ";r+=`}
`}return r+`

`}static print(e){return JSON.stringify(e).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}static levenshteinDistance(e,t){if(e.length===0)return t.length;if(t.length===0)return e.length;var n=[],r;for(r=0;r<=t.length;r++)n[r]=[r];var s;for(s=0;s<=e.length;s++)n[0][s]=s;for(r=1;r<=t.length;r++)for(s=1;s<=e.length;s++)t.charAt(r-1)==e.charAt(s-1)?n[r][s]=n[r-1][s-1]:n[r][s]=Math.min(n[r-1][s-1]+1,Math.min(n[r][s-1]+1,n[r-1][s]+1));return n[t.length][e.length]}}let ae="string",se="boolean",We="number",pA="array",So="date",lt="object",hie="dom",Eo="moment",mA="any",die={configure:{enabled:{boolean:se},filter:{boolean:se,function:"function"},container:{dom:hie},__type__:{object:lt,boolean:se,function:"function"}},align:{string:ae},alignCurrentTime:{string:ae,undefined:"undefined"},rtl:{boolean:se,undefined:"undefined"},rollingMode:{follow:{boolean:se},offset:{number:We,undefined:"undefined"},__type__:{object:lt}},onTimeout:{timeoutMs:{number:We},callback:{function:"function"},__type__:{object:lt}},verticalScroll:{boolean:se,undefined:"undefined"},horizontalScroll:{boolean:se,undefined:"undefined"},horizontalScrollKey:{string:ae,undefined:"undefined"},horizontalScrollInvert:{boolean:se,undefined:"undefined"},autoResize:{boolean:se},throttleRedraw:{number:We},clickToUse:{boolean:se},dataAttributes:{string:ae,array:pA},editable:{add:{boolean:se,undefined:"undefined"},remove:{boolean:se,undefined:"undefined"},updateGroup:{boolean:se,undefined:"undefined"},updateTime:{boolean:se,undefined:"undefined"},overrideItems:{boolean:se,undefined:"undefined"},__type__:{boolean:se,object:lt}},end:{number:We,date:So,string:ae,moment:Eo},format:{minorLabels:{millisecond:{string:ae,undefined:"undefined"},second:{string:ae,undefined:"undefined"},minute:{string:ae,undefined:"undefined"},hour:{string:ae,undefined:"undefined"},weekday:{string:ae,undefined:"undefined"},day:{string:ae,undefined:"undefined"},week:{string:ae,undefined:"undefined"},month:{string:ae,undefined:"undefined"},year:{string:ae,undefined:"undefined"},__type__:{object:lt,function:"function"}},majorLabels:{millisecond:{string:ae,undefined:"undefined"},second:{string:ae,undefined:"undefined"},minute:{string:ae,undefined:"undefined"},hour:{string:ae,undefined:"undefined"},weekday:{string:ae,undefined:"undefined"},day:{string:ae,undefined:"undefined"},week:{string:ae,undefined:"undefined"},month:{string:ae,undefined:"undefined"},year:{string:ae,undefined:"undefined"},__type__:{object:lt,function:"function"}},__type__:{object:lt}},moment:{function:"function"},groupHeightMode:{string:ae},groupOrder:{string:ae,function:"function"},groupEditable:{add:{boolean:se,undefined:"undefined"},remove:{boolean:se,undefined:"undefined"},order:{boolean:se,undefined:"undefined"},__type__:{boolean:se,object:lt}},groupOrderSwap:{function:"function"},height:{string:ae,number:We},hiddenDates:{start:{date:So,number:We,string:ae,moment:Eo},end:{date:So,number:We,string:ae,moment:Eo},repeat:{string:ae},__type__:{object:lt,array:pA}},itemsAlwaysDraggable:{item:{boolean:se,undefined:"undefined"},range:{boolean:se,undefined:"undefined"},__type__:{boolean:se,object:lt}},limitSize:{boolean:se},locale:{string:ae},locales:{__any__:{any:mA},__type__:{object:lt}},longSelectPressTime:{number:We},margin:{axis:{number:We},item:{horizontal:{number:We,undefined:"undefined"},vertical:{number:We,undefined:"undefined"},__type__:{object:lt,number:We}},__type__:{object:lt,number:We}},max:{date:So,number:We,string:ae,moment:Eo},maxHeight:{number:We,string:ae},maxMinorChars:{number:We},min:{date:So,number:We,string:ae,moment:Eo},minHeight:{number:We,string:ae},moveable:{boolean:se},multiselect:{boolean:se},multiselectPerGroup:{boolean:se},onAdd:{function:"function"},onDropObjectOnItem:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},onInitialDrawComplete:{function:"function"},order:{function:"function"},orientation:{axis:{string:ae,undefined:"undefined"},item:{string:ae,undefined:"undefined"},__type__:{string:ae,object:lt}},selectable:{boolean:se},sequentialSelection:{boolean:se},showCurrentTime:{boolean:se},showMajorLabels:{boolean:se},showMinorLabels:{boolean:se},showWeekScale:{boolean:se},stack:{boolean:se},stackSubgroups:{boolean:se},cluster:{maxItems:{number:We,undefined:"undefined"},titleTemplate:{string:ae,undefined:"undefined"},clusterCriteria:{function:"function",undefined:"undefined"},showStipes:{boolean:se,undefined:"undefined"},fitOnDoubleClick:{boolean:se,undefined:"undefined"},__type__:{boolean:se,object:lt}},snap:{function:"function",null:"null"},start:{date:So,number:We,string:ae,moment:Eo},template:{function:"function"},loadingScreenTemplate:{function:"function"},groupTemplate:{function:"function"},visibleFrameTemplate:{string:ae,function:"function"},showTooltips:{boolean:se},tooltip:{followMouse:{boolean:se},overflowMethod:{string:["cap","flip","none"]},delay:{number:We},template:{function:"function"},__type__:{object:lt}},tooltipOnItemUpdateTime:{template:{function:"function"},__type__:{boolean:se,object:lt}},timeAxis:{scale:{string:ae,undefined:"undefined"},step:{number:We,undefined:"undefined"},__type__:{object:lt}},type:{string:ae},width:{string:ae,number:We},preferZoom:{boolean:se},zoomable:{boolean:se},zoomKey:{string:["ctrlKey","altKey","shiftKey","metaKey",""]},zoomFriction:{number:We},zoomMax:{number:We},zoomMin:{number:We},xss:{disabled:{boolean:se},filterOptions:{__any__:{any:mA},__type__:{object:lt}},__type__:{object:lt}},__type__:{object:lt}},fie={global:{align:["center","left","right"],alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],direction:!1,autoResize:!0,clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupHeightMode:["auto","fixed","fitItems"],groupsDraggable:!1,height:"",locale:"",longSelectPressTime:251,margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},preferZoom:!1,selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,stackSubgroups:!0,cluster:!1,start:"",showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:[500,0,99999,100]},tooltipOnItemUpdateTime:!1,type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","shiftKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],xss:{disabled:!1}}};var pie={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};class mie{constructor(e=1){this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return pie[e]}setColor(e,t=!0){if(e==="none")return;let n;var r=this._isColorString(e);if(r!==void 0&&(e=r),R.isString(e)===!0){if(R.isValidRGB(e)===!0){let s=e.substr(4).substr(0,e.length-5).split(",");n={r:s[0],g:s[1],b:s[2],a:1}}else if(R.isValidRGBA(e)===!0){let s=e.substr(5).substr(0,e.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(R.isValidHex(e)===!0){let s=R.hexToRGB(e);n={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){let s=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:s}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(e));this._setColor(n,t)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(e=!0){e===!0&&(this.previousColor=R.extend({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e,t=!0){t===!0&&(this.initialColor=R.extend({},e)),this.color=e;let n=R.RGBToHSV(e.r,e.g,e.b),r=2*Math.PI,s=this.r*n.s,o=this.centerCoordinates.x+s*Math.sin(r*n.h),a=this.centerCoordinates.y+s*Math.cos(r*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){let t=R.RGBToHSV(this.color.r,this.color.g,this.color.b);t.v=e/100;let n=R.HSVToRGB(t.h,t.s,t.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(e=this.color){let t=R.RGBToHSV(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let r=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,r,s),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-t.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),n.fill(),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){let t=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{let t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(t)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var e=this;this.opacityRange.onchange=function(){e._setOpacity(this.value)},this.opacityRange.oninput=function(){e._setOpacity(this.value)},this.brightnessRange.onchange=function(){e._setBrightness(this.value)},this.brightnessRange.oninput=function(){e._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new Wt(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),Z2(this.hammer,e=>{this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){let e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let t=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,t,n);let r,s,o,a;this.centerCoordinates={x:t*.5,y:n*.5},this.r=.49*t;let l=2*Math.PI/360,c=1/360,u=1/this.r,h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)r=this.centerCoordinates.x+a*Math.sin(l*o),s=this.centerCoordinates.y+a*Math.cos(l*o),h=R.HSVToRGB(o*c,a*u,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(r-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,t,n)}this.generated=!0}_moveSelector(e){let t=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-t.left,r=e.center.y-t.top,s=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,l=r-s,c=Math.atan2(a,l),u=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(c)*u+s,d=Math.sin(c)*u+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=d-.5*this.colorPickerSelector.clientWidth+"px";let f=c/(2*Math.PI);f=f<0?f+1:f;let p=u/this.r,m=R.RGBToHSV(this.color.r,this.color.g,this.color.b);m.h=f,m.s=p;let g=R.HSVToRGB(m.h,m.s,m.v);g.a=this.color.a,this.color=g,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}class l${constructor(e,t,n,r=1){this.parent=e,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},R.extend(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new mie(r),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let t=!0;if(typeof e=="string")this.options.filter=e;else if(Array.isArray(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),e.filter!==void 0&&(this.options.filter=e.filter),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(t=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,t=e):typeof e=="function"&&(this.options.filter=e,t=!0);this.options.filter===!1&&(t=!1),this.options.enabled=t}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];let e=this.options.filter,t=0,n=!1;for(let r in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,r)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(r,[]),n=n||this._handleObject(this.configureOptions[r],[r],!0)):(e===!0||e.indexOf(r)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,t>0&&this._makeItem([]),this._makeHeader(r),this._handleObject(this.configureOptions[r],[r])),t++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(var e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let t=this.moduleOptions;for(let n=0;n<e.length;n++)if(t[e[n]]!==void 0)t=t[e[n]];else{t=void 0;break}return t}_makeItem(e,...t){if(this.allowCreation===!0){let n=document.createElement("div");return n.className="vis-configuration vis-config-item vis-config-s"+e.length,t.forEach(r=>{n.appendChild(r)}),this.domElements.push(n),this.domElements.length}return 0}_makeHeader(e){let t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerHTML=R.xss(e),this._makeItem([],t)}_makeLabel(e,t,n=!1){let r=document.createElement("div");return r.className="vis-configuration vis-config-label vis-config-s"+t.length,n===!0?r.innerHTML=R.xss("<i><b>"+e+":</b></i>"):r.innerHTML=R.xss(e+":"),r}_makeDropdown(e,t,n){let r=document.createElement("select");r.className="vis-configuration vis-config-select";let s=0;t!==void 0&&e.indexOf(t)!==-1&&(s=e.indexOf(t));for(let l=0;l<e.length;l++){let c=document.createElement("option");c.value=e[l],l===s&&(c.selected="selected"),c.innerHTML=e[l],r.appendChild(c)}let o=this;r.onchange=function(){o._update(this.value,n)};let a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,r)}_makeRange(e,t,n){let r=e[0],s=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=o}catch{}l.step=a;let c="",u=0;if(t!==void 0){let m=1.2;t<0&&t*m<s?(l.min=Math.ceil(t*m),u=l.min,c="range increased"):t/m<s&&(l.min=Math.ceil(t/m),u=l.min,c="range increased"),t*m>o&&o!==1&&(l.max=Math.ceil(t*m),u=l.max,c="range increased"),l.value=t}else l.value=r;let h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=Number(l.value);var d=this;l.onchange=function(){h.value=this.value,d._update(Number(this.value),n)},l.oninput=function(){h.value=this.value};let f=this._makeLabel(n[n.length-1],n),p=this._makeItem(n,f,l,h);c!==""&&this.popupHistory[p]!==u&&(this.popupHistory[p]=u,this._setupPopup(c,p))}_makeButton(){if(this.options.showButton===!0){let e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerHTML="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,t){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){let n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerHTML=R.xss(e),n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:t}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){let t=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=t.left+"px",this.popupDiv.html.style.top=t.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(()=>{this._removePopup()},1800)}}_makeCheckbox(e,t,n){var r=document.createElement("input");r.type="checkbox",r.className="vis-configuration vis-config-checkbox",r.checked=e,t!==void 0&&(r.checked=t,t!==e&&(typeof e=="object"?t!==e.enabled&&this.changedOptions.push({path:n,value:t}):this.changedOptions.push({path:n,value:t})));let s=this;r.onchange=function(){s._update(this.checked,n)};let o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,r)}_makeTextInput(e,t,n){var r=document.createElement("input");r.type="text",r.className="vis-configuration vis-config-text",r.value=t,t!==e&&this.changedOptions.push({path:n,value:t});let s=this;r.onchange=function(){s._update(this.value,n)};let o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,r)}_makeColorField(e,t,n){let r=e[1],s=document.createElement("div");t=t===void 0?r:t,t!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=t):s.className="vis-configuration vis-config-colorBlock none",t=t===void 0?r:t,s.onclick=()=>{this._showColorPicker(t,s,n)};let o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}_showColorPicker(e,t,n){t.onclick=function(){},this.colorPicker.insertTo(t),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(r=>{let s="rgba("+r.r+","+r.g+","+r.b+","+r.a+")";t.style.backgroundColor=s,this._update(s,n)}),this.colorPicker.setCloseCallback(()=>{t.onclick=()=>{this._showColorPicker(e,t,n)}})}_handleObject(e,t=[],n=!1){let r=!1,s=this.options.filter,o=!1;for(let a in e){if(!Object.prototype.hasOwnProperty.call(e,a))continue;r=!0;let l=e[a],c=R.copyAndExtendArray(t,a);if(typeof s=="function"&&(r=s(a,t),r===!1&&!Array.isArray(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,r=this._handleObject(l,c,!0),this.allowCreation=n===!1)),r!==!1){o=!0;let u=this._getValue(c);if(Array.isArray(l))this._handleArray(l,u,c);else if(typeof l=="string")this._makeTextInput(l,u,c);else if(typeof l=="boolean")this._makeCheckbox(l,u,c);else if(l instanceof Object){let h=!0;if(t.indexOf("physics")!==-1&&this.moduleOptions.physics.solver!==a&&(h=!1),h===!0)if(l.enabled!==void 0){let d=R.copyAndExtendArray(c,"enabled"),f=this._getValue(d);if(f===!0){let p=this._makeLabel(a,c,!0);this._makeItem(c,p),o=this._handleObject(l,c)||o}else this._makeCheckbox(l,f,c)}else{let d=this._makeLabel(a,c,!0);this._makeItem(c,d),o=this._handleObject(l,c)||o}}else console.error("dont know how to handle",l,a,c)}}return o}_handleArray(e,t,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,t,n),e[1]!==t&&this.changedOptions.push({path:n,value:t})):typeof e[0]=="string"?(this._makeDropdown(e,t,n),e[0]!==t&&this.changedOptions.push({path:n,value:t})):typeof e[0]=="number"&&(this._makeRange(e,t,n),e[0]!==t&&this.changedOptions.push({path:n,value:Number(t)}))}_update(e,t){let n=this._constructOptions(e,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,t,n={}){let r=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<t.length;s++)t[s]!=="global"&&(r[t[s]]===void 0&&(r[t[s]]={}),s!==t.length-1?r=r[t[s]]:r[t[s]]=e);return n}_printOptions(){let e=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+JSON.stringify(e,null,2)+"</pre>"}getOptions(){let e={};for(var t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,e);return e}}class ux extends ra{constructor(e,t,n,r){if(super(),this.initTime=new Date,this.itemsDone=!1,!(this instanceof ux))throw new SyntaxError("Constructor must be called with the new operator");if(!(Array.isArray(n)||cr(n))&&n instanceof Object){const l=r;r=n,n=l}r&&r.throttleRedraw&&console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');const s=this;if(this.defaultOptions={autoResize:!0,longSelectPressTime:251,orientation:{axis:"bottom",item:"bottom"},moment:ti},this.options=R.deepExtend({},this.defaultOptions),r&&R.setupXSSProtection(r.xss),this._create(e),!r||r&&typeof r.rtl>"u"){this.dom.root.style.visibility="hidden";let l,c=this.dom.root;for(;!l&&c;)l=window.getComputedStyle(c,null).direction,c=c.parentElement;this.options.rtl=l&&l.toLowerCase()=="rtl"}else this.options.rtl=r.rtl;r&&(r.rollingMode&&(this.options.rollingMode=r.rollingMode),r.onInitialDrawComplete&&(this.options.onInitialDrawComplete=r.onInitialDrawComplete),r.onTimeout&&(this.options.onTimeout=r.onTimeout),r.loadingScreenTemplate&&(this.options.loadingScreenTemplate=r.loadingScreenTemplate));const o=document.createElement("div");if(this.options.loadingScreenTemplate){const l=this.options.loadingScreenTemplate.bind(this),c=l(this.dom.loadingScreen);c instanceof Object&&!(c instanceof Element)?l(o):c instanceof Element?(o.innerHTML="",o.appendChild(c)):c!=null&&(o.innerHTML=R.xss(c))}this.dom.loadingScreen.appendChild(o),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale(){return s.timeAxis.step.scale},getStep(){return s.timeAxis.step.step},toScreen:s._toScreen.bind(s),toGlobalScreen:s._toGlobalScreen.bind(s),toTime:s._toTime.bind(s),toGlobalTime:s._toGlobalTime.bind(s)}},this.range=new Hd(this.body,this.options),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new Mh(this.body,this.options),this.timeAxis2=null,this.components.push(this.timeAxis),this.currentTime=new o$(this.body,this.options),this.components.push(this.currentTime),this.itemSet=new Bs(this.body,this.options),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null;function a(l,c){s.hasListeners(l)&&s.emit(l,s.getEventProperties(c))}this.dom.root.onclick=l=>a("click",l),this.dom.root.ondblclick=l=>a("doubleClick",l),this.dom.root.oncontextmenu=l=>a("contextmenu",l),this.dom.root.onmouseover=l=>a("mouseOver",l),window.PointerEvent?(this.dom.root.onpointerdown=l=>a("mouseDown",l),this.dom.root.onpointermove=l=>a("mouseMove",l),this.dom.root.onpointerup=l=>a("mouseUp",l)):(this.dom.root.onmousemove=l=>a("mouseMove",l),this.dom.root.onmousedown=l=>a("mouseDown",l),this.dom.root.onmouseup=l=>a("mouseUp",l)),this.initialFitDone=!1,this.on("changed",()=>{if(s.itemsData!=null){if(!s.initialFitDone&&!s.options.rollingMode)if(s.initialFitDone=!0,s.options.start!=null||s.options.end!=null){if(s.options.start==null||s.options.end==null)var l=s.getItemRange();const c=s.options.start!=null?s.options.start:l.min,u=s.options.end!=null?s.options.end:l.max;s.setWindow(c,u,{animation:!1})}else s.fit({animation:!1});!s.initialDrawDone&&(s.initialRangeChangeDone||!s.options.start&&!s.options.end||s.options.rollingMode)&&(s.initialDrawDone=!0,s.itemSet.initialDrawDone=!0,s.dom.root.style.visibility="visible",s.dom.loadingScreen.parentNode.removeChild(s.dom.loadingScreen),s.options.onInitialDrawComplete&&setTimeout(()=>s.options.onInitialDrawComplete(),0))}}),this.on("destroyTimeline",()=>{s.destroy()}),r&&this.setOptions(r),this.body.emitter.on("fit",l=>{this._onFit(l),this.redraw()}),n&&this.setGroups(n),t&&this.setItems(t),this._redraw()}_createConfigurator(){return new l$(this,this.dom.container,fie)}redraw(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()}setOptions(e){if(Qe.validate(e,die)===!0&&console.log("%cErrors have been found in the supplied options object.",kh),ra.prototype.setOptions.call(this,e),"type"in e&&e.type!==this.options.type){this.options.type=e.type;const n=this.itemsData;if(n){const r=this.getSelection();this.setItems(null),this.setItems(n.rawDS),this.setSelection(r)}}}setItems(e){this.itemsDone=!1;let t;e?cr(e)?t=Sa(e):t=Sa(new xa(e)):t=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=t,this.itemSet&&this.itemSet.setItems(t!=null?t.rawDS:null)}setGroups(e){let t;const n=r=>r.visible!==!1;e?(Array.isArray(e)&&(e=new xa(e)),t=new ex(e,{filter:n})):t=null,this.groupsData!=null&&typeof this.groupsData.setData=="function"&&this.groupsData.setData(null),this.groupsData=t,this.itemSet.setGroups(t)}setData(e){e&&e.groups&&this.setGroups(e.groups),e&&e.items&&this.setItems(e.items)}setSelection(e,t){this.itemSet&&this.itemSet.setSelection(e),t&&t.focus&&this.focus(e,t)}getSelection(){return this.itemSet&&this.itemSet.getSelection()||[]}focus(e,t){if(!this.itemsData||e==null)return;const n=Array.isArray(e)?e:[e],r=this.itemsData.get(n);let s=null,o=null;if(r.forEach(a=>{const l=a.start.valueOf(),c="end"in a?a.end.valueOf():a.start.valueOf();(s===null||l<s)&&(s=l),(o===null||c>o)&&(o=c)}),s!==null&&o!==null){const a=this,l=this.itemSet.items[n[0]];let c=this._getScrollTop()*-1,u=null;const h=(y,b,_)=>{const w=gA(a,l);if(w===!1||(u||(u=w),u.itemTop==w.itemTop&&!u.shouldScroll))return;u.itemTop!=w.itemTop&&w.shouldScroll&&(u=w,c=a._getScrollTop()*-1);const C=c,E=u.scrollOffset,x=_?E:C+(E-C)*y;a._setScrollTop(-x),b||a._redraw()},d=()=>{const y=gA(a,l);y.shouldScroll&&y.itemTop!=u.itemTop&&(a._setScrollTop(-y.scrollOffset),a._redraw())},f=()=>{d(),setTimeout(d,100)},p=t&&t.zoom!==void 0?t.zoom:!0,m=(s+o)/2,g=p?(o-s)*1.1:Math.max(this.range.end-this.range.start,(o-s)*1.1),v=t&&t.animation!==void 0?t.animation:!0;v||(u={shouldScroll:!1,scrollOffset:-1,itemTop:-1}),this.range.stopRolling(),this.range.setRange(m-g/2,m+g/2,{animation:v},f,h)}}fit(e,t){const n=e&&e.animation!==void 0?e.animation:!0;let r;this.itemsData.length===1&&this.itemsData.get()[0].end===void 0?(r=this.getDataRange(),this.moveTo(r.min.valueOf(),{animation:n},t)):(r=this.getItemRange(),this.range.setRange(r.min,r.max,{animation:n},t))}getItemRange(){const e=this.getDataRange();let t=e.min!==null?e.min.valueOf():null,n=e.max!==null?e.max.valueOf():null,r=null,s=null;if(t!=null&&n!=null){let o=n-t;o<=0&&(o=10);const a=o/this.props.center.width,l={};let c=0;if(R.forEach(this.itemSet.items,(h,d)=>{h.groupShowing&&(l[d]=h.redraw(!0),c=l[d].length)}),c>0)for(let h=0;h<c;h++)R.forEach(l,d=>{d[h]()});if(R.forEach(this.itemSet.items,h=>{const d=v_(h),f=y_(h);let p,m;this.options.rtl?(p=d-(h.getWidthRight()+10)*a,m=f+(h.getWidthLeft()+10)*a):(p=d-(h.getWidthLeft()+10)*a,m=f+(h.getWidthRight()+10)*a),p<t&&(t=p,r=h),m>n&&(n=m,s=h)}),r&&s){const h=r.getWidthLeft()+10,d=s.getWidthRight()+10,f=this.props.center.width-h-d;f>0&&(this.options.rtl?(t=v_(r)-d*o/f,n=y_(s)+h*o/f):(t=v_(r)-h*o/f,n=y_(s)+d*o/f))}}return{min:t!=null?new Date(t):null,max:n!=null?new Date(n):null}}getDataRange(){let e=null,t=null;return this.itemsData&&this.itemsData.forEach(n=>{const r=R.convert(n.start,"Date").valueOf(),s=R.convert(n.end!=null?n.end:n.start,"Date").valueOf();(e===null||r<e)&&(e=r),(t===null||s>t)&&(t=s)}),{min:e!=null?new Date(e):null,max:t!=null?new Date(t):null}}getEventProperties(e){const t=e.center?e.center.x:e.clientX,n=e.center?e.center.y:e.clientY,r=this.dom.centerContainer.getBoundingClientRect(),s=this.options.rtl?r.right-t:t-r.left,o=n-r.top,a=this.itemSet.itemFromTarget(e),l=this.itemSet.groupFromTarget(e),c=lx.customTimeFromTarget(e),u=this.itemSet.options.snap||null,h=this.body.util.getScale(),d=this.body.util.getStep(),f=this._toTime(s),p=u?u(f,h,d):f,m=R.getTarget(e);let g=null;return a!=null?g="item":c!=null?g="custom-time":R.hasParent(m,this.timeAxis.dom.foreground)||this.timeAxis2&&R.hasParent(m,this.timeAxis2.dom.foreground)?g="axis":R.hasParent(m,this.itemSet.dom.labelSet)?g="group-label":R.hasParent(m,this.currentTime.bar)?g="current-time":R.hasParent(m,this.dom.center)&&(g="background"),{event:e,item:a?a.id:null,isCluster:a?!!a.isCluster:!1,items:a?a.items||[]:null,group:l?l.groupId:null,customTime:c?c.options.id:null,what:g,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:s,y:o,time:f,snappedTime:p}}toggleRollingMode(){this.range.rolling?this.range.stopRolling():(this.options.rollingMode==null&&this.setOptions(this.options),this.range.startRolling())}_redraw(){ra.prototype._redraw.call(this)}_onFit(e){const{start:t,end:n,animation:r}=e;n?this.range.setRange(t,n,{animation:r}):this.moveTo(t.valueOf(),{animation:r})}}function v_(i){return R.convert(i.data.start,"Date").valueOf()}function y_(i){const e=i.data.end!=null?i.data.end:i.data.start;return R.convert(e,"Date").valueOf()}function gA(i,e){if(!e.parent)return!1;const t=i.options.rtl?i.props.rightContainer.height:i.props.leftContainer.height,n=i.props.center.height,r=e.parent;let s=r.top,o=!0;const a=i.timeAxis.options.orientation.axis,l=()=>a=="bottom"?r.height-e.top-e.height:e.top,c=i._getScrollTop()*-1,u=s+l(),h=e.height;return u<c?s+t<=s+l()+h&&(s+=l()-i.itemSet.options.margin.item.vertical):u+h>c+t?s+=l()+h-t+i.itemSet.options.margin.item.vertical:o=!1,s=Math.min(s,n-t),{shouldScroll:o,scrollOffset:s,itemTop:u}}function Or(i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(i[e].redundant=i[e].used,i[e].used=[])}function Ei(i){for(var e in i){if(!Object.prototype.hasOwnProperty.call(i,e))continue;const n=i[e];for(var t=0;t<n.redundant.length;t++)n.redundant[t].parentNode.removeChild(n.redundant[t]);n.redundant=[]}}function gie(i){Or(i),Ei(i),Or(i)}function Ui(i,e,t){var n;return Object.prototype.hasOwnProperty.call(e,i)?e[i].redundant.length>0?(n=e[i].redundant[0],e[i].redundant.shift()):(n=document.createElementNS("http://www.w3.org/2000/svg",i),t.appendChild(n)):(n=document.createElementNS("http://www.w3.org/2000/svg",i),e[i]={used:[],redundant:[]},t.appendChild(n)),e[i].used.push(n),n}function __(i,e,t,n){var r;return Object.prototype.hasOwnProperty.call(e,i)?e[i].redundant.length>0?(r=e[i].redundant[0],e[i].redundant.shift()):(r=document.createElement(i),t.appendChild(r)):(r=document.createElement(i),e[i]={used:[],redundant:[]},t.appendChild(r)),e[i].used.push(r),r}function Ca(i,e,t,n,r,s){var o;if(t.style=="circle"?(o=Ui("circle",n,r),o.setAttributeNS(null,"cx",i),o.setAttributeNS(null,"cy",e),o.setAttributeNS(null,"r",.5*t.size)):(o=Ui("rect",n,r),o.setAttributeNS(null,"x",i-.5*t.size),o.setAttributeNS(null,"y",e-.5*t.size),o.setAttributeNS(null,"width",t.size),o.setAttributeNS(null,"height",t.size)),t.styles!==void 0&&o.setAttributeNS(null,"style",t.styles),o.setAttributeNS(null,"class",t.className+" vis-point"),s){var a=Ui("text",n,r);s.xOffset&&(i=i+s.xOffset),s.yOffset&&(e=e+s.yOffset),s.content&&(a.textContent=s.content),s.className&&a.setAttributeNS(null,"class",s.className+" vis-label"),a.setAttributeNS(null,"x",i),a.setAttributeNS(null,"y",e)}return o}function kb(i,e,t,n,r,s,o,a){if(n!=0){n<0&&(n*=-1,e-=n);var l=Ui("rect",s,o);l.setAttributeNS(null,"x",i-.5*t),l.setAttributeNS(null,"y",e),l.setAttributeNS(null,"width",t),l.setAttributeNS(null,"height",n),l.setAttributeNS(null,"class",r),a&&l.setAttributeNS(null,"style",a)}}function vie(){try{return navigator?navigator.languages&&navigator.languages.length?navigator.languages:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en":"en"}catch{return"en"}}class yie{constructor(e,t,n,r,s,o,a=!1,l=!1){if(this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=s,this.majorCharHeight=o,this._start=e,this._end=t,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=a,this.autoScaleStart=n,this.autoScaleEnd=r,this.formattingFunction=l,n||r){const c=this,u=h=>{const d=h-h%(c.magnitudefactor*c.minorSteps[c.minorStepIdx]);return h%(c.magnitudefactor*c.minorSteps[c.minorStepIdx])>.5*(c.magnitudefactor*c.minorSteps[c.minorStepIdx])?d+c.magnitudefactor*c.minorSteps[c.minorStepIdx]:d};n&&(this._start-=this.magnitudefactor*2*this.minorSteps[this.minorStepIdx],this._start=u(this._start)),r&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=u(this._end)),this.determineScale()}}setCharHeight(e){this.majorCharHeight=e}setHeight(e){this.containerHeight=e}determineScale(){const e=this._end-this._start;this.scale=this.containerHeight/e;const t=this.majorCharHeight/this.scale,n=e>0?Math.round(Math.log(e)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,n);let r=0;n<0&&(r=n);let s=!1;for(let o=r;Math.abs(o)<=Math.abs(n);o++){this.magnitudefactor=Math.pow(10,o);for(let a=0;a<this.minorSteps.length;a++)if(this.magnitudefactor*this.minorSteps[a]>=t){s=!0,this.minorStepIdx=a;break}if(s===!0)break}}is_major(e){return e%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])===0}getStep(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]}getFirstMajor(){const e=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(e-this._start%e)%e)}formatValue(e){let t=e.toPrecision(5);return typeof this.formattingFunction=="function"&&(t=this.formattingFunction(e)),typeof t=="number"?`${t}`:typeof t=="string"?t:e.toPrecision(5)}getLines(){const e=[],t=this.getStep(),n=(t-this._start%t)%t;for(let r=this._start+n;this._end-r>1e-5;r+=t)r!=this._start&&e.push({major:this.is_major(r),y:this.convertValue(r),val:this.formatValue(r)});return e}followScale(e){const t=this.minorStepIdx,n=this._start,r=this._end,s=this,o=()=>{s.magnitudefactor*=2},a=()=>{s.magnitudefactor/=2};e.minorStepIdx<=1&&this.minorStepIdx<=1||e.minorStepIdx>1&&this.minorStepIdx>1||(e.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,t==2||o(),o()):(this.minorStepIdx=2,t==1||a(),a()));const l=e.convertValue(0),c=e.getStep()*e.scale;let u=!1,h=0;for(;!u&&h++<5;){this.scale=c/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);const d=this.containerHeight/this.scale;this._start=n,this._end=this._start+d;const f=this._end*this.scale,p=this.magnitudefactor*this.majorSteps[this.minorStepIdx],m=this.getFirstMajor()-e.getFirstMajor();if(this.zeroAlign){const g=l-f;this._end+=g/this.scale,this._start=this._end-d}else this.autoScaleStart?(this._start-=m/this.scale,this._end=this._start+d):(this._start+=p-m/this.scale,this._end=this._start+d);if(!this.autoScaleEnd&&this._end>r+1e-5){a(),u=!1;continue}if(!this.autoScaleStart&&this._start<n-1e-5)if(this.zeroAlign&&n>=0)console.warn("Can't adhere to given 'min' range, due to zeroalign");else{a(),u=!1;continue}if(this.autoScaleStart&&this.autoScaleEnd&&d<r-n){o(),u=!1;continue}u=!0}}convertValue(e){return this.containerHeight-(e-this._start)*this.scale}screenToValue(e){return(this.containerHeight-e)/this.scale+this._start}}class vA extends es{constructor(e,t,n,r){super(),this.id=Is(),this.body=e,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format(o){return`${parseFloat(o.toPrecision(3))}`},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format(o){return`${parseFloat(o.toPrecision(3))}`},title:{text:void 0,style:void 0}}},this.linegraphOptions=r,this.linegraphSVG=n,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.scale=void 0,this.range={start:0,end:0},this.options=R.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(t),this.width=Number(`${this.options.width}`.replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.getBoundingClientRect().height,this.hidden=!1,this.stepPixels=25,this.zeroCrossing=-1,this.amountOfSteps=-1,this.lineOffset=0,this.master=!0,this.masterAxis=null,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create(),this.scale==null&&this._redrawLabels(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};const s=this;this.body.emitter.on("verticalDrag",()=>{s.dom.lineContainer.style.top=`${s.body.domProps.scrollTop}px`})}addGroup(e,t){Object.prototype.hasOwnProperty.call(this.groups,e)||(this.groups[e]=t),this.amountOfGroups+=1}updateGroup(e,t){Object.prototype.hasOwnProperty.call(this.groups,e)||(this.amountOfGroups+=1),this.groups[e]=t}removeGroup(e){Object.prototype.hasOwnProperty.call(this.groups,e)&&(delete this.groups[e],this.amountOfGroups-=1)}setOptions(e){if(e){let t=!1;this.options.orientation!=e.orientation&&e.orientation!==void 0&&(t=!0);const n=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];R.selectiveDeepExtend(n,this.options,e),this.minWidth=Number(`${this.options.width}`.replace("px","")),t===!0&&this.dom.frame&&(this.hide(),this.show())}}_create(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.dom.lineContainer.style.visibility="visible",this.dom.lineContainer.style.display="block",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)}_redrawGroupIcons(){Or(this.svgElements);let e;const t=this.options.iconWidth,n=15,r=4;let s=r+.5*n;this.options.orientation==="left"?e=r:e=this.width-t-r;const o=Object.keys(this.groups);o.sort((a,l)=>a<l?-1:1);for(const a of o)this.groups[a].visible===!0&&(this.linegraphOptions.visibility[a]===void 0||this.linegraphOptions.visibility[a]===!0)&&(this.groups[a].getLegend(t,n,this.framework,e,s),s+=n+r);Ei(this.svgElements),this.iconsRemoved=!1}_cleanupIcons(){this.iconsRemoved===!1&&(Or(this.svgElements),Ei(this.svgElements),this.iconsRemoved=!0)}show(){this.hidden=!1,this.dom.frame.parentNode||(this.options.orientation==="left"?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer),this.dom.lineContainer.style.display="block"}hide(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.style.display="none"}setRange(e,t){this.range.start=e,this.range.end=t}redraw(){let e=!1,t=0;this.dom.lineContainer.style.top=`${this.body.domProps.scrollTop}px`;for(const n in this.groups)Object.prototype.hasOwnProperty.call(this.groups,n)&&this.groups[n].visible===!0&&(this.linegraphOptions.visibility[n]===void 0||this.linegraphOptions.visibility[n]===!0)&&t++;if(this.amountOfGroups===0||t===0)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height=`${this.height}px`,this.width=this.options.visible===!0?Number(`${this.options.width}`.replace("px","")):0;const n=this.props,r=this.dom.frame;r.className="vis-data-axis",this._calculateCharSize();const s=this.options.orientation,o=this.options.showMinorLabels,a=this.options.showMajorLabels,l=this.body.dom.backgroundHorizontal.offsetWidth;n.minorLabelHeight=o?n.minorCharHeight:0,n.majorLabelHeight=a?n.majorCharHeight:0,n.minorLineWidth=l-this.lineOffset-this.width+2*this.options.minorLinesOffset,n.minorLineHeight=1,n.majorLineWidth=l-this.lineOffset-this.width+2*this.options.majorLinesOffset,n.majorLineHeight=1,s==="left"?(r.style.top="0",r.style.left="0",r.style.bottom="",r.style.width=`${this.width}px`,r.style.height=`${this.height}px`,this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(r.style.top="",r.style.bottom="0",r.style.left="0",r.style.width=`${this.width}px`,r.style.height=`${this.height}px`,this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),e=this._redrawLabels(),e=this._isResized()||e,this.options.icons===!0?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(s)}return e}_redrawLabels(){let e=!1;Or(this.DOMelements.lines),Or(this.DOMelements.labels);const t=this.options.orientation,n=this.options[t].range!=null?this.options[t].range:{};let r=!0;n.max!=null&&(this.range.end=n.max,r=!1);let s=!0;n.min!=null&&(this.range.start=n.min,s=!1),this.scale=new yie(this.range.start,this.range.end,s,r,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[t].format),this.master===!1&&this.masterAxis!=null?(this.scale.followScale(this.masterAxis.scale),this.dom.lineContainer.style.display="none"):this.dom.lineContainer.style.display="block",this.maxLabelSize=0,this.scale.getLines().forEach(c=>{const u=c.y,h=c.major;this.options.showMinorLabels&&h===!1&&this._redrawLabel(u-2,c.val,t,"vis-y-axis vis-minor",this.props.minorCharHeight),h&&u>=0&&this._redrawLabel(u-2,c.val,t,"vis-y-axis vis-major",this.props.majorCharHeight),this.master===!0&&(h?this._redrawLine(u,t,"vis-grid vis-horizontal vis-major",this.options.majorLinesOffset,this.props.majorLineWidth):this._redrawLine(u,t,"vis-grid vis-horizontal vis-minor",this.options.minorLinesOffset,this.props.minorLineWidth))});let a=0;this.options[t].title!==void 0&&this.options[t].title.text!==void 0&&(a=this.props.titleCharHeight);const l=this.options.icons===!0?Math.max(this.options.iconWidth,a)+this.options.labelOffsetX+15:a+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-l&&this.options.visible===!0?(this.width=this.maxLabelSize+l,this.options.width=`${this.width}px`,Ei(this.DOMelements.lines),Ei(this.DOMelements.labels),this.redraw(),e=!0):this.maxLabelSize<this.width-l&&this.options.visible===!0&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+l),this.options.width=`${this.width}px`,Ei(this.DOMelements.lines),Ei(this.DOMelements.labels),this.redraw(),e=!0):(Ei(this.DOMelements.lines),Ei(this.DOMelements.labels),e=!1),e}convertValue(e){return this.scale.convertValue(e)}screenToValue(e){return this.scale.screenToValue(e)}_redrawLabel(e,t,n,r,s){const o=__("div",this.DOMelements.labels,this.dom.frame);o.className=r,o.innerHTML=R.xss(t),n==="left"?(o.style.left=`-${this.options.labelOffsetX}px`,o.style.textAlign="right"):(o.style.right=`-${this.options.labelOffsetX}px`,o.style.textAlign="left"),o.style.top=`${e-.5*s+this.options.labelOffsetY}px`,t+="";const a=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<t.length*a&&(this.maxLabelSize=t.length*a)}_redrawLine(e,t,n,r,s){if(this.master===!0){const o=__("div",this.DOMelements.lines,this.dom.lineContainer);o.className=n,o.innerHTML="",t==="left"?o.style.left=`${this.width-r}px`:o.style.right=`${this.width-r}px`,o.style.width=`${s}px`,o.style.top=`${e}px`}}_redrawTitle(e){if(Or(this.DOMelements.title),this.options[e].title!==void 0&&this.options[e].title.text!==void 0){const t=__("div",this.DOMelements.title,this.dom.frame);t.className=`vis-y-axis vis-title vis-${e}`,t.innerHTML=R.xss(this.options[e].title.text),this.options[e].title.style!==void 0&&R.addCssText(t,this.options[e].title.style),e==="left"?t.style.left=`${this.props.titleCharHeight}px`:t.style.right=`${this.props.titleCharHeight}px`,t.style.width=`${this.height}px`}Ei(this.DOMelements.title)}_calculateCharSize(){if(!("minorCharHeight"in this.props)){const e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-minor vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.minorCharHeight=t.clientHeight,this.props.minorCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}if(!("majorCharHeight"in this.props)){const e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-major vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.majorCharHeight=t.clientHeight,this.props.majorCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}if(!("titleCharHeight"in this.props)){const e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-title vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.titleCharHeight=t.clientHeight,this.props.titleCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}}}function iu(){}iu.draw=function(i,e,t,n){n=n||0;for(var r=_ie(t,e),s=0;s<i.length;s++)if(!r)Ca(i[s].screen_x+n,i[s].screen_y,Nb(e),t.svgElements,t.svg,i[s].label);else{var o=r(i[s],e);(o===!0||typeof o=="object")&&Ca(i[s].screen_x+n,i[s].screen_y,Nb(e,o),t.svgElements,t.svg,i[s].label)}};iu.drawIcon=function(i,e,t,n,r,s){var o=r*.5,a=Ui("rect",s.svgElements,s.svg);a.setAttributeNS(null,"x",e),a.setAttributeNS(null,"y",t-o),a.setAttributeNS(null,"width",n),a.setAttributeNS(null,"height",2*o),a.setAttributeNS(null,"class","vis-outline"),Ca(e+.5*n,t,Nb(i),s.svgElements,s.svg)};function Nb(i,e){return e=typeof e>"u"?{}:e,{style:e.style||i.options.drawPoints.style,styles:e.styles||i.options.drawPoints.styles,size:e.size||i.options.drawPoints.size,className:e.className||i.className}}function _ie(i,e){var t=void 0;return i.options&&i.options.drawPoints&&i.options.drawPoints.onRender&&typeof i.options.drawPoints.onRender=="function"&&(t=i.options.drawPoints.onRender),e.group.options&&e.group.options.drawPoints&&e.group.options.drawPoints.onRender&&typeof e.group.options.drawPoints.onRender=="function"&&(t=e.group.options.drawPoints.onRender),t}function Bt(){}Bt.drawIcon=function(i,e,t,n,r,s){var o=r*.5,a=Ui("rect",s.svgElements,s.svg);a.setAttributeNS(null,"x",e),a.setAttributeNS(null,"y",t-o),a.setAttributeNS(null,"width",n),a.setAttributeNS(null,"height",2*o),a.setAttributeNS(null,"class","vis-outline");var l=Math.round(.3*n),c=i.options.barChart.width,u=c/l,h=Math.round(.4*r),d=Math.round(.75*r),f=Math.round((n-2*l)/3);if(kb(e+.5*l+f,t+o-h-1,l,h,i.className+" vis-bar",s.svgElements,s.svg,i.style),kb(e+1.5*l+f+2,t+o-d-1,l,d,i.className+" vis-bar",s.svgElements,s.svg,i.style),i.options.drawPoints.enabled==!0){var p={style:i.options.drawPoints.style,styles:i.options.drawPoints.styles,size:i.options.drawPoints.size/u,className:i.className};Ca(e+.5*l+f,t+o-h-1,p,s.svgElements,s.svg),Ca(e+1.5*l+f+2,t+o-d-1,p,s.svgElements,s.svg)}};Bt.draw=function(i,e,t){var n=[],r={},s,o,a,l,c,u,h=0;for(c=0;c<i.length;c++)if(l=t.groups[i[c]],l.options.style==="bar"&&l.visible===!0&&(t.options.groups.visibility[i[c]]===void 0||t.options.groups.visibility[i[c]]===!0))for(u=0;u<e[i[c]].length;u++)n.push({screen_x:e[i[c]][u].screen_x,screen_end:e[i[c]][u].screen_end,screen_y:e[i[c]][u].screen_y,x:e[i[c]][u].x,end:e[i[c]][u].end,y:e[i[c]][u].y,groupId:i[c],label:e[i[c]][u].label}),h+=1;if(h!==0)for(n.sort(function(m,g){return m.screen_x===g.screen_x?m.groupId<g.groupId?-1:1:m.screen_x-g.screen_x}),Bt._getDataIntersections(r,n),c=0;c<n.length;c++){l=t.groups[n[c].groupId];var d=l.options.barChart.minWidth!=null?l.options.barChart.minWidth:.1*l.options.barChart.width;o=n[c].screen_x;var f=0;if(r[o]===void 0)c+1<n.length&&(s=Math.abs(n[c+1].screen_x-o)),a=Bt._getSafeDrawData(s,l,d);else{var p=c+(r[o].amount-r[o].resolved);p<n.length&&(s=Math.abs(n[p].screen_x-o)),a=Bt._getSafeDrawData(s,l,d),r[o].resolved+=1,l.options.stack===!0&&l.options.excludeFromStacking!==!0?n[c].screen_y<l.zeroPosition?(f=r[o].accumulatedNegative,r[o].accumulatedNegative+=l.zeroPosition-n[c].screen_y):(f=r[o].accumulatedPositive,r[o].accumulatedPositive+=l.zeroPosition-n[c].screen_y):l.options.barChart.sideBySide===!0&&(a.width=a.width/r[o].amount,a.offset+=r[o].resolved*a.width-.5*a.width*(r[o].amount+1))}let m=a.width,g=n[c].screen_x;if(n[c].screen_end!=null?(m=n[c].screen_end-n[c].screen_x,g+=m*.5):g+=a.offset,kb(g,n[c].screen_y-f,m,l.zeroPosition-n[c].screen_y,l.className+" vis-bar",t.svgElements,t.svg,l.style),l.options.drawPoints.enabled===!0){let v={screen_x:n[c].screen_x,screen_y:n[c].screen_y-f,x:n[c].x,y:n[c].y,groupId:n[c].groupId,label:n[c].label};iu.draw([v],l,t,a.offset)}}};Bt._getDataIntersections=function(i,e){for(var t,n=0;n<e.length;n++)n+1<e.length&&(t=Math.abs(e[n+1].screen_x-e[n].screen_x)),n>0&&(t=Math.min(t,Math.abs(e[n-1].screen_x-e[n].screen_x))),t===0&&(i[e[n].screen_x]===void 0&&(i[e[n].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),i[e[n].screen_x].amount+=1)};Bt._getSafeDrawData=function(i,e,t){var n,r;return i<e.options.barChart.width&&i>0?(n=i<t?t:i,r=0,e.options.barChart.align==="left"?r-=.5*i:e.options.barChart.align==="right"&&(r+=.5*i)):(n=e.options.barChart.width,r=0,e.options.barChart.align==="left"?r-=.5*e.options.barChart.width:e.options.barChart.align==="right"&&(r+=.5*e.options.barChart.width)),{width:n,offset:r}};Bt.getStackedYRange=function(i,e,t,n,r){if(i.length>0){i.sort(function(o,a){return o.screen_x===a.screen_x?o.groupId<a.groupId?-1:1:o.screen_x-a.screen_x});var s={};Bt._getDataIntersections(s,i),e[n]=Bt._getStackedYRange(s,i),e[n].yAxisOrientation=r,t.push(n)}};Bt._getStackedYRange=function(i,e){for(var t,n=e[0].screen_y,r=e[0].screen_y,s=0;s<e.length;s++)t=e[s].screen_x,i[t]===void 0?(n=n>e[s].screen_y?e[s].screen_y:n,r=r<e[s].screen_y?e[s].screen_y:r):e[s].screen_y<0?i[t].accumulatedNegative+=e[s].screen_y:i[t].accumulatedPositive+=e[s].screen_y;for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n=n>i[o].accumulatedNegative?i[o].accumulatedNegative:n,n=n>i[o].accumulatedPositive?i[o].accumulatedPositive:n,r=r<i[o].accumulatedNegative?i[o].accumulatedNegative:r,r=r<i[o].accumulatedPositive?i[o].accumulatedPositive:r);return{min:n,max:r}};function Mt(){}Mt.calcPath=function(i,e){if(i!=null&&i.length>0){var t=[];return e.options.interpolation.enabled==!0?t=Mt._catmullRom(i,e):t=Mt._linear(i),t}};Mt.drawIcon=function(i,e,t,n,r,s){var o=r*.5,a,l,c=Ui("rect",s.svgElements,s.svg);if(c.setAttributeNS(null,"x",e),c.setAttributeNS(null,"y",t-o),c.setAttributeNS(null,"width",n),c.setAttributeNS(null,"height",2*o),c.setAttributeNS(null,"class","vis-outline"),a=Ui("path",s.svgElements,s.svg),a.setAttributeNS(null,"class",i.className),i.style!==void 0&&a.setAttributeNS(null,"style",i.style),a.setAttributeNS(null,"d","M"+e+","+t+" L"+(e+n)+","+t),i.options.shaded.enabled==!0&&(l=Ui("path",s.svgElements,s.svg),i.options.shaded.orientation=="top"?l.setAttributeNS(null,"d","M"+e+", "+(t-o)+"L"+e+","+t+" L"+(e+n)+","+t+" L"+(e+n)+","+(t-o)):l.setAttributeNS(null,"d","M"+e+","+t+" L"+e+","+(t+o)+" L"+(e+n)+","+(t+o)+"L"+(e+n)+","+t),l.setAttributeNS(null,"class",i.className+" vis-icon-fill"),i.options.shaded.style!==void 0&&i.options.shaded.style!==""&&l.setAttributeNS(null,"style",i.options.shaded.style)),i.options.drawPoints.enabled==!0){var u={style:i.options.drawPoints.style,styles:i.options.drawPoints.styles,size:i.options.drawPoints.size,className:i.className};Ca(e+.5*n,t,u,s.svgElements,s.svg)}};Mt.drawShading=function(i,e,t,n){if(e.options.shaded.enabled==!0){var r=Number(n.svg.style.height.replace("px","")),s=Ui("path",n.svgElements,n.svg),o="L";e.options.interpolation.enabled==!0&&(o="C");var a,l=0;e.options.shaded.orientation=="top"?l=0:e.options.shaded.orientation=="bottom"?l=r:l=Math.min(Math.max(0,e.zeroPosition),r),e.options.shaded.orientation=="group"&&t!=null&&t!=null?a="M"+i[0][0]+","+i[0][1]+" "+this.serializePath(i,o,!1)+" L"+t[t.length-1][0]+","+t[t.length-1][1]+" "+this.serializePath(t,o,!0)+t[0][0]+","+t[0][1]+" Z":a="M"+i[0][0]+","+i[0][1]+" "+this.serializePath(i,o,!1)+" V"+l+" H"+i[0][0]+" Z",s.setAttributeNS(null,"class",e.className+" vis-fill"),e.options.shaded.style!==void 0&&s.setAttributeNS(null,"style",e.options.shaded.style),s.setAttributeNS(null,"d",a)}};Mt.draw=function(i,e,t){if(i!=null&&i!=null){var n=Ui("path",t.svgElements,t.svg);n.setAttributeNS(null,"class",e.className),e.style!==void 0&&n.setAttributeNS(null,"style",e.style);var r="L";e.options.interpolation.enabled==!0&&(r="C"),n.setAttributeNS(null,"d","M"+i[0][0]+","+i[0][1]+" "+this.serializePath(i,r,!1))}};Mt.serializePath=function(i,e,t){if(i.length<2)return"";var n=e,r;if(t)for(r=i.length-2;r>0;r--)n+=i[r][0]+","+i[r][1]+" ";else for(r=1;r<i.length;r++)n+=i[r][0]+","+i[r][1]+" ";return n};Mt._catmullRomUniform=function(i){var e,t,n,r,s,o,a=[];a.push([Math.round(i[0].screen_x),Math.round(i[0].screen_y)]);for(var l=1/6,c=i.length,u=0;u<c-1;u++)e=u==0?i[0]:i[u-1],t=i[u],n=i[u+1],r=u+2<c?i[u+2]:n,s={screen_x:(-e.screen_x+6*t.screen_x+n.screen_x)*l,screen_y:(-e.screen_y+6*t.screen_y+n.screen_y)*l},o={screen_x:(t.screen_x+6*n.screen_x-r.screen_x)*l,screen_y:(t.screen_y+6*n.screen_y-r.screen_y)*l},a.push([s.screen_x,s.screen_y]),a.push([o.screen_x,o.screen_y]),a.push([n.screen_x,n.screen_y]);return a};Mt._catmullRom=function(i,e){var t=e.options.interpolation.alpha;if(t==0||t===void 0)return this._catmullRomUniform(i);var n,r,s,o,a,l,c,u,h,d,f,p,m,g,v,y,b,_,w,C=[];C.push([Math.round(i[0].screen_x),Math.round(i[0].screen_y)]);for(var E=i.length,x=0;x<E-1;x++)n=x==0?i[0]:i[x-1],r=i[x],s=i[x+1],o=x+2<E?i[x+2]:s,c=Math.sqrt(Math.pow(n.screen_x-r.screen_x,2)+Math.pow(n.screen_y-r.screen_y,2)),u=Math.sqrt(Math.pow(r.screen_x-s.screen_x,2)+Math.pow(r.screen_y-s.screen_y,2)),h=Math.sqrt(Math.pow(s.screen_x-o.screen_x,2)+Math.pow(s.screen_y-o.screen_y,2)),g=Math.pow(h,t),y=Math.pow(h,2*t),v=Math.pow(u,t),b=Math.pow(u,2*t),w=Math.pow(c,t),_=Math.pow(c,2*t),d=2*_+3*w*v+b,f=2*y+3*g*v+b,p=3*w*(w+v),p>0&&(p=1/p),m=3*g*(g+v),m>0&&(m=1/m),a={screen_x:(-b*n.screen_x+d*r.screen_x+_*s.screen_x)*p,screen_y:(-b*n.screen_y+d*r.screen_y+_*s.screen_y)*p},l={screen_x:(y*r.screen_x+f*s.screen_x-b*o.screen_x)*m,screen_y:(y*r.screen_y+f*s.screen_y-b*o.screen_y)*m},a.screen_x==0&&a.screen_y==0&&(a=r),l.screen_x==0&&l.screen_y==0&&(l=s),C.push([a.screen_x,a.screen_y]),C.push([l.screen_x,l.screen_y]),C.push([s.screen_x,s.screen_y]);return C};Mt._linear=function(i){for(var e=[],t=0;t<i.length;t++)e.push([i[t].screen_x,i[t].screen_y]);return e};function ts(i,e,t,n){this.id=e;var r=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"];this.options=R.selectiveBridgeObject(r,t),this.usingDefaultStyle=i.className===void 0,this.groupsUsingDefaultStyles=n,this.zeroPosition=0,this.update(i),this.usingDefaultStyle==!0&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=i.visible===void 0?!0:i.visible}ts.prototype.setItems=function(i){i!=null?(this.itemsData=i,this.options.sort==!0&&R.insertSort(this.itemsData,function(e,t){return e.x>t.x?1:-1})):this.itemsData=[]};ts.prototype.getItems=function(){return this.itemsData};ts.prototype.setZeroPosition=function(i){this.zeroPosition=i};ts.prototype.setOptions=function(i){if(i!==void 0){var e=["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"];R.selectiveDeepExtend(e,this.options,i),typeof i.drawPoints=="function"&&(i.drawPoints={onRender:i.drawPoints}),R.mergeOptions(this.options,i,"interpolation"),R.mergeOptions(this.options,i,"drawPoints"),R.mergeOptions(this.options,i,"shaded"),i.interpolation&&typeof i.interpolation=="object"&&i.interpolation.parametrization&&(i.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:i.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}};ts.prototype.update=function(i){this.group=i,this.content=i.content||"graph",this.className=i.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=i.visible===void 0?!0:i.visible,this.style=i.style,this.setOptions(i.options)};ts.prototype.getLegend=function(i,e,t,n,r){if(t==null||t==null){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");t={svg:s,svgElements:{},options:this.options,groups:[this]}}switch((n==null||n==null)&&(n=0),(r==null||r==null)&&(r=.5*e),this.options.style){case"line":Mt.drawIcon(this,n,r,i,e,t);break;case"points":case"point":iu.drawIcon(this,n,r,i,e,t);break;case"bar":Bt.drawIcon(this,n,r,i,e,t);break}return{icon:t.svg,label:this.content,orientation:this.options.yAxisOrientation}};ts.prototype.getYRange=function(i){for(var e=i[0].y,t=i[0].y,n=0;n<i.length;n++)e=e>i[n].y?i[n].y:e,t=t<i[n].y?i[n].y:t;return{min:e,max:t,yAxisOrientation:this.options.yAxisOrientation}};function vi(i,e,t,n){this.body=i,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=t,this.options=R.extend({},this.defaultOptions),this.linegraphOptions=n,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(e)}vi.prototype=new es;vi.prototype.clear=function(){this.groups={},this.amountOfGroups=0};vi.prototype.addGroup=function(i,e){e.options.excludeFromLegend!=!0&&(Object.prototype.hasOwnProperty.call(this.groups,i)||(this.groups[i]=e),this.amountOfGroups+=1)};vi.prototype.updateGroup=function(i,e){this.groups[i]=e};vi.prototype.removeGroup=function(i){Object.prototype.hasOwnProperty.call(this.groups,i)&&(delete this.groups[i],this.amountOfGroups-=1)};vi.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)};vi.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};vi.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};vi.prototype.setOptions=function(i){var e=["enabled","orientation","icons","left","right"];R.selectiveDeepExtend(e,this.options,i)};vi.prototype.redraw=function(){var i=0,e=Object.keys(this.groups);e.sort(function(o,a){return o<a?-1:1});for(var t=0;t<e.length;t++){var n=e[t];this.groups[n].visible==!0&&(this.linegraphOptions.visibility[n]===void 0||this.linegraphOptions.visibility[n]==!0)&&i++}if(this.options[this.side].visible==!1||this.amountOfGroups==0||this.options.enabled==!1||i==0)this.hide();else{if(this.show(),this.options[this.side].position=="top-left"||this.options[this.side].position=="bottom-left"?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),this.options[this.side].position=="top-left"||this.options[this.side].position=="top-right")this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var r=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+r+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}this.options.icons==!1?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var s="";for(t=0;t<e.length;t++)n=e[t],this.groups[n].visible==!0&&(this.linegraphOptions.visibility[n]===void 0||this.linegraphOptions.visibility[n]==!0)&&(s+=this.groups[n].content+"<br />");this.dom.textArea.innerHTML=R.xss(s),this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}};vi.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var i=Object.keys(this.groups);i.sort(function(c,u){return c<u?-1:1}),gie(this.svgElements);var e=window.getComputedStyle(this.dom.frame).paddingTop,t=Number(e.replace("px","")),n=t,r=this.options.iconSize,s=.75*this.options.iconSize,o=t+.5*s+3;this.svg.style.width=r+5+t+"px";for(var a=0;a<i.length;a++){var l=i[a];this.groups[l].visible==!0&&(this.linegraphOptions.visibility[l]===void 0||this.linegraphOptions.visibility[l]==!0)&&(this.groups[l].getLegend(r,s,this.framework,n,o),o+=s+this.options.iconSpacing)}}};var Nh="__ungrouped__";function ze(i,e){this.id=Is(),this.body=i,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=R.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var t=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(n,r){t._onAdd(r.items)},update:function(n,r){t._onUpdate(r.items)},remove:function(n,r){t._onRemove(r.items)}},this.groupListeners={add:function(n,r){t._onAddGroups(r.items)},update:function(n,r){t._onUpdateGroups(r.items)},remove:function(n,r){t._onRemoveGroups(r.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(e),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){t.svg.style.left=R.option.asSize(-t.props.width),t.forceGraphUpdate=!0,t.redraw.call(t)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}ze.prototype=new es;ze.prototype._create=function(){var i=document.createElement("div");i.className="vis-line-graph",this.dom.frame=i,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",i.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new vA(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new vA(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new vi(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new vi(this.body,this.options.legend,"right",this.options.groups),this.show()};ze.prototype.setOptions=function(i){if(i){var e=["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];i.graphHeight===void 0&&i.height!==void 0?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):this.body.domProps.centerContainer.height!==void 0&&i.graphHeight!==void 0&&parseInt((i.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),R.selectiveDeepExtend(e,this.options,i),R.mergeOptions(this.options,i,"interpolation"),R.mergeOptions(this.options,i,"drawPoints"),R.mergeOptions(this.options,i,"shaded"),R.mergeOptions(this.options,i,"legend"),i.interpolation&&typeof i.interpolation=="object"&&i.interpolation.parametrization&&(i.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:i.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&i.dataAxis!==void 0&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&i.legend!==void 0&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),Object.prototype.hasOwnProperty.call(this.groups,Nh)&&this.groups[Nh].setOptions(i)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))};ze.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};ze.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};ze.prototype.setItems=function(i){var e=this,t,n=this.itemsData;if(!i)this.itemsData=null;else if(cr(i))this.itemsData=Sa(i);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(n&&(R.forEach(this.itemListeners,function(s,o){n.off(o,s)}),n.dispose(),t=n.getIds(),this._onRemove(t)),this.itemsData){var r=this.id;R.forEach(this.itemListeners,function(s,o){e.itemsData.on(o,s,r)}),t=this.itemsData.getIds(),this._onAdd(t)}};ze.prototype.setGroups=function(i){var e=this,t;if(this.groupsData){R.forEach(this.groupListeners,function(s,o){e.groupsData.off(o,s)}),t=this.groupsData.getIds(),this.groupsData=null;for(var n=0;n<t.length;n++)this._removeGroup(t[n])}if(!i)this.groupsData=null;else if(cr(i))this.groupsData=i;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var r=this.id;R.forEach(this.groupListeners,function(s,o){e.groupsData.on(o,s,r)}),t=this.groupsData.getIds(),this._onAddGroups(t)}};ze.prototype._onUpdate=function(i){this._updateAllGroupData(i)};ze.prototype._onAdd=function(i){this._onUpdate(i)};ze.prototype._onRemove=function(i){this._onUpdate(i)};ze.prototype._onUpdateGroups=function(i){this._updateAllGroupData(null,i)};ze.prototype._onAddGroups=function(i){this._onUpdateGroups(i)};ze.prototype._onRemoveGroups=function(i){for(var e=0;e<i.length;e++)this._removeGroup(i[e]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})};ze.prototype._removeGroup=function(i){Object.prototype.hasOwnProperty.call(this.groups,i)&&(this.groups[i].options.yAxisOrientation=="right"?(this.yAxisRight.removeGroup(i),this.legendRight.removeGroup(i),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(i),this.legendLeft.removeGroup(i),this.legendLeft.redraw()),delete this.groups[i])};ze.prototype._updateGroup=function(i,e){Object.prototype.hasOwnProperty.call(this.groups,e)?(this.groups[e].update(i),this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.updateGroup(e,this.groups[e]),this.legendRight.updateGroup(e,this.groups[e]),this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e)):(this.yAxisLeft.updateGroup(e,this.groups[e]),this.legendLeft.updateGroup(e,this.groups[e]),this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e))):(this.groups[e]=new ts(i,e,this.options,this.groupsUsingDefaultStyles),this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.addGroup(e,this.groups[e]),this.legendRight.addGroup(e,this.groups[e])):(this.yAxisLeft.addGroup(e,this.groups[e]),this.legendLeft.addGroup(e,this.groups[e]))),this.legendLeft.redraw(),this.legendRight.redraw()};ze.prototype._updateAllGroupData=function(i,e){if(this.itemsData!=null){var t={},n=this.itemsData.get(),r=this.itemsData.idProp,s={};i&&i.map(function(g){s[g]=g});for(var o={},a=0;a<n.length;a++){var l=n[a],c=l.group;c==null&&(c=Nh),Object.prototype.hasOwnProperty.call(o,c)?o[c]++:o[c]=1}var u={};if(!e&&i){for(c in this.groups)if(Object.prototype.hasOwnProperty.call(this.groups,c)){m=this.groups[c];var h=m.getItems();t[c]=h.filter(function(g){return u[g[r]]=g[r],g[r]!==s[g[r]]});var d=o[c];o[c]-=t[c].length,t[c].length<d&&(t[c][d-1]={})}}for(a=0;a<n.length;a++)if(l=n[a],c=l.group,c==null&&(c=Nh),!(!e&&i&&l[r]!==s[l[r]]&&Object.prototype.hasOwnProperty.call(u,l[r]))){Object.prototype.hasOwnProperty.call(t,c)||(t[c]=new Array(o[c]));var f=R.bridgeObject(l);f.x=R.convert(l.x,"Date"),f.end=R.convert(l.end,"Date"),f.orginalY=l.y,f.y=Number(l.y),f[r]=l[r];var p=t[c].length-o[c]--;t[c][p]=f}for(c in this.groups)!Object.prototype.hasOwnProperty.call(this.groups,c)||Object.prototype.hasOwnProperty.call(t,c)||(t[c]=new Array(0));for(c in t)if(Object.prototype.hasOwnProperty.call(t,c))if(t[c].length==0)Object.prototype.hasOwnProperty.call(this.groups,c)&&this._removeGroup(c);else{var m=void 0;this.groupsData!=null&&(m=this.groupsData.get(c)),m==null&&(m={id:c,content:this.options.defaultGroup+c}),this._updateGroup(m,c),this.groups[c].setItems(t[c])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}};ze.prototype.redraw=function(){var i=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,i=this._isResized()||i;var e=this.body.range.end-this.body.range.start,t=e!=this.lastVisibleInterval;if(this.lastVisibleInterval=e,i==!0&&(this.svg.style.width=R.option.asSize(3*this.props.width),this.svg.style.left=R.option.asSize(-this.props.width),((this.options.height+"").indexOf("%")!=-1||this.updateSVGheightOnResize==!0)&&(this.updateSVGheight=!0)),this.updateSVGheight==!0?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",i==!0||t==!0||this.abortedGraphUpdate==!0||this.forceGraphUpdate==!0)i=this._updateGraph()||i,this.forceGraphUpdate=!1,this.lastStart=this.body.range.start,this.svg.style.left=-this.props.width+"px";else if(this.lastStart!=0){var n=this.body.range.start-this.lastStart,r=this.body.range.end-this.body.range.start;if(this.props.width!=0){var s=this.props.width/r,o=n*s;this.svg.style.left=-this.props.width-o+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),i};ze.prototype._getSortedGroupIds=function(){var i=[];for(var e in this.groups)if(Object.prototype.hasOwnProperty.call(this.groups,e)){var t=this.groups[e];t.visible==!0&&(this.options.groups.visibility[e]===void 0||this.options.groups.visibility[e]==!0)&&i.push({id:e,zIndex:t.options.zIndex})}R.insertSort(i,function(s,o){var a=s.zIndex,l=o.zIndex;return a===void 0&&(a=0),l===void 0&&(l=0),a==l?0:a<l?-1:1});for(var n=new Array(i.length),r=0;r<i.length;r++)n[r]=i[r].id;return n};ze.prototype._updateGraph=function(){if(Or(this.svgElements),this.props.width!=0&&this.itemsData!=null){var i,e,t={},n=!1,r=this.body.util.toGlobalTime(-this.body.domProps.root.width),s=this.body.util.toGlobalTime(2*this.body.domProps.root.width),o=this._getSortedGroupIds();if(o.length>0){var a={};for(this._getRelevantData(o,a,r,s),this._applySampling(o,a),e=0;e<o.length;e++)this._convertXcoordinates(a[o[e]]);if(this._getYRanges(o,a,t),n=this._updateYAxis(o,t),n==!0)return Ei(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var l=void 0;for(e=0;e<o.length;e++)i=this.groups[o[e]],this.options.stack===!0&&this.options.style==="line"&&(i.options.excludeFromStacking==null||!i.options.excludeFromStacking)&&(l!=null&&(this._stack(a[i.id],a[l.id]),i.options.shaded.enabled==!0&&i.options.shaded.orientation!=="group"&&(i.options.shaded.orientation=="top"&&l.options.shaded.orientation!=="group"?(l.options.shaded.orientation="group",l.options.shaded.groupId=i.id):(i.options.shaded.orientation="group",i.options.shaded.groupId=l.id))),l=i),this._convertYcoordinates(a[o[e]],i);var c={};for(e=0;e<o.length;e++)if(i=this.groups[o[e]],i.options.style==="line"&&i.options.shaded.enabled==!0){var u=a[o[e]];if(u==null||u.length==0)continue;if(Object.prototype.hasOwnProperty.call(c,o[e])||(c[o[e]]=Mt.calcPath(u,i)),i.options.shaded.orientation==="group"){var h=i.options.shaded.groupId;if(o.indexOf(h)===-1){console.log(i.id+": Unknown shading group target given:"+h);continue}Object.prototype.hasOwnProperty.call(c,h)||(c[h]=Mt.calcPath(a[h],this.groups[h])),Mt.drawShading(c[o[e]],i,c[h],this.framework)}else Mt.drawShading(c[o[e]],i,void 0,this.framework)}for(Bt.draw(o,a,this.framework),e=0;e<o.length;e++)if(i=this.groups[o[e]],a[o[e]].length>0)switch(i.options.style){case"line":Object.prototype.hasOwnProperty.call(c,o[e])||(c[o[e]]=Mt.calcPath(a[o[e]],i)),Mt.draw(c[o[e]],i,this.framework);case"point":case"points":(i.options.style=="point"||i.options.style=="points"||i.options.drawPoints.enabled==!0)&&iu.draw(a[o[e]],i,this.framework);break}}}return Ei(this.svgElements),!1};ze.prototype._stack=function(i,e){var t,n,r,s,o;t=0;for(var a=0;a<i.length;a++){s=void 0,o=void 0;for(var l=t;l<e.length;l++)if(e[l].x===i[a].x){s=e[l],o=e[l],t=l;break}else if(e[l].x>i[a].x){o=e[l],l==0?s=o:s=e[l-1],t=l;break}o===void 0&&(s=e[e.length-1],o=e[e.length-1]),n=o.x-s.x,r=o.y-s.y,n==0?i[a].y=i[a].orginalY+o.y:i[a].y=i[a].orginalY+r/n*(i[a].x-s.x)+s.y}};ze.prototype._getRelevantData=function(i,e,t,n){var r,s,o,a;if(i.length>0)for(s=0;s<i.length;s++){r=this.groups[i[s]];var l=r.getItems();if(r.options.sort==!0){var c=function(f,p){return f.getTime()==p.getTime()?0:f<p?-1:1},u=Math.max(0,R.binarySearchValue(l,t,"x","before",c)),h=Math.min(l.length,R.binarySearchValue(l,n,"x","after",c)+1);h<=0&&(h=l.length);var d=new Array(h-u);for(o=u;o<h;o++)a=r.itemsData[o],d[o-u]=a;e[i[s]]=d}else e[i[s]]=r.itemsData}};ze.prototype._applySampling=function(i,e){var t;if(i.length>0){for(var n=0;n<i.length;n++)if(t=this.groups[i[n]],t.options.sampling==!0){var r=e[i[n]];if(r.length>0){var s=1,o=r.length,a=this.body.util.toGlobalScreen(r[r.length-1].x)-this.body.util.toGlobalScreen(r[0].x),l=o/a;s=Math.min(Math.ceil(.2*o),Math.max(1,Math.round(l)));for(var c=new Array(o),u=0;u<o;u+=s){var h=Math.round(u/s);c[h]=r[u]}e[i[n]]=c.splice(0,Math.round(o/s))}}}};ze.prototype._getYRanges=function(i,e,t){var n,r,s,o=[],a=[],l;if(i.length>0){for(s=0;s<i.length;s++)n=e[i[s]],l=this.groups[i[s]].options,n.length>0&&(r=this.groups[i[s]],l.stack===!0&&l.style==="bar"?l.yAxisOrientation==="left"?o=o.concat(n):a=a.concat(n):t[i[s]]=r.getYRange(n,i[s]));Bt.getStackedYRange(o,t,i,"__barStackLeft","left"),Bt.getStackedYRange(a,t,i,"__barStackRight","right")}};ze.prototype._updateYAxis=function(i,e){var t=!1,n=!1,r=!1,s=1e9,o=1e9,a=-1e9,l=-1e9,c,u;if(i.length>0){for(var h=0;h<i.length;h++){var d=this.groups[i[h]];d&&d.options.yAxisOrientation!="right"?(n=!0,s=1e9,a=-1e9):d&&d.options.yAxisOrientation&&(r=!0,o=1e9,l=-1e9)}for(h=0;h<i.length;h++)!Object.prototype.hasOwnProperty.call(e,i[h])||e[i[h]].ignore===!0||(c=e[i[h]].min,u=e[i[h]].max,e[i[h]].yAxisOrientation!="right"?(n=!0,s=s>c?c:s,a=a<u?u:a):(r=!0,o=o>c?c:o,l=l<u?u:l));n==!0&&this.yAxisLeft.setRange(s,a),r==!0&&this.yAxisRight.setRange(o,l)}t=this._toggleAxisVisiblity(n,this.yAxisLeft)||t,t=this._toggleAxisVisiblity(r,this.yAxisRight)||t,r==!0&&n==!0?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!n,this.yAxisRight.masterAxis=this.yAxisLeft,this.yAxisRight.master==!1?(r==!0?this.yAxisLeft.lineOffset=this.yAxisRight.width:this.yAxisLeft.lineOffset=0,t=this.yAxisLeft.redraw()||t,t=this.yAxisRight.redraw()||t):t=this.yAxisRight.redraw()||t;var f=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(h=0;h<f.length;h++)i.indexOf(f[h])!=-1&&i.splice(i.indexOf(f[h]),1);return t};ze.prototype._toggleAxisVisiblity=function(i,e){var t=!1;return i==!1?e.dom.frame.parentNode&&e.hidden==!1&&(e.hide(),t=!0):!e.dom.frame.parentNode&&e.hidden==!0&&(e.show(),t=!0),t};ze.prototype._convertXcoordinates=function(i){for(var e=this.body.util.toScreen,t=0;t<i.length;t++)i[t].screen_x=e(i[t].x)+this.props.width,i[t].screen_y=i[t].y,i[t].end!=null?i[t].screen_end=e(i[t].end)+this.props.width:i[t].screen_end=void 0};ze.prototype._convertYcoordinates=function(i,e){var t=this.yAxisLeft,n=Number(this.svg.style.height.replace("px",""));e.options.yAxisOrientation=="right"&&(t=this.yAxisRight);for(var r=0;r<i.length;r++)i[r].screen_y=Math.round(t.convertValue(i[r].y));e.setZeroPosition(Math.min(n,t.convertValue(0)))};let ue="string",Te="boolean",$e="number",bie="array",Co="date",Ze="object",wie="dom",To="moment",yA="any",xie={configure:{enabled:{boolean:Te},filter:{boolean:Te,function:"function"},container:{dom:wie},__type__:{object:Ze,boolean:Te,function:"function"}},alignCurrentTime:{string:ue,undefined:"undefined"},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:ue},sort:{boolean:Te},sampling:{boolean:Te},stack:{boolean:Te},graphHeight:{string:ue,number:$e},shaded:{enabled:{boolean:Te},orientation:{string:["bottom","top","zero","group"]},groupId:{object:Ze},__type__:{boolean:Te,object:Ze}},style:{string:["line","bar","points"]},barChart:{width:{number:$e},minWidth:{number:$e},sideBySide:{boolean:Te},align:{string:["left","center","right"]},__type__:{object:Ze}},interpolation:{enabled:{boolean:Te},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:$e},__type__:{object:Ze,boolean:Te}},drawPoints:{enabled:{boolean:Te},onRender:{function:"function"},size:{number:$e},style:{string:["square","circle"]},__type__:{object:Ze,boolean:Te,function:"function"}},dataAxis:{showMinorLabels:{boolean:Te},showMajorLabels:{boolean:Te},showWeekScale:{boolean:Te},icons:{boolean:Te},width:{string:ue,number:$e},visible:{boolean:Te},alignZeros:{boolean:Te},left:{range:{min:{number:$e,undefined:"undefined"},max:{number:$e,undefined:"undefined"},__type__:{object:Ze}},format:{function:"function"},title:{text:{string:ue,number:$e,undefined:"undefined"},style:{string:ue,undefined:"undefined"},__type__:{object:Ze}},__type__:{object:Ze}},right:{range:{min:{number:$e,undefined:"undefined"},max:{number:$e,undefined:"undefined"},__type__:{object:Ze}},format:{function:"function"},title:{text:{string:ue,number:$e,undefined:"undefined"},style:{string:ue,undefined:"undefined"},__type__:{object:Ze}},__type__:{object:Ze}},__type__:{object:Ze}},legend:{enabled:{boolean:Te},icons:{boolean:Te},left:{visible:{boolean:Te},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:Ze}},right:{visible:{boolean:Te},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:Ze}},__type__:{object:Ze,boolean:Te}},groups:{visibility:{any:yA},__type__:{object:Ze}},autoResize:{boolean:Te},throttleRedraw:{number:$e},clickToUse:{boolean:Te},end:{number:$e,date:Co,string:ue,moment:To},format:{minorLabels:{millisecond:{string:ue,undefined:"undefined"},second:{string:ue,undefined:"undefined"},minute:{string:ue,undefined:"undefined"},hour:{string:ue,undefined:"undefined"},weekday:{string:ue,undefined:"undefined"},day:{string:ue,undefined:"undefined"},week:{string:ue,undefined:"undefined"},month:{string:ue,undefined:"undefined"},quarter:{string:ue,undefined:"undefined"},year:{string:ue,undefined:"undefined"},__type__:{object:Ze}},majorLabels:{millisecond:{string:ue,undefined:"undefined"},second:{string:ue,undefined:"undefined"},minute:{string:ue,undefined:"undefined"},hour:{string:ue,undefined:"undefined"},weekday:{string:ue,undefined:"undefined"},day:{string:ue,undefined:"undefined"},week:{string:ue,undefined:"undefined"},month:{string:ue,undefined:"undefined"},quarter:{string:ue,undefined:"undefined"},year:{string:ue,undefined:"undefined"},__type__:{object:Ze}},__type__:{object:Ze}},moment:{function:"function"},height:{string:ue,number:$e},hiddenDates:{start:{date:Co,number:$e,string:ue,moment:To},end:{date:Co,number:$e,string:ue,moment:To},repeat:{string:ue},__type__:{object:Ze,array:bie}},locale:{string:ue},locales:{__any__:{any:yA},__type__:{object:Ze}},max:{date:Co,number:$e,string:ue,moment:To},maxHeight:{number:$e,string:ue},maxMinorChars:{number:$e},min:{date:Co,number:$e,string:ue,moment:To},minHeight:{number:$e,string:ue},moveable:{boolean:Te},multiselect:{boolean:Te},orientation:{string:ue},showCurrentTime:{boolean:Te},showMajorLabels:{boolean:Te},showMinorLabels:{boolean:Te},showWeekScale:{boolean:Te},snap:{function:"function",null:"null"},start:{date:Co,number:$e,string:ue,moment:To},timeAxis:{scale:{string:ue,undefined:"undefined"},step:{number:$e,undefined:"undefined"},__type__:{object:Ze}},width:{string:ue,number:$e},zoomable:{boolean:Te},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:$e},zoomMin:{number:$e},zIndex:{number:$e},__type__:{object:Ze}},Sie={global:{alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",quarter:"[Q]Q",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",quarter:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,showWeekScale:!1,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};function gr(i,e,t,n){if(!(Array.isArray(t)||cr(t))&&t instanceof Object){var r=n;n=t,t=r}n&&n.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var s=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:ti,width:null,height:null,maxHeight:null,minHeight:null},this.options=R.deepExtend({},this.defaultOptions),this._create(i),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale(){return s.timeAxis.step.scale},getStep(){return s.timeAxis.step.step},toScreen:s._toScreen.bind(s),toGlobalScreen:s._toGlobalScreen.bind(s),toTime:s._toTime.bind(s),toGlobalTime:s._toGlobalTime.bind(s)}},this.range=new Hd(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new Mh(this.body),this.components.push(this.timeAxis),this.currentTime=new o$(this.body),this.components.push(this.currentTime),this.linegraph=new ze(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(o){s.emit("click",s.getEventProperties(o))}),this.on("doubletap",function(o){s.emit("doubleClick",s.getEventProperties(o))}),this.dom.root.oncontextmenu=function(o){s.emit("contextmenu",s.getEventProperties(o))},this.initialFitDone=!1,this.on("changed",function(){if(s.itemsData!=null){if(!s.initialFitDone&&!s.options.rollingMode)if(s.initialFitDone=!0,s.options.start!=null||s.options.end!=null){if(s.options.start==null||s.options.end==null)var o=s.getItemRange();var a=s.options.start!=null?s.options.start:o.min,l=s.options.end!=null?s.options.end:o.max;s.setWindow(a,l,{animation:!1})}else s.fit({animation:!1});!s.initialDrawDone&&(s.initialRangeChangeDone||!s.options.start&&!s.options.end||s.options.rollingMode)&&(s.initialDrawDone=!0,s.dom.root.style.visibility="visible",s.dom.loadingScreen.parentNode.removeChild(s.dom.loadingScreen),s.options.onInitialDrawComplete&&setTimeout(()=>s.options.onInitialDrawComplete(),0))}}),n&&this.setOptions(n),t&&this.setGroups(t),e&&this.setItems(e),this._redraw()}gr.prototype=new ra;gr.prototype.setOptions=function(i){Qe.validate(i,xie)===!0&&console.log("%cErrors have been found in the supplied options object.",kh),ra.prototype.setOptions.call(this,i)};gr.prototype.setItems=function(i){var e=this.itemsData==null,t;if(i?cr(i)?t=Sa(i):t=Sa(new xa(i)):t=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=t,this.linegraph&&this.linegraph.setItems(t!=null?t.rawDS:null),e)if(this.options.start!=null||this.options.end!=null){var n=this.options.start!=null?this.options.start:null,r=this.options.end!=null?this.options.end:null;this.setWindow(n,r,{animation:!1})}else this.fit({animation:!1})};gr.prototype.setGroups=function(i){var e;i?cr(i)?e=i:e=new xa(i):e=null,this.groupsData=e,this.linegraph.setGroups(e)};gr.prototype.getLegend=function(i,e,t){return e===void 0&&(e=15),t===void 0&&(t=15),this.linegraph.groups[i]!==void 0?this.linegraph.groups[i].getLegend(e,t):"cannot find group:'"+i+"'"};gr.prototype.isGroupVisible=function(i){return this.linegraph.groups[i]!==void 0?this.linegraph.groups[i].visible&&(this.linegraph.options.groups.visibility[i]===void 0||this.linegraph.options.groups.visibility[i]==!0):!1};gr.prototype.getDataRange=function(){var i=null,e=null;for(var t in this.linegraph.groups)if(!(!Object.prototype.hasOwnProperty.call(this.linegraph.groups,t)||this.linegraph.groups[t].visible!==!0))for(var n=0;n<this.linegraph.groups[t].itemsData.length;n++){var r=this.linegraph.groups[t].itemsData[n],s=R.convert(r.x,"Date").valueOf();i=i==null||i>s?s:i,e=e==null||e<s?s:e}return{min:i!=null?new Date(i):null,max:e!=null?new Date(e):null}};gr.prototype.getEventProperties=function(i){var e=i.center?i.center.x:i.clientX,t=i.center?i.center.y:i.clientY,n=e-R.getAbsoluteLeft(this.dom.centerContainer),r=t-R.getAbsoluteTop(this.dom.centerContainer),s=this._toTime(n),o=lx.customTimeFromTarget(i),a=R.getTarget(i),l=null;R.hasParent(a,this.timeAxis.dom.foreground)||this.timeAxis2&&R.hasParent(a,this.timeAxis2.dom.foreground)?l="axis":R.hasParent(a,this.linegraph.yAxisLeft.dom.frame)||R.hasParent(a,this.linegraph.yAxisRight.dom.frame)?l="data-axis":R.hasParent(a,this.linegraph.legendLeft.dom.frame)||R.hasParent(a,this.linegraph.legendRight.dom.frame)?l="legend":o!=null?l="custom-time":R.hasParent(a,this.currentTime.bar)?l="current-time":R.hasParent(a,this.dom.center)&&(l="background");var c=[],u=this.linegraph.yAxisLeft,h=this.linegraph.yAxisRight;return!u.hidden&&this.itemsData.length>0&&c.push(u.screenToValue(r)),!h.hidden&&this.itemsData.length>0&&c.push(h.screenToValue(r)),{event:i,customTime:o?o.options.id:null,what:l,pageX:i.srcEvent?i.srcEvent.pageX:i.pageX,pageY:i.srcEvent?i.srcEvent.pageY:i.pageY,x:n,y:r,time:s,value:c}};gr.prototype._createConfigurator=function(){return new l$(this,this.dom.container,Sie)};const Eie=vie();B.locale(Eie);function Cie({timelineRef:i,items:e,groups:t,onSelect:n,timelineOptions:r,onCurrentTimeChange:s}){const o=S.useRef(null);i??=S.useRef(null);const a=i.current;return S.useEffect(()=>{if(o.current&&!i.current){const l={width:"100%",height:"100%",stack:!1,zoomMin:36e5,zoomMax:26784e5,start:new Date("2024-01-01T00:00:00Z"),end:new Date("2024-01-02T00:00:00Z"),selectable:!0,multiselect:!0,moveable:!1,snap:(u,h,d)=>Math.round(u.valueOf()/6e4)*6e4,groupEditable:{order:!0},groupOrder:function(u,h){return u.order-h.order},groupOrderSwap:function(u,h,d){const f=u.order;u.order=h.order,h.order=f},rollingMode:{follow:!1},xss:{disabled:!0},...r};i.current=new ux(o.current,e,t,l);const c=i.current;c.on("doubleClick",function(u){const h=c.getEventProperties(u.event);if(h.what==="custom-time")c.removeCustomTime(h.customTime);else{const d=new Date().getTime();c.addCustomTime(h.time,d),c.setCustomTimeMarker("some text",d)}})}return()=>{i.current?.destroy(),i.current=null}},[t,e,i]),S.useEffect(()=>{a?.on("select",l=>{a.getEventProperties(l.event),n?.(l.items)})},[n,a,i]),I.jsx("div",{dir:"ltr",ref:o,className:"h-full w-[1000px]"})}/**
 * @license lucide-static v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tie=`
<svg
  class="lucide lucide-shield-x"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z" />
  <path d="m14.5 9.5-5 5" />
  <path d="m9.5 9.5 5 5" />
</svg>
`;/**
 * @license lucide-static v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rie=`
<svg
  class="lucide lucide-square-kanban"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <rect width="18" height="18" x="3" y="3" rx="2" />
  <path d="M8 7v7" />
  <path d="M12 7v4" />
  <path d="M16 7v9" />
</svg>
`;function Iie({mapStore:i,entities:e,select:t,onFocusEntity:n}){const{data:r}=DA(Y5),s=S.useRef(null);S.useEffect(function(){return i.subscribe((c,u)=>{if(c.selectedEntities!==u.selectedEntities){if(c.selectedEntities.length===0){s.current?.setSelection([]);return}const h=r?.filter(f=>f.entityIds.find(p=>c.selectedEntities.includes(p))).map(f=>f.id),d=s.current?.getSelection();h&&!oz(h,d)&&s.current?.setSelection(h)}})},[r,i]),S.useEffect(function(){s.current&&n&&s.current.on("click",c=>{const u=s.current?.getEventProperties(c.event);if(u&&u.what==="group-label"){const h=u.group;h&&n(h.toString())}})},[s,r,n]);const o=S.useMemo(()=>new ID,[]);if(r&&o.getIds().length===0){const l=r?.map(c=>({id:c.id,className:"w-9 h-9",content:`${Tie}`,start:c.timestamp,end:c.timestampEnd,group:c.entityIds[0]}));o.add(l)}const a=S.useMemo(()=>new ID,[]);if(r&&a.getIds().length===0)for(const l of r){const c=l.entityIds;for(const u of c){const h=u;a.get(h)||a.add({id:u,order:parseInt(u.split("-")[1]),content:`<div class="flex items-center gap-2 justify-center px-4">${u}
                              <button class="text-secondary hover:text-primary">${Rie}</button></div>`})}}return r?I.jsx(Cie,{timelineRef:s,items:o,groups:a,onSelect:l=>{const c=o.get(l),u=new Set(c.map(h=>h.group));v5(t,e,u)},timelineOptions:{verticalScroll:!0}}):I.jsx("div",{children:"Loading..."})}function Oie({map:i,store:e,entities:t,select:n,focusedEntityId:r,onFocusEntity:s}){s5(e,a=>a.selectedEntities);const o=()=>{r&&y5(i,t,r)};return I.jsxs(I.Fragment,{children:[I.jsx(S.Activity,{mode:r?"hidden":"visible",children:I.jsx("div",{className:"mr-24 flex h-full items-center justify-center p-4 py-6",children:I.jsx(Iie,{mapStore:e,entities:t,select:n,onFocusEntity:s})})}),I.jsx(S.Activity,{mode:r?"visible":"hidden",children:I.jsxs(z5,{className:"mx-auto flex h-full max-w-4xl flex-col items-center justify-start p-4",defaultValue:"details",dir:"rtl",children:[I.jsxs(nL,{className:"h-min w-min bg-secondary/50",children:[I.jsx(ob,{value:"details",children:"פרטים"}),I.jsx(ob,{value:"other-details",children:"פירוט"})]}),I.jsx(gh,{value:"details",className:"p-2",children:I.jsx(q5,{focusedEntityId:r,onFocus:o})}),I.jsxs(gh,{value:"other-details",className:"p-2",children:[I.jsxs("div",{className:"flex gap-4",children:[I.jsx(Il,{className:"mt-4 h-12 w-28"}),I.jsx(Il,{className:"mt-4 h-12 w-64"})]}),I.jsx(Il,{className:"mt-4 h-12 w-96"})]})]})})]})}const Kd=S.createContext(null);Kd.displayName="PanelGroupContext";const at={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},hx=10,Os=S.useLayoutEffect,_A=$b.useId,Pie=typeof _A=="function"?_A:()=>null;let Die=0;function dx(i=null){const e=Pie(),t=S.useRef(i||e||null);return t.current===null&&(t.current=""+Die++),i??t.current}function c$({children:i,className:e="",collapsedSize:t,collapsible:n,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:h,order:d,style:f,tagName:p="div",...m}){const g=S.useContext(Kd);if(g===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:y,getPanelSize:b,getPanelStyle:_,groupId:w,isPanelCollapsed:C,reevaluatePanelConstraints:E,registerPanel:x,resizePanel:T,unregisterPanel:O}=g,D=dx(o),A=S.useRef({callbacks:{onCollapse:c,onExpand:u,onResize:h},constraints:{collapsedSize:t,collapsible:n,defaultSize:r,maxSize:a,minSize:l},id:D,idIsFromProps:o!==void 0,order:d});S.useRef({didLogMissingDefaultSizeWarning:!1}),Os(()=>{const{callbacks:N,constraints:z}=A.current,M={...z};A.current.id=D,A.current.idIsFromProps=o!==void 0,A.current.order=d,N.onCollapse=c,N.onExpand=u,N.onResize=h,z.collapsedSize=t,z.collapsible=n,z.defaultSize=r,z.maxSize=a,z.minSize=l,(M.collapsedSize!==z.collapsedSize||M.collapsible!==z.collapsible||M.maxSize!==z.maxSize||M.minSize!==z.minSize)&&E(A.current,M)}),Os(()=>{const N=A.current;return x(N),()=>{O(N)}},[d,D,x,O]),S.useImperativeHandle(s,()=>({collapse:()=>{v(A.current)},expand:N=>{y(A.current,N)},getId(){return D},getSize(){return b(A.current)},isCollapsed(){return C(A.current)},isExpanded(){return!C(A.current)},resize:N=>{T(A.current,N)}}),[v,y,b,C,D,T]);const k=_(A.current,r);return S.createElement(p,{...m,children:i,className:e,id:D,style:{...k,...f},[at.groupId]:w,[at.panel]:"",[at.panelCollapsible]:n||void 0,[at.panelId]:D,[at.panelSize]:parseFloat(""+k.flexGrow).toFixed(1)})}const u$=S.forwardRef((i,e)=>S.createElement(c$,{...i,forwardedRef:e}));c$.displayName="Panel";u$.displayName="forwardRef(Panel)";let Lb=null,Ku=-1,Pr=null;function Aie(i,e,t){const n=(e&m$)!==0,r=(e&g$)!==0,s=(e&v$)!==0,o=(e&y$)!==0;if(e){if(n)return s?"se-resize":o?"ne-resize":"e-resize";if(r)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(i){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Mie(){Pr!==null&&(document.head.removeChild(Pr),Lb=null,Pr=null,Ku=-1)}function b_(i,e,t){var n,r;const s=Aie(i,e);if(Lb!==s){if(Lb=s,Pr===null&&(Pr=document.createElement("style"),document.head.appendChild(Pr)),Ku>=0){var o;(o=Pr.sheet)===null||o===void 0||o.removeRule(Ku)}Ku=(n=(r=Pr.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function h$(i){return i.type==="keydown"}function d$(i){return i.type.startsWith("pointer")}function f$(i){return i.type.startsWith("mouse")}function Zd(i){if(d$(i)){if(i.isPrimary)return{x:i.clientX,y:i.clientY}}else if(f$(i))return{x:i.clientX,y:i.clientY};return{x:1/0,y:1/0}}function kie(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Nie(i,e,t){return i.x<e.x+e.width&&i.x+i.width>e.x&&i.y<e.y+e.height&&i.y+i.height>e.y}function Lie(i,e){if(i===e)throw new Error("Cannot compare node with itself");const t={a:xA(i),b:xA(e)};let n;for(;t.a.at(-1)===t.b.at(-1);)i=t.a.pop(),e=t.b.pop(),n=i;ge(n,"Stacking order can only be calculated for elements with a common ancestor");const r={a:wA(bA(t.a)),b:wA(bA(t.b))};if(r.a===r.b){const s=n.childNodes,o={a:t.a.at(-1),b:t.b.at(-1)};let a=s.length;for(;a--;){const l=s[a];if(l===o.a)return 1;if(l===o.b)return-1}}return Math.sign(r.a-r.b)}const Fie=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function $ie(i){var e;const t=getComputedStyle((e=p$(i))!==null&&e!==void 0?e:i).display;return t==="flex"||t==="inline-flex"}function jie(i){const e=getComputedStyle(i);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||$ie(i))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||Fie.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function bA(i){let e=i.length;for(;e--;){const t=i[e];if(ge(t,"Missing node"),jie(t))return t}return null}function wA(i){return i&&Number(getComputedStyle(i).zIndex)||0}function xA(i){const e=[];for(;i;)e.push(i),i=p$(i);return e}function p$(i){const{parentNode:e}=i;return e&&e instanceof ShadowRoot?e.host:e}const m$=1,g$=2,v$=4,y$=8,zie=kie()==="coarse";let Vi=[],sa=!1,Dr=new Map,Qd=new Map;const _c=new Set;function Gie(i,e,t,n,r){var s;const{ownerDocument:o}=e,a={direction:t,element:e,hitAreaMargins:n,setResizeHandlerState:r},l=(s=Dr.get(o))!==null&&s!==void 0?s:0;return Dr.set(o,l+1),_c.add(a),Lh(),function(){var u;Qd.delete(i),_c.delete(a);const h=(u=Dr.get(o))!==null&&u!==void 0?u:1;if(Dr.set(o,h-1),Lh(),h===1&&Dr.delete(o),Vi.includes(a)){const d=Vi.indexOf(a);d>=0&&Vi.splice(d,1),Jd(),r("up",!0,null)}}}function qie(i){const{target:e}=i,{x:t,y:n}=Zd(i);sa=!0,fx({target:e,x:t,y:n}),Lh(),Vi.length>0&&(Fh("down",i),Jd(),i.preventDefault(),_$(e)||i.stopImmediatePropagation())}function w_(i){const{x:e,y:t}=Zd(i);if(sa&&i.type!=="pointerleave"&&i.buttons===0&&(sa=!1,Fh("up",i)),!sa){const{target:n}=i;fx({target:n,x:e,y:t})}Fh("move",i),Jd(),Vi.length>0&&i.preventDefault()}function x_(i){const{target:e}=i,{x:t,y:n}=Zd(i);Qd.clear(),sa=!1,Vi.length>0&&(i.preventDefault(),_$(e)||i.stopImmediatePropagation()),Fh("up",i),fx({target:e,x:t,y:n}),Jd(),Lh()}function _$(i){let e=i;for(;e;){if(e.hasAttribute(at.resizeHandle))return!0;e=e.parentElement}return!1}function fx({target:i,x:e,y:t}){Vi.splice(0);let n=null;(i instanceof HTMLElement||i instanceof SVGElement)&&(n=i),_c.forEach(r=>{const{element:s,hitAreaMargins:o}=r,a=s.getBoundingClientRect(),{bottom:l,left:c,right:u,top:h}=a,d=zie?o.coarse:o.fine;if(e>=c-d&&e<=u+d&&t>=h-d&&t<=l+d){if(n!==null&&document.contains(n)&&s!==n&&!s.contains(n)&&!n.contains(s)&&Lie(n,s)>0){let p=n,m=!1;for(;p&&!p.contains(s);){if(Nie(p.getBoundingClientRect(),a)){m=!0;break}p=p.parentElement}if(m)return}Vi.push(r)}})}function S_(i,e){Qd.set(i,e)}function Jd(){let i=!1,e=!1;Vi.forEach(n=>{const{direction:r}=n;r==="horizontal"?i=!0:e=!0});let t=0;Qd.forEach(n=>{t|=n}),i&&e?b_("intersection",t):i?b_("horizontal",t):e?b_("vertical",t):Mie()}let E_;function Lh(){var i;(i=E_)===null||i===void 0||i.abort(),E_=new AbortController;const e={capture:!0,signal:E_.signal};_c.size&&(sa?(Vi.length>0&&Dr.forEach((t,n)=>{const{body:r}=n;t>0&&(r.addEventListener("contextmenu",x_,e),r.addEventListener("pointerleave",w_,e),r.addEventListener("pointermove",w_,e))}),Dr.forEach((t,n)=>{const{body:r}=n;r.addEventListener("pointerup",x_,e),r.addEventListener("pointercancel",x_,e)})):Dr.forEach((t,n)=>{const{body:r}=n;t>0&&(r.addEventListener("pointerdown",qie,e),r.addEventListener("pointermove",w_,e))}))}function Fh(i,e){_c.forEach(t=>{const{setResizeHandlerState:n}=t,r=Vi.includes(t);n(i,r,e)})}function Wie(){const[i,e]=S.useState(0);return S.useCallback(()=>e(t=>t+1),[])}function ge(i,e){if(!i)throw console.error(e),Error(e)}function Hs(i,e,t=hx){return i.toFixed(t)===e.toFixed(t)?0:i>e?1:-1}function qn(i,e,t=hx){return Hs(i,e,t)===0}function hi(i,e,t){return Hs(i,e,t)===0}function Yie(i,e,t){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++){const r=i[n],s=e[n];if(!hi(r,s,t))return!1}return!0}function Yo({panelConstraints:i,panelIndex:e,size:t}){const n=i[e];ge(n!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=n;if(Hs(t,a)<0)if(s){const l=(r+a)/2;Hs(t,l)<0?t=r:t=a}else t=a;return t=Math.min(o,t),t=parseFloat(t.toFixed(hx)),t}function Cl({delta:i,initialLayout:e,panelConstraints:t,pivotIndices:n,prevLayout:r,trigger:s}){if(hi(i,0))return e;const o=[...e],[a,l]=n;ge(a!=null,"Invalid first pivot index"),ge(l!=null,"Invalid second pivot index");let c=0;if(s==="keyboard"){{const h=i<0?l:a,d=t[h];ge(d,`Panel constraints not found for index ${h}`);const{collapsedSize:f=0,collapsible:p,minSize:m=0}=d;if(p){const g=e[h];if(ge(g!=null,`Previous layout not found for panel index ${h}`),hi(g,f)){const v=m-g;Hs(v,Math.abs(i))>0&&(i=i<0?0-v:v)}}}{const h=i<0?a:l,d=t[h];ge(d,`No panel constraints found for index ${h}`);const{collapsedSize:f=0,collapsible:p,minSize:m=0}=d;if(p){const g=e[h];if(ge(g!=null,`Previous layout not found for panel index ${h}`),hi(g,m)){const v=g-f;Hs(v,Math.abs(i))>0&&(i=i<0?0-v:v)}}}}{const h=i<0?1:-1;let d=i<0?l:a,f=0;for(;;){const m=e[d];ge(m!=null,`Previous layout not found for panel index ${d}`);const v=Yo({panelConstraints:t,panelIndex:d,size:100})-m;if(f+=v,d+=h,d<0||d>=t.length)break}const p=Math.min(Math.abs(i),Math.abs(f));i=i<0?0-p:p}{let d=i<0?a:l;for(;d>=0&&d<t.length;){const f=Math.abs(i)-Math.abs(c),p=e[d];ge(p!=null,`Previous layout not found for panel index ${d}`);const m=p-f,g=Yo({panelConstraints:t,panelIndex:d,size:m});if(!hi(p,g)&&(c+=p-g,o[d]=g,c.toFixed(3).localeCompare(Math.abs(i).toFixed(3),void 0,{numeric:!0})>=0))break;i<0?d--:d++}}if(Yie(r,o))return r;{const h=i<0?l:a,d=e[h];ge(d!=null,`Previous layout not found for panel index ${h}`);const f=d+c,p=Yo({panelConstraints:t,panelIndex:h,size:f});if(o[h]=p,!hi(p,f)){let m=f-p,v=i<0?l:a;for(;v>=0&&v<t.length;){const y=o[v];ge(y!=null,`Previous layout not found for panel index ${v}`);const b=y+m,_=Yo({panelConstraints:t,panelIndex:v,size:b});if(hi(y,_)||(m-=_-y,o[v]=_),hi(m,0))break;i>0?v--:v++}}}const u=o.reduce((h,d)=>d+h,0);return hi(u,100)?o:r}function Bie({layout:i,panelsArray:e,pivotIndices:t}){let n=0,r=100,s=0,o=0;const a=t[0];ge(a!=null,"No pivot index found"),e.forEach((h,d)=>{const{constraints:f}=h,{maxSize:p=100,minSize:m=0}=f;d===a?(n=m,r=p):(s+=m,o+=p)});const l=Math.min(r,100-s),c=Math.max(n,100-o),u=i[a];return{valueMax:l,valueMin:c,valueNow:u}}function bc(i,e=document){return Array.from(e.querySelectorAll(`[${at.resizeHandleId}][data-panel-group-id="${i}"]`))}function b$(i,e,t=document){const r=bc(i,t).findIndex(s=>s.getAttribute(at.resizeHandleId)===e);return r??null}function w$(i,e,t){const n=b$(i,e,t);return n!=null?[n,n+1]:[-1,-1]}function Hie(i){return i instanceof HTMLElement?!0:typeof i=="object"&&i!==null&&"tagName"in i&&"getAttribute"in i}function x$(i,e=document){if(Hie(e)&&e.dataset.panelGroupId==i)return e;const t=e.querySelector(`[data-panel-group][data-panel-group-id="${i}"]`);return t||null}function ef(i,e=document){const t=e.querySelector(`[${at.resizeHandleId}="${i}"]`);return t||null}function Uie(i,e,t,n=document){var r,s,o,a;const l=ef(e,n),c=bc(i,n),u=l?c.indexOf(l):-1,h=(r=(s=t[u])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,d=(o=(a=t[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[h,d]}function Vie({committedValuesRef:i,eagerValuesRef:e,groupId:t,layout:n,panelDataArray:r,panelGroupElement:s,setLayout:o}){S.useRef({didWarnAboutMissingResizeHandle:!1}),Os(()=>{if(!s)return;const a=bc(t,s);for(let l=0;l<r.length-1;l++){const{valueMax:c,valueMin:u,valueNow:h}=Bie({layout:n,panelsArray:r,pivotIndices:[l,l+1]}),d=a[l];if(d!=null){const f=r[l];ge(f,`No panel data found for index "${l}"`),d.setAttribute("aria-controls",f.id),d.setAttribute("aria-valuemax",""+Math.round(c)),d.setAttribute("aria-valuemin",""+Math.round(u)),d.setAttribute("aria-valuenow",h!=null?""+Math.round(h):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[t,n,r,s]),S.useEffect(()=>{if(!s)return;const a=e.current;ge(a,"Eager values not found");const{panelDataArray:l}=a,c=x$(t,s);ge(c!=null,`No group found for id "${t}"`);const u=bc(t,s);ge(u,`No resize handles found for group id "${t}"`);const h=u.map(d=>{const f=d.getAttribute(at.resizeHandleId);ge(f,"Resize handle element has no handle id attribute");const[p,m]=Uie(t,f,l,s);if(p==null||m==null)return()=>{};const g=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const y=l.findIndex(b=>b.id===p);if(y>=0){const b=l[y];ge(b,`No panel data found for index ${y}`);const _=n[y],{collapsedSize:w=0,collapsible:C,minSize:E=0}=b.constraints;if(_!=null&&C){const x=Cl({delta:hi(_,w)?E-w:w-_,initialLayout:n,panelConstraints:l.map(T=>T.constraints),pivotIndices:w$(t,f,s),prevLayout:n,trigger:"keyboard"});n!==x&&o(x)}}break}}};return d.addEventListener("keydown",g),()=>{d.removeEventListener("keydown",g)}});return()=>{h.forEach(d=>d())}},[s,i,e,t,n,r,o])}function SA(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}function S$(i,e){const t=i==="horizontal",{x:n,y:r}=Zd(e);return t?n:r}function Xie(i,e,t,n,r){const s=t==="horizontal",o=ef(e,r);ge(o,`No resize handle element found for id "${e}"`);const a=o.getAttribute(at.groupId);ge(a,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=n;const c=S$(t,i),u=x$(a,r);ge(u,`No group element found for id "${a}"`);const h=u.getBoundingClientRect(),d=s?h.width:h.height;return(c-l)/d*100}function Kie(i,e,t,n,r,s){if(h$(i)){const o=t==="horizontal";let a=0;i.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(i.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return n==null?0:Xie(i,e,t,n,s)}function Zie({panelDataArray:i}){const e=Array(i.length),t=i.map(s=>s.constraints);let n=0,r=100;for(let s=0;s<i.length;s++){const o=t[s];ge(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;a!=null&&(n++,e[s]=a,r-=a)}for(let s=0;s<i.length;s++){const o=t[s];ge(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;if(a!=null)continue;const l=i.length-n,c=r/l;n++,e[s]=c,r-=c}return e}function Ro(i,e,t){e.forEach((n,r)=>{const s=i[r];ge(s,`Panel data not found for index ${r}`);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,h=t[l];if(h==null||n!==h){t[l]=n;const{onCollapse:d,onExpand:f,onResize:p}=o;p&&p(n,h),u&&(d||f)&&(f&&(h==null||qn(h,c))&&!qn(n,c)&&f(),d&&(h==null||!qn(h,c))&&qn(n,c)&&d())}})}function zu(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!=e[t])return!1;return!0}function Qie({defaultSize:i,dragState:e,layout:t,panelData:n,panelIndex:r,precision:s=3}){const o=t[r];let a;return o==null?a=i!=null?i.toFixed(s):"1":n.length===1?a="1":a=o.toFixed(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function Jie(i,e=10){let t=null;return(...r)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{i(...r)},e)}}function EA(i){try{if(typeof localStorage<"u")i.getItem=e=>localStorage.getItem(e),i.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),i.getItem=()=>null,i.setItem=()=>{}}}function E$(i){return`react-resizable-panels:${i}`}function C$(i){return i.map(e=>{const{constraints:t,id:n,idIsFromProps:r,order:s}=e;return r?n:s?`${s}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function T$(i,e){try{const t=E$(i),n=e.getItem(t);if(n){const r=JSON.parse(n);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function ene(i,e,t){var n,r;const s=(n=T$(i,t))!==null&&n!==void 0?n:{},o=C$(e);return(r=s[o])!==null&&r!==void 0?r:null}function tne(i,e,t,n,r){var s;const o=E$(i),a=C$(e),l=(s=T$(i,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(t.entries()),layout:n};try{r.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function CA({layout:i,panelConstraints:e}){const t=[...i],n=t.reduce((s,o)=>s+o,0);if(t.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${t.map(s=>`${s}%`).join(", ")}`);if(!hi(n,100)&&t.length>0)for(let s=0;s<e.length;s++){const o=t[s];ge(o!=null,`No layout data found for index ${s}`);const a=100/n*o;t[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=t[s];ge(o!=null,`No layout data found for index ${s}`);const a=Yo({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,t[s]=a)}if(!hi(r,0))for(let s=0;s<e.length;s++){const o=t[s];ge(o!=null,`No layout data found for index ${s}`);const a=o+r,l=Yo({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,t[s]=l,hi(r,0)))break}return t}const ine=100,Tl={getItem:i=>(EA(Tl),Tl.getItem(i)),setItem:(i,e)=>{EA(Tl),Tl.setItem(i,e)}},TA={};function R$({autoSaveId:i=null,children:e,className:t="",direction:n,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=Tl,style:c,tagName:u="div",...h}){const d=dx(s),f=S.useRef(null),[p,m]=S.useState(null),[g,v]=S.useState([]),y=Wie(),b=S.useRef({}),_=S.useRef(new Map),w=S.useRef(0),C=S.useRef({autoSaveId:i,direction:n,dragState:p,id:d,keyboardResizeBy:a,onLayout:o,storage:l}),E=S.useRef({layout:g,panelDataArray:[],panelDataArrayChanged:!1});S.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),S.useImperativeHandle(r,()=>({getId:()=>C.current.id,getLayout:()=>{const{layout:j}=E.current;return j},setLayout:j=>{const{onLayout:W}=C.current,{layout:H,panelDataArray:U}=E.current,q=CA({layout:j,panelConstraints:U.map(J=>J.constraints)});SA(H,q)||(v(q),E.current.layout=q,W&&W(q),Ro(U,q,b.current))}}),[]),Os(()=>{C.current.autoSaveId=i,C.current.direction=n,C.current.dragState=p,C.current.id=d,C.current.onLayout=o,C.current.storage=l}),Vie({committedValuesRef:C,eagerValuesRef:E,groupId:d,layout:g,panelDataArray:E.current.panelDataArray,setLayout:v,panelGroupElement:f.current}),S.useEffect(()=>{const{panelDataArray:j}=E.current;if(i){if(g.length===0||g.length!==j.length)return;let W=TA[i];W==null&&(W=Jie(tne,ine),TA[i]=W);const H=[...j],U=new Map(_.current);W(i,H,U,g,l)}},[i,g,l]),S.useEffect(()=>{});const x=S.useCallback(j=>{const{onLayout:W}=C.current,{layout:H,panelDataArray:U}=E.current;if(j.constraints.collapsible){const q=U.map(Ye=>Ye.constraints),{collapsedSize:J=0,panelSize:ne,pivotIndices:oe}=cs(U,j,H);if(ge(ne!=null,`Panel size not found for panel "${j.id}"`),!qn(ne,J)){_.current.set(j.id,ne);const Ve=Mo(U,j)===U.length-1?ne-J:J-ne,he=Cl({delta:Ve,initialLayout:H,panelConstraints:q,pivotIndices:oe,prevLayout:H,trigger:"imperative-api"});zu(H,he)||(v(he),E.current.layout=he,W&&W(he),Ro(U,he,b.current))}}},[]),T=S.useCallback((j,W)=>{const{onLayout:H}=C.current,{layout:U,panelDataArray:q}=E.current;if(j.constraints.collapsible){const J=q.map(rt=>rt.constraints),{collapsedSize:ne=0,panelSize:oe=0,minSize:Ye=0,pivotIndices:Ve}=cs(q,j,U),he=W??Ye;if(qn(oe,ne)){const rt=_.current.get(j.id),ht=rt!=null&&rt>=he?rt:he,dt=Mo(q,j)===q.length-1?oe-ht:ht-oe,Ge=Cl({delta:dt,initialLayout:U,panelConstraints:J,pivotIndices:Ve,prevLayout:U,trigger:"imperative-api"});zu(U,Ge)||(v(Ge),E.current.layout=Ge,H&&H(Ge),Ro(q,Ge,b.current))}}},[]),O=S.useCallback(j=>{const{layout:W,panelDataArray:H}=E.current,{panelSize:U}=cs(H,j,W);return ge(U!=null,`Panel size not found for panel "${j.id}"`),U},[]),D=S.useCallback((j,W)=>{const{panelDataArray:H}=E.current,U=Mo(H,j);return Qie({defaultSize:W,dragState:p,layout:g,panelData:H,panelIndex:U})},[p,g]),A=S.useCallback(j=>{const{layout:W,panelDataArray:H}=E.current,{collapsedSize:U=0,collapsible:q,panelSize:J}=cs(H,j,W);return ge(J!=null,`Panel size not found for panel "${j.id}"`),q===!0&&qn(J,U)},[]),k=S.useCallback(j=>{const{layout:W,panelDataArray:H}=E.current,{collapsedSize:U=0,collapsible:q,panelSize:J}=cs(H,j,W);return ge(J!=null,`Panel size not found for panel "${j.id}"`),!q||Hs(J,U)>0},[]),N=S.useCallback(j=>{const{panelDataArray:W}=E.current;W.push(j),W.sort((H,U)=>{const q=H.order,J=U.order;return q==null&&J==null?0:q==null?-1:J==null?1:q-J}),E.current.panelDataArrayChanged=!0,y()},[y]);Os(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:j,onLayout:W,storage:H}=C.current,{layout:U,panelDataArray:q}=E.current;let J=null;if(j){const oe=ene(j,q,H);oe&&(_.current=new Map(Object.entries(oe.expandToSizes)),J=oe.layout)}J==null&&(J=Zie({panelDataArray:q}));const ne=CA({layout:J,panelConstraints:q.map(oe=>oe.constraints)});SA(U,ne)||(v(ne),E.current.layout=ne,W&&W(ne),Ro(q,ne,b.current))}}),Os(()=>{const j=E.current;return()=>{j.layout=[]}},[]);const z=S.useCallback(j=>{let W=!1;const H=f.current;return H&&window.getComputedStyle(H,null).getPropertyValue("direction")==="rtl"&&(W=!0),function(q){q.preventDefault();const J=f.current;if(!J)return()=>null;const{direction:ne,dragState:oe,id:Ye,keyboardResizeBy:Ve,onLayout:he}=C.current,{layout:rt,panelDataArray:ht}=E.current,{initialLayout:xt}=oe??{},dt=w$(Ye,j,J);let Ge=Kie(q,j,ne,oe,Ve,J);const an=ne==="horizontal";an&&W&&(Ge=-Ge);const li=ht.map(Xe=>Xe.constraints),zt=Cl({delta:Ge,initialLayout:xt??rt,panelConstraints:li,pivotIndices:dt,prevLayout:rt,trigger:h$(q)?"keyboard":"mouse-or-touch"}),ci=!zu(rt,zt);(d$(q)||f$(q))&&w.current!=Ge&&(w.current=Ge,!ci&&Ge!==0?an?S_(j,Ge<0?m$:g$):S_(j,Ge<0?v$:y$):S_(j,0)),ci&&(v(zt),E.current.layout=zt,he&&he(zt),Ro(ht,zt,b.current))}},[]),M=S.useCallback((j,W)=>{const{onLayout:H}=C.current,{layout:U,panelDataArray:q}=E.current,J=q.map(rt=>rt.constraints),{panelSize:ne,pivotIndices:oe}=cs(q,j,U);ge(ne!=null,`Panel size not found for panel "${j.id}"`);const Ve=Mo(q,j)===q.length-1?ne-W:W-ne,he=Cl({delta:Ve,initialLayout:U,panelConstraints:J,pivotIndices:oe,prevLayout:U,trigger:"imperative-api"});zu(U,he)||(v(he),E.current.layout=he,H&&H(he),Ro(q,he,b.current))},[]),$=S.useCallback((j,W)=>{const{layout:H,panelDataArray:U}=E.current,{collapsedSize:q=0,collapsible:J}=W,{collapsedSize:ne=0,collapsible:oe,maxSize:Ye=100,minSize:Ve=0}=j.constraints,{panelSize:he}=cs(U,j,H);he!=null&&(J&&oe&&qn(he,q)?qn(q,ne)||M(j,ne):he<Ve?M(j,Ve):he>Ye&&M(j,Ye))},[M]),P=S.useCallback((j,W)=>{const{direction:H}=C.current,{layout:U}=E.current;if(!f.current)return;const q=ef(j,f.current);ge(q,`Drag handle element not found for id "${j}"`);const J=S$(H,W);m({dragHandleId:j,dragHandleRect:q.getBoundingClientRect(),initialCursorPosition:J,initialLayout:U})},[]),G=S.useCallback(()=>{m(null)},[]),V=S.useCallback(j=>{const{panelDataArray:W}=E.current,H=Mo(W,j);H>=0&&(W.splice(H,1),delete b.current[j.id],E.current.panelDataArrayChanged=!0,y())},[y]),X=S.useMemo(()=>({collapsePanel:x,direction:n,dragState:p,expandPanel:T,getPanelSize:O,getPanelStyle:D,groupId:d,isPanelCollapsed:A,isPanelExpanded:k,reevaluatePanelConstraints:$,registerPanel:N,registerResizeHandle:z,resizePanel:M,startDragging:P,stopDragging:G,unregisterPanel:V,panelGroupElement:f.current}),[x,p,n,T,O,D,d,A,k,$,N,z,M,P,G,V]),L={display:"flex",flexDirection:n==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return S.createElement(Kd.Provider,{value:X},S.createElement(u,{...h,children:e,className:t,id:s,ref:f,style:{...L,...c},[at.group]:"",[at.groupDirection]:n,[at.groupId]:d}))}const I$=S.forwardRef((i,e)=>S.createElement(R$,{...i,forwardedRef:e}));R$.displayName="PanelGroup";I$.displayName="forwardRef(PanelGroup)";function Mo(i,e){return i.findIndex(t=>t===e||t.id===e.id)}function cs(i,e,t){const n=Mo(i,e),s=n===i.length-1?[n-1,n]:[n,n+1],o=t[n];return{...e.constraints,panelSize:o,pivotIndices:s}}function nne({disabled:i,handleId:e,resizeHandler:t,panelGroupElement:n}){S.useEffect(()=>{if(i||t==null||n==null)return;const r=ef(e,n);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),t(o);break}case"F6":{o.preventDefault();const a=r.getAttribute(at.groupId);ge(a,`No group element found for id "${a}"`);const l=bc(a,n),c=b$(a,e,n);ge(c!==null,`No resize element found for id "${e}"`);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[n,i,e,t])}function O$({children:i=null,className:e="",disabled:t=!1,hitAreaMargins:n,id:r,onBlur:s,onClick:o,onDragging:a,onFocus:l,onPointerDown:c,onPointerUp:u,style:h={},tabIndex:d=0,tagName:f="div",...p}){var m,g;const v=S.useRef(null),y=S.useRef({onClick:o,onDragging:a,onPointerDown:c,onPointerUp:u});S.useEffect(()=>{y.current.onClick=o,y.current.onDragging=a,y.current.onPointerDown=c,y.current.onPointerUp=u});const b=S.useContext(Kd);if(b===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:_,groupId:w,registerResizeHandle:C,startDragging:E,stopDragging:x,panelGroupElement:T}=b,O=dx(r),[D,A]=S.useState("inactive"),[k,N]=S.useState(!1),[z,M]=S.useState(null),$=S.useRef({state:D});Os(()=>{$.current.state=D}),S.useEffect(()=>{if(t)M(null);else{const X=C(O);M(()=>X)}},[t,O,C]);const P=(m=n?.coarse)!==null&&m!==void 0?m:15,G=(g=n?.fine)!==null&&g!==void 0?g:5;S.useEffect(()=>{if(t||z==null)return;const X=v.current;ge(X,"Element ref not attached");let L=!1;return Gie(O,X,_,{coarse:P,fine:G},(W,H,U)=>{if(!H){A("inactive");return}switch(W){case"down":{A("drag"),L=!1,ge(U,'Expected event to be defined for "down" action'),E(O,U);const{onDragging:q,onPointerDown:J}=y.current;q?.(!0),J?.();break}case"move":{const{state:q}=$.current;L=!0,q!=="drag"&&A("hover"),ge(U,'Expected event to be defined for "move" action'),z(U);break}case"up":{A("hover"),x();const{onClick:q,onDragging:J,onPointerUp:ne}=y.current;J?.(!1),ne?.(),L||q?.();break}}})},[P,_,t,G,C,O,z,E,x]),nne({disabled:t,handleId:O,resizeHandler:z,panelGroupElement:T});const V={touchAction:"none",userSelect:"none"};return S.createElement(f,{...p,children:i,className:e,id:r,onBlur:()=>{N(!1),s?.()},onFocus:()=>{N(!0),l?.()},ref:v,role:"separator",style:{...V,...h},tabIndex:d,[at.groupDirection]:_,[at.groupId]:w,[at.resizeHandle]:"",[at.resizeHandleActive]:D==="drag"?"pointer":k?"keyboard":void 0,[at.resizeHandleEnabled]:!t,[at.resizeHandleId]:O,[at.resizeHandleState]:D})}O$.displayName="PanelResizeHandle";const rne=({className:i,...e})=>I.jsx(I$,{className:pe("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",i),...e}),RA=u$,sne=({withHandle:i,className:e,...t})=>I.jsx(O$,{className:pe("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",e),...t,children:i&&I.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:I.jsx(U$,{className:"h-2.5 w-2.5"})})});function gne(){const i=OA(),e=S.useRef(null),[t,n]=S.useState(!1),[{map:r,select:s,entities:o,histories:a,entitiesCluster:l,store:c}]=S.useState(f5),{data:u}=DA(rL);S.useEffect(function(){u&&(o.clear(),g5(o,u))},[u,o]);const[h,d]=S.useState(),f=async p=>{if(d(p),p){const[m,g]=p?.split("-",2),v=await W5(i,m,g);v&&_5(a,{[p]:v})}else b5(a)};return I.jsx(I.Fragment,{children:I.jsxs(fk,{className:"flex h-screen flex-col",children:[I.jsx(gk,{children:I.jsxs(rne,{direction:"vertical",children:[I.jsx(RA,{className:"relative",order:1,children:I.jsx("div",{className:"relative h-screen w-full",children:I.jsx(x5,{map:r,select:s,onViewEntity:p=>{f(p),p&&e?.current?.expand()}})})}),I.jsx(sne,{className:"hover:after:bg-sidebar-border",onClick:()=>(n(!0),e.current?.isCollapsed()?e.current?.expand():e.current?.collapse())}),I.jsx(RA,{className:pe(t&&"transition-all duration-100"),onTransitionEnd:()=>n(!1),ref:e,order:2,collapsible:!0,minSize:1,collapsedSize:1,defaultSize:40,maxSize:60,children:I.jsx(Oie,{map:r,store:c,entities:o,select:s,focusedEntityId:h,onFocusEntity:f})})]})}),I.jsx(w5,{entities:o,entitiesCluster:l})]})})}export{gne as default};
