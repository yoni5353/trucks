import{c as wt,S as Sz,p as YS,r as an,s as jb,a as fc,n as Wb,i as zb,b as BS,t as Ez,d as ih,f as Cz,e as Tz,g as HS,h as yA,j as _,k as Rz,u as _A,l as T,m as tw,o as Oz,R as iw,q as Q,v as Iz,w as Dz}from"./index-CpEYo5j7.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pz=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],qb=wt("bot",Pz);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kz=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Mz=wt("calendar",kz);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Az=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Nz=wt("chevron-down",Az);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lz=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Fz=wt("chevron-left",Lz);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $z=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],jz=wt("chevron-right",$z);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],zz=wt("circle-x",Wz);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Gz=wt("copy",qz);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],Bz=wt("crosshair",Yz);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Uz=wt("download",Hz);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xz=wt("eye",Vz);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kz=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Zz=wt("grip-vertical",Kz);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Jz=wt("info",Qz);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eq=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],tq=wt("map-pin",eq);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iq=[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]],nq=wt("map-pinned",iq);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rq=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],sq=wt("moon",rq);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oq=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],aq=wt("mouse-pointer-click",oq);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],cq=wt("panel-left",lq);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uq=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],bA=wt("search",uq);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hq=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],dq=wt("sun",hq);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fq=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],pq=wt("trending-up",fq);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mq=[["path",{d:"M14 19V7a2 2 0 0 0-2-2H9",key:"15peso"}],["path",{d:"M15 19H9",key:"18q6dt"}],["path",{d:"M19 19h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.62L18.3 9.38a1 1 0 0 0-.78-.38H14",key:"1dkp3j"}],["path",{d:"M2 13v5a1 1 0 0 0 1 1h2",key:"pkmmzz"}],["path",{d:"M4 3 2.15 5.15a.495.495 0 0 0 .35.86h2.15a.47.47 0 0 1 .35.86L3 9.02",key:"1n26pd"}],["circle",{cx:"17",cy:"19",r:"2",key:"1nxcgd"}],["circle",{cx:"7",cy:"19",r:"2",key:"gzo7y7"}]],gq=wt("truck-electric",mq);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vq=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wA=wt("x",vq);var yq=class extends Sz{constructor(i,e){super(),this.options=e,this.#i=i,this.#r=null,this.#n=YS(),this.bindMethods(),this.setOptions(e)}#i;#e=void 0;#p=void 0;#t=void 0;#o;#u;#n;#r;#m;#h;#d;#a;#l;#s;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),US(this.#e,this.options)?this.#c():this.updateResult(),this.#_())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gb(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gb(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#e.removeObserver(this)}setOptions(i){const e=this.options,t=this.#e;if(this.options=this.#i.defaultQueryOptions(i),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof an(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#e.setOptions(this.options),e._defaulted&&!jb(this.options,e)&&this.#i.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const n=this.hasListeners();n&&VS(this.#e,t,this.options,e)&&this.#c(),this.updateResult(),n&&(this.#e!==t||an(this.options.enabled,this.#e)!==an(e.enabled,this.#e)||fc(this.options.staleTime,this.#e)!==fc(e.staleTime,this.#e))&&this.#g();const r=this.#v();n&&(this.#e!==t||an(this.options.enabled,this.#e)!==an(e.enabled,this.#e)||r!==this.#s)&&this.#y(r)}getOptimisticResult(i){const e=this.#i.getQueryCache().build(this.#i,i),t=this.createResult(e,i);return bq(this,t)&&(this.#t=t,this.#u=this.options,this.#o=this.#e.state),t}getCurrentResult(){return this.#t}trackResult(i,e){return new Proxy(i,{get:(t,n)=>(this.trackProp(n),e?.(n),n==="promise"&&!this.options.experimental_prefetchInRender&&this.#n.status==="pending"&&this.#n.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(t,n))})}trackProp(i){this.#f.add(i)}getCurrentQuery(){return this.#e}refetch({...i}={}){return this.fetch({...i})}fetchOptimistic(i){const e=this.#i.defaultQueryOptions(i),t=this.#i.getQueryCache().build(this.#i,e);return t.fetch().then(()=>this.createResult(t,e))}fetch(i){return this.#c({...i,cancelRefetch:i.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#c(i){this.#x();let e=this.#e.fetch(this.options,i);return i?.throwOnError||(e=e.catch(Wb)),e}#g(){this.#b();const i=fc(this.options.staleTime,this.#e);if(zb||this.#t.isStale||!BS(i))return;const t=Ez(this.#t.dataUpdatedAt,i)+1;this.#a=ih.setTimeout(()=>{this.#t.isStale||this.updateResult()},t)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#y(i){this.#w(),this.#s=i,!(zb||an(this.options.enabled,this.#e)===!1||!BS(this.#s)||this.#s===0)&&(this.#l=ih.setInterval(()=>{(this.options.refetchIntervalInBackground||Cz.isFocused())&&this.#c()},this.#s))}#_(){this.#g(),this.#y(this.#v())}#b(){this.#a&&(ih.clearTimeout(this.#a),this.#a=void 0)}#w(){this.#l&&(ih.clearInterval(this.#l),this.#l=void 0)}createResult(i,e){const t=this.#e,n=this.options,r=this.#t,s=this.#o,o=this.#u,l=i!==t?i.state:this.#p,{state:c}=i;let u={...c},h=!1,d;if(e._optimisticResults){const S=this.hasListeners(),R=!S&&US(i,e),I=S&&VS(i,t,e,n);(R||I)&&(u={...u,...Tz(c.data,i.options)}),e._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:f,errorUpdatedAt:p,status:m}=u;d=u.data;let g=!1;if(e.placeholderData!==void 0&&d===void 0&&m==="pending"){let S;r?.isPlaceholderData&&e.placeholderData===o?.placeholderData?(S=r.data,g=!0):S=typeof e.placeholderData=="function"?e.placeholderData(this.#d?.state.data,this.#d):e.placeholderData,S!==void 0&&(m="success",d=HS(r?.data,S,e),h=!0)}if(e.select&&d!==void 0&&!g)if(r&&d===s?.data&&e.select===this.#m)d=this.#h;else try{this.#m=e.select,d=e.select(d),d=HS(r?.data,d,e),this.#h=d,this.#r=null}catch(S){this.#r=S}this.#r&&(f=this.#r,d=this.#h,p=Date.now(),m="error");const v=u.fetchStatus==="fetching",y=m==="pending",w=m==="error",b=y&&v,x=d!==void 0,E={status:m,fetchStatus:u.fetchStatus,isPending:y,isSuccess:m==="success",isError:w,isInitialLoading:b,isLoading:b,data:d,dataUpdatedAt:u.dataUpdatedAt,error:f,errorUpdatedAt:p,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>l.dataUpdateCount||u.errorUpdateCount>l.errorUpdateCount,isFetching:v,isRefetching:v&&!y,isLoadingError:w&&!x,isPaused:u.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:w&&x,isStale:nw(i,e),refetch:this.refetch,promise:this.#n,isEnabled:an(e.enabled,i)!==!1};if(this.options.experimental_prefetchInRender){const S=k=>{E.status==="error"?k.reject(E.error):E.data!==void 0&&k.resolve(E.data)},R=()=>{const k=this.#n=E.promise=YS();S(k)},I=this.#n;switch(I.status){case"pending":i.queryHash===t.queryHash&&S(I);break;case"fulfilled":(E.status==="error"||E.data!==I.value)&&R();break;case"rejected":(E.status!=="error"||E.error!==I.reason)&&R();break}}return E}updateResult(){const i=this.#t,e=this.createResult(this.#e,this.options);if(this.#o=this.#e.state,this.#u=this.options,this.#o.data!==void 0&&(this.#d=this.#e),jb(e,i))return;this.#t=e;const t=()=>{if(!i)return!0;const{notifyOnChangeProps:n}=this.options,r=typeof n=="function"?n():n;if(r==="all"||!r&&!this.#f.size)return!0;const s=new Set(r??this.#f);return this.options.throwOnError&&s.add("error"),Object.keys(this.#t).some(o=>{const a=o;return this.#t[a]!==i[a]&&s.has(a)})};this.#S({listeners:t()})}#x(){const i=this.#i.getQueryCache().build(this.#i,this.options);if(i===this.#e)return;const e=this.#e;this.#e=i,this.#p=i.state,this.hasListeners()&&(e?.removeObserver(this),i.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#_()}#S(i){yA.batch(()=>{i.listeners&&this.listeners.forEach(e=>{e(this.#t)}),this.#i.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function _q(i,e){return an(e.enabled,i)!==!1&&i.state.data===void 0&&!(i.state.status==="error"&&e.retryOnMount===!1)}function US(i,e){return _q(i,e)||i.state.data!==void 0&&Gb(i,e,e.refetchOnMount)}function Gb(i,e,t){if(an(e.enabled,i)!==!1&&fc(e.staleTime,i)!=="static"){const n=typeof t=="function"?t(i):t;return n==="always"||n!==!1&&nw(i,e)}return!1}function VS(i,e,t,n){return(i!==e||an(n.enabled,i)===!1)&&(!t.suspense||i.state.status!=="error")&&nw(i,t)}function nw(i,e){return an(e.enabled,i)!==!1&&i.isStaleByTime(fc(e.staleTime,i))}function bq(i,e){return!jb(i.getCurrentResult(),e)}var xA=_.createContext(!1),wq=()=>_.useContext(xA);xA.Provider;function xq(){let i=!1;return{clearReset:()=>{i=!1},reset:()=>{i=!0},isReset:()=>i}}var Sq=_.createContext(xq()),Eq=()=>_.useContext(Sq),Cq=(i,e)=>{(i.suspense||i.throwOnError||i.experimental_prefetchInRender)&&(e.isReset()||(i.retryOnMount=!1))},Tq=i=>{_.useEffect(()=>{i.clearReset()},[i])},Rq=({result:i,errorResetBoundary:e,throwOnError:t,query:n,suspense:r})=>i.isError&&!e.isReset()&&!i.isFetching&&n&&(r&&i.data===void 0||Rz(t,[i.error,n])),Oq=i=>{if(i.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),n=i.staleTime;i.staleTime=typeof n=="function"?(...r)=>t(n(...r)):t(n),typeof i.gcTime=="number"&&(i.gcTime=Math.max(i.gcTime,1e3))}},Iq=(i,e)=>i.isLoading&&i.isFetching&&!e,Dq=(i,e)=>i?.suspense&&e.isPending,XS=(i,e,t)=>e.fetchOptimistic(i).catch(()=>{t.clearReset()});function Pq(i,e,t){const n=wq(),r=Eq(),s=_A(),o=s.defaultQueryOptions(i);s.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=n?"isRestoring":"optimistic",Oq(o),Cq(o,r),Tq(r);const a=!s.getQueryCache().get(o.queryHash),[l]=_.useState(()=>new e(s,o)),c=l.getOptimisticResult(o),u=!n&&i.subscribed!==!1;if(_.useSyncExternalStore(_.useCallback(h=>{const d=u?l.subscribe(yA.batchCalls(h)):Wb;return l.updateResult(),d},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),_.useEffect(()=>{l.setOptions(o)},[o,l]),Dq(o,c))throw XS(o,l,r);if(Rq({result:c,errorResetBoundary:r,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;return s.getDefaultOptions().queries?._experimental_afterQuery?.(o,c),o.experimental_prefetchInRender&&!zb&&Iq(c,n)&&(a?XS(o,l,r):s.getQueryCache().get(o.queryHash)?.promise)?.catch(Wb).finally(()=>{l.updateResult()}),o.notifyOnChangeProps?c:l.trackResult(c)}function jd(i,e){return Pq(i,yq)}function KS(i,e){if(typeof i=="function")return i(e);i!=null&&(i.current=e)}function fo(...i){return e=>{let t=!1;const n=i.map(r=>{const s=KS(r,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let r=0;r<n.length;r++){const s=n[r];typeof s=="function"?s():KS(i[r],null)}}}}function ni(...i){return _.useCallback(fo(...i),i)}function Ha(i){const e=kq(i),t=_.forwardRef((n,r)=>{const{children:s,...o}=n,a=_.Children.toArray(s),l=a.find(Aq);if(l){const c=l.props.children,u=a.map(h=>h===l?_.Children.count(c)>1?_.Children.only(null):_.isValidElement(c)?c.props.children:null:h);return T.jsx(e,{...o,ref:r,children:_.isValidElement(c)?_.cloneElement(c,void 0,u):null})}return T.jsx(e,{...o,ref:r,children:s})});return t.displayName=`${i}.Slot`,t}var ml=Ha("Slot");function kq(i){const e=_.forwardRef((t,n)=>{const{children:r,...s}=t;if(_.isValidElement(r)){const o=Lq(r),a=Nq(s,r.props);return r.type!==_.Fragment&&(a.ref=n?fo(n,o):o),_.cloneElement(r,a)}return _.Children.count(r)>1?_.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var SA=Symbol("radix.slottable");function Mq(i){const e=({children:t})=>T.jsx(T.Fragment,{children:t});return e.displayName=`${i}.Slottable`,e.__radixId=SA,e}function Aq(i){return _.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===SA}function Nq(i,e){const t={...e};for(const n in e){const r=i[n],s=e[n];/^on[A-Z]/.test(n)?r&&s?t[n]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(t[n]=r):n==="style"?t[n]={...r,...s}:n==="className"&&(t[n]=[r,s].filter(Boolean).join(" "))}return{...i,...t}}function Lq(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}function EA(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var r=i.length;for(e=0;e<r;e++)i[e]&&(t=EA(i[e]))&&(n&&(n+=" "),n+=t)}else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function CA(){for(var i,e,t=0,n="",r=arguments.length;t<r;t++)(i=arguments[t])&&(e=EA(i))&&(n&&(n+=" "),n+=e);return n}const ZS=i=>typeof i=="boolean"?`${i}`:i===0?"0":i,QS=CA,rw=(i,e)=>t=>{var n;if(e?.variants==null)return QS(i,t?.class,t?.className);const{variants:r,defaultVariants:s}=e,o=Object.keys(r).map(c=>{const u=t?.[c],h=s?.[c];if(u===null)return null;const d=ZS(u)||ZS(h);return r[c][d]}),a=t&&Object.entries(t).reduce((c,u)=>{let[h,d]=u;return d===void 0||(c[h]=d),c},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:h,className:d,...f}=u;return Object.entries(f).every(p=>{let[m,g]=p;return Array.isArray(g)?g.includes({...s,...a}[m]):{...s,...a}[m]===g})?[...c,h,d]:c},[]);return QS(i,o,l,t?.class,t?.className)},cp=768;function Fq(){const[i,e]=_.useState(void 0);return _.useEffect(()=>{const t=window.matchMedia(`(max-width: ${cp-1}px)`),n=()=>{e(window.innerWidth<cp)};return t.addEventListener("change",n),e(window.innerWidth<cp),()=>t.removeEventListener("change",n)},[]),!!i}const sw="-",$q=i=>{const e=Wq(i),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=i;return{getClassGroupId:o=>{const a=o.split(sw);return a[0]===""&&a.length!==1&&a.shift(),TA(a,e)||jq(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&n[o]?[...l,...n[o]]:l}}},TA=(i,e)=>{if(i.length===0)return e.classGroupId;const t=i[0],n=e.nextPart.get(t),r=n?TA(i.slice(1),n):void 0;if(r)return r;if(e.validators.length===0)return;const s=i.join(sw);return e.validators.find(({validator:o})=>o(s))?.classGroupId},JS=/^\[(.+)\]$/,jq=i=>{if(JS.test(i)){const e=JS.exec(i)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Wq=i=>{const{theme:e,classGroups:t}=i,n={nextPart:new Map,validators:[]};for(const r in t)Yb(t[r],n,r,e);return n},Yb=(i,e,t,n)=>{i.forEach(r=>{if(typeof r=="string"){const s=r===""?e:e1(e,r);s.classGroupId=t;return}if(typeof r=="function"){if(zq(r)){Yb(r(n),e,t,n);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([s,o])=>{Yb(o,e1(e,s),t,n)})})},e1=(i,e)=>{let t=i;return e.split(sw).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},zq=i=>i.isThemeGetter,qq=i=>{if(i<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const r=(s,o)=>{t.set(s,o),e++,e>i&&(e=0,n=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=n.get(s))!==void 0)return r(s,o),o},set(s,o){t.has(s)?t.set(s,o):r(s,o)}}},Bb="!",Hb=":",Gq=Hb.length,Yq=i=>{const{prefix:e,experimentalParseClassName:t}=i;let n=r=>{const s=[];let o=0,a=0,l=0,c;for(let p=0;p<r.length;p++){let m=r[p];if(o===0&&a===0){if(m===Hb){s.push(r.slice(l,p)),l=p+Gq;continue}if(m==="/"){c=p;continue}}m==="["?o++:m==="]"?o--:m==="("?a++:m===")"&&a--}const u=s.length===0?r:r.substring(l),h=Bq(u),d=h!==u,f=c&&c>l?c-l:void 0;return{modifiers:s,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:f}};if(e){const r=e+Hb,s=n;n=o=>o.startsWith(r)?s(o.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(t){const r=n;n=s=>t({className:s,parseClassName:r})}return n},Bq=i=>i.endsWith(Bb)?i.substring(0,i.length-1):i.startsWith(Bb)?i.substring(1):i,Hq=i=>{const e=Object.fromEntries(i.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const r=[];let s=[];return n.forEach(o=>{o[0]==="["||e[o]?(r.push(...s.sort(),o),s=[]):s.push(o)}),r.push(...s.sort()),r}},Uq=i=>({cache:qq(i.cacheSize),parseClassName:Yq(i),sortModifiers:Hq(i),...$q(i)}),Vq=/\s+/,Xq=(i,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:r,sortModifiers:s}=e,o=[],a=i.trim().split(Vq);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:h,modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(u);if(h){l=u+(l.length>0?" "+l:l);continue}let g=!!m,v=n(g?p.substring(0,m):p);if(!v){if(!g){l=u+(l.length>0?" "+l:l);continue}if(v=n(p),!v){l=u+(l.length>0?" "+l:l);continue}g=!1}const y=s(d).join(":"),w=f?y+Bb:y,b=w+v;if(o.includes(b))continue;o.push(b);const x=r(v,g);for(let C=0;C<x.length;++C){const E=x[C];o.push(w+E)}l=u+(l.length>0?" "+l:l)}return l};function Kq(){let i=0,e,t,n="";for(;i<arguments.length;)(e=arguments[i++])&&(t=RA(e))&&(n&&(n+=" "),n+=t);return n}const RA=i=>{if(typeof i=="string")return i;let e,t="";for(let n=0;n<i.length;n++)i[n]&&(e=RA(i[n]))&&(t&&(t+=" "),t+=e);return t};function Zq(i,...e){let t,n,r,s=o;function o(l){const c=e.reduce((u,h)=>h(u),i());return t=Uq(c),n=t.cache.get,r=t.cache.set,s=a,a(l)}function a(l){const c=n(l);if(c)return c;const u=Xq(l,t);return r(l,u),u}return function(){return s(Kq.apply(null,arguments))}}const kt=i=>{const e=t=>t[i]||[];return e.isThemeGetter=!0,e},OA=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,IA=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Qq=/^\d+\/\d+$/,Jq=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eG=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tG=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,iG=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nG=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vo=i=>Qq.test(i),xe=i=>!!i&&!Number.isNaN(Number(i)),Hr=i=>!!i&&Number.isInteger(Number(i)),up=i=>i.endsWith("%")&&xe(i.slice(0,-1)),sr=i=>Jq.test(i),rG=()=>!0,sG=i=>eG.test(i)&&!tG.test(i),DA=()=>!1,oG=i=>iG.test(i),aG=i=>nG.test(i),lG=i=>!te(i)&&!ie(i),cG=i=>gl(i,MA,DA),te=i=>OA.test(i),Ls=i=>gl(i,AA,sG),hp=i=>gl(i,pG,xe),t1=i=>gl(i,PA,DA),uG=i=>gl(i,kA,aG),nh=i=>gl(i,NA,oG),ie=i=>IA.test(i),Wl=i=>vl(i,AA),hG=i=>vl(i,mG),i1=i=>vl(i,PA),dG=i=>vl(i,MA),fG=i=>vl(i,kA),rh=i=>vl(i,NA,!0),gl=(i,e,t)=>{const n=OA.exec(i);return n?n[1]?e(n[1]):t(n[2]):!1},vl=(i,e,t=!1)=>{const n=IA.exec(i);return n?n[1]?e(n[1]):t:!1},PA=i=>i==="position"||i==="percentage",kA=i=>i==="image"||i==="url",MA=i=>i==="length"||i==="size"||i==="bg-size",AA=i=>i==="length",pG=i=>i==="number",mG=i=>i==="family-name",NA=i=>i==="shadow",gG=()=>{const i=kt("color"),e=kt("font"),t=kt("text"),n=kt("font-weight"),r=kt("tracking"),s=kt("leading"),o=kt("breakpoint"),a=kt("container"),l=kt("spacing"),c=kt("radius"),u=kt("shadow"),h=kt("inset-shadow"),d=kt("text-shadow"),f=kt("drop-shadow"),p=kt("blur"),m=kt("perspective"),g=kt("aspect"),v=kt("ease"),y=kt("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],b=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],x=()=>[...b(),ie,te],C=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],S=()=>[ie,te,l],R=()=>[Vo,"full","auto",...S()],I=()=>[Hr,"none","subgrid",ie,te],k=()=>["auto",{span:["full",Hr,ie,te]},Hr,ie,te],M=()=>[Hr,"auto",ie,te],N=()=>["auto","min","max","fr",ie,te],F=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],q=()=>["start","end","center","stretch","center-safe","end-safe"],A=()=>["auto",...S()],z=()=>[Vo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],P=()=>[i,ie,te],G=()=>[...b(),i1,t1,{position:[ie,te]}],U=()=>["no-repeat",{repeat:["","x","y","space","round"]}],K=()=>["auto","cover","contain",dG,cG,{size:[ie,te]}],D=()=>[up,Wl,Ls],L=()=>["","none","full",c,ie,te],$=()=>["",xe,Wl,Ls],j=()=>["solid","dashed","dotted","double"],B=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>[xe,up,i1,t1],Z=()=>["","none",p,ie,te],J=()=>["none",xe,ie,te],ae=()=>["none",xe,ie,te],et=()=>[xe,ie,te],it=()=>[Vo,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[sr],breakpoint:[sr],color:[rG],container:[sr],"drop-shadow":[sr],ease:["in","out","in-out"],font:[lG],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[sr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[sr],shadow:[sr],spacing:["px",xe],text:[sr],"text-shadow":[sr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Vo,te,ie,g]}],container:["container"],columns:[{columns:[xe,te,ie,a]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:x()}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[Hr,"auto",ie,te]}],basis:[{basis:[Vo,"full","auto",a,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[xe,Vo,"auto","initial","none",te]}],grow:[{grow:["",xe,ie,te]}],shrink:[{shrink:["",xe,ie,te]}],order:[{order:[Hr,"first","last","none",ie,te]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:k()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:k()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":N()}],"auto-rows":[{"auto-rows":N()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...F(),"normal"]}],"justify-items":[{"justify-items":[...q(),"normal"]}],"justify-self":[{"justify-self":["auto",...q()]}],"align-content":[{content:["normal",...F()]}],"align-items":[{items:[...q(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...q(),{baseline:["","last"]}]}],"place-content":[{"place-content":F()}],"place-items":[{"place-items":[...q(),"baseline"]}],"place-self":[{"place-self":["auto",...q()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:A()}],mx:[{mx:A()}],my:[{my:A()}],ms:[{ms:A()}],me:[{me:A()}],mt:[{mt:A()}],mr:[{mr:A()}],mb:[{mb:A()}],ml:[{ml:A()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:z()}],w:[{w:[a,"screen",...z()]}],"min-w":[{"min-w":[a,"screen","none",...z()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...z()]}],h:[{h:["screen","lh",...z()]}],"min-h":[{"min-h":["screen","lh","none",...z()]}],"max-h":[{"max-h":["screen","lh",...z()]}],"font-size":[{text:["base",t,Wl,Ls]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,ie,hp]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",up,te]}],"font-family":[{font:[hG,te,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,ie,te]}],"line-clamp":[{"line-clamp":[xe,"none",ie,hp]}],leading:[{leading:[s,...S()]}],"list-image":[{"list-image":["none",ie,te]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ie,te]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:P()}],"text-color":[{text:P()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...j(),"wavy"]}],"text-decoration-thickness":[{decoration:[xe,"from-font","auto",ie,Ls]}],"text-decoration-color":[{decoration:P()}],"underline-offset":[{"underline-offset":[xe,"auto",ie,te]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ie,te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ie,te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:G()}],"bg-repeat":[{bg:U()}],"bg-size":[{bg:K()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Hr,ie,te],radial:["",ie,te],conic:[Hr,ie,te]},fG,uG]}],"bg-color":[{bg:P()}],"gradient-from-pos":[{from:D()}],"gradient-via-pos":[{via:D()}],"gradient-to-pos":[{to:D()}],"gradient-from":[{from:P()}],"gradient-via":[{via:P()}],"gradient-to":[{to:P()}],rounded:[{rounded:L()}],"rounded-s":[{"rounded-s":L()}],"rounded-e":[{"rounded-e":L()}],"rounded-t":[{"rounded-t":L()}],"rounded-r":[{"rounded-r":L()}],"rounded-b":[{"rounded-b":L()}],"rounded-l":[{"rounded-l":L()}],"rounded-ss":[{"rounded-ss":L()}],"rounded-se":[{"rounded-se":L()}],"rounded-ee":[{"rounded-ee":L()}],"rounded-es":[{"rounded-es":L()}],"rounded-tl":[{"rounded-tl":L()}],"rounded-tr":[{"rounded-tr":L()}],"rounded-br":[{"rounded-br":L()}],"rounded-bl":[{"rounded-bl":L()}],"border-w":[{border:$()}],"border-w-x":[{"border-x":$()}],"border-w-y":[{"border-y":$()}],"border-w-s":[{"border-s":$()}],"border-w-e":[{"border-e":$()}],"border-w-t":[{"border-t":$()}],"border-w-r":[{"border-r":$()}],"border-w-b":[{"border-b":$()}],"border-w-l":[{"border-l":$()}],"divide-x":[{"divide-x":$()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":$()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...j(),"hidden","none"]}],"divide-style":[{divide:[...j(),"hidden","none"]}],"border-color":[{border:P()}],"border-color-x":[{"border-x":P()}],"border-color-y":[{"border-y":P()}],"border-color-s":[{"border-s":P()}],"border-color-e":[{"border-e":P()}],"border-color-t":[{"border-t":P()}],"border-color-r":[{"border-r":P()}],"border-color-b":[{"border-b":P()}],"border-color-l":[{"border-l":P()}],"divide-color":[{divide:P()}],"outline-style":[{outline:[...j(),"none","hidden"]}],"outline-offset":[{"outline-offset":[xe,ie,te]}],"outline-w":[{outline:["",xe,Wl,Ls]}],"outline-color":[{outline:P()}],shadow:[{shadow:["","none",u,rh,nh]}],"shadow-color":[{shadow:P()}],"inset-shadow":[{"inset-shadow":["none",h,rh,nh]}],"inset-shadow-color":[{"inset-shadow":P()}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:P()}],"ring-offset-w":[{"ring-offset":[xe,Ls]}],"ring-offset-color":[{"ring-offset":P()}],"inset-ring-w":[{"inset-ring":$()}],"inset-ring-color":[{"inset-ring":P()}],"text-shadow":[{"text-shadow":["none",d,rh,nh]}],"text-shadow-color":[{"text-shadow":P()}],opacity:[{opacity:[xe,ie,te]}],"mix-blend":[{"mix-blend":[...B(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":B()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[xe]}],"mask-image-linear-from-pos":[{"mask-linear-from":W()}],"mask-image-linear-to-pos":[{"mask-linear-to":W()}],"mask-image-linear-from-color":[{"mask-linear-from":P()}],"mask-image-linear-to-color":[{"mask-linear-to":P()}],"mask-image-t-from-pos":[{"mask-t-from":W()}],"mask-image-t-to-pos":[{"mask-t-to":W()}],"mask-image-t-from-color":[{"mask-t-from":P()}],"mask-image-t-to-color":[{"mask-t-to":P()}],"mask-image-r-from-pos":[{"mask-r-from":W()}],"mask-image-r-to-pos":[{"mask-r-to":W()}],"mask-image-r-from-color":[{"mask-r-from":P()}],"mask-image-r-to-color":[{"mask-r-to":P()}],"mask-image-b-from-pos":[{"mask-b-from":W()}],"mask-image-b-to-pos":[{"mask-b-to":W()}],"mask-image-b-from-color":[{"mask-b-from":P()}],"mask-image-b-to-color":[{"mask-b-to":P()}],"mask-image-l-from-pos":[{"mask-l-from":W()}],"mask-image-l-to-pos":[{"mask-l-to":W()}],"mask-image-l-from-color":[{"mask-l-from":P()}],"mask-image-l-to-color":[{"mask-l-to":P()}],"mask-image-x-from-pos":[{"mask-x-from":W()}],"mask-image-x-to-pos":[{"mask-x-to":W()}],"mask-image-x-from-color":[{"mask-x-from":P()}],"mask-image-x-to-color":[{"mask-x-to":P()}],"mask-image-y-from-pos":[{"mask-y-from":W()}],"mask-image-y-to-pos":[{"mask-y-to":W()}],"mask-image-y-from-color":[{"mask-y-from":P()}],"mask-image-y-to-color":[{"mask-y-to":P()}],"mask-image-radial":[{"mask-radial":[ie,te]}],"mask-image-radial-from-pos":[{"mask-radial-from":W()}],"mask-image-radial-to-pos":[{"mask-radial-to":W()}],"mask-image-radial-from-color":[{"mask-radial-from":P()}],"mask-image-radial-to-color":[{"mask-radial-to":P()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":b()}],"mask-image-conic-pos":[{"mask-conic":[xe]}],"mask-image-conic-from-pos":[{"mask-conic-from":W()}],"mask-image-conic-to-pos":[{"mask-conic-to":W()}],"mask-image-conic-from-color":[{"mask-conic-from":P()}],"mask-image-conic-to-color":[{"mask-conic-to":P()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:G()}],"mask-repeat":[{mask:U()}],"mask-size":[{mask:K()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ie,te]}],filter:[{filter:["","none",ie,te]}],blur:[{blur:Z()}],brightness:[{brightness:[xe,ie,te]}],contrast:[{contrast:[xe,ie,te]}],"drop-shadow":[{"drop-shadow":["","none",f,rh,nh]}],"drop-shadow-color":[{"drop-shadow":P()}],grayscale:[{grayscale:["",xe,ie,te]}],"hue-rotate":[{"hue-rotate":[xe,ie,te]}],invert:[{invert:["",xe,ie,te]}],saturate:[{saturate:[xe,ie,te]}],sepia:[{sepia:["",xe,ie,te]}],"backdrop-filter":[{"backdrop-filter":["","none",ie,te]}],"backdrop-blur":[{"backdrop-blur":Z()}],"backdrop-brightness":[{"backdrop-brightness":[xe,ie,te]}],"backdrop-contrast":[{"backdrop-contrast":[xe,ie,te]}],"backdrop-grayscale":[{"backdrop-grayscale":["",xe,ie,te]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[xe,ie,te]}],"backdrop-invert":[{"backdrop-invert":["",xe,ie,te]}],"backdrop-opacity":[{"backdrop-opacity":[xe,ie,te]}],"backdrop-saturate":[{"backdrop-saturate":[xe,ie,te]}],"backdrop-sepia":[{"backdrop-sepia":["",xe,ie,te]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ie,te]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[xe,"initial",ie,te]}],ease:[{ease:["linear","initial",v,ie,te]}],delay:[{delay:[xe,ie,te]}],animate:[{animate:["none",y,ie,te]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,ie,te]}],"perspective-origin":[{"perspective-origin":x()}],rotate:[{rotate:J()}],"rotate-x":[{"rotate-x":J()}],"rotate-y":[{"rotate-y":J()}],"rotate-z":[{"rotate-z":J()}],scale:[{scale:ae()}],"scale-x":[{"scale-x":ae()}],"scale-y":[{"scale-y":ae()}],"scale-z":[{"scale-z":ae()}],"scale-3d":["scale-3d"],skew:[{skew:et()}],"skew-x":[{"skew-x":et()}],"skew-y":[{"skew-y":et()}],transform:[{transform:[ie,te,"","none","gpu","cpu"]}],"transform-origin":[{origin:x()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:it()}],"translate-x":[{"translate-x":it()}],"translate-y":[{"translate-y":it()}],"translate-z":[{"translate-z":it()}],"translate-none":["translate-none"],accent:[{accent:P()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:P()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ie,te]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ie,te]}],fill:[{fill:["none",...P()]}],"stroke-w":[{stroke:[xe,Wl,Ls,hp]}],stroke:[{stroke:["none",...P()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},vG=Zq(gG);function V(...i){return vG(CA(i))}function yG(i,e){return i.length===e.length&&i.every(t=>e.includes(t))}const Ub=rw("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),zn=_.forwardRef(({className:i,variant:e,size:t,asChild:n=!1,...r},s)=>{const o=n?ml:"button";return T.jsx(o,{className:V(Ub({variant:e,size:t,className:i})),ref:s,...r})});zn.displayName="Button";const LA=_.forwardRef(({className:i,type:e,...t},n)=>T.jsx("input",{type:e,className:V("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",i),ref:n,...t}));LA.displayName="Input";var ow=Oz();const _G=tw(ow);var bG=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ze=bG.reduce((i,e)=>{const t=Ha(`Primitive.${e}`),n=_.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),T.jsx(l,{...a,ref:s})});return n.displayName=`Primitive.${e}`,{...i,[e]:n}},{});function wG(i,e){i&&ow.flushSync(()=>i.dispatchEvent(e))}var xG="Separator",n1="horizontal",SG=["horizontal","vertical"],FA=_.forwardRef((i,e)=>{const{decorative:t,orientation:n=n1,...r}=i,s=EG(n)?n:n1,a=t?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return T.jsx(ze.div,{"data-orientation":s,...a,...r,ref:e})});FA.displayName=xG;function EG(i){return SG.includes(i)}var $A=FA;const jA=_.forwardRef(({className:i,orientation:e="horizontal",decorative:t=!0,...n},r)=>T.jsx($A,{ref:r,decorative:t,orientation:e,className:V("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",i),...n}));jA.displayName=$A.displayName;function Ze(i,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(i?.(r),t===!1||!r.defaultPrevented)return e?.(r)}}function CG(i,e){const t=_.createContext(e),n=s=>{const{children:o,...a}=s,l=_.useMemo(()=>a,Object.values(a));return T.jsx(t.Provider,{value:l,children:o})};n.displayName=i+"Provider";function r(s){const o=_.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${i}\``)}return[n,r]}function ko(i,e=[]){let t=[];function n(s,o){const a=_.createContext(o),l=t.length;t=[...t,o];const c=h=>{const{scope:d,children:f,...p}=h,m=d?.[i]?.[l]||a,g=_.useMemo(()=>p,Object.values(p));return T.jsx(m.Provider,{value:g,children:f})};c.displayName=s+"Provider";function u(h,d){const f=d?.[i]?.[l]||a,p=_.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=t.map(o=>_.createContext(o));return function(a){const l=a?.[i]||s;return _.useMemo(()=>({[`__scope${i}`]:{...a,[i]:l}}),[a,l])}};return r.scopeName=i,[n,TG(r,...e)]}function TG(...i){const e=i[0];if(i.length===1)return e;const t=()=>{const n=i.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=n.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var gs=globalThis?.document?_.useLayoutEffect:()=>{},RG=iw[" useId ".trim().toString()]||(()=>{}),OG=0;function Ai(i){const[e,t]=_.useState(RG());return gs(()=>{t(n=>n??String(OG++))},[i]),i||(e?`radix-${e}`:"")}var IG=iw[" useInsertionEffect ".trim().toString()]||gs;function cu({prop:i,defaultProp:e,onChange:t=()=>{},caller:n}){const[r,s,o]=DG({defaultProp:e,onChange:t}),a=i!==void 0,l=a?i:r;{const u=_.useRef(i!==void 0);_.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,n])}const c=_.useCallback(u=>{if(a){const h=PG(u)?u(i):u;h!==i&&o.current?.(h)}else s(u)},[a,i,s,o]);return[l,c]}function DG({defaultProp:i,onChange:e}){const[t,n]=_.useState(i),r=_.useRef(t),s=_.useRef(e);return IG(()=>{s.current=e},[e]),_.useEffect(()=>{r.current!==t&&(s.current?.(t),r.current=t)},[t,r]),[t,n,s]}function PG(i){return typeof i=="function"}function po(i){const e=_.useRef(i);return _.useEffect(()=>{e.current=i}),_.useMemo(()=>(...t)=>e.current?.(...t),[])}function kG(i,e=globalThis?.document){const t=po(i);_.useEffect(()=>{const n=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var MG="DismissableLayer",Vb="dismissableLayer.update",AG="dismissableLayer.pointerDownOutside",NG="dismissableLayer.focusOutside",r1,WA=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wd=_.forwardRef((i,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=i,c=_.useContext(WA),[u,h]=_.useState(null),d=u?.ownerDocument??globalThis?.document,[,f]=_.useState({}),p=ni(e,E=>h(E)),m=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(g),y=u?m.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,b=y>=v,x=$G(E=>{const S=E.target,R=[...c.branches].some(I=>I.contains(S));!b||R||(r?.(E),o?.(E),E.defaultPrevented||a?.())},d),C=jG(E=>{const S=E.target;[...c.branches].some(I=>I.contains(S))||(s?.(E),o?.(E),E.defaultPrevented||a?.())},d);return kG(E=>{y===c.layers.size-1&&(n?.(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},d),_.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(r1=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),s1(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=r1)}},[u,d,t,c]),_.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),s1())},[u,c]),_.useEffect(()=>{const E=()=>f({});return document.addEventListener(Vb,E),()=>document.removeEventListener(Vb,E)},[]),T.jsx(ze.div,{...l,ref:p,style:{pointerEvents:w?b?"auto":"none":void 0,...i.style},onFocusCapture:Ze(i.onFocusCapture,C.onFocusCapture),onBlurCapture:Ze(i.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Ze(i.onPointerDownCapture,x.onPointerDownCapture)})});Wd.displayName=MG;var LG="DismissableLayerBranch",FG=_.forwardRef((i,e)=>{const t=_.useContext(WA),n=_.useRef(null),r=ni(e,n);return _.useEffect(()=>{const s=n.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),T.jsx(ze.div,{...i,ref:r})});FG.displayName=LG;function $G(i,e=globalThis?.document){const t=po(i),n=_.useRef(!1),r=_.useRef(()=>{});return _.useEffect(()=>{const s=a=>{if(a.target&&!n.current){let l=function(){zA(AG,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function jG(i,e=globalThis?.document){const t=po(i),n=_.useRef(!1);return _.useEffect(()=>{const r=s=>{s.target&&!n.current&&zA(NG,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function s1(){const i=new CustomEvent(Vb);document.dispatchEvent(i)}function zA(i,e,t,{discrete:n}){const r=t.originalEvent.target,s=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(i,e,{once:!0}),n?wG(r,s):r.dispatchEvent(s)}var dp="focusScope.autoFocusOnMount",fp="focusScope.autoFocusOnUnmount",o1={bubbles:!1,cancelable:!0},WG="FocusScope",aw=_.forwardRef((i,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=i,[a,l]=_.useState(null),c=po(r),u=po(s),h=_.useRef(null),d=ni(e,m=>l(m)),f=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(n){let m=function(w){if(f.paused||!a)return;const b=w.target;a.contains(b)?h.current=b:es(h.current,{select:!0})},g=function(w){if(f.paused||!a)return;const b=w.relatedTarget;b!==null&&(a.contains(b)||es(h.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const x of w)x.removedNodes.length>0&&es(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",g);const y=new MutationObserver(v);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g),y.disconnect()}}},[n,a,f.paused]),_.useEffect(()=>{if(a){l1.add(f);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(dp,o1);a.addEventListener(dp,c),a.dispatchEvent(v),v.defaultPrevented||(zG(HG(qA(a)),{select:!0}),document.activeElement===m&&es(a))}return()=>{a.removeEventListener(dp,c),setTimeout(()=>{const v=new CustomEvent(fp,o1);a.addEventListener(fp,u),a.dispatchEvent(v),v.defaultPrevented||es(m??document.body,{select:!0}),a.removeEventListener(fp,u),l1.remove(f)},0)}}},[a,c,u,f]);const p=_.useCallback(m=>{if(!t&&!n||f.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(g&&v){const y=m.currentTarget,[w,b]=qG(y);w&&b?!m.shiftKey&&v===b?(m.preventDefault(),t&&es(w,{select:!0})):m.shiftKey&&v===w&&(m.preventDefault(),t&&es(b,{select:!0})):v===y&&m.preventDefault()}},[t,n,f.paused]);return T.jsx(ze.div,{tabIndex:-1,...o,ref:d,onKeyDown:p})});aw.displayName=WG;function zG(i,{select:e=!1}={}){const t=document.activeElement;for(const n of i)if(es(n,{select:e}),document.activeElement!==t)return}function qG(i){const e=qA(i),t=a1(e,i),n=a1(e.reverse(),i);return[t,n]}function qA(i){const e=[],t=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function a1(i,e){for(const t of i)if(!GG(t,{upTo:e}))return t}function GG(i,{upTo:e}){if(getComputedStyle(i).visibility==="hidden")return!0;for(;i;){if(e!==void 0&&i===e)return!1;if(getComputedStyle(i).display==="none")return!0;i=i.parentElement}return!1}function YG(i){return i instanceof HTMLInputElement&&"select"in i}function es(i,{select:e=!1}={}){if(i&&i.focus){const t=document.activeElement;i.focus({preventScroll:!0}),i!==t&&YG(i)&&e&&i.select()}}var l1=BG();function BG(){let i=[];return{add(e){const t=i[0];e!==t&&t?.pause(),i=c1(i,e),i.unshift(e)},remove(e){i=c1(i,e),i[0]?.resume()}}}function c1(i,e){const t=[...i],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function HG(i){return i.filter(e=>e.tagName!=="A")}var UG="Portal",lw=_.forwardRef((i,e)=>{const{container:t,...n}=i,[r,s]=_.useState(!1);gs(()=>s(!0),[]);const o=t||r&&globalThis?.document?.body;return o?_G.createPortal(T.jsx(ze.div,{...n,ref:e}),o):null});lw.displayName=UG;function VG(i,e){return _.useReducer((t,n)=>e[t][n]??t,i)}var xs=i=>{const{present:e,children:t}=i,n=XG(e),r=typeof t=="function"?t({present:n.isPresent}):_.Children.only(t),s=ni(n.ref,KG(r));return typeof t=="function"||n.isPresent?_.cloneElement(r,{ref:s}):null};xs.displayName="Presence";function XG(i){const[e,t]=_.useState(),n=_.useRef(null),r=_.useRef(i),s=_.useRef("none"),o=i?"mounted":"unmounted",[a,l]=VG(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const c=sh(n.current);s.current=a==="mounted"?c:"none"},[a]),gs(()=>{const c=n.current,u=r.current;if(u!==i){const d=s.current,f=sh(c);i?l("MOUNT"):f==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&d!==f?"ANIMATION_OUT":"UNMOUNT"),r.current=i}},[i,l]),gs(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=f=>{const m=sh(n.current).includes(CSS.escape(f.animationName));if(f.target===e&&m&&(l("ANIMATION_END"),!r.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},d=f=>{f.target===e&&(s.current=sh(n.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:_.useCallback(c=>{n.current=c?getComputedStyle(c):null,t(c)},[])}}function sh(i){return i?.animationName||"none"}function KG(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}var pp=0;function GA(){_.useEffect(()=>{const i=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",i[0]??u1()),document.body.insertAdjacentElement("beforeend",i[1]??u1()),pp++,()=>{pp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),pp--}},[])}function u1(){const i=document.createElement("span");return i.setAttribute("data-radix-focus-guard",""),i.tabIndex=0,i.style.outline="none",i.style.opacity="0",i.style.position="fixed",i.style.pointerEvents="none",i}var Pn=function(){return Pn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Pn.apply(this,arguments)};function YA(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t}function ZG(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))}var jh="right-scroll-bar-position",Wh="width-before-scroll-bar",QG="with-scroll-bars-hidden",JG="--removed-body-scroll-bar-size";function mp(i,e){return typeof i=="function"?i(e):i&&(i.current=e),i}function eY(i,e){var t=_.useState(function(){return{value:i,callback:e,facade:{get current(){return t.value},set current(n){var r=t.value;r!==n&&(t.value=n,t.callback(n,r))}}}})[0];return t.callback=e,t.facade}var tY=typeof window<"u"?_.useLayoutEffect:_.useEffect,h1=new WeakMap;function iY(i,e){var t=eY(null,function(n){return i.forEach(function(r){return mp(r,n)})});return tY(function(){var n=h1.get(t);if(n){var r=new Set(n),s=new Set(i),o=t.current;r.forEach(function(a){s.has(a)||mp(a,null)}),s.forEach(function(a){r.has(a)||mp(a,o)})}h1.set(t,i)},[i]),t}function nY(i){return i}function rY(i,e){e===void 0&&(e=nY);var t=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:i},useMedium:function(s){var o=e(s,n);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(n=!0;t.length;){var o=t;t=[],o.forEach(s)}t={push:function(a){return s(a)},filter:function(){return t}}},assignMedium:function(s){n=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(s),o=t}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return r}function sY(i){i===void 0&&(i={});var e=rY(null);return e.options=Pn({async:!0,ssr:!1},i),e}var BA=function(i){var e=i.sideCar,t=YA(i,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return _.createElement(n,Pn({},t))};BA.isSideCarExport=!0;function oY(i,e){return i.useMedium(e),BA}var HA=sY(),gp=function(){},zd=_.forwardRef(function(i,e){var t=_.useRef(null),n=_.useState({onScrollCapture:gp,onWheelCapture:gp,onTouchMoveCapture:gp}),r=n[0],s=n[1],o=i.forwardProps,a=i.children,l=i.className,c=i.removeScrollBar,u=i.enabled,h=i.shards,d=i.sideCar,f=i.noRelative,p=i.noIsolation,m=i.inert,g=i.allowPinchZoom,v=i.as,y=v===void 0?"div":v,w=i.gapMode,b=YA(i,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=d,C=iY([t,e]),E=Pn(Pn({},b),r);return _.createElement(_.Fragment,null,u&&_.createElement(x,{sideCar:HA,removeScrollBar:c,shards:h,noRelative:f,noIsolation:p,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:t,gapMode:w}),o?_.cloneElement(_.Children.only(a),Pn(Pn({},E),{ref:C})):_.createElement(y,Pn({},E,{className:l,ref:C}),a))});zd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};zd.classNames={fullWidth:Wh,zeroRight:jh};var aY=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function lY(){if(!document)return null;var i=document.createElement("style");i.type="text/css";var e=aY();return e&&i.setAttribute("nonce",e),i}function cY(i,e){i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}function uY(i){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(i)}var hY=function(){var i=0,e=null;return{add:function(t){i==0&&(e=lY())&&(cY(e,t),uY(e)),i++},remove:function(){i--,!i&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},dY=function(){var i=hY();return function(e,t){_.useEffect(function(){return i.add(e),function(){i.remove()}},[e&&t])}},UA=function(){var i=dY(),e=function(t){var n=t.styles,r=t.dynamic;return i(n,r),null};return e},fY={left:0,top:0,right:0,gap:0},vp=function(i){return parseInt(i||"",10)||0},pY=function(i){var e=window.getComputedStyle(document.body),t=e[i==="padding"?"paddingLeft":"marginLeft"],n=e[i==="padding"?"paddingTop":"marginTop"],r=e[i==="padding"?"paddingRight":"marginRight"];return[vp(t),vp(n),vp(r)]},mY=function(i){if(i===void 0&&(i="margin"),typeof window>"u")return fY;var e=pY(i),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},gY=UA(),Ma="data-scroll-locked",vY=function(i,e,t,n){var r=i.left,s=i.top,o=i.right,a=i.gap;return t===void 0&&(t="margin"),`
  .`.concat(QG,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(Ma,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(jh,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Wh,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(jh," .").concat(jh,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Wh," .").concat(Wh,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ma,`] {
    `).concat(JG,": ").concat(a,`px;
  }
`)},d1=function(){var i=parseInt(document.body.getAttribute(Ma)||"0",10);return isFinite(i)?i:0},yY=function(){_.useEffect(function(){return document.body.setAttribute(Ma,(d1()+1).toString()),function(){var i=d1()-1;i<=0?document.body.removeAttribute(Ma):document.body.setAttribute(Ma,i.toString())}},[])},_Y=function(i){var e=i.noRelative,t=i.noImportant,n=i.gapMode,r=n===void 0?"margin":n;yY();var s=_.useMemo(function(){return mY(r)},[r]);return _.createElement(gY,{styles:vY(s,!e,r,t?"":"!important")})},Xb=!1;if(typeof window<"u")try{var oh=Object.defineProperty({},"passive",{get:function(){return Xb=!0,!0}});window.addEventListener("test",oh,oh),window.removeEventListener("test",oh,oh)}catch{Xb=!1}var Xo=Xb?{passive:!1}:!1,bY=function(i){return i.tagName==="TEXTAREA"},VA=function(i,e){if(!(i instanceof Element))return!1;var t=window.getComputedStyle(i);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!bY(i)&&t[e]==="visible")},wY=function(i){return VA(i,"overflowY")},xY=function(i){return VA(i,"overflowX")},f1=function(i,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=XA(i,n);if(r){var s=KA(i,n),o=s[1],a=s[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},SY=function(i){var e=i.scrollTop,t=i.scrollHeight,n=i.clientHeight;return[e,t,n]},EY=function(i){var e=i.scrollLeft,t=i.scrollWidth,n=i.clientWidth;return[e,t,n]},XA=function(i,e){return i==="v"?wY(e):xY(e)},KA=function(i,e){return i==="v"?SY(e):EY(e)},CY=function(i,e){return i==="h"&&e==="rtl"?-1:1},TY=function(i,e,t,n,r){var s=CY(i,window.getComputedStyle(e).direction),o=s*n,a=t.target,l=e.contains(a),c=!1,u=o>0,h=0,d=0;do{if(!a)break;var f=KA(i,a),p=f[0],m=f[1],g=f[2],v=m-g-s*p;(p||v)&&XA(i,a)&&(h+=v,d+=p);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(h)<1||!u&&Math.abs(d)<1)&&(c=!0),c},ah=function(i){return"changedTouches"in i?[i.changedTouches[0].clientX,i.changedTouches[0].clientY]:[0,0]},p1=function(i){return[i.deltaX,i.deltaY]},m1=function(i){return i&&"current"in i?i.current:i},RY=function(i,e){return i[0]===e[0]&&i[1]===e[1]},OY=function(i){return`
  .block-interactivity-`.concat(i,` {pointer-events: none;}
  .allow-interactivity-`).concat(i,` {pointer-events: all;}
`)},IY=0,Ko=[];function DY(i){var e=_.useRef([]),t=_.useRef([0,0]),n=_.useRef(),r=_.useState(IY++)[0],s=_.useState(UA)[0],o=_.useRef(i);_.useEffect(function(){o.current=i},[i]),_.useEffect(function(){if(i.inert){document.body.classList.add("block-interactivity-".concat(r));var m=ZG([i.lockRef.current],(i.shards||[]).map(m1),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(r))})}}},[i.inert,i.lockRef.current,i.shards]);var a=_.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var v=ah(m),y=t.current,w="deltaX"in m?m.deltaX:y[0]-v[0],b="deltaY"in m?m.deltaY:y[1]-v[1],x,C=m.target,E=Math.abs(w)>Math.abs(b)?"h":"v";if("touches"in m&&E==="h"&&C.type==="range")return!1;var S=f1(E,C);if(!S)return!0;if(S?x=E:(x=E==="v"?"h":"v",S=f1(E,C)),!S)return!1;if(!n.current&&"changedTouches"in m&&(w||b)&&(n.current=x),!x)return!0;var R=n.current||x;return TY(R,g,m,R==="h"?w:b)},[]),l=_.useCallback(function(m){var g=m;if(!(!Ko.length||Ko[Ko.length-1]!==s)){var v="deltaY"in g?p1(g):ah(g),y=e.current.filter(function(x){return x.name===g.type&&(x.target===g.target||g.target===x.shadowParent)&&RY(x.delta,v)})[0];if(y&&y.should){g.cancelable&&g.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(m1).filter(Boolean).filter(function(x){return x.contains(g.target)}),b=w.length>0?a(g,w[0]):!o.current.noIsolation;b&&g.cancelable&&g.preventDefault()}}},[]),c=_.useCallback(function(m,g,v,y){var w={name:m,delta:g,target:v,should:y,shadowParent:PY(v)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(b){return b!==w})},1)},[]),u=_.useCallback(function(m){t.current=ah(m),n.current=void 0},[]),h=_.useCallback(function(m){c(m.type,p1(m),m.target,a(m,i.lockRef.current))},[]),d=_.useCallback(function(m){c(m.type,ah(m),m.target,a(m,i.lockRef.current))},[]);_.useEffect(function(){return Ko.push(s),i.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:d}),document.addEventListener("wheel",l,Xo),document.addEventListener("touchmove",l,Xo),document.addEventListener("touchstart",u,Xo),function(){Ko=Ko.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,Xo),document.removeEventListener("touchmove",l,Xo),document.removeEventListener("touchstart",u,Xo)}},[]);var f=i.removeScrollBar,p=i.inert;return _.createElement(_.Fragment,null,p?_.createElement(s,{styles:OY(r)}):null,f?_.createElement(_Y,{noRelative:i.noRelative,gapMode:i.gapMode}):null)}function PY(i){for(var e=null;i!==null;)i instanceof ShadowRoot&&(e=i.host,i=i.host),i=i.parentNode;return e}const kY=oY(HA,DY);var cw=_.forwardRef(function(i,e){return _.createElement(zd,Pn({},i,{ref:e,sideCar:kY}))});cw.classNames=zd.classNames;var MY=function(i){if(typeof document>"u")return null;var e=Array.isArray(i)?i[0]:i;return e.ownerDocument.body},Zo=new WeakMap,lh=new WeakMap,ch={},yp=0,ZA=function(i){return i&&(i.host||ZA(i.parentNode))},AY=function(i,e){return e.map(function(t){if(i.contains(t))return t;var n=ZA(t);return n&&i.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",i,". Doing nothing"),null)}).filter(function(t){return!!t})},NY=function(i,e,t,n){var r=AY(e,Array.isArray(i)?i:[i]);ch[t]||(ch[t]=new WeakMap);var s=ch[t],o=[],a=new Set,l=new Set(r),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};r.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(d){if(a.has(d))u(d);else try{var f=d.getAttribute(n),p=f!==null&&f!=="false",m=(Zo.get(d)||0)+1,g=(s.get(d)||0)+1;Zo.set(d,m),s.set(d,g),o.push(d),m===1&&p&&lh.set(d,!0),g===1&&d.setAttribute(t,"true"),p||d.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",d,v)}})};return u(e),a.clear(),yp++,function(){o.forEach(function(h){var d=Zo.get(h)-1,f=s.get(h)-1;Zo.set(h,d),s.set(h,f),d||(lh.has(h)||h.removeAttribute(n),lh.delete(h)),f||h.removeAttribute(t)}),yp--,yp||(Zo=new WeakMap,Zo=new WeakMap,lh=new WeakMap,ch={})}},QA=function(i,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(i)?i:[i]),r=MY(i);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live], script"))),NY(n,r,t,"aria-hidden")):function(){return null}},qd="Dialog",[JA]=ko(qd),[LY,Sn]=JA(qd),eN=i=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:r,onOpenChange:s,modal:o=!0}=i,a=_.useRef(null),l=_.useRef(null),[c,u]=cu({prop:n,defaultProp:r??!1,onChange:s,caller:qd});return T.jsx(LY,{scope:e,triggerRef:a,contentRef:l,contentId:Ai(),titleId:Ai(),descriptionId:Ai(),open:c,onOpenChange:u,onOpenToggle:_.useCallback(()=>u(h=>!h),[u]),modal:o,children:t})};eN.displayName=qd;var tN="DialogTrigger",FY=_.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=Sn(tN,t),s=ni(e,r.triggerRef);return T.jsx(ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":dw(r.open),...n,ref:s,onClick:Ze(i.onClick,r.onOpenToggle)})});FY.displayName=tN;var uw="DialogPortal",[$Y,iN]=JA(uw,{forceMount:void 0}),nN=i=>{const{__scopeDialog:e,forceMount:t,children:n,container:r}=i,s=Sn(uw,e);return T.jsx($Y,{scope:e,forceMount:t,children:_.Children.map(n,o=>T.jsx(xs,{present:t||s.open,children:T.jsx(lw,{asChild:!0,container:r,children:o})}))})};nN.displayName=uw;var Zh="DialogOverlay",rN=_.forwardRef((i,e)=>{const t=iN(Zh,i.__scopeDialog),{forceMount:n=t.forceMount,...r}=i,s=Sn(Zh,i.__scopeDialog);return s.modal?T.jsx(xs,{present:n||s.open,children:T.jsx(WY,{...r,ref:e})}):null});rN.displayName=Zh;var jY=Ha("DialogOverlay.RemoveScroll"),WY=_.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=Sn(Zh,t);return T.jsx(cw,{as:jY,allowPinchZoom:!0,shards:[r.contentRef],children:T.jsx(ze.div,{"data-state":dw(r.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),mo="DialogContent",sN=_.forwardRef((i,e)=>{const t=iN(mo,i.__scopeDialog),{forceMount:n=t.forceMount,...r}=i,s=Sn(mo,i.__scopeDialog);return T.jsx(xs,{present:n||s.open,children:s.modal?T.jsx(zY,{...r,ref:e}):T.jsx(qY,{...r,ref:e})})});sN.displayName=mo;var zY=_.forwardRef((i,e)=>{const t=Sn(mo,i.__scopeDialog),n=_.useRef(null),r=ni(e,t.contentRef,n);return _.useEffect(()=>{const s=n.current;if(s)return QA(s)},[]),T.jsx(oN,{...i,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ze(i.onCloseAutoFocus,s=>{s.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Ze(i.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Ze(i.onFocusOutside,s=>s.preventDefault())})}),qY=_.forwardRef((i,e)=>{const t=Sn(mo,i.__scopeDialog),n=_.useRef(!1),r=_.useRef(!1);return T.jsx(oN,{...i,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{i.onCloseAutoFocus?.(s),s.defaultPrevented||(n.current||t.triggerRef.current?.focus(),s.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:s=>{i.onInteractOutside?.(s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;t.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),oN=_.forwardRef((i,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:s,...o}=i,a=Sn(mo,t),l=_.useRef(null),c=ni(e,l);return GA(),T.jsxs(T.Fragment,{children:[T.jsx(aw,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:s,children:T.jsx(Wd,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":dw(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),T.jsxs(T.Fragment,{children:[T.jsx(GY,{titleId:a.titleId}),T.jsx(BY,{contentRef:l,descriptionId:a.descriptionId})]})]})}),hw="DialogTitle",aN=_.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=Sn(hw,t);return T.jsx(ze.h2,{id:r.titleId,...n,ref:e})});aN.displayName=hw;var lN="DialogDescription",cN=_.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=Sn(lN,t);return T.jsx(ze.p,{id:r.descriptionId,...n,ref:e})});cN.displayName=lN;var uN="DialogClose",hN=_.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=Sn(uN,t);return T.jsx(ze.button,{type:"button",...n,ref:e,onClick:Ze(i.onClick,()=>r.onOpenChange(!1))})});hN.displayName=uN;function dw(i){return i?"open":"closed"}var dN="DialogTitleWarning",[_ue,fN]=CG(dN,{contentName:mo,titleName:hw,docsSlug:"dialog"}),GY=({titleId:i})=>{const e=fN(dN),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{i&&(document.getElementById(i)||console.error(t))},[t,i]),null},YY="DialogDescriptionWarning",BY=({contentRef:i,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${fN(YY).contentName}}.`;return _.useEffect(()=>{const r=i.current?.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(n))},[n,i,e]),null},pN=eN,fw=nN,uu=rN,hu=sN,Gd=aN,Yd=cN,mN=hN;const HY=pN,UY=fw,gN=_.forwardRef(({className:i,...e},t)=>T.jsx(uu,{className:V("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",i),...e,ref:t}));gN.displayName=uu.displayName;const VY=rw("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),vN=_.forwardRef(({side:i="right",className:e,children:t,...n},r)=>T.jsxs(UY,{children:[T.jsx(gN,{}),T.jsxs(hu,{ref:r,className:V(VY({side:i}),e),...n,children:[t,T.jsxs(mN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[T.jsx(wA,{className:"h-4 w-4"}),T.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));vN.displayName=hu.displayName;const yN=({className:i,...e})=>T.jsx("div",{className:V("flex flex-col space-y-2 text-center sm:text-left",i),...e});yN.displayName="SheetHeader";const _N=_.forwardRef(({className:i,...e},t)=>T.jsx(Gd,{ref:t,className:V("text-lg font-semibold text-foreground",i),...e}));_N.displayName=Gd.displayName;const bN=_.forwardRef(({className:i,...e},t)=>T.jsx(Yd,{ref:t,className:V("text-sm text-muted-foreground",i),...e}));bN.displayName=Yd.displayName;function pc({className:i,...e}){return T.jsx("div",{className:V("animate-pulse rounded-md bg-muted",i),...e})}const XY=["top","right","bottom","left"],vs=Math.min,Pi=Math.max,Qh=Math.round,uh=Math.floor,qn=i=>({x:i,y:i}),KY={left:"right",right:"left",bottom:"top",top:"bottom"},ZY={start:"end",end:"start"};function Kb(i,e,t){return Pi(i,vs(e,t))}function Pr(i,e){return typeof i=="function"?i(e):i}function kr(i){return i.split("-")[0]}function yl(i){return i.split("-")[1]}function pw(i){return i==="x"?"y":"x"}function mw(i){return i==="y"?"height":"width"}const QY=new Set(["top","bottom"]);function Nn(i){return QY.has(kr(i))?"y":"x"}function gw(i){return pw(Nn(i))}function JY(i,e,t){t===void 0&&(t=!1);const n=yl(i),r=gw(i),s=mw(r);let o=r==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Jh(o)),[o,Jh(o)]}function eB(i){const e=Jh(i);return[Zb(i),e,Zb(e)]}function Zb(i){return i.replace(/start|end/g,e=>ZY[e])}const g1=["left","right"],v1=["right","left"],tB=["top","bottom"],iB=["bottom","top"];function nB(i,e,t){switch(i){case"top":case"bottom":return t?e?v1:g1:e?g1:v1;case"left":case"right":return e?tB:iB;default:return[]}}function rB(i,e,t,n){const r=yl(i);let s=nB(kr(i),t==="start",n);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(Zb)))),s}function Jh(i){return i.replace(/left|right|bottom|top/g,e=>KY[e])}function sB(i){return{top:0,right:0,bottom:0,left:0,...i}}function wN(i){return typeof i!="number"?sB(i):{top:i,right:i,bottom:i,left:i}}function ed(i){const{x:e,y:t,width:n,height:r}=i;return{width:n,height:r,top:t,left:e,right:e+n,bottom:t+r,x:e,y:t}}function y1(i,e,t){let{reference:n,floating:r}=i;const s=Nn(e),o=gw(e),a=mw(o),l=kr(e),c=s==="y",u=n.x+n.width/2-r.width/2,h=n.y+n.height/2-r.height/2,d=n[a]/2-r[a]/2;let f;switch(l){case"top":f={x:u,y:n.y-r.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:h};break;case"left":f={x:n.x-r.width,y:h};break;default:f={x:n.x,y:n.y}}switch(yl(e)){case"start":f[o]-=d*(t&&c?-1:1);break;case"end":f[o]+=d*(t&&c?-1:1);break}return f}const oB=async(i,e,t)=>{const{placement:n="bottom",strategy:r="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:i,floating:e,strategy:r}),{x:u,y:h}=y1(c,n,l),d=n,f={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:v}=a[m],{x:y,y:w,data:b,reset:x}=await v({x:u,y:h,initialPlacement:n,placement:d,strategy:r,middlewareData:f,rects:c,platform:o,elements:{reference:i,floating:e}});u=y??u,h=w??h,f={...f,[g]:{...f[g],...b}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(d=x.placement),x.rects&&(c=x.rects===!0?await o.getElementRects({reference:i,floating:e,strategy:r}):x.rects),{x:u,y:h}=y1(c,d,l)),m=-1)}return{x:u,y:h,placement:d,strategy:r,middlewareData:f}};async function Tc(i,e){var t;e===void 0&&(e={});const{x:n,y:r,platform:s,rects:o,elements:a,strategy:l}=i,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=Pr(e,i),p=wN(f),g=a[d?h==="floating"?"reference":"floating":h],v=ed(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(g)))==null||t?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y=h==="floating"?{x:n,y:r,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),b=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},x=ed(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:w,strategy:l}):y);return{top:(v.top-x.top+p.top)/b.y,bottom:(x.bottom-v.bottom+p.bottom)/b.y,left:(v.left-x.left+p.left)/b.x,right:(x.right-v.right+p.right)/b.x}}const aB=i=>({name:"arrow",options:i,async fn(e){const{x:t,y:n,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Pr(i,e)||{};if(c==null)return{};const h=wN(u),d={x:t,y:n},f=gw(r),p=mw(f),m=await o.getDimensions(c),g=f==="y",v=g?"top":"left",y=g?"bottom":"right",w=g?"clientHeight":"clientWidth",b=s.reference[p]+s.reference[f]-d[f]-s.floating[p],x=d[f]-s.reference[f],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let E=C?C[w]:0;(!E||!await(o.isElement==null?void 0:o.isElement(C)))&&(E=a.floating[w]||s.floating[p]);const S=b/2-x/2,R=E/2-m[p]/2-1,I=vs(h[v],R),k=vs(h[y],R),M=I,N=E-m[p]-k,F=E/2-m[p]/2+S,q=Kb(M,F,N),A=!l.arrow&&yl(r)!=null&&F!==q&&s.reference[p]/2-(F<M?I:k)-m[p]/2<0,z=A?F<M?F-M:F-N:0;return{[f]:d[f]+z,data:{[f]:q,centerOffset:F-q-z,...A&&{alignmentOffset:z}},reset:A}}}),lB=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(e){var t,n;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Pr(i,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const v=kr(r),y=Nn(a),w=kr(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),x=d||(w||!m?[Jh(a)]:eB(a)),C=p!=="none";!d&&C&&x.push(...rB(a,m,p,b));const E=[a,...x],S=await Tc(e,g),R=[];let I=((n=s.flip)==null?void 0:n.overflows)||[];if(u&&R.push(S[v]),h){const F=JY(r,o,b);R.push(S[F[0]],S[F[1]])}if(I=[...I,{placement:r,overflows:R}],!R.every(F=>F<=0)){var k,M;const F=(((k=s.flip)==null?void 0:k.index)||0)+1,q=E[F];if(q&&(!(h==="alignment"?y!==Nn(q):!1)||I.every(P=>Nn(P.placement)===y?P.overflows[0]>0:!0)))return{data:{index:F,overflows:I},reset:{placement:q}};let A=(M=I.filter(z=>z.overflows[0]<=0).sort((z,P)=>z.overflows[1]-P.overflows[1])[0])==null?void 0:M.placement;if(!A)switch(f){case"bestFit":{var N;const z=(N=I.filter(P=>{if(C){const G=Nn(P.placement);return G===y||G==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(G=>G>0).reduce((G,U)=>G+U,0)]).sort((P,G)=>P[1]-G[1])[0])==null?void 0:N[0];z&&(A=z);break}case"initialPlacement":A=a;break}if(r!==A)return{reset:{placement:A}}}return{}}}};function _1(i,e){return{top:i.top-e.height,right:i.right-e.width,bottom:i.bottom-e.height,left:i.left-e.width}}function b1(i){return XY.some(e=>i[e]>=0)}const cB=function(i){return i===void 0&&(i={}),{name:"hide",options:i,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...r}=Pr(i,e);switch(n){case"referenceHidden":{const s=await Tc(e,{...r,elementContext:"reference"}),o=_1(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:b1(o)}}}case"escaped":{const s=await Tc(e,{...r,altBoundary:!0}),o=_1(s,t.floating);return{data:{escapedOffsets:o,escaped:b1(o)}}}default:return{}}}}},xN=new Set(["left","top"]);async function uB(i,e){const{placement:t,platform:n,elements:r}=i,s=await(n.isRTL==null?void 0:n.isRTL(r.floating)),o=kr(t),a=yl(t),l=Nn(t)==="y",c=xN.has(o)?-1:1,u=s&&l?-1:1,h=Pr(e,i);let{mainAxis:d,crossAxis:f,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*u,y:d*c}:{x:d*c,y:f*u}}const hB=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(e){var t,n;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await uB(e,i);return o===((t=a.offset)==null?void 0:t.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},dB=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(e){const{x:t,y:n,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:v,y}=g;return{x:v,y}}},...l}=Pr(i,e),c={x:t,y:n},u=await Tc(e,l),h=Nn(kr(r)),d=pw(h);let f=c[d],p=c[h];if(s){const g=d==="y"?"top":"left",v=d==="y"?"bottom":"right",y=f+u[g],w=f-u[v];f=Kb(y,f,w)}if(o){const g=h==="y"?"top":"left",v=h==="y"?"bottom":"right",y=p+u[g],w=p-u[v];p=Kb(y,p,w)}const m=a.fn({...e,[d]:f,[h]:p});return{...m,data:{x:m.x-t,y:m.y-n,enabled:{[d]:s,[h]:o}}}}}},fB=function(i){return i===void 0&&(i={}),{options:i,fn(e){const{x:t,y:n,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Pr(i,e),u={x:t,y:n},h=Nn(r),d=pw(h);let f=u[d],p=u[h];const m=Pr(a,e),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const w=d==="y"?"height":"width",b=s.reference[d]-s.floating[w]+g.mainAxis,x=s.reference[d]+s.reference[w]-g.mainAxis;f<b?f=b:f>x&&(f=x)}if(c){var v,y;const w=d==="y"?"width":"height",b=xN.has(kr(r)),x=s.reference[h]-s.floating[w]+(b&&((v=o.offset)==null?void 0:v[h])||0)+(b?0:g.crossAxis),C=s.reference[h]+s.reference[w]+(b?0:((y=o.offset)==null?void 0:y[h])||0)-(b?g.crossAxis:0);p<x?p=x:p>C&&(p=C)}return{[d]:f,[h]:p}}}},pB=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(e){var t,n;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Pr(i,e),u=await Tc(e,c),h=kr(r),d=yl(r),f=Nn(r)==="y",{width:p,height:m}=s.floating;let g,v;h==="top"||h==="bottom"?(g=h,v=d===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=h,g=d==="end"?"top":"bottom");const y=m-u.top-u.bottom,w=p-u.left-u.right,b=vs(m-u[g],y),x=vs(p-u[v],w),C=!e.middlewareData.shift;let E=b,S=x;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(S=w),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(E=y),C&&!d){const I=Pi(u.left,0),k=Pi(u.right,0),M=Pi(u.top,0),N=Pi(u.bottom,0);f?S=p-2*(I!==0||k!==0?I+k:Pi(u.left,u.right)):E=m-2*(M!==0||N!==0?M+N:Pi(u.top,u.bottom))}await l({...e,availableWidth:S,availableHeight:E});const R=await o.getDimensions(a.floating);return p!==R.width||m!==R.height?{reset:{rects:!0}}:{}}}};function Bd(){return typeof window<"u"}function _l(i){return SN(i)?(i.nodeName||"").toLowerCase():"#document"}function Ni(i){var e;return(i==null||(e=i.ownerDocument)==null?void 0:e.defaultView)||window}function Vn(i){var e;return(e=(SN(i)?i.ownerDocument:i.document)||window.document)==null?void 0:e.documentElement}function SN(i){return Bd()?i instanceof Node||i instanceof Ni(i).Node:!1}function gn(i){return Bd()?i instanceof Element||i instanceof Ni(i).Element:!1}function Hn(i){return Bd()?i instanceof HTMLElement||i instanceof Ni(i).HTMLElement:!1}function w1(i){return!Bd()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof Ni(i).ShadowRoot}const mB=new Set(["inline","contents"]);function du(i){const{overflow:e,overflowX:t,overflowY:n,display:r}=vn(i);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!mB.has(r)}const gB=new Set(["table","td","th"]);function vB(i){return gB.has(_l(i))}const yB=[":popover-open",":modal"];function Hd(i){return yB.some(e=>{try{return i.matches(e)}catch{return!1}})}const _B=["transform","translate","scale","rotate","perspective"],bB=["transform","translate","scale","rotate","perspective","filter"],wB=["paint","layout","strict","content"];function vw(i){const e=yw(),t=gn(i)?vn(i):i;return _B.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||bB.some(n=>(t.willChange||"").includes(n))||wB.some(n=>(t.contain||"").includes(n))}function xB(i){let e=ys(i);for(;Hn(e)&&!Ua(e);){if(vw(e))return e;if(Hd(e))return null;e=ys(e)}return null}function yw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const SB=new Set(["html","body","#document"]);function Ua(i){return SB.has(_l(i))}function vn(i){return Ni(i).getComputedStyle(i)}function Ud(i){return gn(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function ys(i){if(_l(i)==="html")return i;const e=i.assignedSlot||i.parentNode||w1(i)&&i.host||Vn(i);return w1(e)?e.host:e}function EN(i){const e=ys(i);return Ua(e)?i.ownerDocument?i.ownerDocument.body:i.body:Hn(e)&&du(e)?e:EN(e)}function Rc(i,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=EN(i),s=r===((n=i.ownerDocument)==null?void 0:n.body),o=Ni(r);if(s){const a=Qb(o);return e.concat(o,o.visualViewport||[],du(r)?r:[],a&&t?Rc(a):[])}return e.concat(r,Rc(r,[],t))}function Qb(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function CN(i){const e=vn(i);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=Hn(i),s=r?i.offsetWidth:t,o=r?i.offsetHeight:n,a=Qh(t)!==s||Qh(n)!==o;return a&&(t=s,n=o),{width:t,height:n,$:a}}function _w(i){return gn(i)?i:i.contextElement}function Aa(i){const e=_w(i);if(!Hn(e))return qn(1);const t=e.getBoundingClientRect(),{width:n,height:r,$:s}=CN(e);let o=(s?Qh(t.width):t.width)/n,a=(s?Qh(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const EB=qn(0);function TN(i){const e=Ni(i);return!yw()||!e.visualViewport?EB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function CB(i,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ni(i)?!1:e}function go(i,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=i.getBoundingClientRect(),s=_w(i);let o=qn(1);e&&(n?gn(n)&&(o=Aa(n)):o=Aa(i));const a=CB(s,t,n)?TN(s):qn(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,h=r.height/o.y;if(s){const d=Ni(s),f=n&&gn(n)?Ni(n):n;let p=d,m=Qb(p);for(;m&&n&&f!==p;){const g=Aa(m),v=m.getBoundingClientRect(),y=vn(m),w=v.left+(m.clientLeft+parseFloat(y.paddingLeft))*g.x,b=v.top+(m.clientTop+parseFloat(y.paddingTop))*g.y;l*=g.x,c*=g.y,u*=g.x,h*=g.y,l+=w,c+=b,p=Ni(m),m=Qb(p)}}return ed({width:u,height:h,x:l,y:c})}function Vd(i,e){const t=Ud(i).scrollLeft;return e?e.left+t:go(Vn(i)).left+t}function RN(i,e){const t=i.getBoundingClientRect(),n=t.left+e.scrollLeft-Vd(i,t),r=t.top+e.scrollTop;return{x:n,y:r}}function TB(i){let{elements:e,rect:t,offsetParent:n,strategy:r}=i;const s=r==="fixed",o=Vn(n),a=e?Hd(e.floating):!1;if(n===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=qn(1);const u=qn(0),h=Hn(n);if((h||!h&&!s)&&((_l(n)!=="body"||du(o))&&(l=Ud(n)),Hn(n))){const f=go(n);c=Aa(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const d=o&&!h&&!s?RN(o,l):qn(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+d.x,y:t.y*c.y-l.scrollTop*c.y+u.y+d.y}}function RB(i){return Array.from(i.getClientRects())}function OB(i){const e=Vn(i),t=Ud(i),n=i.ownerDocument.body,r=Pi(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=Pi(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+Vd(i);const a=-t.scrollTop;return vn(n).direction==="rtl"&&(o+=Pi(e.clientWidth,n.clientWidth)-r),{width:r,height:s,x:o,y:a}}const x1=25;function IB(i,e){const t=Ni(i),n=Vn(i),r=t.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const u=yw();(!u||u&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}const c=Vd(n);if(c<=0){const u=n.ownerDocument,h=u.body,d=getComputedStyle(h),f=u.compatMode==="CSS1Compat"&&parseFloat(d.marginLeft)+parseFloat(d.marginRight)||0,p=Math.abs(n.clientWidth-h.clientWidth-f);p<=x1&&(s-=p)}else c<=x1&&(s+=c);return{width:s,height:o,x:a,y:l}}const DB=new Set(["absolute","fixed"]);function PB(i,e){const t=go(i,!0,e==="fixed"),n=t.top+i.clientTop,r=t.left+i.clientLeft,s=Hn(i)?Aa(i):qn(1),o=i.clientWidth*s.x,a=i.clientHeight*s.y,l=r*s.x,c=n*s.y;return{width:o,height:a,x:l,y:c}}function S1(i,e,t){let n;if(e==="viewport")n=IB(i,t);else if(e==="document")n=OB(Vn(i));else if(gn(e))n=PB(e,t);else{const r=TN(i);n={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return ed(n)}function ON(i,e){const t=ys(i);return t===e||!gn(t)||Ua(t)?!1:vn(t).position==="fixed"||ON(t,e)}function kB(i,e){const t=e.get(i);if(t)return t;let n=Rc(i,[],!1).filter(a=>gn(a)&&_l(a)!=="body"),r=null;const s=vn(i).position==="fixed";let o=s?ys(i):i;for(;gn(o)&&!Ua(o);){const a=vn(o),l=vw(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&DB.has(r.position)||du(o)&&!l&&ON(i,o))?n=n.filter(u=>u!==o):r=a,o=ys(o)}return e.set(i,n),n}function MB(i){let{element:e,boundary:t,rootBoundary:n,strategy:r}=i;const o=[...t==="clippingAncestors"?Hd(e)?[]:kB(e,this._c):[].concat(t),n],a=o[0],l=o.reduce((c,u)=>{const h=S1(e,u,r);return c.top=Pi(h.top,c.top),c.right=vs(h.right,c.right),c.bottom=vs(h.bottom,c.bottom),c.left=Pi(h.left,c.left),c},S1(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function AB(i){const{width:e,height:t}=CN(i);return{width:e,height:t}}function NB(i,e,t){const n=Hn(e),r=Vn(e),s=t==="fixed",o=go(i,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=qn(0);function c(){l.x=Vd(r)}if(n||!n&&!s)if((_l(e)!=="body"||du(r))&&(a=Ud(e)),n){const f=go(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else r&&c();s&&!n&&r&&c();const u=r&&!n&&!s?RN(r,a):qn(0),h=o.left+a.scrollLeft-l.x-u.x,d=o.top+a.scrollTop-l.y-u.y;return{x:h,y:d,width:o.width,height:o.height}}function _p(i){return vn(i).position==="static"}function E1(i,e){if(!Hn(i)||vn(i).position==="fixed")return null;if(e)return e(i);let t=i.offsetParent;return Vn(i)===t&&(t=t.ownerDocument.body),t}function IN(i,e){const t=Ni(i);if(Hd(i))return t;if(!Hn(i)){let r=ys(i);for(;r&&!Ua(r);){if(gn(r)&&!_p(r))return r;r=ys(r)}return t}let n=E1(i,e);for(;n&&vB(n)&&_p(n);)n=E1(n,e);return n&&Ua(n)&&_p(n)&&!vw(n)?t:n||xB(i)||t}const LB=async function(i){const e=this.getOffsetParent||IN,t=this.getDimensions,n=await t(i.floating);return{reference:NB(i.reference,await e(i.floating),i.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function FB(i){return vn(i).direction==="rtl"}const $B={convertOffsetParentRelativeRectToViewportRelativeRect:TB,getDocumentElement:Vn,getClippingRect:MB,getOffsetParent:IN,getElementRects:LB,getClientRects:RB,getDimensions:AB,getScale:Aa,isElement:gn,isRTL:FB};function DN(i,e){return i.x===e.x&&i.y===e.y&&i.width===e.width&&i.height===e.height}function jB(i,e){let t=null,n;const r=Vn(i);function s(){var a;clearTimeout(n),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=i.getBoundingClientRect(),{left:u,top:h,width:d,height:f}=c;if(a||e(),!d||!f)return;const p=uh(h),m=uh(r.clientWidth-(u+d)),g=uh(r.clientHeight-(h+f)),v=uh(u),w={rootMargin:-p+"px "+-m+"px "+-g+"px "+-v+"px",threshold:Pi(0,vs(1,l))||1};let b=!0;function x(C){const E=C[0].intersectionRatio;if(E!==l){if(!b)return o();E?o(!1,E):n=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!DN(c,i.getBoundingClientRect())&&o(),b=!1}try{t=new IntersectionObserver(x,{...w,root:r.ownerDocument})}catch{t=new IntersectionObserver(x,w)}t.observe(i)}return o(!0),s}function WB(i,e,t,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=_w(i),u=r||s?[...c?Rc(c):[],...Rc(e)]:[];u.forEach(v=>{r&&v.addEventListener("scroll",t,{passive:!0}),s&&v.addEventListener("resize",t)});const h=c&&a?jB(c,t):null;let d=-1,f=null;o&&(f=new ResizeObserver(v=>{let[y]=v;y&&y.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(e)})),t()}),c&&!l&&f.observe(c),f.observe(e));let p,m=l?go(i):null;l&&g();function g(){const v=go(i);m&&!DN(m,v)&&t(),m=v,p=requestAnimationFrame(g)}return t(),()=>{var v;u.forEach(y=>{r&&y.removeEventListener("scroll",t),s&&y.removeEventListener("resize",t)}),h?.(),(v=f)==null||v.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const zB=hB,qB=dB,GB=lB,YB=pB,BB=cB,C1=aB,HB=fB,UB=(i,e,t)=>{const n=new Map,r={platform:$B,...t},s={...r.platform,_c:n};return oB(i,e,{...r,platform:s})};var VB=typeof document<"u",XB=function(){},zh=VB?_.useLayoutEffect:XB;function td(i,e){if(i===e)return!0;if(typeof i!=typeof e)return!1;if(typeof i=="function"&&i.toString()===e.toString())return!0;let t,n,r;if(i&&e&&typeof i=="object"){if(Array.isArray(i)){if(t=i.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!td(i[n],e[n]))return!1;return!0}if(r=Object.keys(i),t=r.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,r[n]))return!1;for(n=t;n--!==0;){const s=r[n];if(!(s==="_owner"&&i.$$typeof)&&!td(i[s],e[s]))return!1}return!0}return i!==i&&e!==e}function PN(i){return typeof window>"u"?1:(i.ownerDocument.defaultView||window).devicePixelRatio||1}function T1(i,e){const t=PN(i);return Math.round(e*t)/t}function bp(i){const e=_.useRef(i);return zh(()=>{e.current=i}),e}function KB(i){i===void 0&&(i={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=i,[u,h]=_.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[d,f]=_.useState(n);td(d,n)||f(n);const[p,m]=_.useState(null),[g,v]=_.useState(null),y=_.useCallback(P=>{P!==C.current&&(C.current=P,m(P))},[]),w=_.useCallback(P=>{P!==E.current&&(E.current=P,v(P))},[]),b=s||p,x=o||g,C=_.useRef(null),E=_.useRef(null),S=_.useRef(u),R=l!=null,I=bp(l),k=bp(r),M=bp(c),N=_.useCallback(()=>{if(!C.current||!E.current)return;const P={placement:e,strategy:t,middleware:d};k.current&&(P.platform=k.current),UB(C.current,E.current,P).then(G=>{const U={...G,isPositioned:M.current!==!1};F.current&&!td(S.current,U)&&(S.current=U,ow.flushSync(()=>{h(U)}))})},[d,e,t,k,M]);zh(()=>{c===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,h(P=>({...P,isPositioned:!1})))},[c]);const F=_.useRef(!1);zh(()=>(F.current=!0,()=>{F.current=!1}),[]),zh(()=>{if(b&&(C.current=b),x&&(E.current=x),b&&x){if(I.current)return I.current(b,x,N);N()}},[b,x,N,I,R]);const q=_.useMemo(()=>({reference:C,floating:E,setReference:y,setFloating:w}),[y,w]),A=_.useMemo(()=>({reference:b,floating:x}),[b,x]),z=_.useMemo(()=>{const P={position:t,left:0,top:0};if(!A.floating)return P;const G=T1(A.floating,u.x),U=T1(A.floating,u.y);return a?{...P,transform:"translate("+G+"px, "+U+"px)",...PN(A.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:G,top:U}},[t,a,A.floating,u.x,u.y]);return _.useMemo(()=>({...u,update:N,refs:q,elements:A,floatingStyles:z}),[u,N,q,A,z])}const ZB=i=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:i,fn(t){const{element:n,padding:r}=typeof i=="function"?i(t):i;return n&&e(n)?n.current!=null?C1({element:n.current,padding:r}).fn(t):{}:n?C1({element:n,padding:r}).fn(t):{}}}},QB=(i,e)=>({...zB(i),options:[i,e]}),JB=(i,e)=>({...qB(i),options:[i,e]}),eH=(i,e)=>({...HB(i),options:[i,e]}),tH=(i,e)=>({...GB(i),options:[i,e]}),iH=(i,e)=>({...YB(i),options:[i,e]}),nH=(i,e)=>({...BB(i),options:[i,e]}),rH=(i,e)=>({...ZB(i),options:[i,e]});var sH="Arrow",kN=_.forwardRef((i,e)=>{const{children:t,width:n=10,height:r=5,...s}=i;return T.jsx(ze.svg,{...s,ref:e,width:n,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:i.asChild?t:T.jsx("polygon",{points:"0,0 30,0 15,10"})})});kN.displayName=sH;var oH=kN;function aH(i){const[e,t]=_.useState(void 0);return gs(()=>{if(i){t({width:i.offsetWidth,height:i.offsetHeight});const n=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=i.offsetWidth,a=i.offsetHeight;t({width:o,height:a})});return n.observe(i,{box:"border-box"}),()=>n.unobserve(i)}else t(void 0)},[i]),e}var bw="Popper",[MN,Xd]=ko(bw),[lH,AN]=MN(bw),NN=i=>{const{__scopePopper:e,children:t}=i,[n,r]=_.useState(null);return T.jsx(lH,{scope:e,anchor:n,onAnchorChange:r,children:t})};NN.displayName=bw;var LN="PopperAnchor",FN=_.forwardRef((i,e)=>{const{__scopePopper:t,virtualRef:n,...r}=i,s=AN(LN,t),o=_.useRef(null),a=ni(e,o),l=_.useRef(null);return _.useEffect(()=>{const c=l.current;l.current=n?.current||o.current,c!==l.current&&s.onAnchorChange(l.current)}),n?null:T.jsx(ze.div,{...r,ref:a})});FN.displayName=LN;var ww="PopperContent",[cH,uH]=MN(ww),$N=_.forwardRef((i,e)=>{const{__scopePopper:t,side:n="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:d=!1,updatePositionStrategy:f="optimized",onPlaced:p,...m}=i,g=AN(ww,t),[v,y]=_.useState(null),w=ni(e,W=>y(W)),[b,x]=_.useState(null),C=aH(b),E=C?.width??0,S=C?.height??0,R=n+(s!=="center"?"-"+s:""),I=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},k=Array.isArray(c)?c:[c],M=k.length>0,N={padding:I,boundary:k.filter(dH),altBoundary:M},{refs:F,floatingStyles:q,placement:A,isPositioned:z,middlewareData:P}=KB({strategy:"fixed",placement:R,whileElementsMounted:(...W)=>WB(...W,{animationFrame:f==="always"}),elements:{reference:g.anchor},middleware:[QB({mainAxis:r+S,alignmentAxis:o}),l&&JB({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?eH():void 0,...N}),l&&tH({...N}),iH({...N,apply:({elements:W,rects:Z,availableWidth:J,availableHeight:ae})=>{const{width:et,height:it}=Z.reference,he=W.floating.style;he.setProperty("--radix-popper-available-width",`${J}px`),he.setProperty("--radix-popper-available-height",`${ae}px`),he.setProperty("--radix-popper-anchor-width",`${et}px`),he.setProperty("--radix-popper-anchor-height",`${it}px`)}}),b&&rH({element:b,padding:a}),fH({arrowWidth:E,arrowHeight:S}),d&&nH({strategy:"referenceHidden",...N})]}),[G,U]=zN(A),K=po(p);gs(()=>{z&&K?.()},[z,K]);const D=P.arrow?.x,L=P.arrow?.y,$=P.arrow?.centerOffset!==0,[j,B]=_.useState();return gs(()=>{v&&B(window.getComputedStyle(v).zIndex)},[v]),T.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:z?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:j,"--radix-popper-transform-origin":[P.transformOrigin?.x,P.transformOrigin?.y].join(" "),...P.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:i.dir,children:T.jsx(cH,{scope:t,placedSide:G,onArrowChange:x,arrowX:D,arrowY:L,shouldHideArrow:$,children:T.jsx(ze.div,{"data-side":G,"data-align":U,...m,ref:w,style:{...m.style,animation:z?void 0:"none"}})})})});$N.displayName=ww;var jN="PopperArrow",hH={top:"bottom",right:"left",bottom:"top",left:"right"},WN=_.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,s=uH(jN,n),o=hH[s.placedSide];return T.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:T.jsx(oH,{...r,ref:t,style:{...r.style,display:"block"}})})});WN.displayName=jN;function dH(i){return i!==null}var fH=i=>({name:"transformOrigin",options:i,fn(e){const{placement:t,rects:n,middlewareData:r}=e,o=r.arrow?.centerOffset!==0,a=o?0:i.arrowWidth,l=o?0:i.arrowHeight,[c,u]=zN(t),h={start:"0%",center:"50%",end:"100%"}[u],d=(r.arrow?.x??0)+a/2,f=(r.arrow?.y??0)+l/2;let p="",m="";return c==="bottom"?(p=o?h:`${d}px`,m=`${-l}px`):c==="top"?(p=o?h:`${d}px`,m=`${n.floating.height+l}px`):c==="right"?(p=`${-l}px`,m=o?h:`${f}px`):c==="left"&&(p=`${n.floating.width+l}px`,m=o?h:`${f}px`),{data:{x:p,y:m}}}});function zN(i){const[e,t="center"]=i.split("-");return[e,t]}var qN=NN,xw=FN,GN=$N,YN=WN,pH=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),mH="VisuallyHidden",BN=_.forwardRef((i,e)=>T.jsx(ze.span,{...i,ref:e,style:{...pH,...i.style}}));BN.displayName=mH;var gH=BN,[Kd]=ko("Tooltip",[Xd]),Zd=Xd(),HN="TooltipProvider",vH=700,Jb="tooltip.open",[yH,Sw]=Kd(HN),UN=i=>{const{__scopeTooltip:e,delayDuration:t=vH,skipDelayDuration:n=300,disableHoverableContent:r=!1,children:s}=i,o=_.useRef(!0),a=_.useRef(!1),l=_.useRef(0);return _.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),T.jsx(yH,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:_.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:_.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:a,onPointerInTransitChange:_.useCallback(c=>{a.current=c},[]),disableHoverableContent:r,children:s})};UN.displayName=HN;var Oc="Tooltip",[_H,Qd]=Kd(Oc),VN=i=>{const{__scopeTooltip:e,children:t,open:n,defaultOpen:r,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=i,l=Sw(Oc,i.__scopeTooltip),c=Zd(e),[u,h]=_.useState(null),d=Ai(),f=_.useRef(0),p=o??l.disableHoverableContent,m=a??l.delayDuration,g=_.useRef(!1),[v,y]=cu({prop:n,defaultProp:r??!1,onChange:E=>{E?(l.onOpen(),document.dispatchEvent(new CustomEvent(Jb))):l.onClose(),s?.(E)},caller:Oc}),w=_.useMemo(()=>v?g.current?"delayed-open":"instant-open":"closed",[v]),b=_.useCallback(()=>{window.clearTimeout(f.current),f.current=0,g.current=!1,y(!0)},[y]),x=_.useCallback(()=>{window.clearTimeout(f.current),f.current=0,y(!1)},[y]),C=_.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{g.current=!0,y(!0),f.current=0},m)},[m,y]);return _.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),T.jsx(qN,{...c,children:T.jsx(_H,{scope:e,contentId:d,open:v,stateAttribute:w,trigger:u,onTriggerChange:h,onTriggerEnter:_.useCallback(()=>{l.isOpenDelayedRef.current?C():b()},[l.isOpenDelayedRef,C,b]),onTriggerLeave:_.useCallback(()=>{p?x():(window.clearTimeout(f.current),f.current=0)},[x,p]),onOpen:b,onClose:x,disableHoverableContent:p,children:t})})};VN.displayName=Oc;var e0="TooltipTrigger",XN=_.forwardRef((i,e)=>{const{__scopeTooltip:t,...n}=i,r=Qd(e0,t),s=Sw(e0,t),o=Zd(t),a=_.useRef(null),l=ni(e,a,r.onTriggerChange),c=_.useRef(!1),u=_.useRef(!1),h=_.useCallback(()=>c.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),T.jsx(xw,{asChild:!0,...o,children:T.jsx(ze.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...n,ref:l,onPointerMove:Ze(i.onPointerMove,d=>{d.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ze(i.onPointerLeave,()=>{r.onTriggerLeave(),u.current=!1}),onPointerDown:Ze(i.onPointerDown,()=>{r.open&&r.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ze(i.onFocus,()=>{c.current||r.onOpen()}),onBlur:Ze(i.onBlur,r.onClose),onClick:Ze(i.onClick,r.onClose)})})});XN.displayName=e0;var bH="TooltipPortal",[bue,wH]=Kd(bH,{forceMount:void 0}),Va="TooltipContent",KN=_.forwardRef((i,e)=>{const t=wH(Va,i.__scopeTooltip),{forceMount:n=t.forceMount,side:r="top",...s}=i,o=Qd(Va,i.__scopeTooltip);return T.jsx(xs,{present:n||o.open,children:o.disableHoverableContent?T.jsx(ZN,{side:r,...s,ref:e}):T.jsx(xH,{side:r,...s,ref:e})})}),xH=_.forwardRef((i,e)=>{const t=Qd(Va,i.__scopeTooltip),n=Sw(Va,i.__scopeTooltip),r=_.useRef(null),s=ni(e,r),[o,a]=_.useState(null),{trigger:l,onClose:c}=t,u=r.current,{onPointerInTransitChange:h}=n,d=_.useCallback(()=>{a(null),h(!1)},[h]),f=_.useCallback((p,m)=>{const g=p.currentTarget,v={x:p.clientX,y:p.clientY},y=RH(v,g.getBoundingClientRect()),w=OH(v,y),b=IH(m.getBoundingClientRect()),x=PH([...w,...b]);a(x),h(!0)},[h]);return _.useEffect(()=>()=>d(),[d]),_.useEffect(()=>{if(l&&u){const p=g=>f(g,u),m=g=>f(g,l);return l.addEventListener("pointerleave",p),u.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",m)}}},[l,u,f,d]),_.useEffect(()=>{if(o){const p=m=>{const g=m.target,v={x:m.clientX,y:m.clientY},y=l?.contains(g)||u?.contains(g),w=!DH(v,o);y?d():w&&(d(),c())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,u,o,c,d]),T.jsx(ZN,{...i,ref:s})}),[SH,EH]=Kd(Oc,{isInside:!1}),CH=Mq("TooltipContent"),ZN=_.forwardRef((i,e)=>{const{__scopeTooltip:t,children:n,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=i,l=Qd(Va,t),c=Zd(t),{onClose:u}=l;return _.useEffect(()=>(document.addEventListener(Jb,u),()=>document.removeEventListener(Jb,u)),[u]),_.useEffect(()=>{if(l.trigger){const h=d=>{d.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),T.jsx(Wd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:T.jsxs(GN,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[T.jsx(CH,{children:n}),T.jsx(SH,{scope:t,isInside:!0,children:T.jsx(gH,{id:l.contentId,role:"tooltip",children:r||n})})]})})});KN.displayName=Va;var QN="TooltipArrow",TH=_.forwardRef((i,e)=>{const{__scopeTooltip:t,...n}=i,r=Zd(t);return EH(QN,t).isInside?null:T.jsx(YN,{...r,...n,ref:e})});TH.displayName=QN;function RH(i,e){const t=Math.abs(e.top-i.y),n=Math.abs(e.bottom-i.y),r=Math.abs(e.right-i.x),s=Math.abs(e.left-i.x);switch(Math.min(t,n,r,s)){case s:return"left";case r:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function OH(i,e,t=5){const n=[];switch(e){case"top":n.push({x:i.x-t,y:i.y+t},{x:i.x+t,y:i.y+t});break;case"bottom":n.push({x:i.x-t,y:i.y-t},{x:i.x+t,y:i.y-t});break;case"left":n.push({x:i.x+t,y:i.y-t},{x:i.x+t,y:i.y+t});break;case"right":n.push({x:i.x-t,y:i.y-t},{x:i.x-t,y:i.y+t});break}return n}function IH(i){const{top:e,right:t,bottom:n,left:r}=i;return[{x:r,y:e},{x:t,y:e},{x:t,y:n},{x:r,y:n}]}function DH(i,e){const{x:t,y:n}=i;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,h=l.x,d=l.y;u>n!=d>n&&t<(h-c)*(n-u)/(d-u)+c&&(r=!r)}return r}function PH(i){const e=i.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),kH(e)}function kH(i){if(i.length<=1)return i.slice();const e=[];for(let n=0;n<i.length;n++){const r=i[n];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))e.pop();else break}e.push(r)}e.pop();const t=[];for(let n=i.length-1;n>=0;n--){const r=i[n];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(r.y-o.y)>=(s.y-o.y)*(r.x-o.x))t.pop();else break}t.push(r)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var MH=UN,AH=VN,NH=XN,JN=KN;const LH=MH,FH=AH,$H=NH,eL=_.forwardRef(({className:i,sideOffset:e=4,...t},n)=>T.jsx(JN,{ref:n,sideOffset:e,className:V("z-50 origin-[--radix-tooltip-content-transform-origin] overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i),...t}));eL.displayName=JN.displayName;const jH="sidebar_state",WH=3600*24*7,zH="16rem",qH="18rem",GH="3rem",YH="b",tL=_.createContext(null);function fu(){const i=_.useContext(tL);if(!i)throw new Error("useSidebar must be used within a SidebarProvider.");return i}const iL=_.forwardRef(({defaultOpen:i=!0,open:e,onOpenChange:t,className:n,style:r,children:s,...o},a)=>{const l=Fq(),[c,u]=_.useState(!1),[h,d]=_.useState(i),f=e??h,p=_.useCallback(y=>{const w=typeof y=="function"?y(f):y;t?t(w):d(w),document.cookie=`${jH}=${w}; path=/; max-age=${WH}`},[t,f]),m=_.useCallback(()=>l?u(y=>!y):p(y=>!y),[l,p,u]);_.useEffect(()=>{const y=w=>{w.key===YH&&(w.metaKey||w.ctrlKey)&&(w.preventDefault(),m())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[m]);const g=f?"expanded":"collapsed",v=_.useMemo(()=>({state:g,open:f,setOpen:p,isMobile:l,openMobile:c,setOpenMobile:u,toggleSidebar:m}),[g,f,p,l,c,u,m]);return T.jsx(tL.Provider,{value:v,children:T.jsx(LH,{delayDuration:0,children:T.jsx("div",{style:{"--sidebar-width":zH,"--sidebar-width-icon":GH,...r},className:V("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",n),ref:a,...o,children:s})})})});iL.displayName="SidebarProvider";const nL=_.forwardRef(({side:i="left",variant:e="sidebar",collapsible:t="offcanvas",className:n,children:r,...s},o)=>{const{isMobile:a,state:l,openMobile:c,setOpenMobile:u}=fu();return t==="none"?T.jsx("div",{className:V("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",n),ref:o,...s,children:r}):a?T.jsx(HY,{open:c,onOpenChange:u,...s,children:T.jsxs(vN,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":qH},side:i,children:[T.jsxs(yN,{className:"sr-only",children:[T.jsx(_N,{children:"Sidebar"}),T.jsx(bN,{children:"Displays the mobile sidebar."})]}),T.jsx("div",{className:"flex h-full w-full flex-col",children:r})]})}):T.jsxs("div",{ref:o,className:"group peer hidden text-sidebar-foreground md:block","data-state":l,"data-collapsible":l==="collapsed"?t:"","data-variant":e,"data-side":i,children:[T.jsx("div",{className:V("relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),T.jsx("div",{className:V("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",i==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...s,children:T.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:r})})]})});nL.displayName="Sidebar";const rL=_.forwardRef(({className:i,onClick:e,...t},n)=>{const{toggleSidebar:r}=fu();return T.jsxs(zn,{ref:n,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:V("h-7 w-7",i),onClick:s=>{e?.(s),r()},...t,children:[T.jsx(cq,{}),T.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});rL.displayName="SidebarTrigger";const sL=_.forwardRef(({className:i,...e},t)=>{const{toggleSidebar:n}=fu();return T.jsx("button",{ref:t,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:n,className:V("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",i),...e})});sL.displayName="SidebarRail";const oL=_.forwardRef(({className:i,...e},t)=>T.jsx("main",{ref:t,className:V("relative flex w-full flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",i),...e}));oL.displayName="SidebarInset";const BH=_.forwardRef(({className:i,...e},t)=>T.jsx(LA,{ref:t,"data-sidebar":"input",className:V("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",i),...e}));BH.displayName="SidebarInput";const aL=_.forwardRef(({className:i,...e},t)=>T.jsx("div",{ref:t,"data-sidebar":"header",className:V("flex flex-col gap-2 p-2",i),...e}));aL.displayName="SidebarHeader";const HH=_.forwardRef(({className:i,...e},t)=>T.jsx("div",{ref:t,"data-sidebar":"footer",className:V("flex flex-col gap-2 p-2",i),...e}));HH.displayName="SidebarFooter";const UH=_.forwardRef(({className:i,...e},t)=>T.jsx(jA,{ref:t,"data-sidebar":"separator",className:V("mx-2 w-auto bg-sidebar-border",i),...e}));UH.displayName="SidebarSeparator";const lL=_.forwardRef(({className:i,...e},t)=>T.jsx("div",{ref:t,"data-sidebar":"content",className:V("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",i),...e}));lL.displayName="SidebarContent";const qh=_.forwardRef(({className:i,...e},t)=>T.jsx("div",{ref:t,"data-sidebar":"group",className:V("relative flex w-full min-w-0 flex-col p-2",i),...e}));qh.displayName="SidebarGroup";const Gh=_.forwardRef(({className:i,asChild:e=!1,...t},n)=>{const r=e?ml:"div";return T.jsx(r,{ref:n,"data-sidebar":"group-label",className:V("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",i),...t})});Gh.displayName="SidebarGroupLabel";const VH=_.forwardRef(({className:i,asChild:e=!1,...t},n)=>{const r=e?ml:"button";return T.jsx(r,{ref:n,"data-sidebar":"group-action",className:V("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",i),...t})});VH.displayName="SidebarGroupAction";const Yh=_.forwardRef(({className:i,...e},t)=>T.jsx("div",{ref:t,"data-sidebar":"group-content",className:V("w-full text-sm",i),...e}));Yh.displayName="SidebarGroupContent";const cL=_.forwardRef(({className:i,...e},t)=>T.jsx("ul",{ref:t,"data-sidebar":"menu",className:V("flex w-full min-w-0 flex-col gap-1",i),...e}));cL.displayName="SidebarMenu";const qs=_.forwardRef(({className:i,...e},t)=>T.jsx("li",{ref:t,"data-sidebar":"menu-item",className:V("group/menu-item relative",i),...e}));qs.displayName="SidebarMenuItem";const XH=rw("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Hs=_.forwardRef(({asChild:i=!1,isActive:e=!1,variant:t="default",size:n="default",tooltip:r,className:s,...o},a)=>{const l=i?ml:"button",{isMobile:c,state:u}=fu(),h=T.jsx(l,{ref:a,"data-sidebar":"menu-button","data-size":n,"data-active":e,className:V(XH({variant:t,size:n}),s),...o});return r?(typeof r=="string"&&(r={children:r}),T.jsxs(FH,{children:[T.jsx($H,{asChild:!0,children:h}),T.jsx(eL,{side:"right",align:"center",hidden:u!=="collapsed"||c,...r})]})):h});Hs.displayName="SidebarMenuButton";const KH=_.forwardRef(({className:i,asChild:e=!1,showOnHover:t=!1,...n},r)=>{const s=e?ml:"button";return T.jsx(s,{ref:r,"data-sidebar":"menu-action",className:V("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",i),...n})});KH.displayName="SidebarMenuAction";const ZH=_.forwardRef(({className:i,...e},t)=>T.jsx("div",{ref:t,"data-sidebar":"menu-badge",className:V("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",i),...e}));ZH.displayName="SidebarMenuBadge";const QH=_.forwardRef(({className:i,showIcon:e=!1,...t},n)=>{const r=_.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return T.jsxs("div",{ref:n,"data-sidebar":"menu-skeleton",className:V("flex h-8 items-center gap-2 rounded-md px-2",i),...t,children:[e&&T.jsx(pc,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),T.jsx(pc,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":r}})]})});QH.displayName="SidebarMenuSkeleton";const JH=_.forwardRef(({className:i,...e},t)=>T.jsx("ul",{ref:t,"data-sidebar":"menu-sub",className:V("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",i),...e}));JH.displayName="SidebarMenuSub";const e3=_.forwardRef(({...i},e)=>T.jsx("li",{ref:e,...i}));e3.displayName="SidebarMenuSubItem";const t3=_.forwardRef(({asChild:i=!1,size:e="md",isActive:t,className:n,...r},s)=>{const o=i?ml:"a";return T.jsx(o,{ref:s,"data-sidebar":"menu-sub-button","data-size":e,"data-active":t,className:V("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",n),...r})});t3.displayName="SidebarMenuSubButton";const jt={ADD:"add",REMOVE:"remove"},Xa={PROPERTYCHANGE:"propertychange"},fe={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Jd{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function i3(i,e,t){let n,r;t=t||br;let s=0,o=i.length,a=!1;for(;s<o;)n=s+(o-s>>1),r=+t(i[n],e),r<0?s=n+1:(o=n,a=!r);return a?s:~s}function br(i,e){return i>e?1:i<e?-1:0}function n3(i,e){return i<e?1:i>e?-1:0}function Ew(i,e,t){if(i[0]<=e)return 0;const n=i.length;if(e<=i[n-1])return n-1;if(typeof t=="function"){for(let r=1;r<n;++r){const s=i[r];if(s===e)return r;if(s<e)return t(e,i[r-1],s)>0?r-1:r}return n-1}if(t>0){for(let r=1;r<n;++r)if(i[r]<e)return r-1;return n-1}if(t<0){for(let r=1;r<n;++r)if(i[r]<=e)return r;return n-1}for(let r=1;r<n;++r){if(i[r]==e)return r;if(i[r]<e)return i[r-1]-e<e-i[r]?r-1:r}return n-1}function r3(i,e,t){for(;e<t;){const n=i[e];i[e]=i[t],i[t]=n,++e,--t}}function Ka(i,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let r=0;r<n;r++)i[i.length]=t[r]}function Ss(i,e){const t=i.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(i[n]!==e[n])return!1;return!0}function s3(i,e,t){const n=e||br;return i.every(function(r,s){if(s===0)return!0;const o=n(i[s-1],r);return!(o>0||o===0)})}function vo(){return!0}function pu(){return!1}function Ic(){}function uL(i){let e,t,n;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==n||!Ss(r,t))&&(n=this,t=r,e=i.apply(this,arguments)),e}}function o3(i){function e(){let t;try{t=i()}catch(n){return Promise.reject(n)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function bl(i){for(const e in i)delete i[e]}function Za(i){let e;for(e in i)return!1;return!e}class Xn{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class ef extends Jd{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),r=n[e]||(n[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,r=this.listeners_&&this.listeners_[n];if(!r)return;const s=t?new Xn(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let l;for(let c=0,u=r.length;c<u;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[n]===0){let c=a[n];for(delete a[n];c--;)this.removeEventListener(n,Ic);delete o[n]}return l}disposeInternal(){this.listeners_&&bl(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const r=n.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[r]=Ic,++this.pendingRemovals_[e]):(n.splice(r,1),n.length===0&&delete this.listeners_[e]))}}function Me(i,e,t,n,r){if(r){const o=t;t=function(a){return i.removeEventListener(e,t),o.call(n??this,a)}}else n&&n!==i&&(t=t.bind(n));const s={target:i,type:e,listener:t};return i.addEventListener(e,t),s}function id(i,e,t,n){return Me(i,e,t,n,!0)}function st(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),bl(i))}class mu extends ef{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(fe.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=Me(this,e[s],t);return r}return Me(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const r=e.length;n=new Array(r);for(let s=0;s<r;++s)n[s]=id(this,e[s],t)}else n=id(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)a3(n);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}mu.prototype.on;mu.prototype.once;mu.prototype.un;function a3(i){if(Array.isArray(i))for(let e=0,t=i.length;e<t;++e)st(i[e]);else st(i)}function Ne(){throw new Error("Unimplemented abstract method.")}let l3=0;function Se(i){return i.ol_uid||(i.ol_uid=String(++l3))}class R1 extends Xn{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class En extends mu{constructor(e){super(),this.on,this.once,this.un,Se(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new R1(n,e,t)),n=Xa.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new R1(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const r=this.values_||(this.values_={});if(n)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],Za(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}const O1={LENGTH:"length"};class hh extends Xn{constructor(e,t,n){super(e),this.element=t,this.index=n}}let un=class extends En{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,r=this.array_.length;n<r;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,r=t.length;n<r;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(O1.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new hh(jt.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,r=t.length;n<r;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new hh(jt.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new hh(jt.REMOVE,r,e)),this.dispatchEvent(new hh(jt.ADD,t,e))}updateLength_(){this.set(O1.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}};class pa extends Xn{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}class ts extends pa{constructor(e,t,n,r,s,o){super(e,t,s),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const dt={SINGLECLICK:"singleclick",CLICK:fe.CLICK,DBLCLICK:fe.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},yo=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",c3=yo.includes("safari")&&!yo.includes("chrom");c3&&(yo.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(yo));const u3=yo.includes("webkit")&&!yo.includes("edge"),Cw=yo.includes("macintosh"),h3=typeof devicePixelRatio<"u"?devicePixelRatio:1,Tw=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,hL=typeof Image<"u"&&Image.prototype.decode,dL=(function(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i})(),t0={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class d3 extends ef{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Me(n,t0.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Me(n,t0.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(fe.TOUCHMOVE,this.boundHandleTouchMove_,dL?{passive:!1}:!1)}emulateClick_(e){let t=new ts(dt.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new ts(dt.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new ts(dt.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==dt.POINTERUP||t.type==dt.POINTERCANCEL){delete this.trackedTouches_[n];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==dt.POINTERDOWN||t.type==dt.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new ts(dt.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(st),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new ts(dt.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Me(n,dt.POINTERMOVE,this.handlePointerMove_,this),Me(n,dt.POINTERUP,this.handlePointerUp_,this),Me(this.element_,dt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Me(this.element_.getRootNode(),dt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new ts(dt.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new ts(dt.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(st(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(fe.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(st(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(st),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const ur={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Jt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},oe={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function We(i,e){if(!i)throw new Error(e)}const nd=1/0;class f3{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,bl(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(n);return delete this.queuedElements_[r],n}enqueue(e){We(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=nd?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,r=t.length,s=t[e],o=n[e],a=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),u=c<r&&n[c]<n[l]?c:l;t[e]=t[u],n[e]=n[u],e=u}t[e]=s,n[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const n=this.elements_,r=this.priorities_,s=n[t],o=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>o)n[t]=n[a],r[t]=r[a],t=a;else break}n[t]=s,r[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let r=0;const s=t.length;let o,a,l;for(a=0;a<s;++a)o=t[a],l=e(o),l==nd?delete this.queuedElements_[this.keyFunction_(o)]:(n[r]=l,t[r++]=o);t.length=r,n.length=r,this.heapify_()}}class p3 extends f3{constructor(e,t){super(n=>e.apply(null,n),n=>n[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(fe.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===oe.LOADED||n===oe.ERROR||n===oe.EMPTY){n!==oe.ERROR&&t.removeEventListener(fe.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;){const r=this.dequeue()[0],s=r.getKey();r.getState()===oe.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++n,r.load())}}}function m3(i,e,t,n,r){if(!i||!(t in i.wantedTiles)||!i.wantedTiles[t][e.getKey()])return nd;const s=i.viewState.center,o=n[0]-s[0],a=n[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}const ti={ANIMATING:0,INTERACTING:1},on={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function pt(i,e,t){return Math.min(Math.max(i,e),t)}function g3(i,e,t,n,r,s){const o=r-t,a=s-n;if(o!==0||a!==0){const l=((i-t)*o+(e-n)*a)/(o*o+a*a);l>1?(t=r,n=s):l>0&&(t+=o*l,n+=a*l)}return Na(i,e,t,n)}function Na(i,e,t,n){const r=t-i,s=n-e;return r*r+s*s}function v3(i){const e=i.length;for(let n=0;n<e;n++){let r=n,s=Math.abs(i[n][n]);for(let a=n+1;a<e;a++){const l=Math.abs(i[a][n]);l>s&&(s=l,r=a)}if(s===0)return null;const o=i[r];i[r]=i[n],i[n]=o;for(let a=n+1;a<e;a++){const l=-i[a][n]/i[n][n];for(let c=n;c<e+1;c++)n==c?i[a][c]=0:i[a][c]+=l*i[n][c]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=i[n][e]/i[n][n];for(let r=n-1;r>=0;r--)i[r][e]-=i[r][n]*t[n]}return t}function I1(i){return i*180/Math.PI}function us(i){return i*Math.PI/180}function La(i,e){const t=i%e;return t*e<0?t+e:t}function ki(i,e,t){return i+t*(e-i)}function tf(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}function dh(i,e){return Math.floor(tf(i,e))}function fh(i,e){return Math.ceil(tf(i,e))}function i0(i,e,t){if(i>=e&&i<t)return i;const n=t-e;return((i-e)%n+n)%n+e}function D1(i,e,t){return(function(n,r,s,o,a){if(!n)return;if(!r&&!e)return n;const l=e?0:s[0]*r,c=e?0:s[1]*r,u=a?a[0]:0,h=a?a[1]:0;let d=i[0]+l/2+u,f=i[2]-l/2+u,p=i[1]+c/2+h,m=i[3]-c/2+h;d>f&&(d=(f+d)/2,f=d),p>m&&(p=(m+p)/2,m=p);let g=pt(n[0],d,f),v=pt(n[1],p,m);if(o&&t&&r){const y=30*r;g+=-y*Math.log(1+Math.max(0,d-n[0])/y)+y*Math.log(1+Math.max(0,n[0]-f)/y),v+=-y*Math.log(1+Math.max(0,p-n[1])/y)+y*Math.log(1+Math.max(0,n[1]-m)/y)}return[g,v]})}function y3(i){return i}const Ft={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function P1(i){const e=Li();for(let t=0,n=i.length;t<n;++t)mc(e,i[t]);return e}function nf(i,e,t){return t?(t[0]=i[0]-e,t[1]=i[1]-e,t[2]=i[2]+e,t[3]=i[3]+e,t):[i[0]-e,i[1]-e,i[2]+e,i[3]+e]}function fL(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i.slice()}function Rw(i,e,t){let n,r;return e<i[0]?n=i[0]-e:i[2]<e?n=e-i[2]:n=0,t<i[1]?r=i[1]-t:i[3]<t?r=t-i[3]:r=0,n*n+r*r}function Qa(i,e){return pL(i,e[0],e[1])}function xa(i,e){return i[0]<=e[0]&&e[2]<=i[2]&&i[1]<=e[1]&&e[3]<=i[3]}function pL(i,e,t){return i[0]<=e&&e<=i[2]&&i[1]<=t&&t<=i[3]}function n0(i,e){const t=i[0],n=i[1],r=i[2],s=i[3],o=e[0],a=e[1];let l=Ft.UNKNOWN;return o<t?l=l|Ft.LEFT:o>r&&(l=l|Ft.RIGHT),a<n?l=l|Ft.BELOW:a>s&&(l=l|Ft.ABOVE),l===Ft.UNKNOWN&&(l=Ft.INTERSECTING),l}function Li(){return[1/0,1/0,-1/0,-1/0]}function _s(i,e,t,n,r){return r?(r[0]=i,r[1]=e,r[2]=t,r[3]=n,r):[i,e,t,n]}function rf(i){return _s(1/0,1/0,-1/0,-1/0,i)}function Ow(i,e){const t=i[0],n=i[1];return _s(t,n,t,n,e)}function Iw(i,e,t,n,r){const s=rf(r);return mL(s,i,e,t,n)}function Dc(i,e){return i[0]==e[0]&&i[2]==e[2]&&i[1]==e[1]&&i[3]==e[3]}function _3(i,e){return e[0]<i[0]&&(i[0]=e[0]),e[2]>i[2]&&(i[2]=e[2]),e[1]<i[1]&&(i[1]=e[1]),e[3]>i[3]&&(i[3]=e[3]),i}function mc(i,e){e[0]<i[0]&&(i[0]=e[0]),e[0]>i[2]&&(i[2]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[1]>i[3]&&(i[3]=e[1])}function mL(i,e,t,n,r){for(;t<n;t+=r)b3(i,e[t],e[t+1]);return i}function b3(i,e,t){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}function gL(i,e){let t;return t=e(sf(i)),t||(t=e(of(i)),t)||(t=e(af(i)),t)||(t=e(Mo(i)),t)?t:!1}function r0(i){let e=0;return lf(i)||(e=He(i)*li(i)),e}function sf(i){return[i[0],i[1]]}function of(i){return[i[2],i[1]]}function bs(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function w3(i,e){let t;if(e==="bottom-left")t=sf(i);else if(e==="bottom-right")t=of(i);else if(e==="top-left")t=Mo(i);else if(e==="top-right")t=af(i);else throw new Error("Invalid corner");return t}function s0(i,e,t,n,r){const[s,o,a,l,c,u,h,d]=vL(i,e,t,n);return _s(Math.min(s,a,c,h),Math.min(o,l,u,d),Math.max(s,a,c,h),Math.max(o,l,u,d),r)}function vL(i,e,t,n){const r=e*n[0]/2,s=e*n[1]/2,o=Math.cos(t),a=Math.sin(t),l=r*o,c=r*a,u=s*o,h=s*a,d=i[0],f=i[1];return[d-l+h,f-c-u,d-l-h,f-c+u,d+l-h,f+c+u,d+l+h,f+c-u,d-l+h,f-c-u]}function li(i){return i[3]-i[1]}function ro(i,e,t){const n=t||Li();return yi(i,e)?(i[0]>e[0]?n[0]=i[0]:n[0]=e[0],i[1]>e[1]?n[1]=i[1]:n[1]=e[1],i[2]<e[2]?n[2]=i[2]:n[2]=e[2],i[3]<e[3]?n[3]=i[3]:n[3]=e[3]):rf(n),n}function Mo(i){return[i[0],i[3]]}function af(i){return[i[2],i[3]]}function He(i){return i[2]-i[0]}function yi(i,e){return i[0]<=e[2]&&i[2]>=e[0]&&i[1]<=e[3]&&i[3]>=e[1]}function lf(i){return i[2]<i[0]||i[3]<i[1]}function x3(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i}function S3(i,e,t){let n=!1;const r=n0(i,e),s=n0(i,t);if(r===Ft.INTERSECTING||s===Ft.INTERSECTING)n=!0;else{const o=i[0],a=i[1],l=i[2],c=i[3],u=e[0],h=e[1],d=t[0],f=t[1],p=(f-h)/(d-u);let m,g;s&Ft.ABOVE&&!(r&Ft.ABOVE)&&(m=d-(f-c)/p,n=m>=o&&m<=l),!n&&s&Ft.RIGHT&&!(r&Ft.RIGHT)&&(g=f-(d-l)*p,n=g>=a&&g<=c),!n&&s&Ft.BELOW&&!(r&Ft.BELOW)&&(m=d-(f-a)/p,n=m>=o&&m<=l),!n&&s&Ft.LEFT&&!(r&Ft.LEFT)&&(g=f-(d-o)*p,n=g>=a&&g<=c)}return n}function yL(i,e){const t=e.getExtent(),n=bs(i);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const r=He(t),o=Math.floor((n[0]-t[0])/r)*r;i[0]-=o,i[2]-=o}return i}function _L(i,e,t){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[n[0],i[1],n[2],i[3]]];yL(i,e);const r=He(n);if(He(i)>r&&!t)return[[n[0],i[1],n[2],i[3]]];if(i[0]<n[0])return[[i[0]+r,i[1],n[2],i[3]],[n[0],i[1],i[2],i[3]]];if(i[2]>n[2])return[[i[0],i[1],n[2],i[3]],[n[0],i[1],i[2]-r,i[3]]]}return[i]}function bL(i,e){return i[0]+=+e[0],i[1]+=+e[1],i}function rd(i,e){let t=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=e[n]){t=!1;break}return t}function Dw(i,e){const t=Math.cos(e),n=Math.sin(e),r=i[0]*t-i[1]*n,s=i[1]*t+i[0]*n;return i[0]=r,i[1]=s,i}function wL(i,e){return i[0]*=e,i[1]*=e,i}function xL(i,e){if(e.canWrapX()){const t=He(e.getExtent()),n=E3(i,e,t);n&&(i[0]-=n*t)}return i}function E3(i,e,t){const n=e.getExtent();let r=0;return e.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(t=t||He(n),r=Math.floor((i[0]-n[0])/t)),r}function SL(i){return Math.pow(i,3)}function wl(i){return 1-SL(1-i)}function C3(i){return 3*i*i-2*i*i*i}function T3(i){return i}const R3=63710088e-1;function k1(i,e,t){t=t||R3;const n=us(i[1]),r=us(e[1]),s=(r-n)/2,o=us(e[0]-i[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function EL(...i){console.warn(...i)}const Pw={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class kw{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Pw[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const gu=6378137,Sa=Math.PI*gu,O3=[-Sa,-Sa,Sa,Sa],I3=[-180,-85,180,85],ph=gu*Math.log(Math.tan(Math.PI/2));class Qo extends kw{constructor(e){super({code:e,units:"m",extent:O3,global:!0,worldExtent:I3,getPointResolution:function(t,n){return t/Math.cosh(n[1]/gu)}})}}const M1=[new Qo("EPSG:3857"),new Qo("EPSG:102100"),new Qo("EPSG:102113"),new Qo("EPSG:900913"),new Qo("http://www.opengis.net/def/crs/EPSG/0/3857"),new Qo("http://www.opengis.net/gml/srs/epsg.xml#3857")];function D3(i,e,t,n){const r=i.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=i.slice():e=new Array(r));for(let s=0;s<r;s+=n){e[s]=Sa*i[s]/180;let o=gu*Math.log(Math.tan(Math.PI*(+i[s+1]+90)/360));o>ph?o=ph:o<-ph&&(o=-ph),e[s+1]=o}return e}function P3(i,e,t,n){const r=i.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=i.slice():e=new Array(r));for(let s=0;s<r;s+=n)e[s]=180*i[s]/Sa,e[s+1]=360*Math.atan(Math.exp(i[s+1]/gu))/Math.PI-90;return e}const k3=6378137,A1=[-180,-90,180,90],M3=Math.PI*k3/180;class Fs extends kw{constructor(e,t){super({code:e,units:"degrees",extent:A1,axisOrientation:t,global:!0,metersPerUnit:M3,worldExtent:A1})}}const N1=[new Fs("CRS:84"),new Fs("EPSG:4326","neu"),new Fs("urn:ogc:def:crs:OGC:1.3:CRS84"),new Fs("urn:ogc:def:crs:OGC:2:84"),new Fs("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Fs("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Fs("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let o0={};function A3(i){return o0[i]||o0[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function N3(i,e){o0[i]=e}let Fa={};function Pc(i,e,t){const n=i.getCode(),r=e.getCode();n in Fa||(Fa[n]={}),Fa[n][r]=t}function wp(i,e){return i in Fa&&e in Fa[i]?Fa[i][e]:null}const sd=.9996,Ki=.00669438,cf=Ki*Ki,uf=cf*Ki,Vs=Ki/(1-Ki),L1=Math.sqrt(1-Ki),Ja=(1-L1)/(1+L1),CL=Ja*Ja,Mw=CL*Ja,Aw=Mw*Ja,TL=Aw*Ja,RL=1-Ki/4-3*cf/64-5*uf/256,L3=3*Ki/8+3*cf/32+45*uf/1024,F3=15*cf/256+45*uf/1024,$3=35*uf/3072,j3=3/2*Ja-27/32*Mw+269/512*TL,W3=21/16*CL-55/32*Aw,z3=151/96*Mw-417/128*TL,q3=1097/512*Aw,od=6378137;function G3(i,e,t){const n=i-5e5,o=(t.north?e:e-1e7)/sd/(od*RL),a=o+j3*Math.sin(2*o)+W3*Math.sin(4*o)+z3*Math.sin(6*o)+q3*Math.sin(8*o),l=Math.sin(a),c=l*l,u=Math.cos(a),h=l/u,d=h*h,f=d*d,p=1-Ki*c,m=Math.sqrt(1-Ki*c),g=od/m,v=(1-Ki)/p,y=Vs*u**2,w=y*y,b=n/(g*sd),x=b*b,C=x*b,E=C*b,S=E*b,R=S*b,I=a-h/v*(x/2-E/24*(5+3*d+10*y-4*w-9*Vs))+R/720*(61+90*d+298*y+45*f-252*Vs-3*w);let k=(b-C/6*(1+2*d+y)+S/120*(5-2*y+28*d-3*w+8*Vs+24*f))/u;return k=i0(k+us(OL(t.number)),-Math.PI,Math.PI),[I1(k),I1(I)]}const F1=-80,$1=84,Y3=-180,B3=180;function H3(i,e,t){i=i0(i,Y3,B3),e<F1?e=F1:e>$1&&(e=$1);const n=us(e),r=Math.sin(n),s=Math.cos(n),o=r/s,a=o*o,l=a*a,c=us(i),u=OL(t.number),h=us(u),d=od/Math.sqrt(1-Ki*r**2),f=Vs*s**2,p=s*i0(c-h,-Math.PI,Math.PI),m=p*p,g=m*p,v=g*p,y=v*p,w=y*p,b=od*(RL*n-L3*Math.sin(2*n)+F3*Math.sin(4*n)-$3*Math.sin(6*n)),x=sd*d*(p+g/6*(1-a+f)+y/120*(5-18*a+l+72*f-58*Vs))+5e5;let C=sd*(b+d*o*(m/2+v/24*(5-a+9*f+4*f**2)+w/720*(61-58*a+l+600*f-330*Vs)));return t.north||(C+=1e7),[x,C]}function OL(i){return(i-1)*6-180+3}const U3=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function IL(i){let e=0;for(const r of U3){const s=i.match(r);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,n=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(n=!0,t=e-32600),t?{number:t,north:n}:null}function j1(i,e){return function(t,n,r,s){const o=t.length;r=r>1?r:2,s=s??r,n||(r>2?n=t.slice():n=new Array(o));for(let a=0;a<o;a+=s){const l=t[a],c=t[a+1],u=i(l,c,e);n[a]=u[0],n[a+1]=u[1]}return n}}function V3(i){return IL(i)?new kw({code:i,units:"m"}):null}function X3(i){const e=IL(i.getCode());return e?{forward:j1(H3,e),inverse:j1(G3,e)}:null}const K3=[X3],Z3=[V3];let a0=!0;function DL(i){a0=!1}function Nw(i,e){if(e!==void 0){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];e=e}else e=i.slice();return e}function l0(i){N3(i.getCode(),i),Pc(i,i,Nw)}function Q3(i){i.forEach(l0)}function xi(i){if(typeof i!="string")return i;const e=A3(i);if(e)return e;for(const t of Z3){const n=t(i);if(n)return n}return null}function W1(i,e,t,n){i=xi(i);let r;const s=i.getPointResolutionFunc();if(s)r=s(e,t);else{const o=i.getUnits();if(o=="degrees"&&!n||n=="degrees")r=e;else{const a=Fw(i,xi("EPSG:4326"));if(!a&&o!=="degrees")r=e*i.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=a(c,c,2);const u=k1(c.slice(0,2),c.slice(2,4)),h=k1(c.slice(4,6),c.slice(6,8));r=(u+h)/2}const l=i.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function z1(i){Q3(i),i.forEach(function(e){i.forEach(function(t){e!==t&&Pc(e,t,Nw)})})}function J3(i,e,t,n){i.forEach(function(r){e.forEach(function(s){Pc(r,s,t),Pc(s,r,n)})})}function Lw(i,e){return i?typeof i=="string"?xi(i):i:xi(e)}function eU(i){return(function(e,t,n,r){const s=e.length;n=n!==void 0?n:2,r=r??n,t=t!==void 0?t:new Array(s);for(let o=0;o<s;o+=r){const a=i(e.slice(o,o+n)),l=a.length;for(let c=0,u=r;c<u;++c)t[o+c]=c>=l?e[o+c]:a[c]}return t})}function $a(i,e){return DL(),$w(i,"EPSG:4326","EPSG:3857")}function xp(i,e){if(i===e)return!0;const t=i.getUnits()===e.getUnits();return(i.getCode()===e.getCode()||Fw(i,e)===Nw)&&t}function Fw(i,e){const t=i.getCode(),n=e.getCode();let r=wp(t,n);if(r)return r;let s=null,o=null;for(const l of K3)s||(s=l(i)),o||(o=l(e));if(!s&&!o)return null;const a="EPSG:4326";if(o)if(s)r=Sp(s.inverse,o.forward);else{const l=wp(t,a);l&&(r=Sp(l,o.forward))}else{const l=wp(a,n);l&&(r=Sp(s.inverse,l))}return r&&(l0(i),l0(e),Pc(i,e,r)),r}function Sp(i,e){return function(t,n,r,s){return n=i(t,n,r,s),e(n,n,r,s)}}function ad(i,e){const t=xi(i),n=xi(e);return Fw(t,n)}function $w(i,e,t){const n=ad(e,t);if(!n){const r=xi(e).getCode(),s=xi(t).getCode();throw new Error(`No transform available between ${r} and ${s}`)}return n(i,void 0,i.length)}function c0(i,e){return i}function cr(i,e){return a0&&!rd(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(a0=!1,EL("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function PL(i,e){return i}function os(i,e){return i}function tU(){z1(M1),z1(N1),J3(N1,M1,D3,P3)}tU();new Array(6);function fn(){return[1,0,0,1,0,0]}function iU(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i}function $t(i,e){const t=e[0],n=e[1];return e[0]=i[0]*t+i[2]*n+i[4],e[1]=i[1]*t+i[3]*n+i[5],e}function Mr(i,e,t,n,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return i[0]=n*c,i[1]=r*l,i[2]=-n*l,i[3]=r*c,i[4]=o*n*c-a*n*l+e,i[5]=o*r*l+a*r*c+t,i}function kL(i,e){const t=nU(e);We(t!==0,"Transformation matrix cannot be inverted");const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return i[0]=o/t,i[1]=-r/t,i[2]=-s/t,i[3]=n/t,i[4]=(s*l-o*a)/t,i[5]=-(n*l-r*a)/t,i}function nU(i){return i[0]*i[3]-i[1]*i[2]}const rU=[1e5,1e5,1e5,1e5,2,2];function sU(i){return"matrix("+i.join(", ")+")"}function q1(i){return i.substring(7,i.length-1).split(",").map(parseFloat)}function oU(i,e){const t=q1(i),n=q1(e);for(let r=0;r<6;++r)if(Math.round((t[r]-n[r])*rU[r])!==0)return!1;return!0}function hs(i,e,t,n,r,s,o){s=s||[],o=o||2;let a=0;for(let l=e;l<t;l+=n){const c=i[l],u=i[l+1];s[a++]=r[0]*c+r[2]*u+r[4],s[a++]=r[1]*c+r[3]*u+r[5];for(let h=2;h<o;h++)s[a++]=i[l+h]}return s&&s.length!=a&&(s.length=a),s}function ML(i,e,t,n,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],u=s[1];let h=0;for(let d=e;d<t;d+=n){const f=i[d]-c,p=i[d+1]-u;o[h++]=c+f*a-p*l,o[h++]=u+f*l+p*a;for(let m=d+2;m<d+n;++m)o[h++]=i[m]}return o&&o.length!=h&&(o.length=h),o}function aU(i,e,t,n,r,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let h=e;h<t;h+=n){const d=i[h]-l,f=i[h+1]-c;a[u++]=l+r*d,a[u++]=c+s*f;for(let p=h+2;p<h+n;++p)a[u++]=i[p]}return a&&a.length!=u&&(a.length=u),a}function lU(i,e,t,n,r,s,o){o=o||[];let a=0;for(let l=e;l<t;l+=n){o[a++]=i[l]+r,o[a++]=i[l+1]+s;for(let c=l+2;c<l+n;++c)o[a++]=i[c]}return o&&o.length!=a&&(o.length=a),o}const G1=fn(),cU=[NaN,NaN];class uU extends En{constructor(){super(),this.extent_=Li(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=uL((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Ne()}closestPointXY(e,t,n,r){return Ne()}containsXY(e,t){return this.closestPointXY(e,t,cU,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Ne()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&rf(t),this.extentRevision_=this.getRevision()}return x3(this.extent_,e)}rotate(e,t){Ne()}scale(e,t,n){Ne()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Ne()}getType(){return Ne()}applyTransform(e){Ne()}intersectsExtent(e){return Ne()}translate(e,t){Ne()}transform(e,t){const n=xi(e),r=n.getUnits()=="tile-pixels"?function(s,o,a){const l=n.getExtent(),c=n.getWorldExtent(),u=li(c)/li(l);Mr(G1,c[0],c[3],u,-u,0,0,0);const h=hs(s,0,s.length,a,G1,o),d=ad(n,t);return d?d(h,h,a):h}:ad(n,t);return this.applyTransform(r),this}}class hf extends uU{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return Iw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Ne()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Y1(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Ne()}setLayout(e,t,n){let r;if(e)r=Y1(e);else{for(let s=0;s<n;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=hU(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const r=this.getStride();ML(n,0,n.length,r,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=bs(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();aU(r,0,r.length,s,e,t,n,r),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const r=this.getStride();lU(n,0,n.length,r,e,t,n),this.changed()}}}function hU(i){let e;return i==2?e="XY":i==3?e="XYZ":i==4&&(e="XYZM"),e}function Y1(i){let e;return i=="XY"?e=2:i=="XYZ"||i=="XYM"?e=3:i=="XYZM"&&(e=4),e}function dU(i,e,t){const n=i.getFlatCoordinates();if(!n)return null;const r=i.getStride();return hs(n,0,n.length,r,e,t)}function AL(i,e,t,n){let r=0;const s=i[t-n],o=i[t-n+1];let a=0,l=0;for(;e<t;e+=n){const c=i[e]-s,u=i[e+1]-o;r+=l*c-a*u,a=c,l=u}return r/2}function fU(i,e,t,n){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=AL(i,e,a,n),e=a}return r}function B1(i,e,t,n,r,s,o){const a=i[e],l=i[e+1],c=i[t]-a,u=i[t+1]-l;let h;if(c===0&&u===0)h=e;else{const d=((r-a)*c+(s-l)*u)/(c*c+u*u);if(d>1)h=t;else if(d>0){for(let f=0;f<n;++f)o[f]=ki(i[e+f],i[t+f],d);o.length=n;return}else h=e}for(let d=0;d<n;++d)o[d]=i[h+d];o.length=n}function jw(i,e,t,n,r){let s=i[e],o=i[e+1];for(e+=n;e<t;e+=n){const a=i[e],l=i[e+1],c=Na(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function pU(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=jw(i,e,a,n,r),e=a}return r}function Ww(i,e,t,n,r,s,o,a,l,c,u){if(e==t)return c;let h,d;if(r===0){if(d=Na(o,a,i[e],i[e+1]),d<c){for(h=0;h<n;++h)l[h]=i[e+h];return l.length=n,d}return c}u=u||[NaN,NaN];let f=e+n;for(;f<t;)if(B1(i,f-n,f,n,o,a,u),d=Na(o,a,u[0],u[1]),d<c){for(c=d,h=0;h<n;++h)l[h]=u[h];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(d)-Math.sqrt(c))/r|0,1);if(s&&(B1(i,t-n,e,n,o,a,u),d=Na(o,a,u[0],u[1]),d<c)){for(c=d,h=0;h<n;++h)l[h]=u[h];l.length=n}return c}function mU(i,e,t,n,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const f=t[h];c=Ww(i,e,f,n,r,s,o,a,l,c,u),e=f}return c}function gU(i,e,t,n){for(let r=0,s=t.length;r<s;++r)i[e++]=t[r];return e}function zw(i,e,t,n){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0;a<n;++a)i[e++]=o[a]}return e}function vU(i,e,t,n,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=zw(i,e,t[o],n);r[s++]=l,e=l}return r.length=s,r}function Xs(i,e,t,n,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<t;o+=n)r[s++]=i.slice(o,o+n);return r.length=s,r}function ld(i,e,t,n,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=Xs(i,e,l,n,r[s]),e=l}return r.length=s,r}function H1(i,e,t,n,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=l.length===1&&l[0]===e?[]:ld(i,e,l,n,r[s]),e=l[l.length-1]}return r.length=s,r}function df(i,e,t,n,r,s,o){const a=(t-e)/n;if(a<3){for(;e<t;e+=n)s[o++]=i[e],s[o++]=i[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,t-n];let u=0;for(;c.length>0;){const h=c.pop(),d=c.pop();let f=0;const p=i[d],m=i[d+1],g=i[h],v=i[h+1];for(let y=d+n;y<h;y+=n){const w=i[y],b=i[y+1],x=g3(w,b,p,m,g,v);x>f&&(u=y,f=x)}f>r&&(l[(u-e)/n]=1,d+n<u&&c.push(d,u),u+n<h&&c.push(u,h))}for(let h=0;h<a;++h)l[h]&&(s[o++]=i[e+h*n],s[o++]=i[e+h*n+1]);return o}function yU(i,e,t,n,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l];o=df(i,e,u,n,r,s,o),a.push(o),e=u}return o}function Gs(i,e){return e*Math.round(i/e)}function _U(i,e,t,n,r,s,o){if(e==t)return o;let a=Gs(i[e],r),l=Gs(i[e+1],r);e+=n,s[o++]=a,s[o++]=l;let c,u;do if(c=Gs(i[e],r),u=Gs(i[e+1],r),e+=n,e==t)return s[o++]=c,s[o++]=u,o;while(c==a&&u==l);for(;e<t;){const h=Gs(i[e],r),d=Gs(i[e+1],r);if(e+=n,h==c&&d==u)continue;const f=c-a,p=u-l,m=h-a,g=d-l;if(f*g==p*m&&(f<0&&m<f||f==m||f>0&&m>f)&&(p<0&&g<p||p==g||p>0&&g>p)){c=h,u=d;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=h,u=d}return s[o++]=c,s[o++]=u,o}function NL(i,e,t,n,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l];o=_U(i,e,u,n,r,s,o),a.push(o),e=u}return o}class kc extends hf{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new kc(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,r){return r<Rw(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(jw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ww(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,r))}getArea(){return AL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Xs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=df(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new kc(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=zw(this.flatCoordinates,0,e,this.stride),this.changed()}}class Es extends hf{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Es(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){const s=this.flatCoordinates,o=Na(e,t,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)n[l]=s[l];return n.length=a,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Ow(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return pL(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=gU(this.flatCoordinates,0,e,this.stride),this.changed()}}function bU(i,e,t,n,r){return!gL(r,function(o){return!Ks(i,e,t,n,o[0],o[1])})}function Ks(i,e,t,n,r,s){let o=0,a=i[t-n],l=i[t-n+1];for(;e<t;e+=n){const c=i[e],u=i[e+1];l<=s?u>s&&(c-a)*(s-l)-(r-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(r-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function LL(i,e,t,n,r,s){if(t.length===0||!Ks(i,e,t[0],n,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if(Ks(i,t[o-1],t[o],n,r,s))return!1;return!0}function qw(i,e,t,n,r,s,o){let a,l,c,u,h,d,f;const p=r[s+1],m=[];for(let y=0,w=t.length;y<w;++y){const b=t[y];for(u=i[b-n],d=i[b-n+1],a=e;a<b;a+=n)h=i[a],f=i[a+1],(p<=d&&f<=p||d<=p&&p<=f)&&(c=(p-d)/(f-d)*(h-u)+u,m.push(c)),u=h,d=f}let g=NaN,v=-1/0;for(m.sort(br),u=m[0],a=1,l=m.length;a<l;++a){h=m[a];const y=Math.abs(h-u);y>v&&(c=(u+h)/2,LL(i,e,t,n,c,p)&&(g=c,v=y)),u=h}return isNaN(g)&&(g=r[s]),o?(o.push(g,p,v),o):[g,p,v]}function wU(i,e,t,n,r){let s=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];s=qw(i,e,l,n,r,2*o,s),e=l[l.length-1]}return s}function FL(i,e,t,n,r){let s;for(e+=n;e<t;e+=n)if(s=r(i.slice(e-n,e),i.slice(e,e+n)),s)return s;return!1}function Gw(i,e,t,n,r,s){return s=s??mL(Li(),i,e,t,n),yi(r,s)?s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:FL(i,e,t,n,function(o,a){return S3(r,o,a)}):!1}function $L(i,e,t,n,r){return!!(Gw(i,e,t,n,r)||Ks(i,e,t,n,r[0],r[1])||Ks(i,e,t,n,r[0],r[3])||Ks(i,e,t,n,r[2],r[1])||Ks(i,e,t,n,r[2],r[3]))}function xU(i,e,t,n,r){if(!$L(i,e,t[0],n,r))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(bU(i,t[s-1],t[s],n,r)&&!Gw(i,t[s-1],t[s],n,r))return!1;return!0}function SU(i,e,t,n){for(;e<t-n;){for(let r=0;r<n;++r){const s=i[e+r];i[e+r]=i[t-n+r],i[t-n+r]=s}e+=n,t-=n}}function Yw(i,e,t,n){let r=0,s=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],l=i[e+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function EU(i,e,t,n,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=Yw(i,e,a,n);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}function U1(i,e,t,n,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=Yw(i,e,a,n);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&SU(i,e,a,n),e=a}return e}function CU(i,e){const t=[];let n=0,r=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=Yw(i,n,l,2);if(s===void 0&&(s=c),c===s)t.push(e.slice(r,o+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=o+1,n=l}return t}class Mc extends hf{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Ka(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Mc(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,r){return r<Rw(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(pU(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),mU(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,r))}containsXY(e,t){return LL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return fU(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),U1(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,ld(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=bs(this.getExtent());this.flatInteriorPoint_=qw(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Es(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new kc(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new kc(t.slice(s,l),e);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;EU(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=U1(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=NL(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new Mc(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return xU(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=vU(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function V1(i){if(lf(i))throw new Error("Cannot create polygon from empty extent");const e=i[0],t=i[1],n=i[2],r=i[3],s=[e,t,e,r,n,r,n,t,e,t];return new Mc(s,"XY",[s.length])}function Bw(i,e,t,n){const r=He(e)/t[0],s=li(e)/t[1];return n?Math.min(i,Math.max(r,s)):Math.min(i,Math.min(r,s))}function Hw(i,e,t){let n=Math.min(i,e);const r=50;return n*=Math.log(1+r*Math.max(0,i/e-1))/r+1,t&&(n=Math.max(n,t),n/=Math.log(1+r*Math.max(0,t/i-1))/r+1),pt(n,t/2,e*2)}function TU(i,e,t,n){return e=e!==void 0?e:!0,(function(r,s,o,a){if(r!==void 0){const l=i[0],c=i[i.length-1],u=t?Bw(l,t,o,n):l;if(a)return e?Hw(r,u,c):pt(r,c,u);const h=Math.min(u,r),d=Math.floor(Ew(i,h,s));return i[d]>u&&d<i.length-1?i[d+1]:i[d]}})}function RU(i,e,t,n,r,s){return n=n!==void 0?n:!0,t=t!==void 0?t:0,(function(o,a,l,c){if(o!==void 0){const u=r?Bw(e,r,l,s):e;if(c)return n?Hw(o,u,t):pt(o,t,u);const h=1e-9,d=Math.ceil(Math.log(e/u)/Math.log(i)-h),f=-a*(.5-h)+.5,p=Math.min(u,o),m=Math.floor(Math.log(e/p)/Math.log(i)+f),g=Math.max(d,m),v=e/Math.pow(i,g);return pt(v,t,u)}})}function X1(i,e,t,n,r){return t=t!==void 0?t:!0,(function(s,o,a,l){if(s!==void 0){const c=n?Bw(i,n,a,r):i;return!t||!l?pt(s,e,c):Hw(s,c,e)}})}function Uw(i){if(i!==void 0)return 0}function K1(i){if(i!==void 0)return i}function OU(i){const e=2*Math.PI/i;return(function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function IU(i){const e=us(5);return(function(t,n){return n||t===void 0?t:Math.abs(t)<=e?0:t})}const DU=42,Vw=256,Ep=0;class kn extends En{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Lw(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&DL(),e.center&&(e.center=cr(e.center,this.projection_)),e.extent&&(e.extent=os(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in on)delete t[a];this.setProperties(t,!0);const n=kU(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const r=PU(e),s=n.constraint,o=MU(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-t[3]+t[1]-r[1]),a=s/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let r=arguments[n];r.center&&(r=Object.assign({},r),r.center=cr(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=cr(r.anchor,this.getProjection())),t[n]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const u=arguments[r];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(r===t){n&&mh(n,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<t;++r){const u=arguments[r],h={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||C3,callback:n};if(u.center&&(h.sourceCenter=o,h.targetCenter=u.center.slice(),o=h.targetCenter),u.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(u.zoom),a=h.targetResolution):u.resolution&&(h.sourceResolution=a,h.targetResolution=u.resolution,a=h.targetResolution),u.rotation!==void 0){h.sourceRotation=l;const d=La(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+d,l=h.targetRotation}AU(h)?h.complete=!0:s+=h.duration,c.push(h)}this.animations_.push(c),this.setHint(ti.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ti.ANIMATING]>0}getInteracting(){return this.hints_[ti.INTERACTING]>0}cancelAnimations(){this.setHint(ti.ANIMATING,-this.hints_[ti.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const r=this.animations_[t];if(r[0].callback&&mh(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const r=this.animations_[n];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const c=e-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const h=l.easing(u);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],p=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const g=d+h*(p-d),v=f+h*(m-f);this.targetCenter_=[g,v]}if(l.sourceResolution&&l.targetResolution){const d=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),p=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(p,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=h===1?La(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[n]=null,this.setHint(ti.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&mh(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const r=this.getCenterInternal();return r!==void 0&&(n=[r[0]-t[0],r[1]-t[1]],Dw(n,e-this.getRotation()),bL(n,t)),n}calculateCenterZoom(e,t){let n;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=t[0]-e*(t[0]-r[0])/s,a=t[1]-e*(t[1]-r[1])/s;n=[o,a]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],r=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&c0(e,this.getProjection())}getCenterInternal(){return this.get(on.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return PL(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();We(t,"The view center is not defined");const n=this.getResolution();We(n!==void 0,"The view resolution is not defined");const r=this.getRotation();return We(r!==void 0,"The view rotation is not defined"),s0(t,n,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(on.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(os(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=He(e)/t[0],r=li(e)/t[1];return Math.max(n,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(t/n)/Math.log(e);return(function(s){return t/Math.pow(e,s*r)})}getRotation(){return this.get(on.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(n/r)/t;return(function(o){return Math.log(n/o)/t/s})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=Cp(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,n)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,r;if(this.resolutions_){const s=Ew(this.resolutions_,e,1);t=s,n=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=n/this.resolutions_[s+1]}else n=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(n/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=pt(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(n,pt(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(We(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){We(!lf(e),"Cannot fit empty extent provided as `geometry`");const r=os(e,this.getProjection());n=V1(r)}else if(e.getType()==="Circle"){const r=os(e.getExtent(),this.getProjection());n=V1(r),n.rotate(this.getRotation(),bs(r))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let h=0,d=s.length;h<d;h+=o){const f=s[h]*n-s[h+1]*r,p=s[h]*r+s[h+1]*n;a=Math.min(a,f),l=Math.min(l,p),c=Math.max(c,f),u=Math.max(u,p)}return[a,l,c,u]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),u=Math.sin(c),h=Math.cos(c),d=bs(a);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;const f=d[0]*h-d[1]*u,p=d[1]*h+d[0]*u,m=this.getConstrainedCenter([f,p],l),g=t.callback?t.callback:Ic;t.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:t.duration,easing:t.easing},g):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),mh(g,!0))}centerOn(e,t,n){this.centerOnInternal(cr(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(Cp(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-n),l=Cp(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,n);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=c0(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&cr(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,n);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=cr(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&cr(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,n),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,n),a=this.constraints_.center(this.targetCenter_,o,s,n,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(on.ROTATION)!==r&&this.set(on.ROTATION,r),this.get(on.RESOLUTION)!==o&&(this.set(on.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(on.CENTER)||!rd(this.get(on.CENTER),a))&&this.set(on.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!rd(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:wl,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ti.INTERACTING,1)}endInteraction(e,t,n){n=n&&cr(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(ti.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function mh(i,e){setTimeout(function(){i(e)},0)}function PU(i){if(i.extent!==void 0){const t=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return D1(i.extent,i.constrainOnlyCenter,t)}const e=Lw(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,D1(t,!1,!1)}return y3}function kU(i){let e,t,n,o=i.minZoom!==void 0?i.minZoom:Ep,a=i.maxZoom!==void 0?i.maxZoom:28;const l=i.zoomFactor!==void 0?i.zoomFactor:2,c=i.multiWorld!==void 0?i.multiWorld:!1,u=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,h=i.showFullExtent!==void 0?i.showFullExtent:!1,d=Lw(i.projection,"EPSG:3857"),f=d.getExtent();let p=i.constrainOnlyCenter,m=i.extent;if(!c&&!m&&d.isGlobal()&&(p=!1,m=f),i.resolutions!==void 0){const g=i.resolutions;t=g[o],n=g[a]!==void 0?g[a]:g[g.length-1],i.constrainResolution?e=TU(g,u,!p&&m,h):e=X1(t,n,u,!p&&m,h)}else{const v=(f?Math.max(He(f),li(f)):360*Pw.degrees/d.getMetersPerUnit())/Vw/Math.pow(2,Ep),y=v/Math.pow(2,28-Ep);t=i.maxResolution,t!==void 0?o=0:t=v/Math.pow(l,o),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=t/Math.pow(l,a):n=v/Math.pow(l,a):n=y),a=o+Math.floor(Math.log(t/n)/Math.log(l)),n=t/Math.pow(l,a-o),i.constrainResolution?e=RU(l,t,n,u,!p&&m,h):e=X1(t,n,u,!p&&m,h)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:o,zoomFactor:l}}function MU(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const t=i.constrainRotation;return t===void 0||t===!0?IU():t===!1?K1:typeof t=="number"?OU(t):K1}return Uw}function AU(i){return!(i.sourceCenter&&i.targetCenter&&!rd(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function Cp(i,e,t,n,r){const s=Math.cos(-r);let o=Math.sin(-r),a=i[0]*s-i[1]*o,l=i[1]*s+i[0]*o;a+=(e[0]/2-t[0])*n,l+=(t[1]-e[1]/2)*n,o=-o;const c=a*s-l*o,u=l*s+a*o;return[c,u]}const gh="ol-hidden",NU="ol-selectable",ff="ol-unselectable",Xw="ol-control",Z1="ol-collapsed",LU=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),Q1=["style","variant","weight","size","lineHeight","family"],u0={normal:400,bold:700},h0=function(i){const e=i.match(LU);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let n=0,r=Q1.length;n<r;++n){const s=e[n+1];s!==void 0&&(t[Q1[n]]=typeof s=="string"?s.trim():s)}return isNaN(Number(t.weight))&&t.weight in u0&&(t.weight=u0[t.weight]),t.families=t.family.split(/,\s?/).map(n=>n.trim().replace(/^['"]|['"]$/g,"")),t};function Nt(i,e,t,n){let r;return t&&t.length?r=t.shift():Tw?r=new OffscreenCanvas(i||300,e||300):r=document.createElement("canvas"),i&&(r.width=i),e&&(r.height=e),r.getContext("2d",n)}let Tp;function cd(){return Tp||(Tp=Nt(1,1)),Tp}function pf(i){const e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}function FU(i){let e=i.offsetWidth;const t=getComputedStyle(i);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function $U(i){let e=i.offsetHeight;const t=getComputedStyle(i);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function J1(i,e){const t=e.parentNode;t&&t.replaceChild(i,e)}function jL(i){for(;i.lastChild;)i.lastChild.remove()}function jU(i,e){const t=i.childNodes;for(let n=0;;++n){const r=t[n],s=e[n];if(!r&&!s)break;if(r!==s){if(!r){i.appendChild(s);continue}if(!s){i.removeChild(r),--n;continue}i.insertBefore(s,r)}}}class Kw extends En{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,n=this.listenerKeys.length;t<n;++t)st(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==Ic&&this.listenerKeys.push(Me(e,ur.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class WU extends Kw{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(fe.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+ff+" "+Xw+(this.collapsed_&&this.collapsible_?" "+Z1:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),n=new Set(t.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>n.add(r)):n.add(this.attributions_)),!this.overrideCollapsible_){const r=!t.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(n)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(r=>o3(()=>r))),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Ss(t,this.renderedAttributions_)){jL(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const o=document.createElement("li");o.innerHTML=t[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Z1),this.collapsed_?J1(this.collapseLabel_,this.label_):J1(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class zU extends Kw{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(fe.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+ff+" "+Xw,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(gh)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:wl}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const r="rotate("+n+"rad)";if(this.autoHide_){const s=this.element.classList.contains(gh);!s&&n===0?this.element.classList.add(gh):s&&n!==0&&this.element.classList.remove(gh)}this.label_.style.transform=r}this.rotation_=n}}class qU extends Kw{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(fe.CLICK,this.handleClick_.bind(this,n),!1);const h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=c,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(fe.CLICK,this.handleClick_.bind(this,-n),!1);const d=t+" "+ff+" "+Xw,f=this.element;f.className=d,f.appendChild(u),f.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const r=n.getZoom();if(r!==void 0){const s=n.getConstrainedZoom(r+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:s,duration:this.duration_,easing:wl})):n.setZoom(s)}}}function GU(i){i=i||{};const e=new un;return(i.zoom!==void 0?i.zoom:!0)&&e.push(new qU(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&e.push(new zU(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&e.push(new WU(i.attributionOptions)),e}class YU{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const r=this.points_[t+2]-this.points_[n+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[n],o=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const eE={ACTIVE:"active"};class xl extends En{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(eE.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(eE.ACTIVE,e)}setMap(e){this.map_=e}}function BU(i,e,t){const n=i.getCenterInternal();if(n){const r=[n[0]+e[0],n[1]+e[1]];i.animateInternal({duration:t!==void 0?t:250,easing:T3,center:i.getConstrainedCenter(r)})}}function Zw(i,e,t,n){const r=i.getZoom();if(r===void 0)return;const s=i.getConstrainedZoom(r+e),o=i.getResolutionForZoom(s);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:t,duration:n!==void 0?n:250,easing:wl})}class HU extends xl{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==dt.DBLCLICK){const n=e.originalEvent,r=e.map,s=e.coordinate,o=n.shiftKey?-this.delta_:this.delta_,a=r.getView();Zw(a,o,s,this.duration_),n.preventDefault(),t=!0}return!t}}function d0(i){const e=arguments;return function(t){let n=!0;for(let r=0,s=e.length;r<s&&(n=n&&e[r](t),!!n);++r);return n}}const UU=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},VU=function(i){const e=i.map.getTargetElement(),t=e.getRootNode(),n=i.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(n):e.contains(n)},WL=function(i){const e=i.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?VU(i):!0},XU=vo,zL=function(i){const e=i.originalEvent;return"pointerId"in e&&e.button==0&&!(u3&&Cw&&e.ctrlKey)},tE=pu,KU=function(i){return i.type==dt.SINGLECLICK},qL=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},ZU=function(i){const e=i.originalEvent;return!e.altKey&&(Cw?e.metaKey:e.ctrlKey)&&!e.shiftKey},QU=function(i){const e=i.originalEvent;return Cw?e.metaKey:e.ctrlKey},Qw=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},GL=function(i){const e=i.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},Rp=function(i){const e=i.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},JU=function(i){const e=i.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class vu extends xl{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==dt.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==dt.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==dt.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==dt.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Jw(i){const e=i.length;let t=0,n=0;for(let r=0;r<e;r++)t+=i[r].clientX,n+=i[r].clientY;return{clientX:t/e,clientY:n/e}}class e5 extends vu{constructor(e){super({stopDown:pu}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:d0(qL,JU);this.condition_=e.onFocusOnly?d0(WL,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,r=t.getEventPixel(Jw(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();wL(s,a.getResolution()),Dw(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:wl})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class t5 extends vu{constructor(e){e=e||{},super({stopDown:pu}),this.condition_=e.condition?e.condition:UU,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Rp(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===Uw)return;const r=t.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return Rp(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Rp(e)&&zL(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class i5 extends Jd{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+n,r.top=Math.min(e[1],t[1])+n,r.width=Math.abs(t[0]-e[0])+n,r.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Mc([r])}getGeometry(){return this.geometry_}}const Jo={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class zl extends Xn{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class YL extends vu{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new i5(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??zL,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const r=n[0]-t[0],s=n[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new zl(Jo.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new zl(t?Jo.BOXEND:Jo.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new zl(Jo.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new zl(Jo.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new zl(Jo.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class n5 extends YL{constructor(e){e=e||{};const t=e.condition?e.condition:Qw;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=n.rotatedExtentForGeometry(r),o=n.getResolutionForExtentInternal(s),a=n.getResolution()/o;r=r.clone(),r.scale(a*a)}n.fitInternal(r,{duration:this.duration_,easing:wl})}}const $s={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class r5 extends xl{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return qL(t)&&GL(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==fe.KEYDOWN){const n=e.originalEvent,r=n.key;if(this.condition_(e)&&(r==$s.DOWN||r==$s.LEFT||r==$s.RIGHT||r==$s.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;r==$s.DOWN?c=-a:r==$s.LEFT?l=-a:r==$s.RIGHT?l=a:c=a;const u=[l,c];Dw(u,o.getRotation()),BU(o,u,this.duration_),n.preventDefault(),t=!0}}return!t}}class s5 extends xl{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!QU(t)&&GL(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==fe.KEYDOWN||e.type==fe.KEYPRESS){const n=e.originalEvent,r=n.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();Zw(a,o,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}const o5=40,a5=300;class l5 extends xl{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:XU;this.condition_=e.onFocusOnly?d0(WL,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==fe.WHEEL)return!0;const n=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=o5;break;case WheelEvent.DOM_DELTA_PAGE:s*=a5;break}if(s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=n.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-pt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Zw(t,n,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class c5 extends vu{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=pu),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==Uw&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Jw(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class u5 extends vu{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=pu),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],r=this.targetPointers[1],s=n.clientX-r.clientX,o=n.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Jw(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function h5(i){i=i||{};const e=new un,t=new YU(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&e.push(new t5),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&e.push(new HU({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&e.push(new e5({onFocusOnly:i.onFocusOnly,kinetic:t})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&e.push(new c5),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&e.push(new u5({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(e.push(new r5),e.push(new s5({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&e.push(new l5({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&e.push(new n5({duration:i.zoomDuration})),e}const Ye={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class BL extends En{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Ye.OPACITY]=e.opacity!==void 0?e.opacity:1,We(typeof t[Ye.OPACITY]=="number","Layer opacity must be a number"),t[Ye.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Ye.Z_INDEX]=e.zIndex,t[Ye.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Ye.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Ye.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Ye.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=pt(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Ne()}getLayerStatesArray(e){return Ne()}getExtent(){return this.get(Ye.EXTENT)}getMaxResolution(){return this.get(Ye.MAX_RESOLUTION)}getMinResolution(){return this.get(Ye.MIN_RESOLUTION)}getMinZoom(){return this.get(Ye.MIN_ZOOM)}getMaxZoom(){return this.get(Ye.MAX_ZOOM)}getOpacity(){return this.get(Ye.OPACITY)}getSourceState(){return Ne()}getVisible(){return this.get(Ye.VISIBLE)}getZIndex(){return this.get(Ye.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Ye.EXTENT,e)}setMaxResolution(e){this.set(Ye.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Ye.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Ye.MAX_ZOOM,e)}setMinZoom(e){this.set(Ye.MIN_ZOOM,e)}setOpacity(e){We(typeof e=="number","Layer opacity must be a number"),this.set(Ye.OPACITY,e)}setVisible(e){this.set(Ye.VISIBLE,e)}setZIndex(e){this.set(Ye.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class is extends Xn{constructor(e,t){super(e),this.layer=t}}const Op={LAYERS:"layers"};class Sl extends BL{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Op.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new un(n.slice(),{unique:!0}):We(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new un(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(st),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Me(e,jt.ADD,this.handleLayersAdd_,this),Me(e,jt.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(st);bl(this.listenerKeys_);const t=e.getArray();for(let n=0,r=t.length;n<r;n++){const s=t[n];this.registerLayerListeners_(s),this.dispatchEvent(new is("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[Me(e,Xa.PROPERTYCHANGE,this.handleLayerChange_,this),Me(e,fe.CHANGE,this.handleLayerChange_,this)];e instanceof Sl&&t.push(Me(e,"addlayer",this.handleLayerGroupAdd_,this),Me(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Se(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new is("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new is("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new is("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=Se(t);this.listenerKeys_[n].forEach(st),delete this.listenerKeys_[n],this.dispatchEvent(new is("removelayer",t)),this.changed()}getLayers(){return this.get(Op.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let r=0,s=n.length;r<s;++r)this.dispatchEvent(new is("removelayer",n[r]))}this.set(Op.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=n,a=t.length;o<a;o++){const l=t[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=ro(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}}const Ui={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class mf extends BL{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Ye.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Ye.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(st(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Me(e,fe.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof kn?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(o=>o.layer===this),!r)return!1}else r=this.getLayerState();const s=this.getExtent();return ex(r,t.viewState)&&(!s||yi(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const n=e instanceof kn?e.getViewStateAndExtent():e;let r=t(n);return Array.isArray(r)||(r=[r]),r}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Ye.MAP,e)}getMapInternal(){return this.get(Ye.MAP)}setMap(e){this.mapPrecomposeKey_&&(st(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(st(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Me(e,Ui.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Me(this,fe.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,n=this.getLayerState(!1);We(!t.some(r=>r.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(n)}setSource(e){this.set(Ye.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function ex(i,e){if(!i.visible)return!1;const t=e.resolution;if(t<i.minResolution||t>=i.maxResolution)return!1;const n=e.zoom;return n>i.minZoom&&n<=i.maxZoom}function HL(i,e,t=0,n=i.length-1,r=d5){for(;n>t;){if(n-t>600){const l=n-t+1,c=e-t+1,u=Math.log(l),h=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*h*(l-h)/l)*(c-l/2<0?-1:1),f=Math.max(t,Math.floor(e-c*h/l+d)),p=Math.min(n,Math.floor(e+(l-c)*h/l+d));HL(i,e,f,p,r)}const s=i[e];let o=t,a=n;for(ql(i,t,e),r(i[n],s)>0&&ql(i,t,n);o<a;){for(ql(i,o,a),o++,a--;r(i[o],s)<0;)o++;for(;r(i[a],s)>0;)a--}r(i[t],s)===0?ql(i,t,a):(a++,ql(i,a,n)),a<=e&&(t=a+1),e<=a&&(n=a-1)}}function ql(i,e,t){const n=i[e];i[e]=i[t],i[t]=n}function d5(i,e){return i<e?-1:i>e?1:0}let UL=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!yh(e,t))return n;const r=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?r(a):a;yh(e,l)&&(t.leaf?n.push(a):Dp(e,l)?this._all(a,n):s.push(a))}t=s.pop()}return n}collides(e){let t=this.data;if(!yh(e,t))return!1;const n=[];for(;t;){for(let r=0;r<t.children.length;r++){const s=t.children[r],o=t.leaf?this.toBBox(s):s;if(yh(e,o)){if(t.leaf||Dp(e,o))return!0;n.push(s)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=ma([]),this}remove(e,t){if(!e)return this;let n=this.data;const r=this.toBBox(e),s=[],o=[];let a,l,c;for(;n||s.length;){if(n||(n=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),n.leaf){const u=f5(e,n.children,t);if(u!==-1)return n.children.splice(u,1),s.push(n),this._condense(s),this}!c&&!n.leaf&&Dp(n,r)?(s.push(n),o.push(a),a=0,l=n,n=n.children[0]):l?(a++,n=l.children[a],c=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,r){const s=n-t+1;let o=this._maxEntries,a;if(s<=o)return a=ma(e.slice(t,n+1)),ea(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=ma([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));iE(e,t,n,c,this.compareMinX);for(let u=t;u<=n;u+=c){const h=Math.min(u+c-1,n);iE(e,u,h,l,this.compareMinY);for(let d=u;d<=h;d+=l){const f=Math.min(d+l-1,h);a.children.push(this._build(e,d,f,r-1))}}return ea(a,this.toBBox),a}_chooseSubtree(e,t,n,r){for(;r.push(t),!(t.leaf||r.length-1===n);){let s=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const c=t.children[l],u=Ip(c),h=g5(e,c)-u;h<o?(o=h,s=u<s?u:s,a=c):h===o&&u<s&&(s=u,a=c)}t=a||t.children[0]}return t}_insert(e,t,n){const r=n?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,t,s);for(o.children.push(e),nc(o,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)}_split(e,t){const n=e[t],r=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,r);const o=this._chooseSplitIndex(n,s,r),a=ma(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,ea(n,this.toBBox),ea(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this.data=ma([e,t]),this.data.height=e.height+1,this.data.leaf=!1,ea(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let r,s=1/0,o=1/0;for(let a=t;a<=n-t;a++){const l=ic(e,0,a,this.toBBox),c=ic(e,a,n,this.toBBox),u=v5(l,c),h=Ip(l)+Ip(c);u<s?(s=u,r=a,o=h<o?h:o):u===s&&h<o&&(o=h,r=a)}return r||n-t}_chooseSplitAxis(e,t,n){const r=e.leaf?this.compareMinX:p5,s=e.leaf?this.compareMinY:m5,o=this._allDistMargin(e,t,n,r),a=this._allDistMargin(e,t,n,s);o<a&&e.children.sort(r)}_allDistMargin(e,t,n,r){e.children.sort(r);const s=this.toBBox,o=ic(e,0,t,s),a=ic(e,n-t,n,s);let l=vh(o)+vh(a);for(let c=t;c<n-t;c++){const u=e.children[c];nc(o,e.leaf?s(u):u),l+=vh(o)}for(let c=n-t-1;c>=t;c--){const u=e.children[c];nc(a,e.leaf?s(u):u),l+=vh(a)}return l}_adjustParentBBoxes(e,t,n){for(let r=n;r>=0;r--)nc(t[r],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():ea(e[t],this.toBBox)}};function f5(i,e,t){if(!t)return e.indexOf(i);for(let n=0;n<e.length;n++)if(t(i,e[n]))return n;return-1}function ea(i,e){ic(i,0,i.children.length,e,i)}function ic(i,e,t,n,r){r||(r=ma(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<t;s++){const o=i.children[s];nc(r,i.leaf?n(o):o)}return r}function nc(i,e){return i.minX=Math.min(i.minX,e.minX),i.minY=Math.min(i.minY,e.minY),i.maxX=Math.max(i.maxX,e.maxX),i.maxY=Math.max(i.maxY,e.maxY),i}function p5(i,e){return i.minX-e.minX}function m5(i,e){return i.minY-e.minY}function Ip(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function vh(i){return i.maxX-i.minX+(i.maxY-i.minY)}function g5(i,e){return(Math.max(e.maxX,i.maxX)-Math.min(e.minX,i.minX))*(Math.max(e.maxY,i.maxY)-Math.min(e.minY,i.minY))}function v5(i,e){const t=Math.max(i.minX,e.minX),n=Math.max(i.minY,e.minY),r=Math.min(i.maxX,e.maxX),s=Math.min(i.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,s-n)}function Dp(i,e){return i.minX<=e.minX&&i.minY<=e.minY&&e.maxX<=i.maxX&&e.maxY<=i.maxY}function yh(i,e){return e.minX<=i.maxX&&e.minY<=i.maxY&&e.maxX>=i.minX&&e.maxY>=i.minY}function ma(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function iE(i,e,t,n,r){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=n)continue;const o=e+Math.ceil((t-e)/n/2)*n;HL(i,o,e,t,r),s.push(e,o,o,t)}}const tx=[NaN,NaN,NaN,0];let Pp;function y5(){return Pp||(Pp=Nt(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),Pp}const _5=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,b5=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,w5=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,x5=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function _h(i,e){return i.endsWith("%")?Number(i.substring(0,i.length-1))/e:Number(i)}function gc(i){throw new Error('failed to parse "'+i+'" as color')}function VL(i){if(i.toLowerCase().startsWith("rgb")){const s=i.match(b5)||i.match(_5)||i.match(w5);if(s){const o=s[4],a=100/255;return[pt(_h(s[1],a)+.5|0,0,255),pt(_h(s[2],a)+.5|0,0,255),pt(_h(s[3],a)+.5|0,0,255),o!==void 0?pt(_h(o,100),0,1):1]}gc(i)}if(i.startsWith("#")){if(x5.test(i)){const s=i.substring(1),o=s.length<=4?1:2,a=[0,0,0,255];for(let l=0,c=s.length;l<c;l+=o){let u=parseInt(s.substring(l,l+o),16);o===1&&(u+=u<<4),a[l/o]=u}return a[3]=a[3]/255,a}gc(i)}const e=y5();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=i,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=i,e.fillStyle===t&&gc(i));const n=e.fillStyle;if(n.startsWith("#")||n.startsWith("rgba"))return VL(n);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const r=Array.from(e.getImageData(0,0,1,1).data);return r[3]=tf(r[3]/255,3),r}function S5(i){return typeof i=="string"?i:nx(i)}const E5=1024,Gl={};let kp=0;function C5(i){if(i.length===4)return i;const e=i.slice();return e[3]=1,e}function Mp(i){return i>.0031308?Math.pow(i,1/2.4)*269.025-14.025:i*3294.6}function Ap(i){return i>.2068965?Math.pow(i,3):(i-4/29)*(108/841)}function Np(i){return i>10.314724?Math.pow((i+14.025)/269.025,2.4):i/3294.6}function Lp(i){return i>.0088564?Math.pow(i,1/3):i/(108/841)+4/29}function nE(i){const e=Np(i[0]),t=Np(i[1]),n=Np(i[2]),r=Lp(e*.222488403+t*.716873169+n*.06060791),s=500*(Lp(e*.452247074+t*.399439023+n*.148375274)-r),o=200*(r-Lp(e*.016863605+t*.117638439+n*.865350722)),a=Math.atan2(o,s)*(180/Math.PI);return[116*r-16,Math.sqrt(s*s+o*o),a<0?a+360:a,i[3]]}function T5(i){const e=(i[0]+16)/116,t=i[1],n=i[2]*Math.PI/180,r=Ap(e),s=Ap(e+t/500*Math.cos(n)),o=Ap(e-t/200*Math.sin(n)),a=Mp(s*3.021973625-r*1.617392459-o*.404875592),l=Mp(s*-.943766287+r*1.916279586+o*.027607165),c=Mp(s*.069407491-r*.22898585+o*1.159737864);return[pt(a+.5|0,0,255),pt(l+.5|0,0,255),pt(c+.5|0,0,255),i[3]]}function ix(i){if(i==="none")return tx;if(Gl.hasOwnProperty(i))return Gl[i];if(kp>=E5){let t=0;for(const n in Gl)(t++&3)===0&&(delete Gl[n],--kp)}const e=VL(i);e.length!==4&&gc(i);for(const t of e)isNaN(t)&&gc(i);return Gl[i]=e,++kp,e}function el(i){return Array.isArray(i)?i:ix(i)}function nx(i){let e=i[0];e!=(e|0)&&(e=e+.5|0);let t=i[1];t!=(t|0)&&(t=t+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const r=i[3]===void 0?1:Math.round(i[3]*1e3)/1e3;return"rgba("+e+","+t+","+n+","+r+")"}function rE(i){return i[0]>0&&i[1]>0}function R5(i,e,t){return t===void 0&&(t=[0,0]),t[0]=i[0]*e+.5|0,t[1]=i[1]*e+.5|0,t}function bi(i,e){return Array.isArray(i)?i:(e===void 0?e=[i,i]:(e[0]=i,e[1]=i),e)}let Ao=0;const oi=1<<Ao++,Oe=1<<Ao++,gi=1<<Ao++,cn=1<<Ao++,_o=1<<Ao++,rc=1<<Ao++,bh=Math.pow(2,Ao)-1,rx={[oi]:"boolean",[Oe]:"number",[gi]:"string",[cn]:"color",[_o]:"number[]",[rc]:"size"},O5=Object.keys(rx).map(Number).sort(br);function I5(i){return i in rx}function sc(i){const e=[];for(const t of O5)oc(i,t)&&e.push(rx[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function oc(i,e){return(i&e)===e}function Ur(i,e){return i===e}class Mt{constructor(e,t){if(!I5(e))throw new Error(`literal expressions must have a specific type, got ${sc(e)}`);this.type=e,this.value=t}}class D5{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}}function XL(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Vt(i,e,t){switch(typeof i){case"boolean":{if(Ur(e,gi))return new Mt(gi,i?"true":"false");if(!oc(e,oi))throw new Error(`got a boolean, but expected ${sc(e)}`);return new Mt(oi,i)}case"number":{if(Ur(e,rc))return new Mt(rc,bi(i));if(Ur(e,oi))return new Mt(oi,!!i);if(Ur(e,gi))return new Mt(gi,i.toString());if(!oc(e,Oe))throw new Error(`got a number, but expected ${sc(e)}`);return new Mt(Oe,i)}case"string":{if(Ur(e,cn))return new Mt(cn,ix(i));if(Ur(e,oi))return new Mt(oi,!!i);if(!oc(e,gi))throw new Error(`got a string, but expected ${sc(e)}`);return new Mt(gi,i)}}if(!Array.isArray(i))throw new Error("expression must be an array or a primitive value");if(i.length===0)throw new Error("empty expression");if(typeof i[0]=="string")return z5(i,e,t);for(const n of i)if(typeof n!="number")throw new Error("expected an array of numbers");if(Ur(e,rc)){if(i.length!==2)throw new Error(`expected an array of two values for a size, got ${i.length}`);return new Mt(rc,i)}if(Ur(e,cn)){if(i.length===3)return new Mt(cn,[...i,1]);if(i.length===4)return new Mt(cn,i);throw new Error(`expected an array of 3 or 4 values for a color, got ${i.length}`)}if(!oc(e,_o))throw new Error(`got an array of numbers, but expected ${sc(e)}`);return new Mt(_o,i)}const Y={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},P5={[Y.Get]:ce(ye(1,1/0),sE),[Y.Var]:ce(ye(1,1),k5),[Y.Has]:ce(ye(1,1/0),sE),[Y.Id]:ce(M5,ta),[Y.Concat]:ce(ye(2,1/0),je(gi)),[Y.GeometryType]:ce(A5,ta),[Y.LineMetric]:ce(ta),[Y.Resolution]:ce(Fp,ta),[Y.Zoom]:ce(Fp,ta),[Y.Time]:ce(Fp,ta),[Y.Any]:ce(ye(2,1/0),je(oi)),[Y.All]:ce(ye(2,1/0),je(oi)),[Y.Not]:ce(ye(1,1),je(oi)),[Y.Equal]:ce(ye(2,2),je(bh)),[Y.NotEqual]:ce(ye(2,2),je(bh)),[Y.GreaterThan]:ce(ye(2,2),je(Oe)),[Y.GreaterThanOrEqualTo]:ce(ye(2,2),je(Oe)),[Y.LessThan]:ce(ye(2,2),je(Oe)),[Y.LessThanOrEqualTo]:ce(ye(2,2),je(Oe)),[Y.Multiply]:ce(ye(2,1/0),oE),[Y.Coalesce]:ce(ye(2,1/0),oE),[Y.Divide]:ce(ye(2,2),je(Oe)),[Y.Add]:ce(ye(2,1/0),je(Oe)),[Y.Subtract]:ce(ye(2,2),je(Oe)),[Y.Clamp]:ce(ye(3,3),je(Oe)),[Y.Mod]:ce(ye(2,2),je(Oe)),[Y.Pow]:ce(ye(2,2),je(Oe)),[Y.Abs]:ce(ye(1,1),je(Oe)),[Y.Floor]:ce(ye(1,1),je(Oe)),[Y.Ceil]:ce(ye(1,1),je(Oe)),[Y.Round]:ce(ye(1,1),je(Oe)),[Y.Sin]:ce(ye(1,1),je(Oe)),[Y.Cos]:ce(ye(1,1),je(Oe)),[Y.Atan]:ce(ye(1,2),je(Oe)),[Y.Sqrt]:ce(ye(1,1),je(Oe)),[Y.Match]:ce(ye(4,1/0),aE,L5),[Y.Between]:ce(ye(3,3),je(Oe)),[Y.Interpolate]:ce(ye(6,1/0),aE,F5),[Y.Case]:ce(ye(3,1/0),N5,$5),[Y.In]:ce(ye(2,2),j5),[Y.Number]:ce(ye(1,1/0),je(bh)),[Y.String]:ce(ye(1,1/0),je(bh)),[Y.Array]:ce(ye(1,1/0),je(Oe)),[Y.Color]:ce(ye(1,4),je(Oe)),[Y.Band]:ce(ye(1,3),je(Oe)),[Y.Palette]:ce(ye(2,2),W5),[Y.ToString]:ce(ye(1,1),je(oi|Oe|gi|cn))};function sE(i,e,t){const n=i.length-1,r=new Array(n);for(let s=0;s<n;++s){const o=i[s+1];switch(typeof o){case"number":{r[s]=new Mt(Oe,o);break}case"string":{r[s]=new Mt(gi,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}s===0&&t.properties.add(String(o))}return r}function k5(i,e,t){const n=i[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return t.variables.add(n),[new Mt(gi,n)]}function M5(i,e,t){t.featureId=!0}function A5(i,e,t){t.geometryType=!0}function Fp(i,e,t){t.mapState=!0}function ta(i,e,t){const n=i[0];if(i.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function ye(i,e){return function(t,n,r){const s=t[0],o=t.length-1;if(i===e){if(o!==i){const a=i===1?"":"s";throw new Error(`expected ${i} argument${a} for ${s}, got ${o}`)}}else if(o<i||o>e){const a=e===1/0?`${i} or more`:`${i} to ${e}`;throw new Error(`expected ${a} arguments for ${s}, got ${o}`)}}}function oE(i,e,t){const n=i.length-1,r=new Array(n);for(let s=0;s<n;++s){const o=Vt(i[s+1],e,t);r[s]=o}return r}function je(i){return function(e,t,n){const r=e.length-1,s=new Array(r);for(let o=0;o<r;++o){const a=Vt(e[o+1],i,n);s[o]=a}return s}}function N5(i,e,t){const n=i[0],r=i.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${r} instead`)}function aE(i,e,t){const n=i[0],r=i.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${r} instead`)}function L5(i,e,t){const n=i.length-1,r=gi|Oe|oi,s=Vt(i[1],r,t),o=Vt(i[i.length-1],e,t),a=new Array(n-2);for(let l=0;l<n-2;l+=2){try{const c=Vt(i[l+2],s.type,t);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{const c=Vt(i[l+3],o.type,t);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[s,...a,o]}function F5(i,e,t){const n=i[1];let r;switch(n[0]){case"linear":r=1;break;case"exponential":const l=n[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);r=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const s=new Mt(Oe,r);let o;try{o=Vt(i[2],Oe,t)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(i.length-3);for(let l=0;l<a.length;l+=2){try{const c=Vt(i[l+3],Oe,t);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{const c=Vt(i[l+4],e,t);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[s,o,...a]}function $5(i,e,t){const n=Vt(i[i.length-1],e,t),r=new Array(i.length-1);for(let s=0;s<r.length-1;s+=2){try{const o=Vt(i[s+1],oi,t);r[s]=o}catch(o){throw new Error(`failed to parse argument ${s} of case expression: ${o.message}`)}try{const o=Vt(i[s+2],n.type,t);r[s+1]=o}catch(o){throw new Error(`failed to parse argument ${s+1} of case expression: ${o.message}`)}}return r[r.length-1]=n,r}function j5(i,e,t){let n=i[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],r=gi}else r=Oe;const s=new Array(n.length);for(let a=0;a<s.length;a++)try{const l=Vt(n[a],r,t);s[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[Vt(i[1],r,t),...s]}function W5(i,e,t){let n;try{n=Vt(i[1],Oe,t)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const r=i[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const s=new Array(r.length);for(let o=0;o<s.length;o++){let a;try{a=Vt(r[o],cn,t)}catch(l){throw new Error(`failed to parse color at index ${o} in palette expression: ${l.message}`)}if(!(a instanceof Mt))throw new Error(`the palette color at index ${o} must be a literal value`);s[o]=a}return[n,...s]}function ce(...i){return function(e,t,n){const r=e[0];let s;for(let o=0;o<i.length;o++){const a=i[o](e,t,n);if(o==i.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");s=a}}return new D5(t,r,...s)}}function z5(i,e,t){const n=i[0],r=P5[n];if(!r)throw new Error(`unknown operator: ${n}`);return r(i,e,t)}function KL(i){if(!i)return"";const e=i.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return KL(i.getGeometries()[0]);default:return""}}function ZL(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function $r(i,e,t){const n=Vt(i,e,t);return yn(n)}function yn(i,e){if(i instanceof Mt){if(i.type===cn&&typeof i.value=="string"){const n=ix(i.value);return function(){return n}}return function(){return i.value}}const t=i.operator;switch(t){case Y.Number:case Y.String:case Y.Coalesce:return q5(i);case Y.Get:case Y.Var:case Y.Has:return G5(i);case Y.Id:return n=>n.featureId;case Y.GeometryType:return n=>n.geometryType;case Y.Concat:{const n=i.args.map(r=>yn(r));return r=>"".concat(...n.map(s=>s(r).toString()))}case Y.Resolution:return n=>n.resolution;case Y.Any:case Y.All:case Y.Between:case Y.In:case Y.Not:return B5(i);case Y.Equal:case Y.NotEqual:case Y.LessThan:case Y.LessThanOrEqualTo:case Y.GreaterThan:case Y.GreaterThanOrEqualTo:return Y5(i);case Y.Multiply:case Y.Divide:case Y.Add:case Y.Subtract:case Y.Clamp:case Y.Mod:case Y.Pow:case Y.Abs:case Y.Floor:case Y.Ceil:case Y.Round:case Y.Sin:case Y.Cos:case Y.Atan:case Y.Sqrt:return H5(i);case Y.Case:return U5(i);case Y.Match:return V5(i);case Y.Interpolate:return X5(i);case Y.ToString:return K5(i);default:throw new Error(`Unsupported operator ${t}`)}}function q5(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=yn(i.args[s]);switch(t){case Y.Coalesce:return s=>{for(let o=0;o<n;++o){const a=r[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case Y.Number:case Y.String:return s=>{for(let o=0;o<n;++o){const a=r[o](s);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function G5(i,e){const n=i.args[0].value;switch(i.operator){case Y.Get:return r=>{const s=i.args;let o=r.properties[n];for(let a=1,l=s.length;a<l;++a){const u=s[a].value;o=o[u]}return o};case Y.Var:return r=>r.variables[n];case Y.Has:return r=>{const s=i.args;if(!(n in r.properties))return!1;let o=r.properties[n];for(let a=1,l=s.length;a<l;++a){const u=s[a].value;if(!o||!Object.hasOwn(o,u))return!1;o=o[u]}return!0};default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}function Y5(i,e){const t=i.operator,n=yn(i.args[0]),r=yn(i.args[1]);switch(t){case Y.Equal:return s=>n(s)===r(s);case Y.NotEqual:return s=>n(s)!==r(s);case Y.LessThan:return s=>n(s)<r(s);case Y.LessThanOrEqualTo:return s=>n(s)<=r(s);case Y.GreaterThan:return s=>n(s)>r(s);case Y.GreaterThanOrEqualTo:return s=>n(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function B5(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=yn(i.args[s]);switch(t){case Y.Any:return s=>{for(let o=0;o<n;++o)if(r[o](s))return!0;return!1};case Y.All:return s=>{for(let o=0;o<n;++o)if(!r[o](s))return!1;return!0};case Y.Between:return s=>{const o=r[0](s),a=r[1](s),l=r[2](s);return o>=a&&o<=l};case Y.In:return s=>{const o=r[0](s);for(let a=1;a<n;++a)if(o===r[a](s))return!0;return!1};case Y.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function H5(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=yn(i.args[s]);switch(t){case Y.Multiply:return s=>{let o=1;for(let a=0;a<n;++a)o*=r[a](s);return o};case Y.Divide:return s=>r[0](s)/r[1](s);case Y.Add:return s=>{let o=0;for(let a=0;a<n;++a)o+=r[a](s);return o};case Y.Subtract:return s=>r[0](s)-r[1](s);case Y.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case Y.Mod:return s=>r[0](s)%r[1](s);case Y.Pow:return s=>Math.pow(r[0](s),r[1](s));case Y.Abs:return s=>Math.abs(r[0](s));case Y.Floor:return s=>Math.floor(r[0](s));case Y.Ceil:return s=>Math.ceil(r[0](s));case Y.Round:return s=>Math.round(r[0](s));case Y.Sin:return s=>Math.sin(r[0](s));case Y.Cos:return s=>Math.cos(r[0](s));case Y.Atan:return n===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case Y.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function U5(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=yn(i.args[r]);return r=>{for(let s=0;s<t-1;s+=2)if(n[s](r))return n[s+1](r);return n[t-1](r)}}function V5(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=yn(i.args[r]);return r=>{const s=n[0](r);for(let o=1;o<t-1;o+=2)if(s===n[o](r))return n[o+1](r);return n[t-1](r)}}function X5(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=yn(i.args[r]);return r=>{const s=n[0](r),o=n[1](r);let a,l;for(let c=2;c<t;c+=2){const u=n[c](r);let h=n[c+1](r);const d=Array.isArray(h);if(d&&(h=C5(h)),u>=o)return c===2?h:d?Z5(s,o,a,l,u,h):ac(s,o,a,l,u,h);a=u,l=h}return l}}function K5(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=yn(i.args[s]);switch(t){case Y.ToString:return s=>{const o=r[0](s);return i.args[0].type===cn?nx(o):o.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function ac(i,e,t,n,r,s){const o=r-t;if(o===0)return n;const a=e-t,l=i===1?a/o:(Math.pow(i,a)-1)/(Math.pow(i,o)-1);return n+l*(s-n)}function Z5(i,e,t,n,r,s){if(r-t===0)return n;const a=nE(n),l=nE(s);let c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const u=[ac(i,e,t,a[0],r,l[0]),ac(i,e,t,a[1],r,l[1]),a[2]+ac(i,e,t,0,r,c),ac(i,e,t,n[3],r,s[3])];return T5(u)}const be={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function Q5(i,e,t){const n=i;let r=!0,s=!1,o=!1;const a=[id(n,fe.LOAD,function(){o=!0,s||e()})];return n.src&&hL?(s=!0,n.decode().then(function(){r&&e()}).catch(function(l){r&&(o?e():t())})):a.push(id(n,fe.ERROR,t)),function(){r=!1,a.forEach(st)}}function J5(i,e){return new Promise((t,n)=>{function r(){o(),t(i)}function s(){o(),n(new Error("Image load error"))}function o(){i.removeEventListener("load",r),i.removeEventListener("error",s)}i.addEventListener("load",r),i.addEventListener("error",s)})}function eV(i,e){return e&&(i.src=e),i.src&&hL?new Promise((t,n)=>i.decode().then(()=>t(i)).catch(r=>i.complete&&i.width?t(i):n(r))):J5(i)}class tV{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];(e++&3)===0&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){const r=$p(e,t,n);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,n){const r=$p(e,t,n);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,n,r,s){const o=$p(e,t,n),a=o in this.cache_;this.cache_[o]=r,s&&(r.getImageState()===be.IDLE&&r.load(),r.getImageState()===be.LOADING?r.ready().then(()=>{this.patternCache_[o]=cd().createPattern(r.getImage(1),"repeat")}):this.patternCache_[o]=cd().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function $p(i,e,t){const n=t?el(t):"null";return e+":"+i+":"+n}const Vi=new tV;let Yl=null;class QL extends ef{constructor(e,t,n,r,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=s,this.imageState_=r===void 0?be.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===be.LOADED){Yl||(Yl=Nt(1,1,void 0,{willReadFrequently:!0})),Yl.drawImage(this.image_,0,0);try{Yl.getImageData(0,0,1,1),this.tainted_=!1}catch{Yl=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(fe.CHANGE)}handleImageError_(){this.imageState_=be.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=be.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=Nt(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===be.IDLE){this.image_||this.initializeImage_(),this.imageState_=be.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&eV(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==be.LOADED)return;const t=this.image_,n=Nt(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=n.canvas;n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=S5(this.color_),n.fillRect(0,0,r.width/e,r.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===be.LOADED||this.imageState_===be.ERROR)e();else{const t=()=>{(this.imageState_===be.LOADED||this.imageState_===be.ERROR)&&(this.removeEventListener(fe.CHANGE,t),e())};this.addEventListener(fe.CHANGE,t)}})),this.ready_}}function sx(i,e,t,n,r,s){let o=e===void 0?void 0:Vi.get(e,t,r);return o||(o=new QL(i,i&&"src"in i?i.src||void 0:e,t,n,r),Vi.set(e,t,r,o,s)),s&&o&&!Vi.getPattern(e,t,r)&&Vi.set(e,t,r,o,s),o}function Ln(i){return i?Array.isArray(i)?nx(i):typeof i=="object"&&"src"in i?iV(i):i:null}function iV(i){if(!i.offset||!i.size)return Vi.getPattern(i.src,"anonymous",i.color);const e=i.src+":"+i.offset,t=Vi.getPattern(e,void 0,i.color);if(t)return t;const n=Vi.get(i.src,"anonymous",null);if(n.getImageState()!==be.LOADED)return null;const r=Nt(i.size[0],i.size[1]);return r.drawImage(n.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),sx(r.canvas,e,void 0,be.LOADED,i.color,!0),Vi.getPattern(e,void 0,i.color)}const JL="10px sans-serif",vi="#000",tl="round",wr=[],xr=0,il="round",Ac=10,Nc="#000",Lc="center",ud="middle",Zs=[0,0,0,0],Fc=1,ga=new En;let Bl=null,lE;const f0={},nV=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function rV(i,e,t){return`${i} ${e} 16px "${t}"`}const sV=(function(){let e,t;async function n(s){await t.ready;const o=await t.load(s);if(o.length===0)return!1;const a=h0(s),l=a.families[0].toLowerCase(),c=a.weight;return o.some(u=>{const h=u.family.replace(/^['"]|['"]$/g,"").toLowerCase(),d=u0[u.weight]||u.weight;return h===l&&u.style===a.style&&d==c})}async function r(){await t.ready;let s=!0;const o=ga.getProperties(),a=Object.keys(o).filter(l=>o[l]<100);for(let l=a.length-1;l>=0;--l){const c=a[l];let u=o[c];u<100&&(await n(c)?(bl(f0),ga.set(c,100)):(u+=10,ga.set(c,u,!0),u<100&&(s=!1)))}e=void 0,s||(e=setTimeout(r,100))}return async function(s){t||(t=Tw?self.fonts:document.fonts);const o=h0(s);if(!o)return;const a=o.families;let l=!1;for(const c of a){if(nV.has(c))continue;const u=rV(o.style,o.weight,c);ga.get(u)===void 0&&(ga.set(u,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(r,100))}})(),oV=(function(){let i;return function(e){let t=f0[e];if(t==null){if(Tw){const n=h0(e),r=eF(e,"g");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);f0[e]=t}return t}})();function eF(i,e){return Bl||(Bl=Nt(1,1)),i!=lE&&(Bl.font=i,lE=Bl.font),Bl.measureText(e)}function tF(i,e){return eF(i,e).width}function cE(i,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((r,s)=>Math.max(r,tF(i,s)),0);return t[e]=n,n}function aV(i,e){const t=[],n=[],r=[];let s=0,o=0,a=0,l=0;for(let c=0,u=e.length;c<=u;c+=2){const h=e[c];if(h===`
`||c===u){s=Math.max(s,o),r.push(o),o=0,a+=l,l=0;continue}const d=e[c+1]||i.font,f=tF(d,h);t.push(f),o+=f;const p=oV(d);n.push(p),l=Math.max(l,p)}return{width:s,height:a,widths:t,heights:n,lineWidths:r}}function lV(i,e,t,n,r,s,o,a,l,c,u){i.save(),t!==1&&(i.globalAlpha===void 0?i.globalAlpha=h=>h.globalAlpha*=t:i.globalAlpha*=t),e&&i.transform.apply(i,e),n.contextInstructions?(i.translate(l,c),i.scale(u[0],u[1]),cV(n,i)):u[0]<0||u[1]<0?(i.translate(l,c),i.scale(u[0],u[1]),i.drawImage(n,r,s,o,a,0,0,o,a)):i.drawImage(n,r,s,o,a,l,c,o*u[0],a*u[1]),i.restore()}function cV(i,e){const t=i.contextInstructions;for(let n=0,r=t.length;n<r;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class gf{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=bi(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new gf({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Ne()}getImage(e){return Ne()}getHitDetectionImage(){return Ne()}getPixelRatio(e){return 1}getImageState(){return Ne()}getImageSize(){return Ne()}getOrigin(){return Ne()}getSize(){return Ne()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=bi(e)}listenImageChange(e){Ne()}load(){Ne()}unlistenImageChange(e){Ne()}ready(){return Promise.resolve()}}class vf extends gf{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?be.LOADING:be.LOADED,this.imageState_===be.LOADING&&this.ready().then(()=>this.imageState_=be.LOADED),this.render()}clone(){const e=this.getScale(),t=new vf({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),n=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let r=Vi.get(n,null,null)?.getImage(1);if(!r){const s=this.renderOptions_,o=Math.ceil(s.size*e),a=Nt(o,o);this.draw_(s,a,e),r=a.canvas,Vi.set(n,null,null,new QL(r,void 0,null,be.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const C=r;r=s,s=C}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),u=r-c,h=Math.sqrt(l*l+u*u),d=h/l;if(e==="miter"&&d<=n)return d*t;const f=t/2/d,p=t/2*(u/h),g=Math.sqrt((r+f)*(r+f)+p*p)-r;if(this.radius2_===void 0||e==="bevel")return g*2;const v=r*Math.sin(a),y=Math.sqrt(r*r-v*v),w=s-y,x=Math.sqrt(v*v+w*w)/v;if(x<=n){const C=x*t/2-s-r;return 2*Math.max(g,C)}return g*2}createRenderOptions(){let e=tl,t=il,n=0,r=null,s=0,o,a=0;this.stroke_&&(o=Ln(this.stroke_.getColor()??Nc),a=this.stroke_.getWidth()??Fc,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??il,e=this.stroke_.getLineCap()??tl,n=this.stroke_.getMiterLimit()??Ac);const l=this.calculateLineJoinSize_(t,a,n),c=Math.max(this.radius,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=vi),t.fillStyle=Ln(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),r=0;typeof n=="string"&&(n=el(n)),n===null?r=1:Array.isArray(n)&&(r=n.length===4?n[3]:1),r===0&&(t=Nt(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const n=this.radius;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const r=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=s+a*o,c=a%2===0?n:r;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=vi,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Ar extends vf{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Ar({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Zi{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Zi({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=sx(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===be.IDLE&&t.load(),t.getImageState()===be.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Se(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:el(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function uE(i,e,t,n){return t!==void 0&&n!==void 0?[t/i,n/e]:t!==void 0?t/i:n!==void 0?n/e:1}class yu extends gf{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;We(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||Se(o)),We(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),We(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=be.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?be.LOADED:be.IDLE:l=be.LOADING:l=be.LOADED),this.color_=e.color!==void 0?el(e.color):null,this.iconImage_=sx(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let c,u;if(e.size)[c,u]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)c=h.width,u=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(uE(f[0],f[1],e.width,e.height))};this.listenImageChange(d);return}}c!==void 0&&this.setScale(uE(c,u,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new yu({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==be.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==be.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(fe.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(fe.CHANGE,e)}ready(){return this.iconImage_.ready()}}class Gn{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Gn({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Xt{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=hE,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Xt({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=hE,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function uV(i){let e;if(typeof i=="function")e=i;else{let t;Array.isArray(i)?t=i:(We(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[i]),e=function(){return t}}return e}let jp=null;function iF(i,e){if(!jp){const t=new Zi({color:"rgba(255,255,255,0.4)"}),n=new Gn({color:"#3399CC",width:1.25});jp=[new Xt({image:new Ar({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return jp}function hV(){const i={},e=[255,255,255,1],t=[0,153,255,1],n=3;return i.Polygon=[new Xt({fill:new Zi({color:[255,255,255,.5]})})],i.MultiPolygon=i.Polygon,i.LineString=[new Xt({stroke:new Gn({color:e,width:n+2})}),new Xt({stroke:new Gn({color:t,width:n})})],i.MultiLineString=i.LineString,i.Circle=i.Polygon.concat(i.LineString),i.Point=[new Xt({image:new Ar({radius:n*2,fill:new Zi({color:t}),stroke:new Gn({color:e,width:n/2})}),zIndex:1/0})],i.MultiPoint=i.Point,i.GeometryCollection=i.Polygon.concat(i.LineString,i.Point),i}function hE(i){return i.getGeometry()}const dV="#333";class yf{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=bi(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Zi({color:dV}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new yf({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=bi(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}function fV(i){return!0}function pV(i){const e=XL(),t=mV(i,e),n=ZL();return function(r,s){if(n.properties=r.getPropertiesInternal(),n.resolution=s,e.featureId){const o=r.getId();o!==void 0?n.featureId=o:n.featureId=null}return e.geometryType&&(n.geometryType=KL(r.getGeometry())),t(n)}}function dE(i){const e=XL(),t=i.length,n=new Array(t);for(let o=0;o<t;++o)n[o]=p0(i[o],e);const r=ZL(),s=new Array(t);return function(o,a){if(r.properties=o.getPropertiesInternal(),r.resolution=a,e.featureId){const c=o.getId();c!==void 0?r.featureId=c:r.featureId=null}let l=0;for(let c=0;c<t;++c){const u=n[c](r);u&&(s[l]=u,l+=1)}return s.length=l,s}}function mV(i,e){const t=i.length,n=new Array(t);for(let r=0;r<t;++r){const s=i[r],o="filter"in s?$r(s.filter,oi,e):fV;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=p0(s.style[c],e)}else a=[p0(s.style,e)];n[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<t;++a){const l=n[a].filter;if(l(r)&&!(i[a].else&&o)){o=!0;for(const c of n[a].styles){const u=c(r);u&&s.push(u)}}}return s}}function p0(i,e){const t=$c(i,"",e),n=jc(i,"",e),r=gV(i,e),s=vV(i,e),o=_i(i,"z-index",e);if(!t&&!n&&!r&&!s&&!Za(i))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const a=new Xt;return function(l){let c=!0;if(t){const u=t(l);u&&(c=!1),a.setFill(u)}if(n){const u=n(l);u&&(c=!1),a.setStroke(u)}if(r){const u=r(l);u&&(c=!1),a.setText(u)}if(s){const u=s(l);u&&(c=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),c?null:a}}function $c(i,e,t){let n;if(e+"fill-pattern-src"in i)n=wV(i,e+"fill-",t);else{if(i[e+"fill-color"]==="none")return s=>null;n=ox(i,e+"fill-color",t)}if(!n)return null;const r=new Zi;return function(s){const o=n(s);return o===tx?null:(r.setColor(o),r)}}function jc(i,e,t){const n=_i(i,e+"stroke-width",t),r=ox(i,e+"stroke-color",t);if(!n&&!r)return null;const s=dr(i,e+"stroke-line-cap",t),o=dr(i,e+"stroke-line-join",t),a=nF(i,e+"stroke-line-dash",t),l=_i(i,e+"stroke-line-dash-offset",t),c=_i(i,e+"stroke-miter-limit",t),u=new Gn;return function(h){if(r){const d=r(h);if(d===tx)return null;u.setColor(d)}if(n&&u.setWidth(n(h)),s){const d=s(h);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(d)}if(o){const d=o(h);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(d)}return a&&u.setLineDash(a(h)),l&&u.setLineDashOffset(l(h)),c&&u.setMiterLimit(c(h)),u}}function gV(i,e){const t="text-",n=dr(i,t+"value",e);if(!n)return null;const r=$c(i,t,e),s=$c(i,t+"background-",e),o=jc(i,t,e),a=jc(i,t+"background-",e),l=dr(i,t+"font",e),c=_i(i,t+"max-angle",e),u=_i(i,t+"offset-x",e),h=_i(i,t+"offset-y",e),d=ja(i,t+"overflow",e),f=dr(i,t+"placement",e),p=_i(i,t+"repeat",e),m=_f(i,t+"scale",e),g=ja(i,t+"rotate-with-view",e),v=_i(i,t+"rotation",e),y=dr(i,t+"align",e),w=dr(i,t+"justify",e),b=dr(i,t+"baseline",e),x=ja(i,t+"keep-upright",e),C=nF(i,t+"padding",e),E=bf(i,t+"declutter-mode"),S=new yf({declutterMode:E});return function(R){if(S.setText(n(R)),r&&S.setFill(r(R)),s&&S.setBackgroundFill(s(R)),o&&S.setStroke(o(R)),a&&S.setBackgroundStroke(a(R)),l&&S.setFont(l(R)),c&&S.setMaxAngle(c(R)),u&&S.setOffsetX(u(R)),h&&S.setOffsetY(h(R)),d&&S.setOverflow(d(R)),f){const I=f(R);if(I!=="point"&&I!=="line")throw new Error("Expected point or line for text-placement");S.setPlacement(I)}if(p&&S.setRepeat(p(R)),m&&S.setScale(m(R)),g&&S.setRotateWithView(g(R)),v&&S.setRotation(v(R)),y){const I=y(R);if(I!=="left"&&I!=="center"&&I!=="right"&&I!=="end"&&I!=="start")throw new Error("Expected left, right, center, start, or end for text-align");S.setTextAlign(I)}if(w){const I=w(R);if(I!=="left"&&I!=="right"&&I!=="center")throw new Error("Expected left, right, or center for text-justify");S.setJustify(I)}if(b){const I=b(R);if(I!=="bottom"&&I!=="top"&&I!=="middle"&&I!=="alphabetic"&&I!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");S.setTextBaseline(I)}return C&&S.setPadding(C(R)),x&&S.setKeepUpright(x(R)),S}}function vV(i,e){return"icon-src"in i?yV(i,e):"shape-points"in i?_V(i,e):"circle-radius"in i?bV(i,e):null}function yV(i,e){const t="icon-",n=t+"src",r=rF(i[n],n),s=hd(i,t+"anchor",e),o=_f(i,t+"scale",e),a=_i(i,t+"opacity",e),l=hd(i,t+"displacement",e),c=_i(i,t+"rotation",e),u=ja(i,t+"rotate-with-view",e),h=pE(i,t+"anchor-origin"),d=mE(i,t+"anchor-x-units"),f=mE(i,t+"anchor-y-units"),p=CV(i,t+"color"),m=SV(i,t+"cross-origin"),g=EV(i,t+"offset"),v=pE(i,t+"offset-origin"),y=dd(i,t+"width"),w=dd(i,t+"height"),b=xV(i,t+"size"),x=bf(i,t+"declutter-mode"),C=new yu({src:r,anchorOrigin:h,anchorXUnits:d,anchorYUnits:f,color:p,crossOrigin:m,offset:g,offsetOrigin:v,height:w,width:y,size:b,declutterMode:x});return function(E){return a&&C.setOpacity(a(E)),l&&C.setDisplacement(l(E)),c&&C.setRotation(c(E)),u&&C.setRotateWithView(u(E)),o&&C.setScale(o(E)),s&&C.setAnchor(s(E)),C}}function _V(i,e){const t="shape-",n=t+"points",r=t+"radius",s=m0(i[n],n),o=m0(i[r],r),a=$c(i,t,e),l=jc(i,t,e),c=_f(i,t+"scale",e),u=hd(i,t+"displacement",e),h=_i(i,t+"rotation",e),d=ja(i,t+"rotate-with-view",e),f=dd(i,t+"radius2"),p=dd(i,t+"angle"),m=bf(i,t+"declutter-mode"),g=new vf({points:s,radius:o,radius2:f,angle:p,declutterMode:m});return function(v){return a&&g.setFill(a(v)),l&&g.setStroke(l(v)),u&&g.setDisplacement(u(v)),h&&g.setRotation(h(v)),d&&g.setRotateWithView(d(v)),c&&g.setScale(c(v)),g}}function bV(i,e){const t="circle-",n=$c(i,t,e),r=jc(i,t,e),s=_i(i,t+"radius",e),o=_f(i,t+"scale",e),a=hd(i,t+"displacement",e),l=_i(i,t+"rotation",e),c=ja(i,t+"rotate-with-view",e),u=bf(i,t+"declutter-mode"),h=new Ar({radius:5,declutterMode:u});return function(d){return s&&h.setRadius(s(d)),n&&h.setFill(n(d)),r&&h.setStroke(r(d)),a&&h.setDisplacement(a(d)),l&&h.setRotation(l(d)),c&&h.setRotateWithView(c(d)),o&&h.setScale(o(d)),h}}function _i(i,e,t){if(!(e in i))return;const n=$r(i[e],Oe,t);return function(r){return m0(n(r),e)}}function dr(i,e,t){if(!(e in i))return null;const n=$r(i[e],gi,t);return function(r){return rF(n(r),e)}}function wV(i,e,t){const n=dr(i,e+"pattern-src",t),r=fE(i,e+"pattern-offset",t),s=fE(i,e+"pattern-size",t),o=ox(i,e+"color",t);return function(a){return{src:n(a),offset:r&&r(a),size:s&&s(a),color:o&&o(a)}}}function ja(i,e,t){if(!(e in i))return null;const n=$r(i[e],oi,t);return function(r){const s=n(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function ox(i,e,t){if(!(e in i))return null;const n=$r(i[e],cn,t);return function(r){return sF(n(r),e)}}function nF(i,e,t){if(!(e in i))return null;const n=$r(i[e],_o,t);return function(r){return _u(n(r),e)}}function hd(i,e,t){if(!(e in i))return null;const n=$r(i[e],_o,t);return function(r){const s=_u(n(r),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function fE(i,e,t){if(!(e in i))return null;const n=$r(i[e],_o,t);return function(r){return oF(n(r),e)}}function _f(i,e,t){if(!(e in i))return null;const n=$r(i[e],_o|Oe,t);return function(r){return TV(n(r),e)}}function dd(i,e){const t=i[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function xV(i,e){const t=i[e];if(t!==void 0){if(typeof t=="number")return bi(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function SV(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function pE(i,e){const t=i[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function mE(i,e){const t=i[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function EV(i,e){const t=i[e];if(t!==void 0)return _u(t,e)}function bf(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function CV(i,e){const t=i[e];if(t!==void 0)return sF(t,e)}function _u(i,e){if(!Array.isArray(i))throw new Error(`Expected an array for ${e}`);const t=i.length;for(let n=0;n<t;++n)if(typeof i[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return i}function rF(i,e){if(typeof i!="string")throw new Error(`Expected a string for ${e}`);return i}function m0(i,e){if(typeof i!="number")throw new Error(`Expected a number for ${e}`);return i}function sF(i,e){if(typeof i=="string")return i;const t=_u(i,e),n=t.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function oF(i,e){const t=_u(i,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function TV(i,e){return typeof i=="number"?i:oF(i,e)}const gE={RENDER_ORDER:"renderOrder"};class aF extends mf{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(gE.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new UL(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(gE.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?iF:e;const t=RV(e);this.styleFunction_=e===null?void 0:uV(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function RV(i){if(i===void 0)return iF;if(!i)return null;if(typeof i=="function"||i instanceof Xt)return i;if(!Array.isArray(i))return dE([i]);if(i.length===0)return[];const e=i.length,t=i[0];if(t instanceof Xt){const r=new Array(e);for(let s=0;s<e;++s){const o=i[s];if(!(o instanceof Xt))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in t){const r=new Array(e);for(let s=0;s<e;++s){const o=i[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return pV(r)}return dE(i)}class lF extends Xn{constructor(e,t,n,r){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=r}}class OV extends Jd{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Ne()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Mr(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),kL(r,n)}forEachFeatureAtCoordinate(e,t,n,r,s,o,a,l){let c;const u=t.viewState;function h(b,x,C,E){return s.call(o,x,b?C:null,E)}const d=u.projection,f=xL(e.slice(),d),p=[[0,0]];if(d.canWrapX()&&r){const b=d.getExtent(),x=He(b);p.push([-x,0],[x,0])}const m=t.layerStatesArray,g=m.length,v=[],y=[];for(let b=0;b<p.length;b++)for(let x=g-1;x>=0;--x){const C=m[x],E=C.layer;if(E.hasRenderer()&&ex(C,u)&&a.call(l,E)){const S=E.getRenderer(),R=E.getSource();if(S&&R){const I=R.getWrapX()?f:e,k=h.bind(null,C.managed);y[0]=I[0]+p[b][0],y[1]=I[1]+p[b][1],c=S.forEachFeatureAtCoordinate(y,t,n,k,v)}if(c)return c}}if(v.length===0)return;const w=1/v.length;return v.forEach((b,x)=>b.distanceSq+=x*w),v.sort((b,x)=>b.distanceSq-x.distanceSq),v.some(b=>c=b.callback(b.feature,b.layer,b.geometry)),c}hasFeatureAtCoordinate(e,t,n,r,s,o){return this.forEachFeatureAtCoordinate(e,t,n,r,vo,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){Ne()}scheduleExpireIconCache(e){Vi.canExpireCache()&&e.postRenderFunctions.push(IV)}}function IV(i,e){Vi.expire()}class DV extends OV{constructor(e){super(e),this.fontChangeListenerKey_=Me(ga,Xa.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=ff+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const r=new lF(e,void 0,t);n.dispatchEvent(r)}}disposeInternal(){st(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ui.PRECOMPOSE,e);const t=e.layerStatesArray.sort((a,l)=>a.zIndex-l.zIndex);t.some(a=>a.layer instanceof aF&&a.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const s=[];let o=null;for(let a=0,l=t.length;a<l;++a){const c=t[a];e.layerIndex=a;const u=c.layer,h=u.getSourceState();if(!ex(c,r)||h!="ready"&&h!="undefined"){u.unrender();continue}const d=u.render(e,o);d&&(d!==o&&(this.children_.push(d),o=d),s.push(c))}this.declutter(e,s),jU(this.element_,this.children_),this.dispatchRenderEvent(Ui.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let n=t.length-1;n>=0;--n){const r=t[n],s=r.layer;s.getDeclutter()&&s.renderDeclutter(e,r)}t.forEach(n=>n.layer.renderDeferred(e))}}}function cF(i){if(i instanceof mf){i.setMapInternal(null);return}i instanceof Sl&&i.getLayers().forEach(cF)}function uF(i,e){if(i instanceof mf){i.setMapInternal(e);return}if(i instanceof Sl){const t=i.getLayers().getArray();for(let n=0,r=t.length;n<r;++n)uF(t[n],e)}}let PV=class extends En{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=kV(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:h3,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=fn(),this.pixelToCoordinateTransform_=fn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||GU(),this.interactions=t.interactions||h5({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new p3(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Jt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Jt.VIEW,this.handleViewChanged_),this.addChangeListener(Jt.SIZE,this.handleSizeChanged_),this.addChangeListener(Jt.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof kn)&&e.view.then(function(r){n.setView(new kn(r))}),this.controls.addEventListener(jt.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(jt.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(jt.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(jt.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(jt.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(jt.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){uF(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:vo,a=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,t,null,o,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(r){n.push(r)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(r){r instanceof Sl?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:vo,s=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,s,o,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=n.width/r[0],o=n.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-n.left)/s,(a.clientY-n.top)/o]}getTarget(){return this.get(Jt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return c0(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?$t(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Jt.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof un){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=cr(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?$t(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Jt.SIZE)}getView(){return this.get(Jt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,r){return m3(this.frameState_,e,t,n,r)}handleBrowserEvent(e,t){t=t||e.type;const n=new ts(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===t0.POINTERDOWN||n===fe.WHEEL||n===fe.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target,a=s instanceof ShadowRoot?s.host===o?s.host.ownerDocument:s:s===r?r.documentElement:s;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[ti.ANIMATING]||o[ti.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Ui.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ui.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new pa(ur.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new pa(ur.LOADSTART,this,e))));const n=this.postRenderFunctions_;if(e)for(let r=0,s=n.length;r<s;++r)n[r](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,r=this.targetChangeHandlerKeys_.length;n<r;++n)st(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(fe.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(fe.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new DV(this)),this.mapBrowserEventHandler_=new d3(this,this.moveTolerance_);for(const s in dt)this.mapBrowserEventHandler_.addEventListener(dt[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(fe.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(fe.WHEEL,this.boundHandleBrowserEvent_,dL?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const s=t.getRootNode();n=s instanceof ShadowRoot?s.host:t}this.targetChangeHandlerKeys_=[Me(n,fe.KEYDOWN,this.handleBrowserEvent,this),Me(n,fe.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(st(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(st(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Me(e,Xa.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Me(e,fe.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(st),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new is("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Me(e,Xa.PROPERTYCHANGE,this.render,this),Me(e,fe.CHANGE,this.render,this),Me(e,"addlayer",this.handleLayerAdd_,this),Me(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,n=e.length;t<n;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){cF(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),r=this.frameState_;let s=null;if(t!==void 0&&rE(t)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:s0(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Se(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=s0(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!lf(this.previousExtent_)&&!Dc(s.extent,this.previousExtent_))&&(this.dispatchEvent(new pa(ur.MOVESTART,this,r)),this.previousExtent_=rf(this.previousExtent_)),this.previousExtent_&&!s.viewHints[ti.ANIMATING]&&!s.viewHints[ti.INTERACTING]&&!Dc(s.extent,this.previousExtent_)&&(this.dispatchEvent(new pa(ur.MOVEEND,this,s)),fL(s.extent,this.previousExtent_))),this.dispatchEvent(new pa(ur.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(ur.LOADSTART)||this.hasListener(ur.LOADEND)||this.hasListener(Ui.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new is("removelayer",t)),this.set(Jt.LAYERGROUP,e)}setSize(e){this.set(Jt.SIZE,e)}setTarget(e){this.set(Jt.TARGET,e)}setView(e){if(!e||e instanceof kn){this.set(Jt.VIEW,e);return}this.set(Jt.VIEW,new kn);const t=this;e.then(function(n){t.setView(new kn(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(t=[Math.max(0,s),Math.max(0,o)],!rE(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&EL("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!Ss(t,n))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function kV(i){let e=null;i.keyboardEventTarget!==void 0&&(e=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const t={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new Sl({layers:i.layers});t[Jt.LAYERGROUP]=n,t[Jt.TARGET]=i.target,t[Jt.VIEW]=i.view instanceof kn?i.view:new kn;let r;i.controls!==void 0&&(Array.isArray(i.controls)?r=new un(i.controls.slice()):(We(typeof i.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=i.controls));let s;i.interactions!==void 0&&(Array.isArray(i.interactions)?s=new un(i.interactions.slice()):(We(typeof i.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=i.interactions));let o;return i.overlays!==void 0?Array.isArray(i.overlays)?o=new un(i.overlays.slice()):(We(typeof i.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=i.overlays):o=new un,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}class Nr extends En{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Nr(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(st(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Me(e,fe.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?MV(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function MV(i){if(typeof i=="function")return i;let e;return Array.isArray(i)?e=i:(We(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[i]),function(){return e}}function g0(i,e,t,n,r,s,o){let a,l;const c=(t-e)/n;if(c===1)a=e;else if(c===2)a=e,l=r;else if(c!==0){let u=i[e],h=i[e+1],d=0;const f=[0];for(let g=e+n;g<t;g+=n){const v=i[g],y=i[g+1];d+=Math.sqrt((v-u)*(v-u)+(y-h)*(y-h)),f.push(d),u=v,h=y}const p=r*d,m=i3(f,p);m<0?(l=(p-f[-m-2])/(f[-m-1]-f[-m-2]),a=e+(-m-2)*n):a=e+m*n}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=a===void 0?NaN:l===void 0?i[a+u]:ki(i[a+u],i[a+n+u],l);return s}function AV(i,e,t,n,r,s){if(t==e)return null;let o;if(r<i[e+n-1])return s?(o=i.slice(e,e+n),o[n-1]=r,o):null;if(i[t-1]<r)return s?(o=i.slice(t-n,t),o[n-1]=r,o):null;if(r==i[e+n-1])return i.slice(e,e+n);let a=e/n,l=t/n;for(;a<l;){const d=a+l>>1;r<i[(d+1)*n-1]?l=d:a=d+1}const c=i[a*n-1];if(r==c)return i.slice((a-1)*n,(a-1)*n+n);const u=i[(a+1)*n-1],h=(r-c)/(u-c);o=[];for(let d=0;d<n-1;++d)o.push(ki(i[(a-1)*n+d],i[a*n+d],h));return o.push(r),o}function hF(i,e,t,n){let r=i[e],s=i[e+1],o=0;for(let a=e+n;a<t;a+=n){const l=i[a],c=i[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}class fd extends hf{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Ka(this.flatCoordinates,e),this.changed()}clone(){const e=new fd(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){return r<Rw(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(jw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ww(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,r))}forEachSegment(e){return FL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,AV(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Xs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return g0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return hF(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=df(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new fd(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Gw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=zw(this.flatCoordinates,0,e,this.stride),this.changed()}}function NV(i,e,t,n){const r=[];let s=Li();for(let o=0,a=t.length;o<a;++o){const l=t[o];s=Iw(i,e,l[0],n),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return r}class dF{drawCustom(e,t,n,r,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,n){}drawFeature(e,t,n){}drawGeometryCollection(e,t,n){}drawLineString(e,t,n){}drawMultiLineString(e,t,n){}drawMultiPoint(e,t,n){}drawMultiPolygon(e,t,n){}drawPoint(e,t,n){}drawPolygon(e,t,n){}drawText(e,t,n){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const se={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},wh=[se.FILL],as=[se.STROKE],Qs=[se.BEGIN_PATH],vE=[se.CLOSE_PATH];class bu extends dF{constructor(e,t,n,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=t)r[0]=e[a],r[1]=e[a+1],Qa(n,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,t,n,r,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(t+=r);let u=e[t],h=e[t+1];const d=this.tmpCoordinate_;let f=!0,p,m,g;for(p=t+r;p<n;p+=r)d[0]=e[p],d[1]=e[p+1],g=n0(c,d),g!==m?(f&&(a[l++]=u,a[l++]=h,f=!1),a[l++]=d[0],a[l++]=d[1]):g===Ft.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],f=!1):f=!0,u=d[0],h=d[1],m=g;return(s&&f||p===t+r)&&(a[l++]=u,a[l++]=h),l}drawCustomCoordinates_(e,t,n,r,s){for(let o=0,a=n.length;o<a;++o){const l=n[o],c=this.appendFlatLineCoordinates(e,t,l,r,!1,!1);s.push(c),t=l}return t}drawCustom(e,t,n,r,s){this.beginGeometry(e,t,s);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let c,u,h,d,f;switch(o){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),d=[];const p=e.getEndss();f=0;for(let m=0,g=p.length;m<g;++m){const v=[];f=this.drawCustomCoordinates_(c,f,p[m],a,v),d.push(v)}this.instructions.push([se.CUSTOM,l,d,e,n,H1,s]),this.hitDetectionInstructions.push([se.CUSTOM,l,d,e,r||n,H1,s]);break;case"Polygon":case"MultiLineString":h=[],c=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(c,0,e.getEnds(),a,h),this.instructions.push([se.CUSTOM,l,h,e,n,ld,s]),this.hitDetectionInstructions.push([se.CUSTOM,l,h,e,r||n,ld,s]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),u=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([se.CUSTOM,l,u,e,n,Xs,s]),this.hitDetectionInstructions.push([se.CUSTOM,l,u,e,r||n,Xs,s]);break;case"MultiPoint":c=e.getFlatCoordinates(),u=this.appendFlatPointCoordinates(c,a),u>l&&(this.instructions.push([se.CUSTOM,l,u,e,n,Xs,s]),this.hitDetectionInstructions.push([se.CUSTOM,l,u,e,r||n,Xs,s]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),u=this.coordinates.length,this.instructions.push([se.CUSTOM,l,u,e,n,void 0,s]),this.hitDetectionInstructions.push([se.CUSTOM,l,u,e,r||n,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,n){this.beginGeometryInstruction1_=[se.BEGIN_GEOMETRY,t,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[se.BEGIN_GEOMETRY,t,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let r,s,o=-1;for(t=0;t<n;++t)r=e[t],s=r[0],s==se.END_GEOMETRY?o=t:s==se.BEGIN_GEOMETRY&&(r[2]=t,r3(this.hitDetectionInstructions,o,t),o=-1)}fillStyleToState(e,t={}){if(e){const n=e.getColor();t.fillPatternScale=n&&typeof n=="object"&&"src"in n?this.pixelRatio:1,t.fillStyle=Ln(n||vi)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const n=e.getColor();t.strokeStyle=Ln(n||Nc);const r=e.getLineCap();t.lineCap=r!==void 0?r:tl;const s=e.getLineDash();t.lineDash=s?s.slice():wr;const o=e.getLineDashOffset();t.lineDashOffset=o||xr;const a=e.getLineJoin();t.lineJoin=a!==void 0?a:il;const l=e.getWidth();t.lineWidth=l!==void 0?l:Fc;const c=e.getMiterLimit();t.miterLimit=c!==void 0?c:Ac,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const n=this.state;this.fillStyleToState(e,n),this.strokeStyleToState(t,n)}createFill(e){const t=e.fillStyle,n=[se.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[se.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=r||s!=e.currentLineDash&&!Ss(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[se.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=fL(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;nf(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class LV extends bu{constructor(e,t,n,r){super(e,t,n,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,n){if(!this.image_||this.maxExtent&&!Qa(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,n);const r=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,s);this.instructions.push([se.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([se.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,n){if(!this.image_)return;this.beginGeometry(e,t,n);const r=e.getFlatCoordinates(),s=[];for(let l=0,c=r.length;l<c;l+=e.getStride())(!this.maxExtent||Qa(this.maxExtent,r.slice(l,l+2)))&&s.push(r[l],r[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([se.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([se.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class FV extends bu{constructor(e,t,n,r){super(e,t,n,r)}drawFlatCoordinates_(e,t,n,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,n,r,!1,!1),a=[se.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n}drawLineString(e,t,n){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([se.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,wr,xr],Qs);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(as),this.endGeometry(t)}drawMultiLineString(e,t,n){const r=this.state,s=r.strokeStyle,o=r.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([se.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,wr,xr],Qs);const a=e.getEnds(),l=e.getFlatCoordinates(),c=e.getStride();let u=0;for(let h=0,d=a.length;h<d;++h)u=this.drawFlatCoordinates_(l,u,a[h],c);this.hitDetectionInstructions.push(as),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(as),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(as),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Qs)}}class yE extends bu{constructor(e,t,n,r){super(e,t,n,r)}drawFlatCoordinatess_(e,t,n,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=n.length;this.instructions.push(Qs),this.hitDetectionInstructions.push(Qs);for(let c=0;c<l;++c){const u=n[c],h=this.coordinates.length,d=this.appendFlatLineCoordinates(e,t,u,r,!0,!a),f=[se.MOVE_TO_LINE_TO,h,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(vE),this.hitDetectionInstructions.push(vE)),t=u}return o&&(this.instructions.push(wh),this.hitDetectionInstructions.push(wh)),a&&(this.instructions.push(as),this.hitDetectionInstructions.push(as)),t}drawCircle(e,t,n){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([se.SET_FILL_STYLE,vi]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([se.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,wr,xr]);const a=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const u=[se.CIRCLE,c];this.instructions.push(Qs,u),this.hitDetectionInstructions.push(Qs,u),r.fillStyle!==void 0&&(this.instructions.push(wh),this.hitDetectionInstructions.push(wh)),r.strokeStyle!==void 0&&(this.instructions.push(as),this.hitDetectionInstructions.push(as)),this.endGeometry(t)}drawPolygon(e,t,n){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([se.SET_FILL_STYLE,vi]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([se.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,wr,xr]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(t)}drawMultiPolygon(e,t,n){const r=this.state,s=r.fillStyle,o=r.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([se.SET_FILL_STYLE,vi]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([se.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,wr,xr]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride();let u=0;for(let h=0,d=a.length;h<d;++h)u=this.drawFlatCoordinatess_(l,u,a[h],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,r=t.length;n<r;++n)t[n]=Gs(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function $V(i,e,t,n,r){const s=[];let o=t,a=0,l=e.slice(t,2);for(;a<i&&o+r<n;){const[c,u]=l.slice(-2),h=e[o+r],d=e[o+r+1],f=Math.sqrt((h-c)*(h-c)+(d-u)*(d-u));if(a+=f,a>=i){const p=(i-a+f)/f,m=ki(c,h,p),g=ki(u,d,p);l.push(m,g),s.push(l),l=[m,g],a==i&&(o+=r),a=0}else if(a<i)l.push(e[o+r],e[o+r+1]),o+=r;else{const p=f-a,m=ki(c,h,p/f),g=ki(u,d,p/f);l.push(m,g),s.push(l),l=[m,g],a=0,o+=r}}return a>0&&s.push(l),s}function jV(i,e,t,n,r){let s=t,o=t,a=0,l=0,c=t,u,h,d,f,p,m,g,v,y,w;for(h=t;h<n;h+=r){const b=e[h],x=e[h+1];p!==void 0&&(y=b-p,w=x-m,f=Math.sqrt(y*y+w*w),g!==void 0&&(l+=d,u=Math.acos((g*y+v*w)/(d*f)),u>i&&(l>a&&(a=l,s=c,o=h),l=0,c=h-r)),d=f,g=y,v=w),p=b,m=x}return l+=f,l>a?[c,h]:[s,o]}const pd={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class WV extends bu{constructor(e,t,n,r){super(e,t,n,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[vi]={fillStyle:vi},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,n){const r=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!r&&!s)return;const a=this.coordinates;let l=a.length;const c=e.getType();let u=null,h=e.getStride();if(o.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!yi(this.maxExtent,e.getExtent()))return;let d;if(u=e.getFlatCoordinates(),c=="LineString")d=[u.length];else if(c=="MultiLineString")d=e.getEnds();else if(c=="Polygon")d=e.getEnds().slice(0,1);else if(c=="MultiPolygon"){const g=e.getEndss();d=[];for(let v=0,y=g.length;v<y;++v)d.push(g[v][0])}this.beginGeometry(e,t,n);const f=o.repeat,p=f?void 0:o.textAlign;let m=0;for(let g=0,v=d.length;g<v;++g){let y;f?y=$V(f*this.resolution,u,m,d[g],h):y=[u.slice(m,d[g])];for(let w=0,b=y.length;w<b;++w){const x=y[w];let C=0,E=x.length;if(p==null){const R=jV(o.maxAngle,x,0,x.length,2);C=R[0],E=R[1]}for(let R=C;R<E;R+=h)a.push(x[R],x[R+1]);const S=a.length;m=d[g],this.drawChars_(l,S),l=S}}this.endGeometry(t)}else{let d=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":u=e.getFlatCoordinates();break;case"LineString":u=e.getFlatMidpoint();break;case"Circle":u=e.getCenter();break;case"MultiLineString":u=e.getFlatMidpoints(),h=2;break;case"Polygon":u=e.getFlatInteriorPoint(),o.overflow||d.push(u[2]/this.resolution),h=3;break;case"MultiPolygon":const b=e.getFlatInteriorPoints();u=[];for(let x=0,C=b.length;x<C;x+=3)o.overflow||d.push(b[x+2]/this.resolution),u.push(b[x],b[x+1]);if(u.length===0)return;h=2;break}const f=this.appendFlatPointCoordinates(u,h);if(f===l)return;if(d&&(f-l)/2!==u.length/h){let b=l/2;d=d.filter((x,C)=>{const E=a[(b+C)*2]===u[C*h]&&a[(b+C)*2+1]===u[C*h+1];return E||--b,E})}this.saveTextStates_();const p=o.backgroundFill?this.createFill(this.fillStyleToState(o.backgroundFill)):null,m=o.backgroundStroke?this.createStroke(this.strokeStyleToState(o.backgroundStroke)):null;this.beginGeometry(e,t,n);let g=o.padding;if(g!=Zs&&(o.scale[0]<0||o.scale[1]<0)){let b=o.padding[0],x=o.padding[1],C=o.padding[2],E=o.padding[3];o.scale[0]<0&&(x=-x,E=-E),o.scale[1]<0&&(b=-b,C=-C),g=[b,x,C,E]}const v=this.pixelRatio;this.instructions.push([se.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,g==Zs?Zs:g.map(function(b){return b*v}),p,m,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const y=1/v,w=p?p.slice(0):null;w&&(w[1]=vi),this.hitDetectionInstructions.push([se.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[y,y],NaN,this.declutterMode_,this.declutterImageWithText_,g,w,m,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?vi:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||Lc,justify:t.justify,textBaseline:t.textBaseline||ud,scale:t.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=pd[r.textBaseline],u=this.textOffsetY_*l,h=this.text_,d=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([se.DRAW_CHARS,e,t,c,r.overflow,a,r.maxAngle,l,u,s,d*l,h,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([se.DRAW_CHARS,e,t,c,r.overflow,a&&vi,r.maxAngle,l,u,s,d*l,h,o,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let n,r,s;if(!e)this.text_="";else{const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Ln(o.getColor()||vi)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const m=a.getLineDash(),g=a.getLineDashOffset(),v=a.getWidth(),y=a.getMiterLimit();s.lineCap=a.getLineCap()||tl,s.lineDash=m?m.slice():wr,s.lineDashOffset=g===void 0?xr:g,s.lineJoin=a.getLineJoin()||il,s.lineWidth=v===void 0?Fc:v,s.miterLimit=y===void 0?Ac:y,s.strokeStyle=Ln(a.getColor()||Nc)}n=this.textState_;const l=e.getFont()||JL;sV(l);const c=e.getScaleArray();n.overflow=e.getOverflow(),n.font=l,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||ud,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||Zs,n.scale=c===void 0?[1,1]:c;const u=e.getOffsetX(),h=e.getOffsetY(),d=e.getRotateWithView(),f=e.getKeepUpright(),p=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=d===void 0?!1:d,this.textKeepUpright_=f===void 0?!0:f,this.textRotation_=p===void 0?0:p,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Se(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+Se(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const zV={Circle:yE,Default:bu,Image:LV,LineString:FV,Polygon:yE,Text:WV};class qV{constructor(e,t,n,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const r in n){const s=n[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[n];r===void 0&&(r={},this.buildersByZIndex_[n]=r);let s=r[t];if(s===void 0){const o=zV[t];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s}return s}}function GV(i,e,t,n,r,s,o,a,l,c,u,h,d=!0){let f=i[e],p=i[e+1],m=0,g=0,v=0,y=0;function w(){m=f,g=p,e+=n,f=i[e],p=i[e+1],y+=v,v=Math.sqrt((f-m)*(f-m)+(p-g)*(p-g))}do w();while(e<t-n&&y+v<s);let b=v===0?0:(s-y)/v;const x=ki(m,f,b),C=ki(g,p,b),E=e-n,S=y,R=s+a*l(c,r,u);for(;e<t-n&&y+v<R;)w();b=v===0?0:(R-y)/v;const I=ki(m,f,b),k=ki(g,p,b);let M=!1;if(d)if(h){const z=[x,C,I,k];ML(z,0,4,2,h,z,z),M=z[0]>z[2]}else M=x>I;const N=Math.PI,F=[],q=E+n===e;e=E,v=0,y=S,f=i[e],p=i[e+1];let A;if(q){w(),A=Math.atan2(p-g,f-m),M&&(A+=A>0?-N:N);const z=(I+x)/2,P=(k+C)/2;return F[0]=[z,P,(R-s)/2,A,r],F}r=r.replace(/\n/g," ");for(let z=0,P=r.length;z<P;){w();let G=Math.atan2(p-g,f-m);if(M&&(G+=G>0?-N:N),A!==void 0){let j=G-A;if(j+=j>N?-2*N:j<-N?2*N:0,Math.abs(j)>o)return null}A=G;const U=z;let K=0;for(;z<P;++z){const j=M?P-z-1:z,B=a*l(c,r[j],u);if(e+n<t&&y+v<s+K+B/2)break;K+=B}if(z===U)continue;const D=M?r.substring(P-U,P-z):r.substring(U,z);b=v===0?0:(s+K/2-y)/v;const L=ki(m,f,b),$=ki(g,p,b);F.push([L,$,K/2,G,D]),s+=K}return F}class fF{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(cd(),{get:(e,t)=>{if(typeof cd()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,n)=>(this.push_(t,n),!0)})}push_(...e){const t=this.instructions_,n=this.zIndex+this.offset_;t[n]||(t[n]=[]),t[n].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,r=t.length;n<r;++n){const s=t[n];if(typeof s=="function"){s(e);continue}const o=t[++n];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const ia=Li(),Vr=[],or=[],ar=[],Xr=[];function _E(i){return i[3].declutterBox}const bE=new RegExp("[-----]");function Wp(i,e){return e==="start"?e=bE.test(i)?"right":"left":e==="end"&&(e=bE.test(i)?"left":"right"),pd[e]}function YV(i,e,t){return t>0&&i.push(`
`,""),i.push(e,""),i}function BV(i,e,t){return t%2===0&&(i+=e),i}class HV{constructor(e,t,n,r,s){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=fn(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new fF:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,n,r){const s=e+t+n+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=n?this.fillStates[n]:null,l=this.textStates[t],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],h=l.justify?pd[l.justify]:Wp(Array.isArray(e)?e[0]:e,l.textAlign||Lc),d=r&&o.lineWidth?o.lineWidth:0,f=Array.isArray(e)?e:String(e).split(`
`).reduce(YV,[]),{width:p,height:m,widths:g,heights:v,lineWidths:y}=aV(l,f),w=p+d,b=[],x=(w+2)*u[0],C=(m+d)*u[1],E={width:x<0?Math.floor(x):Math.ceil(x),height:C<0?Math.floor(C):Math.ceil(C),contextInstructions:b};(u[0]!=1||u[1]!=1)&&b.push("scale",u),r&&(b.push("strokeStyle",o.strokeStyle),b.push("lineWidth",d),b.push("lineCap",o.lineCap),b.push("lineJoin",o.lineJoin),b.push("miterLimit",o.miterLimit),b.push("setLineDash",[o.lineDash]),b.push("lineDashOffset",o.lineDashOffset)),n&&b.push("fillStyle",a.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");const S=.5-h;let R=h*w+S*d;const I=[],k=[];let M=0,N=0,F=0,q=0,A;for(let z=0,P=f.length;z<P;z+=2){const G=f[z];if(G===`
`){N+=M,M=0,R=h*w+S*d,++q;continue}const U=f[z+1]||l.font;U!==A&&(r&&I.push("font",U),n&&k.push("font",U),A=U),M=Math.max(M,v[F]);const K=[G,R+S*g[F]+h*(g[F]-y[q]),.5*(d+M)+N];R+=g[F],r&&I.push("strokeText",K),n&&k.push("fillText",K),++F}return Array.prototype.push.apply(b,I),Array.prototype.push.apply(b,k),this.labels_[s]=E,E}replayTextBackground_(e,t,n,r,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignAndScaleFill_=o[2],e.fillStyle=o[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,r,s,o,a,l,c,u,h,d,f,p,m,g){a*=d[0],l*=d[1];let v=n-a,y=r-l;const w=s+c>e?e-c:s,b=o+u>t?t-u:o,x=p[3]+w*d[0]+p[1],C=p[0]+b*d[1]+p[2],E=v-p[3],S=y-p[0];(m||h!==0)&&(Vr[0]=E,Xr[0]=E,Vr[1]=S,or[1]=S,or[0]=E+x,ar[0]=or[0],ar[1]=S+C,Xr[1]=ar[1]);let R;return h!==0?(R=Mr(fn(),n,r,1,1,h,-n,-r),$t(R,Vr),$t(R,or),$t(R,ar),$t(R,Xr),_s(Math.min(Vr[0],or[0],ar[0],Xr[0]),Math.min(Vr[1],or[1],ar[1],Xr[1]),Math.max(Vr[0],or[0],ar[0],Xr[0]),Math.max(Vr[1],or[1],ar[1],Xr[1]),ia)):_s(Math.min(E,E+x),Math.min(S,S+C),Math.max(E,E+x),Math.max(S,S+C),ia),f&&(v=Math.round(v),y=Math.round(y)),{drawImageX:v,drawImageY:y,drawImageW:w,drawImageH:b,originX:c,originY:u,declutterBox:{minX:ia[0],minY:ia[1],maxX:ia[2],maxY:ia[3],value:g},canvasTransform:R,scale:d}}replayImageOrLabel_(e,t,n,r,s,o,a){const l=!!(o||a),c=r.declutterBox,u=a?a[2]*r.scale[0]/2:0;return c.minX-u<=t[0]&&c.maxX+u>=0&&c.minY-u<=t[1]&&c.maxY+u>=0&&(l&&this.replayTextBackground_(e,Vr,or,ar,Xr,o,a),lV(e,r.canvasTransform,s,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const n=$t(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(n[0]%r,n[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,n,r){const s=this.textStates[t],o=this.createLabel(e,t,r,n),a=this.strokeStates[n],l=this.pixelRatio,c=Wp(Array.isArray(e)?e[0]:e,s.textAlign||Lc),u=pd[s.textBaseline||ud],h=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*s.scale[0],f=c*d+2*(.5-c)*h,p=u*o.height/l+2*(.5-u)*h;return{label:o,anchorX:f,anchorY:p}}execute_(e,t,n,r,s,o,a,l){const c=this.zIndexContext_;let u;this.pixelCoordinates_&&Ss(n,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=hs(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),iU(this.renderedTransform_,n));let h=0;const d=r.length;let f=0,p,m,g,v,y,w,b,x,C,E,S,R,I,k=0,M=0;const N=this.coordinateCache_,F=this.viewRotation_,q=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,A={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:F},z=this.instructions!=r||this.overlaps?0:200;let P,G,U,K;for(;h<d;){const D=r[h];switch(D[0]){case se.BEGIN_GEOMETRY:P=D[1],K=D[3],P.getGeometry()?a!==void 0&&!yi(a,K.getExtent())?h=D[2]+1:++h:h=D[2],c&&(c.zIndex=D[4]);break;case se.BEGIN_PATH:k>z&&(this.fill_(e),k=0),M>z&&(e.stroke(),M=0),!k&&!M&&(e.beginPath(),y=NaN,w=NaN),++h;break;case se.CIRCLE:f=D[1];const $=u[f],j=u[f+1],B=u[f+2],W=u[f+3],Z=B-$,J=W-j,ae=Math.sqrt(Z*Z+J*J);e.moveTo($+ae,j),e.arc($,j,ae,0,2*Math.PI,!0),++h;break;case se.CLOSE_PATH:e.closePath(),++h;break;case se.CUSTOM:f=D[1],p=D[2];const et=D[3],it=D[4],he=D[5];A.geometry=et,A.feature=P,h in N||(N[h]=[]);const rt=N[h];he?he(u,f,p,2,rt):(rt[0]=u[f],rt[1]=u[f+1],rt.length=2),c&&(c.zIndex=D[6]),it(rt,A),++h;break;case se.DRAW_IMAGE:f=D[1],p=D[2],C=D[3],m=D[4],g=D[5];let gt=D[6];const Tt=D[7],vt=D[8],Ge=D[9],zi=D[10];let ri=D[11];const Yt=D[12];let Kt=D[13];v=D[14]||"declutter";const Ve=D[15];if(!C&&D.length>=20){E=D[19],S=D[20],R=D[21],I=D[22];const fi=this.drawLabelWithPointPlacement_(E,S,R,I);C=fi.label,D[3]=C;const tr=D[23];m=(fi.anchorX-tr)*this.pixelRatio,D[4]=m;const Zt=D[24];g=(fi.anchorY-Zt)*this.pixelRatio,D[5]=g,gt=C.height,D[6]=gt,Kt=C.width,D[13]=Kt}let qi;D.length>25&&(qi=D[25]);let er,Br,On;D.length>17?(er=D[16],Br=D[17],On=D[18]):(er=Zs,Br=null,On=null),zi&&q?ri+=F:!zi&&!q&&(ri-=F);let Uo=0;for(;f<p;f+=2){if(qi&&qi[Uo++]<Kt/this.pixelRatio)continue;const fi=this.calculateImageOrLabelDimensions_(C.width,C.height,u[f],u[f+1],Kt,gt,m,g,vt,Ge,ri,Yt,s,er,!!Br||!!On,P),tr=[e,t,C,fi,Tt,Br,On];if(l){let Zt,pi,Gi;if(Ve){const yt=p-f;if(!Ve[yt]){Ve[yt]={args:tr,declutterMode:v};continue}const si=Ve[yt];Zt=si.args,pi=si.declutterMode,delete Ve[yt],Gi=_E(Zt)}let ir,nr;if(Zt&&(pi!=="declutter"||!l.collides(Gi))&&(ir=!0),(v!=="declutter"||!l.collides(fi.declutterBox))&&(nr=!0),pi==="declutter"&&v==="declutter"){const yt=ir&&nr;ir=yt,nr=yt}ir&&(pi!=="none"&&l.insert(Gi),this.replayImageOrLabel_.apply(this,Zt)),nr&&(v!=="none"&&l.insert(fi.declutterBox),this.replayImageOrLabel_.apply(this,tr))}else this.replayImageOrLabel_.apply(this,tr)}++h;break;case se.DRAW_CHARS:const Ms=D[1],As=D[2],$e=D[3],ve=D[4];I=D[5];const Ce=D[6],Ee=D[7],qe=D[8];R=D[9];const xt=D[10];E=D[11],Array.isArray(E)&&(E=E.reduce(BV,"")),S=D[12];const Ns=[D[13],D[13]];v=D[14]||"declutter";const me=D[15],Xe=this.textStates[S],le=Xe.font,Ae=[Xe.scale[0]*Ee,Xe.scale[1]*Ee];let Pt;le in this.widths_?Pt=this.widths_[le]:(Pt={},this.widths_[le]=Pt);const De=hF(u,Ms,As,2),th=Math.abs(Ae[0])*cE(le,E,Pt);if(ve||th<=De){const fi=this.textStates[S].textAlign,tr=(De-th)*Wp(E,fi),Zt=GV(u,Ms,As,2,E,tr,Ce,Math.abs(Ae[0]),cE,le,Pt,q?0:this.viewRotation_,me);e:if(Zt){const pi=[];let Gi,ir,nr,yt,si;if(R)for(Gi=0,ir=Zt.length;Gi<ir;++Gi){si=Zt[Gi],nr=si[4],yt=this.createLabel(nr,S,"",R),m=si[2]+(Ae[0]<0?-xt:xt),g=$e*yt.height+(.5-$e)*2*xt*Ae[1]/Ae[0]-qe;const rr=this.calculateImageOrLabelDimensions_(yt.width,yt.height,si[0],si[1],yt.width,yt.height,m,g,0,0,si[3],Ns,!1,Zs,!1,P);if(l&&v==="declutter"&&l.collides(rr.declutterBox))break e;pi.push([e,t,yt,rr,1,null,null])}if(I)for(Gi=0,ir=Zt.length;Gi<ir;++Gi){si=Zt[Gi],nr=si[4],yt=this.createLabel(nr,S,I,""),m=si[2],g=$e*yt.height-qe;const rr=this.calculateImageOrLabelDimensions_(yt.width,yt.height,si[0],si[1],yt.width,yt.height,m,g,0,0,si[3],Ns,!1,Zs,!1,P);if(l&&v==="declutter"&&l.collides(rr.declutterBox))break e;pi.push([e,t,yt,rr,1,null,null])}l&&v!=="none"&&l.load(pi.map(_E));for(let rr=0,xz=pi.length;rr<xz;++rr)this.replayImageOrLabel_.apply(this,pi[rr])}}++h;break;case se.END_GEOMETRY:if(o!==void 0){P=D[1];const fi=o(P,K,v);if(fi)return fi}++h;break;case se.FILL:z?k++:this.fill_(e),++h;break;case se.MOVE_TO_LINE_TO:for(f=D[1],p=D[2],G=u[f],U=u[f+1],e.moveTo(G,U),y=G+.5|0,w=U+.5|0,f+=2;f<p;f+=2)G=u[f],U=u[f+1],b=G+.5|0,x=U+.5|0,(f==p-2||b!==y||x!==w)&&(e.lineTo(G,U),y=b,w=x);++h;break;case se.SET_FILL_STYLE:this.alignAndScaleFill_=D[2],k&&(this.fill_(e),k=0,M&&(e.stroke(),M=0)),e.fillStyle=D[1],++h;break;case se.SET_STROKE_STYLE:M&&(e.stroke(),M=0),this.setStrokeStyle_(e,D),++h;break;case se.STROKE:z?M++:e.stroke(),++h;break;default:++h;break}}k&&this.fill_(e),M&&e.stroke()}execute(e,t,n,r,s,o){this.viewRotation_=r,this.execute_(e,t,n,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,n,r,s){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,s)}}const Us=["Polygon","Circle","LineString","Image","Text","Default"],pF=["Image","Text"],UV=Us.filter(i=>!pF.includes(i));class VV{constructor(e,t,n,r,s,o,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=fn(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,t){for(const n in e){let r=this.executorsByZIndex_[n];r===void 0&&(r={},this.executorsByZIndex_[n]=r);const s=e[n];for(const o in s){const a=s[o];r[o]=new HV(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,r,s,o){r=Math.round(r);const a=r*2+1,l=Mr(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-n,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Nt(a,a));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=Li(),mc(h,e),nf(h,t*(this.renderBuffer_+r),h));const d=XV(r);let f;function p(x,C,E){const S=u.getImageData(0,0,a,a).data;for(let R=0,I=d.length;R<I;R++)if(S[d[R]]>0){if(!o||E==="none"||f!=="Image"&&f!=="Text"||o.includes(x)){const k=(d[R]-3)/4,M=r-k%a,N=r-(k/a|0),F=s(x,C,M*M+N*N);if(F)return F}u.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(br);let g,v,y,w,b;for(g=m.length-1;g>=0;--g){const x=m[g].toString();for(y=this.executorsByZIndex_[x],v=Us.length-1;v>=0;--v)if(f=Us[v],w=y[f],w!==void 0&&(b=w.executeHitDetection(u,l,n,p,h),b))return b}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],r=t[1],s=t[2],o=t[3],a=[n,r,n,o,s,o,s,r];return hs(a,0,8,2,e,a),a}isEmpty(){return Za(this.executorsByZIndex_)}execute(e,t,n,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?n3:br),o=o||Us;const c=Us.length;for(let u=0,h=l.length;u<h;++u){const d=l[u].toString(),f=this.executorsByZIndex_[d];for(let p=0,m=o.length;p<m;++p){const g=o[p],v=f[g];if(v!==void 0){const y=a===null?void 0:v.getZIndexContext(),w=y?y.getContext():e,b=this.maxExtent_&&g!=="Image"&&g!=="Text";if(b&&(w.save(),this.clip(w,n)),!y||g==="Text"||g==="Image"?v.execute(w,t,n,r,s,a):y.pushFunction(x=>v.execute(x,t,n,r,s,a)),b&&w.restore(),y){y.offset();const x=l[u]*c+Us.indexOf(g);this.deferredZIndexContexts_[x]||(this.deferredZIndexContexts_[x]=[]),this.deferredZIndexContexts_[x].push(y)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(br);for(let n=0,r=t.length;n<r;++n)e[t[n]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[n]].length=0}}const zp={};function XV(i){if(zp[i]!==void 0)return zp[i];const e=i*2+1,t=i*i,n=new Array(t+1);for(let s=0;s<=i;++s)for(let o=0;o<=i;++o){const a=s*s+o*o;if(a>t)break;let l=n[a];l||(l=[],n[a]=l),l.push(((i+s)*e+(i+o))*4+3),s>0&&l.push(((i-s)*e+(i+o))*4+3),o>0&&(l.push(((i+s)*e+(i-o))*4+3),s>0&&l.push(((i-s)*e+(i-o))*4+3))}const r=[];for(let s=0,o=n.length;s<o;++s)n[s]&&r.push(...n[s]);return zp[i]=r,r}class KV extends dF{constructor(e,t,n,r,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=r,this.transformRotation_=r?tf(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=fn()}drawImages_(e,t,n,r){if(!this.image_)return;const s=hs(e,t,n,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,h=s.length;u<h;u+=2){const d=s[u]-this.imageAnchorX_,f=s[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const p=d+this.imageAnchorX_,m=f+this.imageAnchorY_;Mr(a,p,m,1,1,c,-p,-m),o.save(),o.transform.apply(o,a),o.translate(p,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,n,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=hs(e,t,n,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<n;t+=r){const l=s[t]+this.textOffsetX_,c=s[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,t,n,r,s){const o=this.context_,a=hs(e,t,n,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),n}drawRings_(e,t,n,r){for(let s=0,o=n.length;s<o;++s)t=this.moveToLineTo_(e,t,n[s],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!yi(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=dU(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(n*n+r*r),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);n&&(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,r=t.length;n<r;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!yi(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(yi(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();n.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!yi(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!yi(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];r=this.drawRings_(n,r,c,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),Ss(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,r=e.textAlign?e.textAlign:Lc;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=r&&(n.textAlign=r,t.textAlign=r),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:Ln(n||vi)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),u=s||wr;this.strokeState_={lineCap:r!==void 0?r:tl,lineDash:this.pixelRatio_===1?u:u.map(h=>h*this.pixelRatio_),lineDashOffset:(o||xr)*this.pixelRatio_,lineJoin:a!==void 0?a:il,lineWidth:(l!==void 0?l:Fc)*this.pixelRatio_,miterLimit:c!==void 0?c:Ac,strokeStyle:Ln(n||Nc)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*n,this.imageAnchorY_=r[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const f=t.getColor();this.textFillState_={fillStyle:Ln(f||vi)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const f=n.getColor(),p=n.getLineCap(),m=n.getLineDash(),g=n.getLineDashOffset(),v=n.getLineJoin(),y=n.getWidth(),w=n.getMiterLimit();this.textStrokeState_={lineCap:p!==void 0?p:tl,lineDash:m||wr,lineDashOffset:g||xr,lineJoin:v!==void 0?v:il,lineWidth:y!==void 0?y:Fc,miterLimit:w!==void 0?w:Ac,strokeStyle:Ln(f||Nc)}}const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),u=e.getText(),h=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:r!==void 0?r:JL,textAlign:h!==void 0?h:Lc,textBaseline:d!==void 0?d:ud},this.text_=u!==void 0?Array.isArray(u)?u.reduce((f,p,m)=>f+=m%2?" ":p,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const Mn=.5;function ZV(i,e,t,n,r,s,o,a,l){const c=r,u=i[0]*Mn,h=i[1]*Mn,d=Nt(u,h);d.imageSmoothingEnabled=!1;const f=d.canvas,p=new KV(d,Mn,r,null,o,a,null),m=t.length,g=Math.floor((256*256*256-1)/m),v={};for(let w=1;w<=m;++w){const b=t[w-1],x=b.getStyleFunction()||n;if(!x)continue;let C=x(b,s);if(!C)continue;Array.isArray(C)||(C=[C]);const S=(w*g).toString(16).padStart(7,"#00000");for(let R=0,I=C.length;R<I;++R){const k=C[R],M=k.getGeometryFunction()(b);if(!M||!yi(c,M.getExtent()))continue;const N=k.clone(),F=N.getFill();F&&F.setColor(S);const q=N.getStroke();q&&(q.setColor(S),q.setLineDash(null)),N.setText(void 0);const A=k.getImage();if(A){const U=A.getImageSize();if(!U)continue;const K=Nt(U[0],U[1],void 0,{alpha:!1}),D=K.canvas;K.fillStyle=S,K.fillRect(0,0,D.width,D.height),N.setImage(new yu({img:D,anchor:A.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:A.getOrigin(),opacity:1,size:A.getSize(),scale:A.getScale(),rotation:A.getRotation(),rotateWithView:A.getRotateWithView()}))}const z=N.getZIndex()||0;let P=v[z];P||(P={},v[z]=P,P.Polygon=[],P.Circle=[],P.LineString=[],P.Point=[]);const G=M.getType();if(G==="GeometryCollection"){const U=M.getGeometriesArrayRecursive();for(let K=0,D=U.length;K<D;++K){const L=U[K];P[L.getType().replace("Multi","")].push(L,N)}}else P[G.replace("Multi","")].push(M,N)}}const y=Object.keys(v).map(Number).sort(br);for(let w=0,b=y.length;w<b;++w){const x=v[y[w]];for(const C in x){const E=x[C];for(let S=0,R=E.length;S<R;S+=2){p.setStyle(E[S+1]);for(let I=0,k=e.length;I<k;++I)p.setTransform(e[I]),p.drawGeometry(E[S])}}}return d.getImageData(0,0,f.width,f.height)}function QV(i,e,t){const n=[];if(t){const r=Math.floor(Math.round(i[0])*Mn),s=Math.floor(Math.round(i[1])*Mn),o=(pt(r,0,t.width-1)+pt(s,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],u=t.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);u&&u%h===0&&n.push(e[u/h-1])}return n}const JV=.5,mF={Point:a4,LineString:r4,Polygon:c4,MultiPoint:l4,MultiLineString:s4,MultiPolygon:o4,GeometryCollection:n4,Circle:t4};function e4(i,e){return parseInt(Se(i),10)-parseInt(Se(e),10)}function wE(i,e){const t=gF(i,e);return t*t}function gF(i,e){return JV*i/e}function t4(i,e,t,n,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=i.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,n,r)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}function xE(i,e,t,n,r,s,o,a){const l=[],c=t.getImage();if(c){let d=!0;const f=c.getImageState();f==be.LOADED||f==be.ERROR?d=!1:f==be.IDLE&&c.load(),d&&l.push(c.ready())}const u=t.getFill();u&&u.loading()&&l.push(u.ready());const h=l.length>0;return h&&Promise.all(l).then(()=>r(null)),i4(i,e,t,n,s,o,a),h}function i4(i,e,t,n,r,s,o){const a=t.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(n,r);if(t.getRenderer())vF(i,l,t,e,o);else{const u=mF[l.getType()];u(i,l,t,e,o,s)}}function vF(i,e,t,n,r){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)vF(i,o[a],t,n,r);return}i.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer(),r)}function n4(i,e,t,n,r,s){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const c=mF[o[a].getType()];c(i,o[a],t,n,r,s)}}function r4(i,e,t,n,r){const s=t.getStroke();if(s){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,n,r)}const o=t.getText();if(o&&o.getText()){const a=i.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n,r)}}function s4(i,e,t,n,r){const s=t.getStroke();if(s){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,n,r)}const o=t.getText();if(o&&o.getText()){const a=i.getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n,r)}}function o4(i,e,t,n,r){const s=t.getFill(),o=t.getStroke();if(o||s){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,n,r)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n,r)}}function a4(i,e,t,n,r,s){const o=t.getImage(),a=t.getText(),l=a&&a.getText(),c=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=be.LOADED)return;const u=i.getBuilder(t.getZIndex(),"Image");u.setImageStyle(o,c),u.drawPoint(e,n,r)}if(l){const u=i.getBuilder(t.getZIndex(),"Text");u.setTextStyle(a,c),u.drawText(e,n,r)}}function l4(i,e,t,n,r,s){const o=t.getImage(),a=o&&o.getOpacity()!==0,l=t.getText(),c=l&&l.getText(),u=s&&a&&c?{}:void 0;if(a){if(o.getImageState()!=be.LOADED)return;const h=i.getBuilder(t.getZIndex(),"Image");h.setImageStyle(o,u),h.drawMultiPoint(e,n,r)}if(c){const h=i.getBuilder(t.getZIndex(),"Text");h.setTextStyle(l,u),h.drawText(e,n,r)}}function c4(i,e,t,n,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,n,r)}const a=t.getText();if(a&&a.getText()){const l=i.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n,r)}}const u4=5;class h4 extends mu{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=u4}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Ne()}getData(e){return null}prepareFrame(e){return Ne()}renderFrame(e,t){return Ne()}forEachFeatureAtCoordinate(e,t,n,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===be.LOADED||t.getState()===be.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=be.LOADED&&t!=be.ERROR&&e.addEventListener(fe.CHANGE,this.boundHandleImageChange_),t==be.IDLE&&(e.load(),t=e.getState()),t==be.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const SE=[];let va=null;function d4(){va=Nt(1,1,void 0,{willReadFrequently:!0})}class yF extends h4{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=fn(),this.pixelTransform=fn(),this.inversePixelTransform=fn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,n){va||d4(),va.clearRect(0,0,1,1);let r;try{va.drawImage(e,t,n,1,1,0,0,1,1),r=va.getImageData(0,0,1,1).data}catch{return va=null,null}return r}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!n||e&&e.style.backgroundColor&&Ss(el(e.style.backgroundColor),el(n)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&oU(o.canvas.style.transform,t)?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=Nt();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const r=Mo(n),s=af(n),o=of(n),a=sf(n);$t(t.coordinateToPixelTransform,r),$t(t.coordinateToPixelTransform,s),$t(t.coordinateToPixelTransform,o),$t(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;$t(l,r),$t(l,s),$t(l,o),$t(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const n=e.extent,r=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(He(n)/r*o),l=Math.round(li(n)/r*o);Mr(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-l/2),kL(this.inversePixelTransform,this.pixelTransform);const c=sU(this.pixelTransform);if(this.useContainer(t,c,this.getBackground(e)),!this.containerReused){const u=this.context.canvas;u.width!=a||u.height!=l?(u.width=a,u.height=l):this.context.clearRect(0,0,a,l),c!==u.style.transform&&(u.style.transform=c)}}dispatchRenderEvent_(e,t,n){const r=this.getLayer();if(r.hasListener(e)){const s=new lF(e,this.inversePixelTransform,n,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Ui.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Ui.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new fF),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Ui.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Ui.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,r,s,o,a){const l=s/2,c=o/2,u=r/t,h=-u,d=-e[0]+a,f=-e[1];return Mr(this.tempTransform,l,c,u,h,-n,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class f4 extends yF{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Li(),this.wrappedRenderedExtent_=Li(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,n){const r=t.extent,s=t.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,u=l.getExtent(),h=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),f=t.pixelRatio,p=t.viewHints,m=!(p[ti.ANIMATING]||p[ti.INTERACTING]),g=this.context,v=Math.round(He(r)/a*f),y=Math.round(li(r)/a*f),w=h.getWrapX()&&l.canWrapX(),b=w?He(u):null,x=w?Math.ceil((r[2]-u[2])/b)+1:1;let C=w?Math.floor((r[0]-u[0])/b):0;do{let E=this.getRenderTransform(o,a,0,f,v,y,C*b);t.declutter&&(E=E.slice(0)),e.execute(g,[g.canvas.width,g.canvas.height],E,c,m,n===void 0?Us:n?pF:UV,n?d&&t.declutter[d]:void 0)}while(++C<x)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Nt(this.context.canvas.width,this.context.canvas.height,SE))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,pf(this.context),SE.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const r=e.viewState;this.prepareContainer(e,t);const s=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(Ui.PRERENDER)||this.getLayer().hasListener(Ui.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),r.projection,this.clipped_=!1,a&&n.extent&&this.clipping){const l=os(n.extent);a=yi(l,e.extent),this.clipped_=a&&!xa(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return a&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],h=n[0]*Mn,d=n[1]*Mn;u.push(this.getRenderTransform(r,s,o,Mn,h,d,0).slice());const f=c.getSource(),p=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!xa(p,l)){let m=l[0];const g=He(p);let v=0,y;for(;m<p[0];)--v,y=g*v,u.push(this.getRenderTransform(r,s,o,Mn,h,d,y).slice()),m+=g;for(v=0,m=l[2];m>p[2];)++v,y=g*v,u.push(this.getRenderTransform(r,s,o,Mn,h,d,y).slice()),m-=g}this.hitDetectionImageData_=ZV(n,u,this.renderedFeatures_,c.getStyleFunction(),l,s,o,wE(s,this.renderedPixelRatio_))}t(QV(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,r,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),c={},u=function(d,f,p){const m=Se(d),g=c[m];if(g){if(g!==!0&&p<g.distanceSq){if(p===0)return c[m]=!0,s.splice(s.lastIndexOf(g),1),r(d,l,f);g.geometry=f,g.distanceSq=p}}else{if(p===0)return c[m]=!0,r(d,l,f);s.push(c[m]={feature:d,layer:l,geometry:f,distanceSq:p,callback:r})}},h=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,o,a,n,u,h?t.declutter?.[h]?.all().map(d=>d.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const r=e.viewHints[ti.ANIMATING],s=e.viewHints[ti.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,u=c.projection,h=c.resolution,d=e.pixelRatio,f=t.getRevision(),p=t.getRenderBuffer();let m=t.getRenderOrder();m===void 0&&(m=e4);const g=c.center.slice(),v=nf(l,p*h),y=v.slice(),w=[v.slice()],b=u.getExtent();if(n.getWrapX()&&u.canWrapX()&&!xa(b,e.extent)){const F=He(b),q=Math.max(He(v)/2,F);v[0]=b[0]-q,v[2]=b[2]+q,xL(g,u);const A=yL(w[0],u);A[0]<b[0]&&A[2]<b[2]?w.push([A[0]+F,A[1],A[2]+F,A[3]]):A[0]>b[0]&&A[2]>b[2]&&w.push([A[0]-F,A[1],A[2]-F,A[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==f&&this.renderedRenderOrder_==m&&this.renderedFrameDeclutter_===!!e.declutter&&xa(this.wrappedRenderedExtent_,v))return Ss(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new qV(gF(h,d),v,h,d);let C;for(let F=0,q=w.length;F<q;++F)n.loadFeatures(w[F],h,u);const E=wE(h,d);let S=!0;const R=(F,q)=>{let A;const z=F.getStyleFunction()||t.getStyleFunction();if(z&&(A=z(F,h)),A){const P=this.renderFeature(F,E,A,x,C,this.getLayer().getDeclutter(),q);S=S&&!P}},I=PL(v),k=n.getFeaturesInExtent(I);m&&k.sort(m);for(let F=0,q=k.length;F<q;++F)R(k[F],F);this.renderedFeatures_=k,this.ready=S;const M=x.finish(),N=new VV(v,h,d,n.getOverlaps(),M,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=h,this.renderedRevision_=f,this.renderedRenderOrder_=m,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=y,this.wrappedRenderedExtent_=v,this.renderedCenter_=g,this.renderedProjection_=u,this.renderedPixelRatio_=d,this.replayGroup_=N,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,r,s,o,a){if(!n)return!1;let l=!1;if(Array.isArray(n))for(let c=0,u=n.length;c<u;++c)l=xE(r,e,n[c],t,this.boundHandleStyleImageChange_,s,o,a)||l;else l=xE(r,e,n,t,this.boundHandleStyleImageChange_,s,o,a);return l}}class v0 extends aF{constructor(e){super(e)}createRenderer(){return new f4(this)}}let p4=!1;function m4(i,e,t,n,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof i=="function"?i(t,n,r):i,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=p4,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();try{let u;c=="text"||c=="json"?u=a.responseText:c=="xml"?u=a.responseXML||a.responseText:c=="arraybuffer"&&(u=a.response),u?s(e.readFeatures(u,{extent:t,featureProjection:r}),e.readProjection(u)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function EE(i,e){return function(t,n,r,s,o){m4(i,e,t,n,r,(a,l)=>{this.addFeatures(a),s!==void 0&&s(a)},()=>{this.changed(),o!==void 0&&o()})}}function g4(i,e){return[[-1/0,-1/0,1/0,1/0]]}const CE=fn();class ln{constructor(e,t,n,r,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=s,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Ow(this.flatCoordinates_):Iw(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=bs(this.getExtent());this.flatInteriorPoints_=qw(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=CU(this.flatCoordinates_,this.ends_),t=NV(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=wU(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=g0(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const n=this.ends_;for(let r=0,s=n.length;r<s;++r){const o=n[r],a=g0(e,t,o,2,.5);Ka(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=xi(e);const t=e.getExtent(),n=e.getWorldExtent();if(t&&n){const r=li(n)/li(t);Mr(CE,n[0],n[3],r,-r,0,0,0),hs(this.flatCoordinates_,0,this.flatCoordinates_.length,2,CE,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new ln(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=uL((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const n=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":n.length=df(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),r=[n.length];break;case"MultiLineString":r=[],n.length=yU(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,r);break;case"Polygon":r=[],n.length=NL(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,r);break}return r&&(this.simplifiedGeometry_=new ln(this.type_,n,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}ln.prototype.getFlatCoordinates=ln.prototype.getOrientedFlatCoordinates;class TE{constructor(e){this.rbush_=new UL(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[Se(t)]=n}load(e,t){const n=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const o=e[r],a=t[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[r]=l,this.items_[Se(a)]=l}this.rbush_.load(n)}remove(e){const t=Se(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[Se(t)],r=[n.minX,n.minY,n.maxX,n.maxY];Dc(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let r=0,s=e.length;r<s;r++)if(n=t(e[r]),n)return n;return n}isEmpty(){return Za(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return _s(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class _F extends En{constructor(e){super(),this.projection=xi(e.projection),this.attributions_=RE(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,r){t.viewResolver=n,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=RE(e),this.changed()}setState(e){this.state_=e,this.changed()}}function RE(i){return i?typeof i=="function"?i:(Array.isArray(i)||(i=[i]),e=>i):null}const Yi={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class Kr extends Xn{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class y0 extends _F{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Ic,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(We(this.format_,"`format` must be set when `url` is set"),this.loader_=EE(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:g4;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new TE:null,this.loadedExtentsRtree_=new TE,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,r;Array.isArray(e.features)?r=e.features:e.features&&(n=e.features,r=n.getArray()),!t&&n===void 0&&(n=new un(r)),r!==void 0&&this.addFeaturesInternal(r),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Se(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const r=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Kr(Yi.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof ln||(this.featureChangeKeys_[e]=[Me(t,fe.CHANGE,this.handleFeatureChange_,this),Me(t,Xa.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof ln){const s=this.idIndex_[r];s instanceof ln?Array.isArray(s)?s.push(t):this.idIndex_[r]=[s,t]:n=!1}else n=!1}return n&&(We(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=Se(a);this.addToIndex_(l,a)&&n.push(a)}for(let s=0,o=n.length;s<o;s++){const a=n[s],l=Se(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();t.push(u),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(Yi.ADDFEATURE))for(let s=0,o=n.length;s<o;s++)this.dispatchEvent(new Kr(Yi.ADDFEATURE,n[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Yi.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(Yi.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(jt.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(jt.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(st);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(n=>{this.removeFeatureInternal(n)});for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Kr(Yi.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(r){const s=r.getGeometry();if(s instanceof ln||s.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){const r=n.getGeometry();if(r instanceof ln||r.intersectsExtent(e)){const s=t(n);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Za(this.nullGeometryFeatures_)||Ka(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=_L(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||vo,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){const u=c.getGeometry(),h=a;if(a=u instanceof ln?0:u.closestPointXY(n,r,o,a),a<h){s=c;const d=Math.sqrt(a);l[0]=n-d,l[1]=r-d,l[2]=n+d,l[3]=r+d}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=Se(t),r=t.getGeometry();if(!r)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const o=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const s=t.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new Kr(Yi.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Se(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Za(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,n);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(u){return xa(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Kr(Yi.FEATURESLOADSTART)),this.loader_.call(this,l,t,n,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new Kr(Yi.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Kr(Yi.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,n=t.forEachInExtent(e,function(r){if(Dc(r.extent,e))return r});n&&t.remove(n)}removeFeatures(e){let t=!1;for(let n=0,r=e.length;n<r;++n)t=this.removeFeatureInternal(e[n])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Se(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(st),delete this.featureChangeKeys_[t];const r=e.getId();if(r!==void 0){const s=r.toString(),o=this.idIndex_[s];o===e?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[t],this.hasListener(Yi.REMOVEFEATURE)&&this.dispatchEvent(new Kr(Yi.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){We(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(EE(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const v4={SELECT:"select"};class y4 extends Xn{constructor(e,t,n,r){super(e),this.selected=t,this.deselected=n,this.mapBrowserEvent=r}}const xh={};let _4=class bF extends xl{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:KU,this.addCondition_=e.addCondition?e.addCondition:tE,this.removeCondition_=e.removeCondition?e.removeCondition:tE,this.toggleCondition_=e.toggleCondition?e.toggleCondition:Qw,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:vo,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:b4(),this.features_=e.features||new un;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const n=e.layers;t=function(r){return n.includes(r)}}else t=vo;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[Se(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[Se(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(jt.ADD,this.boundAddFeature_),this.features_.addEventListener(jt.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(jt.ADD,this.boundAddFeature_),this.features_.removeEventListener(jt.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const n=this.getMap().getAllLayers().find(function(r){if(r instanceof v0&&r.getSource()&&r.getSource().hasFeature(t))return r});n&&this.addFeatureLayerAssociation_(t,n)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=Se(e);t in xh||(xh[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let r=t.length-1;r>=0;--r){const s=t[r];if(s!==this&&s instanceof bF&&s.getStyle()&&s.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(s.getStyle());return}}const n=Se(e);e.setStyle(xh[n]),delete xh[n]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[Se(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),n=this.removeCondition_(e),r=this.toggleCondition_(e),s=!t&&!n&&!r,o=e.map,a=this.getFeatures(),l=[],c=[];if(s){bl(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,(u,h)=>{if(!(!(u instanceof Nr)||!this.filter_(u,h)))return this.addFeatureLayerAssociation_(u,h),c.push(u),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=a.getLength()-1;u>=0;--u){const h=a.item(u),d=c.indexOf(h);d>-1?c.splice(d,1):(a.remove(h),l.push(h))}c.length!==0&&a.extend(c)}else{o.forEachFeatureAtPixel(e.pixel,(u,h)=>{if(!(!(u instanceof Nr)||!this.filter_(u,h)))return(t||r)&&!a.getArray().includes(u)?(this.addFeatureLayerAssociation_(u,h),c.push(u)):(n||r)&&a.getArray().includes(u)&&(l.push(u),this.removeFeatureLayerAssociation_(u)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=l.length-1;u>=0;--u)a.remove(l[u]);a.extend(c)}return(c.length>0||l.length>0)&&this.dispatchEvent(new y4(v4.SELECT,c,l,e)),!0}};function b4(){const i=hV();return Ka(i.Polygon,i.LineString),Ka(i.GeometryCollection,i.LineString),function(e){return e.getGeometry()?i[e.getGeometry().getType()]:null}}class ax extends ef{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(fe.CHANGE)}release(){this.setState(oe.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==oe.EMPTY){if(this.state!==oe.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Ne()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const r=t-n+1e3/60;return r>=this.transition_?1:SL(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function _0(i){return i instanceof Image||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageBitmap?i:null}const w4=new Error("disposed"),x4=[256,256];class OE extends ax{constructor(e){const t=oe.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=_0(this.data_);return e?[e.width,e.height]:x4}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==oe.IDLE&&this.state!==oe.ERROR)return;this.state=oe.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=oe.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=oe.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(w4),this.controller_=null),super.disposeInternal()}}class wF extends ax{constructor(e,t,n,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=n,this.key=n,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=oe.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=oe.ERROR,this.unlistenImage_(),this.image_=S4(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=oe.LOADED:this.state=oe.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==oe.ERROR&&(this.state=oe.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==oe.IDLE&&(this.state=oe.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Q5(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function S4(){const i=Nt(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}let qp;const Wa=[];function IE(i,e,t,n,r){i.beginPath(),i.moveTo(0,0),i.lineTo(e,t),i.lineTo(n,r),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,n)+1,Math.max(t,r)),i.restore()}function Gp(i,e){return Math.abs(i[e*4]-210)>2||Math.abs(i[e*4+3]-.75*255)>2}function E4(){if(qp===void 0){const i=Nt(6,6,Wa);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",IE(i,4,5,4,0),IE(i,4,5,0,5);const e=i.getImageData(0,0,3,3).data;qp=Gp(e,0)||Gp(e,4)||Gp(e,8),pf(i),Wa.push(i.canvas)}return qp}function DE(i,e,t,n){const r=$w(t,e,i);let s=W1(e,n,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=i.getMetersPerUnit();a!==void 0&&(s/=a);const l=i.getExtent();if(!l||Qa(l,r)){const c=W1(i,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function C4(i,e,t,n){const r=bs(t);let s=DE(i,e,r,n);return(!isFinite(s)||s<=0)&&gL(t,function(o){return s=DE(i,e,o,n),isFinite(s)&&s>0}),s}function T4(i,e,t,n,r,s,o,a,l,c,u,h,d,f){const p=Nt(Math.round(t*i),Math.round(t*e),Wa);if(h||(p.imageSmoothingEnabled=!1),l.length===0)return p.canvas;p.scale(t,t);function m(x){return Math.round(x*t)/t}p.globalCompositeOperation="lighter";const g=Li();l.forEach(function(x,C,E){_3(g,x.extent)});let v;const y=t/n,w=(h?1:1+Math.pow(2,-24))/y;v=Nt(Math.round(He(g)*y),Math.round(li(g)*y),Wa),h||(v.imageSmoothingEnabled=!1),l.forEach(function(x,C,E){if(x.image.width>0&&x.image.height>0){if(x.clipExtent){v.save();const M=(x.clipExtent[0]-g[0])*y,N=-(x.clipExtent[3]-g[3])*y,F=He(x.clipExtent)*y,q=li(x.clipExtent)*y;v.rect(h?M:Math.round(M),h?N:Math.round(N),h?F:Math.round(M+F)-Math.round(M),h?q:Math.round(N+q)-Math.round(N)),v.clip()}const S=(x.extent[0]-g[0])*y,R=-(x.extent[3]-g[3])*y,I=He(x.extent)*y,k=li(x.extent)*y;v.drawImage(x.image,c,c,x.image.width-2*c,x.image.height-2*c,h?S:Math.round(S),h?R:Math.round(R),h?I:Math.round(S+I)-Math.round(S),h?k:Math.round(R+k)-Math.round(R)),x.clipExtent&&v.restore()}});const b=Mo(o);return a.getTriangles().forEach(function(x,C,E){const S=x.source,R=x.target;let I=S[0][0],k=S[0][1],M=S[1][0],N=S[1][1],F=S[2][0],q=S[2][1];const A=m((R[0][0]-b[0])/s),z=m(-(R[0][1]-b[1])/s),P=m((R[1][0]-b[0])/s),G=m(-(R[1][1]-b[1])/s),U=m((R[2][0]-b[0])/s),K=m(-(R[2][1]-b[1])/s),D=I,L=k;I=0,k=0,M-=D,N-=L,F-=D,q-=L;const $=[[M,N,0,0,P-A],[F,q,0,0,U-A],[0,0,M,N,G-z],[0,0,F,q,K-z]],j=v3($);if(!j)return;if(p.save(),p.beginPath(),E4()||!h){p.moveTo(P,G);const W=4,Z=A-P,J=z-G;for(let ae=0;ae<W;ae++)p.lineTo(P+m((ae+1)*Z/W),G+m(ae*J/(W-1))),ae!=W-1&&p.lineTo(P+m((ae+1)*Z/W),G+m((ae+1)*J/(W-1)));p.lineTo(U,K)}else p.moveTo(P,G),p.lineTo(A,z),p.lineTo(U,K);p.clip(),p.transform(j[0],j[2],j[1],j[3],A,z),p.translate(g[0]-D,g[3]-L);let B;if(v)B=v.canvas,p.scale(w,-w);else{const W=l[0],Z=W.extent;B=W.image,p.scale(He(Z)/B.width,-li(Z)/B.height)}p.drawImage(B,0,0),p.restore()}),v&&(pf(v),Wa.push(v.canvas)),u&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,a.getTriangles().forEach(function(x,C,E){const S=x.target,R=(S[0][0]-b[0])/s,I=-(S[0][1]-b[1])/s,k=(S[1][0]-b[0])/s,M=-(S[1][1]-b[1])/s,N=(S[2][0]-b[0])/s,F=-(S[2][1]-b[1])/s;p.beginPath(),p.moveTo(k,M),p.lineTo(R,I),p.lineTo(N,F),p.closePath(),p.stroke()}),p.restore()),p.canvas}const R4=10,PE=.25;class O4{constructor(e,t,n,r,s,o,a){this.sourceProj_=e,this.targetProj_=t;let l={};const c=a?eU(w=>$t(a,$w(w,this.targetProj_,this.sourceProj_))):ad(this.targetProj_,this.sourceProj_);this.transformInv_=function(w){const b=w[0]+"/"+w[1];return l[b]||(l[b]=c(w)),l[b]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&He(r)>=He(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?He(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?He(this.targetProj_.getExtent()):null;const u=Mo(n),h=af(n),d=of(n),f=sf(n),p=this.transformInv_(u),m=this.transformInv_(h),g=this.transformInv_(d),v=this.transformInv_(f),y=R4+(o?Math.max(0,Math.ceil(Math.log2(r0(n)/(o*o*256*256)))):0);if(this.addQuad_(u,h,d,f,p,m,g,v,y),this.wrapsXInSource_){let w=1/0;this.triangles_.forEach(function(b,x,C){w=Math.min(w,b.source[0][0],b.source[1][0],b.source[2][0])}),this.triangles_.forEach(b=>{if(Math.max(b.source[0][0],b.source[1][0],b.source[2][0])-w>this.sourceWorldWidth_/2){const x=[[b.source[0][0],b.source[0][1]],[b.source[1][0],b.source[1][1]],[b.source[2][0],b.source[2][1]]];x[0][0]-w>this.sourceWorldWidth_/2&&(x[0][0]-=this.sourceWorldWidth_),x[1][0]-w>this.sourceWorldWidth_/2&&(x[1][0]-=this.sourceWorldWidth_),x[2][0]-w>this.sourceWorldWidth_/2&&(x[2][0]-=this.sourceWorldWidth_);const C=Math.min(x[0][0],x[1][0],x[2][0]);Math.max(x[0][0],x[1][0],x[2][0])-C<this.sourceWorldWidth_/2&&(b.source=x)}})}l={}}addTriangle_(e,t,n,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,n]})}addQuad_(e,t,n,r,s,o,a,l,c){const u=P1([s,o,a,l]),h=this.sourceWorldWidth_?He(u)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&h>.5&&h<1;let p=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const g=P1([e,t,n,r]);p=He(g)/this.targetWorldWidth_>PE||p}!f&&this.sourceProj_.isGlobal()&&h&&(p=h>PE||p)}if(!p&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!yi(u,this.maxSourceExtent_))return;let m=0;if(!p&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)p=!0;else if(m=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(c>0){if(!p){const g=[(e[0]+n[0])/2,(e[1]+n[1])/2],v=this.transformInv_(g);let y;f?y=(La(s[0],d)+La(a[0],d))/2-La(v[0],d):y=(s[0]+a[0])/2-v[0];const w=(s[1]+a[1])/2-v[1];p=y*y+w*w>this.errorThresholdSquared_}if(p){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const g=[(t[0]+n[0])/2,(t[1]+n[1])/2],v=this.transformInv_(g),y=[(r[0]+e[0])/2,(r[1]+e[1])/2],w=this.transformInv_(y);this.addQuad_(e,t,g,y,s,o,v,w,c-1),this.addQuad_(y,g,n,r,w,v,a,l,c-1)}else{const g=[(e[0]+t[0])/2,(e[1]+t[1])/2],v=this.transformInv_(g),y=[(n[0]+r[0])/2,(n[1]+r[1])/2],w=this.transformInv_(y);this.addQuad_(e,g,y,r,s,v,w,l,c-1),this.addQuad_(g,t,n,y,v,o,a,w,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(m&11)==0&&this.addTriangle_(e,n,r,s,a,l),(m&14)==0&&this.addTriangle_(e,n,t,s,a,o),m&&((m&13)==0&&this.addTriangle_(t,r,e,o,l,s),(m&7)==0&&this.addTriangle_(t,r,n,o,l,a))}calculateSourceExtent(){const e=Li();return this.triangles_.forEach(function(t,n,r){const s=t.source;mc(e,s[0]),mc(e,s[1]),mc(e,s[2])}),e}getTriangles(){return this.triangles_}}const I4=.5;class xF extends ax{constructor(e,t,n,r,s,o,a,l,c,u,h,d){super(s,oe.IDLE,d),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const f=r.getTileCoordExtent(this.wrappedTileCoord_),p=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const g=p?ro(f,p):f;if(r0(g)===0){this.state=oe.EMPTY;return}const v=e.getExtent();v&&(m?m=ro(m,v):m=v);const y=r.getResolution(this.wrappedTileCoord_[0]),w=C4(e,n,g,y);if(!isFinite(w)||w<=0){this.state=oe.EMPTY;return}const b=u!==void 0?u:I4;if(this.triangulation_=new O4(e,n,g,m,w*b,y),this.triangulation_.getTriangles().length===0){this.state=oe.EMPTY;return}this.sourceZ_=t.getZForResolution(w);let x=this.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(x[1]=pt(x[1],m[1],m[3]),x[3]=pt(x[3],m[1],m[3])):x=ro(x,m)),!r0(x))this.state=oe.EMPTY;else{let C=0,E=0;e.canWrapX()&&(C=He(v),E=Math.floor((x[0]-v[0])/C)),_L(x.slice(),e,!0).forEach(R=>{const I=t.getTileRangeForExtentAndZ(R,this.sourceZ_);for(let k=I.minX;k<=I.maxX;k++)for(let M=I.minY;M<=I.maxY;M++){const N=c(this.sourceZ_,k,M,a);if(N){const F=E*C;this.sourceTiles_.push({tile:N,offset:F})}}++E}),this.sourceTiles_.length===0&&(this.state=oe.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const n=t.tile;if(n&&n.getState()==oe.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);r[0]+=t.offset,r[2]+=t.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=t.offset,s[2]+=t.offset),e.push({extent:r,clipExtent:s,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=oe.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),r=typeof n=="number"?n:n[0],s=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=T4(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=oe.LOADED}this.changed()}load(){if(this.state==oe.IDLE){this.state=oe.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n==oe.IDLE||n==oe.LOADING){e++;const r=Me(t,fe.CHANGE,s=>{const o=t.getState();(o==oe.LOADED||o==oe.ERROR||o==oe.EMPTY)&&(st(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},n,r){t.getState()==oe.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(st),this.sourcesListenerKeys_=null}release(){this.canvas_&&(pf(this.canvas_.getContext("2d")),Wa.push(this.canvas_),this.canvas_=null),super.release()}}class lx{constructor(e,t,n,r){this.minX=e,this.maxX=t,this.minY=n,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function na(i,e,t,n,r){return r!==void 0?(r.minX=i,r.maxX=e,r.minY=t,r.maxY=n,r):new lx(i,e,t,n)}class D4{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Jd&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return We(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return We(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){We(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}function md(i,e,t,n){return n!==void 0?(n[0]=i,n[1]=e,n[2]=t,n):[i,e,t]}function P4(i,e,t){return i+"/"+e+"/"+t}function k4(i){return M4(i[0],i[1],i[2])}function M4(i,e,t){return(e<<i)+t}function A4(i,e){const t=i[0],n=i[1],r=i[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(n,r):!0}function Yp(i,e,t,n,r){return`${Se(i)},${e},${P4(t,n,r)}`}function Bp(i,e,t){if(!(t in i))return i[t]=new Set([e]),!0;const n=i[t],r=n.has(e);return r||n.add(e),!r}function N4(i,e,t){const n=i[t];return n?n.delete(e):!1}function kE(i,e){const t=i.layerStatesArray[i.layerIndex];t.extent&&(e=ro(e,os(t.extent,i.viewState.projection)));const n=t.layer.getRenderSource();if(!n.getWrapX()){const r=n.getTileGridForProjection(i.viewState.projection).getExtent();r&&(e=ro(e,r))}return e}class L4 extends yF{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Li(),this.tempTileRange_=new lx(0,0,0,0),this.tempTileCoord_=md(0,0,0);const n=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new D4(n),this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,n,r){const s=this.tileCache_,a=this.getLayer().getSource(),l=Yp(a,a.getKey(),e,t,n);let c;if(s.containsKey(l))c=s.get(l);else{if(c=a.getTile(e,t,n,r.pixelRatio,r.viewState.projection),!c)return null;s.set(l,c)}return c}getTile(e,t,n,r){const s=this.getOrCreateTile(e,t,n,r);return s||null}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),r=$t(t.pixelToCoordinateTransform,e.slice()),s=n.getExtent();if(s&&!Qa(s,r))return null;const o=t.viewState,a=n.getRenderSource(),l=a.getTileGridForProjection(o.projection),c=a.getTilePixelRatio(t.pixelRatio);for(let u=l.getZForResolution(o.resolution);u>=l.getMinZoom();--u){const h=l.getTileCoordForCoordAndZ(r,u),d=this.getTile(u,h[1],h[2],t);if(!d||d.getState()!==oe.LOADED)continue;const f=l.getOrigin(u),p=bi(l.getTileSize(u)),m=l.getResolution(u);let g;if(d instanceof wF||d instanceof xF)g=d.getImage();else if(d instanceof OE){if(g=_0(d.getData()),!g)continue}else continue;const v=Math.floor(c*((r[0]-f[0])/m-h[1]*p[0])),y=Math.floor(c*((f[1]-r[1])/m-h[2]*p[1])),w=Math.round(c*a.getGutterForProjection(o.projection));return this.getImageData(g,v+w,y+w)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const n=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==n&&(this.renderedSourceRevision_=n,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=n,!0}enqueueTiles(e,t,n,r,s){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(o.projection),u=Se(l);u in e.wantedTiles||(e.wantedTiles[u]={});const h=e.wantedTiles[u],d=a.getMapInternal(),f=Math.max(n-s,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),d?d.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),p=o.rotation,m=p?vL(o.center,o.resolution,p,e.size):void 0;for(let g=n;g>=f;--g){const v=c.getTileRangeForExtentAndZ(t,g,this.tempTileRange_),y=c.getResolution(g);for(let w=v.minX;w<=v.maxX;++w)for(let b=v.minY;b<=v.maxY;++b){if(p&&!c.tileCoordIntersectsViewport([g,w,b],m))continue;const x=this.getTile(g,w,b,e);if(!x||!Bp(r,x,g))continue;const E=x.getKey();if(h[E]=!0,x.getState()===oe.IDLE&&!e.tileQueue.isKeyQueued(E)){const S=md(g,w,b,this.tempTileCoord_);e.tileQueue.enqueue([x,u,c.getTileCoordCenter(S),y])}}}}findStaleTile_(e,t){const n=this.tileCache_,r=e[0],s=e[1],o=e[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const c=Yp(this.getLayer().getSource(),a[l],r,s,o);if(n.containsKey(c)){const u=n.peek(c);if(u.getState()===oe.LOADED)return u.endTransition(Se(this)),Bp(t,u,r),!0}}return!1}findAltTiles_(e,t,n,r){const s=e.getTileRangeForTileCoordAndZ(t,n,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileCache_,l=this.getLayer().getRenderSource(),c=l.getKey();for(let u=s.minX;u<=s.maxX;++u)for(let h=s.minY;h<=s.maxY;++h){const d=Yp(l,c,n,u,h);let f=!1;if(a.containsKey(d)){const p=a.peek(d);p.getState()===oe.LOADED&&(Bp(r,p,n),f=!0)}f||(o=!1)}return o}renderFrame(e,t){this.renderComplete=!0;const n=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,l=e.pixelRatio,c=this.getLayer(),u=c.getSource(),h=u.getTileGridForProjection(s),d=h.getZForResolution(o,u.zDirection),f=h.getResolution(d),p=u.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==p&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=p):this.renderedSourceKey_=p;let m=e.extent;const g=u.getTilePixelRatio(l);this.prepareContainer(e,t);const v=this.context.canvas.width,y=this.context.canvas.height,w=n.extent&&os(n.extent);w&&(m=ro(m,os(n.extent)));const b=f*v/2/g,x=f*y/2/g,C=[a[0]-b,a[1]-x,a[0]+b,a[1]+x],E={};this.renderedTiles.length=0;const S=c.getPreload();if(e.nextExtent){const P=h.getZForResolution(r.nextResolution,u.zDirection),G=kE(e,e.nextExtent);this.enqueueTiles(e,G,P,E,S)}const R=kE(e,m);if(this.enqueueTiles(e,R,d,E,0),S>0&&setTimeout(()=>{this.enqueueTiles(e,R,d-1,E,S-1)},0),!(d in E))return this.container;const I=Se(this),k=e.time;for(const P of E[d]){const G=P.getState();if(G===oe.EMPTY)continue;const U=P.tileCoord;if(G===oe.LOADED&&P.getAlpha(I,k)===1){P.endTransition(I);continue}if(G!==oe.ERROR&&(this.renderComplete=!1),this.findStaleTile_(U,E)){N4(E,P,d),e.animate=!0;continue}if(this.findAltTiles_(h,U,d+1,E))continue;const L=h.getMinZoom();for(let $=d-1;$>=L&&!this.findAltTiles_(h,U,$,E);--$);}const M=f/o*l/g,N=this.getRenderContext(e);Mr(this.tempTransform,v/2,y/2,M,M,0,-v/2,-y/2),n.extent&&this.clipUnrotated(N,e,w),u.getInterpolate()||(N.imageSmoothingEnabled=!1),this.preRender(N,e);const F=Object.keys(E).map(Number);F.sort(br);let q;const A=[],z=[];for(let P=F.length-1;P>=0;--P){const G=F[P],U=u.getTilePixelSize(G,l,s),D=h.getResolution(G)/f,L=U[0]*D*M,$=U[1]*D*M,j=h.getTileCoordForCoordAndZ(Mo(C),G),B=h.getTileCoordExtent(j),W=$t(this.tempTransform,[g*(B[0]-C[0])/f,g*(C[3]-B[3])/f]),Z=g*u.getGutterForProjection(s);for(const J of E[G]){if(J.getState()!==oe.LOADED)continue;const ae=J.tileCoord,et=j[1]-ae[1],it=Math.round(W[0]-(et-1)*L),he=j[2]-ae[2],rt=Math.round(W[1]-(he-1)*$),gt=Math.round(W[0]-et*L),Tt=Math.round(W[1]-he*$),vt=it-gt,Ge=rt-Tt,zi=F.length===1;let ri=!1;q=[gt,Tt,gt+vt,Tt,gt+vt,Tt+Ge,gt,Tt+Ge];for(let Yt=0,Kt=A.length;Yt<Kt;++Yt)if(!zi&&G<z[Yt]){const Ve=A[Yt];yi([gt,Tt,gt+vt,Tt+Ge],[Ve[0],Ve[3],Ve[4],Ve[7]])&&(ri||(N.save(),ri=!0),N.beginPath(),N.moveTo(q[0],q[1]),N.lineTo(q[2],q[3]),N.lineTo(q[4],q[5]),N.lineTo(q[6],q[7]),N.moveTo(Ve[6],Ve[7]),N.lineTo(Ve[4],Ve[5]),N.lineTo(Ve[2],Ve[3]),N.lineTo(Ve[0],Ve[1]),N.clip())}A.push(q),z.push(G),this.drawTile(J,e,gt,Tt,vt,Ge,Z,zi),ri&&N.restore(),this.renderedTiles.unshift(J),this.updateUsedTiles(e.usedTiles,u,J)}}if(this.renderedResolution=f,this.extentChanged=!this.renderedExtent_||!Dc(this.renderedExtent_,C),this.renderedExtent_=C,this.renderedPixelRatio=l,this.postRender(this.context,e),n.extent&&N.restore(),N.imageSmoothingEnabled=!0,this.renderComplete){const P=(G,U)=>{const K=Se(u),D=U.wantedTiles[K],L=D?Object.keys(D).length:0;this.updateCacheSize(L),this.tileCache_.expireCache()};e.postRenderFunctions.push(P)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,n,r,s,o,a,l){let c;if(e instanceof OE){if(c=_0(e.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(e);if(!c)return;const u=this.getRenderContext(t),h=Se(this),d=t.layerStatesArray[t.layerIndex],f=d.opacity*(l?e.getAlpha(h,t.time):1),p=f!==u.globalAlpha;p&&(u.save(),u.globalAlpha=f),u.drawImage(c,a,a,c.width-2*a,c.height-2*a,n,r,s,o),p&&u.restore(),f!==d.opacity?t.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,n){const r=Se(t);r in e||(e[r]={}),e[r][n.getKey()]=!0}}const Sh={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class F4 extends mf{constructor(e){e=e||{};const t=Object.assign({},e),n=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Sh.PRELOAD)}setPreload(e){this.set(Sh.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Sh.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Sh.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class $4 extends F4{constructor(e){super(e)}createRenderer(){return new L4(this,{cacheSize:this.getCacheSize()})}}const ra=[0,0,0],Zr=5;class SF{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,We(s3(this.resolutions_,(r,s)=>s-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,We(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Mo(n)),We(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,We(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Vw,We(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,s)=>{const o=new lx(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)n([t,s,a])}forEachTileCoordParentTileRange(e,t,n,r){let s,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);c>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=na(o,o,a,a,n)):s=this.getTileRangeForExtentAndZ(l,c,n),t(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return na(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return na(s,o,s,o,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-r),c=Math.floor(s*l),u=Math.floor(o*l);if(t<r)return na(c,c,u,u,n);const h=Math.floor(l*(s+1))-1,d=Math.floor(l*(o+1))-1;return na(c,h,u,d,n)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,ra);const r=ra[1],s=ra[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,ra);const o=ra[1],a=ra[2];return na(r,o,s,a,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),r=bi(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*n,t[1]-(e[2]+.5)*r[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=bi(this.getTileSize(e[0]),this.tmpSize_),o=n[0]+e[1]*s[0]*r,a=n[1]-(e[2]+1)*s[1]*r,l=o+s[0]*r,c=a+s[1]*r;return _s(o,a,l,c,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,r,s){const o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),c=bi(this.getTileSize(o),this.tmpSize_);let u=a*(e-l[0])/n/c[0],h=a*(l[1]-t)/n/c[1];return r?(u=fh(u,Zr)-1,h=fh(h,Zr)-1):(u=dh(u,Zr),h=dh(h,Zr)),md(o,u,h,s)}getTileCoordForXYAndZ_(e,t,n,r,s){const o=this.getOrigin(n),a=this.getResolution(n),l=bi(this.getTileSize(n),this.tmpSize_);let c=(e-o[0])/a/l[0],u=(o[1]-t)/a/l[1];return r?(c=fh(c,Zr)-1,u=fh(u,Zr)-1):(c=dh(c,Zr),u=dh(u,Zr)),md(n,c,u,s)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=Ew(this.resolutions_,e,t||0);return pt(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return $L(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let r=this.minZoom;r<t;++r)n[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=n}}function EF(i){let e=i.getDefaultTileGrid();return e||(e=q4(i),i.setDefaultTileGrid(e)),e}function j4(i,e,t){const n=e[0],r=i.getTileCoordCenter(e),s=cx(t);if(!Qa(s,r)){const o=He(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,i.getTileCoordForCoordAndZ(r,n)}return e}function W4(i,e,t,n){n=n!==void 0?n:"top-left";const r=CF(i,e,t);return new SF({extent:i,origin:w3(i,n),resolutions:r,tileSize:t})}function z4(i){const e=i||{},t=e.extent||xi("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:CF(t,e.maxZoom,e.tileSize,e.maxResolution)};return new SF(n)}function CF(i,e,t,n){e=e!==void 0?e:DU,t=bi(t!==void 0?t:Vw);const r=li(i),s=He(i);n=n>0?n:Math.max(s/t[0],r/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=n/Math.pow(2,l);return a}function q4(i,e,t,n){const r=cx(i);return W4(r,e,t,n)}function cx(i){i=xi(i);let e=i.getExtent();if(!e){const t=180*Pw.degrees/i.getMetersPerUnit();e=_s(-t,-t,t,t)}return e}const G4=/\{z\}/g,Y4=/\{x\}/g,B4=/\{y\}/g,H4=/\{-y\}/g;function U4(i,e,t,n,r){return i.replace(G4,e.toString()).replace(Y4,t.toString()).replace(B4,n.toString()).replace(H4,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-n).toString()})}function V4(i){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(i);if(t){const n=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=n;s<=r;++s)e.push(i.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(i),t){const n=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=n;r++)e.push(i.replace(t[0],r.toString()));return e}return e.push(i),e}function X4(i,e){return(function(t,n,r){if(!t)return;let s;const o=t[0];if(e){const a=e.getFullTileRange(o);a&&(s=a.getHeight()-1)}return U4(i,o,t[1],t[2],s)})}function K4(i,e){const t=i.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=X4(i[r],e);return Z4(n)}function Z4(i){return i.length===1?i[0]:(function(e,t,n){if(!e)return;const r=k4(e),s=La(r,i.length);return i[s](e,t,n)})}class Q4 extends _F{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&bi(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Se(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,r,s){return Ne()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:EF(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const r=this.getTileGridForProjection(n),s=this.getTilePixelRatio(t),o=bi(r.getTileSize(e),this.tmpSize);return s==1?o:R5(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const n=t!==void 0?t:this.getProjection(),r=t!==void 0?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=j4(r,e,n)),A4(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class J4 extends Xn{constructor(e,t){super(e),this.tile=t}}const Hp={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class ux extends Q4{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===ux.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=Se(t),r=t.getState();let s;r==oe.LOADING?(this.tileLoadingKeys_[n]=!0,s=Hp.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],s=r==oe.ERROR?Hp.TILELOADERROR:r==oe.LOADED?Hp.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new J4(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=V4(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(K4(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}}class eX extends ux{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:tX,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:wF,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!xp(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||xp(t,e)))return this.tileGrid;const n=Se(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=EF(e)),this.tileGridForProjection[n]}createTile_(e,t,n,r,s,o){const a=[e,t,n],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,u=new this.tileClass(a,c!==void 0?oe.IDLE:oe.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(fe.CHANGE,this.handleTileChange.bind(this)),u}getTile(e,t,n,r,s){const o=this.getProjection();if(!o||!s||xp(o,s))return this.getTileInternal(e,t,n,r,o||s);const a=[e,t,n],l=this.getKey(),c=this.getTileGridForProjection(o),u=this.getTileGridForProjection(s),h=this.getTileCoordForTileUrlFunction(a,s),d=new xF(o,c,s,u,a,h,this.getTilePixelRatio(r),this.getGutter(),(f,p,m,g)=>this.getTileInternal(f,p,m,g,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return d.key=l,d}getTileInternal(e,t,n,r,s){const o=this.getKey();return this.createTile_(e,t,n,r,s,o)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const n=xi(e);if(n){const r=Se(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}}function tX(i,e){i.getImage().src=e}class iX extends eX{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:z4({extent:cx(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}class nX extends y0{constructor(e){e=e||{},super({attributions:e.attributions,wrapX:e.wrapX}),this.resolution=void 0,this.distance=e.distance!==void 0?e.distance:20,this.minDistance=e.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=e.geometryFunction||function(t){const n=t.getGeometry();return We(!n||n.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),n},this.createCustomCluster_=e.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(e.source||null)}clear(e){this.features.length=0,super.clear(e)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(e,t,n){this.source?.loadFeatures(e,t,n),t!==this.resolution&&(this.resolution=t,this.refresh())}setDistance(e){this.updateDistance(e,this.minDistance)}setMinDistance(e){this.updateDistance(this.distance,e)}getMinDistance(){return this.minDistance}setSource(e){this.source&&this.source.removeEventListener(fe.CHANGE,this.boundRefresh_),this.source=e,e&&e.addEventListener(fe.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(e,t){const n=e===0?0:Math.min(t,e)/e,r=e!==this.distance||this.interpolationRatio!==n;this.distance=e,this.minDistance=t,this.interpolationRatio=n,r&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const e=Li(),t=this.distance*this.resolution,n=this.source.getFeatures(),r={};for(let s=0,o=n.length;s<o;s++){const a=n[s];if(!(Se(a)in r)){const l=this.geometryFunction(a);if(l){const c=l.getCoordinates();Ow(c,e),nf(e,t,e);const u=this.source.getFeaturesInExtent(e).filter(function(h){const d=Se(h);return d in r?!1:(r[d]=!0,!0)});this.features.push(this.createCluster(u,e))}}}}createCluster(e,t){const n=[0,0];for(let a=e.length-1;a>=0;--a){const l=this.geometryFunction(e[a]);l?bL(n,l.getCoordinates()):e.splice(a,1)}wL(n,1/e.length);const r=bs(t),s=this.interpolationRatio,o=new Es([n[0]*(1-s)+r[0]*s,n[1]*(1-s)+r[1]*s]);return this.createCustomCluster_?this.createCustomCluster_(o,e):new Nr({geometry:o,features:e})}}const Qt={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class rX extends En{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+NU,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Qt.ELEMENT,this.handleElementChanged),this.addChangeListener(Qt.MAP,this.handleMapChanged),this.addChangeListener(Qt.OFFSET,this.handleOffsetChanged),this.addChangeListener(Qt.POSITION,this.handlePositionChanged),this.addChangeListener(Qt.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Qt.ELEMENT)}getId(){return this.id}getMap(){return this.get(Qt.MAP)||null}getOffset(){return this.get(Qt.OFFSET)}getPosition(){return this.get(Qt.POSITION)}getPositioning(){return this.get(Qt.POSITIONING)}handleElementChanged(){jL(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),st(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=Me(e,ur.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Qt.ELEMENT,e)}setMap(e){this.set(Qt.MAP,e)}setOffset(e){this.set(Qt.OFFSET,e)}setPosition(e){this.set(Qt.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Qt.POSITION))return;const n=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),s=this.getRect(r,[FU(r),$U(r)]);e=e||{};const o=e.margin===void 0?20:e.margin;if(!xa(n,s)){const a=s[0]-n[0],l=n[2]-s[2],c=s[1]-n[1],u=n[3]-s[3],h=[0,0];if(a<0?h[0]=a-o:l<0&&(h[0]=Math.abs(l)+o),c<0?h[1]=c-o:u<0&&(h[1]=Math.abs(u)+o),h[0]!==0||h[1]!==0){const d=t.getView().getCenterInternal(),f=t.getPixelFromCoordinateInternal(d);if(!f)return;const p=[f[0]+h[0],f[1]+h[1]],m=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(p),duration:m.duration,easing:m.easing})}}}getRect(e,t){const n=e.getBoundingClientRect(),r=n.left+window.pageXOffset,s=n.top+window.pageYOffset;return[r,s,r+t[0],s+t[1]]}setPositioning(e){this.set(Qt.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const n=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(n,r)}updateRenderedPosition(e,t){const n=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=`${e[0]+r[0]}px`,a=`${e[1]+r[1]}px`;let l="0%",c="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?c="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(c="-50%");const u=`translate(${l}, ${c}) translate(${o}, ${a})`;this.rendered.transform_!=u&&(this.rendered.transform_=u,n.transform=u)}getOptions(){return this.options}}const ME=i=>{let e;const t=new Set,n=(c,u)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const d=e;e=u??(typeof h!="object"||h===null)?h:Object.assign({},e,h),t.forEach(f=>f(e,d))}},r=()=>e,a={setState:n,getState:r,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=i(n,r,a);return a},sX=(i=>i?ME(i):ME),oX=i=>i;function aX(i,e=oX){const t=Q.useSyncExternalStore(i.subscribe,Q.useCallback(()=>e(i.getState()),[i,e]),Q.useCallback(()=>e(i.getInitialState()),[i,e]));return Q.useDebugValue(t),t}const wu=new Xt({image:new Ar({radius:8,fill:new Zi({color:"hsl(97 22% 40%)"}),stroke:new Gn({color:"silver",width:2})})}),TF=wu.clone();TF.getImage()?.setOpacity(.3);const RF=new Xt({image:new Ar({radius:10,fill:new Zi({color:"hsl(95 25% 45%)"}),stroke:new Gn({color:"silver",width:2})})}),lX=i=>{const e=i.get("features").length;return e===1?i.get("features")[0].getStyle():[new Xt({image:new Ar({radius:10,fill:new Zi({color:"hsl(97 22% 40% / 0.7)"})})}),new Xt({image:new Ar({radius:14,fill:new Zi({color:"hsl(100 20% 35% / 0.7)"})}),text:new yf({text:e.toString(),fill:new Zi({color:"#fff"})})})]},cX=new Xt({stroke:new Gn({color:"hsl(100 20% 35%)",width:2})}),uX=(i,e,t)=>new Xt({geometry:new Es([i,e]),image:new yu({src:'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12"><polygon points="0,0 12,7 0,12" stroke="silver" fill="hsl(100 20% 35%)"/></svg>',anchor:[.75,.5],rotateWithView:!0,rotation:t})});function hX(i,e){const t=[cX],r=i.getGeometry().getCoordinates();for(let s=1;s<r.length;s++){const[o,a]=r[s-1],[l,c]=r[s],u=l-o,h=c-a,d=Math.atan2(h,u);t.push(uX(l,c,-d))}return t}async function dX(){return[new $4({source:new iX({url:"https://basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attributions:'&copy; <a href="https://carto.com/">CARTO</a>'})})]}const fX=()=>sX(i=>({selectedEntities:[],setSelectedEntities:e=>i({selectedEntities:e})}));function pX(){const i=new y0,e=new nX({distance:10,minDistance:5,source:i}),t=new v0({source:e,style:lX}),n=new y0,r=new v0({source:n}),s=fX(),o=new PV({target:void 0,layers:[t,r],view:new kn({center:$a([35,31]),zoom:7.5}),controls:[]});dX().then(l=>{l.reverse().forEach(c=>o.getLayers().insertAt(0,c))});const{select:a}=mX(o,s,i,{excludeLayers:[r]});return{map:o,select:a,entities:i,entitiesCluster:e,histories:n,store:s}}function mX(i,e,t,{excludeLayers:n}){const r=new _4({toggleCondition:ZU,style:RF,filter:(a,l)=>!n?.includes(l)});i.addInteraction(r);const s=r.getFeatures(),o=new YL({condition:Qw});return o.on("boxend",()=>{const a=o.getGeometry().getExtent();t.forEachFeatureIntersectingExtent(a,l=>{l.getId()&&s.push(l)})}),i.addInteraction(o),s.on("change:length",a=>{const l=s.getArray(),c=l.flatMap(u=>u.get("features")??[]).concat(l.filter(u=>u.getId()));e.getState().setSelectedEntities(c.map(u=>u?.getId()))}),{select:r,dragBox:o}}function gX(i){const e=new Nr({geometry:new Es($a([34.8+Math.random()*.1,31.2+Math.random()*.1]))});i.addFeature(e),e.setStyle(wu),e.setId(`entity-${Math.floor(Math.random()*1e4)}`)}function vX(i,e){const t=e.map(n=>{const r=new Nr({geometry:new Es($a([n.location[0],n.location[1]]))});return r.setId(`${n.type}-${n.id}`),r.setStyle(wu),r});i.addFeatures(t)}function yX(i,e,t){const n=e.getFeatures();i.getFeatures().clear(),t.forEach(r=>{const s=n.find(o=>o.getId()===r);s&&i.getFeatures().push(s)})}function OF(i,e,t){const n=e.getFeatureById(t)?.getGeometry();n&&i?.getView().fit(n,{duration:1e3,maxZoom:14})}function _X(i,e){i.clear();const t=[];Object.entries(e).forEach(([n,r])=>{r.sort((a,l)=>a.time.localeCompare(l.time));const s=.5,o=(1-s)/(r.length-1);r.forEach((a,l)=>{const c=s+l*o,u=new Nr({geometry:new Es($a([a.coords[0],a.coords[1]]))});u.setId(`${n}-${a.time}`);const h=wu.clone();h.getImage()?.setOpacity(c),u.setStyle(h),t.push(u)});for(let a=0;a<r.length-1;a++){const l=r[a],c=r[a+1],u=new Nr({geometry:new fd([$a([l.coords[0],l.coords[1]]),$a([c.coords[0],c.coords[1]])])});u.setId(`${n}-${l.time}-${c.time}`),u.setStyle(hX),t.push(u)}}),i.addFeatures(t)}function AE(i){i.clear()}function bX(i,e){const t=i.getFeatures();e?t.forEach(n=>{const r=n.getId()!==e;n.setStyle(r?TF:RF)}):t.forEach(n=>{n.setStyle(wu)})}var NE=1,wX=.9,xX=.8,SX=.17,Up=.1,Vp=.999,EX=.9999,CX=.99,TX=/[\\\/_+.#"@\[\(\{&]/,RX=/[\\\/_+.#"@\[\(\{&]/g,OX=/[\s-]/,IF=/[\s-]/g;function b0(i,e,t,n,r,s,o){if(s===e.length)return r===i.length?NE:CX;var a=`${r},${s}`;if(o[a]!==void 0)return o[a];for(var l=n.charAt(s),c=t.indexOf(l,r),u=0,h,d,f,p;c>=0;)h=b0(i,e,t,n,c+1,s+1,o),h>u&&(c===r?h*=NE:TX.test(i.charAt(c-1))?(h*=xX,f=i.slice(r,c-1).match(RX),f&&r>0&&(h*=Math.pow(Vp,f.length))):OX.test(i.charAt(c-1))?(h*=wX,p=i.slice(r,c-1).match(IF),p&&r>0&&(h*=Math.pow(Vp,p.length))):(h*=SX,r>0&&(h*=Math.pow(Vp,c-r))),i.charAt(c)!==e.charAt(s)&&(h*=EX)),(h<Up&&t.charAt(c-1)===n.charAt(s+1)||n.charAt(s+1)===n.charAt(s)&&t.charAt(c-1)!==n.charAt(s))&&(d=b0(i,e,t,n,c+1,s+2,o),d*Up>h&&(h=d*Up)),h>u&&(u=h),c=t.indexOf(l,c+1);return o[a]=u,u}function LE(i){return i.toLowerCase().replace(IF," ")}function IX(i,e,t){return i=t&&t.length>0?`${i+" "+t.join(" ")}`:i,b0(i,e,LE(i),LE(e),0,0,{})}var Hl='[cmdk-group=""]',Xp='[cmdk-group-items=""]',DX='[cmdk-group-heading=""]',DF='[cmdk-item=""]',FE=`${DF}:not([aria-disabled="true"])`,w0="cmdk-item-select",ya="data-value",PX=(i,e,t)=>IX(i,e,t),PF=_.createContext(void 0),xu=()=>_.useContext(PF),kF=_.createContext(void 0),hx=()=>_.useContext(kF),MF=_.createContext(void 0),AF=_.forwardRef((i,e)=>{let t=_a(()=>{var D,L;return{search:"",value:(L=(D=i.value)!=null?D:i.defaultValue)!=null?L:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=_a(()=>new Set),r=_a(()=>new Map),s=_a(()=>new Map),o=_a(()=>new Set),a=NF(i),{label:l,children:c,value:u,onValueChange:h,filter:d,shouldFilter:f,loop:p,disablePointerSelection:m=!1,vimBindings:g=!0,...v}=i,y=Ai(),w=Ai(),b=Ai(),x=_.useRef(null),C=qX();bo(()=>{if(u!==void 0){let D=u.trim();t.current.value=D,E.emit()}},[u]),bo(()=>{C(6,N)},[]);let E=_.useMemo(()=>({subscribe:D=>(o.current.add(D),()=>o.current.delete(D)),snapshot:()=>t.current,setState:(D,L,$)=>{var j,B,W,Z;if(!Object.is(t.current[D],L)){if(t.current[D]=L,D==="search")M(),I(),C(1,k);else if(D==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let J=document.getElementById(b);J?J.focus():(j=document.getElementById(y))==null||j.focus()}if(C(7,()=>{var J;t.current.selectedItemId=(J=F())==null?void 0:J.id,E.emit()}),$||C(5,N),((B=a.current)==null?void 0:B.value)!==void 0){let J=L??"";(Z=(W=a.current).onValueChange)==null||Z.call(W,J);return}}E.emit()}},emit:()=>{o.current.forEach(D=>D())}}),[]),S=_.useMemo(()=>({value:(D,L,$)=>{var j;L!==((j=s.current.get(D))==null?void 0:j.value)&&(s.current.set(D,{value:L,keywords:$}),t.current.filtered.items.set(D,R(L,$)),C(2,()=>{I(),E.emit()}))},item:(D,L)=>(n.current.add(D),L&&(r.current.has(L)?r.current.get(L).add(D):r.current.set(L,new Set([D]))),C(3,()=>{M(),I(),t.current.value||k(),E.emit()}),()=>{s.current.delete(D),n.current.delete(D),t.current.filtered.items.delete(D);let $=F();C(4,()=>{M(),$?.getAttribute("id")===D&&k(),E.emit()})}),group:D=>(r.current.has(D)||r.current.set(D,new Set),()=>{s.current.delete(D),r.current.delete(D)}),filter:()=>a.current.shouldFilter,label:l||i["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:y,inputId:b,labelId:w,listInnerRef:x}),[]);function R(D,L){var $,j;let B=(j=($=a.current)==null?void 0:$.filter)!=null?j:PX;return D?B(D,t.current.search,L):0}function I(){if(!t.current.search||a.current.shouldFilter===!1)return;let D=t.current.filtered.items,L=[];t.current.filtered.groups.forEach(j=>{let B=r.current.get(j),W=0;B.forEach(Z=>{let J=D.get(Z);W=Math.max(J,W)}),L.push([j,W])});let $=x.current;q().sort((j,B)=>{var W,Z;let J=j.getAttribute("id"),ae=B.getAttribute("id");return((W=D.get(ae))!=null?W:0)-((Z=D.get(J))!=null?Z:0)}).forEach(j=>{let B=j.closest(Xp);B?B.appendChild(j.parentElement===B?j:j.closest(`${Xp} > *`)):$.appendChild(j.parentElement===$?j:j.closest(`${Xp} > *`))}),L.sort((j,B)=>B[1]-j[1]).forEach(j=>{var B;let W=(B=x.current)==null?void 0:B.querySelector(`${Hl}[${ya}="${encodeURIComponent(j[0])}"]`);W?.parentElement.appendChild(W)})}function k(){let D=q().find($=>$.getAttribute("aria-disabled")!=="true"),L=D?.getAttribute(ya);E.setState("value",L||void 0)}function M(){var D,L,$,j;if(!t.current.search||a.current.shouldFilter===!1){t.current.filtered.count=n.current.size;return}t.current.filtered.groups=new Set;let B=0;for(let W of n.current){let Z=(L=(D=s.current.get(W))==null?void 0:D.value)!=null?L:"",J=(j=($=s.current.get(W))==null?void 0:$.keywords)!=null?j:[],ae=R(Z,J);t.current.filtered.items.set(W,ae),ae>0&&B++}for(let[W,Z]of r.current)for(let J of Z)if(t.current.filtered.items.get(J)>0){t.current.filtered.groups.add(W);break}t.current.filtered.count=B}function N(){var D,L,$;let j=F();j&&(((D=j.parentElement)==null?void 0:D.firstChild)===j&&(($=(L=j.closest(Hl))==null?void 0:L.querySelector(DX))==null||$.scrollIntoView({block:"nearest"})),j.scrollIntoView({block:"nearest"}))}function F(){var D;return(D=x.current)==null?void 0:D.querySelector(`${DF}[aria-selected="true"]`)}function q(){var D;return Array.from(((D=x.current)==null?void 0:D.querySelectorAll(FE))||[])}function A(D){let L=q()[D];L&&E.setState("value",L.getAttribute(ya))}function z(D){var L;let $=F(),j=q(),B=j.findIndex(Z=>Z===$),W=j[B+D];(L=a.current)!=null&&L.loop&&(W=B+D<0?j[j.length-1]:B+D===j.length?j[0]:j[B+D]),W&&E.setState("value",W.getAttribute(ya))}function P(D){let L=F(),$=L?.closest(Hl),j;for(;$&&!j;)$=D>0?WX($,Hl):zX($,Hl),j=$?.querySelector(FE);j?E.setState("value",j.getAttribute(ya)):z(D)}let G=()=>A(q().length-1),U=D=>{D.preventDefault(),D.metaKey?G():D.altKey?P(1):z(1)},K=D=>{D.preventDefault(),D.metaKey?A(0):D.altKey?P(-1):z(-1)};return _.createElement(ze.div,{ref:e,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:D=>{var L;(L=v.onKeyDown)==null||L.call(v,D);let $=D.nativeEvent.isComposing||D.keyCode===229;if(!(D.defaultPrevented||$))switch(D.key){case"n":case"j":{g&&D.ctrlKey&&U(D);break}case"ArrowDown":{U(D);break}case"p":case"k":{g&&D.ctrlKey&&K(D);break}case"ArrowUp":{K(D);break}case"Home":{D.preventDefault(),A(0);break}case"End":{D.preventDefault(),G();break}case"Enter":{D.preventDefault();let j=F();if(j){let B=new Event(w0);j.dispatchEvent(B)}}}}},_.createElement("label",{"cmdk-label":"",htmlFor:S.inputId,id:S.labelId,style:YX},l),wf(i,D=>_.createElement(kF.Provider,{value:E},_.createElement(PF.Provider,{value:S},D))))}),kX=_.forwardRef((i,e)=>{var t,n;let r=Ai(),s=_.useRef(null),o=_.useContext(MF),a=xu(),l=NF(i),c=(n=(t=l.current)==null?void 0:t.forceMount)!=null?n:o?.forceMount;bo(()=>{if(!c)return a.item(r,o?.id)},[c]);let u=LF(r,s,[i.value,i.children,s],i.keywords),h=hx(),d=ws(C=>C.value&&C.value===u.current),f=ws(C=>c||a.filter()===!1?!0:C.search?C.filtered.items.get(r)>0:!0);_.useEffect(()=>{let C=s.current;if(!(!C||i.disabled))return C.addEventListener(w0,p),()=>C.removeEventListener(w0,p)},[f,i.onSelect,i.disabled]);function p(){var C,E;m(),(E=(C=l.current).onSelect)==null||E.call(C,u.current)}function m(){h.setState("value",u.current,!0)}if(!f)return null;let{disabled:g,value:v,onSelect:y,forceMount:w,keywords:b,...x}=i;return _.createElement(ze.div,{ref:fo(s,e),...x,id:r,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!d,"data-disabled":!!g,"data-selected":!!d,onPointerMove:g||a.getDisablePointerSelection()?void 0:m,onClick:g?void 0:p},i.children)}),MX=_.forwardRef((i,e)=>{let{heading:t,children:n,forceMount:r,...s}=i,o=Ai(),a=_.useRef(null),l=_.useRef(null),c=Ai(),u=xu(),h=ws(f=>r||u.filter()===!1?!0:f.search?f.filtered.groups.has(o):!0);bo(()=>u.group(o),[]),LF(o,a,[i.value,i.heading,l]);let d=_.useMemo(()=>({id:o,forceMount:r}),[r]);return _.createElement(ze.div,{ref:fo(a,e),...s,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},t&&_.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},t),wf(i,f=>_.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?c:void 0},_.createElement(MF.Provider,{value:d},f))))}),AX=_.forwardRef((i,e)=>{let{alwaysRender:t,...n}=i,r=_.useRef(null),s=ws(o=>!o.search);return!t&&!s?null:_.createElement(ze.div,{ref:fo(r,e),...n,"cmdk-separator":"",role:"separator"})}),NX=_.forwardRef((i,e)=>{let{onValueChange:t,...n}=i,r=i.value!=null,s=hx(),o=ws(c=>c.search),a=ws(c=>c.selectedItemId),l=xu();return _.useEffect(()=>{i.value!=null&&s.setState("search",i.value)},[i.value]),_.createElement(ze.input,{ref:e,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":a,id:l.inputId,type:"text",value:r?i.value:o,onChange:c=>{r||s.setState("search",c.target.value),t?.(c.target.value)}})}),LX=_.forwardRef((i,e)=>{let{children:t,label:n="Suggestions",...r}=i,s=_.useRef(null),o=_.useRef(null),a=ws(c=>c.selectedItemId),l=xu();return _.useEffect(()=>{if(o.current&&s.current){let c=o.current,u=s.current,h,d=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let f=c.offsetHeight;u.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return d.observe(c),()=>{cancelAnimationFrame(h),d.unobserve(c)}}},[]),_.createElement(ze.div,{ref:fo(s,e),...r,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":a,"aria-label":n,id:l.listId},wf(i,c=>_.createElement("div",{ref:fo(o,l.listInnerRef),"cmdk-list-sizer":""},c)))}),FX=_.forwardRef((i,e)=>{let{open:t,onOpenChange:n,overlayClassName:r,contentClassName:s,container:o,...a}=i;return _.createElement(pN,{open:t,onOpenChange:n},_.createElement(fw,{container:o},_.createElement(uu,{"cmdk-overlay":"",className:r}),_.createElement(hu,{"aria-label":i.label,"cmdk-dialog":"",className:s},_.createElement(AF,{ref:e,...a}))))}),$X=_.forwardRef((i,e)=>ws(t=>t.filtered.count===0)?_.createElement(ze.div,{ref:e,...i,"cmdk-empty":"",role:"presentation"}):null),jX=_.forwardRef((i,e)=>{let{progress:t,children:n,label:r="Loading...",...s}=i;return _.createElement(ze.div,{ref:e,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":r},wf(i,o=>_.createElement("div",{"aria-hidden":!0},o)))}),Ci=Object.assign(AF,{List:LX,Item:kX,Input:NX,Group:MX,Separator:AX,Dialog:FX,Empty:$X,Loading:jX});function WX(i,e){let t=i.nextElementSibling;for(;t;){if(t.matches(e))return t;t=t.nextElementSibling}}function zX(i,e){let t=i.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}}function NF(i){let e=_.useRef(i);return bo(()=>{e.current=i}),e}var bo=typeof window>"u"?_.useEffect:_.useLayoutEffect;function _a(i){let e=_.useRef();return e.current===void 0&&(e.current=i()),e}function ws(i){let e=hx(),t=()=>i(e.snapshot());return _.useSyncExternalStore(e.subscribe,t,t)}function LF(i,e,t,n=[]){let r=_.useRef(),s=xu();return bo(()=>{var o;let a=(()=>{var c;for(let u of t){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():r.current}})(),l=n.map(c=>c.trim());s.value(i,a,l),(o=e.current)==null||o.setAttribute(ya,a),r.current=a}),r}var qX=()=>{let[i,e]=_.useState(),t=_a(()=>new Map);return bo(()=>{t.current.forEach(n=>n()),t.current=new Map},[i]),(n,r)=>{t.current.set(n,r),e({})}};function GX(i){let e=i.type;return typeof e=="function"?e(i.props):"render"in e?e.render(i.props):i}function wf({asChild:i,children:e},t){return i&&_.isValidElement(e)?_.cloneElement(GX(e),{ref:e.ref},t(e.props.children)):t(e)}var YX={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const BX=fw,FF=_.forwardRef(({className:i,...e},t)=>T.jsx(uu,{ref:t,className:V("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",i),...e}));FF.displayName=uu.displayName;const HX=_.forwardRef(({className:i,children:e,...t},n)=>T.jsxs(BX,{children:[T.jsx(FF,{}),T.jsxs(hu,{ref:n,className:V("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",i),...t,children:[e,T.jsxs(mN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[T.jsx(wA,{className:"h-4 w-4"}),T.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));HX.displayName=hu.displayName;const UX=_.forwardRef(({className:i,...e},t)=>T.jsx(Gd,{ref:t,className:V("text-lg font-semibold leading-none tracking-tight",i),...e}));UX.displayName=Gd.displayName;const VX=_.forwardRef(({className:i,...e},t)=>T.jsx(Yd,{ref:t,className:V("text-sm text-muted-foreground",i),...e}));VX.displayName=Yd.displayName;const $F=_.forwardRef(({className:i,...e},t)=>T.jsx(Ci,{ref:t,className:V("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",i),...e}));$F.displayName=Ci.displayName;const jF=_.forwardRef(({className:i,...e},t)=>T.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[T.jsx(Ci.Input,{ref:t,className:V("flex h-9 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",i),...e}),T.jsx(bA,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"})]}));jF.displayName=Ci.Input.displayName;const WF=_.forwardRef(({className:i,...e},t)=>T.jsx(Ci.List,{ref:t,className:V("max-h-[300px] overflow-y-auto overflow-x-hidden",i),...e}));WF.displayName=Ci.List.displayName;const zF=_.forwardRef((i,e)=>T.jsx(Ci.Empty,{ref:e,className:"py-6 text-center text-sm",...i}));zF.displayName=Ci.Empty.displayName;const qF=_.forwardRef(({className:i,...e},t)=>T.jsx(Ci.Group,{ref:t,className:V("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",i),...e}));qF.displayName=Ci.Group.displayName;const XX=_.forwardRef(({className:i,...e},t)=>T.jsx(Ci.Separator,{ref:t,className:V("-mx-1 h-px bg-border",i),...e}));XX.displayName=Ci.Separator.displayName;const GF=_.forwardRef(({className:i,...e},t)=>T.jsx(Ci.Item,{ref:t,className:V("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",i),...e}));GF.displayName=Ci.Item.displayName;const YF={queryKey:["entities"],queryFn:async()=>[{type:"truck",id:"1",name:"Entity 1",location:[34.8,31.2]},{type:"truck",id:"2",name:"Entity 2",location:[34.9,31.3]},{type:"truck",id:"3",name:"Entity 3",location:[35.01,31.4]},{type:"truck",id:"4",name:"Entity 4",location:[34.85,31.25]},{type:"truck",id:"5",name:"Entity 5",location:[34.95,31.32]},{type:"truck",id:"6",name:"Entity 6",location:[34.84,31.28]},{type:"truck",id:"7",name:"Fast Truck",location:[34.8,31.28],history:[{coords:[34.7818,31.0853],time:"2025-10-20T10:00:00Z"},{coords:[34.7418,31.153],time:"2025-10-20T12:00:00Z"},{coords:[34.7618,31.28],time:"2025-10-20T15:00:00Z"},{coords:[34.8,31.28],time:"2025-10-20T18:00:00Z"}]}]},KX=async(i,e,t)=>(await i.fetchQuery(YF)).find(n=>n.id===t&&n.type===e)?.history,ZX=(i,e)=>({queryKey:["events",i,e],queryFn:async()=>({locations:[{coords:[34.7818,31.0853],time:"2024-01-01T10:00:00Z"},{coords:[34.7418,31.153],time:"2024-01-01T12:00:00Z"},{coords:[34.7618,31.28],time:"2024-01-01T15:00:00Z"},{coords:[34.8,31.28],time:"2024-01-01T18:00:00Z"}],events:[{type:"speeding",start:"2024-01-01T13:00:00Z",end:"2024-01-01T14:01:03Z"},{type:"harsh_braking",start:"2024-01-01T16:00:00Z",end:"2024-01-01T20:05:00Z"}]})}),QX={queryKey:["events"],queryFn:async()=>[{id:"event-1",entityIds:["truck-1"],type:"speeding",timestamp:"2024-01-01T00:00:00Z"},{id:"event-2",entityIds:["truck-2"],type:"harsh_braking",timestamp:"2024-01-01T11:00:00Z"},{id:"event-3",entityIds:["truck-1"],type:"geofence_exit",timestamp:"2024-01-01T12:00:00Z"},{id:"event-4",entityIds:["truck-3"],type:"speeding",timestamp:"2024-01-01T19:00:00Z"},{id:"event-5",entityIds:["truck-2"],type:"harsh_acceleration",timestamp:"2024-01-01T14:00:00Z",timestampEnd:"2024-01-01T14:20:00Z"},{id:"event-6",entityIds:["truck-4"],type:"speeding",timestamp:"2024-01-01T16:00:00Z"},{id:"event-7",entityIds:["truck-5"],type:"harsh_braking",timestamp:"2024-01-01T17:00:00Z"},{id:"event-8",entityIds:["truck-6"],type:"geofence_exit",timestamp:"2024-01-01T18:00:00Z"},{id:"event-9",entityIds:["truck-4"],type:"speeding",timestamp:"2024-01-01T20:00:00Z"},{id:"event-10",entityIds:["truck-5"],type:"harsh_acceleration",timestamp:"2024-01-01T21:00:00Z",timestampEnd:"2024-01-01T21:20:00Z"},{id:"event-12",entityIds:["truck-7"],type:"speeding",timestamp:"2024-01-01T23:00:00Z"},{id:"event-13",entityIds:["truck-7"],type:"speeding",timestamp:"2024-01-01T12:00:00Z"},{id:"event-14",entityIds:["truck-7"],type:"speeding",timestamp:"2024-01-01T11:30:00Z"},{id:"event-15",entityIds:["truck-7"],type:"speeding",timestamp:"2024-01-01T12:15:00Z"},{id:"event-16",entityIds:["truck-7"],type:"speeding",timestamp:"2024-01-01T13:00:00Z"}]},JX=i=>({queryKey:["groupSearch",i],queryFn:async()=>({:[{value:"1",label:" 1"},{value:"2",label:" 2"},{value:"3",label:" 3"}]})});function eK({inputClassName:i}){const[e,t]=_.useState(!1),[n,r]=_.useState(""),[s,o]=_.useState(),{data:a}=jd({...JX(n),staleTime:1/0,gcTime:1e4,placeholderData:Iz,refetchOnWindowFocus:!1});return T.jsx("div",{className:"relative",children:T.jsxs($F,{shouldFilter:!0,className:"rounded-md border bg-background shadow-sm",children:[T.jsx(jF,{className:i,value:e?n:s?.label,onValueChange:r,placeholder:" ...",onFocus:()=>{s&&r(""),t(!0)},onBlur:()=>setTimeout(()=>t(!1),100)}),e&&T.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 rounded-md border bg-popover shadow-lg",children:T.jsxs(WF,{children:[T.jsx(zF,{children:"  "}),Object.entries(a??[])?.map(([l,c])=>T.jsx(qF,{heading:l,children:c.map(u=>T.jsx(GF,{onSelect:()=>{console.log("what"),t(!1),o(u)},children:u.label},u.value))},l))]})})]})})}function tK(i,e,t="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:i,timeZoneName:t}).format(e).split(/\s/g).slice(2).join(" ")}const iK={},lc={};function Js(i,e){try{const n=(iK[i]||=new Intl.DateTimeFormat("en-US",{timeZone:i,timeZoneName:"longOffset"}).format)(e).split("GMT")[1];return n in lc?lc[n]:$E(n,n.split(":"))}catch{if(i in lc)return lc[i];const t=i?.match(nK);return t?$E(i,t.slice(1)):NaN}}const nK=/([+-]\d\d):?(\d\d)?/;function $E(i,e){const t=+(e[0]||0),n=+(e[1]||0),r=+(e[2]||0)/60;return lc[i]=t*60+n>0?t*60+n+r:t*60-n-r}class Fn extends Date{constructor(...e){super(),e.length>1&&typeof e[e.length-1]=="string"&&(this.timeZone=e.pop()),this.internal=new Date,isNaN(Js(this.timeZone,this))?this.setTime(NaN):e.length?typeof e[0]=="number"&&(e.length===1||e.length===2&&typeof e[1]!="number")?this.setTime(e[0]):typeof e[0]=="string"?this.setTime(+new Date(e[0])):e[0]instanceof Date?this.setTime(+e[0]):(this.setTime(+new Date(...e)),BF(this),x0(this)):this.setTime(Date.now())}static tz(e,...t){return t.length?new Fn(...t,e):new Fn(Date.now(),e)}withTimeZone(e){return new Fn(+this,e)}getTimezoneOffset(){const e=-Js(this.timeZone,this);return e>0?Math.floor(e):Math.ceil(e)}setTime(e){return Date.prototype.setTime.apply(this,arguments),x0(this),+this}[Symbol.for("constructDateFrom")](e){return new Fn(+new Date(e),this.timeZone)}}const jE=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(i=>{if(!jE.test(i))return;const e=i.replace(jE,"$1UTC");Fn.prototype[e]&&(i.startsWith("get")?Fn.prototype[i]=function(){return this.internal[e]()}:(Fn.prototype[i]=function(){return Date.prototype[e].apply(this.internal,arguments),rK(this),+this},Fn.prototype[e]=function(){return Date.prototype[e].apply(this,arguments),x0(this),+this}))});function x0(i){i.internal.setTime(+i),i.internal.setUTCSeconds(i.internal.getUTCSeconds()-Math.round(-Js(i.timeZone,i)*60))}function rK(i){Date.prototype.setFullYear.call(i,i.internal.getUTCFullYear(),i.internal.getUTCMonth(),i.internal.getUTCDate()),Date.prototype.setHours.call(i,i.internal.getUTCHours(),i.internal.getUTCMinutes(),i.internal.getUTCSeconds(),i.internal.getUTCMilliseconds()),BF(i)}function BF(i){const e=Js(i.timeZone,i),t=e>0?Math.floor(e):Math.ceil(e),n=new Date(+i);n.setUTCHours(n.getUTCHours()-1);const r=-new Date(+i).getTimezoneOffset(),s=-new Date(+n).getTimezoneOffset(),o=r-s,a=Date.prototype.getHours.apply(i)!==i.internal.getUTCHours();o&&a&&i.internal.setUTCMinutes(i.internal.getUTCMinutes()+o);const l=r-t;l&&Date.prototype.setUTCMinutes.call(i,Date.prototype.getUTCMinutes.call(i)+l);const c=new Date(+i);c.setUTCSeconds(0);const u=r>0?c.getSeconds():(c.getSeconds()-60)%60,h=Math.round(-(Js(i.timeZone,i)*60))%60;(h||u)&&(i.internal.setUTCSeconds(i.internal.getUTCSeconds()+h),Date.prototype.setUTCSeconds.call(i,Date.prototype.getUTCSeconds.call(i)+h+u));const d=Js(i.timeZone,i),f=d>0?Math.floor(d):Math.ceil(d),m=-new Date(+i).getTimezoneOffset()-f,g=f!==t,v=m-l;if(g&&v){Date.prototype.setUTCMinutes.call(i,Date.prototype.getUTCMinutes.call(i)+v);const y=Js(i.timeZone,i),w=y>0?Math.floor(y):Math.ceil(y),b=f-w;b&&(i.internal.setUTCMinutes(i.internal.getUTCMinutes()+b),Date.prototype.setUTCMinutes.call(i,Date.prototype.getUTCMinutes.call(i)+b))}}class ei extends Fn{static tz(e,...t){return t.length?new ei(...t,e):new ei(Date.now(),e)}toISOString(){const[e,t,n]=this.tzComponents(),r=`${e}${t}:${n}`;return this.internal.toISOString().slice(0,-1)+r}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[e,t,n,r]=this.internal.toUTCString().split(" ");return`${e?.slice(0,-1)} ${n} ${t} ${r}`}toTimeString(){const e=this.internal.toUTCString().split(" ")[4],[t,n,r]=this.tzComponents();return`${e} GMT${t}${n}${r} (${tK(this.timeZone,this)})`}toLocaleString(e,t){return Date.prototype.toLocaleString.call(this,e,{...t,timeZone:t?.timeZone||this.timeZone})}toLocaleDateString(e,t){return Date.prototype.toLocaleDateString.call(this,e,{...t,timeZone:t?.timeZone||this.timeZone})}toLocaleTimeString(e,t){return Date.prototype.toLocaleTimeString.call(this,e,{...t,timeZone:t?.timeZone||this.timeZone})}tzComponents(){const e=this.getTimezoneOffset(),t=e>0?"-":"+",n=String(Math.floor(Math.abs(e)/60)).padStart(2,"0"),r=String(Math.abs(e)%60).padStart(2,"0");return[t,n,r]}withTimeZone(e){return new ei(+this,e)}[Symbol.for("constructDateFrom")](e){return new ei(+new Date(e),this.timeZone)}}const HF=6048e5,sK=864e5,oK=6e4,aK=36e5,WE=Symbol.for("constructDateFrom");function Ct(i,e){return typeof i=="function"?i(e):i&&typeof i=="object"&&WE in i?i[WE](e):i instanceof Date?new i.constructor(e):new Date(e)}function Ie(i,e){return Ct(e||i,i)}function dx(i,e,t){const n=Ie(i,t?.in);return isNaN(e)?Ct(i,NaN):(e&&n.setDate(n.getDate()+e),n)}function fx(i,e,t){const n=Ie(i,t?.in);if(isNaN(e))return Ct(i,NaN);if(!e)return n;const r=n.getDate(),s=Ct(i,n.getTime());s.setMonth(n.getMonth()+e+1,0);const o=s.getDate();return r>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}function Ul(i,e,t){const{years:n=0,months:r=0,weeks:s=0,days:o=0,hours:a=0,minutes:l=0,seconds:c=0}=e,u=Ie(i,t?.in),h=r||n?fx(u,r+n*12):u,d=o||s?dx(h,o+s*7):h,f=l+a*60,m=(c+f*60)*1e3;return Ct(i,+d+m)}let lK={};function Su(){return lK}function nl(i,e){const t=Su(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,r=Ie(i,e?.in),s=r.getDay(),o=(s<n?7:0)+s-n;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function Wc(i,e){return nl(i,{...e,weekStartsOn:1})}function UF(i,e){const t=Ie(i,e?.in),n=t.getFullYear(),r=Ct(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Wc(r),o=Ct(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const a=Wc(o);return t.getTime()>=s.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function zE(i){const e=Ie(i),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+i-+t}function Cn(i,...e){const t=Ct.bind(null,e.find(n=>typeof n=="object"));return e.map(t)}function zc(i,e){const t=Ie(i,e?.in);return t.setHours(0,0,0,0),t}function px(i,e,t){const[n,r]=Cn(t?.in,i,e),s=zc(n),o=zc(r),a=+s-zE(s),l=+o-zE(o);return Math.round((a-l)/sK)}function cK(i,e){const t=UF(i,e),n=Ct(i,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Wc(n)}function uK(i,e,t){return dx(i,e*7,t)}function hK(i,e,t){return fx(i,e*12,t)}function dK(i,e){let t,n=e?.in;return i.forEach(r=>{!n&&typeof r=="object"&&(n=Ct.bind(null,r));const s=Ie(r,n);(!t||t<s||isNaN(+s))&&(t=s)}),Ct(n,t||NaN)}function fK(i,e){let t,n=e?.in;return i.forEach(r=>{!n&&typeof r=="object"&&(n=Ct.bind(null,r));const s=Ie(r,n);(!t||t>s||isNaN(+s))&&(t=s)}),Ct(n,t||NaN)}function vc(i,e){const t=+Ie(i)-+Ie(e);return t<0?-1:t>0?1:t}function pK(i,e,t){const[n,r]=Cn(t?.in,i,e);return+zc(n)==+zc(r)}function VF(i){return i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]"}function mK(i){return!(!VF(i)&&typeof i!="number"||isNaN(+Ie(i)))}function XF(i,e,t){const[n,r]=Cn(t?.in,i,e),s=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return s*12+o}function gK(i,e,t){const[n,r]=Cn(t?.in,i,e);return n.getFullYear()-r.getFullYear()}function vK(i,e,t){const[n,r]=Cn(t?.in,i,e),s=qE(n,r),o=Math.abs(px(n,r));n.setDate(n.getDate()-s*o);const a=+(qE(n,r)===-s),l=s*(o-a);return l===0?0:l}function qE(i,e){const t=i.getFullYear()-e.getFullYear()||i.getMonth()-e.getMonth()||i.getDate()-e.getDate()||i.getHours()-e.getHours()||i.getMinutes()-e.getMinutes()||i.getSeconds()-e.getSeconds()||i.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function mx(i){return e=>{const n=(i?Math[i]:Math.trunc)(e);return n===0?0:n}}function yK(i,e,t){const[n,r]=Cn(t?.in,i,e),s=(+n-+r)/aK;return mx(t?.roundingMethod)(s)}function KF(i,e){return+Ie(i)-+Ie(e)}function _K(i,e,t){const n=KF(i,e)/oK;return mx(t?.roundingMethod)(n)}function bK(i,e){const t=Ie(i,e?.in);return t.setHours(23,59,59,999),t}function ZF(i,e){const t=Ie(i,e?.in),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function wK(i,e){const t=Ie(i,e?.in);return+bK(t,e)==+ZF(t,e)}function xK(i,e,t){const[n,r,s]=Cn(t?.in,i,i,e),o=vc(r,s),a=Math.abs(XF(r,s));if(a<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*a);let l=vc(r,s)===-o;wK(n)&&a===1&&vc(n,s)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function SK(i,e,t){const n=KF(i,e)/1e3;return mx(t?.roundingMethod)(n)}function EK(i,e,t){const[n,r]=Cn(t?.in,i,e),s=vc(n,r),o=Math.abs(gK(n,r));n.setFullYear(1584),r.setFullYear(1584);const a=vc(n,r)===-s,l=s*(o-+a);return l===0?0:l}function gx(i,e){const[t,n]=Cn(i,e.start,e.end);return{start:t,end:n}}function CK(i,e){const{start:t,end:n}=gx(e?.in,i);let r=+t>+n;const s=r?+t:+n,o=r?n:t;o.setHours(0,0,0,0),o.setDate(1);let a=1;const l=[];for(;+o<=s;)l.push(Ct(t,o)),o.setMonth(o.getMonth()+a);return r?l.reverse():l}function TK(i,e){const t=Ie(i,e?.in);return t.setDate(1),t.setHours(0,0,0,0),t}function RK(i,e){const t=Ie(i,e?.in),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function QF(i,e){const t=Ie(i,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function OK(i,e){const{start:t,end:n}=gx(e?.in,i);let r=+t>+n;const s=r?+t:+n,o=r?n:t;o.setHours(0,0,0,0),o.setMonth(0,1);let a=1;const l=[];for(;+o<=s;)l.push(Ct(t,o)),o.setFullYear(o.getFullYear()+a);return r?l.reverse():l}function JF(i,e){const t=Su(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,r=Ie(i,e?.in),s=r.getDay(),o=(s<n?-7:0)+6-(s-n);return r.setDate(r.getDate()+o),r.setHours(23,59,59,999),r}function IK(i,e){return JF(i,{...e,weekStartsOn:1})}const DK={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},PK=(i,e,t)=>{let n;const r=DK[i];return typeof r=="string"?n=r:e===1?n=r.one:n=r.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function Kp(i){return(e={})=>{const t=e.width?String(e.width):i.defaultWidth;return i.formats[t]||i.formats[i.defaultWidth]}}const kK={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},MK={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},AK={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},NK={date:Kp({formats:kK,defaultWidth:"full"}),time:Kp({formats:MK,defaultWidth:"full"}),dateTime:Kp({formats:AK,defaultWidth:"full"})},LK={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},FK=(i,e,t,n)=>LK[i];function Vl(i){return(e,t)=>{const n=t?.context?String(t.context):"standalone";let r;if(n==="formatting"&&i.formattingValues){const o=i.defaultFormattingWidth||i.defaultWidth,a=t?.width?String(t.width):o;r=i.formattingValues[a]||i.formattingValues[o]}else{const o=i.defaultWidth,a=t?.width?String(t.width):i.defaultWidth;r=i.values[a]||i.values[o]}const s=i.argumentCallback?i.argumentCallback(e):e;return r[s]}}const $K={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},jK={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},WK={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zK={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},GK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},YK=(i,e)=>{const t=Number(i),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},BK={ordinalNumber:YK,era:Vl({values:$K,defaultWidth:"wide"}),quarter:Vl({values:jK,defaultWidth:"wide",argumentCallback:i=>i-1}),month:Vl({values:WK,defaultWidth:"wide"}),day:Vl({values:zK,defaultWidth:"wide"}),dayPeriod:Vl({values:qK,defaultWidth:"wide",formattingValues:GK,defaultFormattingWidth:"wide"})};function Xl(i){return(e,t={})=>{const n=t.width,r=n&&i.matchPatterns[n]||i.matchPatterns[i.defaultMatchWidth],s=e.match(r);if(!s)return null;const o=s[0],a=n&&i.parsePatterns[n]||i.parsePatterns[i.defaultParseWidth],l=Array.isArray(a)?UK(a,h=>h.test(o)):HK(a,h=>h.test(o));let c;c=i.valueCallback?i.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function HK(i,e){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&e(i[t]))return t}function UK(i,e){for(let t=0;t<i.length;t++)if(e(i[t]))return t}function VK(i){return(e,t={})=>{const n=e.match(i.matchPattern);if(!n)return null;const r=n[0],s=e.match(i.parsePattern);if(!s)return null;let o=i.valueCallback?i.valueCallback(s[0]):s[0];o=t.valueCallback?t.valueCallback(o):o;const a=e.slice(r.length);return{value:o,rest:a}}}const XK=/^(\d+)(th|st|nd|rd)?/i,KK=/\d+/i,ZK={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},QK={any:[/^b/i,/^(a|c)/i]},JK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},e6={any:[/1/i,/2/i,/3/i,/4/i]},t6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},i6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},n6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},r6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},s6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},o6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},a6={ordinalNumber:VK({matchPattern:XK,parsePattern:KK,valueCallback:i=>parseInt(i,10)}),era:Xl({matchPatterns:ZK,defaultMatchWidth:"wide",parsePatterns:QK,defaultParseWidth:"any"}),quarter:Xl({matchPatterns:JK,defaultMatchWidth:"wide",parsePatterns:e6,defaultParseWidth:"any",valueCallback:i=>i+1}),month:Xl({matchPatterns:t6,defaultMatchWidth:"wide",parsePatterns:i6,defaultParseWidth:"any"}),day:Xl({matchPatterns:n6,defaultMatchWidth:"wide",parsePatterns:r6,defaultParseWidth:"any"}),dayPeriod:Xl({matchPatterns:s6,defaultMatchWidth:"any",parsePatterns:o6,defaultParseWidth:"any"})},vx={code:"en-US",formatDistance:PK,formatLong:NK,formatRelative:FK,localize:BK,match:a6,options:{weekStartsOn:0,firstWeekContainsDate:1}};function l6(i,e){const t=Ie(i,e?.in);return px(t,QF(t))+1}function e2(i,e){const t=Ie(i,e?.in),n=+Wc(t)-+cK(t);return Math.round(n/HF)+1}function t2(i,e){const t=Ie(i,e?.in),n=t.getFullYear(),r=Su(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=Ct(e?.in||i,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const a=nl(o,e),l=Ct(e?.in||i,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const c=nl(l,e);return+t>=+a?n+1:+t>=+c?n:n-1}function c6(i,e){const t=Su(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,r=t2(i,e),s=Ct(e?.in||i,0);return s.setFullYear(r,0,n),s.setHours(0,0,0,0),nl(s,e)}function i2(i,e){const t=Ie(i,e?.in),n=+nl(t,e)-+c6(t,e);return Math.round(n/HF)+1}function Be(i,e){const t=i<0?"-":"",n=Math.abs(i).toString().padStart(e,"0");return t+n}const Qr={y(i,e){const t=i.getFullYear(),n=t>0?t:1-t;return Be(e==="yy"?n%100:n,e.length)},M(i,e){const t=i.getMonth();return e==="M"?String(t+1):Be(t+1,2)},d(i,e){return Be(i.getDate(),e.length)},a(i,e){const t=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(i,e){return Be(i.getHours()%12||12,e.length)},H(i,e){return Be(i.getHours(),e.length)},m(i,e){return Be(i.getMinutes(),e.length)},s(i,e){return Be(i.getSeconds(),e.length)},S(i,e){const t=e.length,n=i.getMilliseconds(),r=Math.trunc(n*Math.pow(10,t-3));return Be(r,e.length)}},sa={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},GE={G:function(i,e,t){const n=i.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(i,e,t){if(e==="yo"){const n=i.getFullYear(),r=n>0?n:1-n;return t.ordinalNumber(r,{unit:"year"})}return Qr.y(i,e)},Y:function(i,e,t,n){const r=t2(i,n),s=r>0?r:1-r;if(e==="YY"){const o=s%100;return Be(o,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):Be(s,e.length)},R:function(i,e){const t=UF(i);return Be(t,e.length)},u:function(i,e){const t=i.getFullYear();return Be(t,e.length)},Q:function(i,e,t){const n=Math.ceil((i.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Be(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(i,e,t){const n=Math.ceil((i.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Be(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(i,e,t){const n=i.getMonth();switch(e){case"M":case"MM":return Qr.M(i,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(i,e,t){const n=i.getMonth();switch(e){case"L":return String(n+1);case"LL":return Be(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(i,e,t,n){const r=i2(i,n);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):Be(r,e.length)},I:function(i,e,t){const n=e2(i);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):Be(n,e.length)},d:function(i,e,t){return e==="do"?t.ordinalNumber(i.getDate(),{unit:"date"}):Qr.d(i,e)},D:function(i,e,t){const n=l6(i);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):Be(n,e.length)},E:function(i,e,t){const n=i.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(i,e,t,n){const r=i.getDay(),s=(r-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Be(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(i,e,t,n){const r=i.getDay(),s=(r-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Be(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(i,e,t){const n=i.getDay(),r=n===0?7:n;switch(e){case"i":return String(r);case"ii":return Be(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(i,e,t){const r=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(i,e,t){const n=i.getHours();let r;switch(n===12?r=sa.noon:n===0?r=sa.midnight:r=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(i,e,t){const n=i.getHours();let r;switch(n>=17?r=sa.evening:n>=12?r=sa.afternoon:n>=4?r=sa.morning:r=sa.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(i,e,t){if(e==="ho"){let n=i.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return Qr.h(i,e)},H:function(i,e,t){return e==="Ho"?t.ordinalNumber(i.getHours(),{unit:"hour"}):Qr.H(i,e)},K:function(i,e,t){const n=i.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):Be(n,e.length)},k:function(i,e,t){let n=i.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):Be(n,e.length)},m:function(i,e,t){return e==="mo"?t.ordinalNumber(i.getMinutes(),{unit:"minute"}):Qr.m(i,e)},s:function(i,e,t){return e==="so"?t.ordinalNumber(i.getSeconds(),{unit:"second"}):Qr.s(i,e)},S:function(i,e){return Qr.S(i,e)},X:function(i,e,t){const n=i.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return BE(n);case"XXXX":case"XX":return Ys(n);case"XXXXX":case"XXX":default:return Ys(n,":")}},x:function(i,e,t){const n=i.getTimezoneOffset();switch(e){case"x":return BE(n);case"xxxx":case"xx":return Ys(n);case"xxxxx":case"xxx":default:return Ys(n,":")}},O:function(i,e,t){const n=i.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+YE(n,":");case"OOOO":default:return"GMT"+Ys(n,":")}},z:function(i,e,t){const n=i.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+YE(n,":");case"zzzz":default:return"GMT"+Ys(n,":")}},t:function(i,e,t){const n=Math.trunc(+i/1e3);return Be(n,e.length)},T:function(i,e,t){return Be(+i,e.length)}};function YE(i,e=""){const t=i>0?"-":"+",n=Math.abs(i),r=Math.trunc(n/60),s=n%60;return s===0?t+String(r):t+String(r)+e+Be(s,2)}function BE(i,e){return i%60===0?(i>0?"-":"+")+Be(Math.abs(i)/60,2):Ys(i,e)}function Ys(i,e=""){const t=i>0?"-":"+",n=Math.abs(i),r=Be(Math.trunc(n/60),2),s=Be(n%60,2);return t+r+e+s}const HE=(i,e)=>{switch(i){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},n2=(i,e)=>{switch(i){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},u6=(i,e)=>{const t=i.match(/(P+)(p+)?/)||[],n=t[1],r=t[2];if(!r)return HE(i,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",HE(n,e)).replace("{{time}}",n2(r,e))},h6={p:n2,P:u6},d6=/^D+$/,f6=/^Y+$/,p6=["D","DD","YY","YYYY"];function m6(i){return d6.test(i)}function g6(i){return f6.test(i)}function v6(i,e,t){const n=y6(i,e,t);if(console.warn(n),p6.includes(i))throw new RangeError(n)}function y6(i,e,t){const n=i[0]==="Y"?"years":"days of the month";return`Use \`${i.toLowerCase()}\` instead of \`${i}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,b6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,w6=/^'([^]*?)'?$/,x6=/''/g,S6=/[a-zA-Z]/;function E6(i,e,t){const n=Su(),r=t?.locale??n.locale??vx,s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=Ie(i,t?.in);if(!mK(a))throw new RangeError("Invalid time value");let l=e.match(b6).map(u=>{const h=u[0];if(h==="p"||h==="P"){const d=h6[h];return d(u,r.formatLong)}return u}).join("").match(_6).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const h=u[0];if(h==="'")return{isToken:!1,value:C6(u)};if(GE[h])return{isToken:!0,value:u};if(h.match(S6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:u}});r.localize.preprocessor&&(l=r.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:r};return l.map(u=>{if(!u.isToken)return u.value;const h=u.value;(!t?.useAdditionalWeekYearTokens&&g6(h)||!t?.useAdditionalDayOfYearTokens&&m6(h))&&v6(h,e,String(i));const d=GE[h[0]];return d(a,h,r.localize,c)}).join("")}function C6(i){const e=i.match(w6);return e?e[1].replace(x6,"'"):i}function T6(i,e){const t=Ie(i,e?.in),n=t.getFullYear(),r=t.getMonth(),s=Ct(t,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function R6(i,e){return Ie(i,e?.in).getMonth()}function O6(i,e){return Ie(i,e?.in).getFullYear()}function I6(i,e){const{start:t,end:n}=gx(e?.in,i),r={},s=EK(n,t);s&&(r.years=s);const o=Ul(t,{years:r.years}),a=xK(n,o);a&&(r.months=a);const l=Ul(o,{months:r.months}),c=vK(n,l);c&&(r.days=c);const u=Ul(l,{days:r.days}),h=yK(n,u);h&&(r.hours=h);const d=Ul(u,{hours:r.hours}),f=_K(n,d);f&&(r.minutes=f);const p=Ul(d,{minutes:r.minutes}),m=SK(n,p);return m&&(r.seconds=m),r}function D6(i,e){return+Ie(i)>+Ie(e)}function P6(i,e){return+Ie(i)<+Ie(e)}function k6(i,e,t){const[n,r]=Cn(t?.in,i,e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function M6(i,e,t){const[n,r]=Cn(t?.in,i,e);return n.getFullYear()===r.getFullYear()}function A6(i,e,t){const n=Ie(i,t?.in),r=n.getFullYear(),s=n.getDate(),o=Ct(i,0);o.setFullYear(r,e,15),o.setHours(0,0,0,0);const a=T6(o);return n.setMonth(e,Math.min(s,a)),n}function N6(i,e,t){const n=Ie(i,t?.in);return isNaN(+n)?Ct(i,NaN):(n.setFullYear(e),n)}const UE=5,L6=4;function F6(i,e){const t=e.startOfMonth(i),n=t.getDay()>0?t.getDay():7,r=e.addDays(i,-n+1),s=e.addDays(r,UE*7-1);return e.getMonth(i)===e.getMonth(s)?UE:L6}function r2(i,e){const t=e.startOfMonth(i),n=t.getDay();return n===1?t:n===0?e.addDays(t,-6):e.addDays(t,-1*(n-1))}function $6(i,e){const t=r2(i,e),n=F6(i,e);return e.addDays(t,n*7-1)}class Fi{constructor(e,t){this.Date=Date,this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?ei.tz(this.options.timeZone):new this.Date,this.newDate=(n,r,s)=>this.overrides?.newDate?this.overrides.newDate(n,r,s):this.options.timeZone?new ei(n,r,s,this.options.timeZone):new Date(n,r,s),this.addDays=(n,r)=>this.overrides?.addDays?this.overrides.addDays(n,r):dx(n,r),this.addMonths=(n,r)=>this.overrides?.addMonths?this.overrides.addMonths(n,r):fx(n,r),this.addWeeks=(n,r)=>this.overrides?.addWeeks?this.overrides.addWeeks(n,r):uK(n,r),this.addYears=(n,r)=>this.overrides?.addYears?this.overrides.addYears(n,r):hK(n,r),this.differenceInCalendarDays=(n,r)=>this.overrides?.differenceInCalendarDays?this.overrides.differenceInCalendarDays(n,r):px(n,r),this.differenceInCalendarMonths=(n,r)=>this.overrides?.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(n,r):XF(n,r),this.eachMonthOfInterval=n=>this.overrides?.eachMonthOfInterval?this.overrides.eachMonthOfInterval(n):CK(n),this.eachYearOfInterval=n=>{const r=this.overrides?.eachYearOfInterval?this.overrides.eachYearOfInterval(n):OK(n),s=new Set(r.map(a=>this.getYear(a)));if(s.size===r.length)return r;const o=[];return s.forEach(a=>{o.push(new Date(a,0,1))}),o},this.endOfBroadcastWeek=n=>this.overrides?.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(n):$6(n,this),this.endOfISOWeek=n=>this.overrides?.endOfISOWeek?this.overrides.endOfISOWeek(n):IK(n),this.endOfMonth=n=>this.overrides?.endOfMonth?this.overrides.endOfMonth(n):ZF(n),this.endOfWeek=(n,r)=>this.overrides?.endOfWeek?this.overrides.endOfWeek(n,r):JF(n,this.options),this.endOfYear=n=>this.overrides?.endOfYear?this.overrides.endOfYear(n):RK(n),this.format=(n,r,s)=>{const o=this.overrides?.format?this.overrides.format(n,r,this.options):E6(n,r,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(o):o},this.getISOWeek=n=>this.overrides?.getISOWeek?this.overrides.getISOWeek(n):e2(n),this.getMonth=(n,r)=>this.overrides?.getMonth?this.overrides.getMonth(n,this.options):R6(n,this.options),this.getYear=(n,r)=>this.overrides?.getYear?this.overrides.getYear(n,this.options):O6(n,this.options),this.getWeek=(n,r)=>this.overrides?.getWeek?this.overrides.getWeek(n,this.options):i2(n,this.options),this.isAfter=(n,r)=>this.overrides?.isAfter?this.overrides.isAfter(n,r):D6(n,r),this.isBefore=(n,r)=>this.overrides?.isBefore?this.overrides.isBefore(n,r):P6(n,r),this.isDate=n=>this.overrides?.isDate?this.overrides.isDate(n):VF(n),this.isSameDay=(n,r)=>this.overrides?.isSameDay?this.overrides.isSameDay(n,r):pK(n,r),this.isSameMonth=(n,r)=>this.overrides?.isSameMonth?this.overrides.isSameMonth(n,r):k6(n,r),this.isSameYear=(n,r)=>this.overrides?.isSameYear?this.overrides.isSameYear(n,r):M6(n,r),this.max=n=>this.overrides?.max?this.overrides.max(n):dK(n),this.min=n=>this.overrides?.min?this.overrides.min(n):fK(n),this.setMonth=(n,r)=>this.overrides?.setMonth?this.overrides.setMonth(n,r):A6(n,r),this.setYear=(n,r)=>this.overrides?.setYear?this.overrides.setYear(n,r):N6(n,r),this.startOfBroadcastWeek=(n,r)=>this.overrides?.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(n,this):r2(n,this),this.startOfDay=n=>this.overrides?.startOfDay?this.overrides.startOfDay(n):zc(n),this.startOfISOWeek=n=>this.overrides?.startOfISOWeek?this.overrides.startOfISOWeek(n):Wc(n),this.startOfMonth=n=>this.overrides?.startOfMonth?this.overrides.startOfMonth(n):TK(n),this.startOfWeek=(n,r)=>this.overrides?.startOfWeek?this.overrides.startOfWeek(n,this.options):nl(n,this.options),this.startOfYear=n=>this.overrides?.startOfYear?this.overrides.startOfYear(n):QF(n),this.options={locale:vx,...e},this.overrides=t}getDigitMap(){const{numerals:e="latn"}=this.options,t=new Intl.NumberFormat("en-US",{numberingSystem:e}),n={};for(let r=0;r<10;r++)n[r.toString()]=t.format(r);return n}replaceDigits(e){const t=this.getDigitMap();return e.replace(/\d/g,n=>t[n]||n)}formatNumber(e){return this.replaceDigits(e.toString())}getMonthYearOrder(){const e=this.options.locale?.code;return e&&Fi.yearFirstLocales.has(e)?"year-first":"month-first"}formatMonthYear(e){const{locale:t,timeZone:n,numerals:r}=this.options,s=t?.code;if(s&&Fi.yearFirstLocales.has(s))try{return new Intl.DateTimeFormat(s,{month:"long",year:"numeric",timeZone:n,numberingSystem:r}).format(e)}catch{}const o=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(e,o)}}Fi.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const Kn=new Fi;class s2{constructor(e,t,n=Kn){this.date=e,this.displayMonth=t,this.outside=!!(t&&!n.isSameMonth(e,t)),this.dateLib=n}isEqualTo(e){return this.dateLib.isSameDay(e.date,this.date)&&this.dateLib.isSameMonth(e.displayMonth,this.displayMonth)}}class j6{constructor(e,t){this.date=e,this.weeks=t}}class W6{constructor(e,t){this.days=t,this.weekNumber=e}}function z6(i){return Q.createElement("button",{...i})}function q6(i){return Q.createElement("span",{...i})}function G6(i){const{size:e=24,orientation:t="left",className:n}=i;return Q.createElement("svg",{className:n,width:e,height:e,viewBox:"0 0 24 24"},t==="up"&&Q.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),t==="down"&&Q.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),t==="left"&&Q.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),t==="right"&&Q.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function Y6(i){const{day:e,modifiers:t,...n}=i;return Q.createElement("td",{...n})}function B6(i){const{day:e,modifiers:t,...n}=i,r=Q.useRef(null);return Q.useEffect(()=>{t.focused&&r.current?.focus()},[t.focused]),Q.createElement("button",{ref:r,...n})}var ne;(function(i){i.Root="root",i.Chevron="chevron",i.Day="day",i.DayButton="day_button",i.CaptionLabel="caption_label",i.Dropdowns="dropdowns",i.Dropdown="dropdown",i.DropdownRoot="dropdown_root",i.Footer="footer",i.MonthGrid="month_grid",i.MonthCaption="month_caption",i.MonthsDropdown="months_dropdown",i.Month="month",i.Months="months",i.Nav="nav",i.NextMonthButton="button_next",i.PreviousMonthButton="button_previous",i.Week="week",i.Weeks="weeks",i.Weekday="weekday",i.Weekdays="weekdays",i.WeekNumber="week_number",i.WeekNumberHeader="week_number_header",i.YearsDropdown="years_dropdown"})(ne||(ne={}));var ft;(function(i){i.disabled="disabled",i.hidden="hidden",i.outside="outside",i.focused="focused",i.today="today"})(ft||(ft={}));var hn;(function(i){i.range_end="range_end",i.range_middle="range_middle",i.range_start="range_start",i.selected="selected"})(hn||(hn={}));var Ii;(function(i){i.weeks_before_enter="weeks_before_enter",i.weeks_before_exit="weeks_before_exit",i.weeks_after_enter="weeks_after_enter",i.weeks_after_exit="weeks_after_exit",i.caption_after_enter="caption_after_enter",i.caption_after_exit="caption_after_exit",i.caption_before_enter="caption_before_enter",i.caption_before_exit="caption_before_exit"})(Ii||(Ii={}));function H6(i){const{options:e,className:t,components:n,classNames:r,...s}=i,o=[r[ne.Dropdown],t].join(" "),a=e?.find(({value:l})=>l===s.value);return Q.createElement("span",{"data-disabled":s.disabled,className:r[ne.DropdownRoot]},Q.createElement(n.Select,{className:o,...s},e?.map(({value:l,label:c,disabled:u})=>Q.createElement(n.Option,{key:l,value:l,disabled:u},c))),Q.createElement("span",{className:r[ne.CaptionLabel],"aria-hidden":!0},a?.label,Q.createElement(n.Chevron,{orientation:"down",size:18,className:r[ne.Chevron]})))}function U6(i){return Q.createElement("div",{...i})}function V6(i){return Q.createElement("div",{...i})}function X6(i){const{calendarMonth:e,displayIndex:t,...n}=i;return Q.createElement("div",{...n},i.children)}function K6(i){const{calendarMonth:e,displayIndex:t,...n}=i;return Q.createElement("div",{...n})}function Z6(i){return Q.createElement("table",{...i})}function Q6(i){return Q.createElement("div",{...i})}const o2=_.createContext(void 0);function Eu(){const i=_.useContext(o2);if(i===void 0)throw new Error("useDayPicker() must be used within a custom component.");return i}function J6(i){const{components:e}=Eu();return Q.createElement(e.Dropdown,{...i})}function e8(i){const{onPreviousClick:e,onNextClick:t,previousMonth:n,nextMonth:r,...s}=i,{components:o,classNames:a,labels:{labelPrevious:l,labelNext:c}}=Eu(),u=_.useCallback(d=>{r&&t?.(d)},[r,t]),h=_.useCallback(d=>{n&&e?.(d)},[n,e]);return Q.createElement("nav",{...s},Q.createElement(o.PreviousMonthButton,{type:"button",className:a[ne.PreviousMonthButton],tabIndex:n?void 0:-1,"aria-disabled":n?void 0:!0,"aria-label":l(n),onClick:h},Q.createElement(o.Chevron,{disabled:n?void 0:!0,className:a[ne.Chevron],orientation:"left"})),Q.createElement(o.NextMonthButton,{type:"button",className:a[ne.NextMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":c(r),onClick:u},Q.createElement(o.Chevron,{disabled:r?void 0:!0,orientation:"right",className:a[ne.Chevron]})))}function t8(i){const{components:e}=Eu();return Q.createElement(e.Button,{...i})}function i8(i){return Q.createElement("option",{...i})}function n8(i){const{components:e}=Eu();return Q.createElement(e.Button,{...i})}function r8(i){const{rootRef:e,...t}=i;return Q.createElement("div",{...t,ref:e})}function s8(i){return Q.createElement("select",{...i})}function o8(i){const{week:e,...t}=i;return Q.createElement("tr",{...t})}function a8(i){return Q.createElement("th",{...i})}function l8(i){return Q.createElement("thead",{"aria-hidden":!0},Q.createElement("tr",{...i}))}function c8(i){const{week:e,...t}=i;return Q.createElement("th",{...t})}function u8(i){return Q.createElement("th",{...i})}function h8(i){return Q.createElement("tbody",{...i})}function d8(i){const{components:e}=Eu();return Q.createElement(e.Dropdown,{...i})}const f8=Object.freeze(Object.defineProperty({__proto__:null,Button:z6,CaptionLabel:q6,Chevron:G6,Day:Y6,DayButton:B6,Dropdown:H6,DropdownNav:U6,Footer:V6,Month:X6,MonthCaption:K6,MonthGrid:Z6,Months:Q6,MonthsDropdown:J6,Nav:e8,NextMonthButton:t8,Option:i8,PreviousMonthButton:n8,Root:r8,Select:s8,Week:o8,WeekNumber:c8,WeekNumberHeader:u8,Weekday:a8,Weekdays:l8,Weeks:h8,YearsDropdown:d8},Symbol.toStringTag,{value:"Module"}));function mr(i,e,t=!1,n=Kn){let{from:r,to:s}=i;const{differenceInCalendarDays:o,isSameDay:a}=n;return r&&s?(o(s,r)<0&&([r,s]=[s,r]),o(e,r)>=(t?1:0)&&o(s,e)>=(t?1:0)):!t&&s?a(s,e):!t&&r?a(r,e):!1}function a2(i){return!!(i&&typeof i=="object"&&"before"in i&&"after"in i)}function yx(i){return!!(i&&typeof i=="object"&&"from"in i)}function l2(i){return!!(i&&typeof i=="object"&&"after"in i)}function c2(i){return!!(i&&typeof i=="object"&&"before"in i)}function u2(i){return!!(i&&typeof i=="object"&&"dayOfWeek"in i)}function h2(i,e){return Array.isArray(i)&&i.every(e.isDate)}function gr(i,e,t=Kn){const n=Array.isArray(e)?e:[e],{isSameDay:r,differenceInCalendarDays:s,isAfter:o}=t;return n.some(a=>{if(typeof a=="boolean")return a;if(t.isDate(a))return r(i,a);if(h2(a,t))return a.includes(i);if(yx(a))return mr(a,i,!1,t);if(u2(a))return Array.isArray(a.dayOfWeek)?a.dayOfWeek.includes(i.getDay()):a.dayOfWeek===i.getDay();if(a2(a)){const l=s(a.before,i),c=s(a.after,i),u=l>0,h=c<0;return o(a.before,a.after)?h&&u:u||h}return l2(a)?s(i,a.after)>0:c2(a)?s(a.before,i)>0:typeof a=="function"?a(i):!1})}function p8(i,e,t,n,r){const{disabled:s,hidden:o,modifiers:a,showOutsideDays:l,broadcastCalendar:c,today:u}=e,{isSameDay:h,isSameMonth:d,startOfMonth:f,isBefore:p,endOfMonth:m,isAfter:g}=r,v=t&&f(t),y=n&&m(n),w={[ft.focused]:[],[ft.outside]:[],[ft.disabled]:[],[ft.hidden]:[],[ft.today]:[]},b={};for(const x of i){const{date:C,displayMonth:E}=x,S=!!(E&&!d(C,E)),R=!!(v&&p(C,v)),I=!!(y&&g(C,y)),k=!!(s&&gr(C,s,r)),M=!!(o&&gr(C,o,r))||R||I||!c&&!l&&S||c&&l===!1&&S,N=h(C,u??r.today());S&&w.outside.push(x),k&&w.disabled.push(x),M&&w.hidden.push(x),N&&w.today.push(x),a&&Object.keys(a).forEach(F=>{const q=a?.[F];q&&gr(C,q,r)&&(b[F]?b[F].push(x):b[F]=[x])})}return x=>{const C={[ft.focused]:!1,[ft.disabled]:!1,[ft.hidden]:!1,[ft.outside]:!1,[ft.today]:!1},E={};for(const S in w){const R=w[S];C[S]=R.some(I=>I===x)}for(const S in b)E[S]=b[S].some(R=>R===x);return{...C,...E}}}function m8(i,e,t={}){return Object.entries(i).filter(([,r])=>r===!0).reduce((r,[s])=>(t[s]?r.push(t[s]):e[ft[s]]?r.push(e[ft[s]]):e[hn[s]]&&r.push(e[hn[s]]),r),[e[ne.Day]])}function g8(i){return{...f8,...i}}function v8(i){const e={"data-mode":i.mode??void 0,"data-required":"required"in i?i.required:void 0,"data-multiple-months":i.numberOfMonths&&i.numberOfMonths>1||void 0,"data-week-numbers":i.showWeekNumber||void 0,"data-broadcast-calendar":i.broadcastCalendar||void 0,"data-nav-layout":i.navLayout||void 0};return Object.entries(i).forEach(([t,n])=>{t.startsWith("data-")&&(e[t]=n)}),e}function _x(){const i={};for(const e in ne)i[ne[e]]=`rdp-${ne[e]}`;for(const e in ft)i[ft[e]]=`rdp-${ft[e]}`;for(const e in hn)i[hn[e]]=`rdp-${hn[e]}`;for(const e in Ii)i[Ii[e]]=`rdp-${Ii[e]}`;return i}function d2(i,e,t){return(t??new Fi(e)).formatMonthYear(i)}const y8=d2;function _8(i,e,t){return(t??new Fi(e)).format(i,"d")}function b8(i,e=Kn){return e.format(i,"LLLL")}function w8(i,e,t){return(t??new Fi(e)).format(i,"cccccc")}function x8(i,e=Kn){return i<10?e.formatNumber(`0${i.toLocaleString()}`):e.formatNumber(`${i.toLocaleString()}`)}function S8(){return""}function f2(i,e=Kn){return e.format(i,"yyyy")}const E8=f2,C8=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:d2,formatDay:_8,formatMonthCaption:y8,formatMonthDropdown:b8,formatWeekNumber:x8,formatWeekNumberHeader:S8,formatWeekdayName:w8,formatYearCaption:E8,formatYearDropdown:f2},Symbol.toStringTag,{value:"Module"}));function T8(i){return i?.formatMonthCaption&&!i.formatCaption&&(i.formatCaption=i.formatMonthCaption),i?.formatYearCaption&&!i.formatYearDropdown&&(i.formatYearDropdown=i.formatYearCaption),{...C8,...i}}function R8(i,e,t,n,r){const{startOfMonth:s,startOfYear:o,endOfYear:a,eachMonthOfInterval:l,getMonth:c}=r;return l({start:o(i),end:a(i)}).map(d=>{const f=n.formatMonthDropdown(d,r),p=c(d),m=e&&d<s(e)||t&&d>s(t)||!1;return{value:p,label:f,disabled:m}})}function O8(i,e={},t={}){let n={...e?.[ne.Day]};return Object.entries(i).filter(([,r])=>r===!0).forEach(([r])=>{n={...n,...t?.[r]}}),n}function I8(i,e,t){const n=i.today(),r=e?i.startOfISOWeek(n):i.startOfWeek(n),s=[];for(let o=0;o<7;o++){const a=i.addDays(r,o);s.push(a)}return s}function D8(i,e,t,n,r=!1){if(!i||!e)return;const{startOfYear:s,endOfYear:o,eachYearOfInterval:a,getYear:l}=n,c=s(i),u=o(e),h=a({start:c,end:u});return r&&h.reverse(),h.map(d=>{const f=t.formatYearDropdown(d,n);return{value:l(d),label:f,disabled:!1}})}function p2(i,e,t,n){let r=(n??new Fi(t)).format(i,"PPPP");return e.today&&(r=`Today, ${r}`),e.selected&&(r=`${r}, selected`),r}const P8=p2;function m2(i,e,t){return(t??new Fi(e)).formatMonthYear(i)}const k8=m2;function M8(i,e,t,n){let r=(n??new Fi(t)).format(i,"PPPP");return e?.today&&(r=`Today, ${r}`),r}function A8(i){return"Choose the Month"}function N8(){return""}function L8(i){return"Go to the Next Month"}function F8(i){return"Go to the Previous Month"}function $8(i,e,t){return(t??new Fi(e)).format(i,"cccc")}function j8(i,e){return`Week ${i}`}function W8(i){return"Week Number"}function z8(i){return"Choose the Year"}const q8=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:k8,labelDay:P8,labelDayButton:p2,labelGrid:m2,labelGridcell:M8,labelMonthDropdown:A8,labelNav:N8,labelNext:L8,labelPrevious:F8,labelWeekNumber:j8,labelWeekNumberHeader:W8,labelWeekday:$8,labelYearDropdown:z8},Symbol.toStringTag,{value:"Module"})),Cu=i=>i instanceof HTMLElement?i:null,Zp=i=>[...i.querySelectorAll("[data-animated-month]")??[]],G8=i=>Cu(i.querySelector("[data-animated-month]")),Qp=i=>Cu(i.querySelector("[data-animated-caption]")),Jp=i=>Cu(i.querySelector("[data-animated-weeks]")),Y8=i=>Cu(i.querySelector("[data-animated-nav]")),B8=i=>Cu(i.querySelector("[data-animated-weekdays]"));function H8(i,e,{classNames:t,months:n,focused:r,dateLib:s}){const o=_.useRef(null),a=_.useRef(n),l=_.useRef(!1);_.useLayoutEffect(()=>{const c=a.current;if(a.current=n,!e||!i.current||!(i.current instanceof HTMLElement)||n.length===0||c.length===0||n.length!==c.length)return;const u=s.isSameMonth(n[0].date,c[0].date),h=s.isAfter(n[0].date,c[0].date),d=h?t[Ii.caption_after_enter]:t[Ii.caption_before_enter],f=h?t[Ii.weeks_after_enter]:t[Ii.weeks_before_enter],p=o.current,m=i.current.cloneNode(!0);if(m instanceof HTMLElement?(Zp(m).forEach(w=>{if(!(w instanceof HTMLElement))return;const b=G8(w);b&&w.contains(b)&&w.removeChild(b);const x=Qp(w);x&&x.classList.remove(d);const C=Jp(w);C&&C.classList.remove(f)}),o.current=m):o.current=null,l.current||u||r)return;const g=p instanceof HTMLElement?Zp(p):[],v=Zp(i.current);if(v?.every(y=>y instanceof HTMLElement)&&g&&g.every(y=>y instanceof HTMLElement)){l.current=!0,i.current.style.isolation="isolate";const y=Y8(i.current);y&&(y.style.zIndex="1"),v.forEach((w,b)=>{const x=g[b];if(!x)return;w.style.position="relative",w.style.overflow="hidden";const C=Qp(w);C&&C.classList.add(d);const E=Jp(w);E&&E.classList.add(f);const S=()=>{l.current=!1,i.current&&(i.current.style.isolation=""),y&&(y.style.zIndex=""),C&&C.classList.remove(d),E&&E.classList.remove(f),w.style.position="",w.style.overflow="",w.contains(x)&&w.removeChild(x)};x.style.pointerEvents="none",x.style.position="absolute",x.style.overflow="hidden",x.setAttribute("aria-hidden","true");const R=B8(x);R&&(R.style.opacity="0");const I=Qp(x);I&&(I.classList.add(h?t[Ii.caption_before_exit]:t[Ii.caption_after_exit]),I.addEventListener("animationend",S));const k=Jp(x);k&&k.classList.add(h?t[Ii.weeks_before_exit]:t[Ii.weeks_after_exit]),w.insertBefore(x,w.firstChild)})}})}function U8(i,e,t,n){const r=i[0],s=i[i.length-1],{ISOWeek:o,fixedWeeks:a,broadcastCalendar:l}=t??{},{addDays:c,differenceInCalendarDays:u,differenceInCalendarMonths:h,endOfBroadcastWeek:d,endOfISOWeek:f,endOfMonth:p,endOfWeek:m,isAfter:g,startOfBroadcastWeek:v,startOfISOWeek:y,startOfWeek:w}=n,b=l?v(r,n):o?y(r):w(r),x=l?d(s):o?f(p(s)):m(p(s)),C=u(x,b),E=h(s,r)+1,S=[];for(let k=0;k<=C;k++){const M=c(b,k);if(e&&g(M,e))break;S.push(M)}const I=(l?35:42)*E;if(a&&S.length<I){const k=I-S.length;for(let M=0;M<k;M++){const N=c(S[S.length-1],1);S.push(N)}}return S}function V8(i){const e=[];return i.reduce((t,n)=>{const r=n.weeks.reduce((s,o)=>s.concat(o.days.slice()),e.slice());return t.concat(r.slice())},e.slice())}function X8(i,e,t,n){const{numberOfMonths:r=1}=t,s=[];for(let o=0;o<r;o++){const a=n.addMonths(i,o);if(e&&a>e)break;s.push(a)}return s}function VE(i,e,t,n){const{month:r,defaultMonth:s,today:o=n.today(),numberOfMonths:a=1}=i;let l=r||s||o;const{differenceInCalendarMonths:c,addMonths:u,startOfMonth:h}=n;if(t&&c(t,l)<a-1){const d=-1*(a-1);l=u(t,d)}return e&&c(l,e)<0&&(l=e),h(l)}function K8(i,e,t,n){const{addDays:r,endOfBroadcastWeek:s,endOfISOWeek:o,endOfMonth:a,endOfWeek:l,getISOWeek:c,getWeek:u,startOfBroadcastWeek:h,startOfISOWeek:d,startOfWeek:f}=n,p=i.reduce((m,g)=>{const v=t.broadcastCalendar?h(g,n):t.ISOWeek?d(g):f(g),y=t.broadcastCalendar?s(g):t.ISOWeek?o(a(g)):l(a(g)),w=e.filter(E=>E>=v&&E<=y),b=t.broadcastCalendar?35:42;if(t.fixedWeeks&&w.length<b){const E=e.filter(S=>{const R=b-w.length;return S>y&&S<=r(y,R)});w.push(...E)}const x=w.reduce((E,S)=>{const R=t.ISOWeek?c(S):u(S),I=E.find(M=>M.weekNumber===R),k=new s2(S,g,n);return I?I.days.push(k):E.push(new W6(R,[k])),E},[]),C=new j6(g,x);return m.push(C),m},[]);return t.reverseMonths?p.reverse():p}function Z8(i,e){let{startMonth:t,endMonth:n}=i;const{startOfYear:r,startOfDay:s,startOfMonth:o,endOfMonth:a,addYears:l,endOfYear:c,newDate:u,today:h}=e,{fromYear:d,toYear:f,fromMonth:p,toMonth:m}=i;!t&&p&&(t=p),!t&&d&&(t=e.newDate(d,0,1)),!n&&m&&(n=m),!n&&f&&(n=u(f,11,31));const g=i.captionLayout==="dropdown"||i.captionLayout==="dropdown-years";return t?t=o(t):d?t=u(d,0,1):!t&&g&&(t=r(l(i.today??h(),-100))),n?n=a(n):f?n=u(f,11,31):!n&&g&&(n=c(i.today??h())),[t&&s(t),n&&s(n)]}function Q8(i,e,t,n){if(t.disableNavigation)return;const{pagedNavigation:r,numberOfMonths:s=1}=t,{startOfMonth:o,addMonths:a,differenceInCalendarMonths:l}=n,c=r?s:1,u=o(i);if(!e)return a(u,c);if(!(l(e,i)<s))return a(u,c)}function J8(i,e,t,n){if(t.disableNavigation)return;const{pagedNavigation:r,numberOfMonths:s}=t,{startOfMonth:o,addMonths:a,differenceInCalendarMonths:l}=n,c=r?s??1:1,u=o(i);if(!e)return a(u,-c);if(!(l(u,e)<=0))return a(u,-c)}function e9(i){const e=[];return i.reduce((t,n)=>t.concat(n.weeks.slice()),e.slice())}function xf(i,e){const[t,n]=_.useState(i);return[e===void 0?t:e,n]}function t9(i,e){const[t,n]=Z8(i,e),{startOfMonth:r,endOfMonth:s}=e,o=VE(i,t,n,e),[a,l]=xf(o,i.month?o:void 0);_.useEffect(()=>{const C=VE(i,t,n,e);l(C)},[i.timeZone]);const c=X8(a,n,i,e),u=U8(c,i.endMonth?s(i.endMonth):void 0,i,e),h=K8(c,u,i,e),d=e9(h),f=V8(h),p=J8(a,t,i,e),m=Q8(a,n,i,e),{disableNavigation:g,onMonthChange:v}=i,y=C=>d.some(E=>E.days.some(S=>S.isEqualTo(C))),w=C=>{if(g)return;let E=r(C);t&&E<r(t)&&(E=r(t)),n&&E>r(n)&&(E=r(n)),l(E),v?.(E)};return{months:h,weeks:d,days:f,navStart:t,navEnd:n,previousMonth:p,nextMonth:m,goToMonth:w,goToDay:C=>{y(C)||w(C.date)}}}var In;(function(i){i[i.Today=0]="Today",i[i.Selected=1]="Selected",i[i.LastFocused=2]="LastFocused",i[i.FocusedModifier=3]="FocusedModifier"})(In||(In={}));function XE(i){return!i[ft.disabled]&&!i[ft.hidden]&&!i[ft.outside]}function i9(i,e,t,n){let r,s=-1;for(const o of i){const a=e(o);XE(a)&&(a[ft.focused]&&s<In.FocusedModifier?(r=o,s=In.FocusedModifier):n?.isEqualTo(o)&&s<In.LastFocused?(r=o,s=In.LastFocused):t(o.date)&&s<In.Selected?(r=o,s=In.Selected):a[ft.today]&&s<In.Today&&(r=o,s=In.Today))}return r||(r=i.find(o=>XE(e(o)))),r}function n9(i,e,t,n,r,s,o){const{ISOWeek:a,broadcastCalendar:l}=s,{addDays:c,addMonths:u,addWeeks:h,addYears:d,endOfBroadcastWeek:f,endOfISOWeek:p,endOfWeek:m,max:g,min:v,startOfBroadcastWeek:y,startOfISOWeek:w,startOfWeek:b}=o;let C={day:c,week:h,month:u,year:d,startOfWeek:E=>l?y(E,o):a?w(E):b(E),endOfWeek:E=>l?f(E):a?p(E):m(E)}[i](t,e==="after"?1:-1);return e==="before"&&n?C=g([n,C]):e==="after"&&r&&(C=v([r,C])),C}function g2(i,e,t,n,r,s,o,a=0){if(a>365)return;const l=n9(i,e,t.date,n,r,s,o),c=!!(s.disabled&&gr(l,s.disabled,o)),u=!!(s.hidden&&gr(l,s.hidden,o)),h=l,d=new s2(l,h,o);return!c&&!u?d:g2(i,e,d,n,r,s,o,a+1)}function r9(i,e,t,n,r){const{autoFocus:s}=i,[o,a]=_.useState(),l=i9(e.days,t,n||(()=>!1),o),[c,u]=_.useState(s?l:void 0);return{isFocusTarget:m=>!!l?.isEqualTo(m),setFocused:u,focused:c,blur:()=>{a(c),u(void 0)},moveFocus:(m,g)=>{if(!c)return;const v=g2(m,g,c,e.navStart,e.navEnd,i,r);v&&(i.disableNavigation&&!e.days.some(w=>w.isEqualTo(v))||(e.goToDay(v),u(v)))}}}function s9(i,e){const{selected:t,required:n,onSelect:r}=i,[s,o]=xf(t,r?t:void 0),a=r?t:s,{isSameDay:l}=e,c=f=>a?.some(p=>l(p,f))??!1,{min:u,max:h}=i;return{selected:a,select:(f,p,m)=>{let g=[...a??[]];if(c(f)){if(a?.length===u||n&&a?.length===1)return;g=a?.filter(v=>!l(v,f))}else a?.length===h?g=[f]:g=[...g,f];return r||o(g),r?.(g,f,p,m),g},isSelected:c}}function o9(i,e,t=0,n=0,r=!1,s=Kn){const{from:o,to:a}=e||{},{isSameDay:l,isAfter:c,isBefore:u}=s;let h;if(!o&&!a)h={from:i,to:t>0?void 0:i};else if(o&&!a)l(o,i)?t===0?h={from:o,to:i}:r?h={from:o,to:void 0}:h=void 0:u(i,o)?h={from:i,to:o}:h={from:o,to:i};else if(o&&a)if(l(o,i)&&l(a,i))r?h={from:o,to:a}:h=void 0;else if(l(o,i))h={from:o,to:t>0?void 0:i};else if(l(a,i))h={from:i,to:t>0?void 0:i};else if(u(i,o))h={from:i,to:a};else if(c(i,o))h={from:o,to:i};else if(c(i,a))h={from:o,to:i};else throw new Error("Invalid range");if(h?.from&&h?.to){const d=s.differenceInCalendarDays(h.to,h.from);n>0&&d>n?h={from:i,to:void 0}:t>1&&d<t&&(h={from:i,to:void 0})}return h}function a9(i,e,t=Kn){const n=Array.isArray(e)?e:[e];let r=i.from;const s=t.differenceInCalendarDays(i.to,i.from),o=Math.min(s,6);for(let a=0;a<=o;a++){if(n.includes(r.getDay()))return!0;r=t.addDays(r,1)}return!1}function KE(i,e,t=Kn){return mr(i,e.from,!1,t)||mr(i,e.to,!1,t)||mr(e,i.from,!1,t)||mr(e,i.to,!1,t)}function l9(i,e,t=Kn){const n=Array.isArray(e)?e:[e];if(n.filter(a=>typeof a!="function").some(a=>typeof a=="boolean"?a:t.isDate(a)?mr(i,a,!1,t):h2(a,t)?a.some(l=>mr(i,l,!1,t)):yx(a)?a.from&&a.to?KE(i,{from:a.from,to:a.to},t):!1:u2(a)?a9(i,a.dayOfWeek,t):a2(a)?t.isAfter(a.before,a.after)?KE(i,{from:t.addDays(a.after,1),to:t.addDays(a.before,-1)},t):gr(i.from,a,t)||gr(i.to,a,t):l2(a)||c2(a)?gr(i.from,a,t)||gr(i.to,a,t):!1))return!0;const o=n.filter(a=>typeof a=="function");if(o.length){let a=i.from;const l=t.differenceInCalendarDays(i.to,i.from);for(let c=0;c<=l;c++){if(o.some(u=>u(a)))return!0;a=t.addDays(a,1)}}return!1}function c9(i,e){const{disabled:t,excludeDisabled:n,selected:r,required:s,onSelect:o}=i,[a,l]=xf(r,o?r:void 0),c=o?r:a;return{selected:c,select:(d,f,p)=>{const{min:m,max:g}=i,v=d?o9(d,c,m,g,s,e):void 0;return n&&t&&v?.from&&v.to&&l9({from:v.from,to:v.to},t,e)&&(v.from=d,v.to=void 0),o||l(v),o?.(v,d,f,p),v},isSelected:d=>c&&mr(c,d,!1,e)}}function u9(i,e){const{selected:t,required:n,onSelect:r}=i,[s,o]=xf(t,r?t:void 0),a=r?t:s,{isSameDay:l}=e;return{selected:a,select:(h,d,f)=>{let p=h;return!n&&a&&a&&l(h,a)&&(p=void 0),r||o(p),r?.(p,h,d,f),p},isSelected:h=>a?l(a,h):!1}}function h9(i,e){const t=u9(i,e),n=s9(i,e),r=c9(i,e);switch(i.mode){case"single":return t;case"multiple":return n;case"range":return r;default:return}}function d9(i){let e=i;e.timeZone&&(e={...i},e.today&&(e.today=new ei(e.today,e.timeZone)),e.month&&(e.month=new ei(e.month,e.timeZone)),e.defaultMonth&&(e.defaultMonth=new ei(e.defaultMonth,e.timeZone)),e.startMonth&&(e.startMonth=new ei(e.startMonth,e.timeZone)),e.endMonth&&(e.endMonth=new ei(e.endMonth,e.timeZone)),e.mode==="single"&&e.selected?e.selected=new ei(e.selected,e.timeZone):e.mode==="multiple"&&e.selected?e.selected=e.selected?.map(me=>new ei(me,e.timeZone)):e.mode==="range"&&e.selected&&(e.selected={from:e.selected.from?new ei(e.selected.from,e.timeZone):void 0,to:e.selected.to?new ei(e.selected.to,e.timeZone):void 0}));const{components:t,formatters:n,labels:r,dateLib:s,locale:o,classNames:a}=_.useMemo(()=>{const me={...vx,...e.locale};return{dateLib:new Fi({locale:me,weekStartsOn:e.broadcastCalendar?1:e.weekStartsOn,firstWeekContainsDate:e.firstWeekContainsDate,useAdditionalWeekYearTokens:e.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:e.useAdditionalDayOfYearTokens,timeZone:e.timeZone,numerals:e.numerals},e.dateLib),components:g8(e.components),formatters:T8(e.formatters),labels:{...q8,...e.labels},locale:me,classNames:{..._x(),...e.classNames}}},[e.locale,e.broadcastCalendar,e.weekStartsOn,e.firstWeekContainsDate,e.useAdditionalWeekYearTokens,e.useAdditionalDayOfYearTokens,e.timeZone,e.numerals,e.dateLib,e.components,e.formatters,e.labels,e.classNames]),{captionLayout:l,mode:c,navLayout:u,numberOfMonths:h=1,onDayBlur:d,onDayClick:f,onDayFocus:p,onDayKeyDown:m,onDayMouseEnter:g,onDayMouseLeave:v,onNextClick:y,onPrevClick:w,showWeekNumber:b,styles:x}=e,{formatCaption:C,formatDay:E,formatMonthDropdown:S,formatWeekNumber:R,formatWeekNumberHeader:I,formatWeekdayName:k,formatYearDropdown:M}=n,N=t9(e,s),{days:F,months:q,navStart:A,navEnd:z,previousMonth:P,nextMonth:G,goToMonth:U}=N,K=p8(F,e,A,z,s),{isSelected:D,select:L,selected:$}=h9(e,s)??{},{blur:j,focused:B,isFocusTarget:W,moveFocus:Z,setFocused:J}=r9(e,N,K,D??(()=>!1),s),{labelDayButton:ae,labelGridcell:et,labelGrid:it,labelMonthDropdown:he,labelNav:rt,labelPrevious:gt,labelNext:Tt,labelWeekday:vt,labelWeekNumber:Ge,labelWeekNumberHeader:zi,labelYearDropdown:ri}=r,Yt=_.useMemo(()=>I8(s,e.ISOWeek),[s,e.ISOWeek]),Kt=c!==void 0||f!==void 0,Ve=_.useCallback(()=>{P&&(U(P),w?.(P))},[P,U,w]),qi=_.useCallback(()=>{G&&(U(G),y?.(G))},[U,G,y]),er=_.useCallback((me,Xe)=>le=>{le.preventDefault(),le.stopPropagation(),J(me),L?.(me.date,Xe,le),f?.(me.date,Xe,le)},[L,f,J]),Br=_.useCallback((me,Xe)=>le=>{J(me),p?.(me.date,Xe,le)},[p,J]),On=_.useCallback((me,Xe)=>le=>{j(),d?.(me.date,Xe,le)},[j,d]),Uo=_.useCallback((me,Xe)=>le=>{const Ae={ArrowLeft:[le.shiftKey?"month":"day",e.dir==="rtl"?"after":"before"],ArrowRight:[le.shiftKey?"month":"day",e.dir==="rtl"?"before":"after"],ArrowDown:[le.shiftKey?"year":"week","after"],ArrowUp:[le.shiftKey?"year":"week","before"],PageUp:[le.shiftKey?"year":"month","before"],PageDown:[le.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(Ae[le.key]){le.preventDefault(),le.stopPropagation();const[Pt,De]=Ae[le.key];Z(Pt,De)}m?.(me.date,Xe,le)},[Z,m,e.dir]),Ms=_.useCallback((me,Xe)=>le=>{g?.(me.date,Xe,le)},[g]),As=_.useCallback((me,Xe)=>le=>{v?.(me.date,Xe,le)},[v]),$e=_.useCallback(me=>Xe=>{const le=Number(Xe.target.value),Ae=s.setMonth(s.startOfMonth(me),le);U(Ae)},[s,U]),ve=_.useCallback(me=>Xe=>{const le=Number(Xe.target.value),Ae=s.setYear(s.startOfMonth(me),le);U(Ae)},[s,U]),{className:Ce,style:Ee}=_.useMemo(()=>({className:[a[ne.Root],e.className].filter(Boolean).join(" "),style:{...x?.[ne.Root],...e.style}}),[a,e.className,e.style,x]),qe=v8(e),xt=_.useRef(null);H8(xt,!!e.animate,{classNames:a,months:q,focused:B,dateLib:s});const Ns={dayPickerProps:e,selected:$,select:L,isSelected:D,months:q,nextMonth:G,previousMonth:P,goToMonth:U,getModifiers:K,components:t,classNames:a,styles:x,labels:r,formatters:n};return Q.createElement(o2.Provider,{value:Ns},Q.createElement(t.Root,{rootRef:e.animate?xt:void 0,className:Ce,style:Ee,dir:e.dir,id:e.id,lang:e.lang,nonce:e.nonce,title:e.title,role:e.role,"aria-label":e["aria-label"],"aria-labelledby":e["aria-labelledby"],...qe},Q.createElement(t.Months,{className:a[ne.Months],style:x?.[ne.Months]},!e.hideNavigation&&!u&&Q.createElement(t.Nav,{"data-animated-nav":e.animate?"true":void 0,className:a[ne.Nav],style:x?.[ne.Nav],"aria-label":rt(),onPreviousClick:Ve,onNextClick:qi,previousMonth:P,nextMonth:G}),q.map((me,Xe)=>Q.createElement(t.Month,{"data-animated-month":e.animate?"true":void 0,className:a[ne.Month],style:x?.[ne.Month],key:Xe,displayIndex:Xe,calendarMonth:me},u==="around"&&!e.hideNavigation&&Xe===0&&Q.createElement(t.PreviousMonthButton,{type:"button",className:a[ne.PreviousMonthButton],tabIndex:P?void 0:-1,"aria-disabled":P?void 0:!0,"aria-label":gt(P),onClick:Ve,"data-animated-button":e.animate?"true":void 0},Q.createElement(t.Chevron,{disabled:P?void 0:!0,className:a[ne.Chevron],orientation:e.dir==="rtl"?"right":"left"})),Q.createElement(t.MonthCaption,{"data-animated-caption":e.animate?"true":void 0,className:a[ne.MonthCaption],style:x?.[ne.MonthCaption],calendarMonth:me,displayIndex:Xe},l?.startsWith("dropdown")?Q.createElement(t.DropdownNav,{className:a[ne.Dropdowns],style:x?.[ne.Dropdowns]},(()=>{const le=l==="dropdown"||l==="dropdown-months"?Q.createElement(t.MonthsDropdown,{key:"month",className:a[ne.MonthsDropdown],"aria-label":he(),classNames:a,components:t,disabled:!!e.disableNavigation,onChange:$e(me.date),options:R8(me.date,A,z,n,s),style:x?.[ne.Dropdown],value:s.getMonth(me.date)}):Q.createElement("span",{key:"month"},S(me.date,s)),Ae=l==="dropdown"||l==="dropdown-years"?Q.createElement(t.YearsDropdown,{key:"year",className:a[ne.YearsDropdown],"aria-label":ri(s.options),classNames:a,components:t,disabled:!!e.disableNavigation,onChange:ve(me.date),options:D8(A,z,n,s,!!e.reverseYears),style:x?.[ne.Dropdown],value:s.getYear(me.date)}):Q.createElement("span",{key:"year"},M(me.date,s));return s.getMonthYearOrder()==="year-first"?[Ae,le]:[le,Ae]})(),Q.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},C(me.date,s.options,s))):Q.createElement(t.CaptionLabel,{className:a[ne.CaptionLabel],role:"status","aria-live":"polite"},C(me.date,s.options,s))),u==="around"&&!e.hideNavigation&&Xe===h-1&&Q.createElement(t.NextMonthButton,{type:"button",className:a[ne.NextMonthButton],tabIndex:G?void 0:-1,"aria-disabled":G?void 0:!0,"aria-label":Tt(G),onClick:qi,"data-animated-button":e.animate?"true":void 0},Q.createElement(t.Chevron,{disabled:G?void 0:!0,className:a[ne.Chevron],orientation:e.dir==="rtl"?"left":"right"})),Xe===h-1&&u==="after"&&!e.hideNavigation&&Q.createElement(t.Nav,{"data-animated-nav":e.animate?"true":void 0,className:a[ne.Nav],style:x?.[ne.Nav],"aria-label":rt(),onPreviousClick:Ve,onNextClick:qi,previousMonth:P,nextMonth:G}),Q.createElement(t.MonthGrid,{role:"grid","aria-multiselectable":c==="multiple"||c==="range","aria-label":it(me.date,s.options,s)||void 0,className:a[ne.MonthGrid],style:x?.[ne.MonthGrid]},!e.hideWeekdays&&Q.createElement(t.Weekdays,{"data-animated-weekdays":e.animate?"true":void 0,className:a[ne.Weekdays],style:x?.[ne.Weekdays]},b&&Q.createElement(t.WeekNumberHeader,{"aria-label":zi(s.options),className:a[ne.WeekNumberHeader],style:x?.[ne.WeekNumberHeader],scope:"col"},I()),Yt.map(le=>Q.createElement(t.Weekday,{"aria-label":vt(le,s.options,s),className:a[ne.Weekday],key:String(le),style:x?.[ne.Weekday],scope:"col"},k(le,s.options,s)))),Q.createElement(t.Weeks,{"data-animated-weeks":e.animate?"true":void 0,className:a[ne.Weeks],style:x?.[ne.Weeks]},me.weeks.map(le=>Q.createElement(t.Week,{className:a[ne.Week],key:le.weekNumber,style:x?.[ne.Week],week:le},b&&Q.createElement(t.WeekNumber,{week:le,style:x?.[ne.WeekNumber],"aria-label":Ge(le.weekNumber,{locale:o}),className:a[ne.WeekNumber],scope:"row",role:"rowheader"},R(le.weekNumber,s)),le.days.map(Ae=>{const{date:Pt}=Ae,De=K(Ae);if(De[ft.focused]=!De.hidden&&!!B?.isEqualTo(Ae),De[hn.selected]=D?.(Pt)||De.selected,yx($)){const{from:Zt,to:pi}=$;De[hn.range_start]=!!(Zt&&pi&&s.isSameDay(Pt,Zt)),De[hn.range_end]=!!(Zt&&pi&&s.isSameDay(Pt,pi)),De[hn.range_middle]=mr($,Pt,!0,s)}const th=O8(De,x,e.modifiersStyles),fi=m8(De,a,e.modifiersClassNames),tr=!Kt&&!De.hidden?et(Pt,De,s.options,s):void 0;return Q.createElement(t.Day,{key:`${s.format(Pt,"yyyy-MM-dd")}_${s.format(Ae.displayMonth,"yyyy-MM")}`,day:Ae,modifiers:De,className:fi.join(" "),style:th,role:"gridcell","aria-selected":De.selected||void 0,"aria-label":tr,"data-day":s.format(Pt,"yyyy-MM-dd"),"data-month":Ae.outside?s.format(Pt,"yyyy-MM"):void 0,"data-selected":De.selected||void 0,"data-disabled":De.disabled||void 0,"data-hidden":De.hidden||void 0,"data-outside":Ae.outside||void 0,"data-focused":De.focused||void 0,"data-today":De.today||void 0},!De.hidden&&Kt?Q.createElement(t.DayButton,{className:a[ne.DayButton],style:x?.[ne.DayButton],type:"button",day:Ae,modifiers:De,disabled:De.disabled||void 0,tabIndex:W(Ae)?0:-1,"aria-label":ae(Pt,De,s.options,s),onClick:er(Ae,De),onBlur:On(Ae,De),onFocus:Br(Ae,De),onKeyDown:Uo(Ae,De),onMouseEnter:Ms(Ae,De),onMouseLeave:As(Ae,De)},E(Pt,s.options,s)):!De.hidden&&E(Ae.date,s.options,s))})))))))),e.footer&&Q.createElement(t.Footer,{className:a[ne.Footer],style:x?.[ne.Footer],role:"status","aria-live":"polite"},e.footer)))}function f9({className:i,classNames:e,showOutsideDays:t=!0,captionLayout:n="label",buttonVariant:r="ghost",formatters:s,components:o,...a}){const l=_x();return T.jsx(d9,{showOutsideDays:t,className:V("bg-background group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,i),captionLayout:n,formatters:{formatMonthDropdown:c=>c.toLocaleString("default",{month:"short"}),...s},classNames:{root:V("w-fit",l.root),months:V("relative flex flex-col gap-4 md:flex-row",l.months),month:V("flex w-full flex-col gap-4",l.month),nav:V("absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1",l.nav),button_previous:V(Ub({variant:r}),"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50",l.button_previous),button_next:V(Ub({variant:r}),"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50",l.button_next),month_caption:V("flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]",l.month_caption),dropdowns:V("flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium",l.dropdowns),dropdown_root:V("has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border",l.dropdown_root),dropdown:V("bg-popover absolute inset-0 opacity-0",l.dropdown),caption_label:V("select-none font-medium",n==="label"?"text-sm":"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5",l.caption_label),table:"w-full border-collapse",weekdays:V("flex",l.weekdays),weekday:V("text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal",l.weekday),week:V("mt-2 flex w-full",l.week),week_number_header:V("w-[--cell-size] select-none",l.week_number_header),week_number:V("text-muted-foreground select-none text-[0.8rem]",l.week_number),day:V("group/day relative aspect-square h-full w-full select-none p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md",l.day),range_start:V("bg-accent rounded-l-md",l.range_start),range_middle:V("rounded-none",l.range_middle),range_end:V("bg-accent rounded-r-md",l.range_end),today:V("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",l.today),outside:V("text-muted-foreground aria-selected:text-muted-foreground",l.outside),disabled:V("text-muted-foreground opacity-50",l.disabled),hidden:V("invisible",l.hidden),...e},components:{Root:({className:c,rootRef:u,...h})=>T.jsx("div",{"data-slot":"calendar",ref:u,className:V(c),...h}),Chevron:({className:c,orientation:u,...h})=>u==="left"?T.jsx(Fz,{className:V("size-4",c),...h}):u==="right"?T.jsx(jz,{className:V("size-4",c),...h}):T.jsx(Nz,{className:V("size-4",c),...h}),DayButton:p9,WeekNumber:({children:c,...u})=>T.jsx("td",{...u,children:T.jsx("div",{className:"flex size-[--cell-size] items-center justify-center text-center",children:c})}),...o},...a})}function p9({className:i,day:e,modifiers:t,...n}){const r=_x(),s=_.useRef(null);return _.useEffect(()=>{t.focused&&s.current?.focus()},[t.focused]),T.jsx(zn,{ref:s,variant:"ghost",size:"icon","data-day":e.date.toLocaleDateString(),"data-selected-single":t.selected&&!t.range_start&&!t.range_end&&!t.range_middle,"data-range-start":t.range_start,"data-range-end":t.range_end,"data-range-middle":t.range_middle,className:V("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70",r.day,i),...n})}var Sf="Popover",[v2]=ko(Sf,[Xd]),Tu=Xd(),[m9,Cs]=v2(Sf),y2=i=>{const{__scopePopover:e,children:t,open:n,defaultOpen:r,onOpenChange:s,modal:o=!1}=i,a=Tu(e),l=_.useRef(null),[c,u]=_.useState(!1),[h,d]=cu({prop:n,defaultProp:r??!1,onChange:s,caller:Sf});return T.jsx(qN,{...a,children:T.jsx(m9,{scope:e,contentId:Ai(),triggerRef:l,open:h,onOpenChange:d,onOpenToggle:_.useCallback(()=>d(f=>!f),[d]),hasCustomAnchor:c,onCustomAnchorAdd:_.useCallback(()=>u(!0),[]),onCustomAnchorRemove:_.useCallback(()=>u(!1),[]),modal:o,children:t})})};y2.displayName=Sf;var _2="PopoverAnchor",g9=_.forwardRef((i,e)=>{const{__scopePopover:t,...n}=i,r=Cs(_2,t),s=Tu(t),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return _.useEffect(()=>(o(),()=>a()),[o,a]),T.jsx(xw,{...s,...n,ref:e})});g9.displayName=_2;var b2="PopoverTrigger",w2=_.forwardRef((i,e)=>{const{__scopePopover:t,...n}=i,r=Cs(b2,t),s=Tu(t),o=ni(e,r.triggerRef),a=T.jsx(ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":T2(r.open),...n,ref:o,onClick:Ze(i.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:T.jsx(xw,{asChild:!0,...s,children:a})});w2.displayName=b2;var bx="PopoverPortal",[v9,y9]=v2(bx,{forceMount:void 0}),x2=i=>{const{__scopePopover:e,forceMount:t,children:n,container:r}=i,s=Cs(bx,e);return T.jsx(v9,{scope:e,forceMount:t,children:T.jsx(xs,{present:t||s.open,children:T.jsx(lw,{asChild:!0,container:r,children:n})})})};x2.displayName=bx;var rl="PopoverContent",S2=_.forwardRef((i,e)=>{const t=y9(rl,i.__scopePopover),{forceMount:n=t.forceMount,...r}=i,s=Cs(rl,i.__scopePopover);return T.jsx(xs,{present:n||s.open,children:s.modal?T.jsx(b9,{...r,ref:e}):T.jsx(w9,{...r,ref:e})})});S2.displayName=rl;var _9=Ha("PopoverContent.RemoveScroll"),b9=_.forwardRef((i,e)=>{const t=Cs(rl,i.__scopePopover),n=_.useRef(null),r=ni(e,n),s=_.useRef(!1);return _.useEffect(()=>{const o=n.current;if(o)return QA(o)},[]),T.jsx(cw,{as:_9,allowPinchZoom:!0,children:T.jsx(E2,{...i,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ze(i.onCloseAutoFocus,o=>{o.preventDefault(),s.current||t.triggerRef.current?.focus()}),onPointerDownOutside:Ze(i.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Ze(i.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),w9=_.forwardRef((i,e)=>{const t=Cs(rl,i.__scopePopover),n=_.useRef(!1),r=_.useRef(!1);return T.jsx(E2,{...i,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{i.onCloseAutoFocus?.(s),s.defaultPrevented||(n.current||t.triggerRef.current?.focus(),s.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:s=>{i.onInteractOutside?.(s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;t.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),E2=_.forwardRef((i,e)=>{const{__scopePopover:t,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...h}=i,d=Cs(rl,t),f=Tu(t);return GA(),T.jsx(aw,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:s,children:T.jsx(Wd,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>d.onOpenChange(!1),children:T.jsx(GN,{"data-state":T2(d.open),role:"dialog",id:d.contentId,...f,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),C2="PopoverClose",x9=_.forwardRef((i,e)=>{const{__scopePopover:t,...n}=i,r=Cs(C2,t);return T.jsx(ze.button,{type:"button",...n,ref:e,onClick:Ze(i.onClick,()=>r.onOpenChange(!1))})});x9.displayName=C2;var S9="PopoverArrow",E9=_.forwardRef((i,e)=>{const{__scopePopover:t,...n}=i,r=Tu(t);return T.jsx(YN,{...r,...n,ref:e})});E9.displayName=S9;function T2(i){return i?"open":"closed"}var C9=y2,T9=w2,R9=x2,R2=S2;const O9=C9,I9=T9,O2=_.forwardRef(({className:i,align:e="center",sideOffset:t=4,...n},r)=>T.jsx(R9,{children:T.jsx(R2,{ref:r,align:e,sideOffset:t,className:V("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",i),...n})}));O2.displayName=R2.displayName;const D9=()=>T.jsxs(O9,{children:[T.jsx(I9,{asChild:!0,children:T.jsxs(Hs,{variant:"outline",className:V("w-full text-right font-normal"),children:[T.jsx(Mz,{className:"h-4 w-4 text-right"}),"24  "]})}),T.jsxs(O2,{className:"dark w-auto p-0",align:"start",children:[T.jsx(f9,{mode:"range",captionLayout:"dropdown"}),T.jsx("div",{className:"px-2 pb-2",children:T.jsx(zn,{disabled:!0,className:"h-8",children:""})})]})]});/**
 * @license lucide-static v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=`
<svg
  class="lucide lucide-bot"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M12 8V4H8" />
  <rect width="16" height="12" x="4" y="8" rx="2" />
  <path d="M2 14h2" />
  <path d="M20 14h2" />
  <path d="M15 13v2" />
  <path d="M9 13v2" />
</svg>
`;/**
 * @license lucide-static v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=`
<svg
  class="lucide lucide-image"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <rect width="18" height="18" x="3" y="3" rx="2" ry="2" />
  <circle cx="9" cy="9" r="2" />
  <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" />
</svg>
`;/**
 * @license lucide-static v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=`
<svg
  class="lucide lucide-layout-list"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <rect width="7" height="7" x="3" y="3" rx="1" />
  <rect width="7" height="7" x="3" y="14" rx="1" />
  <path d="M14 4h7" />
  <path d="M14 9h7" />
  <path d="M14 15h7" />
  <path d="M14 20h7" />
</svg>
`;/**
 * @license lucide-static v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=`
<svg
  class="lucide lucide-map-pinned"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0" />
  <circle cx="12" cy="8" r="2" />
  <path d="M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712" />
</svg>
`;/**
 * @license lucide-static v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=`
<svg
  class="lucide lucide-panel-right"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <rect width="18" height="18" x="3" y="3" rx="2" />
  <path d="M15 3v18" />
</svg>
`;/**
 * @license lucide-static v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=`
<svg
  class="lucide lucide-shield-x"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z" />
  <path d="m14.5 9.5-5 5" />
  <path d="m9.5 9.5 5 5" />
</svg>
`;/**
 * @license lucide-static v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=`
<svg
  class="lucide lucide-square-kanban"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <rect width="18" height="18" x="3" y="3" rx="2" />
  <path d="M8 7v7" />
  <path d="M12 7v4" />
  <path d="M16 7v9" />
</svg>
`;/**
 * @license lucide-static v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=`
<svg
  class="lucide lucide-volume-2"
  xmlns="http://www.w3.org/2000/svg"
  width="24"
  height="24"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z" />
  <path d="M16 9a5 5 0 0 1 0 6" />
  <path d="M19.364 18.364a9 9 0 0 0 0-12.728" />
</svg>
`;function j9({entities:i,entitiesCluster:e}){const[,t]=_.useState(0),n=()=>t(a=>a+1),{toggleSidebar:r}=fu(),{theme:s,setTheme:o}=Dz();return T.jsxs(nL,{side:"right",collapsible:"icon",dir:"rtl",children:[T.jsxs(lL,{children:[T.jsx(aL,{children:T.jsxs("div",{className:"flex items-center justify-between gap-1",children:[T.jsx(qs,{className:"w-full",children:T.jsxs(Hs,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[T.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-sidebar-primary text-sidebar-primary-foreground",children:T.jsx(gq,{className:"size-4"})}),T.jsxs("div",{className:"grid flex-1 text-right text-sm leading-tight",children:[T.jsx("span",{className:"truncate font-medium",children:"???"}),T.jsx("span",{className:"truncate text-xs",children:"?????"})]})]})}),T.jsx(zn,{className:"h-8 w-8",variant:"ghost",onClick:()=>o(s==="dark"?"light":"dark"),children:s==="dark"?T.jsx(dq,{className:"size-4"}):T.jsx(sq,{className:"size-4"})}),T.jsx(rL,{className:"group-data-[collapsible=icon]:visbile h-8 w-10 transition-transform group-data-[collapsible=icon]:absolute group-data-[collapsible=icon]:right-14",children:T.jsx(N9,{})})]})}),T.jsxs(qh,{children:[T.jsx(Gh,{children:""}),T.jsxs(Yh,{className:"relative flex flex-col gap-2",children:[T.jsx(qs,{className:"group-data-[collapsible=icon]:hidden",children:T.jsx(eK,{inputClassName:"group-search-input"})}),T.jsx(qs,{className:"hidden group-data-[collapsible=icon]:block",children:T.jsx(Hs,{variant:"outline",onClick:()=>{r(),setTimeout(()=>{document?.getElementsByClassName("group-search-input").item(0)?.focus()},100)},children:T.jsx(bA,{})})}),T.jsx(qs,{children:T.jsxs(Hs,{className:"mx-auto",variant:"outline",children:[T.jsx(nq,{}),T.jsx("span",{children:" "})]})})]})]}),T.jsxs(qh,{children:[T.jsx(Gh,{children:""}),T.jsx(Yh,{children:T.jsx(D9,{})})]}),T.jsxs(qh,{children:[T.jsx(Gh,{children:""}),T.jsx(Yh,{children:T.jsxs(cL,{children:[T.jsx(qs,{children:T.jsxs(Hs,{onClick:()=>gX(i),children:[T.jsx(qb,{}),T.jsx("div",{children:"add entity"})]})}),T.jsx(qs,{className:"group-data-[collapsible=icon]:hidden",children:T.jsxs(Hs,{onClick:()=>{e.setDistance(50),n()},children:[T.jsx(qb,{}),T.jsxs("div",{children:["change cluster distance - ",e.getDistance()]})]})})]})})]})]}),T.jsx(sL,{})]})}function W9({map:i,select:e,onViewEntity:t,onClickSingleEntity:n}){const r=_.useRef(null),s=_.useRef(null),o=_.useRef(null),[a,l]=_.useState();return _.useEffect(()=>{if(r.current){i.setTarget(r.current);const c=new rX({element:s.current,offset:[0,-80],positioning:"top-center",autoPan:{animation:{duration:250}}});return o.current=c,i.addOverlay(c),e?.on("select",u=>{const h=u.target.getFeatures();if(u.selected.length===1&&h.getLength()===1){const d=u.selected[0].getGeometry()?.getCoordinates();c.setPosition(d);const f=u.selected[0].get("features")[0].getId();l(f),n(f)}else c.setPosition(void 0),l(void 0),t(void 0)}),()=>{i.setTarget(void 0),i.removeOverlay(c)}}},[i,n,e]),T.jsxs(T.Fragment,{children:[T.jsx("div",{ref:r,className:"h-full w-full overflow-hidden"}),T.jsx("div",{ref:s,className:"tooltip-thing absolute text-primary",children:T.jsxs("div",{className:V("absolute -translate-x-1/2 transition-all duration-300",a?"pointer-events-auto translate-y-0 opacity-100":"pointer-events-none translate-y-2 opacity-0"),children:[T.jsxs("div",{className:"flex gap-2 rounded-xl border border-border bg-card p-2 shadow-2xl backdrop-blur-sm",children:[T.jsx(zn,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0",onClick:()=>a&&t(a),children:T.jsx(Xz,{className:"h-4 w-4"})}),T.jsx(zn,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0",children:T.jsx(Gz,{className:"h-4 w-4"})}),T.jsx(zn,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0",children:T.jsx(Uz,{className:"h-4 w-4"})})]}),T.jsx("div",{className:"absolute left-1/2 top-full -mt-[5px] -translate-x-1/2",children:T.jsx("div",{className:"h-3 w-3 rotate-45 border-b border-r border-border bg-card"})})]})})]})}function z9(i){const e=i+"CollectionProvider",[t,n]=ko(e),[r,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:g,children:v}=m,y=Q.useRef(null),w=Q.useRef(new Map).current;return T.jsx(r,{scope:g,itemMap:w,collectionRef:y,children:v})};o.displayName=e;const a=i+"CollectionSlot",l=Ha(a),c=Q.forwardRef((m,g)=>{const{scope:v,children:y}=m,w=s(a,v),b=ni(g,w.collectionRef);return T.jsx(l,{ref:b,children:y})});c.displayName=a;const u=i+"CollectionItemSlot",h="data-radix-collection-item",d=Ha(u),f=Q.forwardRef((m,g)=>{const{scope:v,children:y,...w}=m,b=Q.useRef(null),x=ni(g,b),C=s(u,v);return Q.useEffect(()=>(C.itemMap.set(b,{ref:b,...w}),()=>void C.itemMap.delete(b))),T.jsx(d,{[h]:"",ref:x,children:y})});f.displayName=u;function p(m){const g=s(i+"CollectionConsumer",m);return Q.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((C,E)=>w.indexOf(C.ref.current)-w.indexOf(E.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:c,ItemSlot:f},p,n]}var q9=_.createContext(void 0);function I2(i){const e=_.useContext(q9);return i||e||"ltr"}var em="rovingFocusGroup.onEntryFocus",G9={bubbles:!1,cancelable:!0},Ru="RovingFocusGroup",[S0,D2,Y9]=z9(Ru),[B9,P2]=ko(Ru,[Y9]),[H9,U9]=B9(Ru),k2=_.forwardRef((i,e)=>T.jsx(S0.Provider,{scope:i.__scopeRovingFocusGroup,children:T.jsx(S0.Slot,{scope:i.__scopeRovingFocusGroup,children:T.jsx(V9,{...i,ref:e})})}));k2.displayName=Ru;var V9=_.forwardRef((i,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=i,d=_.useRef(null),f=ni(e,d),p=I2(s),[m,g]=cu({prop:o,defaultProp:a??null,onChange:l,caller:Ru}),[v,y]=_.useState(!1),w=po(c),b=D2(t),x=_.useRef(!1),[C,E]=_.useState(0);return _.useEffect(()=>{const S=d.current;if(S)return S.addEventListener(em,w),()=>S.removeEventListener(em,w)},[w]),T.jsx(H9,{scope:t,orientation:n,dir:p,loop:r,currentTabStopId:m,onItemFocus:_.useCallback(S=>g(S),[g]),onItemShiftTab:_.useCallback(()=>y(!0),[]),onFocusableItemAdd:_.useCallback(()=>E(S=>S+1),[]),onFocusableItemRemove:_.useCallback(()=>E(S=>S-1),[]),children:T.jsx(ze.div,{tabIndex:v||C===0?-1:0,"data-orientation":n,...h,ref:f,style:{outline:"none",...i.style},onMouseDown:Ze(i.onMouseDown,()=>{x.current=!0}),onFocus:Ze(i.onFocus,S=>{const R=!x.current;if(S.target===S.currentTarget&&R&&!v){const I=new CustomEvent(em,G9);if(S.currentTarget.dispatchEvent(I),!I.defaultPrevented){const k=b().filter(A=>A.focusable),M=k.find(A=>A.active),N=k.find(A=>A.id===m),q=[M,N,...k].filter(Boolean).map(A=>A.ref.current);N2(q,u)}}x.current=!1}),onBlur:Ze(i.onBlur,()=>y(!1))})})}),M2="RovingFocusGroupItem",A2=_.forwardRef((i,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:r=!1,tabStopId:s,children:o,...a}=i,l=Ai(),c=s||l,u=U9(M2,t),h=u.currentTabStopId===c,d=D2(t),{onFocusableItemAdd:f,onFocusableItemRemove:p,currentTabStopId:m}=u;return _.useEffect(()=>{if(n)return f(),()=>p()},[n,f,p]),T.jsx(S0.ItemSlot,{scope:t,id:c,focusable:n,active:r,children:T.jsx(ze.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:Ze(i.onMouseDown,g=>{n?u.onItemFocus(c):g.preventDefault()}),onFocus:Ze(i.onFocus,()=>u.onItemFocus(c)),onKeyDown:Ze(i.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const v=Z9(g,u.orientation,u.dir);if(v!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let w=d().filter(b=>b.focusable).map(b=>b.ref.current);if(v==="last")w.reverse();else if(v==="prev"||v==="next"){v==="prev"&&w.reverse();const b=w.indexOf(g.currentTarget);w=u.loop?Q9(w,b+1):w.slice(b+1)}setTimeout(()=>N2(w))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:m!=null}):o})})});A2.displayName=M2;var X9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function K9(i,e){return e!=="rtl"?i:i==="ArrowLeft"?"ArrowRight":i==="ArrowRight"?"ArrowLeft":i}function Z9(i,e,t){const n=K9(i.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return X9[n]}function N2(i,e=!1){const t=document.activeElement;for(const n of i)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function Q9(i,e){return i.map((t,n)=>i[(e+n)%i.length])}var J9=k2,eZ=A2,Ef="Tabs",[tZ]=ko(Ef,[P2]),L2=P2(),[iZ,wx]=tZ(Ef),F2=_.forwardRef((i,e)=>{const{__scopeTabs:t,value:n,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=i,u=I2(a),[h,d]=cu({prop:n,onChange:r,defaultProp:s??"",caller:Ef});return T.jsx(iZ,{scope:t,baseId:Ai(),value:h,onValueChange:d,orientation:o,dir:u,activationMode:l,children:T.jsx(ze.div,{dir:u,"data-orientation":o,...c,ref:e})})});F2.displayName=Ef;var $2="TabsList",j2=_.forwardRef((i,e)=>{const{__scopeTabs:t,loop:n=!0,...r}=i,s=wx($2,t),o=L2(t);return T.jsx(J9,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:n,children:T.jsx(ze.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});j2.displayName=$2;var W2="TabsTrigger",z2=_.forwardRef((i,e)=>{const{__scopeTabs:t,value:n,disabled:r=!1,...s}=i,o=wx(W2,t),a=L2(t),l=G2(o.baseId,n),c=Y2(o.baseId,n),u=n===o.value;return T.jsx(eZ,{asChild:!0,...a,focusable:!r,active:u,children:T.jsx(ze.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:e,onMouseDown:Ze(i.onMouseDown,h=>{!r&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:Ze(i.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:Ze(i.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!r&&h&&o.onValueChange(n)})})})});z2.displayName=W2;var q2="TabsContent",gd=_.forwardRef((i,e)=>{const{__scopeTabs:t,value:n,forceMount:r,children:s,...o}=i,a=wx(q2,t),l=G2(a.baseId,n),c=Y2(a.baseId,n),u=n===a.value,h=_.useRef(u);return _.useEffect(()=>{const d=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(d)},[]),T.jsx(xs,{present:r||u,children:({present:d})=>T.jsx(ze.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!d,id:c,tabIndex:0,...o,ref:e,style:{...i.style,animationDuration:h.current?"0s":void 0},children:d&&s})})});gd.displayName=q2;function G2(i,e){return`${i}-trigger-${e}`}function Y2(i,e){return`${i}-content-${e}`}var nZ=F2,B2=j2,H2=z2,U2=gd;const rZ=nZ,V2=_.forwardRef(({className:i,...e},t)=>T.jsx(B2,{ref:t,className:V("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",i),...e}));V2.displayName=B2.displayName;const E0=_.forwardRef(({className:i,...e},t)=>T.jsx(H2,{ref:t,className:V("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",i),...e}));E0.displayName=H2.displayName;const sZ=_.forwardRef(({className:i,...e},t)=>T.jsx(U2,{ref:t,className:V("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",i),...e}));sZ.displayName=U2.displayName;function X2({focusedEntityId:i,onFocus:e}){const t={value:123456,coordinates:[37.7749,-122.4194]};return T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"mb-6 flex items-start gap-4",children:[T.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-lg bg-primary/20",children:T.jsx(tq,{className:"h-6 w-6 text-primary"})}),T.jsxs("div",{className:"flex-1",children:[T.jsx("p",{className:"text-muted-foreground",children:"  :"}),i,T.jsx(zn,{variant:"ghost",onClick:e,className:"ml-auto",children:T.jsx(Bz,{})})]})]}),T.jsxs("div",{className:"mb-6 grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"rounded-lg bg-secondary/50 p-4",children:[T.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[T.jsx(Jz,{className:"h-4 w-4 text-primary"}),T.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:" "})]}),T.jsx("p",{className:"text-2xl font-bold text-foreground",children:t.value})]}),T.jsxs("div",{className:"rounded-lg bg-secondary/50 p-4",children:[T.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[T.jsx(pq,{className:"h-4 w-4 text-primary"}),T.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:""})]}),T.jsxs("p",{className:"text-right font-mono text-sm text-foreground",dir:"ltr",children:[t.coordinates[1].toFixed(4),", ",t.coordinates[0].toFixed(4)]})]})]}),T.jsxs("div",{className:"space-y-3",children:[T.jsx("h3",{className:"font-semibold text-foreground",children:""}),T.jsx("div",{className:"rounded-lg bg-secondary/30 p-4",children:T.jsx("p",{className:"text-sm leading-relaxed text-muted-foreground",children:"     .       ;  ,  ,       ,    ,    .        ,      .       .         ,    .                    .        ."})})]})]})}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var ZE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Re(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var tm={exports:{}},QE={},Kl,JE;function It(){if(JE)return Kl;JE=1;var i=function(e){return e&&e.Math===Math&&e};return Kl=i(typeof globalThis=="object"&&globalThis)||i(typeof window=="object"&&window)||i(typeof self=="object"&&self)||i(typeof ZE=="object"&&ZE)||i(typeof Kl=="object"&&Kl)||(function(){return this})()||Function("return this")(),Kl}var im,eC;function Ue(){return eC||(eC=1,im=function(i){try{return!!i()}catch{return!0}}),im}var nm,tC;function Ou(){if(tC)return nm;tC=1;var i=Ue();return nm=!i(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),nm}var rm,iC;function Cf(){if(iC)return rm;iC=1;var i=Ou(),e=Function.prototype,t=e.apply,n=e.call;return rm=typeof Reflect=="object"&&Reflect.apply||(i?n.bind(t):function(){return n.apply(t,arguments)}),rm}var sm,nC;function tt(){if(nC)return sm;nC=1;var i=Ou(),e=Function.prototype,t=e.call,n=i&&e.bind.bind(t,t);return sm=i?n:function(r){return function(){return t.apply(r,arguments)}},sm}var om,rC;function jr(){if(rC)return om;rC=1;var i=tt(),e=i({}.toString),t=i("".slice);return om=function(n){return t(e(n),8,-1)},om}var am,sC;function K2(){if(sC)return am;sC=1;var i=jr(),e=tt();return am=function(t){if(i(t)==="Function")return e(t)},am}var lm,oC;function Wt(){if(oC)return lm;oC=1;var i=typeof document=="object"&&document.all;return lm=typeof i>"u"&&i!==void 0?function(e){return typeof e=="function"||e===i}:function(e){return typeof e=="function"},lm}var cm={},um,aC;function Dt(){if(aC)return um;aC=1;var i=Ue();return um=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),um}var hm,lC;function Ti(){if(lC)return hm;lC=1;var i=Ou(),e=Function.prototype.call;return hm=i?e.bind(e):function(){return e.apply(e,arguments)},hm}var dm={},cC;function xx(){if(cC)return dm;cC=1;var i={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,t=e&&!i.call({1:2},1);return dm.f=t?function(r){var s=e(this,r);return!!s&&s.enumerable}:i,dm}var fm,uC;function Iu(){return uC||(uC=1,fm=function(i,e){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:e}}),fm}var pm,hC;function Tf(){if(hC)return pm;hC=1;var i=tt(),e=Ue(),t=jr(),n=Object,r=i("".split);return pm=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return t(s)==="String"?r(s,""):n(s)}:n,pm}var mm,dC;function Du(){return dC||(dC=1,mm=function(i){return i==null}),mm}var gm,fC;function No(){if(fC)return gm;fC=1;var i=Du(),e=TypeError;return gm=function(t){if(i(t))throw new e("Can't call method on "+t);return t},gm}var vm,pC;function Zn(){if(pC)return vm;pC=1;var i=Tf(),e=No();return vm=function(t){return i(e(t))},vm}var ym,mC;function di(){if(mC)return ym;mC=1;var i=Wt();return ym=function(e){return typeof e=="object"?e!==null:i(e)},ym}var _m,gC;function Lt(){return gC||(gC=1,_m={}),_m}var bm,vC;function ji(){if(vC)return bm;vC=1;var i=Lt(),e=It(),t=Wt(),n=function(r){return t(r)?r:void 0};return bm=function(r,s){return arguments.length<2?n(i[r])||n(e[r]):i[r]&&i[r][s]||e[r]&&e[r][s]},bm}var wm,yC;function zt(){if(yC)return wm;yC=1;var i=tt();return wm=i({}.isPrototypeOf),wm}var xm,_C;function El(){if(_C)return xm;_C=1;var i=It(),e=i.navigator,t=e&&e.userAgent;return xm=t?String(t):"",xm}var Sm,bC;function Pu(){if(bC)return Sm;bC=1;var i=It(),e=El(),t=i.process,n=i.Deno,r=t&&t.versions||n&&n.version,s=r&&r.v8,o,a;return s&&(o=s.split("."),a=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!a&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(a=+o[1]))),Sm=a,Sm}var Em,wC;function Cl(){if(wC)return Em;wC=1;var i=Pu(),e=Ue(),t=It(),n=t.String;return Em=!!Object.getOwnPropertySymbols&&!e(function(){var r=Symbol("symbol detection");return!n(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&i&&i<41}),Em}var Cm,xC;function Z2(){if(xC)return Cm;xC=1;var i=Cl();return Cm=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Cm}var Tm,SC;function ku(){if(SC)return Tm;SC=1;var i=ji(),e=Wt(),t=zt(),n=Z2(),r=Object;return Tm=n?function(s){return typeof s=="symbol"}:function(s){var o=i("Symbol");return e(o)&&t(o.prototype,r(s))},Tm}var Rm,EC;function Tl(){if(EC)return Rm;EC=1;var i=String;return Rm=function(e){try{return i(e)}catch{return"Object"}},Rm}var Om,CC;function Wr(){if(CC)return Om;CC=1;var i=Wt(),e=Tl(),t=TypeError;return Om=function(n){if(i(n))return n;throw new t(e(n)+" is not a function")},Om}var Im,TC;function Sx(){if(TC)return Im;TC=1;var i=Wr(),e=Du();return Im=function(t,n){var r=t[n];return e(r)?void 0:i(r)},Im}var Dm,RC;function oZ(){if(RC)return Dm;RC=1;var i=Ti(),e=Wt(),t=di(),n=TypeError;return Dm=function(r,s){var o,a;if(s==="string"&&e(o=r.toString)&&!t(a=i(o,r))||e(o=r.valueOf)&&!t(a=i(o,r))||s!=="string"&&e(o=r.toString)&&!t(a=i(o,r)))return a;throw new n("Can't convert object to primitive value")},Dm}var Pm={exports:{}},km,OC;function Rl(){return OC||(OC=1,km=!0),km}var Mm,IC;function aZ(){if(IC)return Mm;IC=1;var i=It(),e=Object.defineProperty;return Mm=function(t,n){try{e(i,t,{value:n,configurable:!0,writable:!0})}catch{i[t]=n}return n},Mm}var DC;function Ex(){if(DC)return Pm.exports;DC=1;var i=Rl(),e=It(),t=aZ(),n="__core-js_shared__",r=Pm.exports=e[n]||t(n,{});return(r.versions||(r.versions=[])).push({version:"3.44.0",mode:i?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),Pm.exports}var Am,PC;function Ol(){if(PC)return Am;PC=1;var i=Ex();return Am=function(e,t){return i[e]||(i[e]=t||{})},Am}var Nm,kC;function Tn(){if(kC)return Nm;kC=1;var i=No(),e=Object;return Nm=function(t){return e(i(t))},Nm}var Lm,MC;function qt(){if(MC)return Lm;MC=1;var i=tt(),e=Tn(),t=i({}.hasOwnProperty);return Lm=Object.hasOwn||function(r,s){return t(e(r),s)},Lm}var Fm,AC;function Rf(){if(AC)return Fm;AC=1;var i=tt(),e=0,t=Math.random(),n=i(1.1.toString);return Fm=function(r){return"Symbol("+(r===void 0?"":r)+")_"+n(++e+t,36)},Fm}var $m,NC;function Gt(){if(NC)return $m;NC=1;var i=It(),e=Ol(),t=qt(),n=Rf(),r=Cl(),s=Z2(),o=i.Symbol,a=e("wks"),l=s?o.for||o:o&&o.withoutSetter||n;return $m=function(c){return t(a,c)||(a[c]=r&&t(o,c)?o[c]:l("Symbol."+c)),a[c]},$m}var jm,LC;function Q2(){if(LC)return jm;LC=1;var i=Ti(),e=di(),t=ku(),n=Sx(),r=oZ(),s=Gt(),o=TypeError,a=s("toPrimitive");return jm=function(l,c){if(!e(l)||t(l))return l;var u=n(l,a),h;if(u){if(c===void 0&&(c="default"),h=i(u,l,c),!e(h)||t(h))return h;throw new o("Can't convert object to primitive value")}return c===void 0&&(c="number"),r(l,c)},jm}var Wm,FC;function Cx(){if(FC)return Wm;FC=1;var i=Q2(),e=ku();return Wm=function(t){var n=i(t,"string");return e(n)?n:n+""},Wm}var zm,$C;function J2(){if($C)return zm;$C=1;var i=It(),e=di(),t=i.document,n=e(t)&&e(t.createElement);return zm=function(r){return n?t.createElement(r):{}},zm}var qm,jC;function e$(){if(jC)return qm;jC=1;var i=Dt(),e=Ue(),t=J2();return qm=!i&&!e(function(){return Object.defineProperty(t("div"),"a",{get:function(){return 7}}).a!==7}),qm}var WC;function Of(){if(WC)return cm;WC=1;var i=Dt(),e=Ti(),t=xx(),n=Iu(),r=Zn(),s=Cx(),o=qt(),a=e$(),l=Object.getOwnPropertyDescriptor;return cm.f=i?l:function(u,h){if(u=r(u),h=s(h),a)try{return l(u,h)}catch{}if(o(u,h))return n(!e(t.f,u,h),u[h])},cm}var Gm,zC;function lZ(){if(zC)return Gm;zC=1;var i=Ue(),e=Wt(),t=/#|\.prototype\./,n=function(l,c){var u=s[r(l)];return u===a?!0:u===o?!1:e(c)?i(c):!!c},r=n.normalize=function(l){return String(l).replace(t,".").toLowerCase()},s=n.data={},o=n.NATIVE="N",a=n.POLYFILL="P";return Gm=n,Gm}var Ym,qC;function If(){if(qC)return Ym;qC=1;var i=K2(),e=Wr(),t=Ou(),n=i(i.bind);return Ym=function(r,s){return e(r),s===void 0?r:t?n(r,s):function(){return r.apply(s,arguments)}},Ym}var Bm={},Hm,GC;function t$(){if(GC)return Hm;GC=1;var i=Dt(),e=Ue();return Hm=i&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Hm}var Um,YC;function zr(){if(YC)return Um;YC=1;var i=di(),e=String,t=TypeError;return Um=function(n){if(i(n))return n;throw new t(e(n)+" is not an object")},Um}var BC;function en(){if(BC)return Bm;BC=1;var i=Dt(),e=e$(),t=t$(),n=zr(),r=Cx(),s=TypeError,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",u="writable";return Bm.f=i?t?function(d,f,p){if(n(d),f=r(f),n(p),typeof d=="function"&&f==="prototype"&&"value"in p&&u in p&&!p[u]){var m=a(d,f);m&&m[u]&&(d[f]=p.value,p={configurable:c in p?p[c]:m[c],enumerable:l in p?p[l]:m[l],writable:!1})}return o(d,f,p)}:o:function(d,f,p){if(n(d),f=r(f),n(p),e)try{return o(d,f,p)}catch{}if("get"in p||"set"in p)throw new s("Accessors not supported");return"value"in p&&(d[f]=p.value),d},Bm}var Vm,HC;function Il(){if(HC)return Vm;HC=1;var i=Dt(),e=en(),t=Iu();return Vm=i?function(n,r,s){return e.f(n,r,t(1,s))}:function(n,r,s){return n[r]=s,n},Vm}var Xm,UC;function pe(){if(UC)return Xm;UC=1;var i=It(),e=Cf(),t=K2(),n=Wt(),r=Of().f,s=lZ(),o=Lt(),a=If(),l=Il(),c=qt(),u=function(h){var d=function(f,p,m){if(this instanceof d){switch(arguments.length){case 0:return new h;case 1:return new h(f);case 2:return new h(f,p)}return new h(f,p,m)}return e(h,this,arguments)};return d.prototype=h.prototype,d};return Xm=function(h,d){var f=h.target,p=h.global,m=h.stat,g=h.proto,v=p?i:m?i[f]:i[f]&&i[f].prototype,y=p?o:o[f]||l(o,f,{})[f],w=y.prototype,b,x,C,E,S,R,I,k,M;for(E in d)b=s(p?E:f+(m?".":"#")+E,h.forced),x=!b&&v&&c(v,E),R=y[E],x&&(h.dontCallGetSet?(M=r(v,E),I=M&&M.value):I=v[E]),S=x&&I?I:d[E],!(!b&&!g&&typeof R==typeof S)&&(h.bind&&x?k=a(S,i):h.wrap&&x?k=u(S):g&&n(S)?k=t(S):k=S,(h.sham||S&&S.sham||R&&R.sham)&&l(k,"sham",!0),l(y,E,k),g&&(C=f+"Prototype",c(o,C)||l(o,C,{}),l(o[C],E,S),h.real&&w&&(b||!w[E])&&l(w,E,S)))},Xm}var VC;function cZ(){if(VC)return QE;VC=1;var i=pe(),e=Dt(),t=en().f;return i({target:"Object",stat:!0,forced:Object.defineProperty!==t,sham:!e},{defineProperty:t}),QE}var XC;function uZ(){if(XC)return tm.exports;XC=1,cZ();var i=Lt(),e=i.Object,t=tm.exports=function(r,s,o){return e.defineProperty(r,s,o)};return e.defineProperty.sham&&(t.sham=!0),tm.exports}var Km,KC;function i$(){if(KC)return Km;KC=1;var i=uZ();return Km=i,Km}var Zm,ZC;function hZ(){if(ZC)return Zm;ZC=1;var i=i$();return Zm=i,Zm}var Qm,QC;function dZ(){if(QC)return Qm;QC=1;var i=hZ();return Qm=i,Qm}var Jm,JC;function fZ(){return JC||(JC=1,Jm=dZ()),Jm}var pZ=fZ(),mZ=Re(pZ),eT={},eg,tT;function Lo(){if(tT)return eg;tT=1;var i=jr();return eg=Array.isArray||function(t){return i(t)==="Array"},eg}var tg,iT;function gZ(){if(iT)return tg;iT=1;var i=Math.ceil,e=Math.floor;return tg=Math.trunc||function(n){var r=+n;return(r>0?e:i)(r)},tg}var ig,nT;function Dl(){if(nT)return ig;nT=1;var i=gZ();return ig=function(e){var t=+e;return t!==t||t===0?0:i(t)},ig}var ng,rT;function n$(){if(rT)return ng;rT=1;var i=Dl(),e=Math.min;return ng=function(t){var n=i(t);return n>0?e(n,9007199254740991):0},ng}var rg,sT;function Ts(){if(sT)return rg;sT=1;var i=n$();return rg=function(e){return i(e.length)},rg}var sg,oT;function r$(){if(oT)return sg;oT=1;var i=TypeError,e=9007199254740991;return sg=function(t){if(t>e)throw i("Maximum allowed index exceeded");return t},sg}var og,aT;function Df(){if(aT)return og;aT=1;var i=Dt(),e=en(),t=Iu();return og=function(n,r,s){i?e.f(n,r,t(0,s)):n[r]=s},og}var ag,lT;function Tx(){if(lT)return ag;lT=1;var i=Gt(),e=i("toStringTag"),t={};return t[e]="z",ag=String(t)==="[object z]",ag}var lg,cT;function Rs(){if(cT)return lg;cT=1;var i=Tx(),e=Wt(),t=jr(),n=Gt(),r=n("toStringTag"),s=Object,o=t((function(){return arguments})())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return lg=i?t:function(l){var c,u,h;return l===void 0?"Undefined":l===null?"Null":typeof(u=a(c=s(l),r))=="string"?u:o?t(c):(h=t(c))==="Object"&&e(c.callee)?"Arguments":h},lg}var cg,uT;function vZ(){if(uT)return cg;uT=1;var i=tt(),e=Wt(),t=Ex(),n=i(Function.toString);return e(t.inspectSource)||(t.inspectSource=function(r){return n(r)}),cg=t.inspectSource,cg}var ug,hT;function s$(){if(hT)return ug;hT=1;var i=tt(),e=Ue(),t=Wt(),n=Rs(),r=ji(),s=vZ(),o=function(){},a=r("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=i(l.exec),u=!l.test(o),h=function(p){if(!t(p))return!1;try{return a(o,[],p),!0}catch{return!1}},d=function(p){if(!t(p))return!1;switch(n(p)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return u||!!c(l,s(p))}catch{return!0}};return d.sham=!0,ug=!a||e(function(){var f;return h(h.call)||!h(Object)||!h(function(){f=!0})||f})?d:h,ug}var hg,dT;function yZ(){if(dT)return hg;dT=1;var i=Lo(),e=s$(),t=di(),n=Gt(),r=n("species"),s=Array;return hg=function(o){var a;return i(o)&&(a=o.constructor,e(a)&&(a===s||i(a.prototype))?a=void 0:t(a)&&(a=a[r],a===null&&(a=void 0))),a===void 0?s:a},hg}var dg,fT;function Rx(){if(fT)return dg;fT=1;var i=yZ();return dg=function(e,t){return new(i(e))(t===0?0:t)},dg}var fg,pT;function Mu(){if(pT)return fg;pT=1;var i=Ue(),e=Gt(),t=Pu(),n=e("species");return fg=function(r){return t>=51||!i(function(){var s=[],o=s.constructor={};return o[n]=function(){return{foo:1}},s[r](Boolean).foo!==1})},fg}var mT;function o$(){if(mT)return eT;mT=1;var i=pe(),e=Ue(),t=Lo(),n=di(),r=Tn(),s=Ts(),o=r$(),a=Df(),l=Rx(),c=Mu(),u=Gt(),h=Pu(),d=u("isConcatSpreadable"),f=h>=51||!e(function(){var g=[];return g[d]=!1,g.concat()[0]!==g}),p=function(g){if(!n(g))return!1;var v=g[d];return v!==void 0?!!v:t(g)},m=!f||!c("concat");return i({target:"Array",proto:!0,arity:1,forced:m},{concat:function(v){var y=r(this),w=l(y,0),b=0,x,C,E,S,R;for(x=-1,E=arguments.length;x<E;x++)if(R=x===-1?y:arguments[x],p(R))for(S=s(R),o(b+S),C=0;C<S;C++,b++)C in R&&a(w,b,R[C]);else o(b+1),a(w,b++,R);return w.length=b,w}}),eT}var gT={},vT={},pg,yT;function Os(){if(yT)return pg;yT=1;var i=Rs(),e=String;return pg=function(t){if(i(t)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(t)},pg}var mg={},gg,_T;function Ox(){if(_T)return gg;_T=1;var i=Dl(),e=Math.max,t=Math.min;return gg=function(n,r){var s=i(n);return s<0?e(s+r,0):t(s,r)},gg}var vg,bT;function _Z(){if(bT)return vg;bT=1;var i=Zn(),e=Ox(),t=Ts(),n=function(r){return function(s,o,a){var l=i(s),c=t(l);if(c===0)return!r&&-1;var u=e(a,c),h;if(r&&o!==o){for(;c>u;)if(h=l[u++],h!==h)return!0}else for(;c>u;u++)if((r||u in l)&&l[u]===o)return r||u||0;return!r&&-1}};return vg={includes:n(!0),indexOf:n(!1)},vg}var yg,wT;function Au(){return wT||(wT=1,yg={}),yg}var _g,xT;function a$(){if(xT)return _g;xT=1;var i=tt(),e=qt(),t=Zn(),n=_Z().indexOf,r=Au(),s=i([].push);return _g=function(o,a){var l=t(o),c=0,u=[],h;for(h in l)!e(r,h)&&e(l,h)&&s(u,h);for(;a.length>c;)e(l,h=a[c++])&&(~n(u,h)||s(u,h));return u},_g}var bg,ST;function Ix(){return ST||(ST=1,bg=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),bg}var wg,ET;function Pf(){if(ET)return wg;ET=1;var i=a$(),e=Ix();return wg=Object.keys||function(n){return i(n,e)},wg}var CT;function Dx(){if(CT)return mg;CT=1;var i=Dt(),e=t$(),t=en(),n=zr(),r=Zn(),s=Pf();return mg.f=i&&!e?Object.defineProperties:function(a,l){n(a);for(var c=r(l),u=s(l),h=u.length,d=0,f;h>d;)t.f(a,f=u[d++],c[f]);return a},mg}var xg,TT;function bZ(){if(TT)return xg;TT=1;var i=ji();return xg=i("document","documentElement"),xg}var Sg,RT;function kf(){if(RT)return Sg;RT=1;var i=Ol(),e=Rf(),t=i("keys");return Sg=function(n){return t[n]||(t[n]=e(n))},Sg}var Eg,OT;function Nu(){if(OT)return Eg;OT=1;var i=zr(),e=Dx(),t=Ix(),n=Au(),r=bZ(),s=J2(),o=kf(),a=">",l="<",c="prototype",u="script",h=o("IE_PROTO"),d=function(){},f=function(y){return l+u+a+y+l+"/"+u+a},p=function(y){y.write(f("")),y.close();var w=y.parentWindow.Object;return y=null,w},m=function(){var y=s("iframe"),w="java"+u+":",b;return y.style.display="none",r.appendChild(y),y.src=String(w),b=y.contentWindow.document,b.open(),b.write(f("document.F=Object")),b.close(),b.F},g,v=function(){try{g=new ActiveXObject("htmlfile")}catch{}v=typeof document<"u"?document.domain&&g?p(g):m():p(g);for(var y=t.length;y--;)delete v[c][t[y]];return v()};return n[h]=!0,Eg=Object.create||function(w,b){var x;return w!==null?(d[c]=i(w),x=new d,d[c]=null,x[h]=w):x=v(),b===void 0?x:e.f(x,b)},Eg}var Cg={},IT;function Mf(){if(IT)return Cg;IT=1;var i=a$(),e=Ix(),t=e.concat("length","prototype");return Cg.f=Object.getOwnPropertyNames||function(r){return i(r,t)},Cg}var Tg={},Rg,DT;function Pl(){if(DT)return Rg;DT=1;var i=tt();return Rg=i([].slice),Rg}var PT;function l$(){if(PT)return Tg;PT=1;var i=jr(),e=Zn(),t=Mf().f,n=Pl(),r=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(o){try{return t(o)}catch{return n(r)}};return Tg.f=function(a){return r&&i(a)==="Window"?s(a):t(e(a))},Tg}var Og={},kT;function Af(){return kT||(kT=1,Og.f=Object.getOwnPropertySymbols),Og}var Ig,MT;function Lu(){if(MT)return Ig;MT=1;var i=Il();return Ig=function(e,t,n,r){return r&&r.enumerable?e[t]=n:i(e,t,n),e},Ig}var Dg,AT;function Px(){if(AT)return Dg;AT=1;var i=en();return Dg=function(e,t,n){return i.f(e,t,n)},Dg}var Pg={},NT;function Nf(){if(NT)return Pg;NT=1;var i=Gt();return Pg.f=i,Pg}var kg,LT;function mt(){if(LT)return kg;LT=1;var i=Lt(),e=qt(),t=Nf(),n=en().f;return kg=function(r){var s=i.Symbol||(i.Symbol={});e(s,r)||n(s,r,{value:t.f(r)})},kg}var Mg,FT;function c$(){if(FT)return Mg;FT=1;var i=Ti(),e=ji(),t=Gt(),n=Lu();return Mg=function(){var r=e("Symbol"),s=r&&r.prototype,o=s&&s.valueOf,a=t("toPrimitive");s&&!s[a]&&n(s,a,function(l){return i(o,this)},{arity:1})},Mg}var Ag,$T;function wZ(){if($T)return Ag;$T=1;var i=Tx(),e=Rs();return Ag=i?{}.toString:function(){return"[object "+e(this)+"]"},Ag}var Ng,jT;function Fo(){if(jT)return Ng;jT=1;var i=Tx(),e=en().f,t=Il(),n=qt(),r=wZ(),s=Gt(),o=s("toStringTag");return Ng=function(a,l,c,u){var h=c?a:a&&a.prototype;h&&(n(h,o)||e(h,o,{configurable:!0,value:l}),u&&!i&&t(h,"toString",r))},Ng}var Lg,WT;function xZ(){if(WT)return Lg;WT=1;var i=It(),e=Wt(),t=i.WeakMap;return Lg=e(t)&&/native code/.test(String(t)),Lg}var Fg,zT;function Fu(){if(zT)return Fg;zT=1;var i=xZ(),e=It(),t=di(),n=Il(),r=qt(),s=Ex(),o=kf(),a=Au(),l="Object already initialized",c=e.TypeError,u=e.WeakMap,h,d,f,p=function(y){return f(y)?d(y):h(y,{})},m=function(y){return function(w){var b;if(!t(w)||(b=d(w)).type!==y)throw new c("Incompatible receiver, "+y+" required");return b}};if(i||s.state){var g=s.state||(s.state=new u);g.get=g.get,g.has=g.has,g.set=g.set,h=function(y,w){if(g.has(y))throw new c(l);return w.facade=y,g.set(y,w),w},d=function(y){return g.get(y)||{}},f=function(y){return g.has(y)}}else{var v=o("state");a[v]=!0,h=function(y,w){if(r(y,v))throw new c(l);return w.facade=y,n(y,v,w),w},d=function(y){return r(y,v)?y[v]:{}},f=function(y){return r(y,v)}}return Fg={set:h,get:d,has:f,enforce:p,getterFor:m},Fg}var $g,qT;function kl(){if(qT)return $g;qT=1;var i=If(),e=tt(),t=Tf(),n=Tn(),r=Ts(),s=Rx(),o=e([].push),a=function(l){var c=l===1,u=l===2,h=l===3,d=l===4,f=l===6,p=l===7,m=l===5||f;return function(g,v,y,w){for(var b=n(g),x=t(b),C=r(x),E=i(v,y),S=0,R=w||s,I=c?R(g,C):u||p?R(g,0):void 0,k,M;C>S;S++)if((m||S in x)&&(k=x[S],M=E(k,S,b),l))if(c)I[S]=M;else if(M)switch(l){case 3:return!0;case 5:return k;case 6:return S;case 2:o(I,k)}else switch(l){case 4:return!1;case 7:o(I,k)}return f?-1:h||d?d:I}};return $g={forEach:a(0),map:a(1),filter:a(2),some:a(3),every:a(4),find:a(5),findIndex:a(6),filterReject:a(7)},$g}var GT;function SZ(){if(GT)return vT;GT=1;var i=pe(),e=It(),t=Ti(),n=tt(),r=Rl(),s=Dt(),o=Cl(),a=Ue(),l=qt(),c=zt(),u=zr(),h=Zn(),d=Cx(),f=Os(),p=Iu(),m=Nu(),g=Pf(),v=Mf(),y=l$(),w=Af(),b=Of(),x=en(),C=Dx(),E=xx(),S=Lu(),R=Px(),I=Ol(),k=kf(),M=Au(),N=Rf(),F=Gt(),q=Nf(),A=mt(),z=c$(),P=Fo(),G=Fu(),U=kl().forEach,K=k("hidden"),D="Symbol",L="prototype",$=G.set,j=G.getterFor(D),B=Object[L],W=e.Symbol,Z=W&&W[L],J=e.RangeError,ae=e.TypeError,et=e.QObject,it=b.f,he=x.f,rt=y.f,gt=E.f,Tt=n([].push),vt=I("symbols"),Ge=I("op-symbols"),zi=I("wks"),ri=!et||!et[L]||!et[L].findChild,Yt=function($e,ve,Ce){var Ee=it(B,ve);Ee&&delete B[ve],he($e,ve,Ce),Ee&&$e!==B&&he(B,ve,Ee)},Kt=s&&a(function(){return m(he({},"a",{get:function(){return he(this,"a",{value:7}).a}})).a!==7})?Yt:he,Ve=function($e,ve){var Ce=vt[$e]=m(Z);return $(Ce,{type:D,tag:$e,description:ve}),s||(Ce.description=ve),Ce},qi=function(ve,Ce,Ee){ve===B&&qi(Ge,Ce,Ee),u(ve);var qe=d(Ce);return u(Ee),l(vt,qe)?(Ee.enumerable?(l(ve,K)&&ve[K][qe]&&(ve[K][qe]=!1),Ee=m(Ee,{enumerable:p(0,!1)})):(l(ve,K)||he(ve,K,p(1,m(null))),ve[K][qe]=!0),Kt(ve,qe,Ee)):he(ve,qe,Ee)},er=function(ve,Ce){u(ve);var Ee=h(Ce),qe=g(Ee).concat(As(Ee));return U(qe,function(xt){(!s||t(On,Ee,xt))&&qi(ve,xt,Ee[xt])}),ve},Br=function(ve,Ce){return Ce===void 0?m(ve):er(m(ve),Ce)},On=function(ve){var Ce=d(ve),Ee=t(gt,this,Ce);return this===B&&l(vt,Ce)&&!l(Ge,Ce)?!1:Ee||!l(this,Ce)||!l(vt,Ce)||l(this,K)&&this[K][Ce]?Ee:!0},Uo=function(ve,Ce){var Ee=h(ve),qe=d(Ce);if(!(Ee===B&&l(vt,qe)&&!l(Ge,qe))){var xt=it(Ee,qe);return xt&&l(vt,qe)&&!(l(Ee,K)&&Ee[K][qe])&&(xt.enumerable=!0),xt}},Ms=function(ve){var Ce=rt(h(ve)),Ee=[];return U(Ce,function(qe){!l(vt,qe)&&!l(M,qe)&&Tt(Ee,qe)}),Ee},As=function($e){var ve=$e===B,Ce=rt(ve?Ge:h($e)),Ee=[];return U(Ce,function(qe){l(vt,qe)&&(!ve||l(B,qe))&&Tt(Ee,vt[qe])}),Ee};return o||(W=function(){if(c(Z,this))throw new ae("Symbol is not a constructor");var ve=!arguments.length||arguments[0]===void 0?void 0:f(arguments[0]),Ce=N(ve),Ee=function(qe){var xt=this===void 0?e:this;xt===B&&t(Ee,Ge,qe),l(xt,K)&&l(xt[K],Ce)&&(xt[K][Ce]=!1);var Ns=p(1,qe);try{Kt(xt,Ce,Ns)}catch(me){if(!(me instanceof J))throw me;Yt(xt,Ce,Ns)}};return s&&ri&&Kt(B,Ce,{configurable:!0,set:Ee}),Ve(Ce,ve)},Z=W[L],S(Z,"toString",function(){return j(this).tag}),S(W,"withoutSetter",function($e){return Ve(N($e),$e)}),E.f=On,x.f=qi,C.f=er,b.f=Uo,v.f=y.f=Ms,w.f=As,q.f=function($e){return Ve(F($e),$e)},s&&(R(Z,"description",{configurable:!0,get:function(){return j(this).description}}),r||S(B,"propertyIsEnumerable",On,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:W}),U(g(zi),function($e){A($e)}),i({target:D,stat:!0,forced:!o},{useSetter:function(){ri=!0},useSimple:function(){ri=!1}}),i({target:"Object",stat:!0,forced:!o,sham:!s},{create:Br,defineProperty:qi,defineProperties:er,getOwnPropertyDescriptor:Uo}),i({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ms}),z(),P(W,D),M[K]=!0,vT}var YT={},jg,BT;function u$(){if(BT)return jg;BT=1;var i=Cl();return jg=i&&!!Symbol.for&&!!Symbol.keyFor,jg}var HT;function EZ(){if(HT)return YT;HT=1;var i=pe(),e=ji(),t=qt(),n=Os(),r=Ol(),s=u$(),o=r("string-to-symbol-registry"),a=r("symbol-to-string-registry");return i({target:"Symbol",stat:!0,forced:!s},{for:function(l){var c=n(l);if(t(o,c))return o[c];var u=e("Symbol")(c);return o[c]=u,a[u]=c,u}}),YT}var UT={},VT;function CZ(){if(VT)return UT;VT=1;var i=pe(),e=qt(),t=ku(),n=Tl(),r=Ol(),s=u$(),o=r("symbol-to-string-registry");return i({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!t(l))throw new TypeError(n(l)+" is not a symbol");if(e(o,l))return o[l]}}),UT}var XT={},Wg,KT;function TZ(){if(KT)return Wg;KT=1;var i=tt(),e=Lo(),t=Wt(),n=jr(),r=Os(),s=i([].push);return Wg=function(o){if(t(o))return o;if(e(o)){for(var a=o.length,l=[],c=0;c<a;c++){var u=o[c];typeof u=="string"?s(l,u):(typeof u=="number"||n(u)==="Number"||n(u)==="String")&&s(l,r(u))}var h=l.length,d=!0;return function(f,p){if(d)return d=!1,p;if(e(this))return p;for(var m=0;m<h;m++)if(l[m]===f)return p}}},Wg}var ZT;function h$(){if(ZT)return XT;ZT=1;var i=pe(),e=ji(),t=Cf(),n=Ti(),r=tt(),s=Ue(),o=Wt(),a=ku(),l=Pl(),c=TZ(),u=Cl(),h=String,d=e("JSON","stringify"),f=r(/./.exec),p=r("".charAt),m=r("".charCodeAt),g=r("".replace),v=r(1.1.toString),y=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,b=/^[\uDC00-\uDFFF]$/,x=!u||s(function(){var R=e("Symbol")("stringify detection");return d([R])!=="[null]"||d({a:R})!=="{}"||d(Object(R))!=="{}"}),C=s(function(){return d("\uDF06\uD834")!=='"\\udf06\\ud834"'||d("\uDEAD")!=='"\\udead"'}),E=function(R,I){var k=l(arguments),M=c(I);if(!(!o(M)&&(R===void 0||a(R))))return k[1]=function(N,F){if(o(M)&&(F=n(M,this,h(N),F)),!a(F))return F},t(d,null,k)},S=function(R,I,k){var M=p(k,I-1),N=p(k,I+1);return f(w,R)&&!f(b,N)||f(b,R)&&!f(w,M)?"\\u"+v(m(R,0),16):R};return d&&i({target:"JSON",stat:!0,arity:3,forced:x||C},{stringify:function(I,k,M){var N=l(arguments),F=t(x?E:d,null,N);return C&&typeof F=="string"?g(F,y,S):F}}),XT}var QT={},JT;function RZ(){if(JT)return QT;JT=1;var i=pe(),e=Cl(),t=Ue(),n=Af(),r=Tn(),s=!e||t(function(){n.f(1)});return i({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(a){var l=n.f;return l?l(r(a)):[]}}),QT}var eR;function d$(){return eR||(eR=1,SZ(),EZ(),CZ(),h$(),RZ()),gT}var tR={},iR;function f$(){if(iR)return tR;iR=1;var i=mt();return i("asyncDispose"),tR}var nR={},rR;function OZ(){if(rR)return nR;rR=1;var i=mt();return i("asyncIterator"),nR}var sR={},oR;function p$(){if(oR)return sR;oR=1;var i=mt();return i("dispose"),sR}var aR={},lR;function IZ(){if(lR)return aR;lR=1;var i=mt();return i("hasInstance"),aR}var cR={},uR;function DZ(){if(uR)return cR;uR=1;var i=mt();return i("isConcatSpreadable"),cR}var hR={},dR;function m$(){if(dR)return hR;dR=1;var i=mt();return i("iterator"),hR}var fR={},pR;function PZ(){if(pR)return fR;pR=1;var i=mt();return i("match"),fR}var mR={},gR;function kZ(){if(gR)return mR;gR=1;var i=mt();return i("matchAll"),mR}var vR={},yR;function MZ(){if(yR)return vR;yR=1;var i=mt();return i("replace"),vR}var _R={},bR;function AZ(){if(bR)return _R;bR=1;var i=mt();return i("search"),_R}var wR={},xR;function NZ(){if(xR)return wR;xR=1;var i=mt();return i("species"),wR}var SR={},ER;function LZ(){if(ER)return SR;ER=1;var i=mt();return i("split"),SR}var CR={},TR;function g$(){if(TR)return CR;TR=1;var i=mt(),e=c$();return i("toPrimitive"),e(),CR}var RR={},OR;function FZ(){if(OR)return RR;OR=1;var i=ji(),e=mt(),t=Fo();return e("toStringTag"),t(i("Symbol"),"Symbol"),RR}var IR={},DR;function $Z(){if(DR)return IR;DR=1;var i=mt();return i("unscopables"),IR}var PR={},kR;function jZ(){if(kR)return PR;kR=1;var i=It(),e=Fo();return e(i.JSON,"JSON",!0),PR}var zg,MR;function WZ(){if(MR)return zg;MR=1,o$(),d$(),f$(),OZ(),p$(),IZ(),DZ(),m$(),PZ(),kZ(),MZ(),AZ(),NZ(),LZ(),g$(),FZ(),$Z(),jZ();var i=Lt();return zg=i.Symbol,zg}var AR={},qg,NR;function zZ(){return NR||(NR=1,qg=function(){}),qg}var Gg,LR;function Ml(){return LR||(LR=1,Gg={}),Gg}var Yg,FR;function qZ(){if(FR)return Yg;FR=1;var i=Dt(),e=qt(),t=Function.prototype,n=i&&Object.getOwnPropertyDescriptor,r=e(t,"name"),s=r&&(function(){}).name==="something",o=r&&(!i||i&&n(t,"name").configurable);return Yg={EXISTS:r,PROPER:s,CONFIGURABLE:o},Yg}var Bg,$R;function GZ(){if($R)return Bg;$R=1;var i=Ue();return Bg=!i(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Bg}var Hg,jR;function v$(){if(jR)return Hg;jR=1;var i=qt(),e=Wt(),t=Tn(),n=kf(),r=GZ(),s=n("IE_PROTO"),o=Object,a=o.prototype;return Hg=r?o.getPrototypeOf:function(l){var c=t(l);if(i(c,s))return c[s];var u=c.constructor;return e(u)&&c instanceof u?u.prototype:c instanceof o?a:null},Hg}var Ug,WR;function y$(){if(WR)return Ug;WR=1;var i=Ue(),e=Wt(),t=di(),n=Nu(),r=v$(),s=Lu(),o=Gt(),a=Rl(),l=o("iterator"),c=!1,u,h,d;[].keys&&(d=[].keys(),"next"in d?(h=r(r(d)),h!==Object.prototype&&(u=h)):c=!0);var f=!t(u)||i(function(){var p={};return u[l].call(p)!==p});return f?u={}:a&&(u=n(u)),e(u[l])||s(u,l,function(){return this}),Ug={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:c},Ug}var Vg,zR;function YZ(){if(zR)return Vg;zR=1;var i=y$().IteratorPrototype,e=Nu(),t=Iu(),n=Fo(),r=Ml(),s=function(){return this};return Vg=function(o,a,l,c){var u=a+" Iterator";return o.prototype=e(i,{next:t(+!c,l)}),n(o,u,!1,!0),r[u]=s,o},Vg}var Xg,qR;function BZ(){if(qR)return Xg;qR=1;var i=tt(),e=Wr();return Xg=function(t,n,r){try{return i(e(Object.getOwnPropertyDescriptor(t,n)[r]))}catch{}},Xg}var Kg,GR;function HZ(){if(GR)return Kg;GR=1;var i=di();return Kg=function(e){return i(e)||e===null},Kg}var Zg,YR;function UZ(){if(YR)return Zg;YR=1;var i=HZ(),e=String,t=TypeError;return Zg=function(n){if(i(n))return n;throw new t("Can't set "+e(n)+" as a prototype")},Zg}var Qg,BR;function VZ(){if(BR)return Qg;BR=1;var i=BZ(),e=di(),t=No(),n=UZ();return Qg=Object.setPrototypeOf||("__proto__"in{}?(function(){var r=!1,s={},o;try{o=i(Object.prototype,"__proto__","set"),o(s,[]),r=s instanceof Array}catch{}return function(l,c){return t(l),n(c),e(l)&&(r?o(l,c):l.__proto__=c),l}})():void 0),Qg}var Jg,HR;function kx(){if(HR)return Jg;HR=1;var i=pe(),e=Ti(),t=Rl(),n=qZ(),r=Wt(),s=YZ(),o=v$(),a=VZ(),l=Fo(),c=Il(),u=Lu(),h=Gt(),d=Ml(),f=y$(),p=n.PROPER,m=n.CONFIGURABLE,g=f.IteratorPrototype,v=f.BUGGY_SAFARI_ITERATORS,y=h("iterator"),w="keys",b="values",x="entries",C=function(){return this};return Jg=function(E,S,R,I,k,M,N){s(R,S,I);var F=function($){if($===k&&G)return G;if(!v&&$&&$ in z)return z[$];switch($){case w:return function(){return new R(this,$)};case b:return function(){return new R(this,$)};case x:return function(){return new R(this,$)}}return function(){return new R(this)}},q=S+" Iterator",A=!1,z=E.prototype,P=z[y]||z["@@iterator"]||k&&z[k],G=!v&&P||F(k),U=S==="Array"&&z.entries||P,K,D,L;if(U&&(K=o(U.call(new E)),K!==Object.prototype&&K.next&&(!t&&o(K)!==g&&(a?a(K,g):r(K[y])||u(K,y,C)),l(K,q,!0,!0),t&&(d[q]=C))),p&&k===b&&P&&P.name!==b&&(!t&&m?c(z,"name",b):(A=!0,G=function(){return e(P,this)})),k)if(D={values:F(b),keys:M?G:F(w),entries:F(x)},N)for(L in D)(v||A||!(L in z))&&u(z,L,D[L]);else i({target:S,proto:!0,forced:v||A},D);return(!t||N)&&z[y]!==G&&u(z,y,G,{name:k}),d[S]=G,D},Jg}var ev,UR;function Mx(){return UR||(UR=1,ev=function(i,e){return{value:i,done:e}}),ev}var tv,VR;function Is(){if(VR)return tv;VR=1;var i=Zn(),e=zZ(),t=Ml(),n=Fu(),r=en().f,s=kx(),o=Mx(),a=Rl(),l=Dt(),c="Array Iterator",u=n.set,h=n.getterFor(c);tv=s(Array,"Array",function(f,p){u(this,{type:c,target:i(f),index:0,kind:p})},function(){var f=h(this),p=f.target,m=f.index++;if(!p||m>=p.length)return f.target=null,o(void 0,!0);switch(f.kind){case"keys":return o(m,!1);case"values":return o(p[m],!1)}return o([m,p[m]],!1)},"values");var d=t.Arguments=t.Array;if(e("keys"),e("values"),e("entries"),!a&&l&&d.name!=="values")try{r(d,"name",{value:"values"})}catch{}return tv}var iv,XR;function XZ(){return XR||(XR=1,iv={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),iv}var KR;function Ds(){if(KR)return AR;KR=1,Is();var i=XZ(),e=It(),t=Fo(),n=Ml();for(var r in i)t(e[r],r),n[r]=n.Array;return AR}var nv,ZR;function _$(){if(ZR)return nv;ZR=1;var i=WZ();return Ds(),nv=i,nv}var QR={},JR;function KZ(){if(JR)return QR;JR=1;var i=Gt(),e=en().f,t=i("metadata"),n=Function.prototype;return n[t]===void 0&&e(n,t,{value:null}),QR}var eO={},tO;function ZZ(){return tO||(tO=1,f$()),eO}var iO={},nO;function QZ(){return nO||(nO=1,p$()),iO}var rO={},sO;function JZ(){if(sO)return rO;sO=1;var i=mt();return i("metadata"),rO}var rv,oO;function e7(){if(oO)return rv;oO=1;var i=_$();return KZ(),ZZ(),QZ(),JZ(),rv=i,rv}var aO={},sv,lO;function b$(){if(lO)return sv;lO=1;var i=ji(),e=tt(),t=i("Symbol"),n=t.keyFor,r=e(t.prototype.valueOf);return sv=t.isRegisteredSymbol||function(o){try{return n(r(o))!==void 0}catch{return!1}},sv}var cO;function t7(){if(cO)return aO;cO=1;var i=pe(),e=b$();return i({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),aO}var uO={},ov,hO;function w$(){if(hO)return ov;hO=1;for(var i=Ol(),e=ji(),t=tt(),n=ku(),r=Gt(),s=e("Symbol"),o=s.isWellKnownSymbol,a=e("Object","getOwnPropertyNames"),l=t(s.prototype.valueOf),c=i("wks"),u=0,h=a(s),d=h.length;u<d;u++)try{var f=h[u];n(s[f])&&r(f)}catch{}return ov=function(m){if(o&&o(m))return!0;try{for(var g=l(m),v=0,y=a(c),w=y.length;v<w;v++)if(c[y[v]]==g)return!0}catch{}return!1},ov}var dO;function i7(){if(dO)return uO;dO=1;var i=pe(),e=w$();return i({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),uO}var fO={},pO;function n7(){if(pO)return fO;pO=1;var i=mt();return i("customMatcher"),fO}var mO={},gO;function r7(){if(gO)return mO;gO=1;var i=mt();return i("observable"),mO}var vO={},yO;function s7(){if(yO)return vO;yO=1;var i=pe(),e=b$();return i({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),vO}var _O={},bO;function o7(){if(bO)return _O;bO=1;var i=pe(),e=w$();return i({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),_O}var wO={},xO;function a7(){if(xO)return wO;xO=1;var i=mt();return i("matcher"),wO}var SO={},EO;function l7(){if(EO)return SO;EO=1;var i=mt();return i("metadataKey"),SO}var CO={},TO;function c7(){if(TO)return CO;TO=1;var i=mt();return i("patternMatch"),CO}var RO={},OO;function u7(){if(OO)return RO;OO=1;var i=mt();return i("replaceAll"),RO}var av,IO;function h7(){if(IO)return av;IO=1;var i=e7();return t7(),i7(),n7(),r7(),s7(),o7(),a7(),l7(),c7(),u7(),av=i,av}var lv,DO;function d7(){return DO||(DO=1,lv=h7()),lv}var f7=d7(),Eh=Re(f7),PO={},cv,kO;function p7(){if(kO)return cv;kO=1;var i=tt(),e=Dl(),t=Os(),n=No(),r=i("".charAt),s=i("".charCodeAt),o=i("".slice),a=function(l){return function(c,u){var h=t(n(c)),d=e(u),f=h.length,p,m;return d<0||d>=f?l?"":void 0:(p=s(h,d),p<55296||p>56319||d+1===f||(m=s(h,d+1))<56320||m>57343?l?r(h,d):p:l?o(h,d,d+2):(p-55296<<10)+(m-56320)+65536)}};return cv={codeAt:a(!1),charAt:a(!0)},cv}var MO;function Lf(){if(MO)return PO;MO=1;var i=p7().charAt,e=Os(),t=Fu(),n=kx(),r=Mx(),s="String Iterator",o=t.set,a=t.getterFor(s);return n(String,"String",function(l){o(this,{type:s,string:e(l),index:0})},function(){var c=a(this),u=c.string,h=c.index,d;return h>=u.length?r(void 0,!0):(d=i(u,h),c.index+=d.length,r(d,!1))}),PO}var uv,AO;function m7(){if(AO)return uv;AO=1,Is(),Lf(),m$();var i=Nf();return uv=i.f("iterator"),uv}var hv,NO;function x$(){if(NO)return hv;NO=1;var i=m7();return Ds(),hv=i,hv}var dv,LO;function g7(){if(LO)return dv;LO=1;var i=x$();return dv=i,dv}var fv,FO;function v7(){if(FO)return fv;FO=1;var i=g7();return fv=i,fv}var pv,$O;function y7(){return $O||($O=1,pv=v7()),pv}var _7=y7(),b7=Re(_7);function qc(i){"@babel/helpers - typeof";return qc=typeof Eh=="function"&&typeof b7=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Eh=="function"&&e.constructor===Eh&&e!==Eh.prototype?"symbol":typeof e},qc(i)}var mv,jO;function w7(){if(jO)return mv;jO=1,g$();var i=Nf();return mv=i.f("toPrimitive"),mv}var gv,WO;function x7(){if(WO)return gv;WO=1;var i=w7();return gv=i,gv}var vv,zO;function S7(){if(zO)return vv;zO=1;var i=x7();return vv=i,vv}var yv,qO;function E7(){if(qO)return yv;qO=1;var i=S7();return yv=i,yv}var _v,GO;function C7(){return GO||(GO=1,_v=E7()),_v}var T7=C7(),R7=Re(T7);function O7(i,e){if(qc(i)!="object"||!i)return i;var t=i[R7];if(t!==void 0){var n=t.call(i,e);if(qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function I7(i){var e=O7(i,"string");return qc(e)=="symbol"?e:e+""}function ds(i,e,t){return(e=I7(e))in i?mZ(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var YO={},bv,BO;function D7(){if(BO)return bv;BO=1;var i=tt(),e=Wr(),t=di(),n=qt(),r=Pl(),s=Ou(),o=Function,a=i([].concat),l=i([].join),c={},u=function(h,d,f){if(!n(c,d)){for(var p=[],m=0;m<d;m++)p[m]="a["+m+"]";c[d]=o("C,a","return new C("+l(p,",")+")")}return c[d](h,f)};return bv=s?o.bind:function(d){var f=e(this),p=f.prototype,m=r(arguments,1),g=function(){var y=a(m,r(arguments));return this instanceof g?u(f,y.length,y):f.apply(d,y)};return t(p)&&(g.prototype=p),g},bv}var HO;function P7(){if(HO)return YO;HO=1;var i=pe(),e=D7();return i({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),YO}var wv,UO;function Ri(){if(UO)return wv;UO=1;var i=It(),e=Lt();return wv=function(t,n){var r=e[t+"Prototype"],s=r&&r[n];if(s)return s;var o=i[t],a=o&&o.prototype;return a&&a[n]},wv}var xv,VO;function k7(){if(VO)return xv;VO=1,P7();var i=Ri();return xv=i("Function","bind"),xv}var Sv,XO;function M7(){if(XO)return Sv;XO=1;var i=zt(),e=k7(),t=Function.prototype;return Sv=function(n){var r=n.bind;return n===t||i(t,n)&&r===t.bind?e:r},Sv}var Ev,KO;function A7(){if(KO)return Ev;KO=1;var i=M7();return Ev=i,Ev}var Cv,ZO;function N7(){return ZO||(ZO=1,Cv=A7()),Cv}var L7=N7(),S$=Re(L7),QO={},Tv,JO;function F7(){if(JO)return Tv;JO=1;var i=Wr(),e=Tn(),t=Tf(),n=Ts(),r=TypeError,s="Reduce of empty array with no initial value",o=function(a){return function(l,c,u,h){var d=e(l),f=t(d),p=n(d);if(i(c),p===0&&u<2)throw new r(s);var m=a?p-1:0,g=a?-1:1;if(u<2)for(;;){if(m in f){h=f[m],m+=g;break}if(m+=g,a?m<0:p<=m)throw new r(s)}for(;a?m>=0:p>m;m+=g)m in f&&(h=c(h,f[m],m,d));return h}};return Tv={left:o(!1),right:o(!0)},Tv}var Rv,eI;function Ff(){if(eI)return Rv;eI=1;var i=Ue();return Rv=function(e,t){var n=[][e];return!!n&&i(function(){n.call(null,t||function(){return 1},1)})},Rv}var Ov,tI;function E$(){if(tI)return Ov;tI=1;var i=It(),e=El(),t=jr(),n=function(r){return e.slice(0,r.length)===r};return Ov=(function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":i.Bun&&typeof Bun.version=="string"?"BUN":i.Deno&&typeof Deno.version=="object"?"DENO":t(i.process)==="process"?"NODE":i.window&&i.document?"BROWSER":"REST"})(),Ov}var Iv,iI;function $7(){if(iI)return Iv;iI=1;var i=E$();return Iv=i==="NODE",Iv}var nI;function j7(){if(nI)return QO;nI=1;var i=pe(),e=F7().left,t=Ff(),n=Pu(),r=$7(),s=!r&&n>79&&n<83,o=s||!t("reduce");return i({target:"Array",proto:!0,forced:o},{reduce:function(l){var c=arguments.length;return e(this,l,c,c>1?arguments[1]:void 0)}}),QO}var Dv,rI;function W7(){if(rI)return Dv;rI=1,j7();var i=Ri();return Dv=i("Array","reduce"),Dv}var Pv,sI;function z7(){if(sI)return Pv;sI=1;var i=zt(),e=W7(),t=Array.prototype;return Pv=function(n){var r=n.reduce;return n===t||i(t,n)&&r===t.reduce?e:r},Pv}var kv,oI;function q7(){if(oI)return kv;oI=1;var i=z7();return kv=i,kv}var Mv,aI;function G7(){return aI||(aI=1,Mv=q7()),Mv}var Y7=G7(),B7=Re(Y7),lI={},cI;function H7(){if(cI)return lI;cI=1;var i=pe(),e=kl().filter,t=Mu(),n=t("filter");return i({target:"Array",proto:!0,forced:!n},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),lI}var Av,uI;function U7(){if(uI)return Av;uI=1,H7();var i=Ri();return Av=i("Array","filter"),Av}var Nv,hI;function V7(){if(hI)return Nv;hI=1;var i=zt(),e=U7(),t=Array.prototype;return Nv=function(n){var r=n.filter;return n===t||i(t,n)&&r===t.filter?e:r},Nv}var Lv,dI;function X7(){if(dI)return Lv;dI=1;var i=V7();return Lv=i,Lv}var Fv,fI;function K7(){return fI||(fI=1,Fv=X7()),Fv}var Z7=K7(),Ea=Re(Z7),pI={},mI;function Q7(){if(mI)return pI;mI=1;var i=pe(),e=kl().map,t=Mu(),n=t("map");return i({target:"Array",proto:!0,forced:!n},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),pI}var $v,gI;function J7(){if(gI)return $v;gI=1,Q7();var i=Ri();return $v=i("Array","map"),$v}var jv,vI;function eQ(){if(vI)return jv;vI=1;var i=zt(),e=J7(),t=Array.prototype;return jv=function(n){var r=n.map;return n===t||i(t,n)&&r===t.map?e:r},jv}var Wv,yI;function tQ(){if(yI)return Wv;yI=1;var i=eQ();return Wv=i,Wv}var zv,_I;function iQ(){return _I||(_I=1,zv=tQ()),zv}var nQ=iQ(),fr=Re(nQ),qv,bI;function rQ(){return bI||(bI=1,qv=_$()),qv}var sQ=rQ(),oQ=Re(sQ),wI={},xI;function aQ(){if(xI)return wI;xI=1;var i=pe(),e=Lo(),t=s$(),n=di(),r=Ox(),s=Ts(),o=Zn(),a=Df(),l=Gt(),c=Mu(),u=Pl(),h=c("slice"),d=l("species"),f=Array,p=Math.max;return i({target:"Array",proto:!0,forced:!h},{slice:function(g,v){var y=o(this),w=s(y),b=r(g,w),x=r(v===void 0?w:v,w),C,E,S;if(e(y)&&(C=y.constructor,t(C)&&(C===f||e(C.prototype))?C=void 0:n(C)&&(C=C[d],C===null&&(C=void 0)),C===f||C===void 0))return u(y,b,x);for(E=new(C===void 0?f:C)(p(x-b,0)),S=0;b<x;b++,S++)b in y&&a(E,S,y[b]);return E.length=S,E}}),wI}var Gv,SI;function lQ(){if(SI)return Gv;SI=1,aQ();var i=Ri();return Gv=i("Array","slice"),Gv}var Yv,EI;function cQ(){if(EI)return Yv;EI=1;var i=zt(),e=lQ(),t=Array.prototype;return Yv=function(n){var r=n.slice;return n===t||i(t,n)&&r===t.slice?e:r},Yv}var Bv,CI;function uQ(){if(CI)return Bv;CI=1;var i=cQ();return Bv=i,Bv}var Hv,TI;function hQ(){return TI||(TI=1,Hv=uQ()),Hv}var dQ=hQ(),fQ=Re(dQ),RI={},Uv,OI;function C$(){if(OI)return Uv;OI=1;var i=ji(),e=tt(),t=Mf(),n=Af(),r=zr(),s=e([].concat);return Uv=i("Reflect","ownKeys")||function(a){var l=t.f(r(a)),c=n.f;return c?s(l,c(a)):l},Uv}var II;function pQ(){if(II)return RI;II=1;var i=pe(),e=C$();return i({target:"Reflect",stat:!0},{ownKeys:e}),RI}var Vv,DI;function mQ(){if(DI)return Vv;DI=1,pQ();var i=Lt();return Vv=i.Reflect.ownKeys,Vv}var Xv,PI;function gQ(){if(PI)return Xv;PI=1;var i=mQ();return Xv=i,Xv}var Kv,kI;function vQ(){return kI||(kI=1,Kv=gQ()),Kv}var yQ=vQ(),_Q=Re(yQ),MI={},AI;function bQ(){if(AI)return MI;AI=1;var i=pe(),e=Lo();return i({target:"Array",stat:!0},{isArray:e}),MI}var Zv,NI;function wQ(){if(NI)return Zv;NI=1,bQ();var i=Lt();return Zv=i.Array.isArray,Zv}var Qv,LI;function xQ(){if(LI)return Qv;LI=1;var i=wQ();return Qv=i,Qv}var Jv,FI;function SQ(){return FI||(FI=1,Jv=xQ()),Jv}var EQ=SQ(),Dn=Re(EQ),$I={},jI;function CQ(){if(jI)return $I;jI=1;var i=pe(),e=Tn(),t=Pf(),n=Ue(),r=n(function(){t(1)});return i({target:"Object",stat:!0,forced:r},{keys:function(o){return t(e(o))}}),$I}var ey,WI;function TQ(){if(WI)return ey;WI=1,CQ();var i=Lt();return ey=i.Object.keys,ey}var ty,zI;function RQ(){if(zI)return ty;zI=1;var i=TQ();return ty=i,ty}var iy,qI;function OQ(){return qI||(qI=1,iy=RQ()),iy}var IQ=OQ(),Ax=Re(IQ),GI={},ny,YI;function DQ(){if(YI)return ny;YI=1;var i=kl().forEach,e=Ff(),t=e("forEach");return ny=t?[].forEach:function(r){return i(this,r,arguments.length>1?arguments[1]:void 0)},ny}var BI;function PQ(){if(BI)return GI;BI=1;var i=pe(),e=DQ();return i({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),GI}var ry,HI;function kQ(){if(HI)return ry;HI=1,PQ();var i=Ri();return ry=i("Array","forEach"),ry}var sy,UI;function MQ(){if(UI)return sy;UI=1;var i=kQ();return sy=i,sy}var oy,VI;function AQ(){if(VI)return oy;VI=1;var i=Rs(),e=qt(),t=zt(),n=MQ(),r=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return oy=function(o){var a=o.forEach;return o===r||t(r,o)&&a===r.forEach||e(s,i(o))?n:a},oy}var ay,XI;function NQ(){return XI||(XI=1,ay=AQ()),ay}var LQ=NQ(),Gc=Re(LQ),KI={},ZI;function FQ(){if(ZI)return KI;ZI=1;var i=pe(),e=tt(),t=Lo(),n=e([].reverse),r=[1,2];return i({target:"Array",proto:!0,forced:String(r)===String(r.reverse())},{reverse:function(){return t(this)&&(this.length=this.length),n(this)}}),KI}var ly,QI;function $Q(){if(QI)return ly;QI=1,FQ();var i=Ri();return ly=i("Array","reverse"),ly}var cy,JI;function jQ(){if(JI)return cy;JI=1;var i=zt(),e=$Q(),t=Array.prototype;return cy=function(n){var r=n.reverse;return n===t||i(t,n)&&r===t.reverse?e:r},cy}var uy,eD;function WQ(){if(eD)return uy;eD=1;var i=jQ();return uy=i,uy}var hy,tD;function zQ(){return tD||(tD=1,hy=WQ()),hy}var qQ=zQ(),GQ=Re(qQ),iD={},dy,nD;function YQ(){if(nD)return dy;nD=1;var i=Dt(),e=Lo(),t=TypeError,n=Object.getOwnPropertyDescriptor,r=i&&!(function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}})();return dy=r?function(s,o){if(e(s)&&!n(s,"length").writable)throw new t("Cannot set read only .length");return s.length=o}:function(s,o){return s.length=o},dy}var fy,rD;function T$(){if(rD)return fy;rD=1;var i=Tl(),e=TypeError;return fy=function(t,n){if(!delete t[n])throw new e("Cannot delete property "+i(n)+" of "+i(t))},fy}var sD;function BQ(){if(sD)return iD;sD=1;var i=pe(),e=Tn(),t=Ox(),n=Dl(),r=Ts(),s=YQ(),o=r$(),a=Rx(),l=Df(),c=T$(),u=Mu(),h=u("splice"),d=Math.max,f=Math.min;return i({target:"Array",proto:!0,forced:!h},{splice:function(m,g){var v=e(this),y=r(v),w=t(m,y),b=arguments.length,x,C,E,S,R,I;for(b===0?x=C=0:b===1?(x=0,C=y-w):(x=b-2,C=f(d(n(g),0),y-w)),o(y+x-C),E=a(v,C),S=0;S<C;S++)R=w+S,R in v&&l(E,S,v[R]);if(E.length=C,x<C){for(S=w;S<y-C;S++)R=S+C,I=S+x,R in v?v[I]=v[R]:c(v,I);for(S=y;S>y-C+x;S--)c(v,S-1)}else if(x>C)for(S=y-C;S>w;S--)R=S+C-1,I=S+x-1,R in v?v[I]=v[R]:c(v,I);for(S=0;S<x;S++)v[S+w]=arguments[S+2];return s(v,y-C+x),E}}),iD}var py,oD;function HQ(){if(oD)return py;oD=1,BQ();var i=Ri();return py=i("Array","splice"),py}var my,aD;function UQ(){if(aD)return my;aD=1;var i=zt(),e=HQ(),t=Array.prototype;return my=function(n){var r=n.splice;return n===t||i(t,n)&&r===t.splice?e:r},my}var gy,lD;function VQ(){if(lD)return gy;lD=1;var i=UQ();return gy=i,gy}var vy,cD;function XQ(){return cD||(cD=1,vy=VQ()),vy}var KQ=XQ(),R$=Re(KQ),uD={},yy,hD;function ZQ(){if(hD)return yy;hD=1;var i=Dt(),e=tt(),t=Ti(),n=Ue(),r=Pf(),s=Af(),o=xx(),a=Tn(),l=Tf(),c=Object.assign,u=Object.defineProperty,h=e([].concat);return yy=!c||n(function(){if(i&&c({b:1},c(u({},"a",{enumerable:!0,get:function(){u(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var d={},f={},p=Symbol("assign detection"),m="abcdefghijklmnopqrst";return d[p]=7,m.split("").forEach(function(g){f[g]=g}),c({},d)[p]!==7||r(c({},f)).join("")!==m})?function(f,p){for(var m=a(f),g=arguments.length,v=1,y=s.f,w=o.f;g>v;)for(var b=l(arguments[v++]),x=y?h(r(b),y(b)):r(b),C=x.length,E=0,S;C>E;)S=x[E++],(!i||t(w,b,S))&&(m[S]=b[S]);return m}:c,yy}var dD;function QQ(){if(dD)return uD;dD=1;var i=pe(),e=ZQ();return i({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),uD}var _y,fD;function JQ(){if(fD)return _y;fD=1,QQ();var i=Lt();return _y=i.Object.assign,_y}var by,pD;function eJ(){if(pD)return by;pD=1;var i=JQ();return by=i,by}var wy,mD;function tJ(){return mD||(mD=1,wy=eJ()),wy}var iJ=tJ(),nJ=Re(iJ),xy,gD;function rJ(){if(gD)return xy;gD=1,o$();var i=Ri();return xy=i("Array","concat"),xy}var Sy,vD;function sJ(){if(vD)return Sy;vD=1;var i=zt(),e=rJ(),t=Array.prototype;return Sy=function(n){var r=n.concat;return n===t||i(t,n)&&r===t.concat?e:r},Sy}var Ey,yD;function oJ(){if(yD)return Ey;yD=1;var i=sJ();return Ey=i,Ey}var Cy,_D;function aJ(){return _D||(_D=1,Cy=oJ()),Cy}var lJ=aJ(),cJ=Re(lJ),bD={},wD;function uJ(){if(wD)return bD;wD=1;var i=pe(),e=Dt(),t=Nu();return i({target:"Object",stat:!0,sham:!e},{create:t}),bD}var Ty,xD;function hJ(){if(xD)return Ty;xD=1,uJ();var i=Lt(),e=i.Object;return Ty=function(n,r){return e.create(n,r)},Ty}var Ry,SD;function dJ(){if(SD)return Ry;SD=1;var i=hJ();return Ry=i,Ry}var Oy,ED;function fJ(){return ED||(ED=1,Oy=dJ()),Oy}var pJ=fJ(),mJ=Re(pJ),CD={},Iy,TD;function gJ(){if(TD)return Iy;TD=1;var i=Dl(),e=Os(),t=No(),n=RangeError;return Iy=function(s){var o=e(t(this)),a="",l=i(s);if(l<0||l===1/0)throw new n("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(o+=o))l&1&&(a+=o);return a},Iy}var Dy,RD;function vJ(){if(RD)return Dy;RD=1;var i=tt(),e=n$(),t=Os(),n=gJ(),r=No(),s=i(n),o=i("".slice),a=Math.ceil,l=function(c){return function(u,h,d){var f=t(r(u)),p=e(h),m=f.length,g=d===void 0?" ":t(d),v,y;return p<=m||g===""?f:(v=p-m,y=s(g,a(v/g.length)),y.length>v&&(y=o(y,0,v)),c?f+y:y+f)}};return Dy={start:l(!1),end:l(!0)},Dy}var Py,OD;function yJ(){if(OD)return Py;OD=1;var i=tt(),e=Ue(),t=vJ().start,n=RangeError,r=isFinite,s=Math.abs,o=Date.prototype,a=o.toISOString,l=i(o.getTime),c=i(o.getUTCDate),u=i(o.getUTCFullYear),h=i(o.getUTCHours),d=i(o.getUTCMilliseconds),f=i(o.getUTCMinutes),p=i(o.getUTCMonth),m=i(o.getUTCSeconds);return Py=e(function(){return a.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){a.call(new Date(NaN))})?function(){if(!r(l(this)))throw new n("Invalid time value");var v=this,y=u(v),w=d(v),b=y<0?"-":y>9999?"+":"";return b+t(s(y),b?6:4,0)+"-"+t(p(v)+1,2,0)+"-"+t(c(v),2,0)+"T"+t(h(v),2,0)+":"+t(f(v),2,0)+":"+t(m(v),2,0)+"."+t(w,3,0)+"Z"}:a,Py}var ID;function _J(){if(ID)return CD;ID=1;var i=pe(),e=Ti(),t=Tn(),n=Q2(),r=yJ(),s=jr(),o=Ue(),a=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return i({target:"Date",proto:!0,forced:a},{toJSON:function(c){var u=t(this),h=n(u,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in u)&&s(u)==="Date"?e(r,u):u.toISOString()}}),CD}var ky,DD;function bJ(){if(DD)return ky;DD=1,_J(),h$();var i=Lt(),e=Cf();return i.JSON||(i.JSON={stringify:JSON.stringify}),ky=function(n,r,s){return e(i.JSON.stringify,null,arguments)},ky}var My,PD;function wJ(){if(PD)return My;PD=1;var i=bJ();return My=i,My}var Ay,kD;function xJ(){return kD||(kD=1,Ay=wJ()),Ay}var SJ=xJ(),EJ=Re(SJ),MD={},AD={},Ny,ND;function CJ(){if(ND)return Ny;ND=1;var i=TypeError;return Ny=function(e,t){if(e<t)throw new i("Not enough arguments");return e},Ny}var Ly,LD;function O$(){if(LD)return Ly;LD=1;var i=It(),e=Cf(),t=Wt(),n=E$(),r=El(),s=Pl(),o=CJ(),a=i.Function,l=/MSIE .\./.test(r)||n==="BUN"&&(function(){var c=i.Bun.version.split(".");return c.length<3||c[0]==="0"&&(c[1]<3||c[1]==="3"&&c[2]==="0")})();return Ly=function(c,u){var h=u?2:1;return l?function(d,f){var p=o(arguments.length,1)>h,m=t(d)?d:a(d),g=p?s(arguments,h):[],v=p?function(){e(m,this,g)}:m;return u?c(v,f):c(v)}:c},Ly}var FD;function TJ(){if(FD)return AD;FD=1;var i=pe(),e=It(),t=O$(),n=t(e.setInterval,!0);return i({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),AD}var $D={},jD;function RJ(){if(jD)return $D;jD=1;var i=pe(),e=It(),t=O$(),n=t(e.setTimeout,!0);return i({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),$D}var WD;function OJ(){return WD||(WD=1,TJ(),RJ()),MD}var Fy,zD;function IJ(){if(zD)return Fy;zD=1,OJ();var i=Lt();return Fy=i.setTimeout,Fy}var $y,qD;function DJ(){return qD||(qD=1,$y=IJ()),$y}var PJ=DJ(),kJ=Re(PJ),jy={exports:{}},GD;function MJ(){return GD||(GD=1,(function(i){function e(n){if(n)return t(n);this._callbacks=new Map}function t(n){return Object.assign(n,e.prototype),n._callbacks=new Map,n}e.prototype.on=function(n,r){const s=this._callbacks.get(n)??[];return s.push(r),this._callbacks.set(n,s),this},e.prototype.once=function(n,r){const s=(...o)=>{this.off(n,s),r.apply(this,o)};return s.fn=r,this.on(n,s),this},e.prototype.off=function(n,r){if(n===void 0&&r===void 0)return this._callbacks.clear(),this;if(r===void 0)return this._callbacks.delete(n),this;const s=this._callbacks.get(n);if(s){for(const[o,a]of s.entries())if(a===r||a.fn===r){s.splice(o,1);break}s.length===0?this._callbacks.delete(n):this._callbacks.set(n,s)}return this},e.prototype.emit=function(n,...r){const s=this._callbacks.get(n);if(s){const o=[...s];for(const a of o)a.apply(this,r)}return this},e.prototype.listeners=function(n){return this._callbacks.get(n)??[]},e.prototype.listenerCount=function(n){if(n)return this.listeners(n).length;let r=0;for(const s of this._callbacks.values())r+=s.length;return r},e.prototype.hasListeners=function(n){return this.listenerCount(n)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,i.exports=e})(jy)),jy.exports}var AJ=MJ(),NJ=Re(AJ);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function _n(){return _n=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},_n.apply(this,arguments)}function tn(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}function Ch(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}var C0;typeof Object.assign!="function"?C0=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])}return t}:C0=Object.assign;var wo=C0,YD=["","webkit","Moz","MS","ms","o"],LJ=typeof document>"u"?{style:{}}:document.createElement("div"),FJ="function",Ca=Math.round,xo=Math.abs,Nx=Date.now;function $f(i,e){for(var t,n,r=e[0].toUpperCase()+e.slice(1),s=0;s<YD.length;){if(t=YD[s],n=t?t+r:e,n in i)return n;s++}}var Sr;typeof window>"u"?Sr={}:Sr=window;var I$=$f(LJ.style,"touchAction"),D$=I$!==void 0;function $J(){if(!D$)return!1;var i={},e=Sr.CSS&&Sr.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return i[t]=e?Sr.CSS.supports("touch-action",t):!0}),i}var P$="compute",k$="auto",T0="manipulation",so="none",Yc="pan-x",Bc="pan-y",Th=$J(),jJ=/mobile|tablet|ip(ad|hone|od)|android/i,M$="ontouchstart"in Sr,WJ=$f(Sr,"PointerEvent")!==void 0,zJ=M$&&jJ.test(navigator.userAgent),$u="touch",qJ="pen",Lx="mouse",GJ="kinect",YJ=25,ui=1,$o=2,Rt=4,Si=8,vd=1,ju=2,Wu=4,zu=8,sl=16,Yn=ju|Wu,oo=zu|sl,A$=Yn|oo,N$=["x","y"],yd=["clientX","clientY"];function Er(i,e,t){var n;if(i)if(i.forEach)i.forEach(e,t);else if(i.length!==void 0)for(n=0;n<i.length;)e.call(t,i[n],n,i),n++;else for(n in i)i.hasOwnProperty(n)&&e.call(t,i[n],n,i)}function jf(i,e){return typeof i===FJ?i.apply(e&&e[0]||void 0,e):i}function eo(i,e){return i.indexOf(e)>-1}function BJ(i){if(eo(i,so))return so;var e=eo(i,Yc),t=eo(i,Bc);return e&&t?so:e||t?e?Yc:Bc:eo(i,T0)?T0:k$}var L$=(function(){function i(t,n){this.manager=t,this.set(n)}var e=i.prototype;return e.set=function(n){n===P$&&(n=this.compute()),D$&&this.manager.element.style&&Th[n]&&(this.manager.element.style[I$]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return Er(this.manager.recognizers,function(r){jf(r.options.enable,[r])&&(n=n.concat(r.getTouchAction()))}),BJ(n.join(" "))},e.preventDefaults=function(n){var r=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){r.preventDefault();return}var o=this.actions,a=eo(o,so)&&!Th[so],l=eo(o,Bc)&&!Th[Bc],c=eo(o,Yc)&&!Th[Yc];if(a){var u=n.pointers.length===1,h=n.distance<2,d=n.deltaTime<250;if(u&&h&&d)return}if(!(c&&l)&&(a||l&&s&Yn||c&&s&oo))return this.preventSrc(r)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},i})();function Fx(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}function F$(i){var e=i.length;if(e===1)return{x:Ca(i[0].clientX),y:Ca(i[0].clientY)};for(var t=0,n=0,r=0;r<e;)t+=i[r].clientX,n+=i[r].clientY,r++;return{x:Ca(t/e),y:Ca(n/e)}}function BD(i){for(var e=[],t=0;t<i.pointers.length;)e[t]={clientX:Ca(i.pointers[t].clientX),clientY:Ca(i.pointers[t].clientY)},t++;return{timeStamp:Nx(),pointers:e,center:F$(e),deltaX:i.deltaX,deltaY:i.deltaY}}function _d(i,e,t){t||(t=N$);var n=e[t[0]]-i[t[0]],r=e[t[1]]-i[t[1]];return Math.sqrt(n*n+r*r)}function R0(i,e,t){t||(t=N$);var n=e[t[0]]-i[t[0]],r=e[t[1]]-i[t[1]];return Math.atan2(r,n)*180/Math.PI}function $$(i,e){return i===e?vd:xo(i)>=xo(e)?i<0?ju:Wu:e<0?zu:sl}function HJ(i,e){var t=e.center,n=i.offsetDelta||{},r=i.prevDelta||{},s=i.prevInput||{};(e.eventType===ui||s.eventType===Rt)&&(r=i.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=i.offsetDelta={x:t.x,y:t.y}),e.deltaX=r.x+(t.x-n.x),e.deltaY=r.y+(t.y-n.y)}function j$(i,e,t){return{x:e/i||0,y:t/i||0}}function UJ(i,e){return _d(e[0],e[1],yd)/_d(i[0],i[1],yd)}function VJ(i,e){return R0(e[1],e[0],yd)+R0(i[1],i[0],yd)}function XJ(i,e){var t=i.lastInterval||e,n=e.timeStamp-t.timeStamp,r,s,o,a;if(e.eventType!==Si&&(n>YJ||t.velocity===void 0)){var l=e.deltaX-t.deltaX,c=e.deltaY-t.deltaY,u=j$(n,l,c);s=u.x,o=u.y,r=xo(u.x)>xo(u.y)?u.x:u.y,a=$$(l,c),i.lastInterval=e}else r=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;e.velocity=r,e.velocityX=s,e.velocityY=o,e.direction=a}function KJ(i,e){var t=i.session,n=e.pointers,r=n.length;t.firstInput||(t.firstInput=BD(e)),r>1&&!t.firstMultiple?t.firstMultiple=BD(e):r===1&&(t.firstMultiple=!1);var s=t.firstInput,o=t.firstMultiple,a=o?o.center:s.center,l=e.center=F$(n);e.timeStamp=Nx(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=R0(a,l),e.distance=_d(a,l),HJ(t,e),e.offsetDirection=$$(e.deltaX,e.deltaY);var c=j$(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=xo(c.x)>xo(c.y)?c.x:c.y,e.scale=o?UJ(o.pointers,n):1,e.rotation=o?VJ(o.pointers,n):0,e.maxPointers=t.prevInput?e.pointers.length>t.prevInput.maxPointers?e.pointers.length:t.prevInput.maxPointers:e.pointers.length,XJ(t,e);var u=i.element,h=e.srcEvent,d;h.composedPath?d=h.composedPath()[0]:h.path?d=h.path[0]:d=h.target,Fx(d,u)&&(u=d),e.target=u}function ZJ(i,e,t){var n=t.pointers.length,r=t.changedPointers.length,s=e&ui&&n-r===0,o=e&(Rt|Si)&&n-r===0;t.isFirst=!!s,t.isFinal=!!o,s&&(i.session={}),t.eventType=e,KJ(i,t),i.emit("hammer.input",t),i.recognize(t),i.session.prevInput=t}function Hc(i){return i.trim().split(/\s+/g)}function yc(i,e,t){Er(Hc(e),function(n){i.addEventListener(n,t,!1)})}function _c(i,e,t){Er(Hc(e),function(n){i.removeEventListener(n,t,!1)})}function HD(i){var e=i.ownerDocument||i;return e.defaultView||e.parentWindow||window}var Al=(function(){function i(t,n){var r=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){jf(t.options.enable,[t])&&r.handler(s)},this.init()}var e=i.prototype;return e.handler=function(){},e.init=function(){this.evEl&&yc(this.element,this.evEl,this.domHandler),this.evTarget&&yc(this.target,this.evTarget,this.domHandler),this.evWin&&yc(HD(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&_c(this.element,this.evEl,this.domHandler),this.evTarget&&_c(this.target,this.evTarget,this.domHandler),this.evWin&&_c(HD(this.element),this.evWin,this.domHandler)},i})();function So(i,e,t){if(i.indexOf&&!t)return i.indexOf(e);for(var n=0;n<i.length;){if(t&&i[n][t]==e||!t&&i[n]===e)return n;n++}return-1}var QJ={pointerdown:ui,pointermove:$o,pointerup:Rt,pointercancel:Si,pointerout:Si},JJ={2:$u,3:qJ,4:Lx,5:GJ},W$="pointerdown",z$="pointermove pointerup pointercancel";Sr.MSPointerEvent&&!Sr.PointerEvent&&(W$="MSPointerDown",z$="MSPointerMove MSPointerUp MSPointerCancel");var q$=(function(i){tn(e,i);function e(){var n,r=e.prototype;return r.evEl=W$,r.evWin=z$,n=i.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=e.prototype;return t.handler=function(r){var s=this.store,o=!1,a=r.type.toLowerCase().replace("ms",""),l=QJ[a],c=JJ[r.pointerType]||r.pointerType,u=c===$u,h=So(s,r.pointerId,"pointerId");l&ui&&(r.button===0||u)?h<0&&(s.push(r),h=s.length-1):l&(Rt|Si)&&(o=!0),!(h<0)&&(s[h]=r,this.callback(this.manager,l,{pointers:s,changedPointers:[r],pointerType:c,srcEvent:r}),o&&s.splice(h,1))},e})(Al);function Uc(i){return Array.prototype.slice.call(i,0)}function $x(i,e,t){for(var n=[],r=[],s=0;s<i.length;){var o=e?i[s][e]:i[s];So(r,o)<0&&n.push(i[s]),r[s]=o,s++}return t&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var eee={touchstart:ui,touchmove:$o,touchend:Rt,touchcancel:Si},tee="touchstart touchmove touchend touchcancel",jx=(function(i){tn(e,i);function e(){var n;return e.prototype.evTarget=tee,n=i.apply(this,arguments)||this,n.targetIds={},n}var t=e.prototype;return t.handler=function(r){var s=eee[r.type],o=iee.call(this,r,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:$u,srcEvent:r})},e})(Al);function iee(i,e){var t=Uc(i.touches),n=this.targetIds;if(e&(ui|$o)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var r,s,o=Uc(i.changedTouches),a=[],l=this.target;if(s=t.filter(function(c){return Fx(c.target,l)}),e===ui)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;for(r=0;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(Rt|Si)&&delete n[o[r].identifier],r++;if(a.length)return[$x(s.concat(a),"identifier",!0),a]}var nee={mousedown:ui,mousemove:$o,mouseup:Rt},ree="mousedown",see="mousemove mouseup",Wx=(function(i){tn(e,i);function e(){var n,r=e.prototype;return r.evEl=ree,r.evWin=see,n=i.apply(this,arguments)||this,n.pressed=!1,n}var t=e.prototype;return t.handler=function(r){var s=nee[r.type];s&ui&&r.button===0&&(this.pressed=!0),s&$o&&r.which!==1&&(s=Rt),this.pressed&&(s&Rt&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[r],changedPointers:[r],pointerType:Lx,srcEvent:r}))},e})(Al),oee=2500,UD=25;function VD(i){var e=i.changedPointers,t=e[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},r=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=r.indexOf(n);a>-1&&r.splice(a,1)};setTimeout(s,oee)}}function aee(i,e){i&ui?(this.primaryTouch=e.changedPointers[0].identifier,VD.call(this,e)):i&(Rt|Si)&&VD.call(this,e)}function lee(i){for(var e=i.srcEvent.clientX,t=i.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(t-r.y);if(s<=UD&&o<=UD)return!0}return!1}var G$=(function(){var i=(function(e){tn(t,e);function t(r,s){var o;return o=e.call(this,r,s)||this,o.handler=function(a,l,c){var u=c.pointerType===$u,h=c.pointerType===Lx;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(u)aee.call(Ch(Ch(o)),l,c);else if(h&&lee.call(Ch(Ch(o)),c))return;o.callback(a,l,c)}},o.touch=new jx(o.manager,o.handler),o.mouse=new Wx(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t})(Al);return i})();function cee(i){var e,t=i.options.inputClass;return t?e=t:WJ?e=q$:zJ?e=jx:M$?e=G$:e=Wx,new e(i,ZJ)}function Ta(i,e,t){return Array.isArray(i)?(Er(i,t[e],t),!0):!1}var Bh=1,Qi=2,ol=4,fs=8,Cr=fs,Vc=16,$n=32,uee=1;function hee(){return uee++}function Rh(i,e){var t=e.manager;return t?t.get(i):i}function XD(i){return i&Vc?"cancel":i&fs?"end":i&ol?"move":i&Qi?"start":""}var qu=(function(){function i(t){t===void 0&&(t={}),this.options=_n({enable:!0},t),this.id=hee(),this.manager=null,this.state=Bh,this.simultaneous={},this.requireFail=[]}var e=i.prototype;return e.set=function(n){return wo(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Ta(n,"recognizeWith",this))return this;var r=this.simultaneous;return n=Rh(n,this),r[n.id]||(r[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Ta(n,"dropRecognizeWith",this)?this:(n=Rh(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Ta(n,"requireFailure",this))return this;var r=this.requireFail;return n=Rh(n,this),So(r,n)===-1&&(r.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Ta(n,"dropRequireFailure",this))return this;n=Rh(n,this);var r=So(this.requireFail,n);return r>-1&&this.requireFail.splice(r,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var r=this,s=this.state;function o(a){r.manager.emit(a,n)}s<fs&&o(r.options.event+XD(s)),o(r.options.event),n.additionalEvent&&o(n.additionalEvent),s>=fs&&o(r.options.event+XD(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=$n},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&($n|Bh)))return!1;n++}return!0},e.recognize=function(n){var r=wo({},n);if(!jf(this.options.enable,[this,r])){this.reset(),this.state=$n;return}this.state&(Cr|Vc|$n)&&(this.state=Bh),this.state=this.process(r),this.state&(Qi|ol|fs|Vc)&&this.tryEmit(r)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},i})(),O0=(function(i){tn(e,i);function e(n){var r;return n===void 0&&(n={}),r=i.call(this,_n({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,r.pTime=!1,r.pCenter=!1,r._timer=null,r._input=null,r.count=0,r}var t=e.prototype;return t.getTouchAction=function(){return[T0]},t.process=function(r){var s=this,o=this.options,a=r.pointers.length===o.pointers,l=r.distance<o.threshold,c=r.deltaTime<o.time;if(this.reset(),r.eventType&ui&&this.count===0)return this.failTimeout();if(l&&c&&a){if(r.eventType!==Rt)return this.failTimeout();var u=this.pTime?r.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||_d(this.pCenter,r.center)<o.posThreshold;this.pTime=r.timeStamp,this.pCenter=r.center,!h||!u?this.count=1:this.count+=1,this._input=r;var d=this.count%o.taps;if(d===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=Cr,s.tryEmit()},o.interval),Qi):Cr}return $n},t.failTimeout=function(){var r=this;return this._timer=setTimeout(function(){r.state=$n},this.options.interval),$n},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===Cr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e})(qu),al=(function(i){tn(e,i);function e(n){return n===void 0&&(n={}),i.call(this,_n({pointers:1},n))||this}var t=e.prototype;return t.attrTest=function(r){var s=this.options.pointers;return s===0||r.pointers.length===s},t.process=function(r){var s=this.state,o=r.eventType,a=s&(Qi|ol),l=this.attrTest(r);return a&&(o&Si||!l)?s|Vc:a||l?o&Rt?s|fs:s&Qi?s|ol:Qi:$n},e})(qu);function Y$(i){return i===sl?"down":i===zu?"up":i===ju?"left":i===Wu?"right":""}var zx=(function(i){tn(e,i);function e(n){var r;return n===void 0&&(n={}),r=i.call(this,_n({event:"pan",threshold:10,pointers:1,direction:A$},n))||this,r.pX=null,r.pY=null,r}var t=e.prototype;return t.getTouchAction=function(){var r=this.options.direction,s=[];return r&Yn&&s.push(Bc),r&oo&&s.push(Yc),s},t.directionTest=function(r){var s=this.options,o=!0,a=r.distance,l=r.direction,c=r.deltaX,u=r.deltaY;return l&s.direction||(s.direction&Yn?(l=c===0?vd:c<0?ju:Wu,o=c!==this.pX,a=Math.abs(r.deltaX)):(l=u===0?vd:u<0?zu:sl,o=u!==this.pY,a=Math.abs(r.deltaY))),r.direction=l,o&&a>s.threshold&&l&s.direction},t.attrTest=function(r){return al.prototype.attrTest.call(this,r)&&(this.state&Qi||!(this.state&Qi)&&this.directionTest(r))},t.emit=function(r){this.pX=r.deltaX,this.pY=r.deltaY;var s=Y$(r.direction);s&&(r.additionalEvent=this.options.event+s),i.prototype.emit.call(this,r)},e})(al),B$=(function(i){tn(e,i);function e(n){return n===void 0&&(n={}),i.call(this,_n({event:"swipe",threshold:10,velocity:.3,direction:Yn|oo,pointers:1},n))||this}var t=e.prototype;return t.getTouchAction=function(){return zx.prototype.getTouchAction.call(this)},t.attrTest=function(r){var s=this.options.direction,o;return s&(Yn|oo)?o=r.overallVelocity:s&Yn?o=r.overallVelocityX:s&oo&&(o=r.overallVelocityY),i.prototype.attrTest.call(this,r)&&s&r.offsetDirection&&r.distance>this.options.threshold&&r.maxPointers===this.options.pointers&&xo(o)>this.options.velocity&&r.eventType&Rt},t.emit=function(r){var s=Y$(r.offsetDirection);s&&this.manager.emit(this.options.event+s,r),this.manager.emit(this.options.event,r)},e})(al),H$=(function(i){tn(e,i);function e(n){return n===void 0&&(n={}),i.call(this,_n({event:"pinch",threshold:0,pointers:2},n))||this}var t=e.prototype;return t.getTouchAction=function(){return[so]},t.attrTest=function(r){return i.prototype.attrTest.call(this,r)&&(Math.abs(r.scale-1)>this.options.threshold||this.state&Qi)},t.emit=function(r){if(r.scale!==1){var s=r.scale<1?"in":"out";r.additionalEvent=this.options.event+s}i.prototype.emit.call(this,r)},e})(al),U$=(function(i){tn(e,i);function e(n){return n===void 0&&(n={}),i.call(this,_n({event:"rotate",threshold:0,pointers:2},n))||this}var t=e.prototype;return t.getTouchAction=function(){return[so]},t.attrTest=function(r){return i.prototype.attrTest.call(this,r)&&(Math.abs(r.rotation)>this.options.threshold||this.state&Qi)},e})(al),V$=(function(i){tn(e,i);function e(n){var r;return n===void 0&&(n={}),r=i.call(this,_n({event:"press",pointers:1,time:251,threshold:9},n))||this,r._timer=null,r._input=null,r}var t=e.prototype;return t.getTouchAction=function(){return[k$]},t.process=function(r){var s=this,o=this.options,a=r.pointers.length===o.pointers,l=r.distance<o.threshold,c=r.deltaTime>o.time;if(this._input=r,!l||!a||r.eventType&(Rt|Si)&&!c)this.reset();else if(r.eventType&ui)this.reset(),this._timer=setTimeout(function(){s.state=Cr,s.tryEmit()},o.time);else if(r.eventType&Rt)return Cr;return $n},t.reset=function(){clearTimeout(this._timer)},t.emit=function(r){this.state===Cr&&(r&&r.eventType&Rt?this.manager.emit(this.options.event+"up",r):(this._input.timeStamp=Nx(),this.manager.emit(this.options.event,this._input)))},e})(qu),X$={domEvents:!1,touchAction:P$,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},KD=[[U$,{enable:!1}],[H$,{enable:!1},["rotate"]],[B$,{direction:Yn}],[zx,{direction:Yn},["swipe"]],[O0],[O0,{event:"doubletap",taps:2},["tap"]],[V$]],dee=1,ZD=2;function QD(i,e){var t=i.element;if(t.style){var n;Er(i.options.cssProps,function(r,s){n=$f(t.style,s),e?(i.oldCssProps[n]=t.style[n],t.style[n]=r):t.style[n]=i.oldCssProps[n]||""}),e||(i.oldCssProps={})}}function fee(i,e){var t=document.createEvent("Event");t.initEvent(i,!0,!0),t.gesture=e,e.target.dispatchEvent(t)}var JD=(function(){function i(t,n){var r=this;this.options=wo({},X$,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=cee(this),this.touchAction=new L$(this,this.options.touchAction),QD(this,!0),Er(this.options.recognizers,function(s){var o=r.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=i.prototype;return e.set=function(n){return wo(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?ZD:dee},e.recognize=function(n){var r=this.session;if(!r.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=r.curRecognizer;(!a||a&&a.state&Cr)&&(r.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],r.stopped!==ZD&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Qi|ol|fs)&&(r.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof qu)return n;for(var r=this.recognizers,s=0;s<r.length;s++)if(r[s].options.event===n)return r[s];return null},e.add=function(n){if(Ta(n,"add",this))return this;var r=this.get(n.options.event);return r&&this.remove(r),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Ta(n,"remove",this))return this;var r=this.get(n);if(n){var s=this.recognizers,o=So(s,r);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,r){if(n===void 0||r===void 0)return this;var s=this.handlers;return Er(Hc(n),function(o){s[o]=s[o]||[],s[o].push(r)}),this},e.off=function(n,r){if(n===void 0)return this;var s=this.handlers;return Er(Hc(n),function(o){r?s[o]&&s[o].splice(So(s[o],r),1):delete s[o]}),this},e.emit=function(n,r){this.options.domEvents&&fee(n,r);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){r.type=n,r.preventDefault=function(){r.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](r),o++}},e.destroy=function(){this.element&&QD(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},i})(),pee={touchstart:ui,touchmove:$o,touchend:Rt,touchcancel:Si},mee="touchstart",gee="touchstart touchmove touchend touchcancel",vee=(function(i){tn(e,i);function e(){var n,r=e.prototype;return r.evTarget=mee,r.evWin=gee,n=i.apply(this,arguments)||this,n.started=!1,n}var t=e.prototype;return t.handler=function(r){var s=pee[r.type];if(s===ui&&(this.started=!0),!!this.started){var o=yee.call(this,r,s);s&(Rt|Si)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:$u,srcEvent:r})}},e})(Al);function yee(i,e){var t=Uc(i.touches),n=Uc(i.changedTouches);return e&(Rt|Si)&&(t=$x(t.concat(n),"identifier",!0)),[t,n]}function K$(i,e,t){var n="DEPRECATED METHOD: "+e+`
`+t+` AT 
`;return function(){var r=new Error("get-stack-trace"),s=r&&r.stack?r.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),i.apply(this,arguments)}}var Z$=K$(function(i,e,t){for(var n=Object.keys(e),r=0;r<n.length;)(!t||t&&i[n[r]]===void 0)&&(i[n[r]]=e[n[r]]),r++;return i},"extend","Use `assign`."),_ee=K$(function(i,e){return Z$(i,e,!0)},"merge","Use `assign`.");function bee(i,e,t){var n=e.prototype,r;r=i.prototype=Object.create(n),r.constructor=i,r._super=n,t&&wo(r,t)}function eP(i,e){return function(){return i.apply(e,arguments)}}var wee=(function(){var i=function(t,n){return n===void 0&&(n={}),new JD(t,_n({recognizers:KD.concat()},n))};return i.VERSION="2.0.17-rc",i.DIRECTION_ALL=A$,i.DIRECTION_DOWN=sl,i.DIRECTION_LEFT=ju,i.DIRECTION_RIGHT=Wu,i.DIRECTION_UP=zu,i.DIRECTION_HORIZONTAL=Yn,i.DIRECTION_VERTICAL=oo,i.DIRECTION_NONE=vd,i.DIRECTION_DOWN=sl,i.INPUT_START=ui,i.INPUT_MOVE=$o,i.INPUT_END=Rt,i.INPUT_CANCEL=Si,i.STATE_POSSIBLE=Bh,i.STATE_BEGAN=Qi,i.STATE_CHANGED=ol,i.STATE_ENDED=fs,i.STATE_RECOGNIZED=Cr,i.STATE_CANCELLED=Vc,i.STATE_FAILED=$n,i.Manager=JD,i.Input=Al,i.TouchAction=L$,i.TouchInput=jx,i.MouseInput=Wx,i.PointerEventInput=q$,i.TouchMouseInput=G$,i.SingleTouchInput=vee,i.Recognizer=qu,i.AttrRecognizer=al,i.Tap=O0,i.Pan=zx,i.Swipe=B$,i.Pinch=H$,i.Rotate=U$,i.Press=V$,i.on=yc,i.off=_c,i.each=Er,i.merge=_ee,i.extend=Z$,i.bindFn=eP,i.assign=wo,i.inherit=bee,i.bindFn=eP,i.prefixed=$f,i.toArray=Uc,i.inArray=So,i.uniqueArray=$x,i.splitStr=Hc,i.boolOrFn=jf,i.hasParent=Fx,i.addEventListeners=yc,i.removeEventListeners=_c,i.defaults=wo({},X$,{preset:KD}),i})();const Q$=oQ("DELETE");function xee(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return J$({},i,...t)}function J$(){const i=bd(...arguments);return tj(i),i}function bd(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];if(e.length<2)return e[0];if(e.length>2)return bd(J$(e[0],e[1]),...fQ(e).call(e,2));const n=e[0],r=e[1];if(n instanceof Date&&r instanceof Date)return n.setTime(r.getTime()),n;for(const s of _Q(r))Object.prototype.propertyIsEnumerable.call(r,s)&&(r[s]===Q$?delete n[s]:n[s]!==null&&r[s]!==null&&typeof n[s]=="object"&&typeof r[s]=="object"&&!Dn(n[s])&&!Dn(r[s])?n[s]=bd(n[s],r[s]):n[s]=ej(r[s]));return n}function ej(i){return Dn(i)?fr(i).call(i,e=>ej(e)):typeof i=="object"&&i!==null?i instanceof Date?new Date(i.getTime()):bd({},i):i}function tj(i){for(const e of Ax(i))i[e]===Q$?delete i[e]:typeof i[e]=="object"&&i[e]!==null&&tj(i[e])}function See(){const i=()=>{};return{on:i,off:i,destroy:i,emit:i,get(){return{set:i}}}}const Eee=typeof window<"u"?window.Hammer||wee:function(){return See()};function vr(i){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:i,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const t=Eee(this._dom.overlay);t.on("tap",S$(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{t.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Gc(n).call(n,r=>{t.on(r,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=r=>{Cee(r.target,i)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=r=>{("key"in r?r.key==="Escape":r.keyCode===27)&&this.deactivate()}}NJ(vr.prototype);vr.current=null;vr.prototype.destroy=function(){this.deactivate();for(const t of GQ(i=R$(e=this._cleanupQueue).call(e,0)).call(i)){var i,e;t()}};vr.prototype.activate=function(){vr.current&&vr.current.deactivate(),vr.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};vr.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};vr.prototype._onTapOverlay=function(i){this.activate(),i.srcEvent.stopPropagation()};function Cee(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}var Wy,tP;function Tee(){if(tP)return Wy;tP=1,d$();var i=Lt();return Wy=i.Object.getOwnPropertySymbols,Wy}var zy,iP;function Ree(){if(iP)return zy;iP=1;var i=Tee();return zy=i,zy}var qy,nP;function Oee(){return nP||(nP=1,qy=Ree()),qy}var Iee=Oee(),rP=Re(Iee),Gy={exports:{}},sP={},oP;function Dee(){if(oP)return sP;oP=1;var i=pe(),e=Ue(),t=Zn(),n=Of().f,r=Dt(),s=!r||e(function(){n(1)});return i({target:"Object",stat:!0,forced:s,sham:!r},{getOwnPropertyDescriptor:function(a,l){return n(t(a),l)}}),sP}var aP;function Pee(){if(aP)return Gy.exports;aP=1,Dee();var i=Lt(),e=i.Object,t=Gy.exports=function(r,s){return e.getOwnPropertyDescriptor(r,s)};return e.getOwnPropertyDescriptor.sham&&(t.sham=!0),Gy.exports}var Yy,lP;function kee(){if(lP)return Yy;lP=1;var i=Pee();return Yy=i,Yy}var By,cP;function Mee(){return cP||(cP=1,By=kee()),By}var Aee=Mee(),ij=Re(Aee),uP={},hP;function Nee(){if(hP)return uP;hP=1;var i=pe(),e=Dt(),t=C$(),n=Zn(),r=Of(),s=Df();return i({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(a){for(var l=n(a),c=r.f,u=t(l),h={},d=0,f,p;u.length>d;)p=c(l,f=u[d++]),p!==void 0&&s(h,f,p);return h}}),uP}var Hy,dP;function Lee(){if(dP)return Hy;dP=1,Nee();var i=Lt();return Hy=i.Object.getOwnPropertyDescriptors,Hy}var Uy,fP;function Fee(){if(fP)return Uy;fP=1;var i=Lee();return Uy=i,Uy}var Vy,pP;function $ee(){return pP||(pP=1,Vy=Fee()),Vy}var jee=$ee(),mP=Re(jee),Xy={exports:{}},gP={},vP;function Wee(){if(vP)return gP;vP=1;var i=pe(),e=Dt(),t=Dx().f;return i({target:"Object",stat:!0,forced:Object.defineProperties!==t,sham:!e},{defineProperties:t}),gP}var yP;function zee(){if(yP)return Xy.exports;yP=1,Wee();var i=Lt(),e=i.Object,t=Xy.exports=function(r,s){return e.defineProperties(r,s)};return e.defineProperties.sham&&(t.sham=!0),Xy.exports}var Ky,_P;function qee(){if(_P)return Ky;_P=1;var i=zee();return Ky=i,Ky}var Zy,bP;function Gee(){return bP||(bP=1,Zy=qee()),Zy}var Yee=Gee(),Bee=Re(Yee),Qy,wP;function Hee(){return wP||(wP=1,Qy=i$()),Qy}var Uee=Hee(),Vee=Re(Uee),xP={},SP={},Jy={exports:{}},e_,EP;function Xee(){if(EP)return e_;EP=1;var i=Ue();return e_=i(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),e_}var t_,CP;function Kee(){if(CP)return t_;CP=1;var i=Ue(),e=di(),t=jr(),n=Xee(),r=Object.isExtensible,s=i(function(){});return t_=s||n?function(a){return!e(a)||n&&t(a)==="ArrayBuffer"?!1:r?r(a):!0}:r,t_}var i_,TP;function Zee(){if(TP)return i_;TP=1;var i=Ue();return i_=!i(function(){return Object.isExtensible(Object.preventExtensions({}))}),i_}var RP;function nj(){if(RP)return Jy.exports;RP=1;var i=pe(),e=tt(),t=Au(),n=di(),r=qt(),s=en().f,o=Mf(),a=l$(),l=Kee(),c=Rf(),u=Zee(),h=!1,d=c("meta"),f=0,p=function(b){s(b,d,{value:{objectID:"O"+f++,weakData:{}}})},m=function(b,x){if(!n(b))return typeof b=="symbol"?b:(typeof b=="string"?"S":"P")+b;if(!r(b,d)){if(!l(b))return"F";if(!x)return"E";p(b)}return b[d].objectID},g=function(b,x){if(!r(b,d)){if(!l(b))return!0;if(!x)return!1;p(b)}return b[d].weakData},v=function(b){return u&&h&&l(b)&&!r(b,d)&&p(b),b},y=function(){w.enable=function(){},h=!0;var b=o.f,x=e([].splice),C={};C[d]=1,b(C).length&&(o.f=function(E){for(var S=b(E),R=0,I=S.length;R<I;R++)if(S[R]===d){x(S,R,1);break}return S},i({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:a.f}))},w=Jy.exports={enable:y,fastKey:m,getWeakData:g,onFreeze:v};return t[d]=!0,Jy.exports}var n_,OP;function Qee(){if(OP)return n_;OP=1;var i=Gt(),e=Ml(),t=i("iterator"),n=Array.prototype;return n_=function(r){return r!==void 0&&(e.Array===r||n[t]===r)},n_}var r_,IP;function rj(){if(IP)return r_;IP=1;var i=Rs(),e=Sx(),t=Du(),n=Ml(),r=Gt(),s=r("iterator");return r_=function(o){if(!t(o))return e(o,s)||e(o,"@@iterator")||n[i(o)]},r_}var s_,DP;function sj(){if(DP)return s_;DP=1;var i=Ti(),e=Wr(),t=zr(),n=Tl(),r=rj(),s=TypeError;return s_=function(o,a){var l=arguments.length<2?r(o):a;if(e(l))return t(i(l,o));throw new s(n(o)+" is not iterable")},s_}var o_,PP;function qx(){if(PP)return o_;PP=1;var i=Ti(),e=zr(),t=Sx();return o_=function(n,r,s){var o,a;e(n);try{if(o=t(n,"return"),!o){if(r==="throw")throw s;return s}o=i(o,n)}catch(l){a=!0,o=l}if(r==="throw")throw s;if(a)throw o;return e(o),s},o_}var a_,kP;function Gx(){if(kP)return a_;kP=1;var i=If(),e=Ti(),t=zr(),n=Tl(),r=Qee(),s=Ts(),o=zt(),a=sj(),l=rj(),c=qx(),u=TypeError,h=function(f,p){this.stopped=f,this.result=p},d=h.prototype;return a_=function(f,p,m){var g=m&&m.that,v=!!(m&&m.AS_ENTRIES),y=!!(m&&m.IS_RECORD),w=!!(m&&m.IS_ITERATOR),b=!!(m&&m.INTERRUPTED),x=i(p,g),C,E,S,R,I,k,M,N=function(q){return C&&c(C,"normal"),new h(!0,q)},F=function(q){return v?(t(q),b?x(q[0],q[1],N):x(q[0],q[1])):b?x(q,N):x(q)};if(y)C=f.iterator;else if(w)C=f;else{if(E=l(f),!E)throw new u(n(f)+" is not iterable");if(r(E)){for(S=0,R=s(f);R>S;S++)if(I=F(f[S]),I&&o(d,I))return I;return new h(!1)}C=a(f,E)}for(k=y?f.next:C.next;!(M=e(k,C)).done;){try{I=F(M.value)}catch(q){c(C,"throw",q)}if(typeof I=="object"&&I&&o(d,I))return I}return new h(!1)},a_}var l_,MP;function oj(){if(MP)return l_;MP=1;var i=zt(),e=TypeError;return l_=function(t,n){if(i(n,t))return t;throw new e("Incorrect invocation")},l_}var c_,AP;function aj(){if(AP)return c_;AP=1;var i=pe(),e=It(),t=nj(),n=Ue(),r=Il(),s=Gx(),o=oj(),a=Wt(),l=di(),c=Du(),u=Fo(),h=en().f,d=kl().forEach,f=Dt(),p=Fu(),m=p.set,g=p.getterFor;return c_=function(v,y,w){var b=v.indexOf("Map")!==-1,x=v.indexOf("Weak")!==-1,C=b?"set":"add",E=e[v],S=E&&E.prototype,R={},I;if(!f||!a(E)||!(x||S.forEach&&!n(function(){new E().entries().next()})))I=w.getConstructor(y,v,b,C),t.enable();else{I=y(function(N,F){m(o(N,k),{type:v,collection:new E}),c(F)||s(F,N[C],{that:N,AS_ENTRIES:b})});var k=I.prototype,M=g(v);d(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(N){var F=N==="add"||N==="set";N in S&&!(x&&N==="clear")&&r(k,N,function(q,A){var z=M(this).collection;if(!F&&x&&!l(q))return N==="get"?void 0:!1;var P=z[N](q===0?0:q,A);return F?this:P})}),x||h(k,"size",{configurable:!0,get:function(){return M(this).collection.size}})}return u(I,v,!1,!0),R[v]=I,i({global:!0,forced:!0},R),x||w.setStrong(I,v,b),I},c_}var u_,NP;function Jee(){if(NP)return u_;NP=1;var i=Lu();return u_=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:i(e,r,t[r],n);return e},u_}var h_,LP;function ete(){if(LP)return h_;LP=1;var i=ji(),e=Px(),t=Gt(),n=Dt(),r=t("species");return h_=function(s){var o=i(s);n&&o&&!o[r]&&e(o,r,{configurable:!0,get:function(){return this}})},h_}var d_,FP;function lj(){if(FP)return d_;FP=1;var i=Nu(),e=Px(),t=Jee(),n=If(),r=oj(),s=Du(),o=Gx(),a=kx(),l=Mx(),c=ete(),u=Dt(),h=nj().fastKey,d=Fu(),f=d.set,p=d.getterFor;return d_={getConstructor:function(m,g,v,y){var w=m(function(S,R){r(S,b),f(S,{type:g,index:i(null),first:null,last:null,size:0}),u||(S.size=0),s(R)||o(R,S[y],{that:S,AS_ENTRIES:v})}),b=w.prototype,x=p(g),C=function(S,R,I){var k=x(S),M=E(S,R),N,F;return M?M.value=I:(k.last=M={index:F=h(R,!0),key:R,value:I,previous:N=k.last,next:null,removed:!1},k.first||(k.first=M),N&&(N.next=M),u?k.size++:S.size++,F!=="F"&&(k.index[F]=M)),S},E=function(S,R){var I=x(S),k=h(R),M;if(k!=="F")return I.index[k];for(M=I.first;M;M=M.next)if(M.key===R)return M};return t(b,{clear:function(){for(var R=this,I=x(R),k=I.first;k;)k.removed=!0,k.previous&&(k.previous=k.previous.next=null),k=k.next;I.first=I.last=null,I.index=i(null),u?I.size=0:R.size=0},delete:function(S){var R=this,I=x(R),k=E(R,S);if(k){var M=k.next,N=k.previous;delete I.index[k.index],k.removed=!0,N&&(N.next=M),M&&(M.previous=N),I.first===k&&(I.first=M),I.last===k&&(I.last=N),u?I.size--:R.size--}return!!k},forEach:function(R){for(var I=x(this),k=n(R,arguments.length>1?arguments[1]:void 0),M;M=M?M.next:I.first;)for(k(M.value,M.key,this);M&&M.removed;)M=M.previous},has:function(R){return!!E(this,R)}}),t(b,v?{get:function(R){var I=E(this,R);return I&&I.value},set:function(R,I){return C(this,R===0?0:R,I)}}:{add:function(R){return C(this,R=R===0?0:R,R)}}),u&&e(b,"size",{configurable:!0,get:function(){return x(this).size}}),w},setStrong:function(m,g,v){var y=g+" Iterator",w=p(g),b=p(y);a(m,g,function(x,C){f(this,{type:y,target:x,state:w(x),kind:C,last:null})},function(){for(var x=b(this),C=x.kind,E=x.last;E&&E.removed;)E=E.previous;return!x.target||!(x.last=E=E?E.next:x.state.first)?(x.target=null,l(void 0,!0)):l(C==="keys"?E.key:C==="values"?E.value:[E.key,E.value],!1)},v?"entries":"values",!v,!0),c(g)}},d_}var $P;function tte(){if($P)return SP;$P=1;var i=aj(),e=lj();return i("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},e),SP}var jP;function ite(){return jP||(jP=1,tte()),xP}var WP={},f_,zP;function cj(){return zP||(zP=1,f_=function(i,e){return e===1?function(t,n){return t[i](n)}:function(t,n,r){return t[i](n,r)}}),f_}var p_,qP;function nte(){if(qP)return p_;qP=1;var i=ji(),e=cj(),t=i("Map");return p_={Map:t,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:t.prototype},p_}var GP;function rte(){if(GP)return WP;GP=1;var i=pe(),e=tt(),t=Wr(),n=No(),r=Gx(),s=nte(),o=Rl(),a=Ue(),l=s.Map,c=s.has,u=s.get,h=s.set,d=e([].push),f=o||a(function(){return l.groupBy("ab",function(p){return p}).get("a").length!==1});return i({target:"Map",stat:!0,forced:o||f},{groupBy:function(m,g){n(m),t(g);var v=new l,y=0;return r(m,function(w){var b=g(w,y++);c(v,b)?d(u(v,b),w):h(v,b,[w])}),v}}),WP}var m_,YP;function ste(){if(YP)return m_;YP=1,Is(),ite(),rte(),Lf();var i=Lt();return m_=i.Map,m_}var g_,BP;function ote(){if(BP)return g_;BP=1;var i=ste();return Ds(),g_=i,g_}var v_,HP;function ate(){return HP||(HP=1,v_=ote()),v_}var lte=ate(),uj=Re(lte),UP={},VP;function cte(){if(VP)return UP;VP=1;var i=pe(),e=kl().some,t=Ff(),n=t("some");return i({target:"Array",proto:!0,forced:!n},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),UP}var y_,XP;function ute(){if(XP)return y_;XP=1,cte();var i=Ri();return y_=i("Array","some"),y_}var __,KP;function hte(){if(KP)return __;KP=1;var i=zt(),e=ute(),t=Array.prototype;return __=function(n){var r=n.some;return n===t||i(t,n)&&r===t.some?e:r},__}var b_,ZP;function dte(){if(ZP)return b_;ZP=1;var i=hte();return b_=i,b_}var w_,QP;function fte(){return QP||(QP=1,w_=dte()),w_}var pte=fte(),mte=Re(pte),x_,JP;function gte(){if(JP)return x_;JP=1,Is();var i=Ri();return x_=i("Array","keys"),x_}var S_,ek;function vte(){if(ek)return S_;ek=1;var i=gte();return S_=i,S_}var E_,tk;function yte(){if(tk)return E_;tk=1,Ds();var i=Rs(),e=qt(),t=zt(),n=vte(),r=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return E_=function(o){var a=o.keys;return o===r||t(r,o)&&a===r.keys||e(s,i(o))?n:a},E_}var C_,ik;function _te(){return ik||(ik=1,C_=yte()),C_}var bte=_te(),oa=Re(bte),nk={},T_,rk;function wte(){if(rk)return T_;rk=1;var i=Pl(),e=Math.floor,t=function(n,r){var s=n.length;if(s<8)for(var o=1,a,l;o<s;){for(l=o,a=n[o];l&&r(n[l-1],a)>0;)n[l]=n[--l];l!==o++&&(n[l]=a)}else for(var c=e(s/2),u=t(i(n,0,c),r),h=t(i(n,c),r),d=u.length,f=h.length,p=0,m=0;p<d||m<f;)n[p+m]=p<d&&m<f?r(u[p],h[m])<=0?u[p++]:h[m++]:p<d?u[p++]:h[m++];return n};return T_=t,T_}var R_,sk;function xte(){if(sk)return R_;sk=1;var i=El(),e=i.match(/firefox\/(\d+)/i);return R_=!!e&&+e[1],R_}var O_,ok;function Ste(){if(ok)return O_;ok=1;var i=El();return O_=/MSIE|Trident/.test(i),O_}var I_,ak;function Ete(){if(ak)return I_;ak=1;var i=El(),e=i.match(/AppleWebKit\/(\d+)\./);return I_=!!e&&+e[1],I_}var lk;function Cte(){if(lk)return nk;lk=1;var i=pe(),e=tt(),t=Wr(),n=Tn(),r=Ts(),s=T$(),o=Os(),a=Ue(),l=wte(),c=Ff(),u=xte(),h=Ste(),d=Pu(),f=Ete(),p=[],m=e(p.sort),g=e(p.push),v=a(function(){p.sort(void 0)}),y=a(function(){p.sort(null)}),w=c("sort"),b=!a(function(){if(d)return d<70;if(!(u&&u>3)){if(h)return!0;if(f)return f<603;var E="",S,R,I,k;for(S=65;S<76;S++){switch(R=String.fromCharCode(S),S){case 66:case 69:case 70:case 72:I=3;break;case 68:case 71:I=4;break;default:I=2}for(k=0;k<47;k++)p.push({k:R+k,v:I})}for(p.sort(function(M,N){return N.v-M.v}),k=0;k<p.length;k++)R=p[k].k.charAt(0),E.charAt(E.length-1)!==R&&(E+=R);return E!=="DGBEFHACIJK"}}),x=v||!y||!w||!b,C=function(E){return function(S,R){return R===void 0?-1:S===void 0?1:E!==void 0?+E(S,R)||0:o(S)>o(R)?1:-1}};return i({target:"Array",proto:!0,forced:x},{sort:function(S){S!==void 0&&t(S);var R=n(this);if(b)return S===void 0?m(R):m(R,S);var I=[],k=r(R),M,N;for(N=0;N<k;N++)N in R&&g(I,R[N]);for(l(I,C(S)),M=r(I),N=0;N<M;)R[N]=I[N++];for(;N<k;)s(R,N++);return R}}),nk}var D_,ck;function Tte(){if(ck)return D_;ck=1,Cte();var i=Ri();return D_=i("Array","sort"),D_}var P_,uk;function Rte(){if(uk)return P_;uk=1;var i=zt(),e=Tte(),t=Array.prototype;return P_=function(n){var r=n.sort;return n===t||i(t,n)&&r===t.sort?e:r},P_}var k_,hk;function Ote(){if(hk)return k_;hk=1;var i=Rte();return k_=i,k_}var M_,dk;function Ite(){return dk||(dk=1,M_=Ote()),M_}var Dte=Ite(),I0=Re(Dte),A_,fk;function Pte(){if(fk)return A_;fk=1,Is();var i=Ri();return A_=i("Array","values"),A_}var N_,pk;function kte(){if(pk)return N_;pk=1;var i=Pte();return N_=i,N_}var L_,mk;function Mte(){if(mk)return L_;mk=1,Ds();var i=Rs(),e=qt(),t=zt(),n=kte(),r=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return L_=function(o){var a=o.values;return o===r||t(r,o)&&a===r.values||e(s,i(o))?n:a},L_}var F_,gk;function Ate(){return gk||(gk=1,F_=Mte()),F_}var Nte=Ate(),vk=Re(Nte),$_,yk;function Lte(){return yk||(yk=1,$_=x$()),$_}var Fte=Lte(),Ra=Re(Fte),j_,_k;function $te(){if(_k)return j_;_k=1,Is();var i=Ri();return j_=i("Array","entries"),j_}var W_,bk;function jte(){if(bk)return W_;bk=1;var i=$te();return W_=i,W_}var z_,wk;function Wte(){if(wk)return z_;wk=1,Ds();var i=Rs(),e=qt(),t=zt(),n=jte(),r=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return z_=function(o){var a=o.entries;return o===r||t(r,o)&&a===r.entries||e(s,i(o))?n:a},z_}var q_,xk;function zte(){return xk||(xk=1,q_=Wte()),q_}var qte=zte(),Gte=Re(qte);const Bt=[];for(let i=0;i<256;++i)Bt.push((i+256).toString(16).slice(1));function Yte(i,e=0){return(Bt[i[e+0]]+Bt[i[e+1]]+Bt[i[e+2]]+Bt[i[e+3]]+"-"+Bt[i[e+4]]+Bt[i[e+5]]+"-"+Bt[i[e+6]]+Bt[i[e+7]]+"-"+Bt[i[e+8]]+Bt[i[e+9]]+"-"+Bt[i[e+10]]+Bt[i[e+11]]+Bt[i[e+12]]+Bt[i[e+13]]+Bt[i[e+14]]+Bt[i[e+15]]).toLowerCase()}let G_;const Bte=new Uint8Array(16);function Hte(){if(!G_){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");G_=crypto.getRandomValues.bind(crypto)}return G_(Bte)}const Ute=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var Sk={randomUUID:Ute};function Vte(i,e,t){i=i||{};const n=i.random??i.rng?.()??Hte();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Yte(n)}function Xte(i,e,t){return Sk.randomUUID&&!i?Sk.randomUUID():Vte(i)}function Ek(i){return typeof i=="string"||typeof i=="number"}let Kte=class hj{constructor(e){ds(this,"_queue",[]),ds(this,"_timeout",null),ds(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,t){const n=new hj(t);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const r=[{name:"flush",original:void 0}];if(t&&t.replace)for(let s=0;s<t.replace.length;s++){const o=t.replace[s];r.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:r},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,t=this._extended.methods;for(let n=0;n<t.length;n++){const r=t[n];r.original?e[r.name]=r.original:delete e[r.name]}this._extended=null}}replace(e,t){const n=this,r=e[t];if(!r)throw new Error("Method "+t+" undefined");e[t]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];n.queue({args:o,fn:r,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=kJ(()=>{this.flush()},this.delay))}flush(){var e,t;Gc(e=R$(t=this._queue).call(t,0)).call(e,n=>{n.fn.apply(n.context||n.fn,n.args||[])})}},Zte=class D0{constructor(){ds(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),ds(this,"subscribe",D0.prototype.on),ds(this,"unsubscribe",D0.prototype.off)}_trigger(e,t,n){var r;if(e==="*")throw new Error("Cannot trigger event *");Gc(r=[...this._subscribers[e],...this._subscribers["*"]]).call(r,s=>{s(e,t,n??null)})}on(e,t){typeof t=="function"&&this._subscribers[e].push(t)}off(e,t){var n;this._subscribers[e]=Ea(n=this._subscribers[e]).call(n,r=>r!==t)}};var Ck={},Tk={},Rk;function Qte(){if(Rk)return Tk;Rk=1;var i=aj(),e=lj();return i("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},e),Tk}var Ok;function Jte(){return Ok||(Ok=1,Qte()),Ck}var Ik={},Y_,Dk;function jo(){if(Dk)return Y_;Dk=1;var i=Tl(),e=TypeError;return Y_=function(t){if(typeof t=="object"&&"size"in t&&"has"in t&&"add"in t&&"delete"in t&&"keys"in t)return t;throw new e(i(t)+" is not a set")},Y_}var B_,Pk;function Wo(){if(Pk)return B_;Pk=1;var i=ji(),e=cj(),t=i("Set"),n=t.prototype;return B_={Set:t,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},B_}var H_,kk;function zo(){if(kk)return H_;kk=1;var i=Ti();return H_=function(e,t,n){for(var r=n?e:e.iterator,s=e.next,o,a;!(o=i(s,r)).done;)if(a=t(o.value),a!==void 0)return a},H_}var U_,Mk;function Gu(){if(Mk)return U_;Mk=1;var i=zo();return U_=function(e,t,n){return n?i(e.keys(),t,!0):e.forEach(t)},U_}var V_,Ak;function Yx(){if(Ak)return V_;Ak=1;var i=Wo(),e=Gu(),t=i.Set,n=i.add;return V_=function(r){var s=new t;return e(r,function(o){n(s,o)}),s},V_}var X_,Nk;function Yu(){return Nk||(Nk=1,X_=function(i){return i.size}),X_}var K_,Lk;function eie(){return Lk||(Lk=1,K_=function(i){return{iterator:i,next:i.next,done:!1}}),K_}var Z_,Fk;function qo(){if(Fk)return Z_;Fk=1;var i=Wr(),e=zr(),t=Ti(),n=Dl(),r=eie(),s="Invalid size",o=RangeError,a=TypeError,l=Math.max,c=function(u,h){this.set=u,this.size=l(h,0),this.has=i(u.has),this.keys=i(u.keys)};return c.prototype={getIterator:function(){return r(e(t(this.keys,this.set)))},includes:function(u){return t(this.has,this.set,u)}},Z_=function(u){e(u);var h=+u.size;if(h!==h)throw new a(s);var d=n(h);if(d<0)throw new o(s);return new c(u,d)},Z_}var Q_,$k;function tie(){if($k)return Q_;$k=1;var i=jo(),e=Wo(),t=Yx(),n=Yu(),r=qo(),s=Gu(),o=zo(),a=e.has,l=e.remove;return Q_=function(u){var h=i(this),d=r(u),f=t(h);return n(h)<=d.size?s(h,function(p){d.includes(p)&&l(f,p)}):o(d.getIterator(),function(p){a(f,p)&&l(f,p)}),f},Q_}var J_,jk;function Go(){return jk||(jk=1,J_=function(){return!1}),J_}var Wk;function iie(){if(Wk)return Ik;Wk=1;var i=pe(),e=tie(),t=Ue(),n=Go(),r=!n("difference",function(o){return o.size===0}),s=r||t(function(){var o={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var c=l++>1;return a.has(1)&&a.clear(),{done:c,value:2}}}}},a=new Set([1,2,3,4]);return a.difference(o).size!==3});return i({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),Ik}var zk={},eb,qk;function nie(){if(qk)return eb;qk=1;var i=jo(),e=Wo(),t=Yu(),n=qo(),r=Gu(),s=zo(),o=e.Set,a=e.add,l=e.has;return eb=function(u){var h=i(this),d=n(u),f=new o;return t(h)>d.size?s(d.getIterator(),function(p){l(h,p)&&a(f,p)}):r(h,function(p){d.includes(p)&&a(f,p)}),f},eb}var Gk;function rie(){if(Gk)return zk;Gk=1;var i=pe(),e=Ue(),t=nie(),n=Go(),r=!n("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return i({target:"Set",proto:!0,real:!0,forced:r},{intersection:t}),zk}var Yk={},tb,Bk;function sie(){if(Bk)return tb;Bk=1;var i=jo(),e=Wo().has,t=Yu(),n=qo(),r=Gu(),s=zo(),o=qx();return tb=function(l){var c=i(this),u=n(l);if(t(c)<=u.size)return r(c,function(d){if(u.includes(d))return!1},!0)!==!1;var h=u.getIterator();return s(h,function(d){if(e(c,d))return o(h,"normal",!1)})!==!1},tb}var Hk;function oie(){if(Hk)return Yk;Hk=1;var i=pe(),e=sie(),t=Go(),n=!t("isDisjointFrom",function(r){return!r});return i({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),Yk}var Uk={},ib,Vk;function aie(){if(Vk)return ib;Vk=1;var i=jo(),e=Yu(),t=Gu(),n=qo();return ib=function(s){var o=i(this),a=n(s);return e(o)>a.size?!1:t(o,function(l){if(!a.includes(l))return!1},!0)!==!1},ib}var Xk;function lie(){if(Xk)return Uk;Xk=1;var i=pe(),e=aie(),t=Go(),n=!t("isSubsetOf",function(r){return r});return i({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),Uk}var Kk={},nb,Zk;function cie(){if(Zk)return nb;Zk=1;var i=jo(),e=Wo().has,t=Yu(),n=qo(),r=zo(),s=qx();return nb=function(a){var l=i(this),c=n(a);if(t(l)<c.size)return!1;var u=c.getIterator();return r(u,function(h){if(!e(l,h))return s(u,"normal",!1)})!==!1},nb}var Qk;function uie(){if(Qk)return Kk;Qk=1;var i=pe(),e=cie(),t=Go(),n=!t("isSupersetOf",function(r){return!r});return i({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),Kk}var Jk={},rb,eM;function hie(){if(eM)return rb;eM=1;var i=jo(),e=Wo(),t=Yx(),n=qo(),r=zo(),s=e.add,o=e.has,a=e.remove;return rb=function(c){var u=i(this),h=n(c).getIterator(),d=t(u);return r(h,function(f){o(u,f)?a(d,f):s(d,f)}),d},rb}var sb,tM;function dj(){return tM||(tM=1,sb=function(i){try{var e=new Set,t={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[i](t);return n.size===1&&n.values().next().value===4}catch{return!1}}),sb}var iM;function die(){if(iM)return Jk;iM=1;var i=pe(),e=hie(),t=dj(),n=Go(),r=!n("symmetricDifference")||!t("symmetricDifference");return i({target:"Set",proto:!0,real:!0,forced:r},{symmetricDifference:e}),Jk}var nM={},ob,rM;function fie(){if(rM)return ob;rM=1;var i=jo(),e=Wo().add,t=Yx(),n=qo(),r=zo();return ob=function(o){var a=i(this),l=n(o).getIterator(),c=t(a);return r(l,function(u){e(c,u)}),c},ob}var sM;function pie(){if(sM)return nM;sM=1;var i=pe(),e=fie(),t=dj(),n=Go(),r=!n("union")||!t("union");return i({target:"Set",proto:!0,real:!0,forced:r},{union:e}),nM}var ab,oM;function mie(){if(oM)return ab;oM=1,Is(),Jte(),iie(),rie(),oie(),lie(),uie(),die(),pie(),Lf();var i=Lt();return ab=i.Set,ab}var lb,aM;function gie(){if(aM)return lb;aM=1;var i=mie();return Ds(),lb=i,lb}var cb,lM;function vie(){return lM||(lM=1,cb=gie()),cb}var yie=vie(),ub=Re(yie),hb,cM;function _ie(){if(cM)return hb;cM=1,Is(),Lf();var i=sj();return hb=i,hb}var db,uM;function bie(){if(uM)return db;uM=1;var i=_ie();return Ds(),db=i,db}var fb,hM;function wie(){if(hM)return fb;hM=1;var i=bie();return fb=i,fb}var pb,dM;function xie(){if(dM)return pb;dM=1;var i=wie();return pb=i,pb}var mb,fM;function Sie(){return fM||(fM=1,mb=xie()),mb}var gb,pM;function Eie(){return pM||(pM=1,gb=Sie()),gb}var Cie=Eie(),vb=Re(Cie);let mM=class cc{constructor(e){this._pairs=e}*[Ra](){for(const[e,t]of this._pairs)yield[e,t]}*entries(){for(const[e,t]of this._pairs)yield[e,t]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return fr(e=[...this._pairs]).call(e,t=>t[0])}toItemArray(){var e;return fr(e=[...this._pairs]).call(e,t=>t[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=mJ(null);for(const[t,n]of this._pairs)e[t]=n;return e}toMap(){return new uj(this._pairs)}toIdSet(){return new ub(this.toIdArray())}toItemSet(){return new ub(this.toItemArray())}cache(){return new cc([...this._pairs])}distinct(e){const t=new ub;for(const[n,r]of this._pairs)t.add(e(r,n));return t}filter(e){const t=this._pairs;return new cc({*[Ra](){for(const[n,r]of t)e(r,n)&&(yield[n,r])}})}forEach(e){for(const[t,n]of this._pairs)e(n,t)}map(e){const t=this._pairs;return new cc({*[Ra](){for(const[n,r]of t)yield[n,e(r,n)]}})}max(e){const t=vb(this._pairs);let n=t.next();if(n.done)return null;let r=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=t.next()).done;){const[o,a]=n.value,l=e(a,o);l>s&&(s=l,r=a)}return r}min(e){const t=vb(this._pairs);let n=t.next();if(n.done)return null;let r=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=t.next()).done;){const[o,a]=n.value,l=e(a,o);l<s&&(s=l,r=a)}return r}reduce(e,t){for(const[n,r]of this._pairs)t=e(t,r,n);return t}sort(e){return new cc({[Ra]:()=>{var t;return vb(I0(t=[...this._pairs]).call(t,(n,r)=>{let[s,o]=n,[a,l]=r;return e(o,l,s,a)}))}})}};function gM(i,e){var t=Ax(i);if(rP){var n=rP(i);e&&(n=Ea(n).call(n,function(r){return ij(i,r).enumerable})),t.push.apply(t,n)}return t}function vM(i){for(var e=1;e<arguments.length;e++){var t,n,r=arguments[e]!=null?arguments[e]:{};e%2?Gc(t=gM(Object(r),!0)).call(t,function(s){ds(i,s,r[s])}):mP?Bee(i,mP(r)):Gc(n=gM(Object(r))).call(n,function(s){Vee(i,s,ij(r,s))})}return i}function Tie(i,e){return i[e]==null&&(i[e]=Xte()),i}let wd=class extends Zte{get idProp(){return this._idProp}constructor(e,t){super(),ds(this,"_queue",null),e&&!Dn(e)&&(t=e,e=[]),this._options=t||{},this._data=new uj,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(t)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=Kte.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,t){const n=[];let r;if(Dn(e)){const s=fr(e).call(e,o=>o[this._idProp]);if(mte(s).call(s,o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,a=e.length;o<a;o++)r=this._addItem(e[o]),n.push(r)}else if(e&&typeof e=="object")r=this._addItem(e),n.push(r);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},t),n}update(e,t){const n=[],r=[],s=[],o=[],a=this._idProp,l=c=>{const u=c[a];if(u!=null&&this._data.has(u)){const h=c,d=nJ({},this._data.get(u)),f=this._updateItem(h);r.push(f),o.push(h),s.push(d)}else{const h=this._addItem(c);n.push(h)}};if(Dn(e))for(let c=0,u=e.length;c<u;c++)e[c]&&typeof e[c]=="object"?l(e[c]):console.warn("Ignoring input item, which is not an object at index "+c);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},t),r.length){const c={items:r,oldData:s,data:o};this._trigger("update",c,t)}return cJ(n).call(n,r)}updateOnly(e,t){var n;Dn(e)||(e=[e]);const r=fr(n=fr(e).call(e,s=>{const o=this._data.get(s[this._idProp]);if(o==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:o,update:s}})).call(n,s=>{let{oldData:o,update:a}=s;const l=o[this._idProp],c=xee(o,a);return this._data.set(l,c),{id:l,oldData:o,updatedData:c}});if(r.length){const s={items:fr(r).call(r,o=>o.id),oldData:fr(r).call(r,o=>o.oldData),data:fr(r).call(r,o=>o.updatedData)};return this._trigger("update",s,t),s.items}else return[]}get(e,t){let n,r,s;Ek(e)?(n=e,s=t):Dn(e)?(r=e,s=t):s=e;const o=s&&s.returnType==="Object"?"Object":"Array",a=s&&Ea(s),l=[];let c,u,h;if(n!=null)c=this._data.get(n),c&&a&&!a(c)&&(c=void 0);else if(r!=null)for(let f=0,p=r.length;f<p;f++)c=this._data.get(r[f]),c!=null&&(!a||a(c))&&l.push(c);else{var d;u=[...oa(d=this._data).call(d)];for(let f=0,p=u.length;f<p;f++)h=u[f],c=this._data.get(h),c!=null&&(!a||a(c))&&l.push(c)}if(s&&s.order&&n==null&&this._sort(l,s.order),s&&s.fields){const f=s.fields;if(n!=null&&c!=null)c=this._filterFields(c,f);else for(let p=0,m=l.length;p<m;p++)l[p]=this._filterFields(l[p],f)}if(o=="Object"){const f={};for(let p=0,m=l.length;p<m;p++){const g=l[p],v=g[this._idProp];f[v]=g}return f}else return n!=null?c??null:l}getIds(e){const t=this._data,n=e&&Ea(e),r=e&&e.order,s=[...oa(t).call(t)],o=[];if(n)if(r){const a=[];for(let l=0,c=s.length;l<c;l++){const u=s[l],h=this._data.get(u);h!=null&&n(h)&&a.push(h)}this._sort(a,r);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],u=this._data.get(c);u!=null&&n(u)&&o.push(u[this._idProp])}else if(r){const a=[];for(let l=0,c=s.length;l<c;l++){const u=s[l];a.push(t.get(u))}this._sort(a,r);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],u=t.get(c);u!=null&&o.push(u[this._idProp])}return o}getDataSet(){return this}forEach(e,t){const n=t&&Ea(t),r=this._data,s=[...oa(r).call(r)];if(t&&t.order){const o=this.get(t);for(let a=0,l=o.length;a<l;a++){const c=o[a],u=c[this._idProp];e(c,u)}}else for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._data.get(l);c!=null&&(!n||n(c))&&e(c,l)}}map(e,t){const n=t&&Ea(t),r=[],s=this._data,o=[...oa(s).call(s)];for(let a=0,l=o.length;a<l;a++){const c=o[a],u=this._data.get(c);u!=null&&(!n||n(u))&&r.push(e(u,c))}return t&&t.order&&this._sort(r,t.order),r}_filterFields(e,t){var n;return e&&B7(n=Dn(t)?t:Ax(t)).call(n,(r,s)=>(r[s]=e[s],r),{})}_sort(e,t){if(typeof t=="string"){const n=t;I0(e).call(e,(r,s)=>{const o=r[n],a=s[n];return o>a?1:o<a?-1:0})}else if(typeof t=="function")I0(e).call(e,t);else throw new TypeError("Order must be a function or a string")}remove(e,t){const n=[],r=[],s=Dn(e)?e:[e];for(let o=0,a=s.length;o<a;o++){const l=this._remove(s[o]);if(l){const c=l[this._idProp];c!=null&&(n.push(c),r.push(l))}}return n.length&&this._trigger("remove",{items:n,oldData:r},t),n}_remove(e){let t;if(Ek(e)?t=e:e&&typeof e=="object"&&(t=e[this._idProp]),t!=null&&this._data.has(t)){const n=this._data.get(t)||null;return this._data.delete(t),--this.length,n}return null}clear(e){var t;const n=[...oa(t=this._data).call(t)],r=[];for(let s=0,o=n.length;s<o;s++)r.push(this._data.get(n[s]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:r},e),n}max(e){let t=null,n=null;for(const s of vk(r=this._data).call(r)){var r;const o=s[e];typeof o=="number"&&(n==null||o>n)&&(t=s,n=o)}return t||null}min(e){let t=null,n=null;for(const s of vk(r=this._data).call(r)){var r;const o=s[e];typeof o=="number"&&(n==null||o<n)&&(t=s,n=o)}return t||null}distinct(e){const t=this._data,n=[...oa(t).call(t)],r=[];let s=0;for(let o=0,a=n.length;o<a;o++){const l=n[o],u=t.get(l)[e];let h=!1;for(let d=0;d<s;d++)if(r[d]==u){h=!0;break}!h&&u!==void 0&&(r[s]=u,s++)}return r}_addItem(e){const t=Tie(e,this._idProp),n=t[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,t),++this.length,n}_updateItem(e){const t=e[this._idProp];if(t==null)throw new Error("Cannot update item: item has no id (item: "+EJ(e)+")");const n=this._data.get(t);if(!n)throw new Error("Cannot update item: no item with id "+t+" found");return this._data.set(t,vM(vM({},n),e)),t}stream(e){if(e){const n=this._data;return new mM({*[Ra](){for(const r of e){const s=n.get(r);s!=null&&(yield[r,s])}}})}else{var t;return new mM({[Ra]:S$(t=Gte(this._data)).call(t,this._data)})}}};//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var fj;function X(){return fj.apply(null,arguments)}function Rie(i){fj=i}function bn(i){return i instanceof Array||Object.prototype.toString.call(i)==="[object Array]"}function ao(i){return i!=null&&Object.prototype.toString.call(i)==="[object Object]"}function Le(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function Bx(i){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(i).length===0;var e;for(e in i)if(Le(i,e))return!1;return!0}function mi(i){return i===void 0}function Lr(i){return typeof i=="number"||Object.prototype.toString.call(i)==="[object Number]"}function Bu(i){return i instanceof Date||Object.prototype.toString.call(i)==="[object Date]"}function pj(i,e){var t=[],n,r=i.length;for(n=0;n<r;++n)t.push(e(i[n],n));return t}function ls(i,e){for(var t in e)Le(e,t)&&(i[t]=e[t]);return Le(e,"toString")&&(i.toString=e.toString),Le(e,"valueOf")&&(i.valueOf=e.valueOf),i}function Qn(i,e,t,n){return Fj(i,e,t,n,!0).utc()}function Oie(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function _e(i){return i._pf==null&&(i._pf=Oie()),i._pf}var P0;Array.prototype.some?P0=Array.prototype.some:P0=function(i){var e=Object(this),t=e.length>>>0,n;for(n=0;n<t;n++)if(n in e&&i.call(this,e[n],n,e))return!0;return!1};function Hx(i){var e=null,t=!1,n=i._d&&!isNaN(i._d.getTime());if(n&&(e=_e(i),t=P0.call(e.parsedDateParts,function(r){return r!=null}),n=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),i._strict&&(n=n&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(i))i._isValid=n;else return n;return i._isValid}function Wf(i){var e=Qn(NaN);return i!=null?ls(_e(e),i):_e(e).userInvalidated=!0,e}var yM=X.momentProperties=[],yb=!1;function Ux(i,e){var t,n,r,s=yM.length;if(mi(e._isAMomentObject)||(i._isAMomentObject=e._isAMomentObject),mi(e._i)||(i._i=e._i),mi(e._f)||(i._f=e._f),mi(e._l)||(i._l=e._l),mi(e._strict)||(i._strict=e._strict),mi(e._tzm)||(i._tzm=e._tzm),mi(e._isUTC)||(i._isUTC=e._isUTC),mi(e._offset)||(i._offset=e._offset),mi(e._pf)||(i._pf=_e(e)),mi(e._locale)||(i._locale=e._locale),s>0)for(t=0;t<s;t++)n=yM[t],r=e[n],mi(r)||(i[n]=r);return i}function Hu(i){Ux(this,i),this._d=new Date(i._d!=null?i._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),yb===!1&&(yb=!0,X.updateOffset(this),yb=!1)}function wn(i){return i instanceof Hu||i!=null&&i._isAMomentObject!=null}function mj(i){X.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+i)}function nn(i,e){var t=!0;return ls(function(){if(X.deprecationHandler!=null&&X.deprecationHandler(null,i),t){var n=[],r,s,o,a=arguments.length;for(s=0;s<a;s++){if(r="",typeof arguments[s]=="object"){r+=`
[`+s+"] ";for(o in arguments[0])Le(arguments[0],o)&&(r+=o+": "+arguments[0][o]+", ");r=r.slice(0,-2)}else r=arguments[s];n.push(r)}mj(i+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var _M={};function gj(i,e){X.deprecationHandler!=null&&X.deprecationHandler(i,e),_M[i]||(mj(e),_M[i]=!0)}X.suppressDeprecationWarnings=!1;X.deprecationHandler=null;function Jn(i){return typeof Function<"u"&&i instanceof Function||Object.prototype.toString.call(i)==="[object Function]"}function Iie(i){var e,t;for(t in i)Le(i,t)&&(e=i[t],Jn(e)?this[t]=e:this["_"+t]=e);this._config=i,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function k0(i,e){var t=ls({},i),n;for(n in e)Le(e,n)&&(ao(i[n])&&ao(e[n])?(t[n]={},ls(t[n],i[n]),ls(t[n],e[n])):e[n]!=null?t[n]=e[n]:delete t[n]);for(n in i)Le(i,n)&&!Le(e,n)&&ao(i[n])&&(t[n]=ls({},t[n]));return t}function Vx(i){i!=null&&this.set(i)}var M0;Object.keys?M0=Object.keys:M0=function(i){var e,t=[];for(e in i)Le(i,e)&&t.push(e);return t};var Die={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Pie(i,e,t){var n=this._calendar[i]||this._calendar.sameElse;return Jn(n)?n.call(e,t):n}function Un(i,e,t){var n=""+Math.abs(i),r=e-n.length,s=i>=0;return(s?t?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}var Xx=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Oh=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,_b={},za={};function re(i,e,t,n){var r=n;typeof n=="string"&&(r=function(){return this[n]()}),i&&(za[i]=r),e&&(za[e[0]]=function(){return Un(r.apply(this,arguments),e[1],e[2])}),t&&(za[t]=function(){return this.localeData().ordinal(r.apply(this,arguments),i)})}function kie(i){return i.match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"")}function Mie(i){var e=i.match(Xx),t,n;for(t=0,n=e.length;t<n;t++)za[e[t]]?e[t]=za[e[t]]:e[t]=kie(e[t]);return function(r){var s="",o;for(o=0;o<n;o++)s+=Jn(e[o])?e[o].call(r,i):e[o];return s}}function Hh(i,e){return i.isValid()?(e=vj(e,i.localeData()),_b[e]=_b[e]||Mie(e),_b[e](i)):i.localeData().invalidDate()}function vj(i,e){var t=5;function n(r){return e.longDateFormat(r)||r}for(Oh.lastIndex=0;t>=0&&Oh.test(i);)i=i.replace(Oh,n),Oh.lastIndex=0,t-=1;return i}var Aie={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Nie(i){var e=this._longDateFormat[i],t=this._longDateFormat[i.toUpperCase()];return e||!t?e:(this._longDateFormat[i]=t.match(Xx).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[i])}var Lie="Invalid date";function Fie(){return this._invalidDate}var $ie="%d",jie=/\d{1,2}/;function Wie(i){return this._ordinal.replace("%d",i)}var zie={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function qie(i,e,t,n){var r=this._relativeTime[t];return Jn(r)?r(i,e,t,n):r.replace(/%d/i,i)}function Gie(i,e){var t=this._relativeTime[i>0?"future":"past"];return Jn(t)?t(e):t.replace(/%s/i,e)}var bM={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function rn(i){return typeof i=="string"?bM[i]||bM[i.toLowerCase()]:void 0}function Kx(i){var e={},t,n;for(n in i)Le(i,n)&&(t=rn(n),t&&(e[t]=i[n]));return e}var Yie={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Bie(i){var e=[],t;for(t in i)Le(i,t)&&e.push({unit:t,priority:Yie[t]});return e.sort(function(n,r){return n.priority-r.priority}),e}var yj=/\d/,Wi=/\d\d/,_j=/\d{3}/,Zx=/\d{4}/,zf=/[+-]?\d{6}/,at=/\d\d?/,bj=/\d\d\d\d?/,wj=/\d\d\d\d\d\d?/,qf=/\d{1,3}/,Qx=/\d{1,4}/,Gf=/[+-]?\d{1,6}/,Nl=/\d+/,Yf=/[+-]?\d+/,Hie=/Z|[+-]\d\d:?\d\d/gi,Bf=/Z|[+-]\d\d(?::?\d\d)?/gi,Uie=/[+-]?\d+(\.\d{1,3})?/,Uu=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ll=/^[1-9]\d?/,Jx=/^([1-9]\d|\d)/,xd;xd={};function ee(i,e,t){xd[i]=Jn(e)?e:function(n,r){return n&&t?t:e}}function Vie(i,e){return Le(xd,i)?xd[i](e._strict,e._locale):new RegExp(Xie(i))}function Xie(i){return Tr(i.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,s){return t||n||r||s}))}function Tr(i){return i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Hi(i){return i<0?Math.ceil(i)||0:Math.floor(i)}function Te(i){var e=+i,t=0;return e!==0&&isFinite(e)&&(t=Hi(e)),t}var A0={};function Qe(i,e){var t,n=e,r;for(typeof i=="string"&&(i=[i]),Lr(e)&&(n=function(s,o){o[e]=Te(s)}),r=i.length,t=0;t<r;t++)A0[i[t]]=n}function Vu(i,e){Qe(i,function(t,n,r,s){r._w=r._w||{},e(t,r._w,r,s)})}function Kie(i,e,t){e!=null&&Le(A0,i)&&A0[i](e,t._a,t,i)}function Hf(i){return i%4===0&&i%100!==0||i%400===0}var ii=0,yr=1,An=2,At=3,dn=4,_r=5,to=6,Zie=7,Qie=8;re("Y",0,0,function(){var i=this.year();return i<=9999?Un(i,4):"+"+i});re(0,["YY",2],0,function(){return this.year()%100});re(0,["YYYY",4],0,"year");re(0,["YYYYY",5],0,"year");re(0,["YYYYYY",6,!0],0,"year");ee("Y",Yf);ee("YY",at,Wi);ee("YYYY",Qx,Zx);ee("YYYYY",Gf,zf);ee("YYYYYY",Gf,zf);Qe(["YYYYY","YYYYYY"],ii);Qe("YYYY",function(i,e){e[ii]=i.length===2?X.parseTwoDigitYear(i):Te(i)});Qe("YY",function(i,e){e[ii]=X.parseTwoDigitYear(i)});Qe("Y",function(i,e){e[ii]=parseInt(i,10)});function bc(i){return Hf(i)?366:365}X.parseTwoDigitYear=function(i){return Te(i)+(Te(i)>68?1900:2e3)};var xj=Fl("FullYear",!0);function Jie(){return Hf(this.year())}function Fl(i,e){return function(t){return t!=null?(Sj(this,i,t),X.updateOffset(this,e),this):Xc(this,i)}}function Xc(i,e){if(!i.isValid())return NaN;var t=i._d,n=i._isUTC;switch(e){case"Milliseconds":return n?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return n?t.getUTCSeconds():t.getSeconds();case"Minutes":return n?t.getUTCMinutes():t.getMinutes();case"Hours":return n?t.getUTCHours():t.getHours();case"Date":return n?t.getUTCDate():t.getDate();case"Day":return n?t.getUTCDay():t.getDay();case"Month":return n?t.getUTCMonth():t.getMonth();case"FullYear":return n?t.getUTCFullYear():t.getFullYear();default:return NaN}}function Sj(i,e,t){var n,r,s,o,a;if(!(!i.isValid()||isNaN(t))){switch(n=i._d,r=i._isUTC,e){case"Milliseconds":return void(r?n.setUTCMilliseconds(t):n.setMilliseconds(t));case"Seconds":return void(r?n.setUTCSeconds(t):n.setSeconds(t));case"Minutes":return void(r?n.setUTCMinutes(t):n.setMinutes(t));case"Hours":return void(r?n.setUTCHours(t):n.setHours(t));case"Date":return void(r?n.setUTCDate(t):n.setDate(t));case"FullYear":break;default:return}s=t,o=i.month(),a=i.date(),a=a===29&&o===1&&!Hf(s)?28:a,r?n.setUTCFullYear(s,o,a):n.setFullYear(s,o,a)}}function ene(i){return i=rn(i),Jn(this[i])?this[i]():this}function tne(i,e){if(typeof i=="object"){i=Kx(i);var t=Bie(i),n,r=t.length;for(n=0;n<r;n++)this[t[n].unit](i[t[n].unit])}else if(i=rn(i),Jn(this[i]))return this[i](e);return this}function ine(i,e){return(i%e+e)%e}var Et;Array.prototype.indexOf?Et=Array.prototype.indexOf:Et=function(i){var e;for(e=0;e<this.length;++e)if(this[e]===i)return e;return-1};function eS(i,e){if(isNaN(i)||isNaN(e))return NaN;var t=ine(e,12);return i+=(e-t)/12,t===1?Hf(i)?29:28:31-t%7%2}re("M",["MM",2],"Mo",function(){return this.month()+1});re("MMM",0,0,function(i){return this.localeData().monthsShort(this,i)});re("MMMM",0,0,function(i){return this.localeData().months(this,i)});ee("M",at,Ll);ee("MM",at,Wi);ee("MMM",function(i,e){return e.monthsShortRegex(i)});ee("MMMM",function(i,e){return e.monthsRegex(i)});Qe(["M","MM"],function(i,e){e[yr]=Te(i)-1});Qe(["MMM","MMMM"],function(i,e,t,n){var r=t._locale.monthsParse(i,n,t._strict);r!=null?e[yr]=r:_e(t).invalidMonth=i});var nne="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ej="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Cj=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,rne=Uu,sne=Uu;function one(i,e){return i?bn(this._months)?this._months[i.month()]:this._months[(this._months.isFormat||Cj).test(e)?"format":"standalone"][i.month()]:bn(this._months)?this._months:this._months.standalone}function ane(i,e){return i?bn(this._monthsShort)?this._monthsShort[i.month()]:this._monthsShort[Cj.test(e)?"format":"standalone"][i.month()]:bn(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function lne(i,e,t){var n,r,s,o=i.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)s=Qn([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(s,"").toLocaleLowerCase();return t?e==="MMM"?(r=Et.call(this._shortMonthsParse,o),r!==-1?r:null):(r=Et.call(this._longMonthsParse,o),r!==-1?r:null):e==="MMM"?(r=Et.call(this._shortMonthsParse,o),r!==-1?r:(r=Et.call(this._longMonthsParse,o),r!==-1?r:null)):(r=Et.call(this._longMonthsParse,o),r!==-1?r:(r=Et.call(this._shortMonthsParse,o),r!==-1?r:null))}function cne(i,e,t){var n,r,s;if(this._monthsParseExact)return lne.call(this,i,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(r=Qn([2e3,n]),t&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!t&&!this._monthsParse[n]&&(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[n].test(i))return n;if(t&&e==="MMM"&&this._shortMonthsParse[n].test(i))return n;if(!t&&this._monthsParse[n].test(i))return n}}function Tj(i,e){if(!i.isValid())return i;if(typeof e=="string"){if(/^\d+$/.test(e))e=Te(e);else if(e=i.localeData().monthsParse(e),!Lr(e))return i}var t=e,n=i.date();return n=n<29?n:Math.min(n,eS(i.year(),t)),i._isUTC?i._d.setUTCMonth(t,n):i._d.setMonth(t,n),i}function Rj(i){return i!=null?(Tj(this,i),X.updateOffset(this,!0),this):Xc(this,"Month")}function une(){return eS(this.year(),this.month())}function hne(i){return this._monthsParseExact?(Le(this,"_monthsRegex")||Oj.call(this),i?this._monthsShortStrictRegex:this._monthsShortRegex):(Le(this,"_monthsShortRegex")||(this._monthsShortRegex=rne),this._monthsShortStrictRegex&&i?this._monthsShortStrictRegex:this._monthsShortRegex)}function dne(i){return this._monthsParseExact?(Le(this,"_monthsRegex")||Oj.call(this),i?this._monthsStrictRegex:this._monthsRegex):(Le(this,"_monthsRegex")||(this._monthsRegex=sne),this._monthsStrictRegex&&i?this._monthsStrictRegex:this._monthsRegex)}function Oj(){function i(l,c){return c.length-l.length}var e=[],t=[],n=[],r,s,o,a;for(r=0;r<12;r++)s=Qn([2e3,r]),o=Tr(this.monthsShort(s,"")),a=Tr(this.months(s,"")),e.push(o),t.push(a),n.push(a),n.push(o);e.sort(i),t.sort(i),n.sort(i),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function fne(i,e,t,n,r,s,o){var a;return i<100&&i>=0?(a=new Date(i+400,e,t,n,r,s,o),isFinite(a.getFullYear())&&a.setFullYear(i)):a=new Date(i,e,t,n,r,s,o),a}function Kc(i){var e,t;return i<100&&i>=0?(t=Array.prototype.slice.call(arguments),t[0]=i+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(i)):e=new Date(Date.UTC.apply(null,arguments)),e}function Sd(i,e,t){var n=7+e-t,r=(7+Kc(i,0,n).getUTCDay()-e)%7;return-r+n-1}function Ij(i,e,t,n,r){var s=(7+t-n)%7,o=Sd(i,n,r),a=1+7*(e-1)+s+o,l,c;return a<=0?(l=i-1,c=bc(l)+a):a>bc(i)?(l=i+1,c=a-bc(i)):(l=i,c=a),{year:l,dayOfYear:c}}function Zc(i,e,t){var n=Sd(i.year(),e,t),r=Math.floor((i.dayOfYear()-n-1)/7)+1,s,o;return r<1?(o=i.year()-1,s=r+Rr(o,e,t)):r>Rr(i.year(),e,t)?(s=r-Rr(i.year(),e,t),o=i.year()+1):(o=i.year(),s=r),{week:s,year:o}}function Rr(i,e,t){var n=Sd(i,e,t),r=Sd(i+1,e,t);return(bc(i)-n+r)/7}re("w",["ww",2],"wo","week");re("W",["WW",2],"Wo","isoWeek");ee("w",at,Ll);ee("ww",at,Wi);ee("W",at,Ll);ee("WW",at,Wi);Vu(["w","ww","W","WW"],function(i,e,t,n){e[n.substr(0,1)]=Te(i)});function pne(i){return Zc(i,this._week.dow,this._week.doy).week}var mne={dow:0,doy:6};function gne(){return this._week.dow}function vne(){return this._week.doy}function yne(i){var e=this.localeData().week(this);return i==null?e:this.add((i-e)*7,"d")}function _ne(i){var e=Zc(this,1,4).week;return i==null?e:this.add((i-e)*7,"d")}re("d",0,"do","day");re("dd",0,0,function(i){return this.localeData().weekdaysMin(this,i)});re("ddd",0,0,function(i){return this.localeData().weekdaysShort(this,i)});re("dddd",0,0,function(i){return this.localeData().weekdays(this,i)});re("e",0,0,"weekday");re("E",0,0,"isoWeekday");ee("d",at);ee("e",at);ee("E",at);ee("dd",function(i,e){return e.weekdaysMinRegex(i)});ee("ddd",function(i,e){return e.weekdaysShortRegex(i)});ee("dddd",function(i,e){return e.weekdaysRegex(i)});Vu(["dd","ddd","dddd"],function(i,e,t,n){var r=t._locale.weekdaysParse(i,n,t._strict);r!=null?e.d=r:_e(t).invalidWeekday=i});Vu(["d","e","E"],function(i,e,t,n){e[n]=Te(i)});function bne(i,e){return typeof i!="string"?i:isNaN(i)?(i=e.weekdaysParse(i),typeof i=="number"?i:null):parseInt(i,10)}function wne(i,e){return typeof i=="string"?e.weekdaysParse(i)%7||7:isNaN(i)?null:i}function tS(i,e){return i.slice(e,7).concat(i.slice(0,e))}var xne="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Dj="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Sne="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ene=Uu,Cne=Uu,Tne=Uu;function Rne(i,e){var t=bn(this._weekdays)?this._weekdays:this._weekdays[i&&i!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return i===!0?tS(t,this._week.dow):i?t[i.day()]:t}function One(i){return i===!0?tS(this._weekdaysShort,this._week.dow):i?this._weekdaysShort[i.day()]:this._weekdaysShort}function Ine(i){return i===!0?tS(this._weekdaysMin,this._week.dow):i?this._weekdaysMin[i.day()]:this._weekdaysMin}function Dne(i,e,t){var n,r,s,o=i.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)s=Qn([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(s,"").toLocaleLowerCase();return t?e==="dddd"?(r=Et.call(this._weekdaysParse,o),r!==-1?r:null):e==="ddd"?(r=Et.call(this._shortWeekdaysParse,o),r!==-1?r:null):(r=Et.call(this._minWeekdaysParse,o),r!==-1?r:null):e==="dddd"?(r=Et.call(this._weekdaysParse,o),r!==-1||(r=Et.call(this._shortWeekdaysParse,o),r!==-1)?r:(r=Et.call(this._minWeekdaysParse,o),r!==-1?r:null)):e==="ddd"?(r=Et.call(this._shortWeekdaysParse,o),r!==-1||(r=Et.call(this._weekdaysParse,o),r!==-1)?r:(r=Et.call(this._minWeekdaysParse,o),r!==-1?r:null)):(r=Et.call(this._minWeekdaysParse,o),r!==-1||(r=Et.call(this._weekdaysParse,o),r!==-1)?r:(r=Et.call(this._shortWeekdaysParse,o),r!==-1?r:null))}function Pne(i,e,t){var n,r,s;if(this._weekdaysParseExact)return Dne.call(this,i,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(r=Qn([2e3,1]).day(n),t&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(s="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(s.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[n].test(i))return n;if(t&&e==="ddd"&&this._shortWeekdaysParse[n].test(i))return n;if(t&&e==="dd"&&this._minWeekdaysParse[n].test(i))return n;if(!t&&this._weekdaysParse[n].test(i))return n}}function kne(i){if(!this.isValid())return i!=null?this:NaN;var e=Xc(this,"Day");return i!=null?(i=bne(i,this.localeData()),this.add(i-e,"d")):e}function Mne(i){if(!this.isValid())return i!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return i==null?e:this.add(i-e,"d")}function Ane(i){if(!this.isValid())return i!=null?this:NaN;if(i!=null){var e=wne(i,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function Nne(i){return this._weekdaysParseExact?(Le(this,"_weekdaysRegex")||iS.call(this),i?this._weekdaysStrictRegex:this._weekdaysRegex):(Le(this,"_weekdaysRegex")||(this._weekdaysRegex=Ene),this._weekdaysStrictRegex&&i?this._weekdaysStrictRegex:this._weekdaysRegex)}function Lne(i){return this._weekdaysParseExact?(Le(this,"_weekdaysRegex")||iS.call(this),i?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Le(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Cne),this._weekdaysShortStrictRegex&&i?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Fne(i){return this._weekdaysParseExact?(Le(this,"_weekdaysRegex")||iS.call(this),i?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Le(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Tne),this._weekdaysMinStrictRegex&&i?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function iS(){function i(u,h){return h.length-u.length}var e=[],t=[],n=[],r=[],s,o,a,l,c;for(s=0;s<7;s++)o=Qn([2e3,1]).day(s),a=Tr(this.weekdaysMin(o,"")),l=Tr(this.weekdaysShort(o,"")),c=Tr(this.weekdays(o,"")),e.push(a),t.push(l),n.push(c),r.push(a),r.push(l),r.push(c);e.sort(i),t.sort(i),n.sort(i),r.sort(i),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function nS(){return this.hours()%12||12}function $ne(){return this.hours()||24}re("H",["HH",2],0,"hour");re("h",["hh",2],0,nS);re("k",["kk",2],0,$ne);re("hmm",0,0,function(){return""+nS.apply(this)+Un(this.minutes(),2)});re("hmmss",0,0,function(){return""+nS.apply(this)+Un(this.minutes(),2)+Un(this.seconds(),2)});re("Hmm",0,0,function(){return""+this.hours()+Un(this.minutes(),2)});re("Hmmss",0,0,function(){return""+this.hours()+Un(this.minutes(),2)+Un(this.seconds(),2)});function Pj(i,e){re(i,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}Pj("a",!0);Pj("A",!1);function kj(i,e){return e._meridiemParse}ee("a",kj);ee("A",kj);ee("H",at,Jx);ee("h",at,Ll);ee("k",at,Ll);ee("HH",at,Wi);ee("hh",at,Wi);ee("kk",at,Wi);ee("hmm",bj);ee("hmmss",wj);ee("Hmm",bj);ee("Hmmss",wj);Qe(["H","HH"],At);Qe(["k","kk"],function(i,e,t){var n=Te(i);e[At]=n===24?0:n});Qe(["a","A"],function(i,e,t){t._isPm=t._locale.isPM(i),t._meridiem=i});Qe(["h","hh"],function(i,e,t){e[At]=Te(i),_e(t).bigHour=!0});Qe("hmm",function(i,e,t){var n=i.length-2;e[At]=Te(i.substr(0,n)),e[dn]=Te(i.substr(n)),_e(t).bigHour=!0});Qe("hmmss",function(i,e,t){var n=i.length-4,r=i.length-2;e[At]=Te(i.substr(0,n)),e[dn]=Te(i.substr(n,2)),e[_r]=Te(i.substr(r)),_e(t).bigHour=!0});Qe("Hmm",function(i,e,t){var n=i.length-2;e[At]=Te(i.substr(0,n)),e[dn]=Te(i.substr(n))});Qe("Hmmss",function(i,e,t){var n=i.length-4,r=i.length-2;e[At]=Te(i.substr(0,n)),e[dn]=Te(i.substr(n,2)),e[_r]=Te(i.substr(r))});function jne(i){return(i+"").toLowerCase().charAt(0)==="p"}var Wne=/[ap]\.?m?\.?/i,zne=Fl("Hours",!0);function qne(i,e,t){return i>11?t?"pm":"PM":t?"am":"AM"}var Mj={calendar:Die,longDateFormat:Aie,invalidDate:Lie,ordinal:$ie,dayOfMonthOrdinalParse:jie,relativeTime:zie,months:nne,monthsShort:Ej,week:mne,weekdays:xne,weekdaysMin:Sne,weekdaysShort:Dj,meridiemParse:Wne},ht={},Zl={},Qc;function Gne(i,e){var t,n=Math.min(i.length,e.length);for(t=0;t<n;t+=1)if(i[t]!==e[t])return t;return n}function wM(i){return i&&i.toLowerCase().replace("_","-")}function Yne(i){for(var e=0,t,n,r,s;e<i.length;){for(s=wM(i[e]).split("-"),t=s.length,n=wM(i[e+1]),n=n?n.split("-"):null;t>0;){if(r=Uf(s.slice(0,t).join("-")),r)return r;if(n&&n.length>=t&&Gne(s,n)>=t-1)break;t--}e++}return Qc}function Bne(i){return!!(i&&i.match("^[^/\\\\]*$"))}function Uf(i){var e=null,t;if(ht[i]===void 0&&typeof module<"u"&&module&&module.exports&&Bne(i))try{e=Qc._abbr,t=require,t("./locale/"+i),ps(e)}catch{ht[i]=null}return ht[i]}function ps(i,e){var t;return i&&(mi(e)?t=qr(i):t=rS(i,e),t?Qc=t:typeof console<"u"&&console.warn&&console.warn("Locale "+i+" not found. Did you forget to load it?")),Qc._abbr}function rS(i,e){if(e!==null){var t,n=Mj;if(e.abbr=i,ht[i]!=null)gj("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=ht[i]._config;else if(e.parentLocale!=null)if(ht[e.parentLocale]!=null)n=ht[e.parentLocale]._config;else if(t=Uf(e.parentLocale),t!=null)n=t._config;else return Zl[e.parentLocale]||(Zl[e.parentLocale]=[]),Zl[e.parentLocale].push({name:i,config:e}),null;return ht[i]=new Vx(k0(n,e)),Zl[i]&&Zl[i].forEach(function(r){rS(r.name,r.config)}),ps(i),ht[i]}else return delete ht[i],null}function Hne(i,e){if(e!=null){var t,n,r=Mj;ht[i]!=null&&ht[i].parentLocale!=null?ht[i].set(k0(ht[i]._config,e)):(n=Uf(i),n!=null&&(r=n._config),e=k0(r,e),n==null&&(e.abbr=i),t=new Vx(e),t.parentLocale=ht[i],ht[i]=t),ps(i)}else ht[i]!=null&&(ht[i].parentLocale!=null?(ht[i]=ht[i].parentLocale,i===ps()&&ps(i)):ht[i]!=null&&delete ht[i]);return ht[i]}function qr(i){var e;if(i&&i._locale&&i._locale._abbr&&(i=i._locale._abbr),!i)return Qc;if(!bn(i)){if(e=Uf(i),e)return e;i=[i]}return Yne(i)}function Une(){return M0(ht)}function sS(i){var e,t=i._a;return t&&_e(i).overflow===-2&&(e=t[yr]<0||t[yr]>11?yr:t[An]<1||t[An]>eS(t[ii],t[yr])?An:t[At]<0||t[At]>24||t[At]===24&&(t[dn]!==0||t[_r]!==0||t[to]!==0)?At:t[dn]<0||t[dn]>59?dn:t[_r]<0||t[_r]>59?_r:t[to]<0||t[to]>999?to:-1,_e(i)._overflowDayOfYear&&(e<ii||e>An)&&(e=An),_e(i)._overflowWeeks&&e===-1&&(e=Zie),_e(i)._overflowWeekday&&e===-1&&(e=Qie),_e(i).overflow=e),i}var Vne=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Xne=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Kne=/Z|[+-]\d\d(?::?\d\d)?/,Ih=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],bb=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Zne=/^\/?Date\((-?\d+)/i,Qne=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Jne={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Aj(i){var e,t,n=i._i,r=Vne.exec(n)||Xne.exec(n),s,o,a,l,c=Ih.length,u=bb.length;if(r){for(_e(i).iso=!0,e=0,t=c;e<t;e++)if(Ih[e][1].exec(r[1])){o=Ih[e][0],s=Ih[e][2]!==!1;break}if(o==null){i._isValid=!1;return}if(r[3]){for(e=0,t=u;e<t;e++)if(bb[e][1].exec(r[3])){a=(r[2]||" ")+bb[e][0];break}if(a==null){i._isValid=!1;return}}if(!s&&a!=null){i._isValid=!1;return}if(r[4])if(Kne.exec(r[4]))l="Z";else{i._isValid=!1;return}i._f=o+(a||"")+(l||""),aS(i)}else i._isValid=!1}function ere(i,e,t,n,r,s){var o=[tre(i),Ej.indexOf(e),parseInt(t,10),parseInt(n,10),parseInt(r,10)];return s&&o.push(parseInt(s,10)),o}function tre(i){var e=parseInt(i,10);return e<=49?2e3+e:e<=999?1900+e:e}function ire(i){return i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function nre(i,e,t){if(i){var n=Dj.indexOf(i),r=new Date(e[0],e[1],e[2]).getDay();if(n!==r)return _e(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function rre(i,e,t){if(i)return Jne[i];if(e)return 0;var n=parseInt(t,10),r=n%100,s=(n-r)/100;return s*60+r}function Nj(i){var e=Qne.exec(ire(i._i)),t;if(e){if(t=ere(e[4],e[3],e[2],e[5],e[6],e[7]),!nre(e[1],t,i))return;i._a=t,i._tzm=rre(e[8],e[9],e[10]),i._d=Kc.apply(null,i._a),i._d.setUTCMinutes(i._d.getUTCMinutes()-i._tzm),_e(i).rfc2822=!0}else i._isValid=!1}function sre(i){var e=Zne.exec(i._i);if(e!==null){i._d=new Date(+e[1]);return}if(Aj(i),i._isValid===!1)delete i._isValid;else return;if(Nj(i),i._isValid===!1)delete i._isValid;else return;i._strict?i._isValid=!1:X.createFromInputFallback(i)}X.createFromInputFallback=nn("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(i){i._d=new Date(i._i+(i._useUTC?" UTC":""))});function ba(i,e,t){return i??e??t}function ore(i){var e=new Date(X.now());return i._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function oS(i){var e,t,n=[],r,s,o;if(!i._d){for(r=ore(i),i._w&&i._a[An]==null&&i._a[yr]==null&&are(i),i._dayOfYear!=null&&(o=ba(i._a[ii],r[ii]),(i._dayOfYear>bc(o)||i._dayOfYear===0)&&(_e(i)._overflowDayOfYear=!0),t=Kc(o,0,i._dayOfYear),i._a[yr]=t.getUTCMonth(),i._a[An]=t.getUTCDate()),e=0;e<3&&i._a[e]==null;++e)i._a[e]=n[e]=r[e];for(;e<7;e++)i._a[e]=n[e]=i._a[e]==null?e===2?1:0:i._a[e];i._a[At]===24&&i._a[dn]===0&&i._a[_r]===0&&i._a[to]===0&&(i._nextDay=!0,i._a[At]=0),i._d=(i._useUTC?Kc:fne).apply(null,n),s=i._useUTC?i._d.getUTCDay():i._d.getDay(),i._tzm!=null&&i._d.setUTCMinutes(i._d.getUTCMinutes()-i._tzm),i._nextDay&&(i._a[At]=24),i._w&&typeof i._w.d<"u"&&i._w.d!==s&&(_e(i).weekdayMismatch=!0)}}function are(i){var e,t,n,r,s,o,a,l,c;e=i._w,e.GG!=null||e.W!=null||e.E!=null?(s=1,o=4,t=ba(e.GG,i._a[ii],Zc(ot(),1,4).year),n=ba(e.W,1),r=ba(e.E,1),(r<1||r>7)&&(l=!0)):(s=i._locale._week.dow,o=i._locale._week.doy,c=Zc(ot(),s,o),t=ba(e.gg,i._a[ii],c.year),n=ba(e.w,c.week),e.d!=null?(r=e.d,(r<0||r>6)&&(l=!0)):e.e!=null?(r=e.e+s,(e.e<0||e.e>6)&&(l=!0)):r=s),n<1||n>Rr(t,s,o)?_e(i)._overflowWeeks=!0:l!=null?_e(i)._overflowWeekday=!0:(a=Ij(t,n,r,s,o),i._a[ii]=a.year,i._dayOfYear=a.dayOfYear)}X.ISO_8601=function(){};X.RFC_2822=function(){};function aS(i){if(i._f===X.ISO_8601){Aj(i);return}if(i._f===X.RFC_2822){Nj(i);return}i._a=[],_e(i).empty=!0;var e=""+i._i,t,n,r,s,o,a=e.length,l=0,c,u;for(r=vj(i._f,i._locale).match(Xx)||[],u=r.length,t=0;t<u;t++)s=r[t],n=(e.match(Vie(s,i))||[])[0],n&&(o=e.substr(0,e.indexOf(n)),o.length>0&&_e(i).unusedInput.push(o),e=e.slice(e.indexOf(n)+n.length),l+=n.length),za[s]?(n?_e(i).empty=!1:_e(i).unusedTokens.push(s),Kie(s,n,i)):i._strict&&!n&&_e(i).unusedTokens.push(s);_e(i).charsLeftOver=a-l,e.length>0&&_e(i).unusedInput.push(e),i._a[At]<=12&&_e(i).bigHour===!0&&i._a[At]>0&&(_e(i).bigHour=void 0),_e(i).parsedDateParts=i._a.slice(0),_e(i).meridiem=i._meridiem,i._a[At]=lre(i._locale,i._a[At],i._meridiem),c=_e(i).era,c!==null&&(i._a[ii]=i._locale.erasConvertYear(c,i._a[ii])),oS(i),sS(i)}function lre(i,e,t){var n;return t==null?e:i.meridiemHour!=null?i.meridiemHour(e,t):(i.isPM!=null&&(n=i.isPM(t),n&&e<12&&(e+=12),!n&&e===12&&(e=0)),e)}function cre(i){var e,t,n,r,s,o,a=!1,l=i._f.length;if(l===0){_e(i).invalidFormat=!0,i._d=new Date(NaN);return}for(r=0;r<l;r++)s=0,o=!1,e=Ux({},i),i._useUTC!=null&&(e._useUTC=i._useUTC),e._f=i._f[r],aS(e),Hx(e)&&(o=!0),s+=_e(e).charsLeftOver,s+=_e(e).unusedTokens.length*10,_e(e).score=s,a?s<n&&(n=s,t=e):(n==null||s<n||o)&&(n=s,t=e,o&&(a=!0));ls(i,t||e)}function ure(i){if(!i._d){var e=Kx(i._i),t=e.day===void 0?e.date:e.day;i._a=pj([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(n){return n&&parseInt(n,10)}),oS(i)}}function hre(i){var e=new Hu(sS(Lj(i)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Lj(i){var e=i._i,t=i._f;return i._locale=i._locale||qr(i._l),e===null||t===void 0&&e===""?Wf({nullInput:!0}):(typeof e=="string"&&(i._i=e=i._locale.preparse(e)),wn(e)?new Hu(sS(e)):(Bu(e)?i._d=e:bn(t)?cre(i):t?aS(i):dre(i),Hx(i)||(i._d=null),i))}function dre(i){var e=i._i;mi(e)?i._d=new Date(X.now()):Bu(e)?i._d=new Date(e.valueOf()):typeof e=="string"?sre(i):bn(e)?(i._a=pj(e.slice(0),function(t){return parseInt(t,10)}),oS(i)):ao(e)?ure(i):Lr(e)?i._d=new Date(e):X.createFromInputFallback(i)}function Fj(i,e,t,n,r){var s={};return(e===!0||e===!1)&&(n=e,e=void 0),(t===!0||t===!1)&&(n=t,t=void 0),(ao(i)&&Bx(i)||bn(i)&&i.length===0)&&(i=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=t,s._i=i,s._f=e,s._strict=n,hre(s)}function ot(i,e,t,n){return Fj(i,e,t,n,!1)}var fre=nn("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var i=ot.apply(null,arguments);return this.isValid()&&i.isValid()?i<this?this:i:Wf()}),pre=nn("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var i=ot.apply(null,arguments);return this.isValid()&&i.isValid()?i>this?this:i:Wf()});function $j(i,e){var t,n;if(e.length===1&&bn(e[0])&&(e=e[0]),!e.length)return ot();for(t=e[0],n=1;n<e.length;++n)(!e[n].isValid()||e[n][i](t))&&(t=e[n]);return t}function mre(){var i=[].slice.call(arguments,0);return $j("isBefore",i)}function gre(){var i=[].slice.call(arguments,0);return $j("isAfter",i)}var vre=function(){return Date.now?Date.now():+new Date},Ql=["year","quarter","month","week","day","hour","minute","second","millisecond"];function yre(i){var e,t=!1,n,r=Ql.length;for(e in i)if(Le(i,e)&&!(Et.call(Ql,e)!==-1&&(i[e]==null||!isNaN(i[e]))))return!1;for(n=0;n<r;++n)if(i[Ql[n]]){if(t)return!1;parseFloat(i[Ql[n]])!==Te(i[Ql[n]])&&(t=!0)}return!0}function _re(){return this._isValid}function bre(){return Rn(NaN)}function Vf(i){var e=Kx(i),t=e.year||0,n=e.quarter||0,r=e.month||0,s=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=yre(e),this._milliseconds=+u+c*1e3+l*6e4+a*1e3*60*60,this._days=+o+s*7,this._months=+r+n*3+t*12,this._data={},this._locale=qr(),this._bubble()}function Uh(i){return i instanceof Vf}function N0(i){return i<0?Math.round(-1*i)*-1:Math.round(i)}function wre(i,e,t){var n=Math.min(i.length,e.length),r=Math.abs(i.length-e.length),s=0,o;for(o=0;o<n;o++)Te(i[o])!==Te(e[o])&&s++;return s+r}function jj(i,e){re(i,0,0,function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+Un(~~(t/60),2)+e+Un(~~t%60,2)})}jj("Z",":");jj("ZZ","");ee("Z",Bf);ee("ZZ",Bf);Qe(["Z","ZZ"],function(i,e,t){t._useUTC=!0,t._tzm=lS(Bf,i)});var xre=/([\+\-]|\d\d)/gi;function lS(i,e){var t=(e||"").match(i),n,r,s;return t===null?null:(n=t[t.length-1]||[],r=(n+"").match(xre)||["-",0,0],s=+(r[1]*60)+Te(r[2]),s===0?0:r[0]==="+"?s:-s)}function cS(i,e){var t,n;return e._isUTC?(t=e.clone(),n=(wn(i)||Bu(i)?i.valueOf():ot(i).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+n),X.updateOffset(t,!1),t):ot(i).local()}function L0(i){return-Math.round(i._d.getTimezoneOffset())}X.updateOffset=function(){};function Sre(i,e,t){var n=this._offset||0,r;if(!this.isValid())return i!=null?this:NaN;if(i!=null){if(typeof i=="string"){if(i=lS(Bf,i),i===null)return this}else Math.abs(i)<16&&!t&&(i=i*60);return!this._isUTC&&e&&(r=L0(this)),this._offset=i,this._isUTC=!0,r!=null&&this.add(r,"m"),n!==i&&(!e||this._changeInProgress?qj(this,Rn(i-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,X.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:L0(this)}function Ere(i,e){return i!=null?(typeof i!="string"&&(i=-i),this.utcOffset(i,e),this):-this.utcOffset()}function Cre(i){return this.utcOffset(0,i)}function Tre(i){return this._isUTC&&(this.utcOffset(0,i),this._isUTC=!1,i&&this.subtract(L0(this),"m")),this}function Rre(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var i=lS(Hie,this._i);i!=null?this.utcOffset(i):this.utcOffset(0,!0)}return this}function Ore(i){return this.isValid()?(i=i?ot(i).utcOffset():0,(this.utcOffset()-i)%60===0):!1}function Ire(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Dre(){if(!mi(this._isDSTShifted))return this._isDSTShifted;var i={},e;return Ux(i,this),i=Lj(i),i._a?(e=i._isUTC?Qn(i._a):ot(i._a),this._isDSTShifted=this.isValid()&&wre(i._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Pre(){return this.isValid()?!this._isUTC:!1}function kre(){return this.isValid()?this._isUTC:!1}function Wj(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Mre=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Are=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Rn(i,e){var t=i,n=null,r,s,o;return Uh(i)?t={ms:i._milliseconds,d:i._days,M:i._months}:Lr(i)||!isNaN(+i)?(t={},e?t[e]=+i:t.milliseconds=+i):(n=Mre.exec(i))?(r=n[1]==="-"?-1:1,t={y:0,d:Te(n[An])*r,h:Te(n[At])*r,m:Te(n[dn])*r,s:Te(n[_r])*r,ms:Te(N0(n[to]*1e3))*r}):(n=Are.exec(i))?(r=n[1]==="-"?-1:1,t={y:js(n[2],r),M:js(n[3],r),w:js(n[4],r),d:js(n[5],r),h:js(n[6],r),m:js(n[7],r),s:js(n[8],r)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=Nre(ot(t.from),ot(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),s=new Vf(t),Uh(i)&&Le(i,"_locale")&&(s._locale=i._locale),Uh(i)&&Le(i,"_isValid")&&(s._isValid=i._isValid),s}Rn.fn=Vf.prototype;Rn.invalid=bre;function js(i,e){var t=i&&parseFloat(i.replace(",","."));return(isNaN(t)?0:t)*e}function xM(i,e){var t={};return t.months=e.month()-i.month()+(e.year()-i.year())*12,i.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+i.clone().add(t.months,"M"),t}function Nre(i,e){var t;return i.isValid()&&e.isValid()?(e=cS(e,i),i.isBefore(e)?t=xM(i,e):(t=xM(e,i),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function zj(i,e){return function(t,n){var r,s;return n!==null&&!isNaN(+n)&&(gj(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=t,t=n,n=s),r=Rn(t,n),qj(this,r,i),this}}function qj(i,e,t,n){var r=e._milliseconds,s=N0(e._days),o=N0(e._months);i.isValid()&&(n=n??!0,o&&Tj(i,Xc(i,"Month")+o*t),s&&Sj(i,"Date",Xc(i,"Date")+s*t),r&&i._d.setTime(i._d.valueOf()+r*t),n&&X.updateOffset(i,s||o))}var Lre=zj(1,"add"),Fre=zj(-1,"subtract");function Gj(i){return typeof i=="string"||i instanceof String}function $re(i){return wn(i)||Bu(i)||Gj(i)||Lr(i)||Wre(i)||jre(i)||i===null||i===void 0}function jre(i){var e=ao(i)&&!Bx(i),t=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,s,o=n.length;for(r=0;r<o;r+=1)s=n[r],t=t||Le(i,s);return e&&t}function Wre(i){var e=bn(i),t=!1;return e&&(t=i.filter(function(n){return!Lr(n)&&Gj(i)}).length===0),e&&t}function zre(i){var e=ao(i)&&!Bx(i),t=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,s;for(r=0;r<n.length;r+=1)s=n[r],t=t||Le(i,s);return e&&t}function qre(i,e){var t=i.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function Gre(i,e){arguments.length===1&&(arguments[0]?$re(arguments[0])?(i=arguments[0],e=void 0):zre(arguments[0])&&(e=arguments[0],i=void 0):(i=void 0,e=void 0));var t=i||ot(),n=cS(t,this).startOf("day"),r=X.calendarFormat(this,n)||"sameElse",s=e&&(Jn(e[r])?e[r].call(this,t):e[r]);return this.format(s||this.localeData().calendar(r,this,ot(t)))}function Yre(){return new Hu(this)}function Bre(i,e){var t=wn(i)?i:ot(i);return this.isValid()&&t.isValid()?(e=rn(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function Hre(i,e){var t=wn(i)?i:ot(i);return this.isValid()&&t.isValid()?(e=rn(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function Ure(i,e,t,n){var r=wn(i)?i:ot(i),s=wn(e)?e:ot(e);return this.isValid()&&r.isValid()&&s.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(r,t):!this.isBefore(r,t))&&(n[1]===")"?this.isBefore(s,t):!this.isAfter(s,t))):!1}function Vre(i,e){var t=wn(i)?i:ot(i),n;return this.isValid()&&t.isValid()?(e=rn(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(n=t.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf())):!1}function Xre(i,e){return this.isSame(i,e)||this.isAfter(i,e)}function Kre(i,e){return this.isSame(i,e)||this.isBefore(i,e)}function Zre(i,e,t){var n,r,s;if(!this.isValid())return NaN;if(n=cS(i,this),!n.isValid())return NaN;switch(r=(n.utcOffset()-this.utcOffset())*6e4,e=rn(e),e){case"year":s=Vh(this,n)/12;break;case"month":s=Vh(this,n);break;case"quarter":s=Vh(this,n)/3;break;case"second":s=(this-n)/1e3;break;case"minute":s=(this-n)/6e4;break;case"hour":s=(this-n)/36e5;break;case"day":s=(this-n-r)/864e5;break;case"week":s=(this-n-r)/6048e5;break;default:s=this-n}return t?s:Hi(s)}function Vh(i,e){if(i.date()<e.date())return-Vh(e,i);var t=(e.year()-i.year())*12+(e.month()-i.month()),n=i.clone().add(t,"months"),r,s;return e-n<0?(r=i.clone().add(t-1,"months"),s=(e-n)/(n-r)):(r=i.clone().add(t+1,"months"),s=(e-n)/(r-n)),-(t+s)||0}X.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";X.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Qre(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Jre(i){if(!this.isValid())return null;var e=i!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?Hh(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Jn(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Hh(t,"Z")):Hh(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ese(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var i="moment",e="",t,n,r,s;return this.isLocal()||(i=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+i+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",s=e+'[")]',this.format(t+n+r+s)}function tse(i){i||(i=this.isUtc()?X.defaultFormatUtc:X.defaultFormat);var e=Hh(this,i);return this.localeData().postformat(e)}function ise(i,e){return this.isValid()&&(wn(i)&&i.isValid()||ot(i).isValid())?Rn({to:this,from:i}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function nse(i){return this.from(ot(),i)}function rse(i,e){return this.isValid()&&(wn(i)&&i.isValid()||ot(i).isValid())?Rn({from:this,to:i}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function sse(i){return this.to(ot(),i)}function Yj(i){var e;return i===void 0?this._locale._abbr:(e=qr(i),e!=null&&(this._locale=e),this)}var Bj=nn("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(i){return i===void 0?this.localeData():this.locale(i)});function Hj(){return this._locale}var Ed=1e3,qa=60*Ed,Cd=60*qa,Uj=(365*400+97)*24*Cd;function Ga(i,e){return(i%e+e)%e}function Vj(i,e,t){return i<100&&i>=0?new Date(i+400,e,t)-Uj:new Date(i,e,t).valueOf()}function Xj(i,e,t){return i<100&&i>=0?Date.UTC(i+400,e,t)-Uj:Date.UTC(i,e,t)}function ose(i){var e,t;if(i=rn(i),i===void 0||i==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?Xj:Vj,i){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Ga(e+(this._isUTC?0:this.utcOffset()*qa),Cd);break;case"minute":e=this._d.valueOf(),e-=Ga(e,qa);break;case"second":e=this._d.valueOf(),e-=Ga(e,Ed);break}return this._d.setTime(e),X.updateOffset(this,!0),this}function ase(i){var e,t;if(i=rn(i),i===void 0||i==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?Xj:Vj,i){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=Cd-Ga(e+(this._isUTC?0:this.utcOffset()*qa),Cd)-1;break;case"minute":e=this._d.valueOf(),e+=qa-Ga(e,qa)-1;break;case"second":e=this._d.valueOf(),e+=Ed-Ga(e,Ed)-1;break}return this._d.setTime(e),X.updateOffset(this,!0),this}function lse(){return this._d.valueOf()-(this._offset||0)*6e4}function cse(){return Math.floor(this.valueOf()/1e3)}function use(){return new Date(this.valueOf())}function hse(){var i=this;return[i.year(),i.month(),i.date(),i.hour(),i.minute(),i.second(),i.millisecond()]}function dse(){var i=this;return{years:i.year(),months:i.month(),date:i.date(),hours:i.hours(),minutes:i.minutes(),seconds:i.seconds(),milliseconds:i.milliseconds()}}function fse(){return this.isValid()?this.toISOString():null}function pse(){return Hx(this)}function mse(){return ls({},_e(this))}function gse(){return _e(this).overflow}function vse(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}re("N",0,0,"eraAbbr");re("NN",0,0,"eraAbbr");re("NNN",0,0,"eraAbbr");re("NNNN",0,0,"eraName");re("NNNNN",0,0,"eraNarrow");re("y",["y",1],"yo","eraYear");re("y",["yy",2],0,"eraYear");re("y",["yyy",3],0,"eraYear");re("y",["yyyy",4],0,"eraYear");ee("N",uS);ee("NN",uS);ee("NNN",uS);ee("NNNN",Ose);ee("NNNNN",Ise);Qe(["N","NN","NNN","NNNN","NNNNN"],function(i,e,t,n){var r=t._locale.erasParse(i,n,t._strict);r?_e(t).era=r:_e(t).invalidEra=i});ee("y",Nl);ee("yy",Nl);ee("yyy",Nl);ee("yyyy",Nl);ee("yo",Dse);Qe(["y","yy","yyy","yyyy"],ii);Qe(["yo"],function(i,e,t,n){var r;t._locale._eraYearOrdinalRegex&&(r=i.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[ii]=t._locale.eraYearOrdinalParse(i,r):e[ii]=parseInt(i,10)});function yse(i,e){var t,n,r,s=this._eras||qr("en")._eras;for(t=0,n=s.length;t<n;++t){switch(typeof s[t].since){case"string":r=X(s[t].since).startOf("day"),s[t].since=r.valueOf();break}switch(typeof s[t].until){case"undefined":s[t].until=1/0;break;case"string":r=X(s[t].until).startOf("day").valueOf(),s[t].until=r.valueOf();break}}return s}function _se(i,e,t){var n,r,s=this.eras(),o,a,l;for(i=i.toUpperCase(),n=0,r=s.length;n<r;++n)if(o=s[n].name.toUpperCase(),a=s[n].abbr.toUpperCase(),l=s[n].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(a===i)return s[n];break;case"NNNN":if(o===i)return s[n];break;case"NNNNN":if(l===i)return s[n];break}else if([o,a,l].indexOf(i)>=0)return s[n]}function bse(i,e){var t=i.since<=i.until?1:-1;return e===void 0?X(i.since).year():X(i.since).year()+(e-i.offset)*t}function wse(){var i,e,t,n=this.localeData().eras();for(i=0,e=n.length;i<e;++i)if(t=this.clone().startOf("day").valueOf(),n[i].since<=t&&t<=n[i].until||n[i].until<=t&&t<=n[i].since)return n[i].name;return""}function xse(){var i,e,t,n=this.localeData().eras();for(i=0,e=n.length;i<e;++i)if(t=this.clone().startOf("day").valueOf(),n[i].since<=t&&t<=n[i].until||n[i].until<=t&&t<=n[i].since)return n[i].narrow;return""}function Sse(){var i,e,t,n=this.localeData().eras();for(i=0,e=n.length;i<e;++i)if(t=this.clone().startOf("day").valueOf(),n[i].since<=t&&t<=n[i].until||n[i].until<=t&&t<=n[i].since)return n[i].abbr;return""}function Ese(){var i,e,t,n,r=this.localeData().eras();for(i=0,e=r.length;i<e;++i)if(t=r[i].since<=r[i].until?1:-1,n=this.clone().startOf("day").valueOf(),r[i].since<=n&&n<=r[i].until||r[i].until<=n&&n<=r[i].since)return(this.year()-X(r[i].since).year())*t+r[i].offset;return this.year()}function Cse(i){return Le(this,"_erasNameRegex")||hS.call(this),i?this._erasNameRegex:this._erasRegex}function Tse(i){return Le(this,"_erasAbbrRegex")||hS.call(this),i?this._erasAbbrRegex:this._erasRegex}function Rse(i){return Le(this,"_erasNarrowRegex")||hS.call(this),i?this._erasNarrowRegex:this._erasRegex}function uS(i,e){return e.erasAbbrRegex(i)}function Ose(i,e){return e.erasNameRegex(i)}function Ise(i,e){return e.erasNarrowRegex(i)}function Dse(i,e){return e._eraYearOrdinalRegex||Nl}function hS(){var i=[],e=[],t=[],n=[],r,s,o,a,l,c=this.eras();for(r=0,s=c.length;r<s;++r)o=Tr(c[r].name),a=Tr(c[r].abbr),l=Tr(c[r].narrow),e.push(o),i.push(a),t.push(l),n.push(o),n.push(a),n.push(l);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}re(0,["gg",2],0,function(){return this.weekYear()%100});re(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Xf(i,e){re(0,[i,i.length],0,e)}Xf("gggg","weekYear");Xf("ggggg","weekYear");Xf("GGGG","isoWeekYear");Xf("GGGGG","isoWeekYear");ee("G",Yf);ee("g",Yf);ee("GG",at,Wi);ee("gg",at,Wi);ee("GGGG",Qx,Zx);ee("gggg",Qx,Zx);ee("GGGGG",Gf,zf);ee("ggggg",Gf,zf);Vu(["gggg","ggggg","GGGG","GGGGG"],function(i,e,t,n){e[n.substr(0,2)]=Te(i)});Vu(["gg","GG"],function(i,e,t,n){e[n]=X.parseTwoDigitYear(i)});function Pse(i){return Kj.call(this,i,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function kse(i){return Kj.call(this,i,this.isoWeek(),this.isoWeekday(),1,4)}function Mse(){return Rr(this.year(),1,4)}function Ase(){return Rr(this.isoWeekYear(),1,4)}function Nse(){var i=this.localeData()._week;return Rr(this.year(),i.dow,i.doy)}function Lse(){var i=this.localeData()._week;return Rr(this.weekYear(),i.dow,i.doy)}function Kj(i,e,t,n,r){var s;return i==null?Zc(this,n,r).year:(s=Rr(i,n,r),e>s&&(e=s),Fse.call(this,i,e,t,n,r))}function Fse(i,e,t,n,r){var s=Ij(i,e,t,n,r),o=Kc(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}re("Q",0,"Qo","quarter");ee("Q",yj);Qe("Q",function(i,e){e[yr]=(Te(i)-1)*3});function $se(i){return i==null?Math.ceil((this.month()+1)/3):this.month((i-1)*3+this.month()%3)}re("D",["DD",2],"Do","date");ee("D",at,Ll);ee("DD",at,Wi);ee("Do",function(i,e){return i?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Qe(["D","DD"],An);Qe("Do",function(i,e){e[An]=Te(i.match(at)[0])});var Zj=Fl("Date",!0);re("DDD",["DDDD",3],"DDDo","dayOfYear");ee("DDD",qf);ee("DDDD",_j);Qe(["DDD","DDDD"],function(i,e,t){t._dayOfYear=Te(i)});function jse(i){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return i==null?e:this.add(i-e,"d")}re("m",["mm",2],0,"minute");ee("m",at,Jx);ee("mm",at,Wi);Qe(["m","mm"],dn);var Wse=Fl("Minutes",!1);re("s",["ss",2],0,"second");ee("s",at,Jx);ee("ss",at,Wi);Qe(["s","ss"],_r);var zse=Fl("Seconds",!1);re("S",0,0,function(){return~~(this.millisecond()/100)});re(0,["SS",2],0,function(){return~~(this.millisecond()/10)});re(0,["SSS",3],0,"millisecond");re(0,["SSSS",4],0,function(){return this.millisecond()*10});re(0,["SSSSS",5],0,function(){return this.millisecond()*100});re(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});re(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});re(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});re(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});ee("S",qf,yj);ee("SS",qf,Wi);ee("SSS",qf,_j);var cs,Qj;for(cs="SSSS";cs.length<=9;cs+="S")ee(cs,Nl);function qse(i,e){e[to]=Te(("0."+i)*1e3)}for(cs="S";cs.length<=9;cs+="S")Qe(cs,qse);Qj=Fl("Milliseconds",!1);re("z",0,0,"zoneAbbr");re("zz",0,0,"zoneName");function Gse(){return this._isUTC?"UTC":""}function Yse(){return this._isUTC?"Coordinated Universal Time":""}var H=Hu.prototype;H.add=Lre;H.calendar=Gre;H.clone=Yre;H.diff=Zre;H.endOf=ase;H.format=tse;H.from=ise;H.fromNow=nse;H.to=rse;H.toNow=sse;H.get=ene;H.invalidAt=gse;H.isAfter=Bre;H.isBefore=Hre;H.isBetween=Ure;H.isSame=Vre;H.isSameOrAfter=Xre;H.isSameOrBefore=Kre;H.isValid=pse;H.lang=Bj;H.locale=Yj;H.localeData=Hj;H.max=pre;H.min=fre;H.parsingFlags=mse;H.set=tne;H.startOf=ose;H.subtract=Fre;H.toArray=hse;H.toObject=dse;H.toDate=use;H.toISOString=Jre;H.inspect=ese;typeof Symbol<"u"&&Symbol.for!=null&&(H[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});H.toJSON=fse;H.toString=Qre;H.unix=cse;H.valueOf=lse;H.creationData=vse;H.eraName=wse;H.eraNarrow=xse;H.eraAbbr=Sse;H.eraYear=Ese;H.year=xj;H.isLeapYear=Jie;H.weekYear=Pse;H.isoWeekYear=kse;H.quarter=H.quarters=$se;H.month=Rj;H.daysInMonth=une;H.week=H.weeks=yne;H.isoWeek=H.isoWeeks=_ne;H.weeksInYear=Nse;H.weeksInWeekYear=Lse;H.isoWeeksInYear=Mse;H.isoWeeksInISOWeekYear=Ase;H.date=Zj;H.day=H.days=kne;H.weekday=Mne;H.isoWeekday=Ane;H.dayOfYear=jse;H.hour=H.hours=zne;H.minute=H.minutes=Wse;H.second=H.seconds=zse;H.millisecond=H.milliseconds=Qj;H.utcOffset=Sre;H.utc=Cre;H.local=Tre;H.parseZone=Rre;H.hasAlignedHourOffset=Ore;H.isDST=Ire;H.isLocal=Pre;H.isUtcOffset=kre;H.isUtc=Wj;H.isUTC=Wj;H.zoneAbbr=Gse;H.zoneName=Yse;H.dates=nn("dates accessor is deprecated. Use date instead.",Zj);H.months=nn("months accessor is deprecated. Use month instead",Rj);H.years=nn("years accessor is deprecated. Use year instead",xj);H.zone=nn("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Ere);H.isDSTShifted=nn("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Dre);function Bse(i){return ot(i*1e3)}function Hse(){return ot.apply(null,arguments).parseZone()}function Jj(i){return i}var Fe=Vx.prototype;Fe.calendar=Pie;Fe.longDateFormat=Nie;Fe.invalidDate=Fie;Fe.ordinal=Wie;Fe.preparse=Jj;Fe.postformat=Jj;Fe.relativeTime=qie;Fe.pastFuture=Gie;Fe.set=Iie;Fe.eras=yse;Fe.erasParse=_se;Fe.erasConvertYear=bse;Fe.erasAbbrRegex=Tse;Fe.erasNameRegex=Cse;Fe.erasNarrowRegex=Rse;Fe.months=one;Fe.monthsShort=ane;Fe.monthsParse=cne;Fe.monthsRegex=dne;Fe.monthsShortRegex=hne;Fe.week=pne;Fe.firstDayOfYear=vne;Fe.firstDayOfWeek=gne;Fe.weekdays=Rne;Fe.weekdaysMin=Ine;Fe.weekdaysShort=One;Fe.weekdaysParse=Pne;Fe.weekdaysRegex=Nne;Fe.weekdaysShortRegex=Lne;Fe.weekdaysMinRegex=Fne;Fe.isPM=jne;Fe.meridiem=qne;function Td(i,e,t,n){var r=qr(),s=Qn().set(n,e);return r[t](s,i)}function eW(i,e,t){if(Lr(i)&&(e=i,i=void 0),i=i||"",e!=null)return Td(i,e,t,"month");var n,r=[];for(n=0;n<12;n++)r[n]=Td(i,n,t,"month");return r}function dS(i,e,t,n){typeof i=="boolean"?(Lr(e)&&(t=e,e=void 0),e=e||""):(e=i,t=e,i=!1,Lr(e)&&(t=e,e=void 0),e=e||"");var r=qr(),s=i?r._week.dow:0,o,a=[];if(t!=null)return Td(e,(t+s)%7,n,"day");for(o=0;o<7;o++)a[o]=Td(e,(o+s)%7,n,"day");return a}function Use(i,e){return eW(i,e,"months")}function Vse(i,e){return eW(i,e,"monthsShort")}function Xse(i,e,t){return dS(i,e,t,"weekdays")}function Kse(i,e,t){return dS(i,e,t,"weekdaysShort")}function Zse(i,e,t){return dS(i,e,t,"weekdaysMin")}ps("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(i){var e=i%10,t=Te(i%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return i+t}});X.lang=nn("moment.lang is deprecated. Use moment.locale instead.",ps);X.langData=nn("moment.langData is deprecated. Use moment.localeData instead.",qr);var lr=Math.abs;function Qse(){var i=this._data;return this._milliseconds=lr(this._milliseconds),this._days=lr(this._days),this._months=lr(this._months),i.milliseconds=lr(i.milliseconds),i.seconds=lr(i.seconds),i.minutes=lr(i.minutes),i.hours=lr(i.hours),i.months=lr(i.months),i.years=lr(i.years),this}function tW(i,e,t,n){var r=Rn(e,t);return i._milliseconds+=n*r._milliseconds,i._days+=n*r._days,i._months+=n*r._months,i._bubble()}function Jse(i,e){return tW(this,i,e,1)}function eoe(i,e){return tW(this,i,e,-1)}function SM(i){return i<0?Math.floor(i):Math.ceil(i)}function toe(){var i=this._milliseconds,e=this._days,t=this._months,n=this._data,r,s,o,a,l;return i>=0&&e>=0&&t>=0||i<=0&&e<=0&&t<=0||(i+=SM(F0(t)+e)*864e5,e=0,t=0),n.milliseconds=i%1e3,r=Hi(i/1e3),n.seconds=r%60,s=Hi(r/60),n.minutes=s%60,o=Hi(s/60),n.hours=o%24,e+=Hi(o/24),l=Hi(iW(e)),t+=l,e-=SM(F0(l)),a=Hi(t/12),t%=12,n.days=e,n.months=t,n.years=a,this}function iW(i){return i*4800/146097}function F0(i){return i*146097/4800}function ioe(i){if(!this.isValid())return NaN;var e,t,n=this._milliseconds;if(i=rn(i),i==="month"||i==="quarter"||i==="year")switch(e=this._days+n/864e5,t=this._months+iW(e),i){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(F0(this._months)),i){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return e*24+n/36e5;case"minute":return e*1440+n/6e4;case"second":return e*86400+n/1e3;case"millisecond":return Math.floor(e*864e5)+n;default:throw new Error("Unknown unit "+i)}}function Gr(i){return function(){return this.as(i)}}var nW=Gr("ms"),noe=Gr("s"),roe=Gr("m"),soe=Gr("h"),ooe=Gr("d"),aoe=Gr("w"),loe=Gr("M"),coe=Gr("Q"),uoe=Gr("y"),hoe=nW;function doe(){return Rn(this)}function foe(i){return i=rn(i),this.isValid()?this[i+"s"]():NaN}function Yo(i){return function(){return this.isValid()?this._data[i]:NaN}}var poe=Yo("milliseconds"),moe=Yo("seconds"),goe=Yo("minutes"),voe=Yo("hours"),yoe=Yo("days"),_oe=Yo("months"),boe=Yo("years");function woe(){return Hi(this.days()/7)}var hr=Math.round,Oa={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function xoe(i,e,t,n,r){return r.relativeTime(e||1,!!t,i,n)}function Soe(i,e,t,n){var r=Rn(i).abs(),s=hr(r.as("s")),o=hr(r.as("m")),a=hr(r.as("h")),l=hr(r.as("d")),c=hr(r.as("M")),u=hr(r.as("w")),h=hr(r.as("y")),d=s<=t.ss&&["s",s]||s<t.s&&["ss",s]||o<=1&&["m"]||o<t.m&&["mm",o]||a<=1&&["h"]||a<t.h&&["hh",a]||l<=1&&["d"]||l<t.d&&["dd",l];return t.w!=null&&(d=d||u<=1&&["w"]||u<t.w&&["ww",u]),d=d||c<=1&&["M"]||c<t.M&&["MM",c]||h<=1&&["y"]||["yy",h],d[2]=e,d[3]=+i>0,d[4]=n,xoe.apply(null,d)}function Eoe(i){return i===void 0?hr:typeof i=="function"?(hr=i,!0):!1}function Coe(i,e){return Oa[i]===void 0?!1:e===void 0?Oa[i]:(Oa[i]=e,i==="s"&&(Oa.ss=e-1),!0)}function Toe(i,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,n=Oa,r,s;return typeof i=="object"&&(e=i,i=!1),typeof i=="boolean"&&(t=i),typeof e=="object"&&(n=Object.assign({},Oa,e),e.s!=null&&e.ss==null&&(n.ss=e.s-1)),r=this.localeData(),s=Soe(this,!t,n,r),t&&(s=r.pastFuture(+this,s)),r.postformat(s)}var wb=Math.abs;function aa(i){return(i>0)-(i<0)||+i}function Kf(){if(!this.isValid())return this.localeData().invalidDate();var i=wb(this._milliseconds)/1e3,e=wb(this._days),t=wb(this._months),n,r,s,o,a=this.asSeconds(),l,c,u,h;return a?(n=Hi(i/60),r=Hi(n/60),i%=60,n%=60,s=Hi(t/12),t%=12,o=i?i.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",c=aa(this._months)!==aa(a)?"-":"",u=aa(this._days)!==aa(a)?"-":"",h=aa(this._milliseconds)!==aa(a)?"-":"",l+"P"+(s?c+s+"Y":"")+(t?c+t+"M":"")+(e?u+e+"D":"")+(r||n||i?"T":"")+(r?h+r+"H":"")+(n?h+n+"M":"")+(i?h+o+"S":"")):"P0D"}var Pe=Vf.prototype;Pe.isValid=_re;Pe.abs=Qse;Pe.add=Jse;Pe.subtract=eoe;Pe.as=ioe;Pe.asMilliseconds=nW;Pe.asSeconds=noe;Pe.asMinutes=roe;Pe.asHours=soe;Pe.asDays=ooe;Pe.asWeeks=aoe;Pe.asMonths=loe;Pe.asQuarters=coe;Pe.asYears=uoe;Pe.valueOf=hoe;Pe._bubble=toe;Pe.clone=doe;Pe.get=foe;Pe.milliseconds=poe;Pe.seconds=moe;Pe.minutes=goe;Pe.hours=voe;Pe.days=yoe;Pe.weeks=woe;Pe.months=_oe;Pe.years=boe;Pe.humanize=Toe;Pe.toISOString=Kf;Pe.toString=Kf;Pe.toJSON=Kf;Pe.locale=Yj;Pe.localeData=Hj;Pe.toIsoString=nn("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Kf);Pe.lang=Bj;re("X",0,0,"unix");re("x",0,0,"valueOf");ee("x",Yf);ee("X",Uie);Qe("X",function(i,e,t){t._d=new Date(parseFloat(i)*1e3)});Qe("x",function(i,e,t){t._d=new Date(Te(i))});//! moment.js
X.version="2.30.1";Rie(ot);X.fn=H;X.min=mre;X.max=gre;X.now=vre;X.utc=Qn;X.unix=Bse;X.months=Use;X.isDate=Bu;X.locale=ps;X.invalid=Wf;X.duration=Rn;X.isMoment=wn;X.weekdays=Xse;X.parseZone=Hse;X.localeData=qr;X.isDuration=Uh;X.monthsShort=Vse;X.weekdaysMin=Zse;X.defineLocale=rS;X.updateLocale=Hne;X.locales=Une;X.weekdaysShort=Kse;X.normalizeUnits=rn;X.relativeTimeRounding=Eoe;X.relativeTimeThreshold=Coe;X.calendarFormat=qre;X.prototype=H;X.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};var xb={exports:{}},EM;function Roe(){return EM||(EM=1,(function(i){i.exports=e;function e(n){if(n)return t(n)}function t(n){for(var r in e.prototype)n[r]=e.prototype[r];return n}e.prototype.on=e.prototype.addEventListener=function(n,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(r),this},e.prototype.once=function(n,r){function s(){this.off(n,s),r.apply(this,arguments)}return s.fn=r,this.on(n,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,a=0;a<s.length;a++)if(o=s[a],o===r||o.fn===r){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var r=new Array(arguments.length-1),s=this._callbacks["$"+n],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(s){s=s.slice(0);for(var o=0,a=s.length;o<a;++o)s[o].apply(this,r)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(xb)),xb.exports}var Ooe=Roe();const fS=tw(Ooe);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function xn(){return xn=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},xn.apply(this,arguments)}function sn(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}function Dh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}var $0;typeof Object.assign!="function"?$0=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s])}return t}:$0=Object.assign;var Eo=$0,CM=["","webkit","Moz","MS","ms","o"],Ioe=typeof document>"u"?{style:{}}:document.createElement("div"),Doe="function",Ia=Math.round,Co=Math.abs,pS=Date.now;function Zf(i,e){for(var t,n,r=e[0].toUpperCase()+e.slice(1),s=0;s<CM.length;){if(t=CM[s],n=t?t+r:e,n in i)return n;s++}}var Or;typeof window>"u"?Or={}:Or=window;var rW=Zf(Ioe.style,"touchAction"),sW=rW!==void 0;function Poe(){if(!sW)return!1;var i={},e=Or.CSS&&Or.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return i[t]=e?Or.CSS.supports("touch-action",t):!0}),i}var oW="compute",aW="auto",j0="manipulation",lo="none",Jc="pan-x",eu="pan-y",Ph=Poe(),koe=/mobile|tablet|ip(ad|hone|od)|android/i,lW="ontouchstart"in Or,Moe=Zf(Or,"PointerEvent")!==void 0,Aoe=lW&&koe.test(navigator.userAgent),Xu="touch",Noe="pen",mS="mouse",Loe="kinect",Foe=25,hi=1,Bo=2,Ot=4,Ei=8,Rd=1,Ku=2,Zu=4,Qu=8,ll=16,Bn=Ku|Zu,co=Qu|ll,cW=Bn|co,uW=["x","y"],Od=["clientX","clientY"];function Ir(i,e,t){var n;if(i)if(i.forEach)i.forEach(e,t);else if(i.length!==void 0)for(n=0;n<i.length;)e.call(t,i[n],n,i),n++;else for(n in i)i.hasOwnProperty(n)&&e.call(t,i[n],n,i)}function Qf(i,e){return typeof i===Doe?i.apply(e&&e[0]||void 0,e):i}function io(i,e){return i.indexOf(e)>-1}function $oe(i){if(io(i,lo))return lo;var e=io(i,Jc),t=io(i,eu);return e&&t?lo:e||t?e?Jc:eu:io(i,j0)?j0:aW}var hW=(function(){function i(t,n){this.manager=t,this.set(n)}var e=i.prototype;return e.set=function(n){n===oW&&(n=this.compute()),sW&&this.manager.element.style&&Ph[n]&&(this.manager.element.style[rW]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return Ir(this.manager.recognizers,function(r){Qf(r.options.enable,[r])&&(n=n.concat(r.getTouchAction()))}),$oe(n.join(" "))},e.preventDefaults=function(n){var r=n.srcEvent,s=n.offsetDirection;if(this.manager.session.prevented){r.preventDefault();return}var o=this.actions,a=io(o,lo)&&!Ph[lo],l=io(o,eu)&&!Ph[eu],c=io(o,Jc)&&!Ph[Jc];if(a){var u=n.pointers.length===1,h=n.distance<2,d=n.deltaTime<250;if(u&&h&&d)return}if(!(c&&l)&&(a||l&&s&Bn||c&&s&co))return this.preventSrc(r)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},i})();function gS(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}function dW(i){var e=i.length;if(e===1)return{x:Ia(i[0].clientX),y:Ia(i[0].clientY)};for(var t=0,n=0,r=0;r<e;)t+=i[r].clientX,n+=i[r].clientY,r++;return{x:Ia(t/e),y:Ia(n/e)}}function TM(i){for(var e=[],t=0;t<i.pointers.length;)e[t]={clientX:Ia(i.pointers[t].clientX),clientY:Ia(i.pointers[t].clientY)},t++;return{timeStamp:pS(),pointers:e,center:dW(e),deltaX:i.deltaX,deltaY:i.deltaY}}function Id(i,e,t){t||(t=uW);var n=e[t[0]]-i[t[0]],r=e[t[1]]-i[t[1]];return Math.sqrt(n*n+r*r)}function W0(i,e,t){t||(t=uW);var n=e[t[0]]-i[t[0]],r=e[t[1]]-i[t[1]];return Math.atan2(r,n)*180/Math.PI}function fW(i,e){return i===e?Rd:Co(i)>=Co(e)?i<0?Ku:Zu:e<0?Qu:ll}function joe(i,e){var t=e.center,n=i.offsetDelta||{},r=i.prevDelta||{},s=i.prevInput||{};(e.eventType===hi||s.eventType===Ot)&&(r=i.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=i.offsetDelta={x:t.x,y:t.y}),e.deltaX=r.x+(t.x-n.x),e.deltaY=r.y+(t.y-n.y)}function pW(i,e,t){return{x:e/i||0,y:t/i||0}}function Woe(i,e){return Id(e[0],e[1],Od)/Id(i[0],i[1],Od)}function zoe(i,e){return W0(e[1],e[0],Od)+W0(i[1],i[0],Od)}function qoe(i,e){var t=i.lastInterval||e,n=e.timeStamp-t.timeStamp,r,s,o,a;if(e.eventType!==Ei&&(n>Foe||t.velocity===void 0)){var l=e.deltaX-t.deltaX,c=e.deltaY-t.deltaY,u=pW(n,l,c);s=u.x,o=u.y,r=Co(u.x)>Co(u.y)?u.x:u.y,a=fW(l,c),i.lastInterval=e}else r=t.velocity,s=t.velocityX,o=t.velocityY,a=t.direction;e.velocity=r,e.velocityX=s,e.velocityY=o,e.direction=a}function Goe(i,e){var t=i.session,n=e.pointers,r=n.length;t.firstInput||(t.firstInput=TM(e)),r>1&&!t.firstMultiple?t.firstMultiple=TM(e):r===1&&(t.firstMultiple=!1);var s=t.firstInput,o=t.firstMultiple,a=o?o.center:s.center,l=e.center=dW(n);e.timeStamp=pS(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=W0(a,l),e.distance=Id(a,l),joe(t,e),e.offsetDirection=fW(e.deltaX,e.deltaY);var c=pW(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=Co(c.x)>Co(c.y)?c.x:c.y,e.scale=o?Woe(o.pointers,n):1,e.rotation=o?zoe(o.pointers,n):0,e.maxPointers=t.prevInput?e.pointers.length>t.prevInput.maxPointers?e.pointers.length:t.prevInput.maxPointers:e.pointers.length,qoe(t,e);var u=i.element,h=e.srcEvent,d;h.composedPath?d=h.composedPath()[0]:h.path?d=h.path[0]:d=h.target,gS(d,u)&&(u=d),e.target=u}function Yoe(i,e,t){var n=t.pointers.length,r=t.changedPointers.length,s=e&hi&&n-r===0,o=e&(Ot|Ei)&&n-r===0;t.isFirst=!!s,t.isFinal=!!o,s&&(i.session={}),t.eventType=e,Goe(i,t),i.emit("hammer.input",t),i.recognize(t),i.session.prevInput=t}function tu(i){return i.trim().split(/\s+/g)}function wc(i,e,t){Ir(tu(e),function(n){i.addEventListener(n,t,!1)})}function xc(i,e,t){Ir(tu(e),function(n){i.removeEventListener(n,t,!1)})}function RM(i){var e=i.ownerDocument||i;return e.defaultView||e.parentWindow||window}var $l=(function(){function i(t,n){var r=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){Qf(t.options.enable,[t])&&r.handler(s)},this.init()}var e=i.prototype;return e.handler=function(){},e.init=function(){this.evEl&&wc(this.element,this.evEl,this.domHandler),this.evTarget&&wc(this.target,this.evTarget,this.domHandler),this.evWin&&wc(RM(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&xc(this.element,this.evEl,this.domHandler),this.evTarget&&xc(this.target,this.evTarget,this.domHandler),this.evWin&&xc(RM(this.element),this.evWin,this.domHandler)},i})();function To(i,e,t){if(i.indexOf&&!t)return i.indexOf(e);for(var n=0;n<i.length;){if(t&&i[n][t]==e||!t&&i[n]===e)return n;n++}return-1}var Boe={pointerdown:hi,pointermove:Bo,pointerup:Ot,pointercancel:Ei,pointerout:Ei},Hoe={2:Xu,3:Noe,4:mS,5:Loe},mW="pointerdown",gW="pointermove pointerup pointercancel";Or.MSPointerEvent&&!Or.PointerEvent&&(mW="MSPointerDown",gW="MSPointerMove MSPointerUp MSPointerCancel");var vW=(function(i){sn(e,i);function e(){var n,r=e.prototype;return r.evEl=mW,r.evWin=gW,n=i.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=e.prototype;return t.handler=function(r){var s=this.store,o=!1,a=r.type.toLowerCase().replace("ms",""),l=Boe[a],c=Hoe[r.pointerType]||r.pointerType,u=c===Xu,h=To(s,r.pointerId,"pointerId");l&hi&&(r.button===0||u)?h<0&&(s.push(r),h=s.length-1):l&(Ot|Ei)&&(o=!0),!(h<0)&&(s[h]=r,this.callback(this.manager,l,{pointers:s,changedPointers:[r],pointerType:c,srcEvent:r}),o&&s.splice(h,1))},e})($l);function iu(i){return Array.prototype.slice.call(i,0)}function vS(i,e,t){for(var n=[],r=[],s=0;s<i.length;){var o=e?i[s][e]:i[s];To(r,o)<0&&n.push(i[s]),r[s]=o,s++}return t&&(e?n=n.sort(function(a,l){return a[e]>l[e]}):n=n.sort()),n}var Uoe={touchstart:hi,touchmove:Bo,touchend:Ot,touchcancel:Ei},Voe="touchstart touchmove touchend touchcancel",yS=(function(i){sn(e,i);function e(){var n;return e.prototype.evTarget=Voe,n=i.apply(this,arguments)||this,n.targetIds={},n}var t=e.prototype;return t.handler=function(r){var s=Uoe[r.type],o=Xoe.call(this,r,s);o&&this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Xu,srcEvent:r})},e})($l);function Xoe(i,e){var t=iu(i.touches),n=this.targetIds;if(e&(hi|Bo)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var r,s,o=iu(i.changedTouches),a=[],l=this.target;if(s=t.filter(function(c){return gS(c.target,l)}),e===hi)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;for(r=0;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(Ot|Ei)&&delete n[o[r].identifier],r++;if(a.length)return[vS(s.concat(a),"identifier",!0),a]}var Koe={mousedown:hi,mousemove:Bo,mouseup:Ot},Zoe="mousedown",Qoe="mousemove mouseup",_S=(function(i){sn(e,i);function e(){var n,r=e.prototype;return r.evEl=Zoe,r.evWin=Qoe,n=i.apply(this,arguments)||this,n.pressed=!1,n}var t=e.prototype;return t.handler=function(r){var s=Koe[r.type];s&hi&&r.button===0&&(this.pressed=!0),s&Bo&&r.which!==1&&(s=Ot),this.pressed&&(s&Ot&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[r],changedPointers:[r],pointerType:mS,srcEvent:r}))},e})($l),Joe=2500,OM=25;function IM(i){var e=i.changedPointers,t=e[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},r=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=r.indexOf(n);a>-1&&r.splice(a,1)};setTimeout(s,Joe)}}function eae(i,e){i&hi?(this.primaryTouch=e.changedPointers[0].identifier,IM.call(this,e)):i&(Ot|Ei)&&IM.call(this,e)}function tae(i){for(var e=i.srcEvent.clientX,t=i.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(t-r.y);if(s<=OM&&o<=OM)return!0}return!1}var yW=(function(){var i=(function(e){sn(t,e);function t(r,s){var o;return o=e.call(this,r,s)||this,o.handler=function(a,l,c){var u=c.pointerType===Xu,h=c.pointerType===mS;if(!(h&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(u)eae.call(Dh(Dh(o)),l,c);else if(h&&tae.call(Dh(Dh(o)),c))return;o.callback(a,l,c)}},o.touch=new yS(o.manager,o.handler),o.mouse=new _S(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t})($l);return i})();function iae(i){var e,t=i.options.inputClass;return t?e=t:Moe?e=vW:Aoe?e=yS:lW?e=yW:e=_S,new e(i,Yoe)}function Da(i,e,t){return Array.isArray(i)?(Ir(i,t[e],t),!0):!1}var Xh=1,Ji=2,cl=4,ms=8,Dr=ms,nu=16,jn=32,nae=1;function rae(){return nae++}function kh(i,e){var t=e.manager;return t?t.get(i):i}function DM(i){return i&nu?"cancel":i&ms?"end":i&cl?"move":i&Ji?"start":""}var Ju=(function(){function i(t){t===void 0&&(t={}),this.options=xn({enable:!0},t),this.id=rae(),this.manager=null,this.state=Xh,this.simultaneous={},this.requireFail=[]}var e=i.prototype;return e.set=function(n){return Eo(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Da(n,"recognizeWith",this))return this;var r=this.simultaneous;return n=kh(n,this),r[n.id]||(r[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Da(n,"dropRecognizeWith",this)?this:(n=kh(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Da(n,"requireFailure",this))return this;var r=this.requireFail;return n=kh(n,this),To(r,n)===-1&&(r.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Da(n,"dropRequireFailure",this))return this;n=kh(n,this);var r=To(this.requireFail,n);return r>-1&&this.requireFail.splice(r,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var r=this,s=this.state;function o(a){r.manager.emit(a,n)}s<ms&&o(r.options.event+DM(s)),o(r.options.event),n.additionalEvent&&o(n.additionalEvent),s>=ms&&o(r.options.event+DM(s))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=jn},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(jn|Xh)))return!1;n++}return!0},e.recognize=function(n){var r=Eo({},n);if(!Qf(this.options.enable,[this,r])){this.reset(),this.state=jn;return}this.state&(Dr|nu|jn)&&(this.state=Xh),this.state=this.process(r),this.state&(Ji|cl|ms|nu)&&this.tryEmit(r)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},i})(),z0=(function(i){sn(e,i);function e(n){var r;return n===void 0&&(n={}),r=i.call(this,xn({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,r.pTime=!1,r.pCenter=!1,r._timer=null,r._input=null,r.count=0,r}var t=e.prototype;return t.getTouchAction=function(){return[j0]},t.process=function(r){var s=this,o=this.options,a=r.pointers.length===o.pointers,l=r.distance<o.threshold,c=r.deltaTime<o.time;if(this.reset(),r.eventType&hi&&this.count===0)return this.failTimeout();if(l&&c&&a){if(r.eventType!==Ot)return this.failTimeout();var u=this.pTime?r.timeStamp-this.pTime<o.interval:!0,h=!this.pCenter||Id(this.pCenter,r.center)<o.posThreshold;this.pTime=r.timeStamp,this.pCenter=r.center,!h||!u?this.count=1:this.count+=1,this._input=r;var d=this.count%o.taps;if(d===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=Dr,s.tryEmit()},o.interval),Ji):Dr}return jn},t.failTimeout=function(){var r=this;return this._timer=setTimeout(function(){r.state=jn},this.options.interval),jn},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===Dr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e})(Ju),ul=(function(i){sn(e,i);function e(n){return n===void 0&&(n={}),i.call(this,xn({pointers:1},n))||this}var t=e.prototype;return t.attrTest=function(r){var s=this.options.pointers;return s===0||r.pointers.length===s},t.process=function(r){var s=this.state,o=r.eventType,a=s&(Ji|cl),l=this.attrTest(r);return a&&(o&Ei||!l)?s|nu:a||l?o&Ot?s|ms:s&Ji?s|cl:Ji:jn},e})(Ju);function _W(i){return i===ll?"down":i===Qu?"up":i===Ku?"left":i===Zu?"right":""}var bS=(function(i){sn(e,i);function e(n){var r;return n===void 0&&(n={}),r=i.call(this,xn({event:"pan",threshold:10,pointers:1,direction:cW},n))||this,r.pX=null,r.pY=null,r}var t=e.prototype;return t.getTouchAction=function(){var r=this.options.direction,s=[];return r&Bn&&s.push(eu),r&co&&s.push(Jc),s},t.directionTest=function(r){var s=this.options,o=!0,a=r.distance,l=r.direction,c=r.deltaX,u=r.deltaY;return l&s.direction||(s.direction&Bn?(l=c===0?Rd:c<0?Ku:Zu,o=c!==this.pX,a=Math.abs(r.deltaX)):(l=u===0?Rd:u<0?Qu:ll,o=u!==this.pY,a=Math.abs(r.deltaY))),r.direction=l,o&&a>s.threshold&&l&s.direction},t.attrTest=function(r){return ul.prototype.attrTest.call(this,r)&&(this.state&Ji||!(this.state&Ji)&&this.directionTest(r))},t.emit=function(r){this.pX=r.deltaX,this.pY=r.deltaY;var s=_W(r.direction);s&&(r.additionalEvent=this.options.event+s),i.prototype.emit.call(this,r)},e})(ul),bW=(function(i){sn(e,i);function e(n){return n===void 0&&(n={}),i.call(this,xn({event:"swipe",threshold:10,velocity:.3,direction:Bn|co,pointers:1},n))||this}var t=e.prototype;return t.getTouchAction=function(){return bS.prototype.getTouchAction.call(this)},t.attrTest=function(r){var s=this.options.direction,o;return s&(Bn|co)?o=r.overallVelocity:s&Bn?o=r.overallVelocityX:s&co&&(o=r.overallVelocityY),i.prototype.attrTest.call(this,r)&&s&r.offsetDirection&&r.distance>this.options.threshold&&r.maxPointers===this.options.pointers&&Co(o)>this.options.velocity&&r.eventType&Ot},t.emit=function(r){var s=_W(r.offsetDirection);s&&this.manager.emit(this.options.event+s,r),this.manager.emit(this.options.event,r)},e})(ul),wW=(function(i){sn(e,i);function e(n){return n===void 0&&(n={}),i.call(this,xn({event:"pinch",threshold:0,pointers:2},n))||this}var t=e.prototype;return t.getTouchAction=function(){return[lo]},t.attrTest=function(r){return i.prototype.attrTest.call(this,r)&&(Math.abs(r.scale-1)>this.options.threshold||this.state&Ji)},t.emit=function(r){if(r.scale!==1){var s=r.scale<1?"in":"out";r.additionalEvent=this.options.event+s}i.prototype.emit.call(this,r)},e})(ul),xW=(function(i){sn(e,i);function e(n){return n===void 0&&(n={}),i.call(this,xn({event:"rotate",threshold:0,pointers:2},n))||this}var t=e.prototype;return t.getTouchAction=function(){return[lo]},t.attrTest=function(r){return i.prototype.attrTest.call(this,r)&&(Math.abs(r.rotation)>this.options.threshold||this.state&Ji)},e})(ul),SW=(function(i){sn(e,i);function e(n){var r;return n===void 0&&(n={}),r=i.call(this,xn({event:"press",pointers:1,time:251,threshold:9},n))||this,r._timer=null,r._input=null,r}var t=e.prototype;return t.getTouchAction=function(){return[aW]},t.process=function(r){var s=this,o=this.options,a=r.pointers.length===o.pointers,l=r.distance<o.threshold,c=r.deltaTime>o.time;if(this._input=r,!l||!a||r.eventType&(Ot|Ei)&&!c)this.reset();else if(r.eventType&hi)this.reset(),this._timer=setTimeout(function(){s.state=Dr,s.tryEmit()},o.time);else if(r.eventType&Ot)return Dr;return jn},t.reset=function(){clearTimeout(this._timer)},t.emit=function(r){this.state===Dr&&(r&&r.eventType&Ot?this.manager.emit(this.options.event+"up",r):(this._input.timeStamp=pS(),this.manager.emit(this.options.event,this._input)))},e})(Ju),EW={domEvents:!1,touchAction:oW,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},PM=[[xW,{enable:!1}],[wW,{enable:!1},["rotate"]],[bW,{direction:Bn}],[bS,{direction:Bn},["swipe"]],[z0],[z0,{event:"doubletap",taps:2},["tap"]],[SW]],sae=1,kM=2;function MM(i,e){var t=i.element;if(t.style){var n;Ir(i.options.cssProps,function(r,s){n=Zf(t.style,s),e?(i.oldCssProps[n]=t.style[n],t.style[n]=r):t.style[n]=i.oldCssProps[n]||""}),e||(i.oldCssProps={})}}function oae(i,e){var t=document.createEvent("Event");t.initEvent(i,!0,!0),t.gesture=e,e.target.dispatchEvent(t)}var AM=(function(){function i(t,n){var r=this;this.options=Eo({},EW,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=iae(this),this.touchAction=new hW(this,this.options.touchAction),MM(this,!0),Ir(this.options.recognizers,function(s){var o=r.add(new s[0](s[1]));s[2]&&o.recognizeWith(s[2]),s[3]&&o.requireFailure(s[3])},this)}var e=i.prototype;return e.set=function(n){return Eo(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?kM:sae},e.recognize=function(n){var r=this.session;if(!r.stopped){this.touchAction.preventDefaults(n);var s,o=this.recognizers,a=r.curRecognizer;(!a||a&&a.state&Dr)&&(r.curRecognizer=null,a=null);for(var l=0;l<o.length;)s=o[l],r.stopped!==kM&&(!a||s===a||s.canRecognizeWith(a))?s.recognize(n):s.reset(),!a&&s.state&(Ji|cl|ms)&&(r.curRecognizer=s,a=s),l++}},e.get=function(n){if(n instanceof Ju)return n;for(var r=this.recognizers,s=0;s<r.length;s++)if(r[s].options.event===n)return r[s];return null},e.add=function(n){if(Da(n,"add",this))return this;var r=this.get(n.options.event);return r&&this.remove(r),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Da(n,"remove",this))return this;var r=this.get(n);if(n){var s=this.recognizers,o=To(s,r);o!==-1&&(s.splice(o,1),this.touchAction.update())}return this},e.on=function(n,r){if(n===void 0||r===void 0)return this;var s=this.handlers;return Ir(tu(n),function(o){s[o]=s[o]||[],s[o].push(r)}),this},e.off=function(n,r){if(n===void 0)return this;var s=this.handlers;return Ir(tu(n),function(o){r?s[o]&&s[o].splice(To(s[o],r),1):delete s[o]}),this},e.emit=function(n,r){this.options.domEvents&&oae(n,r);var s=this.handlers[n]&&this.handlers[n].slice();if(!(!s||!s.length)){r.type=n,r.preventDefault=function(){r.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](r),o++}},e.destroy=function(){this.element&&MM(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},i})(),aae={touchstart:hi,touchmove:Bo,touchend:Ot,touchcancel:Ei},lae="touchstart",cae="touchstart touchmove touchend touchcancel",uae=(function(i){sn(e,i);function e(){var n,r=e.prototype;return r.evTarget=lae,r.evWin=cae,n=i.apply(this,arguments)||this,n.started=!1,n}var t=e.prototype;return t.handler=function(r){var s=aae[r.type];if(s===hi&&(this.started=!0),!!this.started){var o=hae.call(this,r,s);s&(Ot|Ei)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:o[0],changedPointers:o[1],pointerType:Xu,srcEvent:r})}},e})($l);function hae(i,e){var t=iu(i.touches),n=iu(i.changedTouches);return e&(Ot|Ei)&&(t=vS(t.concat(n),"identifier",!0)),[t,n]}function CW(i,e,t){var n="DEPRECATED METHOD: "+e+`
`+t+` AT 
`;return function(){var r=new Error("get-stack-trace"),s=r&&r.stack?r.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,s),i.apply(this,arguments)}}var TW=CW(function(i,e,t){for(var n=Object.keys(e),r=0;r<n.length;)(!t||t&&i[n[r]]===void 0)&&(i[n[r]]=e[n[r]]),r++;return i},"extend","Use `assign`."),dae=CW(function(i,e){return TW(i,e,!0)},"merge","Use `assign`.");function fae(i,e,t){var n=e.prototype,r;r=i.prototype=Object.create(n),r.constructor=i,r._super=n,t&&Eo(r,t)}function NM(i,e){return function(){return i.apply(e,arguments)}}var wS=(function(){var i=function(t,n){return n===void 0&&(n={}),new AM(t,xn({recognizers:PM.concat()},n))};return i.VERSION="2.0.17-rc",i.DIRECTION_ALL=cW,i.DIRECTION_DOWN=ll,i.DIRECTION_LEFT=Ku,i.DIRECTION_RIGHT=Zu,i.DIRECTION_UP=Qu,i.DIRECTION_HORIZONTAL=Bn,i.DIRECTION_VERTICAL=co,i.DIRECTION_NONE=Rd,i.DIRECTION_DOWN=ll,i.INPUT_START=hi,i.INPUT_MOVE=Bo,i.INPUT_END=Ot,i.INPUT_CANCEL=Ei,i.STATE_POSSIBLE=Xh,i.STATE_BEGAN=Ji,i.STATE_CHANGED=cl,i.STATE_ENDED=ms,i.STATE_RECOGNIZED=Dr,i.STATE_CANCELLED=nu,i.STATE_FAILED=jn,i.Manager=AM,i.Input=$l,i.TouchAction=hW,i.TouchInput=yS,i.MouseInput=_S,i.PointerEventInput=vW,i.TouchMouseInput=yW,i.SingleTouchInput=uae,i.Recognizer=Ju,i.AttrRecognizer=ul,i.Tap=z0,i.Pan=bS,i.Swipe=bW,i.Pinch=wW,i.Rotate=xW,i.Press=SW,i.on=wc,i.off=xc,i.each=Ir,i.merge=dae,i.extend=TW,i.bindFn=NM,i.assign=Eo,i.inherit=fae,i.bindFn=NM,i.prefixed=Zf,i.toArray=iu,i.inArray=To,i.uniqueArray=vS,i.splitStr=tu,i.boolOrFn=Qf,i.hasParent=gS,i.addEventListeners=wc,i.removeEventListeners=xc,i.defaults=Eo({},EW,{preset:PM}),i})();wS.defaults;/**
 * vis-util
 * https://github.com/visjs/vis-util
 *
 * utilitie collection for visjs
 *
 * @version 6.0.0
 * @date    2025-07-12T18:02:43.836Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */const xS=Symbol("DELETE");function RW(i,...e){return SS({},i,...e)}function SS(...i){const e=Dd(...i);return IW(e),e}function Dd(...i){if(i.length<2)return i[0];if(i.length>2)return Dd(SS(i[0],i[1]),...i.slice(2));const e=i[0],t=i[1];if(e instanceof Date&&t instanceof Date)return e.setTime(t.getTime()),e;for(const n of Reflect.ownKeys(t))Object.prototype.propertyIsEnumerable.call(t,n)&&(t[n]===xS?delete e[n]:e[n]!==null&&t[n]!==null&&typeof e[n]=="object"&&typeof t[n]=="object"&&!Array.isArray(e[n])&&!Array.isArray(t[n])?e[n]=Dd(e[n],t[n]):e[n]=OW(t[n]));return e}function OW(i){return Array.isArray(i)?i.map(e=>OW(e)):typeof i=="object"&&i!==null?i instanceof Date?new Date(i.getTime()):Dd({},i):i}function IW(i){for(const e of Object.keys(i))i[e]===xS?delete i[e]:typeof i[e]=="object"&&i[e]!==null&&IW(i[e])}function pae(...i){return mae(i.length?i:[Date.now()])}function mae(i){let[e,t,n]=gae(i),r=1;const s=()=>{const o=2091639*e+r*23283064365386963e-26;return e=t,t=n,n=o-(r=o|0)};return s.uint32=()=>s()*4294967296,s.fract53=()=>s()+(s()*2097152|0)*11102230246251565e-32,s.algorithm="Alea",s.seed=i,s.version="0.9",s}function gae(...i){const e=vae();let t=e(" "),n=e(" "),r=e(" ");for(let s=0;s<i.length;s++)t-=e(i[s]),t<0&&(t+=1),n-=e(i[s]),n<0&&(n+=1),r-=e(i[s]),r<0&&(r+=1);return[t,n,r]}function vae(){let i=4022871197;return function(e){const t=e.toString();for(let n=0;n<t.length;n++){i+=t.charCodeAt(n);let r=.02519603282416938*i;i=r>>>0,r-=i,r*=i,i=r>>>0,r-=i,i+=r*4294967296}return(i>>>0)*23283064365386963e-26}}function yae(){const i=()=>{};return{on:i,off:i,destroy:i,emit:i,get(){return{set:i}}}}const ES=typeof window<"u"?window.Hammer||wS:function(){return yae()};function Wn(i){this._cleanupQueue=[],this.active=!1,this._dom={container:i,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const e=ES(this._dom.overlay);e.on("tap",this._onTapOverlay.bind(this)),this._cleanupQueue.push(()=>{e.destroy()}),["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(n=>{e.on(n,r=>{r.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=n=>{_ae(n.target,i)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=n=>{("key"in n?n.key==="Escape":n.keyCode===27)&&this.deactivate()}}fS(Wn.prototype);Wn.current=null;Wn.prototype.destroy=function(){this.deactivate();for(const i of this._cleanupQueue.splice(0).reverse())i()};Wn.prototype.activate=function(){Wn.current&&Wn.current.deactivate(),Wn.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Wn.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Wn.prototype._onTapOverlay=function(i){this.activate(),i.srcEvent.stopPropagation()};function _ae(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}const bae=/^\/?Date\((-?\d+)/i,wae=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,xae=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Sae=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,Eae=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function Sc(i){return i instanceof Number||typeof i=="number"}function DW(i){if(i)for(;i.hasChildNodes()===!0;){const e=i.firstChild;e&&(DW(e),i.removeChild(e))}}function Mi(i){return i instanceof String||typeof i=="string"}function q0(i){return typeof i=="object"&&i!==null}function Cae(i){if(i instanceof Date)return!0;if(Mi(i)){if(bae.exec(i))return!0;if(!isNaN(Date.parse(i)))return!0}return!1}function Ro(i,e,t,n){let r=!1;n===!0&&(r=e[t]===null&&i[t]!==void 0),r?delete i[t]:i[t]=e[t]}function PW(i,e,t=!1){for(const n in i)if(e[n]!==void 0)if(e[n]===null||typeof e[n]!="object")Ro(i,e,n,t);else{const r=i[n],s=e[n];q0(r)&&q0(s)&&PW(r,s,t)}}const Tae=Object.assign;function Rae(i,e,...t){if(!Array.isArray(i))throw new Error("Array with property names expected as first argument");for(const n of t)for(let r=0;r<i.length;r++){const s=i[r];n&&Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}function Oae(i,e,t,n=!1){if(Array.isArray(t))throw new TypeError("Arrays are not supported by deepExtend");for(let r=0;r<i.length;r++){const s=i[r];if(Object.prototype.hasOwnProperty.call(t,s))if(t[s]&&t[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?ru(e[s],t[s],!1,n):Ro(e,t,s,n);else{if(Array.isArray(t[s]))throw new TypeError("Arrays are not supported by deepExtend");Ro(e,t,s,n)}}return e}function Iae(i,e,t,n=!1){if(Array.isArray(t))throw new TypeError("Arrays are not supported by deepExtend");for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&!i.includes(r))if(t[r]&&t[r].constructor===Object)e[r]===void 0&&(e[r]={}),e[r].constructor===Object?ru(e[r],t[r]):Ro(e,t,r,n);else if(Array.isArray(t[r])){e[r]=[];for(let s=0;s<t[r].length;s++)e[r].push(t[r][s])}else Ro(e,t,r,n);return e}function ru(i,e,t=!1,n=!1){for(const r in e)(Object.prototype.hasOwnProperty.call(e,r)||t===!0)&&(typeof e[r]=="object"&&e[r]!==null&&Object.getPrototypeOf(e[r])===Object.prototype?i[r]===void 0?i[r]=ru({},e[r],t):typeof i[r]=="object"&&i[r]!==null&&Object.getPrototypeOf(i[r])===Object.prototype?ru(i[r],e[r],t):Ro(i,e,r,n):Array.isArray(e[r])?i[r]=e[r].slice():Ro(i,e,r,n));return i}function Dae(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!=e[t])return!1;return!0}function uc(i){const e=typeof i;return e==="object"?i===null?"null":i instanceof Boolean?"Boolean":i instanceof Number?"Number":i instanceof String?"String":Array.isArray(i)?"Array":i instanceof Date?"Date":"Object":e==="number"?"Number":e==="boolean"?"Boolean":e==="string"?"String":e===void 0?"undefined":e}function su(i,e){return[...i,e]}function kW(i){return i.slice()}function Pae(i){return i.getBoundingClientRect().left}function kae(i){return i.getBoundingClientRect().right}function Mae(i){return i.getBoundingClientRect().top}function Aae(i,e){let t=i.className.split(" ");const n=e.split(" ");t=t.concat(n.filter(function(r){return!t.includes(r)})),i.className=t.join(" ")}function Nae(i,e){let t=i.className.split(" ");const n=e.split(" ");t=t.filter(function(r){return!n.includes(r)}),i.className=t.join(" ")}function Lae(i,e){if(Array.isArray(i)){const t=i.length;for(let n=0;n<t;n++)e(i[n],n,i)}else for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(i[t],t,i)}const Fae=Object.values;function $ae(i,e,t){return i[e]!==t?(i[e]=t,!0):!1}function jae(i){let e=!1;return()=>{e||(e=!0,requestAnimationFrame(()=>{e=!1,i()}))}}function Wae(i){i||(i=window.event),i&&(i.preventDefault?i.preventDefault():i.returnValue=!1)}function zae(i=window.event){let e=null;return i&&(i.target?e=i.target:i.srcElement&&(e=i.srcElement)),!(e instanceof Element)||e.nodeType!=null&&e.nodeType==3&&(e=e.parentNode,!(e instanceof Element))?null:e}function qae(i,e){let t=i;for(;t;){if(t===e)return!0;if(t.parentNode)t=t.parentNode;else return!1}return!1}const Gae={asBoolean(i,e){return typeof i=="function"&&(i=i()),i!=null?i!=!1:e||null},asNumber(i,e){return typeof i=="function"&&(i=i()),i!=null?Number(i)||e||null:e||null},asString(i,e){return typeof i=="function"&&(i=i()),i!=null?String(i):e||null},asSize(i,e){return typeof i=="function"&&(i=i()),Mi(i)?i:Sc(i)?i+"px":e||null},asElement(i,e){return typeof i=="function"&&(i=i()),i||e||null}};function Jf(i){let e;switch(i.length){case 3:case 4:return e=xae.exec(i),e?{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16)}:null;case 6:case 7:return e=wae.exec(i),e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null;default:return null}}function Yae(i,e){if(i.includes("rgba"))return i;if(i.includes("rgb")){const t=i.substr(i.indexOf("(")+1).replace(")","").split(",");return"rgba("+t[0]+","+t[1]+","+t[2]+","+e+")"}else{const t=Jf(i);return t==null?i:"rgba("+t.r+","+t.g+","+t.b+","+e+")"}}function CS(i,e,t){return"#"+((1<<24)+(i<<16)+(e<<8)+t).toString(16).slice(1)}function Bae(i,e){if(Mi(i)){let t=i;if(RS(t)){const n=t.substr(4).substr(0,t.length-5).split(",").map(function(r){return parseInt(r)});t=CS(n[0],n[1],n[2])}if(TS(t)===!0){const n=AW(t),r={h:n.h,s:n.s*.8,v:Math.min(1,n.v*1.02)},s={h:n.h,s:Math.min(1,n.s*1.25),v:n.v*.8},o=G0(s.h,s.s,s.v),a=G0(r.h,r.s,r.v);return{background:t,border:o,highlight:{background:a,border:o},hover:{background:a,border:o}}}else return{background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else return e?{background:i.background||e.background,border:i.border||e.border,highlight:Mi(i.highlight)?{border:i.highlight,background:i.highlight}:{background:i.highlight&&i.highlight.background||e.highlight.background,border:i.highlight&&i.highlight.border||e.highlight.border},hover:Mi(i.hover)?{border:i.hover,background:i.hover}:{border:i.hover&&i.hover.border||e.hover.border,background:i.hover&&i.hover.background||e.hover.background}}:{background:i.background||void 0,border:i.border||void 0,highlight:Mi(i.highlight)?{border:i.highlight,background:i.highlight}:{background:i.highlight&&i.highlight.background||void 0,border:i.highlight&&i.highlight.border||void 0},hover:Mi(i.hover)?{border:i.hover,background:i.hover}:{border:i.hover&&i.hover.border||void 0,background:i.hover&&i.hover.background||void 0}}}function Pa(i,e,t){i=i/255,e=e/255,t=t/255;const n=Math.min(i,Math.min(e,t)),r=Math.max(i,Math.max(e,t));if(n===r)return{h:0,s:0,v:n};const s=i===n?e-t:t===n?i-e:t-i,a=60*((i===n?3:t===n?1:5)-s/(r-n))/360,l=(r-n)/r;return{h:a,s:l,v:r}}function MW(i){const e=document.createElement("div"),t={};e.style.cssText=i;for(let n=0;n<e.style.length;++n)t[e.style[n]]=e.style.getPropertyValue(e.style[n]);return t}function Hae(i,e){const t=MW(e);for(const[n,r]of Object.entries(t))i.style.setProperty(n,r)}function Uae(i,e){const t=MW(e);for(const n of Object.keys(t))i.style.removeProperty(n)}function Ec(i,e,t){let n,r,s;const o=Math.floor(i*6),a=i*6-o,l=t*(1-e),c=t*(1-a*e),u=t*(1-(1-a)*e);switch(o%6){case 0:n=t,r=u,s=l;break;case 1:n=c,r=t,s=l;break;case 2:n=l,r=t,s=u;break;case 3:n=l,r=c,s=t;break;case 4:n=u,r=l,s=t;break;case 5:n=t,r=l,s=c;break}return{r:Math.floor(n*255),g:Math.floor(r*255),b:Math.floor(s*255)}}function G0(i,e,t){const n=Ec(i,e,t);return CS(n.r,n.g,n.b)}function AW(i){const e=Jf(i);if(!e)throw new TypeError(`'${i}' is not a valid color.`);return Pa(e.r,e.g,e.b)}function TS(i){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(i)}function RS(i){return Sae.test(i)}function NW(i){return Eae.test(i)}function Vae(i,e){if(e!==null&&typeof e=="object"){const t=Object.create(e);for(let n=0;n<i.length;n++)Object.prototype.hasOwnProperty.call(e,i[n])&&typeof e[i[n]]=="object"&&(t[i[n]]=OS(e[i[n]]));return t}else return null}function OS(i){if(i===null||typeof i!="object")return null;if(i instanceof Element)return i;const e=Object.create(i);for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&typeof i[t]=="object"&&(e[t]=OS(i[t]));return e}function Xae(i,e){for(let t=0;t<i.length;t++){const n=i[t];let r;for(r=t;r>0&&e(n,i[r-1])<0;r--)i[r]=i[r-1];i[r]=n}return i}function Kae(i,e,t,n={}){const r=function(f){return f!=null},s=function(f){return f!==null&&typeof f=="object"},o=function(f){for(const p in f)if(Object.prototype.hasOwnProperty.call(f,p))return!1;return!0};if(!s(i))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!r(t))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");const a=function(f,p,m){s(f[m])||(f[m]={});const g=p[m],v=f[m];for(const y in g)Object.prototype.hasOwnProperty.call(g,y)&&(v[y]=g[y])},l=e[t],u=s(n)&&!o(n)?n[t]:void 0,h=u?u.enabled:void 0;if(l===void 0)return;if(typeof l=="boolean"){s(i[t])||(i[t]={}),i[t].enabled=l;return}if(l===null&&!s(i[t]))if(r(u))i[t]=Object.create(u);else return;if(!s(l))return;let d=!0;l.enabled!==void 0?d=l.enabled:h!==void 0&&(d=u.enabled),a(i,e,t),i[t].enabled=d}function Zae(i,e,t,n){let s=0,o=0,a=i.length-1;for(;o<=a&&s<1e4;){const l=Math.floor((o+a)/2),c=i[l],u=n===void 0?c[t]:c[t][n],h=e(u);if(h==0)return l;h==-1?o=l+1:a=l-1,s++}return-1}function Qae(i,e,t,n,r){let o=0,a=0,l=i.length-1,c,u,h,d;for(r=r??function(f,p){return f==p?0:f<p?-1:1};a<=l&&o<1e4;){if(d=Math.floor(.5*(l+a)),c=i[Math.max(0,d-1)][t],u=i[d][t],h=i[Math.min(i.length-1,d+1)][t],r(u,e)==0)return d;if(r(c,e)<0&&r(u,e)>0)return n=="before"?Math.max(0,d-1):d;if(r(u,e)<0&&r(h,e)>0)return n=="before"?d:Math.min(i.length-1,d+1);r(u,e)<0?a=d+1:l=d-1,o++}return-1}const Jae={linear(i){return i},easeInQuad(i){return i*i},easeOutQuad(i){return i*(2-i)},easeInOutQuad(i){return i<.5?2*i*i:-1+(4-2*i)*i},easeInCubic(i){return i*i*i},easeOutCubic(i){return--i*i*i+1},easeInOutCubic(i){return i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1},easeInQuart(i){return i*i*i*i},easeOutQuart(i){return 1- --i*i*i*i},easeInOutQuart(i){return i<.5?8*i*i*i*i:1-8*--i*i*i*i},easeInQuint(i){return i*i*i*i*i},easeOutQuint(i){return 1+--i*i*i*i*i},easeInOutQuint(i){return i<.5?16*i*i*i*i*i:1+16*--i*i*i*i*i}};function ele(){const i=document.createElement("p");i.style.width="100%",i.style.height="200px";const e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(i),document.body.appendChild(e);const t=i.offsetWidth;e.style.overflow="scroll";let n=i.offsetWidth;return t==n&&(n=e.clientWidth),document.body.removeChild(e),t-n}function tle(i,e){let t;Array.isArray(e)||(e=[e]);for(const n of i)if(n){t=n[e[0]];for(let r=1;r<e.length;r++)t&&(t=t[e[r]]);if(typeof t<"u")break}return t}const ile={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let LW=class{constructor(e=1){this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return ile[e]}setColor(e,t=!0){if(e==="none")return;let n;const r=this._isColorString(e);if(r!==void 0&&(e=r),Mi(e)===!0){if(RS(e)===!0){const s=e.substr(4).substr(0,e.length-5).split(",");n={r:s[0],g:s[1],b:s[2],a:1}}else if(NW(e)===!0){const s=e.substr(5).substr(0,e.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(TS(e)===!0){const s=Jf(e);n={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const s=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:s}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(e));this._setColor(n,t)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(e=!0){e===!0&&(this.previousColor=Object.assign({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e,t=!0){t===!0&&(this.initialColor=Object.assign({},e)),this.color=e;const n=Pa(e.r,e.g,e.b),r=2*Math.PI,s=this.r*n.s,o=this.centerCoordinates.x+s*Math.sin(r*n.h),a=this.centerCoordinates.y+s*Math.cos(r*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const t=Pa(this.color.r,this.color.g,this.color.b);t.v=e/100;const n=Ec(t.h,t.s,t.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(e=this.color){const t=Pa(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,r,s),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-t.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),n.fill(),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const t=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(t)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const e=this;this.opacityRange.onchange=function(){e._setOpacity(this.value)},this.opacityRange.oninput=function(){e._setOpacity(this.value)},this.brightnessRange.onchange=function(){e._setBrightness(this.value)},this.brightnessRange.oninput=function(){e._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new ES(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const t=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,t,n);let r,s,o,a;this.centerCoordinates={x:t*.5,y:n*.5},this.r=.49*t;const l=2*Math.PI/360,c=1/360,u=1/this.r;let h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)r=this.centerCoordinates.x+a*Math.sin(l*o),s=this.centerCoordinates.y+a*Math.cos(l*o),h=Ec(o*c,a*u,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(r-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,t,n)}this.generated=!0}_moveSelector(e){const t=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-t.left,r=e.center.y-t.top,s=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,l=r-s,c=Math.atan2(a,l),u=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(c)*u+s,d=Math.sin(c)*u+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=d-.5*this.colorPickerSelector.clientWidth+"px";let f=c/(2*Math.PI);f=f<0?f+1:f;const p=u/this.r,m=Pa(this.color.r,this.color.g,this.color.b);m.h=f,m.s=p;const g=Ec(m.h,m.s,m.v);g.a=this.color.a,this.color=g,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function Y0(...i){if(i.length<1)throw new TypeError("Invalid arguments.");if(i.length===1)return document.createTextNode(i[0]);{const e=document.createElement(i[0]);return e.appendChild(Y0(...i.slice(1))),e}}let nle=class{constructor(e,t,n,r=1,s=()=>!1){this.parent=e,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Object.assign(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new LW(r),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let t=!0;if(typeof e=="string")this.options.filter=e;else if(Array.isArray(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),e.filter!==void 0&&(this.options.filter=e.filter),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(t=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,t=e):typeof e=="function"&&(this.options.filter=e,t=!0);this.options.filter===!1&&(t=!1),this.options.enabled=t}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=this.options.filter;let t=0,n=!1;for(const r in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,r)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(r,[]),n=n||this._handleObject(this.configureOptions[r],[r],!0)):(e===!0||e.indexOf(r)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,t>0&&this._makeItem([]),this._makeHeader(r),this._handleObject(this.configureOptions[r],[r])),t++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let t=this.moduleOptions;for(let n=0;n<e.length;n++)if(t[e[n]]!==void 0)t=t[e[n]];else{t=void 0;break}return t}_makeItem(e,...t){if(this.allowCreation===!0){const n=document.createElement("div");return n.className="vis-configuration vis-config-item vis-config-s"+e.length,t.forEach(r=>{n.appendChild(r)}),this.domElements.push(n),this.domElements.length}return 0}_makeHeader(e){const t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerText=e,this._makeItem([],t)}_makeLabel(e,t,n=!1){const r=document.createElement("div");if(r.className="vis-configuration vis-config-label vis-config-s"+t.length,n===!0){for(;r.firstChild;)r.removeChild(r.firstChild);r.appendChild(Y0("i","b",e))}else r.innerText=e+":";return r}_makeDropdown(e,t,n){const r=document.createElement("select");r.className="vis-configuration vis-config-select";let s=0;t!==void 0&&e.indexOf(t)!==-1&&(s=e.indexOf(t));for(let l=0;l<e.length;l++){const c=document.createElement("option");c.value=e[l],l===s&&(c.selected="selected"),c.innerText=e[l],r.appendChild(c)}const o=this;r.onchange=function(){o._update(this.value,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,r)}_makeRange(e,t,n){const r=e[0],s=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=o}catch{}l.step=a;let c="",u=0;t!==void 0?(t<0&&t*1.2<s?(l.min=Math.ceil(t*1.2),u=l.min,c="range increased"):t/1.2<s&&(l.min=Math.ceil(t/1.2),u=l.min,c="range increased"),t*1.2>o&&o!==1&&(l.max=Math.ceil(t*1.2),u=l.max,c="range increased"),l.value=t):l.value=r;const h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=l.value;const d=this;l.onchange=function(){h.value=this.value,d._update(Number(this.value),n)},l.oninput=function(){h.value=this.value};const f=this._makeLabel(n[n.length-1],n),p=this._makeItem(n,f,l,h);c!==""&&this.popupHistory[p]!==u&&(this.popupHistory[p]=u,this._setupPopup(c,p))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,t){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=e,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:t}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const t=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=t.left+"px",this.popupDiv.html.style.top=t.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(()=>{this._removePopup()},1800)}}_makeCheckbox(e,t,n){const r=document.createElement("input");r.type="checkbox",r.className="vis-configuration vis-config-checkbox",r.checked=e,t!==void 0&&(r.checked=t,t!==e&&(typeof e=="object"?t!==e.enabled&&this.changedOptions.push({path:n,value:t}):this.changedOptions.push({path:n,value:t})));const s=this;r.onchange=function(){s._update(this.checked,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,r)}_makeTextInput(e,t,n){const r=document.createElement("input");r.type="text",r.className="vis-configuration vis-config-text",r.value=t,t!==e&&this.changedOptions.push({path:n,value:t});const s=this;r.onchange=function(){s._update(this.value,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,r)}_makeColorField(e,t,n){const r=e[1],s=document.createElement("div");t=t===void 0?r:t,t!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=t):s.className="vis-configuration vis-config-colorBlock none",t=t===void 0?r:t,s.onclick=()=>{this._showColorPicker(t,s,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}_showColorPicker(e,t,n){t.onclick=function(){},this.colorPicker.insertTo(t),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(r=>{const s="rgba("+r.r+","+r.g+","+r.b+","+r.a+")";t.style.backgroundColor=s,this._update(s,n)}),this.colorPicker.setCloseCallback(()=>{t.onclick=()=>{this._showColorPicker(e,t,n)}})}_handleObject(e,t=[],n=!1){let r=!1;const s=this.options.filter;let o=!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)){r=!0;const l=e[a],c=su(t,a);if(typeof s=="function"&&(r=s(a,t),r===!1&&!Array.isArray(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,r=this._handleObject(l,c,!0),this.allowCreation=n===!1)),r!==!1){o=!0;const u=this._getValue(c);if(Array.isArray(l))this._handleArray(l,u,c);else if(typeof l=="string")this._makeTextInput(l,u,c);else if(typeof l=="boolean")this._makeCheckbox(l,u,c);else if(l instanceof Object){if(!this.hideOption(t,a,this.moduleOptions))if(l.enabled!==void 0){const h=su(c,"enabled"),d=this._getValue(h);if(d===!0){const f=this._makeLabel(a,c,!0);this._makeItem(c,f),o=this._handleObject(l,c)||o}else this._makeCheckbox(l,d,c)}else{const h=this._makeLabel(a,c,!0);this._makeItem(c,h),o=this._handleObject(l,c)||o}}else console.error("dont know how to handle",l,a,c)}}return o}_handleArray(e,t,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,t,n),e[1]!==t&&this.changedOptions.push({path:n,value:t})):typeof e[0]=="string"?(this._makeDropdown(e,t,n),e[0]!==t&&this.changedOptions.push({path:n,value:t})):typeof e[0]=="number"&&(this._makeRange(e,t,n),e[0]!==t&&this.changedOptions.push({path:n,value:Number(t)}))}_update(e,t){const n=this._constructOptions(e,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,t,n={}){let r=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<t.length;s++)t[s]!=="global"&&(r[t[s]]===void 0&&(r[t[s]]={}),s!==t.length-1?r=r[t[s]]:r[t[s]]=e);return n}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(Y0("pre","const options = "+JSON.stringify(e,null,2)))}getOptions(){const e={};for(let t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,e);return e}},rle=class{constructor(e,t){this.container=e,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,t){this.x=parseInt(e),this.y=parseInt(t)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const t=this.frame.clientHeight,n=this.frame.clientWidth,r=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth;let o=0,a=0;if(this.overflowMethod=="flip"){let l=!1,c=!0;this.y-t<this.padding&&(c=!1),this.x+n>s-this.padding&&(l=!0),l?o=this.x-n:o=this.x,c?a=this.y-t:a=this.y}else a=this.y-t,a+t+this.padding>r&&(a=r-t-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+n+this.padding>s&&(o=s-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},Jl=!1,LM;const B0="background: #FFeeee; color: #dd0000";let sle=class _t{static validate(e,t,n){Jl=!1,LM=t;let r=t;return n!==void 0&&(r=t[n]),_t.parse(e,r,[]),Jl}static parse(e,t,n){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&_t.check(r,e,t,n)}static check(e,t,n,r){if(n[e]===void 0&&n.__any__===void 0){_t.getSuggestion(e,n,r);return}let s=e,o=!0;n[e]===void 0&&n.__any__!==void 0&&(s="__any__",o=_t.getType(t[e])==="object");let a=n[s];o&&a.__type__!==void 0&&(a=a.__type__),_t.checkFields(e,t,n,s,a,r)}static checkFields(e,t,n,r,s,o){const a=function(u){console.error("%c"+u+_t.printLocation(o,e),B0)},l=_t.getType(t[e]),c=s[l];c!==void 0?_t.getType(c)==="array"&&c.indexOf(t[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+_t.print(c)+' not "'+t[e]+'". '),Jl=!0):l==="object"&&r!=="__any__"&&(o=su(o,e),_t.parse(t[e],n[r],o)):s.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+_t.print(Object.keys(s))+". Received ["+l+'] "'+t[e]+'"'),Jl=!0)}static getType(e){const t=typeof e;return t==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Array.isArray(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":t==="number"?"number":t==="boolean"?"boolean":t==="string"?"string":t===void 0?"undefined":t}static getSuggestion(e,t,n){const r=_t.findInOptions(e,t,n,!1),s=_t.findInOptions(e,LM,[],!0),o=8,a=4;let l;r.indexMatch!==void 0?l=" in "+_t.printLocation(r.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+r.indexMatch+`"?

`:s.distance<=a&&r.distance>s.distance?l=" in "+_t.printLocation(r.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+_t.printLocation(s.path,s.closestMatch,""):r.distance<=o?l='. Did you mean "'+r.closestMatch+'"?'+_t.printLocation(r.path,e):l=". Did you mean one of these: "+_t.print(Object.keys(t))+_t.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+l,B0),Jl=!0}static findInOptions(e,t,n,r=!1){let s=1e9,o="",a=[];const l=e.toLowerCase();let c;for(const u in t){let h;if(t[u].__type__!==void 0&&r===!0){const d=_t.findInOptions(e,t[u],su(n,u));s>d.distance&&(o=d.closestMatch,a=d.path,s=d.distance,c=d.indexMatch)}else u.toLowerCase().indexOf(l)!==-1&&(c=u),h=_t.levenshteinDistance(e,u),s>h&&(o=u,a=kW(n),s=h)}return{closestMatch:o,path:a,distance:s,indexMatch:c}}static printLocation(e,t,n=`Problem value found at: 
`){let r=`

`+n+`options = {
`;for(let s=0;s<e.length;s++){for(let o=0;o<s+1;o++)r+="  ";r+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)r+="  ";r+=t+`
`;for(let s=0;s<e.length+1;s++){for(let o=0;o<e.length-s;o++)r+="  ";r+=`}
`}return r+`

`}static print(e){return JSON.stringify(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,t){if(e.length===0)return t.length;if(t.length===0)return e.length;const n=[];let r;for(r=0;r<=t.length;r++)n[r]=[r];let s;for(s=0;s<=e.length;s++)n[0][s]=s;for(r=1;r<=t.length;r++)for(s=1;s<=e.length;s++)t.charAt(r-1)==e.charAt(s-1)?n[r][s]=n[r-1][s-1]:n[r][s]=Math.min(n[r-1][s-1]+1,Math.min(n[r][s-1]+1,n[r-1][s]+1));return n[t.length][e.length]}};const ole=Wn,ale=LW,lle=nle,cle=ES,ule=rle,hle=B0,dle=sle,fle=Object.freeze(Object.defineProperty({__proto__:null,Activator:ole,Alea:pae,ColorPicker:ale,Configurator:lle,DELETE:xS,HSVToHex:G0,HSVToRGB:Ec,Hammer:cle,Popup:ule,RGBToHSV:Pa,RGBToHex:CS,VALIDATOR_PRINT_STYLE:hle,Validator:dle,addClassName:Aae,addCssText:Hae,binarySearchCustom:Zae,binarySearchValue:Qae,bridgeObject:OS,copyAndExtendArray:su,copyArray:kW,deepExtend:ru,deepObjectAssign:SS,easingFunctions:Jae,equalArray:Dae,extend:Tae,fillIfDefined:PW,forEach:Lae,getAbsoluteLeft:Pae,getAbsoluteRight:kae,getAbsoluteTop:Mae,getScrollBarWidth:ele,getTarget:zae,getType:uc,hasParent:qae,hexToHSV:AW,hexToRGB:Jf,insertSort:Xae,isDate:Cae,isNumber:Sc,isObject:q0,isString:Mi,isValidHex:TS,isValidRGB:RS,isValidRGBA:NW,mergeOptions:Kae,option:Gae,overrideOpacity:Yae,parseColor:Bae,preventDefault:Wae,pureDeepObjectAssign:RW,recursiveDOMDelete:DW,removeClassName:Nae,removeCssText:Uae,selectiveBridgeObject:Vae,selectiveDeepExtend:Oae,selectiveExtend:Rae,selectiveNotDeepExtend:Iae,throttle:jae,toArray:Fae,topMost:tle,updateProperty:$ae},Symbol.toStringTag,{value:"Module"})),Ht=[];for(let i=0;i<256;++i)Ht.push((i+256).toString(16).slice(1));function ple(i,e=0){return(Ht[i[e+0]]+Ht[i[e+1]]+Ht[i[e+2]]+Ht[i[e+3]]+"-"+Ht[i[e+4]]+Ht[i[e+5]]+"-"+Ht[i[e+6]]+Ht[i[e+7]]+"-"+Ht[i[e+8]]+Ht[i[e+9]]+"-"+Ht[i[e+10]]+Ht[i[e+11]]+Ht[i[e+12]]+Ht[i[e+13]]+Ht[i[e+14]]+Ht[i[e+15]]).toLowerCase()}let Sb;const mle=new Uint8Array(16);function gle(){if(!Sb){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Sb=crypto.getRandomValues.bind(crypto)}return Sb(mle)}const vle=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),FM={randomUUID:vle};function yle(i,e,t){i=i||{};const n=i.random??i.rng?.()??gle();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ple(n)}function uo(i,e,t){return FM.randomUUID&&!i?FM.randomUUID():yle(i)}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function _le(i){return new wle(i)}class ble{_source;_transformers;_target;_listeners={add:this._add.bind(this),remove:this._remove.bind(this),update:this._update.bind(this)};constructor(e,t,n){this._source=e,this._transformers=t,this._target=n}all(){return this._target.update(this._transformItems(this._source.get())),this}start(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}stop(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}_transformItems(e){return this._transformers.reduce((t,n)=>n(t),e)}_add(e,t){t!=null&&this._target.add(this._transformItems(this._source.get(t.items)))}_update(e,t){t!=null&&this._target.update(this._transformItems(this._source.get(t.items)))}_remove(e,t){t!=null&&this._target.remove(this._transformItems(t.oldData))}}class wle{_source;_transformers=[];constructor(e){this._source=e}filter(e){return this._transformers.push(t=>t.filter(e)),this}map(e){return this._transformers.push(t=>t.map(e)),this}flatMap(e){return this._transformers.push(t=>t.flatMap(e)),this}to(e){return new ble(this._source,this._transformers,e)}}function H0(i){return typeof i=="string"||typeof i=="number"}class IS{delay;max;_queue=[];_timeout=null;_extended=null;constructor(e){this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,t){const n=new IS(t);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const r=[{name:"flush",original:void 0}];if(t&&t.replace)for(let s=0;s<t.replace.length;s++){const o=t.replace[s];r.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:r},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,t=this._extended.methods;for(let n=0;n<t.length;n++){const r=t[n];r.original?e[r.name]=r.original:delete e[r.name]}this._extended=null}}replace(e,t){const n=this,r=e[t];if(!r)throw new Error("Method "+t+" undefined");e[t]=function(...s){n.queue({args:s,fn:r,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=setTimeout(()=>{this.flush()},this.delay))}flush(){this._queue.splice(0).forEach(e=>{e.fn.apply(e.context||e.fn,e.args||[])})}}class ou{_subscribers={"*":[],add:[],remove:[],update:[]};_trigger(e,t,n){if(e==="*")throw new Error("Cannot trigger event *");[...this._subscribers[e],...this._subscribers["*"]].forEach(r=>{r(e,t,n??null)})}on(e,t){typeof t=="function"&&this._subscribers[e].push(t)}off(e,t){this._subscribers[e]=this._subscribers[e].filter(n=>n!==t)}subscribe=ou.prototype.on;unsubscribe=ou.prototype.off}class no{_pairs;constructor(e){this._pairs=e}*[Symbol.iterator](){for(const[e,t]of this._pairs)yield[e,t]}*entries(){for(const[e,t]of this._pairs)yield[e,t]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){return[...this._pairs].map(e=>e[0])}toItemArray(){return[...this._pairs].map(e=>e[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=Object.create(null);for(const[t,n]of this._pairs)e[t]=n;return e}toMap(){return new Map(this._pairs)}toIdSet(){return new Set(this.toIdArray())}toItemSet(){return new Set(this.toItemArray())}cache(){return new no([...this._pairs])}distinct(e){const t=new Set;for(const[n,r]of this._pairs)t.add(e(r,n));return t}filter(e){const t=this._pairs;return new no({*[Symbol.iterator](){for(const[n,r]of t)e(r,n)&&(yield[n,r])}})}forEach(e){for(const[t,n]of this._pairs)e(n,t)}map(e){const t=this._pairs;return new no({*[Symbol.iterator](){for(const[n,r]of t)yield[n,e(r,n)]}})}max(e){const t=this._pairs[Symbol.iterator]();let n=t.next();if(n.done)return null;let r=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=t.next()).done;){const[o,a]=n.value,l=e(a,o);l>s&&(s=l,r=a)}return r}min(e){const t=this._pairs[Symbol.iterator]();let n=t.next();if(n.done)return null;let r=n.value[1],s=e(n.value[1],n.value[0]);for(;!(n=t.next()).done;){const[o,a]=n.value,l=e(a,o);l<s&&(s=l,r=a)}return r}reduce(e,t){for(const[n,r]of this._pairs)t=e(t,r,n);return t}sort(e){return new no({[Symbol.iterator]:()=>[...this._pairs].sort(([t,n],[r,s])=>e(n,s,t,r))[Symbol.iterator]()})}}function xle(i,e){return i[e]==null&&(i[e]=uo()),i}class hl extends ou{flush;length;get idProp(){return this._idProp}_options;_data;_idProp;_queue=null;constructor(e,t){super(),e&&!Array.isArray(e)&&(t=e,e=[]),this._options=t||{},this._data=new Map,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(t)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=IS.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,t){const n=[];let r;if(Array.isArray(e)){if(e.map(o=>o[this._idProp]).some(o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,a=e.length;o<a;o++)r=this._addItem(e[o]),n.push(r)}else if(e&&typeof e=="object")r=this._addItem(e),n.push(r);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},t),n}update(e,t){const n=[],r=[],s=[],o=[],a=this._idProp,l=c=>{const u=c[a];if(u!=null&&this._data.has(u)){const h=c,d=Object.assign({},this._data.get(u)),f=this._updateItem(h);r.push(f),o.push(h),s.push(d)}else{const h=this._addItem(c);n.push(h)}};if(Array.isArray(e))for(let c=0,u=e.length;c<u;c++)e[c]&&typeof e[c]=="object"?l(e[c]):console.warn("Ignoring input item, which is not an object at index "+c);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},t),r.length){const c={items:r,oldData:s,data:o};this._trigger("update",c,t)}return n.concat(r)}updateOnly(e,t){Array.isArray(e)||(e=[e]);const n=e.map(r=>{const s=this._data.get(r[this._idProp]);if(s==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:s,update:r}}).map(({oldData:r,update:s})=>{const o=r[this._idProp],a=RW(r,s);return this._data.set(o,a),{id:o,oldData:r,updatedData:a}});if(n.length){const r={items:n.map(s=>s.id),oldData:n.map(s=>s.oldData),data:n.map(s=>s.updatedData)};return this._trigger("update",r,t),r.items}else return[]}get(e,t){let n,r,s;H0(e)?(n=e,s=t):Array.isArray(e)?(r=e,s=t):s=e;const o=s&&s.returnType==="Object"?"Object":"Array",a=s&&s.filter,l=[];let c,u,h;if(n!=null)c=this._data.get(n),c&&a&&!a(c)&&(c=void 0);else if(r!=null)for(let d=0,f=r.length;d<f;d++)c=this._data.get(r[d]),c!=null&&(!a||a(c))&&l.push(c);else{u=[...this._data.keys()];for(let d=0,f=u.length;d<f;d++)h=u[d],c=this._data.get(h),c!=null&&(!a||a(c))&&l.push(c)}if(s&&s.order&&n==null&&this._sort(l,s.order),s&&s.fields){const d=s.fields;if(n!=null&&c!=null)c=this._filterFields(c,d);else for(let f=0,p=l.length;f<p;f++)l[f]=this._filterFields(l[f],d)}if(o=="Object"){const d={};for(let f=0,p=l.length;f<p;f++){const m=l[f],g=m[this._idProp];d[g]=m}return d}else return n!=null?c??null:l}getIds(e){const t=this._data,n=e&&e.filter,r=e&&e.order,s=[...t.keys()],o=[];if(n)if(r){const a=[];for(let l=0,c=s.length;l<c;l++){const u=s[l],h=this._data.get(u);h!=null&&n(h)&&a.push(h)}this._sort(a,r);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],u=this._data.get(c);u!=null&&n(u)&&o.push(u[this._idProp])}else if(r){const a=[];for(let l=0,c=s.length;l<c;l++){const u=s[l];a.push(t.get(u))}this._sort(a,r);for(let l=0,c=a.length;l<c;l++)o.push(a[l][this._idProp])}else for(let a=0,l=s.length;a<l;a++){const c=s[a],u=t.get(c);u!=null&&o.push(u[this._idProp])}return o}getDataSet(){return this}forEach(e,t){const n=t&&t.filter,s=[...this._data.keys()];if(t&&t.order){const o=this.get(t);for(let a=0,l=o.length;a<l;a++){const c=o[a],u=c[this._idProp];e(c,u)}}else for(let o=0,a=s.length;o<a;o++){const l=s[o],c=this._data.get(l);c!=null&&(!n||n(c))&&e(c,l)}}map(e,t){const n=t&&t.filter,r=[],o=[...this._data.keys()];for(let a=0,l=o.length;a<l;a++){const c=o[a],u=this._data.get(c);u!=null&&(!n||n(u))&&r.push(e(u,c))}return t&&t.order&&this._sort(r,t.order),r}_filterFields(e,t){return e&&(Array.isArray(t)?t:Object.keys(t)).reduce((n,r)=>(n[r]=e[r],n),{})}_sort(e,t){if(typeof t=="string"){const n=t;e.sort((r,s)=>{const o=r[n],a=s[n];return o>a?1:o<a?-1:0})}else if(typeof t=="function")e.sort(t);else throw new TypeError("Order must be a function or a string")}remove(e,t){const n=[],r=[],s=Array.isArray(e)?e:[e];for(let o=0,a=s.length;o<a;o++){const l=this._remove(s[o]);if(l){const c=l[this._idProp];c!=null&&(n.push(c),r.push(l))}}return n.length&&this._trigger("remove",{items:n,oldData:r},t),n}_remove(e){let t;if(H0(e)?t=e:e&&typeof e=="object"&&(t=e[this._idProp]),t!=null&&this._data.has(t)){const n=this._data.get(t)||null;return this._data.delete(t),--this.length,n}return null}clear(e){const t=[...this._data.keys()],n=[];for(let r=0,s=t.length;r<s;r++)n.push(this._data.get(t[r]));return this._data.clear(),this.length=0,this._trigger("remove",{items:t,oldData:n},e),t}max(e){let t=null,n=null;for(const r of this._data.values()){const s=r[e];typeof s=="number"&&(n==null||s>n)&&(t=r,n=s)}return t||null}min(e){let t=null,n=null;for(const r of this._data.values()){const s=r[e];typeof s=="number"&&(n==null||s<n)&&(t=r,n=s)}return t||null}distinct(e){const t=this._data,n=[...t.keys()],r=[];let s=0;for(let o=0,a=n.length;o<a;o++){const l=n[o],u=t.get(l)[e];let h=!1;for(let d=0;d<s;d++)if(r[d]==u){h=!0;break}!h&&u!==void 0&&(r[s]=u,s++)}return r}_addItem(e){const t=xle(e,this._idProp),n=t[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,t),++this.length,n}_updateItem(e){const t=e[this._idProp];if(t==null)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(e)+")");const n=this._data.get(t);if(!n)throw new Error("Cannot update item: no item with id "+t+" found");return this._data.set(t,{...n,...e}),t}stream(e){if(e){const t=this._data;return new no({*[Symbol.iterator](){for(const n of e){const r=t.get(n);r!=null&&(yield[n,r])}}})}else return new no({[Symbol.iterator]:this._data.entries.bind(this._data)})}}class DS extends ou{length=0;get idProp(){return this.getDataSet().idProp}_listener;_data;_ids=new Set;_options;constructor(e,t){super(),this._options=t||{},this._listener=this._onEvent.bind(this),this.setData(e)}setData(e){if(this._data){this._data.off&&this._data.off("*",this._listener);const t=this._data.getIds({filter:this._options.filter}),n=this._data.get(t);this._ids.clear(),this.length=0,this._trigger("remove",{items:t,oldData:n})}if(e!=null){this._data=e;const t=this._data.getIds({filter:this._options.filter});for(let n=0,r=t.length;n<r;n++){const s=t[n];this._ids.add(s)}this.length=t.length,this._trigger("add",{items:t})}else this._data=new hl;this._data.on&&this._data.on("*",this._listener)}refresh(){const e=this._data.getIds({filter:this._options.filter}),t=[...this._ids],n={},r=[],s=[],o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];n[c]=!0,this._ids.has(c)||(r.push(c),this._ids.add(c))}for(let a=0,l=t.length;a<l;a++){const c=t[a],u=this._data.get(c);u==null?console.error("If you see this, report it please."):n[c]||(s.push(c),o.push(u),this._ids.delete(c))}this.length+=r.length-s.length,r.length&&this._trigger("add",{items:r}),s.length&&this._trigger("remove",{items:s,oldData:o})}get(e,t){if(this._data==null)return null;let n=null,r;H0(e)||Array.isArray(e)?(n=e,r=t):r=e;const s=Object.assign({},this._options,r),o=this._options.filter,a=r&&r.filter;return o&&a&&(s.filter=l=>o(l)&&a(l)),n==null?this._data.get(s):this._data.get(n,s)}getIds(e){if(this._data.length){const t=this._options.filter,n=e!=null?e.filter:null;let r;return n?t?r=s=>t(s)&&n(s):r=n:r=t,this._data.getIds({filter:r,order:e&&e.order})}else return[]}forEach(e,t){if(this._data){const n=this._options.filter,r=t&&t.filter;let s;r?n?s=function(o){return n(o)&&r(o)}:s=r:s=n,this._data.forEach(e,{filter:s,order:t&&t.order})}}map(e,t){if(this._data){const n=this._options.filter,r=t&&t.filter;let s;return r?n?s=o=>n(o)&&r(o):s=r:s=n,this._data.map(e,{filter:s,order:t&&t.order})}else return[]}getDataSet(){return this._data.getDataSet()}stream(e){return this._data.stream(e||{[Symbol.iterator]:this._ids.keys.bind(this._ids)})}dispose(){this._data?.off&&this._data.off("*",this._listener);const e="This data view has already been disposed of.",t={get:()=>{throw new Error(e)},set:()=>{throw new Error(e)},configurable:!1};for(const n of Reflect.ownKeys(DS.prototype))Object.defineProperty(this,n,t)}_onEvent(e,t,n){if(!t||!t.items||!this._data)return;const r=t.items,s=[],o=[],a=[],l=[],c=[],u=[];switch(e){case"add":for(let h=0,d=r.length;h<d;h++){const f=r[h];this.get(f)&&(this._ids.add(f),s.push(f))}break;case"update":for(let h=0,d=r.length;h<d;h++){const f=r[h];this.get(f)?this._ids.has(f)?(o.push(f),c.push(t.data[h]),l.push(t.oldData[h])):(this._ids.add(f),s.push(f)):this._ids.has(f)&&(this._ids.delete(f),a.push(f),u.push(t.oldData[h]))}break;case"remove":for(let h=0,d=r.length;h<d;h++){const f=r[h];this._ids.has(f)&&(this._ids.delete(f),a.push(f),u.push(t.oldData[h]))}break}this.length+=s.length-a.length,s.length&&this._trigger("add",{items:s},n),o.length&&this._trigger("update",{items:o,oldData:l,data:c},n),a.length&&this._trigger("remove",{items:a,oldData:u},n)}}function Sle(i,e){return typeof e=="object"&&e!==null&&i===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof e.forEach=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof e.map=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function Ele(i,e){return typeof e=="object"&&e!==null&&i===e.idProp&&typeof e.forEach=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof e.map=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&Sle(i,e.getDataSet())}var Mh={exports:{}},lt={},Ah={exports:{}},Ws={},$M;function FW(){if($M)return Ws;$M=1;function i(){var s={};return s["align-content"]=!1,s["align-items"]=!1,s["align-self"]=!1,s["alignment-adjust"]=!1,s["alignment-baseline"]=!1,s.all=!1,s["anchor-point"]=!1,s.animation=!1,s["animation-delay"]=!1,s["animation-direction"]=!1,s["animation-duration"]=!1,s["animation-fill-mode"]=!1,s["animation-iteration-count"]=!1,s["animation-name"]=!1,s["animation-play-state"]=!1,s["animation-timing-function"]=!1,s.azimuth=!1,s["backface-visibility"]=!1,s.background=!0,s["background-attachment"]=!0,s["background-clip"]=!0,s["background-color"]=!0,s["background-image"]=!0,s["background-origin"]=!0,s["background-position"]=!0,s["background-repeat"]=!0,s["background-size"]=!0,s["baseline-shift"]=!1,s.binding=!1,s.bleed=!1,s["bookmark-label"]=!1,s["bookmark-level"]=!1,s["bookmark-state"]=!1,s.border=!0,s["border-bottom"]=!0,s["border-bottom-color"]=!0,s["border-bottom-left-radius"]=!0,s["border-bottom-right-radius"]=!0,s["border-bottom-style"]=!0,s["border-bottom-width"]=!0,s["border-collapse"]=!0,s["border-color"]=!0,s["border-image"]=!0,s["border-image-outset"]=!0,s["border-image-repeat"]=!0,s["border-image-slice"]=!0,s["border-image-source"]=!0,s["border-image-width"]=!0,s["border-left"]=!0,s["border-left-color"]=!0,s["border-left-style"]=!0,s["border-left-width"]=!0,s["border-radius"]=!0,s["border-right"]=!0,s["border-right-color"]=!0,s["border-right-style"]=!0,s["border-right-width"]=!0,s["border-spacing"]=!0,s["border-style"]=!0,s["border-top"]=!0,s["border-top-color"]=!0,s["border-top-left-radius"]=!0,s["border-top-right-radius"]=!0,s["border-top-style"]=!0,s["border-top-width"]=!0,s["border-width"]=!0,s.bottom=!1,s["box-decoration-break"]=!0,s["box-shadow"]=!0,s["box-sizing"]=!0,s["box-snap"]=!0,s["box-suppress"]=!0,s["break-after"]=!0,s["break-before"]=!0,s["break-inside"]=!0,s["caption-side"]=!1,s.chains=!1,s.clear=!0,s.clip=!1,s["clip-path"]=!1,s["clip-rule"]=!1,s.color=!0,s["color-interpolation-filters"]=!0,s["column-count"]=!1,s["column-fill"]=!1,s["column-gap"]=!1,s["column-rule"]=!1,s["column-rule-color"]=!1,s["column-rule-style"]=!1,s["column-rule-width"]=!1,s["column-span"]=!1,s["column-width"]=!1,s.columns=!1,s.contain=!1,s.content=!1,s["counter-increment"]=!1,s["counter-reset"]=!1,s["counter-set"]=!1,s.crop=!1,s.cue=!1,s["cue-after"]=!1,s["cue-before"]=!1,s.cursor=!1,s.direction=!1,s.display=!0,s["display-inside"]=!0,s["display-list"]=!0,s["display-outside"]=!0,s["dominant-baseline"]=!1,s.elevation=!1,s["empty-cells"]=!1,s.filter=!1,s.flex=!1,s["flex-basis"]=!1,s["flex-direction"]=!1,s["flex-flow"]=!1,s["flex-grow"]=!1,s["flex-shrink"]=!1,s["flex-wrap"]=!1,s.float=!1,s["float-offset"]=!1,s["flood-color"]=!1,s["flood-opacity"]=!1,s["flow-from"]=!1,s["flow-into"]=!1,s.font=!0,s["font-family"]=!0,s["font-feature-settings"]=!0,s["font-kerning"]=!0,s["font-language-override"]=!0,s["font-size"]=!0,s["font-size-adjust"]=!0,s["font-stretch"]=!0,s["font-style"]=!0,s["font-synthesis"]=!0,s["font-variant"]=!0,s["font-variant-alternates"]=!0,s["font-variant-caps"]=!0,s["font-variant-east-asian"]=!0,s["font-variant-ligatures"]=!0,s["font-variant-numeric"]=!0,s["font-variant-position"]=!0,s["font-weight"]=!0,s.grid=!1,s["grid-area"]=!1,s["grid-auto-columns"]=!1,s["grid-auto-flow"]=!1,s["grid-auto-rows"]=!1,s["grid-column"]=!1,s["grid-column-end"]=!1,s["grid-column-start"]=!1,s["grid-row"]=!1,s["grid-row-end"]=!1,s["grid-row-start"]=!1,s["grid-template"]=!1,s["grid-template-areas"]=!1,s["grid-template-columns"]=!1,s["grid-template-rows"]=!1,s["hanging-punctuation"]=!1,s.height=!0,s.hyphens=!1,s.icon=!1,s["image-orientation"]=!1,s["image-resolution"]=!1,s["ime-mode"]=!1,s["initial-letters"]=!1,s["inline-box-align"]=!1,s["justify-content"]=!1,s["justify-items"]=!1,s["justify-self"]=!1,s.left=!1,s["letter-spacing"]=!0,s["lighting-color"]=!0,s["line-box-contain"]=!1,s["line-break"]=!1,s["line-grid"]=!1,s["line-height"]=!1,s["line-snap"]=!1,s["line-stacking"]=!1,s["line-stacking-ruby"]=!1,s["line-stacking-shift"]=!1,s["line-stacking-strategy"]=!1,s["list-style"]=!0,s["list-style-image"]=!0,s["list-style-position"]=!0,s["list-style-type"]=!0,s.margin=!0,s["margin-bottom"]=!0,s["margin-left"]=!0,s["margin-right"]=!0,s["margin-top"]=!0,s["marker-offset"]=!1,s["marker-side"]=!1,s.marks=!1,s.mask=!1,s["mask-box"]=!1,s["mask-box-outset"]=!1,s["mask-box-repeat"]=!1,s["mask-box-slice"]=!1,s["mask-box-source"]=!1,s["mask-box-width"]=!1,s["mask-clip"]=!1,s["mask-image"]=!1,s["mask-origin"]=!1,s["mask-position"]=!1,s["mask-repeat"]=!1,s["mask-size"]=!1,s["mask-source-type"]=!1,s["mask-type"]=!1,s["max-height"]=!0,s["max-lines"]=!1,s["max-width"]=!0,s["min-height"]=!0,s["min-width"]=!0,s["move-to"]=!1,s["nav-down"]=!1,s["nav-index"]=!1,s["nav-left"]=!1,s["nav-right"]=!1,s["nav-up"]=!1,s["object-fit"]=!1,s["object-position"]=!1,s.opacity=!1,s.order=!1,s.orphans=!1,s.outline=!1,s["outline-color"]=!1,s["outline-offset"]=!1,s["outline-style"]=!1,s["outline-width"]=!1,s.overflow=!1,s["overflow-wrap"]=!1,s["overflow-x"]=!1,s["overflow-y"]=!1,s.padding=!0,s["padding-bottom"]=!0,s["padding-left"]=!0,s["padding-right"]=!0,s["padding-top"]=!0,s.page=!1,s["page-break-after"]=!1,s["page-break-before"]=!1,s["page-break-inside"]=!1,s["page-policy"]=!1,s.pause=!1,s["pause-after"]=!1,s["pause-before"]=!1,s.perspective=!1,s["perspective-origin"]=!1,s.pitch=!1,s["pitch-range"]=!1,s["play-during"]=!1,s.position=!1,s["presentation-level"]=!1,s.quotes=!1,s["region-fragment"]=!1,s.resize=!1,s.rest=!1,s["rest-after"]=!1,s["rest-before"]=!1,s.richness=!1,s.right=!1,s.rotation=!1,s["rotation-point"]=!1,s["ruby-align"]=!1,s["ruby-merge"]=!1,s["ruby-position"]=!1,s["shape-image-threshold"]=!1,s["shape-outside"]=!1,s["shape-margin"]=!1,s.size=!1,s.speak=!1,s["speak-as"]=!1,s["speak-header"]=!1,s["speak-numeral"]=!1,s["speak-punctuation"]=!1,s["speech-rate"]=!1,s.stress=!1,s["string-set"]=!1,s["tab-size"]=!1,s["table-layout"]=!1,s["text-align"]=!0,s["text-align-last"]=!0,s["text-combine-upright"]=!0,s["text-decoration"]=!0,s["text-decoration-color"]=!0,s["text-decoration-line"]=!0,s["text-decoration-skip"]=!0,s["text-decoration-style"]=!0,s["text-emphasis"]=!0,s["text-emphasis-color"]=!0,s["text-emphasis-position"]=!0,s["text-emphasis-style"]=!0,s["text-height"]=!0,s["text-indent"]=!0,s["text-justify"]=!0,s["text-orientation"]=!0,s["text-overflow"]=!0,s["text-shadow"]=!0,s["text-space-collapse"]=!0,s["text-transform"]=!0,s["text-underline-position"]=!0,s["text-wrap"]=!0,s.top=!1,s.transform=!1,s["transform-origin"]=!1,s["transform-style"]=!1,s.transition=!1,s["transition-delay"]=!1,s["transition-duration"]=!1,s["transition-property"]=!1,s["transition-timing-function"]=!1,s["unicode-bidi"]=!1,s["vertical-align"]=!1,s.visibility=!1,s["voice-balance"]=!1,s["voice-duration"]=!1,s["voice-family"]=!1,s["voice-pitch"]=!1,s["voice-range"]=!1,s["voice-rate"]=!1,s["voice-stress"]=!1,s["voice-volume"]=!1,s.volume=!1,s["white-space"]=!1,s.widows=!1,s.width=!0,s["will-change"]=!1,s["word-break"]=!0,s["word-spacing"]=!0,s["word-wrap"]=!0,s["wrap-flow"]=!1,s["wrap-through"]=!1,s["writing-mode"]=!1,s["z-index"]=!1,s}function e(s,o,a){}function t(s,o,a){}var n=/javascript\s*\:/img;function r(s,o){return n.test(o)?"":o}return Ws.whiteList=i(),Ws.getDefaultWhiteList=i,Ws.onAttr=e,Ws.onIgnoreAttr=t,Ws.safeAttrValue=r,Ws}var Eb,jM;function $W(){return jM||(jM=1,Eb={indexOf:function(i,e){var t,n;if(Array.prototype.indexOf)return i.indexOf(e);for(t=0,n=i.length;t<n;t++)if(i[t]===e)return t;return-1},forEach:function(i,e,t){var n,r;if(Array.prototype.forEach)return i.forEach(e,t);for(n=0,r=i.length;n<r;n++)e.call(t,i[n],n,i)},trim:function(i){return String.prototype.trim?i.trim():i.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(i){return String.prototype.trimRight?i.trimRight():i.replace(/(\s*$)/g,"")}}),Eb}var Cb,WM;function Cle(){if(WM)return Cb;WM=1;var i=$W();function e(t,n){t=i.trimRight(t),t[t.length-1]!==";"&&(t+=";");var r=t.length,s=!1,o=0,a=0,l="";function c(){if(!s){var d=i.trim(t.slice(o,a)),f=d.indexOf(":");if(f!==-1){var p=i.trim(d.slice(0,f)),m=i.trim(d.slice(f+1));if(p){var g=n(o,l.length,p,m,d);g&&(l+=g+"; ")}}}o=a+1}for(;a<r;a++){var u=t[a];if(u==="/"&&t[a+1]==="*"){var h=t.indexOf("*/",a+2);if(h===-1)break;a=h+1,o=a+1,s=!1}else u==="("?s=!0:u===")"?s=!1:u===";"?s||c():u===`
`&&c()}return i.trim(l)}return Cb=e,Cb}var Tb,zM;function Tle(){if(zM)return Tb;zM=1;var i=FW(),e=Cle();$W();function t(s){return s==null}function n(s){var o={};for(var a in s)o[a]=s[a];return o}function r(s){s=n(s||{}),s.whiteList=s.whiteList||i.whiteList,s.onAttr=s.onAttr||i.onAttr,s.onIgnoreAttr=s.onIgnoreAttr||i.onIgnoreAttr,s.safeAttrValue=s.safeAttrValue||i.safeAttrValue,this.options=s}return r.prototype.process=function(s){if(s=s||"",s=s.toString(),!s)return"";var o=this,a=o.options,l=a.whiteList,c=a.onAttr,u=a.onIgnoreAttr,h=a.safeAttrValue,d=e(s,function(f,p,m,g,v){var y=l[m],w=!1;if(y===!0?w=y:typeof y=="function"?w=y(g):y instanceof RegExp&&(w=y.test(g)),w!==!0&&(w=!1),g=h(m,g),!!g){var b={position:p,sourcePosition:f,source:v,isWhite:w};if(w){var x=c(m,g,b);return t(x)?m+":"+g:x}else{var x=u(m,g,b);if(!t(x))return x}}});return d},Tb=r,Tb}var qM;function U0(){return qM||(qM=1,(function(i,e){var t=FW(),n=Tle();function r(o,a){var l=new n(a);return l.process(o)}e=i.exports=r,e.FilterCSS=n;for(var s in t)e[s]=t[s];typeof window<"u"&&(window.filterCSS=i.exports)})(Ah,Ah.exports)),Ah.exports}var Rb,GM;function PS(){return GM||(GM=1,Rb={indexOf:function(i,e){var t,n;if(Array.prototype.indexOf)return i.indexOf(e);for(t=0,n=i.length;t<n;t++)if(i[t]===e)return t;return-1},forEach:function(i,e,t){var n,r;if(Array.prototype.forEach)return i.forEach(e,t);for(n=0,r=i.length;n<r;n++)e.call(t,i[n],n,i)},trim:function(i){return String.prototype.trim?i.trim():i.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(i){var e=/\s|\n|\t/,t=e.exec(i);return t?t.index:-1}}),Rb}var YM;function jW(){if(YM)return lt;YM=1;var i=U0().FilterCSS,e=U0().getDefaultWhiteList,t=PS();function n(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var r=new i;function s(A,z,P){}function o(A,z,P){}function a(A,z,P){}function l(A,z,P){}function c(A){return A.replace(h,"&lt;").replace(d,"&gt;")}function u(A,z,P,G){if(P=I(P),z==="href"||z==="src"){if(P=t.trim(P),P==="#")return"#";if(!(P.substr(0,7)==="http://"||P.substr(0,8)==="https://"||P.substr(0,7)==="mailto:"||P.substr(0,4)==="tel:"||P.substr(0,11)==="data:image/"||P.substr(0,6)==="ftp://"||P.substr(0,2)==="./"||P.substr(0,3)==="../"||P[0]==="#"||P[0]==="/"))return""}else if(z==="background"){if(y.lastIndex=0,y.test(P))return""}else if(z==="style"){if(w.lastIndex=0,w.test(P)||(b.lastIndex=0,b.test(P)&&(y.lastIndex=0,y.test(P))))return"";G!==!1&&(G=G||r,P=G.process(P))}return P=k(P),P}var h=/</g,d=/>/g,f=/"/g,p=/&quot;/g,m=/&#([a-zA-Z0-9]*);?/gim,g=/&colon;?/gim,v=/&newline;?/gim,y=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,w=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,b=/u\s*r\s*l\s*\(.*/gi;function x(A){return A.replace(f,"&quot;")}function C(A){return A.replace(p,'"')}function E(A){return A.replace(m,function(P,G){return G[0]==="x"||G[0]==="X"?String.fromCharCode(parseInt(G.substr(1),16)):String.fromCharCode(parseInt(G,10))})}function S(A){return A.replace(g,":").replace(v," ")}function R(A){for(var z="",P=0,G=A.length;P<G;P++)z+=A.charCodeAt(P)<32?" ":A.charAt(P);return t.trim(z)}function I(A){return A=C(A),A=E(A),A=S(A),A=R(A),A}function k(A){return A=x(A),A=c(A),A}function M(){return""}function N(A,z){typeof z!="function"&&(z=function(){});var P=!Array.isArray(A);function G(D){return P?!0:t.indexOf(A,D)!==-1}var U=[],K=!1;return{onIgnoreTag:function(D,L,$){if(G(D))if($.isClosing){var j="[/removed]",B=$.position+j.length;return U.push([K!==!1?K:$.position,B]),K=!1,j}else return K||(K=$.position),"[removed]";else return z(D,L,$)},remove:function(D){var L="",$=0;return t.forEach(U,function(j){L+=D.slice($,j[0]),$=j[1]}),L+=D.slice($),L}}}function F(A){for(var z="",P=0;P<A.length;){var G=A.indexOf("<!--",P);if(G===-1){z+=A.slice(P);break}z+=A.slice(P,G);var U=A.indexOf("-->",G);if(U===-1)break;P=U+3}return z}function q(A){var z=A.split("");return z=z.filter(function(P){var G=P.charCodeAt(0);return G===127?!1:G<=31?G===10||G===13:!0}),z.join("")}return lt.whiteList=n(),lt.getDefaultWhiteList=n,lt.onTag=s,lt.onIgnoreTag=o,lt.onTagAttr=a,lt.onIgnoreTagAttr=l,lt.safeAttrValue=u,lt.escapeHtml=c,lt.escapeQuote=x,lt.unescapeQuote=C,lt.escapeHtmlEntities=E,lt.escapeDangerHtml5Entities=S,lt.clearNonPrintableCharacter=R,lt.friendlyAttrValue=I,lt.escapeAttrValue=k,lt.onIgnoreTagStripAll=M,lt.StripTagBody=N,lt.stripCommentTag=F,lt.stripBlankChar=q,lt.attributeWrapSign='"',lt.cssFilter=r,lt.getDefaultCSSWhiteList=e,lt}var Nh={},BM;function WW(){if(BM)return Nh;BM=1;var i=PS();function e(h){var d=i.spaceIndex(h),f;return d===-1?f=h.slice(1,-1):f=h.slice(1,d+1),f=i.trim(f).toLowerCase(),f.slice(0,1)==="/"&&(f=f.slice(1)),f.slice(-1)==="/"&&(f=f.slice(0,-1)),f}function t(h){return h.slice(0,2)==="</"}function n(h,d,f){var p="",m=0,g=!1,v=!1,y=0,w=h.length,b="",x="";e:for(y=0;y<w;y++){var C=h.charAt(y);if(g===!1){if(C==="<"){g=y;continue}}else if(v===!1){if(C==="<"){p+=f(h.slice(m,y)),g=y,m=y;continue}if(C===">"||y===w-1){p+=f(h.slice(m,g)),x=h.slice(g,y+1),b=e(x),p+=d(g,p.length,b,x,t(x)),m=y+1,g=!1;continue}if(C==='"'||C==="'")for(var E=1,S=h.charAt(y-E);S.trim()===""||S==="=";){if(S==="="){v=C;continue e}S=h.charAt(y-++E)}}else if(C===v){v=!1;continue}}return m<w&&(p+=f(h.substr(m))),p}var r=/[^a-zA-Z0-9\\_:.-]/gim;function s(h,d){var f=0,p=0,m=[],g=!1,v=h.length;function y(E,S){if(E=i.trim(E),E=E.replace(r,"").toLowerCase(),!(E.length<1)){var R=d(E,S||"");R&&m.push(R)}}for(var w=0;w<v;w++){var b=h.charAt(w),x,C;if(g===!1&&b==="="){g=h.slice(f,w),f=w+1,p=h.charAt(f)==='"'||h.charAt(f)==="'"?f:a(h,w+1);continue}if(g!==!1&&w===p){if(C=h.indexOf(b,w+1),C===-1)break;x=i.trim(h.slice(p+1,C)),y(g,x),g=!1,w=C,f=w+1;continue}if(/\s|\n|\t/.test(b))if(h=h.replace(/\s|\n|\t/g," "),g===!1)if(C=o(h,w),C===-1){x=i.trim(h.slice(f,w)),y(x),g=!1,f=w+1;continue}else{w=C-1;continue}else if(C=l(h,w-1),C===-1){x=i.trim(h.slice(f,w)),x=u(x),y(g,x),g=!1,f=w+1;continue}else continue}return f<h.length&&(g===!1?y(h.slice(f)):y(g,u(i.trim(h.slice(f))))),i.trim(m.join(" "))}function o(h,d){for(;d<h.length;d++){var f=h[d];if(f!==" ")return f==="="?d:-1}}function a(h,d){for(;d<h.length;d++){var f=h[d];if(f!==" ")return f==="'"||f==='"'?d:-1}}function l(h,d){for(;d>0;d--){var f=h[d];if(f!==" ")return f==="="?d:-1}}function c(h){return h[0]==='"'&&h[h.length-1]==='"'||h[0]==="'"&&h[h.length-1]==="'"}function u(h){return c(h)?h.substr(1,h.length-2):h}return Nh.parseTag=n,Nh.parseAttr=s,Nh}var Ob,HM;function Rle(){if(HM)return Ob;HM=1;var i=U0().FilterCSS,e=jW(),t=WW(),n=t.parseTag,r=t.parseAttr,s=PS();function o(h){return h==null}function a(h){var d=s.spaceIndex(h);if(d===-1)return{html:"",closing:h[h.length-2]==="/"};h=s.trim(h.slice(d+1,-1));var f=h[h.length-1]==="/";return f&&(h=s.trim(h.slice(0,-1))),{html:h,closing:f}}function l(h){var d={};for(var f in h)d[f]=h[f];return d}function c(h){var d={};for(var f in h)Array.isArray(h[f])?d[f.toLowerCase()]=h[f].map(function(p){return p.toLowerCase()}):d[f.toLowerCase()]=h[f];return d}function u(h){h=l(h||{}),h.stripIgnoreTag&&(h.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),h.onIgnoreTag=e.onIgnoreTagStripAll),h.whiteList||h.allowList?h.whiteList=c(h.whiteList||h.allowList):h.whiteList=e.whiteList,this.attributeWrapSign=h.singleQuotedAttributeValue===!0?"'":e.attributeWrapSign,h.onTag=h.onTag||e.onTag,h.onTagAttr=h.onTagAttr||e.onTagAttr,h.onIgnoreTag=h.onIgnoreTag||e.onIgnoreTag,h.onIgnoreTagAttr=h.onIgnoreTagAttr||e.onIgnoreTagAttr,h.safeAttrValue=h.safeAttrValue||e.safeAttrValue,h.escapeHtml=h.escapeHtml||e.escapeHtml,this.options=h,h.css===!1?this.cssFilter=!1:(h.css=h.css||{},this.cssFilter=new i(h.css))}return u.prototype.process=function(h){if(h=h||"",h=h.toString(),!h)return"";var d=this,f=d.options,p=f.whiteList,m=f.onTag,g=f.onIgnoreTag,v=f.onTagAttr,y=f.onIgnoreTagAttr,w=f.safeAttrValue,b=f.escapeHtml,x=d.attributeWrapSign,C=d.cssFilter;f.stripBlankChar&&(h=e.stripBlankChar(h)),f.allowCommentTag||(h=e.stripCommentTag(h));var E=!1;f.stripIgnoreTagBody&&(E=e.StripTagBody(f.stripIgnoreTagBody,g),g=E.onIgnoreTag);var S=n(h,function(R,I,k,M,N){var F={sourcePosition:R,position:I,isClosing:N,isWhite:Object.prototype.hasOwnProperty.call(p,k)},q=m(k,M,F);if(!o(q))return q;if(F.isWhite){if(F.isClosing)return"</"+k+">";var A=a(M),z=p[k],P=r(A.html,function(G,U){var K=s.indexOf(z,G)!==-1,D=v(k,G,U,K);return o(D)?K?(U=w(k,G,U,C),U?G+"="+x+U+x:G):(D=y(k,G,U,K),o(D)?void 0:D):D});return M="<"+k,P&&(M+=" "+P),A.closing&&(M+=" /"),M+=">",M}else return q=g(k,M,F),o(q)?b(M):q},b);return E&&(S=E.remove(S)),S},Ob=u,Ob}var UM;function Ole(){return UM||(UM=1,(function(i,e){var t=jW(),n=WW(),r=Rle();function s(a,l){var c=new r(l);return c.process(a)}e=i.exports=s,e.filterXSS=s,e.FilterXSS=r,(function(){for(var a in t)e[a]=t[a];for(var l in n)e[l]=n[l]})(),typeof window<"u"&&(window.filterXSS=i.exports);function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=i.exports)})(Mh,Mh.exports)),Mh.exports}var Ile=Ole();const Dle=tw(Ile);var ec=null;function V0(i,e){var t=e||{preventDefault:!1};if(i.Manager){var n=i,r=function(c,u){var h=Object.create(t);return u&&n.assign(h,u),V0(new n(c,h),h)};return n.assign(r,n),r.Manager=function(c,u){var h=Object.create(t);return u&&n.assign(h,u),V0(new n.Manager(c,h),h)},r}var s=Object.create(i),o=i.element;o.hammer||(o.hammer=[]),o.hammer.push(s),i.on("hammer.input",function(c){(t.preventDefault===!0||t.preventDefault===c.pointerType)&&c.preventDefault(),c.isFirst&&(ec=c.target)}),s._handlers={},s.on=function(c,u){return a(c).forEach(function(h){var d=s._handlers[h];d||(s._handlers[h]=d=[],i.on(h,l)),d.push(u)}),s},s.off=function(c,u){return a(c).forEach(function(h){var d=s._handlers[h];d&&(d=u?d.filter(function(f){return f!==u}):[],d.length>0?s._handlers[h]=d:(i.off(h,l),delete s._handlers[h]))}),s},s.emit=function(c,u){ec=u.target,i.emit(c,u)},s.destroy=function(){var c=i.element.hammer,u=c.indexOf(s);u!==-1&&c.splice(u,1),c.length||delete i.element.hammer,s._handlers={},i.destroy()};function a(c){return c.match(/[^ ]+/g)}function l(c){if(c.type!=="hammer.input"){if(c.srcEvent._handled||(c.srcEvent._handled={}),c.srcEvent._handled[c.type])return;c.srcEvent._handled[c.type]=!0}var u=!1;c.stopPropagation=function(){u=!0};var h=c.srcEvent.stopPropagation.bind(c.srcEvent);typeof h=="function"&&(c.srcEvent.stopPropagation=function(){h(),c.stopPropagation()}),c.firstTarget=ec;for(var d=ec.isConnected?ec:c.target;d&&!u;){var f=d.hammer;if(f){for(var p,m=0;m<f.length;m++)if(p=f[m]._handlers[c.type],p)for(var g=0;g<p.length&&!u;g++)p[g](c)}d=d.parentNode}}return s}function Ple(i){var e=window,t={},n={keydown:{},keyup:{}},r={},s;for(s=97;s<=122;s++)r[String.fromCharCode(s)]={code:65+(s-97),shift:!1};for(s=65;s<=90;s++)r[String.fromCharCode(s)]={code:s,shift:!0};for(s=0;s<=9;s++)r[""+s]={code:48+s,shift:!1};for(s=1;s<=12;s++)r["F"+s]={code:111+s,shift:!1};for(s=0;s<=9;s++)r["num"+s]={code:96+s,shift:!1};r["num*"]={code:106,shift:!1},r["num+"]={code:107,shift:!1},r["num-"]={code:109,shift:!1},r["num/"]={code:111,shift:!1},r["num."]={code:110,shift:!1},r.left={code:37,shift:!1},r.up={code:38,shift:!1},r.right={code:39,shift:!1},r.down={code:40,shift:!1},r.space={code:32,shift:!1},r.enter={code:13,shift:!1},r.shift={code:16,shift:void 0},r.esc={code:27,shift:!1},r.backspace={code:8,shift:!1},r.tab={code:9,shift:!1},r.ctrl={code:17,shift:!1},r.alt={code:18,shift:!1},r.delete={code:46,shift:!1},r.pageup={code:33,shift:!1},r.pagedown={code:34,shift:!1},r["="]={code:187,shift:!1},r["-"]={code:189,shift:!1},r["]"]={code:221,shift:!1},r["["]={code:219,shift:!1};var o=function(c){l(c,"keydown")},a=function(c){l(c,"keyup")},l=function(c,u){if(n[u][c.keyCode]!==void 0)for(var h=n[u][c.keyCode],d=0;d<h.length;d++)(h[d].shift===void 0||h[d].shift==!0&&c.shiftKey==!0||h[d].shift==!1&&c.shiftKey==!1)&&h[d].fn(c)};return t.bind=function(c,u,h){if(h===void 0&&(h="keydown"),r[c]===void 0)throw new Error("unsupported key: "+c);n[h][r[c].code]===void 0&&(n[h][r[c].code]=[]),n[h][r[c].code].push({fn:u,shift:r[c].shift})},t.bindAll=function(c,u){u===void 0&&(u="keydown");for(var h in r)r.hasOwnProperty(h)&&t.bind(h,c,u)},t.getKey=function(c){for(var u in r)if(r.hasOwnProperty(u)){if(c.shiftKey==!0&&r[u].shift==!0&&c.keyCode==r[u].code)return u;if(c.shiftKey==!1&&r[u].shift==!1&&c.keyCode==r[u].code)return u;if(c.keyCode==r[u].code&&u=="shift")return u}return"unknown key, currently not supported"},t.unbind=function(c,u,h){if(h===void 0&&(h="keydown"),r[c]===void 0)throw new Error("unsupported key: "+c);if(u!==void 0){var d=[],f=n[h][r[c].code];if(f!==void 0)for(var p=0;p<f.length;p++)f[p].fn==u&&f[p].shift==r[c].shift||d.push(n[h][r[c].code][p]);n[h][r[c].code]=d}else n[h][r[c].code]=[]},t.reset=function(){n={keydown:{},keyup:{}}},t.destroy=function(){n={keydown:{},keyup:{}},e.removeEventListener("keydown",o,!0),e.removeEventListener("keyup",a,!0)},e.addEventListener("keydown",o,!0),e.addEventListener("keyup",a,!0),t}/**
 * vis-timeline and vis-graph2d
 * https://visjs.github.io/vis-timeline/
 *
 * Create a fully customizable, interactive timeline with items and ranges.
 *
 * @version 8.3.1
 * @date    2025-09-15T17:43:30.491Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */const wi=typeof window<"u"&&window.moment||X;function Fr(i){if(!i)return!1;let e=i.idProp??i._idProp;return e?Ele(e,i):!1}const Ib=/^\/?Date\((-?\d+)/i,kle=/^\d+$/;function kS(i,e){let t;if(i!==void 0){if(i===null)return null;if(!e)return i;if(typeof e!="string"&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return!!i;case"number":case"Number":return Mi(i)&&!isNaN(Date.parse(i))?X(i).valueOf():Number(i.valueOf());case"string":case"String":return String(i);case"Date":try{return kS(i,"Moment").toDate()}catch(n){throw n instanceof TypeError?new TypeError("Cannot convert object of type "+uc(i)+" to type "+e):n}case"Moment":if(Sc(i))return X(i);if(i instanceof Date)return X(i.valueOf());if(X.isMoment(i))return X(i);if(Mi(i))return t=Ib.exec(i),t?X(Number(t[1])):(t=kle.exec(i),X(t?Number(i):i));throw new TypeError("Cannot convert object of type "+uc(i)+" to type "+e);case"ISODate":if(Sc(i))return new Date(i);if(i instanceof Date)return i.toISOString();if(X.isMoment(i))return i.toDate().toISOString();if(Mi(i))return t=Ib.exec(i),t?new Date(Number(t[1])).toISOString():X(i).format();throw new Error("Cannot convert object of type "+uc(i)+" to type ISODate");case"ASPDate":if(Sc(i))return"/Date("+i+")/";if(i instanceof Date||X.isMoment(i))return"/Date("+i.valueOf()+")/";if(Mi(i)){t=Ib.exec(i);let n;return t?n=new Date(Number(t[1])).valueOf():n=new Date(i).valueOf(),"/Date("+n+")/"}else throw new Error("Cannot convert object of type "+uc(i)+" to type ASPDate");default:throw new Error(`Unknown type ${e}`)}}}function dl(i,e={start:"Date",end:"Date"}){const t=i._idProp,n=new hl({fieldId:t}),r=_le(i).map(s=>Object.keys(s).reduce((o,a)=>(o[a]=kS(s[a],e[a]),o),{})).to(n);return r.all().start(),{add:(...s)=>i.getDataSet().add(...s),remove:(...s)=>i.getDataSet().remove(...s),update:(...s)=>i.getDataSet().update(...s),updateOnly:(...s)=>i.getDataSet().updateOnly(...s),clear:(...s)=>i.getDataSet().clear(...s),forEach:n.forEach.bind(n),get:n.get.bind(n),getIds:n.getIds.bind(n),off:n.off.bind(n),on:n.on.bind(n),get length(){return n.length},idProp:t,type:e,rawDS:i,coercedDS:n,dispose:()=>r.stop()}}const zW=i=>{const e=new Dle.FilterXSS(i);return t=>typeof t=="string"?e.process(t):t},Mle=i=>i;let X0=zW();const Ale=i=>{i&&(i.disabled===!0?(X0=Mle,console.warn("You disabled XSS protection for vis-Timeline. I sure hope you know what you're doing!")):i.filterOptions&&(X0=zW(i.filterOptions)))},O={...fle,convert:kS,setupXSSProtection:Ale};Object.defineProperty(O,"xss",{get:function(){return X0}});class Ps{constructor(){this.options=null,this.props=null}setOptions(e){e&&O.extend(this.options,e)}redraw(){return!1}destroy(){}_isResized(){const e=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,e}}function MS(i,e,t){if(t&&!Array.isArray(t))return MS(i,e,[t]);if(e.hiddenDates=[],t&&Array.isArray(t)==!0){for(let n=0;n<t.length;n++)if(t[n].repeat===void 0){const r={};r.start=i(t[n].start).toDate().valueOf(),r.end=i(t[n].end).toDate().valueOf(),e.hiddenDates.push(r)}e.hiddenDates.sort((n,r)=>n.start-r.start)}}function Pd(i,e,t){if(t&&!Array.isArray(t))return Pd(i,e,[t]);if(t&&e.domProps.centerContainer.width!==void 0){MS(i,e,t);const n=i(e.range.start),r=i(e.range.end),o=(e.range.end-e.range.start)/e.domProps.centerContainer.width;for(let h=0;h<t.length;h++)if(t[h].repeat!==void 0){let d=i(t[h].start),f=i(t[h].end);if(d._d=="Invalid Date")throw new Error(`Supplied start date is not valid: ${t[h].start}`);if(f._d=="Invalid Date")throw new Error(`Supplied end date is not valid: ${t[h].end}`);if(f-d>=4*o){let m=0,g=r.clone();switch(t[h].repeat){case"daily":d.day()!=f.day()&&(m=1),d=d.dayOfYear(n.dayOfYear()).year(n.year()).subtract(7,"days"),f=f.dayOfYear(n.dayOfYear()).year(n.year()).subtract(7-m,"days"),g.add(1,"weeks");break;case"weekly":{const v=f.diff(d,"days"),y=d.day();d=d.date(n.date()).month(n.month()).year(n.year()),f=d.clone(),d=d.day(y).subtract(1,"weeks"),f=f.day(y).add(v,"days").subtract(1,"weeks"),g.add(1,"weeks");break}case"monthly":d.month()!=f.month()&&(m=1),d=d.month(n.month()).year(n.year()).subtract(1,"months"),f=f.month(n.month()).year(n.year()).subtract(1,"months").add(m,"months"),g.add(1,"months");break;case"yearly":d.year()!=f.year()&&(m=1),d=d.year(n.year()).subtract(1,"years"),f=f.year(n.year()).subtract(1,"years").add(m,"years"),g.add(1,"years");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",t[h].repeat);return}for(;d<g;)switch(e.hiddenDates.push({start:d.valueOf(),end:f.valueOf()}),t[h].repeat){case"daily":d=d.add(1,"days"),f=f.add(1,"days");break;case"weekly":d=d.add(1,"weeks"),f=f.add(1,"weeks");break;case"monthly":d=d.add(1,"months"),f=f.add(1,"months");break;case"yearly":d=d.add(1,"y"),f=f.add(1,"y");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",t[h].repeat);return}e.hiddenDates.push({start:d.valueOf(),end:f.valueOf()})}}Nle(e);const a=Md(e.range.start,e.hiddenDates),l=Md(e.range.end,e.hiddenDates);let c=e.range.start,u=e.range.end;a.hidden==!0&&(c=e.range.startToFront==!0?a.startDate-1:a.endDate+1),l.hidden==!0&&(u=e.range.endToFront==!0?l.startDate-1:l.endDate+1),(a.hidden==!0||l.hidden==!0)&&e.range._applyRange(c,u)}}function Nle(i){const e=i.hiddenDates,t=[];for(var n=0;n<e.length;n++)for(let r=0;r<e.length;r++)n!=r&&e[r].remove!=!0&&e[n].remove!=!0&&(e[r].start>=e[n].start&&e[r].end<=e[n].end?e[r].remove=!0:e[r].start>=e[n].start&&e[r].start<=e[n].end?(e[n].end=e[r].end,e[r].remove=!0):e[r].end>=e[n].start&&e[r].end<=e[n].end&&(e[n].start=e[r].start,e[r].remove=!0));for(n=0;n<e.length;n++)e[n].remove!==!0&&t.push(e[n]);i.hiddenDates=t,i.hiddenDates.sort((r,s)=>r.start-s.start)}function Lle(i,e,t){let n=!1;const r=e.current.valueOf();for(let o=0;o<e.hiddenDates.length;o++){const a=e.hiddenDates[o].start;var s=e.hiddenDates[o].end;if(r>=a&&r<s){n=!0;break}}if(n==!0&&r<e._end.valueOf()&&r!=t){const o=i(t),a=i(s);o.year()!=a.year()?e.switchedYear=!0:o.month()!=a.month()?e.switchedMonth=!0:o.dayOfYear()!=a.dayOfYear()&&(e.switchedDay=!0),e.current=a}}function VM(i,e,t){let n;if(i.body.hiddenDates.length==0)return n=i.range.conversion(t),(e.valueOf()-n.offset)*n.scale;{const r=Md(e,i.body.hiddenDates);r.hidden==!0&&(e=r.startDate);const s=Cc(i.body.hiddenDates,i.range.start,i.range.end);if(e<i.range.start){n=i.range.conversion(t,s);const o=Fle(i.body.hiddenDates,e,n.offset);return e=i.options.moment(e).toDate().valueOf(),e=e+o,-(n.offset-e.valueOf())*n.scale}else if(e>i.range.end){const o={start:i.range.start,end:e};return e=KM(i.options.moment,i.body.hiddenDates,o,e),n=i.range.conversion(t,s),(e.valueOf()-n.offset)*n.scale}else return e=KM(i.options.moment,i.body.hiddenDates,i.range,e),n=i.range.conversion(t,s),(e.valueOf()-n.offset)*n.scale}}function XM(i,e,t){if(i.body.hiddenDates.length==0){const n=i.range.conversion(t);return new Date(e/n.scale+n.offset)}else{const n=Cc(i.body.hiddenDates,i.range.start,i.range.end),s=(i.range.end-i.range.start-n)*e/t,o=$le(i.body.hiddenDates,i.range,s);return new Date(o+s+i.range.start)}}function Cc(i,e,t){let n=0;for(let r=0;r<i.length;r++){const s=i[r].start,o=i[r].end;s>=e&&o<t&&(n+=o-s)}return n}function Fle(i,e,t){let n=0;for(let r=0;r<i.length;r++){const s=i[r].start,o=i[r].end;s>=e&&o<=t&&(n+=o-s)}return n}function KM(i,e,t,n){return n=i(n).toDate().valueOf(),n-=kd(i,e,t,n),n}function kd(i,e,t,n){let r=0;n=i(n).toDate().valueOf();for(let s=0;s<e.length;s++){const o=e[s].start,a=e[s].end;o>=t.start&&a<t.end&&n>=a&&(r+=a-o)}return r}function $le(i,e,t){let n=0,r=0,s=e.start;for(let o=0;o<i.length;o++){const a=i[o].start,l=i[o].end;if(a>=e.start&&l<e.end){if(r+=a-s,s=l,r>=t)break;n+=l-a}}return n}function Bs(i,e,t,n){const r=Md(e,i);return r.hidden==!0?t<0?n==!0?r.startDate-(r.endDate-e)-1:r.startDate-1:n==!0?r.endDate+(e-r.startDate)+1:r.endDate+1:e}function Md(i,e){for(let r=0;r<e.length;r++){var t=e[r].start,n=e[r].end;if(i>=t&&i<n)return{hidden:!0,startDate:t,endDate:n}}return{hidden:!1,startDate:t,endDate:n}}class ep extends Ps{constructor(e,t){super();const n=wi().hours(0).minutes(0).seconds(0).milliseconds(0),r=n.clone().add(-3,"days").valueOf(),s=n.clone().add(3,"days").valueOf();this.millisecondsPerPixelCache=void 0,t===void 0?(this.start=r,this.end=s):(this.start=t.start||r,this.end=t.end||s),this.rolling=!1,this.body=e,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={rtl:!1,start:null,end:null,moment:wi,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:1e3*60*60*24*365*1e4,rollingMode:{follow:!1,offset:.5}},this.options=O.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",this._onDragStart.bind(this)),this.body.emitter.on("panmove",this._onDrag.bind(this)),this.body.emitter.on("panend",this._onDragEnd.bind(this)),this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this)),this.body.dom.rollingModeBtn.addEventListener("click",this.startRolling.bind(this)),this.setOptions(t)}setOptions(e){if(e){const t=["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","zoomFriction","rtl","showCurrentTime","rollingMode","horizontalScroll","horizontalScrollKey","horizontalScrollInvert","verticalScroll"];O.selectiveExtend(t,this.options,e),e.rollingMode&&e.rollingMode.follow&&this.startRolling(),("start"in e||"end"in e)&&this.setRange(e.start,e.end)}}startRolling(){const e=this;function t(){e.stopRolling(),e.rolling=!0;let n=e.end-e.start;const r=O.convert(new Date,"Date").valueOf(),s=e.options.rollingMode&&e.options.rollingMode.offset||.5,o=r-n*s,a=r+n*(1-s),l={animation:!1};e.setRange(o,a,l),n=1/e.conversion(e.body.domProps.center.width).scale/10,n<30&&(n=30),n>1e3&&(n=1e3),e.body.dom.rollingModeBtn.style.visibility="hidden",e.currentTimeTimer=setTimeout(t,n)}t()}stopRolling(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")}setRange(e,t,n,r,s){n||(n={}),n.byUser!==!0&&(n.byUser=!1);const o=this,a=e!=null?O.convert(e,"Date").valueOf():null,l=t!=null?O.convert(t,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,n.animation){const u=this.start,h=this.end,d=typeof n.animation=="object"&&"duration"in n.animation?n.animation.duration:500,f=typeof n.animation=="object"&&"easingFunction"in n.animation?n.animation.easingFunction:"easeInOutQuad",p=O.easingFunctions[f];if(!p)throw new Error(`Unknown easing function ${JSON.stringify(f)}. Choose from: ${Object.keys(O.easingFunctions).join(", ")}`);const m=Date.now();let g=!1;const v=()=>{if(!o.props.touch.dragging){const w=Date.now()-m,b=p(w/d),x=w>d,C=x||a===null?a:u+(a-u)*b,E=x||l===null?l:h+(l-h)*b;c=o._applyRange(C,E),Pd(o.options.moment,o.body,o.options.hiddenDates),g=g||c;const S={start:new Date(o.start),end:new Date(o.end),byUser:n.byUser,event:n.event};if(s&&s(b,c,x),c&&o.body.emitter.emit("rangechange",S),x){if(g&&(o.body.emitter.emit("rangechanged",S),r))return r()}else o.animationTimer=setTimeout(v,20)}};return v()}else{var c=this._applyRange(a,l);if(Pd(this.options.moment,this.body,this.options.hiddenDates),c){const u={start:new Date(this.start),end:new Date(this.end),byUser:n.byUser,event:n.event};if(this.body.emitter.emit("rangechange",u),clearTimeout(o.timeoutID),o.timeoutID=setTimeout(()=>{o.body.emitter.emit("rangechanged",u)},200),r)return r()}}}getMillisecondsPerPixel(){return this.millisecondsPerPixelCache===void 0&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth),this.millisecondsPerPixelCache}_cancelAnimation(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)}_applyRange(e,t){let n=e!=null?O.convert(e,"Date").valueOf():this.start,r=t!=null?O.convert(t,"Date").valueOf():this.end;const s=this.options.max!=null?O.convert(this.options.max,"Date").valueOf():null,o=this.options.min!=null?O.convert(this.options.min,"Date").valueOf():null;let a;if(isNaN(n)||n===null)throw new Error(`Invalid start "${e}"`);if(isNaN(r)||r===null)throw new Error(`Invalid end "${t}"`);if(r<n&&(r=n),o!==null&&n<o&&(a=o-n,n+=a,r+=a,s!=null&&r>s&&(r=s)),s!==null&&r>s&&(a=r-s,n-=a,r-=a,o!=null&&n<o&&(n=o)),this.options.zoomMin!==null){let c=parseFloat(this.options.zoomMin);c<0&&(c=0),r-n<c&&(this.end-this.start===c&&n>=this.start-.5&&r<=this.end?(n=this.start,r=this.end):(a=c-(r-n),n-=a/2,r+=a/2))}if(this.options.zoomMax!==null){let c=parseFloat(this.options.zoomMax);c<0&&(c=0),r-n>c&&(this.end-this.start===c&&n<this.start&&r>this.end?(n=this.start,r=this.end):(a=r-n-c,n+=a/2,r-=a/2))}const l=this.start!=n||this.end!=r;return!(n>=this.start&&n<=this.end||r>=this.start&&r<=this.end)&&!(this.start>=n&&this.start<=r||this.end>=n&&this.end<=r)&&this.body.emitter.emit("checkRangedItems"),this.start=n,this.end=r,l}getRange(){return{start:this.start,end:this.end}}conversion(e,t){return ep.conversion(this.start,this.end,e,t)}static conversion(e,t,n,r){return r===void 0&&(r=0),n!=0&&t-e!=0?{offset:e,scale:n/(t-e-r)}:{offset:0,scale:1}}_onDragStart(e){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(e)&&this.props.touch.allowDragging&&(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))}_onDrag(e){if(!e||!this.props.touch.dragging||!this.options.moveable||!this.props.touch.allowDragging)return;const t=this.options.direction;ZM(t);let n=t=="horizontal"?e.deltaX:e.deltaY;n-=this.deltaDifference;let r=this.props.touch.end-this.props.touch.start;const s=Cc(this.body.hiddenDates,this.start,this.end);r-=s;const o=t=="horizontal"?this.body.domProps.center.width:this.body.domProps.center.height;let a;this.options.rtl?a=n/o*r:a=-n/o*r;const l=this.props.touch.start+a,c=this.props.touch.end+a,u=Bs(this.body.hiddenDates,l,this.previousDelta-n,!0),h=Bs(this.body.hiddenDates,c,this.previousDelta-n,!0);if(u!=l||h!=c){this.deltaDifference+=n,this.props.touch.start=u,this.props.touch.end=h,this._onDrag(e);return}this.previousDelta=n,this._applyRange(l,c);const d=new Date(this.start),f=new Date(this.end);this.body.emitter.emit("rangechange",{start:d,end:f,byUser:!0,event:e}),this.body.emitter.emit("panmove")}_onDragEnd(e){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:e}))}_onMouseWheel(e){let t=0;if(e.wheelDelta?t=e.wheelDelta/120:e.detail?t=-e.detail/3:e.deltaY&&(t=-e.deltaY/3),!(this.options.zoomKey&&!e[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&this.options.zoomable&&this.options.moveable&&this._isInsideRange(e)&&t){const n=this.options.zoomFriction||5;let r;t<0?r=1-t/n:r=1/(1+t/n);let s;if(this.rolling){const o=this.options.rollingMode&&this.options.rollingMode.offset||.5;s=this.start+(this.end-this.start)*o}else{const o=this.getPointer({x:e.clientX,y:e.clientY},this.body.dom.center);s=this._pointerToDate(o)}this.zoom(r,s,t,e),e.preventDefault()}}_onTouch(e){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.props.touch.centerDate=null,this.scaleOffset=0,this.deltaDifference=0,O.preventDefault(e)}_onPinch(e){if(!(this.options.zoomable&&this.options.moveable))return;O.preventDefault(e),this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(e.center,this.body.dom.center),this.props.touch.centerDate=this._pointerToDate(this.props.touch.center)),this.stopRolling();const t=1/(e.scale+this.scaleOffset),n=this.props.touch.centerDate,r=Cc(this.body.hiddenDates,this.start,this.end),s=kd(this.options.moment,this.body.hiddenDates,this,n),o=r-s;let a=n-s+(this.props.touch.start-(n-s))*t,l=n+o+(this.props.touch.end-(n+o))*t;this.startToFront=1-t<=0,this.endToFront=t-1<=0;const c=Bs(this.body.hiddenDates,a,1-t,!0),u=Bs(this.body.hiddenDates,l,t-1,!0);(c!=a||u!=l)&&(this.props.touch.start=c,this.props.touch.end=u,this.scaleOffset=1-e.scale,a=c,l=u);const h={animation:!1,byUser:!0,event:e};this.setRange(a,l,h),this.startToFront=!1,this.endToFront=!0}_isInsideRange(e){const t=e.center?e.center.x:e.clientX,n=this.body.dom.centerContainer.getBoundingClientRect(),r=this.options.rtl?t-n.left:n.right-t,s=this.body.util.toTime(r);return s>=this.start&&s<=this.end}_pointerToDate(e){let t;const n=this.options.direction;if(ZM(n),n=="horizontal")return this.body.util.toTime(e.x).valueOf();{const r=this.body.domProps.center.height;return t=this.conversion(r),e.y/t.scale+t.offset}}getPointer(e,t){const n=t.getBoundingClientRect();return this.options.rtl?{x:n.right-e.x,y:e.y-n.top}:{x:e.x-n.left,y:e.y-n.top}}zoom(e,t,n,r){t==null&&(t=(this.start+this.end)/2);const s=Cc(this.body.hiddenDates,this.start,this.end),o=kd(this.options.moment,this.body.hiddenDates,this,t),a=s-o;let l=t-o+(this.start-(t-o))*e,c=t+a+(this.end-(t+a))*e;this.startToFront=!(n>0),this.endToFront=!(-n>0);const u=Bs(this.body.hiddenDates,l,n,!0),h=Bs(this.body.hiddenDates,c,-n,!0);(u!=l||h!=c)&&(l=u,c=h);const d={animation:!1,byUser:!0,event:r};this.setRange(l,c,d),this.startToFront=!1,this.endToFront=!0}move(e){const t=this.end-this.start,n=this.start+t*e,r=this.end+t*e;this.start=n,this.end=r}moveTo(e){const n=(this.start+this.end)/2-e,r=this.start-n,s=this.end-n,o={animation:!1,byUser:!0,event:null};this.setRange(r,s,o)}destroy(){this.stopRolling()}}function ZM(i){if(i!="horizontal"&&i!="vertical")throw new TypeError(`Unknown direction "${i}". Choose "horizontal" or "vertical".`)}function jle(){const i=()=>{};return{on:i,off:i,destroy:i,emit:i,get(){return{set:i}}}}let K0;if(typeof window<"u"){const i=window.Hammer||wS;K0=V0(i,{preventDefault:"mouse"})}else K0=function(){return jle()};var ai=K0;function qW(i,e){e.inputHandler=function(t){t.isFirst&&e(t)},i.on("hammer.input",e.inputHandler)}function Wle(i,e){return e.inputHandler=function(t){t.isFinal&&e(t)},i.on("hammer.input",e.inputHandler)}function zle(i){const e="pan-y";return i.getTouchAction=function(){return[e]},i}class Oo{constructor(e,t,n,r,s){this.moment=s&&s.moment||wi,this.options=s||{},this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(e,t,n),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Array.isArray(r)?this.hiddenDates=r:r!=null?this.hiddenDates=[r]:this.hiddenDates=[],this.format=Oo.FORMAT}setMoment(e){this.moment=e,this.current=this.moment(this.current.valueOf()),this._start=this.moment(this._start.valueOf()),this._end=this.moment(this._end.valueOf())}setFormat(e){const t=O.deepExtend({},Oo.FORMAT);this.format=O.deepExtend(t,e)}setRange(e,t,n){if(!(e instanceof Date)||!(t instanceof Date))throw"No legal start or end date in method setRange";this._start=e!=null?this.moment(e.valueOf()):Date.now(),this._end=t!=null?this.moment(t.valueOf()):Date.now(),this.autoScale&&this.setMinimumStep(n)}start(){this.current=this._start.clone(),this.roundToMinor()}roundToMinor(){switch(this.scale=="week"&&this.current.weekday(0),this.scale){case"year":this.current=this.current.year(this.step*Math.floor(this.current.year()/this.step)).month(0);case"month":this.current=this.current.date(1);case"week":case"day":case"weekday":this.current=this.current.hours(0);case"hour":this.current=this.current.minutes(0);case"minute":this.current=this.current.seconds(0);case"second":this.current=this.current.milliseconds(0)}if(this.step!=1){let e=this.current.clone();switch(this.scale){case"millisecond":this.current=this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current=this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current=this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current=this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current=this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current=this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current=this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current=this.current.subtract(this.current.year()%this.step,"year");break}e.isSame(this.current)||(this.current=this.moment(Bs(this.hiddenDates,this.current.valueOf(),-1,!0)))}}hasNext(){return this.current.valueOf()<=this._end.valueOf()}next(){const e=this.current.valueOf();switch(this.scale){case"millisecond":this.current=this.current.add(this.step,"millisecond");break;case"second":this.current=this.current.add(this.step,"second");break;case"minute":this.current=this.current.add(this.step,"minute");break;case"hour":this.current=this.current.add(this.step,"hour"),this.current.month()<6?this.current=this.current.subtract(this.current.hours()%this.step,"hour"):this.current.hours()%this.step!==0&&(this.current=this.current.add(this.step-this.current.hours()%this.step,"hour"));break;case"weekday":case"day":this.current=this.current.add(this.step,"day");break;case"week":if(this.current.weekday()!==0)this.current=this.current.weekday(0).add(this.step,"week");else if(this.options.showMajorLabels===!1)this.current=this.current.add(this.step,"week");else{const t=this.current.clone();t.add(1,"week"),t.isSame(this.current,"month")?this.current=this.current.add(this.step,"week"):this.current=this.current.add(this.step,"week").date(1)}break;case"month":this.current=this.current.add(this.step,"month");break;case"year":this.current=this.current.add(this.step,"year");break}if(this.step!=1)switch(this.scale){case"millisecond":this.current.milliseconds()>0&&this.current.milliseconds()<this.step&&(this.current=this.current.milliseconds(0));break;case"second":this.current.seconds()>0&&this.current.seconds()<this.step&&(this.current=this.current.seconds(0));break;case"minute":this.current.minutes()>0&&this.current.minutes()<this.step&&(this.current=this.current.minutes(0));break;case"hour":this.current.hours()>0&&this.current.hours()<this.step&&(this.current=this.current.hours(0));break;case"weekday":case"day":this.current.date()<this.step+1&&(this.current=this.current.date(1));break;case"week":this.current.week()<this.step&&(this.current=this.current.week(1));break;case"month":this.current.month()<this.step&&(this.current=this.current.month(0));break}this.current.valueOf()==e&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Lle(this.moment,this,e)}getCurrent(){return this.current.clone()}setScale(e){e&&typeof e.scale=="string"&&(this.scale=e.scale,this.step=e.step>0?e.step:1,this.autoScale=!1)}setAutoScale(e){this.autoScale=e}setMinimumStep(e){if(e==null)return;const t=1e3*60*60*24*30*12,n=1e3*60*60*24*30,r=1e3*60*60*24,s=1e3*60*60,o=1e3*60,a=1e3,l=1;t*1e3>e&&(this.scale="year",this.step=1e3),t*500>e&&(this.scale="year",this.step=500),t*100>e&&(this.scale="year",this.step=100),t*50>e&&(this.scale="year",this.step=50),t*10>e&&(this.scale="year",this.step=10),t*5>e&&(this.scale="year",this.step=5),t>e&&(this.scale="year",this.step=1),n*3>e&&(this.scale="month",this.step=3),n>e&&(this.scale="month",this.step=1),r*7>e&&this.options.showWeekScale&&(this.scale="week",this.step=1),r*2>e&&(this.scale="day",this.step=2),r>e&&(this.scale="day",this.step=1),r/2>e&&(this.scale="weekday",this.step=1),s*4>e&&(this.scale="hour",this.step=4),s>e&&(this.scale="hour",this.step=1),o*15>e&&(this.scale="minute",this.step=15),o*10>e&&(this.scale="minute",this.step=10),o*5>e&&(this.scale="minute",this.step=5),o>e&&(this.scale="minute",this.step=1),a*15>e&&(this.scale="second",this.step=15),a*10>e&&(this.scale="second",this.step=10),a*5>e&&(this.scale="second",this.step=5),a>e&&(this.scale="second",this.step=1),l*200>e&&(this.scale="millisecond",this.step=200),l*100>e&&(this.scale="millisecond",this.step=100),l*50>e&&(this.scale="millisecond",this.step=50),l*10>e&&(this.scale="millisecond",this.step=10),l*5>e&&(this.scale="millisecond",this.step=5),l>e&&(this.scale="millisecond",this.step=1)}static snap(e,t,n){let r=wi(e);if(t=="year"){const s=r.year()+Math.round(r.month()/12);r=r.year(Math.round(s/n)*n).month(0).date(0).hours(0).minutes(0).seconds(0).milliseconds(0)}else if(t=="month")r.date()>15?r=r.date(1).add(1,"month"):r=r.date(1),r=r.hours(0).minutes(0).seconds(0).milliseconds(0);else if(t=="week")r.weekday()>2?r=r.weekday(0).add(1,"week"):r=r.weekday(0),r=r.hours(0).minutes(0).seconds(0).milliseconds(0);else if(t=="day"){switch(n){case 5:case 2:r=r.hours(Math.round(r.hours()/24)*24);break;default:r=r.hours(Math.round(r.hours()/12)*12);break}r=r.minutes(0).seconds(0).milliseconds(0)}else if(t=="weekday"){switch(n){case 5:case 2:r=r.hours(Math.round(r.hours()/12)*12);break;default:r=r.hours(Math.round(r.hours()/6)*6);break}r=r.minutes(0).seconds(0).milliseconds(0)}else if(t=="hour"){switch(n){case 4:r=r.minutes(Math.round(r.minutes()/60)*60);break;default:r=r.minutes(Math.round(r.minutes()/30)*30);break}r=r.seconds(0).milliseconds(0)}else if(t=="minute"){switch(n){case 15:case 10:r=r.minutes(Math.round(r.minutes()/5)*5).seconds(0);break;case 5:r=r.seconds(Math.round(r.seconds()/60)*60);break;default:r=r.seconds(Math.round(r.seconds()/30)*30);break}r=r.milliseconds(0)}else if(t=="second")switch(n){case 15:case 10:r=r.seconds(Math.round(r.seconds()/5)*5).milliseconds(0);break;case 5:r=r.milliseconds(Math.round(r.milliseconds()/1e3)*1e3);break;default:r=r.milliseconds(Math.round(r.milliseconds()/500)*500);break}else if(t=="millisecond"){const s=n>5?n/2:1;r=r.milliseconds(Math.round(r.milliseconds()/s)*s)}return r}isMajor(){if(this.switchedYear==!0)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedMonth==!0)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedDay==!0)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}const e=this.moment(this.current);switch(this.scale){case"millisecond":return e.milliseconds()==0;case"second":return e.seconds()==0;case"minute":return e.hours()==0&&e.minutes()==0;case"hour":return e.hours()==0;case"weekday":case"day":return this.options.showWeekScale?e.isoWeekday()==1:e.date()==1;case"week":return e.date()==1;case"month":return e.month()==0;case"year":return!1;default:return!1}}getLabelMinor(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.minorLabels=="function")return this.format.minorLabels(e,this.scale,this.step);const t=this.format.minorLabels[this.scale];switch(this.scale){case"week":if(e.date()===1&&e.weekday()!==0)return"";default:return t&&t.length>0?this.moment(e).format(t):""}}getLabelMajor(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.majorLabels=="function")return this.format.majorLabels(e,this.scale,this.step);const t=this.format.majorLabels[this.scale];return t&&t.length>0?this.moment(e).format(t):""}getClassName(){const e=this.moment,t=this.moment(this.current),n=t.locale?t.locale("en"):t.lang("en"),r=this.step,s=[];function o(h){return h/r%2==0?" vis-even":" vis-odd"}function a(h){return h.isSame(Date.now(),"day")?" vis-today":h.isSame(e().add(1,"day"),"day")?" vis-tomorrow":h.isSame(e().add(-1,"day"),"day")?" vis-yesterday":""}function l(h){return h.isSame(Date.now(),"week")?" vis-current-week":""}function c(h){return h.isSame(Date.now(),"month")?" vis-current-month":""}function u(h){return h.isSame(Date.now(),"year")?" vis-current-year":""}switch(this.scale){case"millisecond":s.push(a(n)),s.push(o(n.milliseconds()));break;case"second":s.push(a(n)),s.push(o(n.seconds()));break;case"minute":s.push(a(n)),s.push(o(n.minutes()));break;case"hour":s.push(`vis-h${n.hours()}${this.step==4?"-h"+(n.hours()+4):""}`),s.push(a(n)),s.push(o(n.hours()));break;case"weekday":s.push(`vis-${n.format("dddd").toLowerCase()}`),s.push(a(n)),s.push(l(n)),s.push(o(n.date()));break;case"day":s.push(`vis-day${n.date()}`),s.push(`vis-${n.format("MMMM").toLowerCase()}`),s.push(a(n)),s.push(c(n)),s.push(this.step<=2?a(n):""),s.push(this.step<=2?`vis-${n.format("dddd").toLowerCase()}`:""),s.push(o(n.date()-1));break;case"week":s.push(`vis-week${n.format("w")}`),s.push(l(n)),s.push(o(n.week()));break;case"month":s.push(`vis-${n.format("MMMM").toLowerCase()}`),s.push(c(n)),s.push(o(n.month()));break;case"year":s.push(`vis-year${n.year()}`),s.push(u(n)),s.push(o(n.year()));break}return s.filter(String).join(" ")}}Oo.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}};class Ad extends Ps{constructor(e,t){super(),this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,maxMinorChars:7,format:O.extend({},Oo.FORMAT),moment:wi,timeAxis:null},this.options=O.extend({},this.defaultOptions),this.body=e,this._create(),this.setOptions(t)}setOptions(e){e&&(O.selectiveExtend(["showMinorLabels","showMajorLabels","showWeekScale","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,e),O.selectiveDeepExtend(["format"],this.options,e),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation.axis=e.orientation:typeof e.orientation=="object"&&"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis)),"locale"in e&&(typeof wi.locale=="function"?wi.locale(e.locale):wi.lang(e.locale)))}_create(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"}destroy(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null}redraw(){const e=this.props,t=this.dom.foreground,n=this.dom.background,r=this.options.orientation.axis=="top"?this.body.dom.top:this.body.dom.bottom,s=t.parentNode!==r;this._calculateCharSize();const o=this.options.showMinorLabels&&this.options.orientation.axis!=="none",a=this.options.showMajorLabels&&this.options.orientation.axis!=="none";e.minorLabelHeight=o?e.minorCharHeight:0,e.majorLabelHeight=a?e.majorCharHeight:0,e.height=e.minorLabelHeight+e.majorLabelHeight,e.width=t.offsetWidth,e.minorLineHeight=this.body.domProps.root.height-e.majorLabelHeight-(this.options.orientation.axis=="top"?this.body.domProps.bottom.height:this.body.domProps.top.height),e.minorLineWidth=1,e.majorLineHeight=e.minorLineHeight+e.majorLabelHeight,e.majorLineWidth=1;const l=t.nextSibling,c=n.nextSibling;return t.parentNode&&t.parentNode.removeChild(t),n.parentNode&&n.parentNode.removeChild(n),t.style.height=`${this.props.height}px`,this._repaintLabels(),l?r.insertBefore(t,l):r.appendChild(t),c?this.body.dom.backgroundVertical.insertBefore(n,c):this.body.dom.backgroundVertical.appendChild(n),this._isResized()||s}_repaintLabels(){const e=this.options.orientation.axis,t=O.convert(this.body.range.start,"Number"),n=O.convert(this.body.range.end,"Number"),r=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf();let s=r-kd(this.options.moment,this.body.hiddenDates,this.body.range,r);s-=this.body.util.toTime(0).valueOf();const o=new Oo(new Date(t),new Date(n),s,this.body.hiddenDates,this.options);o.setMoment(this.options.moment),this.options.format&&o.setFormat(this.options.format),this.options.timeAxis&&o.setScale(this.options.timeAxis),this.step=o;const a=this.dom;a.redundant.lines=a.lines,a.redundant.majorTexts=a.majorTexts,a.redundant.minorTexts=a.minorTexts,a.lines=[],a.majorTexts=[],a.minorTexts=[];let l,c,u,h,d,f,p=0,m,g,v,y=0;const w=1e3;let b;for(o.start(),c=o.getCurrent(),h=this.body.util.toScreen(c);o.hasNext()&&y<w;){switch(y++,d=o.isMajor(),b=o.getClassName(),l=c,u=h,o.next(),c=o.getCurrent(),h=this.body.util.toScreen(c),m=p,p=h-u,o.scale){case"week":f=!0;break;default:f=p>=m*.4;break}if(this.options.showMinorLabels&&f){var x=this._repaintMinorText(u,o.getLabelMinor(l),e,b);x.style.width=`${p}px`}d&&this.options.showMajorLabels?(u>0&&(v==null&&(v=u),x=this._repaintMajorText(u,o.getLabelMajor(l),e,b)),g=this._repaintMajorLine(u,p,e,b)):f?g=this._repaintMinorLine(u,p,e,b):g&&(g.style.width=`${parseInt(g.style.width)+p}px`)}if(y===w&&!QM&&(console.warn(`Something is wrong with the Timeline scale. Limited drawing of grid lines to ${w} lines.`),QM=!0),this.options.showMajorLabels){const C=this.body.util.toTime(0),E=o.getLabelMajor(C),S=E.length*(this.props.majorCharWidth||10)+10;(v==null||S<v)&&this._repaintMajorText(0,E,e,b)}O.forEach(this.dom.redundant,C=>{for(;C.length;){const E=C.pop();E&&E.parentNode&&E.parentNode.removeChild(E)}})}_repaintMinorText(e,t,n,r){let s=this.dom.redundant.minorTexts.shift();if(!s){const a=document.createTextNode("");s=document.createElement("div"),s.appendChild(a),this.dom.foreground.appendChild(s)}this.dom.minorTexts.push(s),s.innerHTML=O.xss(t);let o=n=="top"?this.props.majorLabelHeight:0;return this._setXY(s,e,o),s.className=`vis-text vis-minor ${r}`,s}_repaintMajorText(e,t,n,r){let s=this.dom.redundant.majorTexts.shift();if(!s){const a=document.createElement("div");s=document.createElement("div"),s.appendChild(a),this.dom.foreground.appendChild(s)}s.childNodes[0].innerHTML=O.xss(t),s.className=`vis-text vis-major ${r}`;let o=n=="top"?0:this.props.minorLabelHeight;return this._setXY(s,e,o),this.dom.majorTexts.push(s),s}_setXY(e,t,n){const r=this.options.rtl?t*-1:t;e.style.transform=`translate(${r}px, ${n}px)`}_repaintMinorLine(e,t,n,r){let s=this.dom.redundant.lines.shift();s||(s=document.createElement("div"),this.dom.background.appendChild(s)),this.dom.lines.push(s);const o=this.props;s.style.width=`${t}px`,s.style.height=`${o.minorLineHeight}px`;let a=n=="top"?o.majorLabelHeight:this.body.domProps.top.height,l=e-o.minorLineWidth/2;return this._setXY(s,l,a),s.className=`vis-grid ${this.options.rtl?"vis-vertical-rtl":"vis-vertical"} vis-minor ${r}`,s}_repaintMajorLine(e,t,n,r){let s=this.dom.redundant.lines.shift();s||(s=document.createElement("div"),this.dom.background.appendChild(s)),this.dom.lines.push(s);const o=this.props;s.style.width=`${t}px`,s.style.height=`${o.majorLineHeight}px`;let a=n=="top"?0:this.body.domProps.top.height,l=e-o.majorLineWidth/2;return this._setXY(s,l,a),s.className=`vis-grid ${this.options.rtl?"vis-vertical-rtl":"vis-vertical"} vis-major ${r}`,s}_calculateCharSize(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth}}var QM=!1;function Xi(i){this.active=!1,this.dom={container:i},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=ai(this.dom.overlay),this.hammer.on("tap",this._onTapOverlay.bind(this));var e=this,t=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];t.forEach(function(n){e.hammer.on(n,function(r){r.stopPropagation()})}),document&&document.body&&(this.onClick=function(n){qle(n.target,i)||e.deactivate()},document.body.addEventListener("click",this.onClick)),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=Ple(),this.escListener=this.deactivate.bind(this)}fS(Xi.prototype);Xi.current=null;Xi.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null};Xi.prototype.activate=function(){Xi.current&&Xi.current.deactivate(),Xi.current=this,this.active=!0,this.dom.overlay.style.display="none",O.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)};Xi.prototype.deactivate=function(){Xi.current===this&&(Xi.current=null),this.active=!1,this.dom.overlay.style.display="",O.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")};Xi.prototype._onTapOverlay=function(i){this.activate(),i.stopPropagation()};function qle(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}const AS={current:"current",time:"time",deleteSelected:"Delete selected"},Gle=AS,Yle=AS,NS={current:"attuale",time:"tempo",deleteSelected:"Cancella la selezione"},Ble=NS,Hle=NS,LS={current:"huidige",time:"tijd",deleteSelected:"Selectie verwijderen"},Ule=LS,Vle=LS,GW={current:"Aktuelle",time:"Zeit",deleteSelected:"Lsche Auswahl"},Xle=GW,tp={current:"actuel",time:"heure",deleteSelected:"Effacer la selection"},Kle=tp,Zle=tp,Qle=tp,YW={current:"corriente",time:"hora",deleteSelected:"Eliminar seleccin"},Jle=YW,BW={current:"",time:"",deleteSelected:" "},ece=BW,HW={current:"",time:"",deleteSelected:" "},tce=HW,UW={current:"aktualny",time:"czas",deleteSelected:"Usu wybrane"},ice=UW,FS={current:"atual",time:"data",deleteSelected:"Apagar selecionado"},nce=FS,rce=FS,VW={current:"",time:"",deleteSelected:""},sce=VW,XW={current:"nuvarande",time:"tid",deleteSelected:"Radera valda"},oce=XW,ip={current:"nvrende",time:"tid",deleteSelected:"Slett valgte"},ace=ip,lce=ip,cce=ip,KW={current:"einamas",time:"laikas",deleteSelected:"Paalinti pasirinkt"},uce=KW,fl={en:AS,en_EN:Gle,en_US:Yle,it:NS,it_IT:Ble,it_CH:Hle,nl:LS,nl_NL:Ule,nl_BE:Vle,de:GW,de_DE:Xle,fr:tp,fr_FR:Kle,fr_CA:Zle,fr_BE:Qle,es:YW,es_ES:Jle,uk:BW,uk_UA:ece,ru:HW,ru_RU:tce,pl:UW,pl_PL:ice,pt:FS,pt_BR:nce,pt_PT:rce,ja:VW,ja_JP:sce,lt:KW,lt_LT:uce,sv:XW,sv_SE:oce,nb:ip,nn:lce,nb_NO:ace,nn_NO:cce};class $S extends Ps{constructor(e,t){super(),this.body=e,this.defaultOptions={moment:wi,locales:fl,locale:"en",id:void 0,title:void 0},this.options=O.extend({},this.defaultOptions),this.setOptions(t),this.options.locales=O.extend({},fl,this.options.locales);const n=this.defaultOptions.locales[this.defaultOptions.locale];Object.keys(this.options.locales).forEach(r=>{this.options.locales[r]=O.extend({},n,this.options.locales[r])}),t&&t.time!=null?this.customTime=t.time:this.customTime=new Date,this.eventParams={},this._create()}setOptions(e){e&&O.selectiveExtend(["moment","locale","locales","id","title","rtl","snap"],this.options,e)}_create(){const e=document.createElement("div");e["custom-time"]=this,e.className=`vis-custom-time ${this.options.id||""}`,e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e;const t=document.createElement("div");t.style.position="relative",t.style.top="0px",this.options.rtl?t.style.right="-10px":t.style.left="-10px",t.style.height="100%",t.style.width="20px";function n(r){this.body.range._onMouseWheel(r)}t.addEventListener?(t.addEventListener("mousewheel",n.bind(this),!1),t.addEventListener("DOMMouseScroll",n.bind(this),!1)):t.attachEvent("onmousewheel",n.bind(this)),e.appendChild(t),this.hammer=new ai(t),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:ai.DIRECTION_ALL}),this.hammer.get("press").set({time:1e4})}destroy(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null}redraw(){const e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar));const t=this.body.util.toScreen(this.customTime);let n=this.options.locales[this.options.locale];n||(this.warned||(console.warn(`WARNING: options.locales['${this.options.locale}'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization`),this.warned=!0),n=this.options.locales.en);let r=this.options.title;return r===void 0?(r=`${n.time}: ${this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")}`,r=r.charAt(0).toUpperCase()+r.substring(1)):typeof r=="function"&&(r=r.call(this,this.customTime)),this.options.rtl?this.bar.style.right=`${t}px`:this.bar.style.left=`${t}px`,this.bar.title=r,!1}hide(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}setCustomTime(e){this.customTime=O.convert(e,"Date"),this.redraw()}getCustomTime(){return new Date(this.customTime.valueOf())}setCustomMarker(e,t){this.marker&&this.bar.removeChild(this.marker),this.marker=document.createElement("div"),this.marker.className="vis-custom-time-marker",this.marker.innerHTML=O.xss(e),this.marker.style.position="absolute",t&&(this.marker.setAttribute("contenteditable","true"),this.marker.addEventListener("pointerdown",()=>{this.marker.focus()}),this.marker.addEventListener("input",this._onMarkerChange.bind(this)),this.marker.title=e,this.marker.addEventListener("blur",n=>{this.title!=n.target.innerHTML&&(this._onMarkerChanged(n),this.title=n.target.innerHTML)})),this.bar.appendChild(this.marker)}setCustomTitle(e){this.options.title=e}_onDragStart(e){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,e.stopPropagation()}_onDrag(e){if(!this.eventParams.dragging)return;let t=this.options.rtl?-1*e.deltaX:e.deltaX;const n=this.body.util.toScreen(this.eventParams.customTime)+t,r=this.body.util.toTime(n),s=this.body.util.getScale(),o=this.body.util.getStep(),a=this.options.snap,l=a?a(r,s,o):r;this.setCustomTime(l),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e}),e.stopPropagation()}_onDragEnd(e){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e}),e.stopPropagation())}_onMarkerChange(e){this.body.emitter.emit("markerchange",{id:this.options.id,title:e.target.innerHTML,event:e}),e.stopPropagation()}_onMarkerChanged(e){this.body.emitter.emit("markerchanged",{id:this.options.id,title:e.target.innerHTML,event:e}),e.stopPropagation()}static customTimeFromTarget(e){let t=e.target;for(;t;){if(Object.prototype.hasOwnProperty.call(t,"custom-time"))return t["custom-time"];t=t.parentNode}return null}}class Ya{_create(e){this.dom={},this.dom.container=e,this.dom.container.style.position="relative",this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.rollingModeBtn=document.createElement("div"),this.dom.loadingScreen=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.rollingModeBtn.className="vis-rolling-mode-btn",this.dom.loadingScreen.className="vis-loading-screen",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.rollingModeBtn),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.on("rangechange",()=>{this.initialDrawDone===!0&&this._redraw()}),this.on("rangechanged",()=>{this.initialRangeChangeDone||(this.initialRangeChangeDone=!0)}),this.on("touch",this._onTouch.bind(this)),this.on("panmove",this._onDrag.bind(this));const t=this;this._origRedraw=this._redraw.bind(this),this._redraw=O.throttle(this._origRedraw),this.on("_change",h=>{t.itemSet&&t.itemSet.initialItemSetDrawn&&h&&h.queue==!0?t._redraw():t._origRedraw()}),this.hammer=new ai(this.dom.root);const n=this.hammer.get("pinch").set({enable:!0});n&&zle(n),this.hammer.get("pan").set({threshold:5,direction:ai.DIRECTION_ALL}),this.timelineListeners={},["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(h=>{const d=f=>{t.isActive()&&t.emit(h,f)};t.hammer.on(h,d),t.timelineListeners[h]=d}),qW(this.hammer,h=>{t.emit("touch",h)}),Wle(this.hammer,h=>{t.emit("release",h)});function s(h){if(!this.isActive())return;if(this.emit("mousewheel",h),this.options.preferZoom){if(!this.options.zoomKey||h[this.options.zoomKey])return}else if(this.options.zoomKey&&h[this.options.zoomKey])return;if(!this.options.verticalScroll&&!this.options.horizontalScroll)return;let d=0,f=0;"detail"in h&&(f=h.detail*-1),"wheelDelta"in h&&(f=h.wheelDelta),"wheelDeltaY"in h&&(f=h.wheelDeltaY),"wheelDeltaX"in h&&(d=h.wheelDeltaX*-1),"axis"in h&&h.axis===h.HORIZONTAL_AXIS&&(d=f*-1,f=0),"deltaY"in h&&(f=h.deltaY*-1),"deltaX"in h&&(d=h.deltaX);var p=40,m=800;h.deltaMode&&(h.deltaMode===1?(d*=p,f*=p):(d*=p,f*=m));const g=this.options.verticalScroll,v=Math.abs(f)>=Math.abs(d),y=this.options.horizontalScroll&&this.options.horizontalScrollKey&&h[this.options.horizontalScrollKey];if(g&&v&&!y){const w=this.props.scrollTop,b=w+f;this._setScrollTop(b)!==w&&(this._redraw(),this.emit("scroll",h),h.preventDefault());return}if(this.options.horizontalScroll){this.range.stopRolling();let b=(v?f:d)/120*(this.range.end-this.range.start)/20;this.options.horizontalScrollInvert&&v&&(b=-b);const x=this.range.start+b,C=this.range.end+b,E={animation:!1,byUser:!0,event:h};this.range.setRange(x,C,E),h.preventDefault();return}}const o="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":this.dom.centerContainer.addEventListener?"DOMMouseScroll":"onmousewheel";this.dom.top.addEventListener,this.dom.bottom.addEventListener,this.dom.centerContainer.addEventListener(o,s.bind(this),!1),this.dom.top.addEventListener(o,s.bind(this),!1),this.dom.bottom.addEventListener(o,s.bind(this),!1);function a(h){if(t.options.verticalScroll&&(h.preventDefault(),t.isActive())){const d=-h.target.scrollTop;t._setScrollTop(d),t._redraw(),t.emit("scrollSide",h)}}this.dom.left.parentNode.addEventListener("scroll",a.bind(this)),this.dom.right.parentNode.addEventListener("scroll",a.bind(this));let l=!1;function c(h){if(h.preventDefault&&(t.emit("dragover",t.getEventProperties(h)),h.preventDefault()),h.target.className.indexOf("timeline")>-1&&!l)return h.dataTransfer.dropEffect="move",l=!0,!1}function u(h){h.preventDefault&&h.preventDefault(),h.stopPropagation&&h.stopPropagation();try{var d=JSON.parse(h.dataTransfer.getData("text"));if(!d||!d.content)return}catch{return!1}return l=!1,h.center={x:h.clientX,y:h.clientY},d.target!=="item"?t.itemSet._onAddItem(h):t.itemSet._onDropObjectOnItem(h),t.emit("drop",t.getEventProperties(h)),!1}if(this.dom.center.addEventListener("dragover",c.bind(this),!1),this.dom.center.addEventListener("drop",u.bind(this),!1),this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!e)throw new Error("No container provided");e.appendChild(this.dom.root),e.appendChild(this.dom.loadingScreen)}setOptions(e){if(e){const t=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","preferZoom","rtl","zoomKey","horizontalScroll","horizontalScrollKey","horizontalScrollInvert","verticalScroll","longSelectPressTime","snap"];if(O.selectiveExtend(t,this.options,e),this.dom.rollingModeBtn.style.visibility="hidden",this.options.rtl&&(this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"),this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"),typeof this.options.orientation!="object"&&(this.options.orientation={item:void 0,axis:void 0}),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation={item:e.orientation,axis:e.orientation}:typeof e.orientation=="object"&&("item"in e.orientation&&(this.options.orientation.item=e.orientation.item),"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis))),this.options.orientation.axis==="both"){if(!this.timeAxis2){const n=this.timeAxis2=new Ad(this.body,this.options);n.setOptions=r=>{const s=r?O.extend({},r):{};s.orientation="top",Ad.prototype.setOptions.call(n,s)},this.components.push(n)}}else if(this.timeAxis2){const n=this.components.indexOf(this.timeAxis2);n!==-1&&this.components.splice(n,1),this.timeAxis2.destroy(),this.timeAxis2=null}typeof e.drawPoints=="function"&&(e.drawPoints={onRender:e.drawPoints}),"hiddenDates"in this.options&&MS(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in e&&(e.clickToUse?this.activator||(this.activator=new Xi(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),this._initAutoResize()}if(this.components.forEach(t=>t.setOptions(e)),"configure"in e){this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(e.configure);const t=O.deepExtend({},this.options);this.components.forEach(n=>{O.deepExtend(t,n.options)}),this.configurator.setModuleOptions({global:t})}this._redraw()}isActive(){return!this.activator||this.activator.active}destroy(){this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(const e in this.timelineListeners)Object.prototype.hasOwnProperty.call(this.timelineListeners,e)&&delete this.timelineListeners[e];this.timelineListeners=null,this.hammer&&this.hammer.destroy(),this.hammer=null,this.components.forEach(e=>e.destroy()),this.body=null}setCustomTime(e,t){const n=this.customTimes.filter(r=>t===r.options.id);if(n.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(t)}`);n.length>0&&n[0].setCustomTime(e)}getCustomTime(e){const t=this.customTimes.filter(n=>n.options.id===e);if(t.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(e)}`);return t[0].getCustomTime()}setCustomTimeMarker(e,t,n){const r=this.customTimes.filter(s=>s.options.id===t);if(r.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(t)}`);r.length>0&&r[0].setCustomMarker(e,n)}setCustomTimeTitle(e,t){const n=this.customTimes.filter(r=>r.options.id===t);if(n.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(t)}`);if(n.length>0)return n[0].setCustomTitle(e)}getEventProperties(e){return{event:e}}addCustomTime(e,t){const n=e!==void 0?O.convert(e,"Date"):new Date;if(this.customTimes.some(o=>o.options.id===t))throw new Error(`A custom time with id ${JSON.stringify(t)} already exists`);const s=new $S(this.body,O.extend({},this.options,{time:n,id:t,snap:this.itemSet?this.itemSet.options.snap:this.options.snap}));return this.customTimes.push(s),this.components.push(s),this._redraw(),t}removeCustomTime(e){const t=this.customTimes.filter(n=>n.options.id===e);if(t.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(e)}`);t.forEach(n=>{this.customTimes.splice(this.customTimes.indexOf(n),1),this.components.splice(this.components.indexOf(n),1),n.destroy()})}getVisibleItems(){return this.itemSet&&this.itemSet.getVisibleItems()||[]}getItemsAtCurrentTime(e){return this.time=e,this.itemSet&&this.itemSet.getItemsAtCurrentTime(this.time)||[]}getVisibleGroups(){return this.itemSet&&this.itemSet.getVisibleGroups()||[]}fit(e,t){const n=this.getDataRange();if(n.min===null&&n.max===null)return;const r=n.max-n.min,s=new Date(n.min.valueOf()-r*.01),o=new Date(n.max.valueOf()+r*.01),a=e&&e.animation!==void 0?e.animation:!0;this.range.setRange(s,o,{animation:a},t)}getDataRange(){throw new Error("Cannot invoke abstract method getDataRange")}setWindow(e,t,n,r){typeof arguments[2]=="function"&&(r=arguments[2],n={});let s,o;arguments.length==1?(o=arguments[0],s=o.animation!==void 0?o.animation:!0,this.range.setRange(o.start,o.end,{animation:s})):arguments.length==2&&typeof arguments[1]=="function"?(o=arguments[0],r=arguments[1],s=o.animation!==void 0?o.animation:!0,this.range.setRange(o.start,o.end,{animation:s},r)):(s=n&&n.animation!==void 0?n.animation:!0,this.range.setRange(e,t,{animation:s},r))}moveTo(e,t,n){typeof arguments[1]=="function"&&(n=arguments[1],t={});const r=this.range.end-this.range.start,s=O.convert(e,"Date").valueOf(),o=s-r/2,a=s+r/2,l=t&&t.animation!==void 0?t.animation:!0;this.range.setRange(o,a,{animation:l},n)}getWindow(){const e=this.range.getRange();return{start:new Date(e.start),end:new Date(e.end)}}zoomIn(e,t,n){if(!e||e<0||e>1)return;typeof arguments[1]=="function"&&(n=arguments[1],t={});const r=this.getWindow(),s=r.start.valueOf(),o=r.end.valueOf(),a=o-s,l=a/(1+e),c=(a-l)/2,u=s+c,h=o-c;this.setWindow(u,h,t,n)}zoomOut(e,t,n){if(!e||e<0||e>1)return;typeof arguments[1]=="function"&&(n=arguments[1],t={});const r=this.getWindow(),s=r.start.valueOf(),o=r.end.valueOf(),a=o-s,l=s-a*e/2,c=o+a*e/2;this.setWindow(l,c,t,n)}redraw(){this._redraw()}_redraw(){this.redrawCount++;const e=this.dom;if(!e||!e.container||e.root.offsetWidth==0)return;let t=!1;const n=this.options,r=this.props;Pd(this.options.moment,this.body,this.options.hiddenDates),n.orientation=="top"?(O.addClassName(e.root,"vis-top"),O.removeClassName(e.root,"vis-bottom")):(O.removeClassName(e.root,"vis-top"),O.addClassName(e.root,"vis-bottom")),n.rtl?(O.addClassName(e.root,"vis-rtl"),O.removeClassName(e.root,"vis-ltr")):(O.addClassName(e.root,"vis-ltr"),O.removeClassName(e.root,"vis-rtl")),e.root.style.maxHeight=O.option.asSize(n.maxHeight,""),e.root.style.minHeight=O.option.asSize(n.minHeight,""),e.root.style.width=O.option.asSize(n.width,"");const s=e.root.offsetWidth;r.border.left=1,r.border.right=1,r.border.top=1,r.border.bottom=1,r.center.height=e.center.offsetHeight,r.left.height=e.left.offsetHeight,r.right.height=e.right.offsetHeight,r.top.height=e.top.clientHeight||-r.border.top,r.bottom.height=Math.round(e.bottom.getBoundingClientRect().height)||e.bottom.clientHeight||-r.border.bottom;const o=Math.max(r.left.height,r.center.height,r.right.height),a=r.top.height+o+r.bottom.height+r.border.top+r.border.bottom;e.root.style.height=O.option.asSize(n.height,`${a}px`),r.root.height=e.root.offsetHeight,r.background.height=r.root.height;const l=r.root.height-r.top.height-r.bottom.height;r.centerContainer.height=l,r.leftContainer.height=l,r.rightContainer.height=r.leftContainer.height,r.root.width=s,r.background.width=r.root.width,this.initialDrawDone||(r.scrollbarWidth=O.getScrollBarWidth());const c=e.leftContainer.clientWidth,u=e.rightContainer.clientWidth;n.verticalScroll?n.rtl?(r.left.width=c||-r.border.left,r.right.width=u+r.scrollbarWidth||-r.border.right):(r.left.width=c+r.scrollbarWidth||-r.border.left,r.right.width=u||-r.border.right):(r.left.width=c||-r.border.left,r.right.width=u||-r.border.right),this._setDOM();let h=this._updateScrollTop();n.orientation.item!="top"&&(h+=Math.max(r.centerContainer.height-r.center.height-r.border.top-r.border.bottom,0)),e.center.style.transform=`translateY(${h}px)`;const d=r.scrollTop==0?"hidden":"",f=r.scrollTop==r.scrollTopMin?"hidden":"";e.shadowTop.style.visibility=d,e.shadowBottom.style.visibility=f,e.shadowTopLeft.style.visibility=d,e.shadowBottomLeft.style.visibility=f,e.shadowTopRight.style.visibility=d,e.shadowBottomRight.style.visibility=f,n.verticalScroll&&(e.rightContainer.className="vis-panel vis-right vis-vertical-scroll",e.leftContainer.className="vis-panel vis-left vis-vertical-scroll",e.shadowTopRight.style.visibility="hidden",e.shadowBottomRight.style.visibility="hidden",e.shadowTopLeft.style.visibility="hidden",e.shadowBottomLeft.style.visibility="hidden",e.left.style.top="0px",e.right.style.top="0px"),(!n.verticalScroll||r.center.height<r.centerContainer.height)&&(e.left.style.top=`${h}px`,e.right.style.top=`${h}px`,e.rightContainer.className=e.rightContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),e.leftContainer.className=e.leftContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),r.left.width=c||-r.border.left,r.right.width=u||-r.border.right,this._setDOM());const p=r.center.height>r.centerContainer.height;this.hammer.get("pan").set({direction:p?ai.DIRECTION_ALL:ai.DIRECTION_HORIZONTAL}),this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.components.forEach(g=>{t=g.redraw()||t});const m=5;if(t)if(this.redrawCount<m){this.body.emitter.emit("_change");return}else console.log("WARNING: infinite loop in redraw?");else this.redrawCount=0;this.body.emitter.emit("changed")}_setDOM(){const e=this.props,t=this.dom;e.leftContainer.width=e.left.width,e.rightContainer.width=e.right.width;const n=e.root.width-e.left.width-e.right.width;e.center.width=n,e.centerContainer.width=n,e.top.width=n,e.bottom.width=n,t.background.style.height=`${e.background.height}px`,t.backgroundVertical.style.height=`${e.background.height}px`,t.backgroundHorizontal.style.height=`${e.centerContainer.height}px`,t.centerContainer.style.height=`${e.centerContainer.height}px`,t.leftContainer.style.height=`${e.leftContainer.height}px`,t.rightContainer.style.height=`${e.rightContainer.height}px`,t.background.style.width=`${e.background.width}px`,t.backgroundVertical.style.width=`${e.centerContainer.width}px`,t.backgroundHorizontal.style.width=`${e.background.width}px`,t.centerContainer.style.width=`${e.center.width}px`,t.top.style.width=`${e.top.width}px`,t.bottom.style.width=`${e.bottom.width}px`,t.background.style.left="0",t.background.style.top="0",t.backgroundVertical.style.left=`${e.left.width+e.border.left}px`,t.backgroundVertical.style.top="0",t.backgroundHorizontal.style.left="0",t.backgroundHorizontal.style.top=`${e.top.height}px`,t.centerContainer.style.left=`${e.left.width}px`,t.centerContainer.style.top=`${e.top.height}px`,t.leftContainer.style.left="0",t.leftContainer.style.top=`${e.top.height}px`,t.rightContainer.style.left=`${e.left.width+e.center.width}px`,t.rightContainer.style.top=`${e.top.height}px`,t.top.style.left=`${e.left.width}px`,t.top.style.top="0",t.bottom.style.left=`${e.left.width}px`,t.bottom.style.top=`${e.top.height+e.centerContainer.height}px`,t.center.style.left="0",t.left.style.left="0",t.right.style.left="0"}setCurrentTime(e){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(e)}getCurrentTime(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()}_toTime(e){return XM(this,e,this.props.center.width)}_toGlobalTime(e){return XM(this,e,this.props.root.width)}_toScreen(e){return VM(this,e,this.props.center.width)}_toGlobalScreen(e){return VM(this,e,this.props.root.width)}_initAutoResize(){this.options.autoResize==!0?this._startAutoResize():this._stopAutoResize()}_startAutoResize(){const e=this;this._stopAutoResize(),this._onResize=()=>{if(e.options.autoResize!=!0){e._stopAutoResize();return}if(e.dom.root){const t=e.dom.root.offsetHeight,n=e.dom.root.offsetWidth;(n!=e.props.lastWidth||t!=e.props.lastHeight)&&(e.props.lastWidth=n,e.props.lastHeight=t,e.props.scrollbarWidth=O.getScrollBarWidth(),e.body.emitter.emit("_change"))}},window.addEventListener("resize",this._onResize),e.dom.root&&(e.props.lastWidth=e.dom.root.offsetWidth,e.props.lastHeight=e.dom.root.offsetHeight),this.watchTimer=setInterval(this._onResize,1e3)}_stopAutoResize(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(window.removeEventListener("resize",this._onResize),this._onResize=null)}_onTouch(){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop}_onPinch(){this.touch.allowDragging=!1}_onDrag(e){if(!e||!this.touch.allowDragging)return;const t=e.deltaY,n=this._getScrollTop(),r=this._setScrollTop(this.touch.initialScrollTop+t);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),r!=n&&this.emit("verticalDrag")}_setScrollTop(e){return this.props.scrollTop=e,this._updateScrollTop(),this.props.scrollTop}_updateScrollTop(){const e=Math.min(this.props.centerContainer.height-this.props.border.top-this.props.border.bottom-this.props.center.height,0);return e!=this.props.scrollTopMin&&(this.options.orientation.item!="top"&&(this.props.scrollTop+=e-this.props.scrollTopMin),this.props.scrollTopMin=e),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<e&&(this.props.scrollTop=e),this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.props.scrollTop}_getScrollTop(){return this.props.scrollTop}_createConfigurator(){throw new Error("Cannot invoke abstract method _createConfigurator")}}fS(Ya.prototype);class ZW extends Ps{constructor(e,t){super(),this.body=e,this.defaultOptions={rtl:!1,showCurrentTime:!0,alignCurrentTime:void 0,moment:wi,locales:fl,locale:"en"},this.options=O.extend({},this.defaultOptions),this.setOptions(t),this.options.locales=O.extend({},fl,this.options.locales);const n=this.defaultOptions.locales[this.defaultOptions.locale];Object.keys(this.options.locales).forEach(r=>{this.options.locales[r]=O.extend({},n,this.options.locales[r])}),this.offset=0,this._create()}_create(){const e=document.createElement("div");e.className="vis-current-time",e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e}destroy(){this.options.showCurrentTime=!1,this.redraw(),this.body=null}setOptions(e){e&&O.selectiveExtend(["rtl","showCurrentTime","alignCurrentTime","moment","locale","locales"],this.options,e)}redraw(){if(this.options.showCurrentTime){const e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar),this.start());let t=this.options.moment(Date.now()+this.offset);this.options.alignCurrentTime&&(t=t.startOf(this.options.alignCurrentTime));const n=this.body.util.toScreen(t);let r=this.options.locales[this.options.locale];r||(this.warned||(console.warn(`WARNING: options.locales['${this.options.locale}'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization`),this.warned=!0),r=this.options.locales.en);let s=`${r.current} ${r.time}: ${t.format("dddd, MMMM Do YYYY, H:mm:ss")}`;s=s.charAt(0).toUpperCase()+s.substring(1),this.options.rtl?this.bar.style.transform=`translateX(${n*-1}px)`:this.bar.style.transform=`translateX(${n}px)`,this.bar.title=s}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1}start(){const e=this;function t(){e.stop();let r=1/e.body.range.conversion(e.body.domProps.center.width).scale/10;r<30&&(r=30),r>1e3&&(r=1e3),e.redraw(),e.body.emitter.emit("currentTimeTick"),e.currentTimeTimer=setTimeout(t,r)}t()}stop(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)}setCurrentTime(e){const t=O.convert(e,"Date").valueOf(),n=Date.now();this.offset=t-n,this.redraw()}getCurrentTime(){return new Date(Date.now()+this.offset)}}const Oi=.001;function hce(i){i.sort((e,t)=>e.data.start-t.data.start)}function dce(i){i.sort((e,t)=>{const n="end"in e.data?e.data.end:e.data.start,r="end"in t.data?t.data.end:t.data.start;return n-r})}function JM(i,e,t,n){return jS(i,e.item,!1,s=>s.stack&&(t||s.top===null),s=>s.stack,()=>e.axis,n)===null}function fce(i,e,t){const n=jS(i,e.item,!1,r=>r.stack,()=>!0,r=>r.baseTop);t.height=n-t.top+.5*e.item.vertical}function pce(i,e,t,n){for(let r=0;r<i.length;r++){if(i[r].data.subgroup==null){i[r].top=e.item.vertical;continue}if(i[r].data.subgroup===void 0||!n)continue;let s=0;for(const o in t)!Object.prototype.hasOwnProperty.call(t,o)||t[o].visible!==!0||t[o].index>=t[i[r].data.subgroup].index||(s+=t[o].height,t[i[r].data.subgroup].top=s);i[r].top=s+.5*e.item.vertical}n||mce(i,e,t)}function mce(i,e,t){jS(Object.values(t).sort((n,r)=>n.index>r.index?1:n.index<r.index?-1:0),{vertical:0},!0,()=>!0,()=>!0,()=>0);for(let n=0;n<i.length;n++)i[n].data.subgroup!==void 0&&(i[n].top=t[i[n].data.subgroup].top+.5*e.item.vertical)}function eA(i,e,t){let n=!1;const r=[];for(let s in t)Object.prototype.hasOwnProperty.call(t[s],"index")?r[t[s].index]=s:r.push(s);for(let s=0;s<r.length;s++){let o=r[s];if(!Object.prototype.hasOwnProperty.call(t,o))continue;n=n||t[o].stack,t[o].top=0;for(const l in t)t[l].visible&&t[o].index>t[l].index&&(t[o].top+=t[l].height);const a=i[o];for(let l=0;l<a.length;l++)a[l].data.subgroup!==void 0&&(a[l].top=t[a[l].data.subgroup].top+.5*e.item.vertical,t[o].stack&&(a[l].baseTop=a[l].top));n&&t[o].stack&&fce(i[o],e,t[o])}}function jS(i,e,t,n,r,s,o){let a=v=>v.start,l=v=>v.end;t||(!!(i[0]&&i[0].options.rtl)?a=y=>y.right:a=y=>y.left,l=y=>a(y)+y.width+e.horizontal);const c=[],u=[];let h=null,d=0;for(const v of i)if(n(v))c.push(v);else if(r(v)){const y=a(v);h!==null&&y<h-Oi&&(d=0),h=y,d=Lh(u,w=>a(w)-Oi>y,d),u.splice(d,0,v),d++}h=null;let f=null;d=0;let p=0,m=0,g=0;for(;c.length>0;){const v=c.shift();v.top=s(v);const y=a(v),w=l(v);h!==null&&y<h-Oi&&(p=0,m=0,d=0,f=null),(h===null||y>h+Oi)&&(p=Lh(u,C=>y<l(C)-Oi,p)),h=y,(f===null||f<w-Oi)&&(m=Lh(u,C=>w<a(C)-Oi,Math.max(p,m))),f!==null&&f-Oi>w&&(m=vce(u,C=>w+Oi>=a(C),p,m)+1),f=w;const b=yce(u,C=>y<l(C)-Oi,p,m).sort((C,E)=>C.top-E.top);for(let C=0;C<b.length;C++){const E=b[C];gce(v,E,e)&&(v.top=E.top+E.height+e.vertical)}r(v)&&(d=Lh(u,C=>a(C)-Oi>y,d),u.splice(d,0,v),d<p&&p++,d<=m&&m++,d++);const x=v.top+v.height;if(x>g&&(g=x),o&&o())return null}return g}function gce(i,e,t){return i.top-t.vertical+Oi<e.top+e.height&&i.top+i.height+t.vertical-Oi>e.top}function Lh(i,e,t){t||(t=0);for(let n=t;n<i.length;n++)if(e(i[n]))return n;return i.length}function vce(i,e,t,n){t||(t=0),n||(n=i.length);for(let r=n-1;r>=t;r--)if(e(i[r]))return r;return t-1}function yce(i,e,t,n){t||(t=0),n?n=Math.min(n,i.length):n=i.length;const r=[];for(let s=t;s<n;s++)e(i[s])&&r.push(i[s]);return r}const _ce="__background__",tA={BACKGROUND:_ce};class Z0{constructor(e,t,n){if(this.groupId=e,this.subgroups={},this.subgroupStack={},this.subgroupStackAll=!1,this.subgroupVisibility={},this.doInnerStack=!1,this.shouldBailStackItems=!1,this.subgroupIndex=0,this.subgroupOrderer=t&&t.subgroupOrder,this.itemSet=n,this.isVisible=null,this.height=0,this.stackDirty=!0,this._disposeCallbacks=[],t&&t.nestedGroups&&(this.nestedGroups=t.nestedGroups,t.showNested==!1?this.showNested=!1:this.showNested=!0),t&&t.subgroupStack)if(typeof t.subgroupStack=="boolean")this.doInnerStack=t.subgroupStack,this.subgroupStackAll=t.subgroupStack;else for(const s in t.subgroupStack)Object.prototype.hasOwnProperty.call(t.subgroupStack,s)&&(this.subgroupStack[s]=t.subgroupStack[s],this.doInnerStack=this.doInnerStack||t.subgroupStack[s]);t&&t.heightMode?this.heightMode=t.heightMode:this.heightMode=n.options.groupHeightMode,this.nestedInGroup=null,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.itemsInRange=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;const r=()=>{this.checkRangedItems=!0};this.itemSet.body.emitter.on("checkRangedItems",r),this._disposeCallbacks.push(()=>{this.itemSet.body.emitter.off("checkRangedItems",r)}),this._create(),this.setData(t)}_create(){const e=document.createElement("div");this.itemSet.options.groupEditable.order?e.className="vis-label draggable":e.className="vis-label",this.dom.label=e;const t=document.createElement("div");t.className="vis-inner",e.appendChild(t),this.dom.inner=t;const n=document.createElement("div");n.className="vis-group",n["vis-group"]=this,this.dom.foreground=n,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.style.position="absolute",this.dom.marker.innerHTML="",this.dom.background.appendChild(this.dom.marker)}setData(e){if(this.itemSet.groupTouchParams.isDragging)return;let t,n;if(e&&e.subgroupVisibility)for(const s in e.subgroupVisibility)Object.prototype.hasOwnProperty.call(e.subgroupVisibility,s)&&(this.subgroupVisibility[s]=e.subgroupVisibility[s]);if(this.itemSet.options&&this.itemSet.options.groupTemplate?(n=this.itemSet.options.groupTemplate.bind(this),t=n(e,this.dom.inner)):t=e&&e.content,t instanceof Element){for(;this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(t)}else t instanceof Object&&t.isReactComponent||(t instanceof Object?n(e,this.dom.inner):t!=null?this.dom.inner.innerHTML=O.xss(t):this.dom.inner.innerHTML=O.xss(this.groupId||""));this.dom.label.title=e&&e.title||"",this.dom.inner.firstChild?O.removeClassName(this.dom.inner,"vis-hidden"):O.addClassName(this.dom.inner,"vis-hidden"),e&&e.nestedGroups?((!this.nestedGroups||this.nestedGroups!=e.nestedGroups)&&(this.nestedGroups=e.nestedGroups),(e.showNested!==void 0||this.showNested===void 0)&&(e.showNested==!1?this.showNested=!1:this.showNested=!0),O.addClassName(this.dom.label,"vis-nesting-group"),this.showNested?(O.removeClassName(this.dom.label,"collapsed"),O.addClassName(this.dom.label,"expanded")):(O.removeClassName(this.dom.label,"expanded"),O.addClassName(this.dom.label,"collapsed"))):this.nestedGroups&&(this.nestedGroups=null,O.removeClassName(this.dom.label,"collapsed"),O.removeClassName(this.dom.label,"expanded"),O.removeClassName(this.dom.label,"vis-nesting-group")),e&&(e.treeLevel||e.nestedInGroup)?(O.addClassName(this.dom.label,"vis-nested-group"),e.treeLevel?O.addClassName(this.dom.label,"vis-group-level-"+e.treeLevel):O.addClassName(this.dom.label,"vis-group-level-unknown-but-gte1")):O.addClassName(this.dom.label,"vis-group-level-0");const r=e&&e.className||null;r!=this.className&&(this.className&&(O.removeClassName(this.dom.label,this.className),O.removeClassName(this.dom.foreground,this.className),O.removeClassName(this.dom.background,this.className),O.removeClassName(this.dom.axis,this.className)),O.addClassName(this.dom.label,r),O.addClassName(this.dom.foreground,r),O.addClassName(this.dom.background,r),O.addClassName(this.dom.axis,r),this.className=r),this.style&&(O.removeCssText(this.dom.label,this.style),this.style=null),e&&e.style&&(O.addCssText(this.dom.label,e.style),this.style=e.style)}getLabelWidth(){return this.props.label.width}_didMarkerHeightChange(){const e=this.dom.marker.clientHeight;if(e!=this.lastMarkerHeight){this.lastMarkerHeight=e;const t={};let n=0;if(O.forEach(this.items,(s,o)=>{s.dirty=!0,s.displayed&&(t[o]=s.redraw(!0),n=t[o].length)}),n>0)for(let s=0;s<n;s++)O.forEach(t,o=>{o[s]()});return!0}else return!1}_calculateGroupSizeAndPosition(){const{offsetTop:e,offsetLeft:t,offsetWidth:n}=this.dom.foreground;this.top=e,this.right=t,this.width=n}_shouldBailItemsRedraw(){const e=this,t=this.itemSet.options.onTimeout,n={relativeBailingTime:this.itemSet.itemsSettingTime,bailTimeMs:t&&t.timeoutMs,userBailFunction:t&&t.callback,shouldBailStackItems:this.shouldBailStackItems};let r=null;if(!this.itemSet.initialDrawDone){if(n.shouldBailStackItems)return!0;Math.abs(Date.now()-new Date(n.relativeBailingTime))>n.bailTimeMs&&(n.userBailFunction&&this.itemSet.userContinueNotBail==null?n.userBailFunction(s=>{e.itemSet.userContinueNotBail=s,r=!s}):e.itemSet.userContinueNotBail==!1?r=!0:r=!1)}return r}_redrawItems(e,t,n,r){if(e||this.stackDirty||this.isVisible&&!t){const o={byEnd:this.orderedItems.byEnd.filter(u=>!u.isCluster),byStart:this.orderedItems.byStart.filter(u=>!u.isCluster)},a={byEnd:[...new Set(this.orderedItems.byEnd.map(u=>u.cluster).filter(u=>!!u))],byStart:[...new Set(this.orderedItems.byStart.map(u=>u.cluster).filter(u=>!!u))]},l=()=>{const u=this._updateItemsInRange(o,this.visibleItems.filter(d=>!d.isCluster),r),h=this._updateClustersInRange(a,this.visibleItems.filter(d=>d.isCluster),r);return[...u,...h]},c=u=>{let h={};for(const d in this.subgroups){if(!Object.prototype.hasOwnProperty.call(this.subgroups,d))continue;const f=this.visibleItems.filter(p=>p.data.subgroup===d);h[d]=u?f.sort((p,m)=>u(p.data,m.data)):f}return h};if(typeof this.itemSet.options.order=="function"){const u=this;if(this.doInnerStack&&this.itemSet.options.stackSubgroups){const h=c(this.itemSet.options.order);eA(h,n,this.subgroups),this.visibleItems=l(),this._updateSubGroupHeights(n)}else{this.visibleItems=l(),this._updateSubGroupHeights(n);const h=this.visibleItems.slice().filter(d=>d.isCluster||!d.isCluster&&!d.cluster).sort((d,f)=>u.itemSet.options.order(d.data,f.data));this.shouldBailStackItems=JM(h,n,!0,this._shouldBailItemsRedraw.bind(this))}}else if(this.visibleItems=l(),this._updateSubGroupHeights(n),this.itemSet.options.stack)if(this.doInnerStack&&this.itemSet.options.stackSubgroups){const u=c();eA(u,n,this.subgroups)}else this.shouldBailStackItems=JM(this.visibleItems,n,!0,this._shouldBailItemsRedraw.bind(this));else pce(this.visibleItems,n,this.subgroups,this.itemSet.options.stackSubgroups);for(let u=0;u<this.visibleItems.length;u++)this.visibleItems[u].repositionX(),this.subgroupVisibility[this.visibleItems[u].data.subgroup]!==void 0&&(this.subgroupVisibility[this.visibleItems[u].data.subgroup]||this.visibleItems[u].hide());this.itemSet.options.cluster&&O.forEach(this.items,u=>{u.cluster&&u.displayed&&u.hide()}),this.shouldBailStackItems&&this.itemSet.body.emitter.emit("destroyTimeline"),this.stackDirty=!1}}_didResize(e,t){e=O.updateProperty(this,"height",t)||e;const n=this.dom.inner.clientWidth,r=this.dom.inner.clientHeight;return e=O.updateProperty(this.props.label,"width",n)||e,e=O.updateProperty(this.props.label,"height",r)||e,e}_applyGroupHeight(e){this.dom.background.style.height=`${e}px`,this.dom.foreground.style.height=`${e}px`,this.dom.label.style.height=`${e}px`}_updateItemsVerticalPosition(e){for(let t=0,n=this.visibleItems.length;t<n;t++){const r=this.visibleItems[t];r.repositionY(e),!this.isVisible&&this.groupId!=tA.BACKGROUND&&r.displayed&&r.hide()}}redraw(e,t,n,r){let s=!1;const o=this.isVisible;let a;const l=[()=>{n=this._didMarkerHeightChange.call(this)||n},this._updateSubGroupHeights.bind(this,t),this._calculateGroupSizeAndPosition.bind(this),()=>{this.isVisible=this._isGroupVisible.bind(this)(e,t)},()=>{this._redrawItems.bind(this)(n,o,t,e)},this._updateSubgroupsSizes.bind(this),()=>{a=this.height=this._calculateHeight.bind(this)(t)},this._calculateGroupSizeAndPosition.bind(this),()=>{s=this._didResize.bind(this)(s,a)},()=>{this._applyGroupHeight.bind(this)(a)},()=>{this._updateItemsVerticalPosition.bind(this)(t)},(()=>(!this.isVisible&&this.height&&(s=!1),s)).bind(this)];if(r)return l;{let c;return l.forEach(u=>{c=u()}),c}}_updateSubGroupHeights(e){if(Object.keys(this.subgroups).length>0){const t=this;this._resetSubgroups(),O.forEach(this.visibleItems,n=>{n.data.subgroup!==void 0&&(t.subgroups[n.data.subgroup].height=Math.max(t.subgroups[n.data.subgroup].height,n.height+e.item.vertical),t.subgroups[n.data.subgroup].visible=typeof this.subgroupVisibility[n.data.subgroup]>"u"?!0:!!this.subgroupVisibility[n.data.subgroup])})}}_isGroupVisible(e,t){return this.top<=e.body.domProps.centerContainer.height-e.body.domProps.scrollTop+t.axis&&this.top+this.height+t.axis>=-e.body.domProps.scrollTop}_calculateHeight(e){let t,n;if(this.heightMode==="fixed"?n=O.toArray(this.items):n=this.visibleItems,!this.isVisible&&this.height)t=Math.max(this.height,this.props.label.height);else if(n.length>0){let r=n[0].top,s=n[0].top+n[0].height;if(O.forEach(n,o=>{r=Math.min(r,o.top),s=Math.max(s,o.top+o.height)}),r>e.axis){const o=r-e.axis;s-=o,O.forEach(n,a=>{a.top-=o})}t=Math.ceil(s+e.item.vertical/2),this.heightMode!=="fitItems"&&(t=Math.max(t,this.props.label.height))}else t=this.props.label.height;return t}show(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)}hide(){const e=this.dom.label;e.parentNode&&e.parentNode.removeChild(e);const t=this.dom.foreground;t.parentNode&&t.parentNode.removeChild(t);const n=this.dom.background;n.parentNode&&n.parentNode.removeChild(n);const r=this.dom.axis;r.parentNode&&r.parentNode.removeChild(r)}add(e){if(this.items[e.id]=e,e.setParent(this),this.stackDirty=!0,e.data.subgroup!==void 0&&(this._addToSubgroup(e),this.orderSubgroups()),!this.visibleItems.includes(e)){const t=this.itemSet.body.range;this._checkIfVisible(e,this.visibleItems,t)}}_addToSubgroup(e,t=e.data.subgroup){t!=null&&this.subgroups[t]===void 0&&(this.subgroups[t]={height:0,top:0,start:e.data.start,end:e.data.end||e.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[t]||!1},this.subgroupIndex++),new Date(e.data.start)<new Date(this.subgroups[t].start)&&(this.subgroups[t].start=e.data.start);const n=e.data.end||e.data.start;new Date(n)>new Date(this.subgroups[t].end)&&(this.subgroups[t].end=n),this.subgroups[t].items.push(e)}_updateSubgroupsSizes(){const e=this;if(e.subgroups)for(const t in e.subgroups){if(!Object.prototype.hasOwnProperty.call(e.subgroups,t))continue;const n=e.subgroups[t].items[0].data.end||e.subgroups[t].items[0].data.start;let r=e.subgroups[t].items[0].data.start,s=n-1;e.subgroups[t].items.forEach(o=>{new Date(o.data.start)<new Date(r)&&(r=o.data.start);const a=o.data.end||o.data.start;new Date(a)>new Date(s)&&(s=a)}),e.subgroups[t].start=r,e.subgroups[t].end=new Date(s-1)}}orderSubgroups(){if(this.subgroupOrderer!==void 0){const e=[];if(typeof this.subgroupOrderer=="string"){for(const t in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,t)&&e.push({subgroup:t,sortField:this.subgroups[t].items[0].data[this.subgroupOrderer]});e.sort((t,n)=>t.sortField-n.sortField)}else if(typeof this.subgroupOrderer=="function"){for(const t in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,t)&&e.push(this.subgroups[t].items[0].data);e.sort(this.subgroupOrderer)}if(e.length>0)for(let t=0;t<e.length;t++)this.subgroups[e[t].subgroup].index=t}}_resetSubgroups(){for(const e in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,e)&&(this.subgroups[e].visible=!1,this.subgroups[e].height=0)}remove(e){delete this.items[e.id],e.setParent(null),this.stackDirty=!0;const t=this.visibleItems.indexOf(e);t!=-1&&this.visibleItems.splice(t,1),e.data.subgroup!==void 0&&(this._removeFromSubgroup(e),this.orderSubgroups())}_removeFromSubgroup(e,t=e.data.subgroup){if(t!=null){const n=this.subgroups[t];if(n){const r=n.items.indexOf(e);r>=0&&(n.items.splice(r,1),n.items.length?this._updateSubgroupsSizes():delete this.subgroups[t])}}}removeFromDataSet(e){this.itemSet.removeItem(e.id)}order(){const e=O.toArray(this.items),t=[],n=[];for(let r=0;r<e.length;r++)e[r].data.end!==void 0&&n.push(e[r]),t.push(e[r]);this.orderedItems={byStart:t,byEnd:n},hce(this.orderedItems.byStart),dce(this.orderedItems.byEnd)}_updateItemsInRange(e,t,n){const r=[],s={};if(!this.isVisible&&this.height!==void 0&&this.groupId!=tA.BACKGROUND){for(let g=0;g<t.length;g++){var o=t[g];o.displayed&&o.hide()}return r}const a=(n.end-n.start)/4,l=n.start-a,c=n.end+a,u=g=>g<l?-1:g<=c?0:1,h=g=>{const{start:v,end:y}=g;return y<l?-1:v<=c?0:1};if(t.length>0)for(let g=0;g<t.length;g++)this._checkIfVisibleWithReference(t[g],r,s,n);const d=O.binarySearchCustom(e.byStart,u,"data","start");if(this._traceVisible(d,e.byStart,r,s,g=>g.data.start<l||g.data.start>c),this.checkRangedItems==!0){this.checkRangedItems=!1;for(let g=0;g<e.byEnd.length;g++)this._checkIfVisibleWithReference(e.byEnd[g],r,s,n)}else{const g=O.binarySearchCustom(e.byEnd,h,"data");this._traceVisible(g,e.byEnd,r,s,v=>v.data.end<l||v.data.start>c)}this._sortVisibleItems(e.byStart,r,s);const f={};let p=0;for(let g=0;g<r.length;g++){const v=r[g];v.displayed||(f[g]=v.redraw(!0),p=f[g].length)}if(p>0)for(let g=0;g<p;g++)O.forEach(f,v=>{v[g]()});for(let g=0;g<r.length;g++)r[g].repositionX();return r}_traceVisible(e,t,n,r,s){if(e!=-1){for(let o=e;o>=0;o--){let a=t[o];if(s(a))break;!(a.isCluster&&!a.hasItems())&&!a.cluster&&r[a.id]===void 0&&(r[a.id]=!0,n.unshift(a))}for(let o=e+1;o<t.length;o++){let a=t[o];if(s(a))break;!(a.isCluster&&!a.hasItems())&&!a.cluster&&r[a.id]===void 0&&(r[a.id]=!0,n.push(a))}}}_sortVisibleItems(e,t,n){t.length=0;for(let r=0;r<e.length;r++){let s=e[r];n[s.id]&&t.push(s)}}_checkIfVisible(e,t,n){e.isVisible(n)?(e.displayed||e.show(),e.repositionX(),t.push(e)):e.displayed&&e.hide()}_checkIfVisibleWithReference(e,t,n,r){e.isVisible(r)?n[e.id]===void 0&&(n[e.id]=!0,t.push(e)):e.displayed&&e.hide()}_updateClustersInRange(e,t,n){const r=[],s={};if(t.length>0)for(let u=0;u<t.length;u++)this._checkIfVisibleWithReference(t[u],r,s,n);for(let u=0;u<e.byStart.length;u++)this._checkIfVisibleWithReference(e.byStart[u],r,s,n);for(let u=0;u<e.byEnd.length;u++)this._checkIfVisibleWithReference(e.byEnd[u],r,s,n);const o={};let a=0;for(let u=0;u<r.length;u++){const h=r[u];h.displayed||(o[u]=h.redraw(!0),a=o[u].length)}if(a>0)for(var c=0;c<a;c++)O.forEach(o,function(u){u[c]()});for(let u=0;u<r.length;u++)r[u].repositionX();return r}changeSubgroup(e,t,n){this._removeFromSubgroup(e,t),this._addToSubgroup(e,n),this.orderSubgroups()}dispose(){this.hide();let e;for(;e=this._disposeCallbacks.pop();)e()}}class QW extends Z0{constructor(e,t,n){super(e,t,n),this.width=0,this.height=0,this.top=0,this.left=0}redraw(e,t){this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,e),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(let r=0,s=this.visibleItems.length;r<s;r++)this.visibleItems[r].repositionY(t);return!1}show(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)}}class jl{constructor(e,t,n){this.id=null,this.parent=null,this.data=e,this.dom=null,this.conversion=t||{},this.defaultOptions={locales:fl,locale:"en"},this.options=O.extend({},this.defaultOptions,n),this.options.locales=O.extend({},fl,this.options.locales);const r=this.defaultOptions.locales[this.defaultOptions.locale];Object.keys(this.options.locales).forEach(s=>{this.options.locales[s]=O.extend({},r,this.options.locales[s])}),this.selected=!1,this.displayed=!1,this.groupShowing=!0,this.selectable=n&&n.selectable||!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.setSelectability(e),this.editable=null,this._updateEditStatus()}select(){this.selectable&&(this.selected=!0,this.dirty=!0,this.displayed&&this.redraw())}unselect(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()}setData(e){e.group!=null&&this.data.group!=e.group&&this.parent!=null&&this.parent.itemSet._moveToGroup(this,e.group),this.setSelectability(e),this.parent&&(this.parent.stackDirty=!0),e.subgroup!=null&&this.data.subgroup!=e.subgroup&&this.parent!=null&&this.parent.changeSubgroup(this,this.data.subgroup,e.subgroup),this.data=e,this._updateEditStatus(),this.dirty=!0,this.displayed&&this.redraw()}setSelectability(e){e&&(this.selectable=typeof e.selectable>"u"?!0:!!e.selectable)}setParent(e){this.displayed?(this.hide(),this.parent=e,this.parent&&this.show()):this.parent=e}isVisible(){return!1}show(){return!1}hide(){return!1}redraw(){}repositionX(){}repositionY(){}_repaintDragCenter(){if(this.selected&&this.editable.updateTime&&!this.dom.dragCenter){const e=this,t=document.createElement("div");t.className="vis-drag-center",t.dragCenterItem=this,this.hammerDragCenter=new ai(t),this.hammerDragCenter.on("tap",n=>{e.parent.itemSet.body.emitter.emit("click",{event:n,item:e.id})}),this.hammerDragCenter.on("doubletap",n=>{n.stopPropagation(),e.parent.itemSet._onUpdateItem(e),e.parent.itemSet.body.emitter.emit("doubleClick",{event:n,item:e.id})}),this.hammerDragCenter.on("panstart",n=>{n.stopPropagation(),e.parent.itemSet._onDragStart(n)}),this.hammerDragCenter.on("panmove",e.parent.itemSet._onDrag.bind(e.parent.itemSet)),this.hammerDragCenter.on("panend",e.parent.itemSet._onDragEnd.bind(e.parent.itemSet)),this.hammerDragCenter.get("press").set({time:1e4}),this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(t,this.dom.dragLeft):this.dom.box.appendChild(t):this.dom.point&&this.dom.point.appendChild(t),this.dom.dragCenter=t}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null,this.hammerDragCenter&&(this.hammerDragCenter.destroy(),this.hammerDragCenter=null))}_repaintDeleteButton(e){const t=(this.options.editable.overrideItems||this.editable==null)&&this.options.editable.remove||!this.options.editable.overrideItems&&this.editable!=null&&this.editable.remove;if(this.selected&&t&&!this.dom.deleteButton){const n=this,r=document.createElement("div");this.options.rtl?r.className="vis-delete-rtl":r.className="vis-delete";let s=this.options.locales[this.options.locale];s||(this.warned||(console.warn(`WARNING: options.locales['${this.options.locale}'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization`),this.warned=!0),s=this.options.locales.en),r.title=s.deleteSelected,this.hammerDeleteButton=new ai(r).on("tap",o=>{o.stopPropagation(),n.parent.removeFromDataSet(n)}),e.appendChild(r),this.dom.deleteButton=r}else(!this.selected||!t)&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null,this.hammerDeleteButton&&(this.hammerDeleteButton.destroy(),this.hammerDeleteButton=null))}_repaintOnItemUpdateTimeTooltip(e){if(!this.options.tooltipOnItemUpdateTime)return;const t=(this.options.editable.updateTime||this.data.editable===!0)&&this.data.editable!==!1;if(this.selected&&t&&!this.dom.onItemUpdateTimeTooltip){const n=document.createElement("div");n.className="vis-onUpdateTime-tooltip",e.appendChild(n),this.dom.onItemUpdateTimeTooltip=n}else!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.dom.onItemUpdateTimeTooltip.style.transform="translateX(-50%)",this.dom.onItemUpdateTimeTooltip.style.left="50%";const n=50,r=this.parent.itemSet.body.domProps.scrollTop;let s;this.options.orientation.item=="top"?s=this.top:s=this.parent.height-this.top-this.height,s+this.parent.top-n<-r?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top=`${this.height+2}px`):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom=`${this.height+2}px`);let a,l;this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template?(l=this.options.tooltipOnItemUpdateTime.template.bind(this),a=l(this.data)):(a=`start: ${wi(this.data.start).format("MM/DD/YYYY hh:mm")}`,this.data.end&&(a+=`<br> end: ${wi(this.data.end).format("MM/DD/YYYY hh:mm")}`)),this.dom.onItemUpdateTimeTooltip.innerHTML=O.xss(a)}}_getItemData(){return this.parent.itemSet.itemsData.get(this.id)}_updateContents(e){let t,n,r,s,o;const a=this._getItemData(),c=(this.dom.box||this.dom.point).getElementsByClassName("vis-item-visible-frame")[0];if(this.options.visibleFrameTemplate?(o=this.options.visibleFrameTemplate.bind(this),s=O.xss(o(a,c))):s="",c){if(s instanceof Object&&!(s instanceof Element))o(a,c);else if(n=this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(s),n){if(s instanceof Element)c.innerHTML="",c.appendChild(s);else if(s!=null)c.innerHTML=O.xss(s);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error(`Property "content" missing in item ${this.id}`);this.itemVisibleFrameContent=s}}if(this.options.template?(r=this.options.template.bind(this),t=r(a,e,this.data)):t=this.data.content,t instanceof Object&&!(t instanceof Element))r(a,e);else if(n=this._contentToString(this.content)!==this._contentToString(t),n){if(t instanceof Element)e.innerHTML="",e.appendChild(t);else if(t!=null)e.innerHTML=O.xss(t);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error(`Property "content" missing in item ${this.id}`);this.content=t}}_updateDataAttributes(e){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){let t=[];if(Array.isArray(this.options.dataAttributes))t=this.options.dataAttributes;else if(this.options.dataAttributes=="all")t=Object.keys(this.data);else return;for(const n of t){const r=this.data[n];r!=null?e.setAttribute(`data-${n}`,r):e.removeAttribute(`data-${n}`)}}}_updateStyle(e){this.style&&(O.removeCssText(e,this.style),this.style=null),this.data.style&&(O.addCssText(e,this.data.style),this.style=this.data.style)}_contentToString(e){return typeof e=="string"?e:e&&"outerHTML"in e?e.outerHTML:e}_updateEditStatus(){this.options&&(typeof this.options.editable=="boolean"?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:typeof this.options.editable=="object"&&(this.editable={},O.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable))),(!this.options||!this.options.editable||this.options.editable.overrideItems!==!0)&&this.data&&(typeof this.data.editable=="boolean"?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:typeof this.data.editable=="object"&&(this.editable={},O.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))}getWidthLeft(){return 0}getWidthRight(){return 0}getTitle(){return this.options.tooltip&&this.options.tooltip.template?this.options.tooltip.template.bind(this)(this._getItemData(),this.data):this.data.title}}jl.prototype.stack=!0;class bce extends jl{constructor(e,t,n){if(super(e,t,n),this.props={dot:{width:0,height:0},line:{width:0,height:0}},e&&e.start==null)throw new Error(`Property "start" missing in item ${e}`)}isVisible(e){if(this.cluster)return!1;let t;const n=this.data.align||this.options.align,r=this.width*e.getMillisecondsPerPixel();return n=="right"?t=this.data.start.getTime()>e.start&&this.data.start.getTime()-r<e.end:n=="left"?t=this.data.start.getTime()+r>e.start&&this.data.start.getTime()<e.end:t=this.data.start.getTime()+r/2>e.start&&this.data.start.getTime()-r/2<e.end,t}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){const t=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");t.appendChild(this.dom.dot)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.editable.updateTime||this.editable.updateGroup,t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.box.className=`vis-item vis-box${t}`,this.dom.line.className=`vis-item vis-line${t}`,this.dom.dot.className=`vis-item vis-dot${t}`}}_getDomComponentsSizes(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(e){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.props.dot.height=e.dot.height,this.props.dot.width=e.dot.width,this.props.line.width=e.line.width,this.width=e.box.width,this.height=e.box.height,this.options.rtl?this.dom.box.style.right=e.previous.right:this.dom.box.style.left=e.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.box)}redraw(e){let t;const n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(t=this._getDomComponentsSizes())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(t)},this._repaintDomAdditionals.bind(this)];if(e)return n;{let r;return n.forEach(s=>{r=s()}),r}}show(e){if(!this.displayed)return this.redraw(e)}hide(){if(this.displayed){const e=this.dom;e.box.remove?e.box.remove():e.box.parentNode&&e.box.parentNode.removeChild(e.box),e.line.remove?e.line.remove():e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.remove?e.dot.remove():e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot),this.displayed=!1}}repositionXY(){const e=this.options.rtl,t=(n,r,s,o=!1)=>{if(r===void 0&&s===void 0)return;const a=o?r*-1:r;if(s===void 0){n.style.transform=`translateX(${a}px)`;return}if(r===void 0){n.style.transform=`translateY(${s}px)`;return}n.style.transform=`translate(${a}px, ${s}px)`};t(this.dom.box,this.boxX,this.boxY,e),t(this.dom.dot,this.dotX,this.dotY,e),t(this.dom.line,this.lineX,this.lineY,e)}repositionX(){const e=this.conversion.toScreen(this.data.start),t=this.data.align===void 0?this.options.align:this.data.align,n=this.props.line.width,r=this.props.dot.width;t=="right"?(this.boxX=e-this.width,this.lineX=e-n,this.dotX=e-n/2-r/2):t=="left"?(this.boxX=e,this.lineX=e,this.dotX=e+n/2-r/2):(this.boxX=e-this.width/2,this.lineX=this.options.rtl?e-n:e-n/2,this.dotX=e-r/2),this.options.rtl?this.right=this.boxX:this.left=this.boxX,this.repositionXY()}repositionY(){const e=this.options.orientation.item,t=this.dom.line.style;if(e=="top"){const n=this.parent.top+this.top+1;this.boxY=this.top||0,t.height=`${n}px`,t.bottom="",t.top="0"}else{const r=this.parent.itemSet.props.height-this.parent.top-this.parent.height+this.top;this.boxY=this.parent.height-this.top-(this.height||0),t.height=`${r}px`,t.top="",t.bottom="0"}this.dotY=-this.props.dot.height/2,this.repositionXY()}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}}class wce extends jl{constructor(e,t,n){if(super(e,t,n),this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},e&&e.start==null)throw new Error(`Property "start" missing in item ${e}`)}isVisible(e){if(this.cluster)return!1;const t=this.width*e.getMillisecondsPerPixel();return this.data.start.getTime()+t>e.start&&this.data.start<e.end}_createDomElement(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),this.dom.point["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){const e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(this.dom.point)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);const e=this.editable.updateTime||this.editable.updateGroup,t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.point.className=`vis-item vis-point${t}`,this.dom.dot.className=`vis-item vis-dot${t}`}}_getDomComponentsSizes(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}}_updateDomComponentsSizes(e){this.props.dot.width=e.dot.width,this.props.dot.height=e.dot.height,this.props.content.height=e.content.height,this.options.rtl?this.dom.content.style.marginRight=`${this.props.dot.width/2}px`:this.dom.content.style.marginLeft=`${this.props.dot.width/2}px`,this.width=e.point.width,this.height=e.point.height,this.dom.dot.style.top=`${(this.height-this.props.dot.height)/2}px`;const t=this.props.dot.width,n=this.options.rtl?t/2:t/2*-1;this.dom.dot.style.transform=`translateX(${n}px`,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.point),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.point)}redraw(e){let t;const n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(t=this._getDomComponentsSizes())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(t)},this._repaintDomAdditionals.bind(this)];if(e)return n;{let r;return n.forEach(s=>{r=s()}),r}}repositionXY(){const e=this.options.rtl;((n,r,s,o=!1)=>{if(r===void 0&&s===void 0)return;const a=o?r*-1:r;if(s===void 0){n.style.transform=`translateX(${a}px)`;return}if(r===void 0){n.style.transform=`translateY(${s}px)`;return}n.style.transform=`translate(${a}px, ${s}px)`})(this.dom.point,this.pointX,this.pointY,e)}show(e){if(!this.displayed)return this.redraw(e)}hide(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)}repositionX(){const e=this.conversion.toScreen(this.data.start);this.pointX=e,this.options.rtl?this.right=e-this.props.dot.width:this.left=e-this.props.dot.width,this.repositionXY()}repositionY(){this.options.orientation.item=="top"?this.pointY=this.top:this.pointY=this.parent.height-this.top-this.height,this.repositionXY()}getWidthLeft(){return this.props.dot.width}getWidthRight(){return this.props.dot.width}}class Io extends jl{constructor(e,t,n){if(super(e,t,n),this.props={content:{width:0}},this.overflow=!1,e){if(e.start==null)throw new Error(`Property "start" missing in item ${e.id}`);if(e.end==null)throw new Error(`Property "end" missing in item ${e.id}`)}}isVisible(e){return this.cluster?!1:this.data.start<e.end&&this.data.end>e.start}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.editable.updateTime||this.editable.updateGroup,t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.box.className=this.baseClassName+t,this.dom.content.style.maxWidth="none"}}_getDomComponentsSizes(){return this.overflow=window.getComputedStyle(this.dom.frame).overflow!=="hidden",this.whiteSpace=window.getComputedStyle(this.dom.content).whiteSpace!=="nowrap",{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(e){this.props.content.width=e.content.width,this.height=e.box.height,this.dom.content.style.maxWidth="",this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDeleteButton(this.dom.box),this._repaintDragCenter(),this._repaintDragLeft(),this._repaintDragRight()}redraw(e){let t;const n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(t=this._getDomComponentsSizes.bind(this)())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(t)},this._repaintDomAdditionals.bind(this)];if(e)return n;{let r;return n.forEach(s=>{r=s()}),r}}show(e){if(!this.displayed)return this.redraw(e)}hide(){if(this.displayed){const e=this.dom.box;e.parentNode&&e.parentNode.removeChild(e),this.displayed=!1}}repositionX(e){const t=this.parent.width;let n=this.conversion.toScreen(this.data.start),r=this.conversion.toScreen(this.data.end);const s=this.data.align===void 0?this.options.align:this.data.align;let o,a;this.data.limitSize!==!1&&(e===void 0||e===!0)&&(n<-t&&(n=-t),r>2*t&&(r=2*t));const l=Math.max(Math.round((r-n)*1e3)/1e3,1);switch(this.overflow?(this.options.rtl?this.right=n:this.left=n,this.width=l+this.props.content.width,a=this.props.content.width):(this.options.rtl?this.right=n:this.left=n,this.width=l,a=Math.min(r-n,this.props.content.width)),this.options.rtl?this.dom.box.style.transform=`translateX(${this.right*-1}px)`:this.dom.box.style.transform=`translateX(${this.left}px)`,this.dom.box.style.width=`${l}px`,this.whiteSpace&&(this.height=this.dom.box.offsetHeight),s){case"left":this.dom.content.style.transform="translateX(0)";break;case"right":if(this.options.rtl){const c=Math.max(l-a,0)*-1;this.dom.content.style.transform=`translateX(${c}px)`}else this.dom.content.style.transform=`translateX(${Math.max(l-a,0)}px)`;break;case"center":if(this.options.rtl){const c=Math.max((l-a)/2,0)*-1;this.dom.content.style.transform=`translateX(${c}px)`}else this.dom.content.style.transform=`translateX(${Math.max((l-a)/2,0)}px)`;break;default:if(this.overflow?r>0?o=Math.max(-n,0):o=-a:n<0?o=-n:o=0,this.options.rtl){const c=o*-1;this.dom.content.style.transform=`translateX(${c}px)`}else this.dom.content.style.transform=`translateX(${o}px)`}}repositionY(){const e=this.options.orientation.item,t=this.dom.box;e=="top"?t.style.top=`${this.top}px`:t.style.top=`${this.parent.height-this.top-this.height}px`}_repaintDragLeft(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragLeft){const e=document.createElement("div");e.className="vis-drag-left",e.dragLeftItem=this,this.dom.box.appendChild(e),this.dom.dragLeft=e}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)}_repaintDragRight(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragRight){const e=document.createElement("div");e.className="vis-drag-right",e.dragRightItem=this,this.dom.box.appendChild(e),this.dom.dragRight=e}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)}}Io.prototype.baseClassName="vis-item vis-range";class Ho extends jl{constructor(e,t,n){if(super(e,t,n),this.props={content:{width:0}},this.overflow=!1,e){if(e.start==null)throw new Error(`Property "start" missing in item ${e.id}`);if(e.end==null)throw new Error(`Property "end" missing in item ${e.id}`)}}isVisible(e){return this.data.start<e.end&&this.data.end>e.start}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);const e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");this.dom.box.className=this.baseClassName+e}}_getDomComponentsSizes(){return this.overflow=window.getComputedStyle(this.dom.content).overflow!=="hidden",{content:{width:this.dom.content.offsetWidth}}}_updateDomComponentsSizes(e){this.props.content.width=e.content.width,this.height=0,this.dirty=!1}_repaintDomAdditionals(){}redraw(e){let t;const n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(t=this._getDomComponentsSizes.bind(this)())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(t)},this._repaintDomAdditionals.bind(this)];if(e)return n;{let r;return n.forEach(s=>{r=s()}),r}}repositionY(){let e;const t=this.options.orientation.item;if(this.data.subgroup!==void 0){const n=this.data.subgroup;this.dom.box.style.height=`${this.parent.subgroups[n].height}px`,t=="top"?this.dom.box.style.top=`${this.parent.top+this.parent.subgroups[n].top}px`:this.dom.box.style.top=`${this.parent.top+this.parent.height-this.parent.subgroups[n].top-this.parent.subgroups[n].height}px`,this.dom.box.style.bottom=""}else this.parent instanceof QW?(e=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.bottom=t=="bottom"?"0":"",this.dom.box.style.top=t=="top"?"0":""):(e=this.parent.height,this.dom.box.style.top=`${this.parent.top}px`,this.dom.box.style.bottom="");this.dom.box.style.height=`${e}px`}}Ho.prototype.baseClassName="vis-item vis-background";Ho.prototype.stack=!1;Ho.prototype.show=Io.prototype.show;Ho.prototype.hide=Io.prototype.hide;Ho.prototype.repositionX=Io.prototype.repositionX;class xce{constructor(e,t){this.container=e,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,t){this.x=parseInt(e),this.y=parseInt(t)}setText(e){e instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(e)):this.frame.innerHTML=O.xss(e)}show(e){if(e===void 0&&(e=!0),e===!0){var t=this.frame.clientHeight,n=this.frame.clientWidth,r=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth,o=0,a=0;if(this.overflowMethod=="flip"||this.overflowMethod=="none"){let l=!1,c=!0;this.overflowMethod=="flip"&&(this.y-t<this.padding&&(c=!1),this.x+n>s-this.padding&&(l=!0)),l?o=this.x-n:o=this.x,c?a=this.y-t:a=this.y}else a=this.y-t,a+t+this.padding>r&&(a=r-t-this.padding),a<this.padding&&(a=this.padding),o=this.x,o+n+this.padding>s&&(o=s-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}}class np extends jl{constructor(e,t,n){const r=Object.assign({},{fitOnDoubleClick:!0},n,{editable:!1});if(super(e,t,r),this.props={content:{width:0,height:0}},!e||e.uiItems==null)throw new Error('Property "uiItems" missing in item '+e.id);this.id=uo(),this.group=e.group,this._setupRange(),this.emitter=this.data.eventEmitter,this.range=this.data.range,this.attached=!1,this.isCluster=!0,this.data.isCluster=!0}hasItems(){return this.data.uiItems&&this.data.uiItems.length&&this.attached}setUiItems(e){this.detach(),this.data.uiItems=e,this._setupRange(),this.attach()}isVisible(e){const t=this.data.end?this.data.end-this.data.start:0,n=this.width*e.getMillisecondsPerPixel(),r=Math.max(this.data.start.getTime()+t,this.data.start.getTime()+n);return this.data.start<e.end&&r>e.start&&this.hasItems()}getData(){return{isCluster:!0,id:this.id,items:this.data.items||[],data:this.data}}redraw(e){var t,n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),(function(){this.dirty&&(t=this._getDomComponentsSizes())}).bind(this),(function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(t)}).bind(this),this._repaintDomAdditionals.bind(this)];if(e)return n;var r;return n.forEach(function(s){r=s()}),r}show(){this.displayed||this.redraw()}hide(){if(this.displayed){var e=this.dom;e.box.parentNode&&e.box.parentNode.removeChild(e.box),this.options.showStipes&&(e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot)),this.displayed=!1}}repositionX(){let e=this.conversion.toScreen(this.data.start),t=this.data.end?this.conversion.toScreen(this.data.end):0;if(t)this.repositionXWithRanges(e,t);else{let n=this.data.align===void 0?this.options.align:this.data.align;this.repositionXWithoutRanges(e,n)}this.options.showStipes&&(this.dom.line.style.display=this._isStipeVisible()?"block":"none",this.dom.dot.style.display=this._isStipeVisible()?"block":"none",this._isStipeVisible()&&this.repositionStype(e,t))}repositionStype(e,t){this.dom.line.style.display="block",this.dom.dot.style.display="block";const n=this.dom.line.offsetWidth,r=this.dom.dot.offsetWidth;if(t){const s=n+e+(t-e)/2,o=s-r/2,a=this.options.rtl?s*-1:s,l=this.options.rtl?o*-1:o;this.dom.line.style.transform=`translateX(${a}px)`,this.dom.dot.style.transform=`translateX(${l}px)`}else{const s=this.options.rtl?e*-1:e,o=this.options.rtl?(e-r/2)*-1:e-r/2;this.dom.line.style.transform=`translateX(${s}px)`,this.dom.dot.style.transform=`translateX(${o}px)`}}repositionXWithoutRanges(e,t){t=="right"?this.options.rtl?(this.right=e-this.width,this.dom.box.style.right=this.right+"px"):(this.left=e-this.width,this.dom.box.style.left=this.left+"px"):t=="left"?this.options.rtl?(this.right=e,this.dom.box.style.right=this.right+"px"):(this.left=e,this.dom.box.style.left=this.left+"px"):this.options.rtl?(this.right=e-this.width/2,this.dom.box.style.right=this.right+"px"):(this.left=e-this.width/2,this.dom.box.style.left=this.left+"px")}repositionXWithRanges(e,t){let n=Math.round(Math.max(t-e+.5,1));this.options.rtl?this.right=e:this.left=e,this.width=Math.max(n,this.minWidth||0),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=n+"px"}repositionY(){var e=this.options.orientation.item,t=this.dom.box;if(e=="top"?t.style.top=(this.top||0)+"px":t.style.top=(this.parent.height-this.top-this.height||0)+"px",this.options.showStipes){if(e=="top")this.dom.line.style.top="0",this.dom.line.style.height=this.parent.top+this.top+1+"px",this.dom.line.style.bottom="";else{var n=this.parent.itemSet.props.height,r=n-this.parent.top-this.parent.height+this.top;this.dom.line.style.top=n-r+"px",this.dom.line.style.bottom="0"}this.dom.dot.style.top=-this.dom.dot.offsetHeight/2+"px"}}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}move(){this.repositionX(),this.repositionY()}attach(){for(let e of this.data.uiItems)e.cluster=this;this.data.items=this.data.uiItems.map(e=>e.data),this.attached=!0,this.dirty=!0}detach(e=!1){if(this.hasItems()){for(let t of this.data.uiItems)delete t.cluster;this.attached=!1,e&&this.group&&(this.group.remove(this),this.group=null),this.data.items=[],this.dirty=!0}}_onDoubleClick(){this._fit()}_setupRange(){const e=this.data.uiItems.map(r=>({start:r.data.start.valueOf(),end:r.data.end?r.data.end.valueOf():r.data.start.valueOf()}));this.data.min=Math.min(...e.map(r=>Math.min(r.start,r.end||r.start))),this.data.max=Math.max(...e.map(r=>Math.max(r.start,r.end||r.start)));const n=this.data.uiItems.map(r=>r.center).reduce((r,s)=>r+s,0)/this.data.uiItems.length;this.data.uiItems.some(r=>r.data.end)?(this.data.start=new Date(this.data.min),this.data.end=new Date(this.data.max)):(this.data.start=new Date(n),this.data.end=null)}_getUiItems(){return this.data.uiItems&&this.data.uiItems.length?this.data.uiItems.filter(e=>e.cluster===this):[]}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.options.showStipes&&(this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-cluster-line",this.dom.line.style.display="none",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-cluster-dot",this.dom.dot.style.display="none"),this.options.fitOnDoubleClick&&(this.dom.box.ondblclick=np.prototype._onDoubleClick.bind(this)),this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const n=this.parent.dom.foreground;if(!n)throw new Error("Cannot redraw item: parent has no foreground container element");n.appendChild(this.dom.box)}const e=this.parent.dom.background;if(this.options.showStipes){if(!this.dom.line.parentNode){if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var t=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");t.appendChild(this.dom.dot)}}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.baseClassName+" "+(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+" vis-readonly";this.dom.box.className="vis-item "+e,this.options.showStipes&&(this.dom.line.className="vis-item vis-cluster-line "+(this.selected?" vis-selected":""),this.dom.dot.className="vis-item vis-cluster-dot "+(this.selected?" vis-selected":"")),this.data.end&&(this.dom.content.style.maxWidth="none")}}_getDomComponentsSizes(){const e={previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}};return this.options.showStipes&&(e.dot={height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},e.line={width:this.dom.line.offsetWidth}),e}_updateDomComponentsSizes(e){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.data.end?this.minWidth=e.box.width:this.width=e.box.width,this.height=e.box.height,this.options.rtl?this.dom.box.style.right=e.previous.right:this.dom.box.style.left=e.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box)}_isStipeVisible(){return this.minWidth>=this.width||!this.data.end}_getFitRange(){const e=.05*(this.data.max-this.data.min)/2;return{fitStart:this.data.min-e,fitEnd:this.data.max+e}}_fit(){if(this.emitter){const{fitStart:e,fitEnd:t}=this._getFitRange(),n={start:new Date(e),end:new Date(t),animation:!0};this.emitter.emit("fit",n)}}_getItemData(){return this.data}}np.prototype.baseClassName="vis-item vis-range vis-cluster";const Sce="__ungrouped__",Ece={UNGROUPED:Sce};class Cce{constructor(e){this.itemSet=e,this.groups={},this.cache={},this.cache[-1]=[]}createClusterItem(e,t,n){return new np(e,t,n)}setItems(e,t){this.items=e||[],this.dataChanged=!0,this.applyOnChangedLevel=!1,t&&t.applyOnChangedLevel&&(this.applyOnChangedLevel=t.applyOnChangedLevel)}updateData(){this.dataChanged=!0,this.applyOnChangedLevel=!1}getClusters(e,t,n){let{maxItems:r,clusterCriteria:s}=typeof n=="boolean"?{}:n;s||(s=()=>!0),r=r||1;let o=-1,a=2,l=0;if(t>0){if(t>=1)return[];o=Math.abs(Math.round(Math.log(100/t)/Math.log(a))),l=Math.abs(Math.pow(a,o))}if(this.dataChanged){const u=o!=this.cacheLevel;(this.applyOnChangedLevel?u:!0)&&(this._dropLevelsCache(),this._filterData())}this.cacheLevel=o;let c=this.cache[o];if(!c){c=[];for(let u in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,u))continue;const h=this.groups[u],d=h.length;let f=0;for(;f<d;){let p=h[f],m=1,g=f-1;for(;g>=0&&p.center-h[g].center<l/2;)!h[g].cluster&&s(p.data,h[g].data)&&m++,g--;let v=f+1;for(;v<h.length&&h[v].center-p.center<l/2;)s(p.data,h[v].data)&&m++,v++;let y=c.length-1;for(;y>=0&&p.center-c[y].center<l;)p.group==c[y].group&&s(p.data,c[y].data)&&m++,y--;if(m>r){const w=m-r+1,b=[];let x=f;for(;b.length<w&&x<h.length;)s(h[f].data,h[x].data)&&b.push(h[x]),x++;const C=this.itemSet.getGroupId(p.data),E=this.itemSet.groups[C]||this.itemSet.groups[Ece.UNGROUPED];let S=this._getClusterForItems(b,E,e,n);c.push(S),f+=w}else delete p.cluster,f+=1}}this.cache[o]=c}return c}_filterData(){const e={};this.groups=e;for(const t of Object.values(this.items)){const n=t.parent?t.parent.groupId:"";let r=e[n];r||(r=[],e[n]=r),r.push(t),t.data.start&&(t.data.end?t.center=(t.data.start.valueOf()+t.data.end.valueOf())/2:t.center=t.data.start.valueOf())}for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&e[t].sort((n,r)=>n.center-r.center);this.dataChanged=!1}_getClusterForItems(e,t,n,r){const s=(n||[]).map(f=>({cluster:f,itemsIds:new Set(f.data.uiItems.map(p=>p.id))}));let o;if(s.length){for(let f of s)if(f.itemsIds.size===e.length&&e.every(p=>f.itemsIds.has(p.id))){o=f.cluster;break}}if(o)return o.setUiItems(e),o.group!==t&&(o.group&&o.group.remove(o),t&&(t.add(o),o.group=t)),o;let a=r.titleTemplate||"";const l={toScreen:this.itemSet.body.util.toScreen,toTime:this.itemSet.body.util.toTime},c=a.replace(/{count}/,e.length),u='<div title="'+c+'">'+e.length+"</div>",h=Object.assign({},r,this.itemSet.options),d={content:u,title:c,group:t,uiItems:e,eventEmitter:this.itemSet.body.emitter,range:this.itemSet.body.range};return o=this.createClusterItem(d,l,h),t&&(t.add(o),o.group=t),o.attach(),o}_dropLevelsCache(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]}}const la="__ungrouped__",Jr="__background__";class Do extends Ps{constructor(e,t){super(),this.body=e,this.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap(r,s){const o=s.order;s.order=r.order,r.order=o},groupOrder:"order",selectable:!0,multiselect:!1,longSelectPressTime:251,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:Oo.snap,onDropObjectOnItem(r,s,o){o(s)},onAdd(r,s){s(r)},onUpdate(r,s){s(r)},onMove(r,s){s(r)},onRemove(r,s){s(r)},onMoving(r,s){s(r)},onAddGroup(r,s){s(r)},onMoveGroup(r,s){s(r)},onRemoveGroup(r,s){s(r)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:500},tooltipOnItemUpdateTime:!1},this.options=O.extend({},this.defaultOptions),this.options.rtl=t.rtl,this.options.onTimeout=t.onTimeout,this.conversion={toScreen:e.util.toScreen,toTime:e.util.toTime},this.dom={},this.props={},this.hammer=null;const n=this;this.itemsData=null,this.groupsData=null,this.itemsSettingTime=null,this.initialItemSetDrawn=!1,this.userContinueNotBail=null,this.sequentialSelection=!1,this.itemListeners={add(r,s){n._onAdd(s.items),n.options.cluster&&n.clusterGenerator.setItems(n.items,{applyOnChangedLevel:!1}),n.redraw()},update(r,s){n._onUpdate(s.items),n.options.cluster&&n.clusterGenerator.setItems(n.items,{applyOnChangedLevel:!1}),n.redraw()},remove(r,s){n._onRemove(s.items),n.options.cluster&&n.clusterGenerator.setItems(n.items,{applyOnChangedLevel:!1}),n.redraw()}},this.groupListeners={add(r,s,o){if(n._onAddGroups(s.items),n.groupsData&&n.groupsData.length>0){const a=n.groupsData.getDataSet();a.get().forEach(l=>{if(l.nestedGroups){l.showNested!=!1&&(l.showNested=!0);let c=[];l.nestedGroups.forEach(u=>{const h=a.get(u);h&&(h.nestedInGroup=l.id,l.showNested==!1&&(h.visible=!1),c=c.concat(h))}),a.update(c,o)}})}},update(r,s){n._onUpdateGroups(s.items)},remove(r,s){n._onRemoveGroups(s.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.popup=null,this.popupTimer=null,this.touchParams={},this.groupTouchParams={group:null,isDragging:!1},this._create(),this.setOptions(t),this.clusters=[]}_create(){const e=document.createElement("div");e.className="vis-itemset",e["vis-itemset"]=this,this.dom.frame=e;const t=document.createElement("div");t.className="vis-background",e.appendChild(t),this.dom.background=t;const n=document.createElement("div");n.className="vis-foreground",e.appendChild(n),this.dom.foreground=n;const r=document.createElement("div");r.className="vis-axis",this.dom.axis=r;const s=document.createElement("div");s.className="vis-labelset",this.dom.labelSet=s,this._updateUngrouped();const o=new QW(Jr,null,this);o.show(),this.groups[Jr]=o,this.hammer=new ai(this.body.dom.centerContainer),this.hammer.on("hammer.input",a=>{a.isFirst&&this._onTouch(a)}),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:ai.ALL}),this.hammer.get("press").set({time:1e4}),this.hammer.on("tap",this._onSelectItem.bind(this)),this.hammer.on("press",this._onMultiSelectItem.bind(this)),this.hammer.get("press").set({time:1e4}),this.hammer.on("doubletap",this._onAddItem.bind(this)),this.options.rtl?this.groupHammer=new ai(this.body.dom.rightContainer):this.groupHammer=new ai(this.body.dom.leftContainer),this.groupHammer.on("tap",this._onGroupClick.bind(this)),this.groupHammer.on("panstart",this._onGroupDragStart.bind(this)),this.groupHammer.on("panmove",this._onGroupDrag.bind(this)),this.groupHammer.on("panend",this._onGroupDragEnd.bind(this)),this.groupHammer.get("pan").set({threshold:5,direction:ai.DIRECTION_VERTICAL}),this.body.dom.centerContainer.addEventListener("mouseover",this._onMouseOver.bind(this)),this.body.dom.centerContainer.addEventListener("mouseout",this._onMouseOut.bind(this)),this.body.dom.centerContainer.addEventListener("mousemove",this._onMouseMove.bind(this)),this.body.dom.centerContainer.addEventListener("contextmenu",this._onDragEnd.bind(this)),this.body.dom.centerContainer.addEventListener("mousewheel",this._onMouseWheel.bind(this)),this.show()}setOptions(e){if(e){const t=["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","sequentialSelection","multiselectPerGroup","longSelectPressTime","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime","groupHeightMode","onTimeout"];O.selectiveExtend(t,this.options,e),"itemsAlwaysDraggable"in e&&(typeof e.itemsAlwaysDraggable=="boolean"?(this.options.itemsAlwaysDraggable.item=e.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):typeof e.itemsAlwaysDraggable=="object"&&(O.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,e.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"sequentialSelection"in e&&typeof e.sequentialSelection=="boolean"&&(this.options.sequentialSelection=e.sequentialSelection),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation.item=e.orientation==="top"?"top":"bottom":typeof e.orientation=="object"&&"item"in e.orientation&&(this.options.orientation.item=e.orientation.item)),"margin"in e&&(typeof e.margin=="number"?(this.options.margin.axis=e.margin,this.options.margin.item.horizontal=e.margin,this.options.margin.item.vertical=e.margin):typeof e.margin=="object"&&(O.selectiveExtend(["axis"],this.options.margin,e.margin),"item"in e.margin&&(typeof e.margin.item=="number"?(this.options.margin.item.horizontal=e.margin.item,this.options.margin.item.vertical=e.margin.item):typeof e.margin.item=="object"&&O.selectiveExtend(["horizontal","vertical"],this.options.margin.item,e.margin.item)))),["locale","locales"].forEach(r=>{r in e&&(this.options[r]=e[r])}),"editable"in e&&(typeof e.editable=="boolean"?(this.options.editable.updateTime=e.editable,this.options.editable.updateGroup=e.editable,this.options.editable.add=e.editable,this.options.editable.remove=e.editable,this.options.editable.overrideItems=!1):typeof e.editable=="object"&&O.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,e.editable)),"groupEditable"in e&&(typeof e.groupEditable=="boolean"?(this.options.groupEditable.order=e.groupEditable,this.options.groupEditable.add=e.groupEditable,this.options.groupEditable.remove=e.groupEditable):typeof e.groupEditable=="object"&&O.selectiveExtend(["order","add","remove"],this.options.groupEditable,e.groupEditable));const n=r=>{const s=e[r];if(s){if(typeof s!="function")throw new Error(`option ${r} must be a function ${r}(item, callback)`);this.options[r]=s}};["onDropObjectOnItem","onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"].forEach(n),e.cluster?(Object.assign(this.options,{cluster:e.cluster}),this.clusterGenerator||(this.clusterGenerator=new Cce(this)),this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.clusterGenerator?(this._detachAllClusters(),this.clusters=[],this.clusterGenerator=null,this.options.cluster=void 0,this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.markDirty()}}markDirty(e){this.groupIds=[],e&&(e.refreshItems&&O.forEach(this.items,t=>{t.dirty=!0,t.displayed&&t.redraw()}),e.restackGroups&&O.forEach(this.groups,(t,n)=>{n!==Jr&&(t.stackDirty=!0)}))}destroy(){this.clearPopupTimer(),this.hide(),this.setItems(null),this.setGroups(null),this.hammer&&this.hammer.destroy(),this.groupHammer&&this.groupHammer.destroy(),this.hammer=null,this.body=null,this.conversion=null}hide(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)}show(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))}setPopupTimer(e){if(this.clearPopupTimer(),e){const t=this.options.tooltip.delay||typeof this.options.tooltip.delay=="number"?this.options.tooltip.delay:500;this.popupTimer=setTimeout(function(){e.show()},t)}}clearPopupTimer(){this.popupTimer!=null&&(clearTimeout(this.popupTimer),this.popupTimer=null)}setSelection(e){e==null&&(e=[]),Array.isArray(e)||(e=[e]);const t=this.selection.filter(n=>e.indexOf(n)===-1);for(let n of t){const r=this.getItemById(n);r&&r.unselect()}this.selection=[...e];for(let n of e){const r=this.getItemById(n);r&&r.select()}}getSelection(){return this.selection.concat([])}getVisibleItems(){const e=this.body.range.getRange();let t,n;this.options.rtl?(t=this.body.util.toScreen(e.start),n=this.body.util.toScreen(e.end)):(n=this.body.util.toScreen(e.start),t=this.body.util.toScreen(e.end));const r=[];for(const s in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,s))continue;const o=this.groups[s],a=o.isVisible?o.visibleItems:[];for(const l of a)this.options.rtl?l.right<n&&l.right+l.width>t&&r.push(l.id):l.left<t&&l.left+l.width>n&&r.push(l.id)}return r}getItemsAtCurrentTime(e){let t,n;this.options.rtl?(t=this.body.util.toScreen(e),n=this.body.util.toScreen(e)):(n=this.body.util.toScreen(e),t=this.body.util.toScreen(e));const r=[];for(const s in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,s))continue;const o=this.groups[s],a=o.isVisible?o.visibleItems:[];for(const l of a)this.options.rtl?l.right<n&&l.right+l.width>t&&r.push(l.id):l.left<t&&l.left+l.width>n&&r.push(l.id)}return r}getVisibleGroups(){const e=[];for(const t in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,t))continue;this.groups[t].isVisible&&e.push(t)}return e}getItemById(e){return this.items[e]||this.clusters.find(t=>t.id===e)}_deselect(e){const t=this.selection;for(let n=0,r=t.length;n<r;n++)if(t[n]==e){t.splice(n,1);break}}redraw(){const e=this.options.margin,t=this.body.range,n=O.option.asSize,r=this.options,s=r.orientation.item;let o=!1;const a=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,a.className="vis-itemset",this.options.cluster&&this._clusterItems(),o=this._orderGroups()||o;const l=t.end-t.start,c=l!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth,u=t.start!=this.lastRangeStart,h=r.stack!=this.lastStack,d=r.stackSubgroups!=this.lastStackSubgroups,f=c||u||h||d;this.lastVisibleInterval=l,this.lastRangeStart=t.start,this.lastStack=r.stack,this.lastStackSubgroups=r.stackSubgroups,this.props.lastWidth=this.props.width;const p=this._firstGroup(),m={item:e.item,axis:e.axis},g={item:e.item,axis:e.item.vertical/2};let v=0;const y=e.axis+e.item.vertical;this.groups[Jr].redraw(t,g,f);const w={};let b=0;if(O.forEach(this.groups,(C,E)=>{if(E===Jr)return;const S=C==p?m:g,R=!0;w[E]=C.redraw(t,S,f,R),b=w[E].length}),b>0){const C={};for(let E=0;E<b;E++)O.forEach(w,(S,R)=>{C[R]=S[E]()});O.forEach(this.groups,(E,S)=>{if(S===Jr)return;o=C[S]||o,v+=E.height}),v=Math.max(v,y)}return v=Math.max(v,y),a.style.height=n(v),this.props.width=a.offsetWidth,this.props.height=v,this.dom.axis.style.top=n(s=="top"?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.initialItemSetDrawn=!0,o=this._isResized()||o,o}_firstGroup(){const e=this.options.orientation.item=="top"?0:this.groupIds.length-1,t=this.groupIds[e];return this.groups[t]||this.groups[la]||null}_updateUngrouped(){let e=this.groups[la],t,n;if(this.groupsData){if(e){e.dispose(),delete this.groups[la];for(n in this.items){if(!Object.prototype.hasOwnProperty.call(this.items,n))continue;t=this.items[n],t.parent&&t.parent.remove(t);const r=this.getGroupId(t.data),s=this.groups[r];s&&s.add(t)||t.hide()}}}else if(!e){e=new Z0(null,null,this),this.groups[la]=e;for(n in this.items)Object.prototype.hasOwnProperty.call(this.items,n)&&(t=this.items[n],e.add(t));e.show()}}getLabelSet(){return this.dom.labelSet}setItems(e){this.itemsSettingTime=new Date;const t=this;let n;const r=this.itemsData;if(!e)this.itemsData=null;else if(Fr(e))this.itemsData=dl(e);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(r&&(O.forEach(this.itemListeners,(s,o)=>{r.off(o,s)}),r.dispose(),n=r.getIds(),this._onRemove(n)),this.itemsData){const s=this.id;O.forEach(this.itemListeners,(o,a)=>{t.itemsData.on(a,o,s)}),n=this.itemsData.getIds(),this._onAdd(n),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})}getItems(){return this.itemsData!=null?this.itemsData.rawDS:null}setGroups(e){const t=this;let n;if(this.groupsData&&(O.forEach(this.groupListeners,(r,s)=>{t.groupsData.off(s,r)}),n=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(n)),!e)this.groupsData=null;else if(Fr(e))this.groupsData=e;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){const r=this.groupsData.getDataSet();r.get().forEach(o=>{o.nestedGroups&&o.nestedGroups.forEach(a=>{const l=r.get(a);l.nestedInGroup=o.id,o.showNested==!1&&(l.visible=!1),r.update(l)})});const s=this.id;O.forEach(this.groupListeners,(o,a)=>{t.groupsData.on(a,o,s)}),n=this.groupsData.getIds(),this._onAddGroups(n)}this._updateUngrouped(),this._order(),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems(),this.markDirty({refreshItems:!0,restackGroups:!0})),this.body.emitter.emit("_change",{queue:!0})}getGroups(){return this.groupsData}removeItem(e){const t=this.itemsData.get(e);t&&this.options.onRemove(t,n=>{n&&this.itemsData.remove(e)})}_getType(e){return e.type||this.options.type||(e.end?"range":"box")}getGroupId(e){return this._getType(e)=="background"&&e.group==null?Jr:this.groupsData?e.group:la}_onUpdate(e){const t=this;e.forEach(n=>{const r=t.itemsData.get(n);let s=t.items[n];const o=r?t._getType(r):null,a=Do.types[o];let l;if(s&&(!a||!(s instanceof a)?(l=s.selected,t._removeItem(s),s=null):t._updateItem(s,r)),!s&&r)if(a)s=new a(r,t.conversion,t.options),s.id=n,t._addItem(s),l&&(this.selection.push(n),s.select());else throw new TypeError(`Unknown item type "${o}"`)}),this._order(),this.options.cluster&&(this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this._clusterItems()),this.body.emitter.emit("_change",{queue:!0})}_onRemove(e){let t=0;const n=this;e.forEach(r=>{const s=n.items[r];s&&(t++,n._removeItem(s))}),t&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))}_order(){O.forEach(this.groups,e=>{e.order()})}_onUpdateGroups(e){this._onAddGroups(e)}_onAddGroups(e){const t=this;e.forEach(n=>{const r=t.groupsData.get(n);let s=t.groups[n];if(s)s.setData(r);else{if(n==la||n==Jr)throw new Error(`Illegal group id. ${n} is a reserved id.`);const o=Object.create(t.options);O.extend(o,{height:null}),s=new Z0(n,r,t),t.groups[n]=s;for(const a in t.items){if(!Object.prototype.hasOwnProperty.call(t.items,a))continue;const l=t.items[a];l.data.group==n&&s.add(l)}s.order(),s.show()}}),this.body.emitter.emit("_change",{queue:!0})}_onRemoveGroups(e){e.forEach(t=>{const n=this.groups[t];n&&(n.dispose(),delete this.groups[t])}),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems()),this.markDirty({restackGroups:!!this.options.cluster}),this.body.emitter.emit("_change",{queue:!0})}_orderGroups(){if(this.groupsData){let e=this.groupsData.getIds({order:this.options.groupOrder});e=this._orderNestedGroups(e);const t=!O.equalArray(e,this.groupIds);if(t){const n=this.groups;e.forEach(r=>{n[r].hide()}),e.forEach(r=>{n[r].show()}),this.groupIds=e}return t}else return!1}_orderNestedGroups(e){function t(r,s){let o=[];return s.forEach(a=>{if(o.push(a),r.groupsData.get(a).nestedGroups){const c=r.groupsData.get({filter(u){return u.nestedInGroup==a},order:r.options.groupOrder}).map(u=>u.id);o=o.concat(t(r,c))}}),o}const n=e.filter(r=>!this.groupsData.get(r).nestedInGroup);return t(this,n)}_addItem(e){this.items[e.id]=e;const t=this.getGroupId(e.data),n=this.groups[t];n?n&&n.data&&n.data.showNested&&(e.groupShowing=!0):e.groupShowing=!1,n&&n.add(e)}_updateItem(e,t){e.setData(t);const n=this.getGroupId(e.data),r=this.groups[n];r?r&&r.data&&r.data.showNested&&(e.groupShowing=!0):e.groupShowing=!1}_removeItem(e){e.hide(),delete this.items[e.id];const t=this.selection.indexOf(e.id);t!=-1&&this.selection.splice(t,1),e.parent&&e.parent.remove(e),this.popup!=null&&this.popup.hide()}_constructByEndArray(e){const t=[];for(let n=0;n<e.length;n++)e[n]instanceof Io&&t.push(e[n]);return t}_onTouch(e){this.touchParams.item=this.itemFromTarget(e),this.touchParams.dragLeftItem=e.target.dragLeftItem||!1,this.touchParams.dragRightItem=e.target.dragRightItem||!1,this.touchParams.itemProps=null}_getGroupIndex(e){for(let t=0;t<this.groupIds.length;t++)if(e==this.groupIds[t])return t}_onDragStart(e){if(this.touchParams.itemIsDragging)return;const t=this.touchParams.item||null,n=this;let r;if(t&&(t.selected||this.options.itemsAlwaysDraggable.item)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup||t.editable!=null&&!t.editable.updateTime&&!t.editable.updateGroup&&!this.options.editable.overrideItems)return;const s=this.touchParams.dragLeftItem,o=this.touchParams.dragRightItem;if(this.touchParams.itemIsDragging=!0,this.touchParams.selectedItem=t,s)r={item:s,initialX:e.center.x,dragLeft:!0,data:this._cloneItemData(t.data)},this.touchParams.itemProps=[r];else if(o)r={item:o,initialX:e.center.x,dragRight:!0,data:this._cloneItemData(t.data)},this.touchParams.itemProps=[r];else if(this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey))this._onDragStartAddItem(e);else{this.groupIds.length<1&&this.redraw();const a=this._getGroupIndex(t.data.group),l=this.options.itemsAlwaysDraggable.item&&!t.selected?[t.id]:this.getSelection();this.touchParams.itemProps=l.map(c=>{const u=n.items[c],h=n._getGroupIndex(u.data.group);return{item:u,initialX:e.center.x,groupOffset:a-h,data:this._cloneItemData(u.data)}})}e.stopPropagation()}else this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey)&&this._onDragStartAddItem(e)}_onDragStartAddItem(e){const t=this.options.snap||null,n=this.dom.frame.getBoundingClientRect(),r=this.options.rtl?n.right-e.center.x+10:e.center.x-n.left-10,s=this.body.util.toTime(r),o=this.body.util.getScale(),a=this.body.util.getStep(),l=t?t(s,o,a):s,u={type:"range",start:l,end:l,content:"new item"},h=uo();u[this.itemsData.idProp]=h;const d=this.groupFromTarget(e);d&&(u.group=d.groupId);const f=new Io(u,this.conversion,this.options);f.id=h,f.data=this._cloneItemData(u),this._addItem(f),this.touchParams.selectedItem=f;const p={item:f,initialX:e.center.x,data:f.data};this.options.rtl?p.dragLeft=!0:p.dragRight=!0,this.touchParams.itemProps=[p],e.stopPropagation()}_onDrag(e){if(this.popup!=null&&this.options.showTooltips&&!this.popup.hidden){const t=this.body.dom.centerContainer,n=t.getBoundingClientRect();this.popup.setPosition(e.center.x-n.left+t.offsetLeft,e.center.y-n.top+t.offsetTop),this.popup.show()}if(this.touchParams.itemProps){e.stopPropagation();const t=this,n=this.options.snap||null,r=this.body.dom.root.offsetLeft,s=this.options.rtl?r+this.body.domProps.right.width:r+this.body.domProps.left.width,o=this.body.util.getScale(),a=this.body.util.getStep(),l=this.touchParams.selectedItem,c=(this.options.editable.overrideItems||l.editable==null)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&l.editable!=null&&l.editable.updateGroup;let u=null;if(c&&l&&l.data.group!=null){const h=t.groupFromTarget(e);h&&(u=this._getGroupIndex(h.groupId))}this.touchParams.itemProps.forEach(h=>{const d=t.body.util.toTime(e.center.x-s),f=t.body.util.toTime(h.initialX-s);let p,m,g,v,y;this.options.rtl?p=-(d-f):p=d-f;let w=this._cloneItemData(h.item.data);if(h.item.editable!=null&&!h.item.editable.updateTime&&!h.item.editable.updateGroup&&!t.options.editable.overrideItems)return;if((this.options.editable.overrideItems||l.editable==null)&&this.options.editable.updateTime||!this.options.editable.overrideItems&&l.editable!=null&&l.editable.updateTime){if(h.dragLeft)this.options.rtl?w.end!=null&&(g=O.convert(h.data.end,"Date"),y=new Date(g.valueOf()+p),w.end=n?n(y,o,a):y):w.start!=null&&(m=O.convert(h.data.start,"Date"),v=new Date(m.valueOf()+p),w.start=n?n(v,o,a):v);else if(h.dragRight)this.options.rtl?w.start!=null&&(m=O.convert(h.data.start,"Date"),v=new Date(m.valueOf()+p),w.start=n?n(v,o,a):v):w.end!=null&&(g=O.convert(h.data.end,"Date"),y=new Date(g.valueOf()+p),w.end=n?n(y,o,a):y);else if(w.start!=null)if(m=O.convert(h.data.start,"Date").valueOf(),v=new Date(m+p),w.end!=null){g=O.convert(h.data.end,"Date");const x=g.valueOf()-m.valueOf();w.start=n?n(v,o,a):v,w.end=new Date(w.start.valueOf()+x)}else w.start=n?n(v,o,a):v}if(c&&!h.dragLeft&&!h.dragRight&&u!=null&&w.group!=null){let x=u-h.groupOffset;x=Math.max(0,x),x=Math.min(t.groupIds.length-1,x),w.group=t.groupIds[x]}w=this._cloneItemData(w),t.options.onMoving(w,x=>{x&&h.item.setData(this._cloneItemData(x,"Date"))})}),this.body.emitter.emit("_change")}}_moveToGroup(e,t){const n=this.groups[t];if(n&&n.groupId!=e.data.group){const r=e.parent;r.remove(e),r.order(),e.data.group=n.groupId,n.add(e),n.order()}}_onDragEnd(e){if(this.touchParams.itemIsDragging=!1,this.touchParams.itemProps){e.stopPropagation();const t=this,n=this.touchParams.itemProps;this.touchParams.itemProps=null,n.forEach(r=>{const s=r.item.id;if(!(t.itemsData.get(s)!=null))t.options.onAdd(r.item.data,a=>{t._removeItem(r.item),a&&t.itemsData.add(a),t.body.emitter.emit("_change")});else{const a=this._cloneItemData(r.item.data);t.options.onMove(a,l=>{l?(l[this.itemsData.idProp]=s,this.itemsData.update(l)):(r.item.setData(r.data),t.body.emitter.emit("_change"))})}})}}_onGroupClick(e){const t=this.groupFromTarget(e);setTimeout(()=>{this.toggleGroupShowNested(t)},1)}toggleGroupShowNested(e,t=void 0){if(!e||!e.nestedGroups)return;const n=this.groupsData.getDataSet();t!=null?e.showNested=!!t:e.showNested=!e.showNested;let r=n.get(e.groupId);r.showNested=e.showNested;let s=e.nestedGroups,o=s;for(;o.length>0;){let c=o;o=[];for(let u=0;u<c.length;u++){let h=n.get(c[u]);h.nestedGroups&&(o=o.concat(h.nestedGroups))}o.length>0&&(s=s.concat(o))}var a;if(r.showNested){var l=n.get(r.nestedGroups);for(let c=0;c<l.length;c++){let u=l[c];u.nestedGroups&&u.nestedGroups.length>0&&(u.showNested==null||u.showNested==!0)&&l.push(...n.get(u.nestedGroups))}a=l.map(function(c){return c.visible==null&&(c.visible=!0),c.visible=!!r.showNested,c})}else a=n.get(s).map(function(c){return c.visible==null&&(c.visible=!0),c.visible=!!r.showNested,c});n.update(a.concat(r)),r.showNested?(O.removeClassName(e.dom.label,"collapsed"),O.addClassName(e.dom.label,"expanded")):(O.removeClassName(e.dom.label,"expanded"),O.addClassName(e.dom.label,"collapsed"))}toggleGroupDragClassName(e){e.dom.label.classList.toggle("vis-group-is-dragging"),e.dom.foreground.classList.toggle("vis-group-is-dragging")}_onGroupDragStart(e){this.groupTouchParams.isDragging||this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(e),this.groupTouchParams.group&&(e.stopPropagation(),this.groupTouchParams.isDragging=!0,this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))}_onGroupDrag(e){if(this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();const t=this.groupsData.getDataSet(),n=this.groupFromTarget(e);if(n&&n.height!=this.groupTouchParams.group.height){const r=n.top<this.groupTouchParams.group.top,s=e.center?e.center.y:e.clientY,o=n.dom.foreground.getBoundingClientRect(),a=this.groupTouchParams.group.height;if(r){if(o.top+a<s)return}else{const l=n.height;if(o.top+l-a>s)return}}if(n&&n!=this.groupTouchParams.group){const r=t.get(n.groupId),s=t.get(this.groupTouchParams.group.groupId);s&&r&&(this.options.groupOrderSwap(s,r,t),t.update(s),t.update(r));const o=t.getIds({order:this.options.groupOrder});if(!O.equalArray(o,this.groupTouchParams.originalOrder)){const a=this.groupTouchParams.originalOrder,l=this.groupTouchParams.group.groupId,c=Math.min(a.length,o.length);let u=0,h=0,d=0;for(;u<c;){for(;u+h<c&&u+d<c&&o[u+h]==a[u+d];)u++;if(u+h>=c)break;if(o[u+h]==l)h=1;else if(a[u+d]==l)d=1;else{const f=o.indexOf(a[u+d]),p=t.get(o[u+h]),m=t.get(a[u+d]);this.options.groupOrderSwap(p,m,t),t.update(p),t.update(m);const g=o[u+h];o[u+h]=a[u+d],o[f]=g,u++}}}}}}_onGroupDragEnd(e){if(this.groupTouchParams.isDragging=!1,this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();const t=this,n=t.groupTouchParams.group.groupId,r=t.groupsData.getDataSet(),s=O.extend({},r.get(n));t.options.onMoveGroup(s,o=>{if(o)o[r._idProp]=n,r.update(o);else{const a=r.getIds({order:t.options.groupOrder});if(!O.equalArray(a,t.groupTouchParams.originalOrder)){const l=t.groupTouchParams.originalOrder,c=Math.min(l.length,a.length);let u=0;for(;u<c;){for(;u<c&&a[u]==l[u];)u++;if(u>=c)break;const h=a.indexOf(l[u]),d=r.get(a[u]),f=r.get(l[u]);t.options.groupOrderSwap(d,f,r),r.update(d),r.update(f);const p=a[u];a[u]=l[u],a[h]=p,u++}}}}),t.body.emitter.emit("groupDragged",{groupId:n}),this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.group=null}}_onSelectItem(e){if(!this.options.selectable)return;const t=e.srcEvent&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey),n=e.srcEvent&&e.srcEvent.shiftKey;if(t||n){this._onMultiSelectItem(e);return}const r=this.getSelection(),s=this.itemFromTarget(e),o=s&&s.selectable?[s.id]:[];this.setSelection(o);const a=this.getSelection();(a.length>0||r.length>0)&&this.body.emitter.emit("select",{items:a,event:e})}_onMouseOver(e){const t=this.itemFromTarget(e);if(!t)return;const n=this.itemFromRelatedTarget(e);if(t===n)return;const r=t.getTitle();if(this.options.showTooltips&&r){this.popup==null&&(this.popup=new xce(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")),this.popup.setText(r);const s=this.body.dom.centerContainer,o=s.getBoundingClientRect();this.popup.setPosition(e.clientX-o.left+s.offsetLeft,e.clientY-o.top+s.offsetTop),this.setPopupTimer(this.popup)}else this.clearPopupTimer(),this.popup!=null&&this.popup.hide();this.body.emitter.emit("itemover",{item:t.id,event:e})}_onMouseOut(e){const t=this.itemFromTarget(e);if(!t)return;const n=this.itemFromRelatedTarget(e);t!==n&&(this.clearPopupTimer(),this.popup!=null&&this.popup.hide(),this.body.emitter.emit("itemout",{item:t.id,event:e}))}_onMouseMove(e){if(this.itemFromTarget(e)&&(this.popupTimer!=null&&this.setPopupTimer(this.popup),this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden)){const n=this.body.dom.centerContainer,r=n.getBoundingClientRect();this.popup.setPosition(e.clientX-r.left+n.offsetLeft,e.clientY-r.top+n.offsetTop),this.popup.show()}}_onMouseWheel(e){this.touchParams.itemIsDragging&&this._onDragEnd(e)}_onUpdateItem(e){if(!this.options.selectable||!this.options.editable.updateTime&&!this.options.editable.updateGroup)return;const t=this;if(e){const n=t.itemsData.get(e.id);this.options.onUpdate(n,r=>{r&&t.itemsData.update(r)})}}_onDropObjectOnItem(e){const t=this.itemFromTarget(e),n=JSON.parse(e.dataTransfer.getData("text"));this.options.onDropObjectOnItem(n,t)}_onAddItem(e){if(!this.options.selectable||!this.options.editable.add)return;const t=this,n=this.options.snap||null,r=this.dom.frame.getBoundingClientRect(),s=this.options.rtl?r.right-e.center.x:e.center.x-r.left,o=this.body.util.toTime(s),a=this.body.util.getScale(),l=this.body.util.getStep();let c,u;e.type=="drop"?(u=JSON.parse(e.dataTransfer.getData("text")),u.content=u.content?u.content:"new item",u.start=u.start?u.start:n?n(o,a,l):o,u.type=u.type||"box",u[this.itemsData.idProp]=u.id||uo(),u.type=="range"&&!u.end&&(c=this.body.util.toTime(s+this.props.width/5),u.end=n?n(c,a,l):c)):(u={start:n?n(o,a,l):o,content:"new item"},u[this.itemsData.idProp]=uo(),this.options.type==="range"&&(c=this.body.util.toTime(s+this.props.width/5),u.end=n?n(c,a,l):c));const h=this.groupFromTarget(e);h&&(u.group=h.groupId),u=this._cloneItemData(u),this.options.onAdd(u,d=>{d&&(t.itemsData.add(d),e.type=="drop"&&t.setSelection([d.id]))})}_onMultiSelectItem(e){if(!this.options.selectable)return;const t=this.itemFromTarget(e);if(t){let n=this.options.multiselect?this.getSelection():[];if((e.srcEvent&&e.srcEvent.shiftKey||!1||this.options.sequentialSelection)&&this.options.multiselect){const o=this.itemsData.get(t.id).group;let a;this.options.multiselectPerGroup&&n.length>0&&(a=this.itemsData.get(n[0]).group),(!this.options.multiselectPerGroup||a==null||a==o)&&n.push(t.id);const l=Do._getItemRange(this.itemsData.get(n));if(!this.options.multiselectPerGroup||a==o){n=[];for(const c in this.items){if(!Object.prototype.hasOwnProperty.call(this.items,c))continue;const u=this.items[c],h=u.data.start,d=u.data.end!==void 0?u.data.end:h;h>=l.min&&d<=l.max&&(!this.options.multiselectPerGroup||a==this.itemsData.get(u.id).group)&&!(u instanceof Ho)&&n.push(u.id)}}}else{const o=n.indexOf(t.id);o==-1?n.push(t.id):n.splice(o,1)}const s=n.filter(o=>this.getItemById(o).selectable);this.setSelection(s),this.body.emitter.emit("select",{items:this.getSelection(),event:e})}}static _getItemRange(e){let t=null,n=null;return e.forEach(r=>{(n==null||r.start<n)&&(n=r.start),r.end!=null?(t==null||r.end>t)&&(t=r.end):(t==null||r.start>t)&&(t=r.start)}),{min:n,max:t}}itemFromElement(e){let t=e;for(;t;){if(Object.prototype.hasOwnProperty.call(t,"vis-item"))return t["vis-item"];t=t.parentNode}return null}itemFromTarget(e){return this.itemFromElement(e.target)}itemFromRelatedTarget(e){return this.itemFromElement(e.relatedTarget)}groupFromTarget(e){const t=e.center?e.center.y:e.clientY;let n=this.groupIds;n.length<=0&&this.groupsData&&(n=this.groupsData.getIds({order:this.options.groupOrder}));for(let r=0;r<n.length;r++){const s=n[r],o=this.groups[s],a=o.dom.foreground,l=a.getBoundingClientRect();if(t>=l.top&&t<l.top+a.offsetHeight)return o;if(this.options.orientation.item==="top"){if(r===this.groupIds.length-1&&t>l.top)return o}else if(r===0&&t<l.top+a.offset)return o}return null}static itemSetFromTarget(e){let t=e.target;for(;t;){if(Object.prototype.hasOwnProperty.call(t,"vis-itemset"))return t["vis-itemset"];t=t.parentNode}return null}_cloneItemData(e,t){const n=O.extend({},e);return t||(t=this.itemsData.type),n.start!=null&&(n.start=O.convert(n.start,t&&t.start||"Date")),n.end!=null&&(n.end=O.convert(n.end,t&&t.end||"Date")),n}_clusterItems(){if(!this.options.cluster)return;const{scale:e}=this.body.range.conversion(this.body.domProps.center.width),t=this.clusterGenerator.getClusters(this.clusters,e,this.options.cluster);if(this.clusters!=t){if(this._detachAllClusters(),t){for(let n of t)n.attach();this.clusters=t}this._updateClusters(t)}}_detachAllClusters(){if(this.options.cluster&&this.clusters&&this.clusters.length)for(let e of this.clusters)e.detach()}_updateClusters(e){if(this.clusters&&this.clusters.length){const t=new Set(e.map(s=>s.id)),n=this.clusters.filter(s=>!t.has(s.id));let r=!1;for(let s of n){const o=this.selection.indexOf(s.id);o!==-1&&(s.unselect(),this.selection.splice(o,1),r=!0)}if(r){const s=this.getSelection();this.body.emitter.emit("select",{items:s,event})}}this.clusters=e||[]}}Do.types={background:Ho,box:bce,range:Io,point:wce};Do.prototype._onAdd=Do.prototype._onUpdate;let tc=!1,iA,Nd="background: #FFeeee; color: #dd0000";class ut{constructor(){}static validate(e,t,n){tc=!1,iA=t;let r=t;return n!==void 0&&(r=t[n]),ut.parse(e,r,[]),tc}static parse(e,t,n){for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&ut.check(r,e,t,n)}static check(e,t,n,r){if(n[e]===void 0&&n.__any__===void 0){ut.getSuggestion(e,n,r);return}let s=e,o=!0;n[e]===void 0&&n.__any__!==void 0&&(s="__any__",o=ut.getType(t[e])==="object");let a=n[s];o&&a.__type__!==void 0&&(a=a.__type__),ut.checkFields(e,t,n,s,a,r)}static checkFields(e,t,n,r,s,o){let a=function(u){console.log("%c"+u+ut.printLocation(o,e),Nd)},l=ut.getType(t[e]),c=s[l];c!==void 0?ut.getType(c)==="array"&&c.indexOf(t[e])===-1?(a('Invalid option detected in "'+e+'". Allowed values are:'+ut.print(c)+' not "'+t[e]+'". '),tc=!0):l==="object"&&r!=="__any__"&&(o=O.copyAndExtendArray(o,e),ut.parse(t[e],n[r],o)):s.any===void 0&&(a('Invalid type received for "'+e+'". Expected: '+ut.print(Object.keys(s))+". Received ["+l+'] "'+t[e]+'"'),tc=!0)}static getType(e){var t=typeof e;return t==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Array.isArray(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":t==="number"?"number":t==="boolean"?"boolean":t==="string"?"string":t===void 0?"undefined":t}static getSuggestion(e,t,n){let r=ut.findInOptions(e,t,n,!1),s=ut.findInOptions(e,iA,[],!0),o=8,a=4,l;r.indexMatch!==void 0?l=" in "+ut.printLocation(r.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+r.indexMatch+`"?

`:s.distance<=a&&r.distance>s.distance?l=" in "+ut.printLocation(r.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+ut.printLocation(s.path,s.closestMatch,""):r.distance<=o?l='. Did you mean "'+r.closestMatch+'"?'+ut.printLocation(r.path,e):l=". Did you mean one of these: "+ut.print(Object.keys(t))+ut.printLocation(n,e),console.log('%cUnknown option detected: "'+e+'"'+l,Nd),tc=!0}static findInOptions(e,t,n,r=!1){let s=1e9,o="",a=[],l=e.toLowerCase(),c;for(let u in t){if(!Object.prototype.hasOwnProperty.call(t,u))continue;let h;if(t[u].__type__!==void 0&&r===!0){let d=ut.findInOptions(e,t[u],O.copyAndExtendArray(n,u));s>d.distance&&(o=d.closestMatch,a=d.path,s=d.distance,c=d.indexMatch)}else u.toLowerCase().indexOf(l)!==-1&&(c=u),h=ut.levenshteinDistance(e,u),s>h&&(o=u,a=O.copyArray(n),s=h)}return{closestMatch:o,path:a,distance:s,indexMatch:c}}static printLocation(e,t,n=`Problem value found at: 
`){let r=`

`+n+`options = {
`;for(let s=0;s<e.length;s++){for(let o=0;o<s+1;o++)r+="  ";r+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)r+="  ";r+=t+`
`;for(let s=0;s<e.length+1;s++){for(let o=0;o<e.length-s;o++)r+="  ";r+=`}
`}return r+`

`}static print(e){return JSON.stringify(e).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}static levenshteinDistance(e,t){if(e.length===0)return t.length;if(t.length===0)return e.length;var n=[],r;for(r=0;r<=t.length;r++)n[r]=[r];var s;for(s=0;s<=e.length;s++)n[0][s]=s;for(r=1;r<=t.length;r++)for(s=1;s<=e.length;s++)t.charAt(r-1)==e.charAt(s-1)?n[r][s]=n[r-1][s-1]:n[r][s]=Math.min(n[r-1][s-1]+1,Math.min(n[r][s-1]+1,n[r-1][s]+1));return n[t.length][e.length]}}let de="string",ue="boolean",nt="number",nA="array",ca="date",St="object",Tce="dom",ua="moment",rA="any",Rce={configure:{enabled:{boolean:ue},filter:{boolean:ue,function:"function"},container:{dom:Tce},__type__:{object:St,boolean:ue,function:"function"}},align:{string:de},alignCurrentTime:{string:de,undefined:"undefined"},rtl:{boolean:ue,undefined:"undefined"},rollingMode:{follow:{boolean:ue},offset:{number:nt,undefined:"undefined"},__type__:{object:St}},onTimeout:{timeoutMs:{number:nt},callback:{function:"function"},__type__:{object:St}},verticalScroll:{boolean:ue,undefined:"undefined"},horizontalScroll:{boolean:ue,undefined:"undefined"},horizontalScrollKey:{string:de,undefined:"undefined"},horizontalScrollInvert:{boolean:ue,undefined:"undefined"},autoResize:{boolean:ue},throttleRedraw:{number:nt},clickToUse:{boolean:ue},dataAttributes:{string:de,array:nA},editable:{add:{boolean:ue,undefined:"undefined"},remove:{boolean:ue,undefined:"undefined"},updateGroup:{boolean:ue,undefined:"undefined"},updateTime:{boolean:ue,undefined:"undefined"},overrideItems:{boolean:ue,undefined:"undefined"},__type__:{boolean:ue,object:St}},end:{number:nt,date:ca,string:de,moment:ua},format:{minorLabels:{millisecond:{string:de,undefined:"undefined"},second:{string:de,undefined:"undefined"},minute:{string:de,undefined:"undefined"},hour:{string:de,undefined:"undefined"},weekday:{string:de,undefined:"undefined"},day:{string:de,undefined:"undefined"},week:{string:de,undefined:"undefined"},month:{string:de,undefined:"undefined"},year:{string:de,undefined:"undefined"},__type__:{object:St,function:"function"}},majorLabels:{millisecond:{string:de,undefined:"undefined"},second:{string:de,undefined:"undefined"},minute:{string:de,undefined:"undefined"},hour:{string:de,undefined:"undefined"},weekday:{string:de,undefined:"undefined"},day:{string:de,undefined:"undefined"},week:{string:de,undefined:"undefined"},month:{string:de,undefined:"undefined"},year:{string:de,undefined:"undefined"},__type__:{object:St,function:"function"}},__type__:{object:St}},moment:{function:"function"},groupHeightMode:{string:de},groupOrder:{string:de,function:"function"},groupEditable:{add:{boolean:ue,undefined:"undefined"},remove:{boolean:ue,undefined:"undefined"},order:{boolean:ue,undefined:"undefined"},__type__:{boolean:ue,object:St}},groupOrderSwap:{function:"function"},height:{string:de,number:nt},hiddenDates:{start:{date:ca,number:nt,string:de,moment:ua},end:{date:ca,number:nt,string:de,moment:ua},repeat:{string:de},__type__:{object:St,array:nA}},itemsAlwaysDraggable:{item:{boolean:ue,undefined:"undefined"},range:{boolean:ue,undefined:"undefined"},__type__:{boolean:ue,object:St}},limitSize:{boolean:ue},locale:{string:de},locales:{__any__:{any:rA},__type__:{object:St}},longSelectPressTime:{number:nt},margin:{axis:{number:nt},item:{horizontal:{number:nt,undefined:"undefined"},vertical:{number:nt,undefined:"undefined"},__type__:{object:St,number:nt}},__type__:{object:St,number:nt}},max:{date:ca,number:nt,string:de,moment:ua},maxHeight:{number:nt,string:de},maxMinorChars:{number:nt},min:{date:ca,number:nt,string:de,moment:ua},minHeight:{number:nt,string:de},moveable:{boolean:ue},multiselect:{boolean:ue},multiselectPerGroup:{boolean:ue},onAdd:{function:"function"},onDropObjectOnItem:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},onInitialDrawComplete:{function:"function"},order:{function:"function"},orientation:{axis:{string:de,undefined:"undefined"},item:{string:de,undefined:"undefined"},__type__:{string:de,object:St}},selectable:{boolean:ue},sequentialSelection:{boolean:ue},showCurrentTime:{boolean:ue},showMajorLabels:{boolean:ue},showMinorLabels:{boolean:ue},showWeekScale:{boolean:ue},stack:{boolean:ue},stackSubgroups:{boolean:ue},cluster:{maxItems:{number:nt,undefined:"undefined"},titleTemplate:{string:de,undefined:"undefined"},clusterCriteria:{function:"function",undefined:"undefined"},showStipes:{boolean:ue,undefined:"undefined"},fitOnDoubleClick:{boolean:ue,undefined:"undefined"},__type__:{boolean:ue,object:St}},snap:{function:"function",null:"null"},start:{date:ca,number:nt,string:de,moment:ua},template:{function:"function"},loadingScreenTemplate:{function:"function"},groupTemplate:{function:"function"},visibleFrameTemplate:{string:de,function:"function"},showTooltips:{boolean:ue},tooltip:{followMouse:{boolean:ue},overflowMethod:{string:["cap","flip","none"]},delay:{number:nt},template:{function:"function"},__type__:{object:St}},tooltipOnItemUpdateTime:{template:{function:"function"},__type__:{boolean:ue,object:St}},timeAxis:{scale:{string:de,undefined:"undefined"},step:{number:nt,undefined:"undefined"},__type__:{object:St}},type:{string:de},width:{string:de,number:nt},preferZoom:{boolean:ue},zoomable:{boolean:ue},zoomKey:{string:["ctrlKey","altKey","shiftKey","metaKey",""]},zoomFriction:{number:nt},zoomMax:{number:nt},zoomMin:{number:nt},xss:{disabled:{boolean:ue},filterOptions:{__any__:{any:rA},__type__:{object:St}},__type__:{object:St}},__type__:{object:St}},Oce={global:{align:["center","left","right"],alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],direction:!1,autoResize:!0,clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupHeightMode:["auto","fixed","fitItems"],groupsDraggable:!1,height:"",locale:"",longSelectPressTime:251,margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},preferZoom:!1,selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,stackSubgroups:!0,cluster:!1,start:"",showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:[500,0,99999,100]},tooltipOnItemUpdateTime:!1,type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","shiftKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],xss:{disabled:!1}}};var Ice={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};class Dce{constructor(e=1){this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return Ice[e]}setColor(e,t=!0){if(e==="none")return;let n;var r=this._isColorString(e);if(r!==void 0&&(e=r),O.isString(e)===!0){if(O.isValidRGB(e)===!0){let s=e.substr(4).substr(0,e.length-5).split(",");n={r:s[0],g:s[1],b:s[2],a:1}}else if(O.isValidRGBA(e)===!0){let s=e.substr(5).substr(0,e.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(O.isValidHex(e)===!0){let s=O.hexToRGB(e);n={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){let s=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:s}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(e));this._setColor(n,t)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(e=!0){e===!0&&(this.previousColor=O.extend({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e,t=!0){t===!0&&(this.initialColor=O.extend({},e)),this.color=e;let n=O.RGBToHSV(e.r,e.g,e.b),r=2*Math.PI,s=this.r*n.s,o=this.centerCoordinates.x+s*Math.sin(r*n.h),a=this.centerCoordinates.y+s*Math.cos(r*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){let t=O.RGBToHSV(this.color.r,this.color.g,this.color.b);t.v=e/100;let n=O.HSVToRGB(t.h,t.s,t.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(e=this.color){let t=O.RGBToHSV(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let r=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,r,s),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-t.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),n.fill(),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){let t=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{let t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(t)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var e=this;this.opacityRange.onchange=function(){e._setOpacity(this.value)},this.opacityRange.oninput=function(){e._setOpacity(this.value)},this.brightnessRange.onchange=function(){e._setBrightness(this.value)},this.brightnessRange.oninput=function(){e._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new ai(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),qW(this.hammer,e=>{this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){let e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let t=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,t,n);let r,s,o,a;this.centerCoordinates={x:t*.5,y:n*.5},this.r=.49*t;let l=2*Math.PI/360,c=1/360,u=1/this.r,h;for(o=0;o<360;o++)for(a=0;a<this.r;a++)r=this.centerCoordinates.x+a*Math.sin(l*o),s=this.centerCoordinates.y+a*Math.cos(l*o),h=O.HSVToRGB(o*c,a*u,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(r-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,t,n)}this.generated=!0}_moveSelector(e){let t=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-t.left,r=e.center.y-t.top,s=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,l=r-s,c=Math.atan2(a,l),u=.98*Math.min(Math.sqrt(a*a+l*l),o),h=Math.cos(c)*u+s,d=Math.sin(c)*u+o;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=d-.5*this.colorPickerSelector.clientWidth+"px";let f=c/(2*Math.PI);f=f<0?f+1:f;let p=u/this.r,m=O.RGBToHSV(this.color.r,this.color.g,this.color.b);m.h=f,m.s=p;let g=O.HSVToRGB(m.h,m.s,m.v);g.a=this.color.a,this.color=g,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}class JW{constructor(e,t,n,r=1){this.parent=e,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},O.extend(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new Dce(r),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let t=!0;if(typeof e=="string")this.options.filter=e;else if(Array.isArray(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),e.filter!==void 0&&(this.options.filter=e.filter),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(t=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,t=e):typeof e=="function"&&(this.options.filter=e,t=!0);this.options.filter===!1&&(t=!1),this.options.enabled=t}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];let e=this.options.filter,t=0,n=!1;for(let r in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,r)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(r,[]),n=n||this._handleObject(this.configureOptions[r],[r],!0)):(e===!0||e.indexOf(r)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,t>0&&this._makeItem([]),this._makeHeader(r),this._handleObject(this.configureOptions[r],[r])),t++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(var e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let t=this.moduleOptions;for(let n=0;n<e.length;n++)if(t[e[n]]!==void 0)t=t[e[n]];else{t=void 0;break}return t}_makeItem(e,...t){if(this.allowCreation===!0){let n=document.createElement("div");return n.className="vis-configuration vis-config-item vis-config-s"+e.length,t.forEach(r=>{n.appendChild(r)}),this.domElements.push(n),this.domElements.length}return 0}_makeHeader(e){let t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerHTML=O.xss(e),this._makeItem([],t)}_makeLabel(e,t,n=!1){let r=document.createElement("div");return r.className="vis-configuration vis-config-label vis-config-s"+t.length,n===!0?r.innerHTML=O.xss("<i><b>"+e+":</b></i>"):r.innerHTML=O.xss(e+":"),r}_makeDropdown(e,t,n){let r=document.createElement("select");r.className="vis-configuration vis-config-select";let s=0;t!==void 0&&e.indexOf(t)!==-1&&(s=e.indexOf(t));for(let l=0;l<e.length;l++){let c=document.createElement("option");c.value=e[l],l===s&&(c.selected="selected"),c.innerHTML=e[l],r.appendChild(c)}let o=this;r.onchange=function(){o._update(this.value,n)};let a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,r)}_makeRange(e,t,n){let r=e[0],s=e[1],o=e[2],a=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=o}catch{}l.step=a;let c="",u=0;if(t!==void 0){let m=1.2;t<0&&t*m<s?(l.min=Math.ceil(t*m),u=l.min,c="range increased"):t/m<s&&(l.min=Math.ceil(t/m),u=l.min,c="range increased"),t*m>o&&o!==1&&(l.max=Math.ceil(t*m),u=l.max,c="range increased"),l.value=t}else l.value=r;let h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=Number(l.value);var d=this;l.onchange=function(){h.value=this.value,d._update(Number(this.value),n)},l.oninput=function(){h.value=this.value};let f=this._makeLabel(n[n.length-1],n),p=this._makeItem(n,f,l,h);c!==""&&this.popupHistory[p]!==u&&(this.popupHistory[p]=u,this._setupPopup(c,p))}_makeButton(){if(this.options.showButton===!0){let e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerHTML="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,t){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){let n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerHTML=O.xss(e),n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:t}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){let t=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=t.left+"px",this.popupDiv.html.style.top=t.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(()=>{this._removePopup()},1800)}}_makeCheckbox(e,t,n){var r=document.createElement("input");r.type="checkbox",r.className="vis-configuration vis-config-checkbox",r.checked=e,t!==void 0&&(r.checked=t,t!==e&&(typeof e=="object"?t!==e.enabled&&this.changedOptions.push({path:n,value:t}):this.changedOptions.push({path:n,value:t})));let s=this;r.onchange=function(){s._update(this.checked,n)};let o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,r)}_makeTextInput(e,t,n){var r=document.createElement("input");r.type="text",r.className="vis-configuration vis-config-text",r.value=t,t!==e&&this.changedOptions.push({path:n,value:t});let s=this;r.onchange=function(){s._update(this.value,n)};let o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,r)}_makeColorField(e,t,n){let r=e[1],s=document.createElement("div");t=t===void 0?r:t,t!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=t):s.className="vis-configuration vis-config-colorBlock none",t=t===void 0?r:t,s.onclick=()=>{this._showColorPicker(t,s,n)};let o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}_showColorPicker(e,t,n){t.onclick=function(){},this.colorPicker.insertTo(t),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(r=>{let s="rgba("+r.r+","+r.g+","+r.b+","+r.a+")";t.style.backgroundColor=s,this._update(s,n)}),this.colorPicker.setCloseCallback(()=>{t.onclick=()=>{this._showColorPicker(e,t,n)}})}_handleObject(e,t=[],n=!1){let r=!1,s=this.options.filter,o=!1;for(let a in e){if(!Object.prototype.hasOwnProperty.call(e,a))continue;r=!0;let l=e[a],c=O.copyAndExtendArray(t,a);if(typeof s=="function"&&(r=s(a,t),r===!1&&!Array.isArray(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,r=this._handleObject(l,c,!0),this.allowCreation=n===!1)),r!==!1){o=!0;let u=this._getValue(c);if(Array.isArray(l))this._handleArray(l,u,c);else if(typeof l=="string")this._makeTextInput(l,u,c);else if(typeof l=="boolean")this._makeCheckbox(l,u,c);else if(l instanceof Object){let h=!0;if(t.indexOf("physics")!==-1&&this.moduleOptions.physics.solver!==a&&(h=!1),h===!0)if(l.enabled!==void 0){let d=O.copyAndExtendArray(c,"enabled"),f=this._getValue(d);if(f===!0){let p=this._makeLabel(a,c,!0);this._makeItem(c,p),o=this._handleObject(l,c)||o}else this._makeCheckbox(l,f,c)}else{let d=this._makeLabel(a,c,!0);this._makeItem(c,d),o=this._handleObject(l,c)||o}}else console.error("dont know how to handle",l,a,c)}}return o}_handleArray(e,t,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,t,n),e[1]!==t&&this.changedOptions.push({path:n,value:t})):typeof e[0]=="string"?(this._makeDropdown(e,t,n),e[0]!==t&&this.changedOptions.push({path:n,value:t})):typeof e[0]=="number"&&(this._makeRange(e,t,n),e[0]!==t&&this.changedOptions.push({path:n,value:Number(t)}))}_update(e,t){let n=this._constructOptions(e,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,t,n={}){let r=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<t.length;s++)t[s]!=="global"&&(r[t[s]]===void 0&&(r[t[s]]={}),s!==t.length-1?r=r[t[s]]:r[t[s]]=e);return n}_printOptions(){let e=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+JSON.stringify(e,null,2)+"</pre>"}getOptions(){let e={};for(var t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,e);return e}}class WS extends Ya{constructor(e,t,n,r){if(super(),this.initTime=new Date,this.itemsDone=!1,!(this instanceof WS))throw new SyntaxError("Constructor must be called with the new operator");if(!(Array.isArray(n)||Fr(n))&&n instanceof Object){const l=r;r=n,n=l}r&&r.throttleRedraw&&console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');const s=this;if(this.defaultOptions={autoResize:!0,longSelectPressTime:251,orientation:{axis:"bottom",item:"bottom"},moment:wi},this.options=O.deepExtend({},this.defaultOptions),r&&O.setupXSSProtection(r.xss),this._create(e),!r||r&&typeof r.rtl>"u"){this.dom.root.style.visibility="hidden";let l,c=this.dom.root;for(;!l&&c;)l=window.getComputedStyle(c,null).direction,c=c.parentElement;this.options.rtl=l&&l.toLowerCase()=="rtl"}else this.options.rtl=r.rtl;r&&(r.rollingMode&&(this.options.rollingMode=r.rollingMode),r.onInitialDrawComplete&&(this.options.onInitialDrawComplete=r.onInitialDrawComplete),r.onTimeout&&(this.options.onTimeout=r.onTimeout),r.loadingScreenTemplate&&(this.options.loadingScreenTemplate=r.loadingScreenTemplate));const o=document.createElement("div");if(this.options.loadingScreenTemplate){const l=this.options.loadingScreenTemplate.bind(this),c=l(this.dom.loadingScreen);c instanceof Object&&!(c instanceof Element)?l(o):c instanceof Element?(o.innerHTML="",o.appendChild(c)):c!=null&&(o.innerHTML=O.xss(c))}this.dom.loadingScreen.appendChild(o),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale(){return s.timeAxis.step.scale},getStep(){return s.timeAxis.step.step},toScreen:s._toScreen.bind(s),toGlobalScreen:s._toGlobalScreen.bind(s),toTime:s._toTime.bind(s),toGlobalTime:s._toGlobalTime.bind(s)}},this.range=new ep(this.body,this.options),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new Ad(this.body,this.options),this.timeAxis2=null,this.components.push(this.timeAxis),this.currentTime=new ZW(this.body,this.options),this.components.push(this.currentTime),this.itemSet=new Do(this.body,this.options),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null;function a(l,c){s.hasListeners(l)&&s.emit(l,s.getEventProperties(c))}this.dom.root.onclick=l=>a("click",l),this.dom.root.ondblclick=l=>a("doubleClick",l),this.dom.root.oncontextmenu=l=>a("contextmenu",l),this.dom.root.onmouseover=l=>a("mouseOver",l),window.PointerEvent?(this.dom.root.onpointerdown=l=>a("mouseDown",l),this.dom.root.onpointermove=l=>a("mouseMove",l),this.dom.root.onpointerup=l=>a("mouseUp",l)):(this.dom.root.onmousemove=l=>a("mouseMove",l),this.dom.root.onmousedown=l=>a("mouseDown",l),this.dom.root.onmouseup=l=>a("mouseUp",l)),this.initialFitDone=!1,this.on("changed",()=>{if(s.itemsData!=null){if(!s.initialFitDone&&!s.options.rollingMode)if(s.initialFitDone=!0,s.options.start!=null||s.options.end!=null){if(s.options.start==null||s.options.end==null)var l=s.getItemRange();const c=s.options.start!=null?s.options.start:l.min,u=s.options.end!=null?s.options.end:l.max;s.setWindow(c,u,{animation:!1})}else s.fit({animation:!1});!s.initialDrawDone&&(s.initialRangeChangeDone||!s.options.start&&!s.options.end||s.options.rollingMode)&&(s.initialDrawDone=!0,s.itemSet.initialDrawDone=!0,s.dom.root.style.visibility="visible",s.dom.loadingScreen.parentNode.removeChild(s.dom.loadingScreen),s.options.onInitialDrawComplete&&setTimeout(()=>s.options.onInitialDrawComplete(),0))}}),this.on("destroyTimeline",()=>{s.destroy()}),r&&this.setOptions(r),this.body.emitter.on("fit",l=>{this._onFit(l),this.redraw()}),n&&this.setGroups(n),t&&this.setItems(t),this._redraw()}_createConfigurator(){return new JW(this,this.dom.container,Oce)}redraw(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()}setOptions(e){if(ut.validate(e,Rce)===!0&&console.log("%cErrors have been found in the supplied options object.",Nd),Ya.prototype.setOptions.call(this,e),"type"in e&&e.type!==this.options.type){this.options.type=e.type;const n=this.itemsData;if(n){const r=this.getSelection();this.setItems(null),this.setItems(n.rawDS),this.setSelection(r)}}}setItems(e){this.itemsDone=!1;let t;e?Fr(e)?t=dl(e):t=dl(new hl(e)):t=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=t,this.itemSet&&this.itemSet.setItems(t!=null?t.rawDS:null)}setGroups(e){let t;const n=r=>r.visible!==!1;e?(Array.isArray(e)&&(e=new hl(e)),t=new DS(e,{filter:n})):t=null,this.groupsData!=null&&typeof this.groupsData.setData=="function"&&this.groupsData.setData(null),this.groupsData=t,this.itemSet.setGroups(t)}setData(e){e&&e.groups&&this.setGroups(e.groups),e&&e.items&&this.setItems(e.items)}setSelection(e,t){this.itemSet&&this.itemSet.setSelection(e),t&&t.focus&&this.focus(e,t)}getSelection(){return this.itemSet&&this.itemSet.getSelection()||[]}focus(e,t){if(!this.itemsData||e==null)return;const n=Array.isArray(e)?e:[e],r=this.itemsData.get(n);let s=null,o=null;if(r.forEach(a=>{const l=a.start.valueOf(),c="end"in a?a.end.valueOf():a.start.valueOf();(s===null||l<s)&&(s=l),(o===null||c>o)&&(o=c)}),s!==null&&o!==null){const a=this,l=this.itemSet.items[n[0]];let c=this._getScrollTop()*-1,u=null;const h=(y,w,b)=>{const x=sA(a,l);if(x===!1||(u||(u=x),u.itemTop==x.itemTop&&!u.shouldScroll))return;u.itemTop!=x.itemTop&&x.shouldScroll&&(u=x,c=a._getScrollTop()*-1);const C=c,E=u.scrollOffset,S=b?E:C+(E-C)*y;a._setScrollTop(-S),w||a._redraw()},d=()=>{const y=sA(a,l);y.shouldScroll&&y.itemTop!=u.itemTop&&(a._setScrollTop(-y.scrollOffset),a._redraw())},f=()=>{d(),setTimeout(d,100)},p=t&&t.zoom!==void 0?t.zoom:!0,m=(s+o)/2,g=p?(o-s)*1.1:Math.max(this.range.end-this.range.start,(o-s)*1.1),v=t&&t.animation!==void 0?t.animation:!0;v||(u={shouldScroll:!1,scrollOffset:-1,itemTop:-1}),this.range.stopRolling(),this.range.setRange(m-g/2,m+g/2,{animation:v},f,h)}}fit(e,t){const n=e&&e.animation!==void 0?e.animation:!0;let r;this.itemsData.length===1&&this.itemsData.get()[0].end===void 0?(r=this.getDataRange(),this.moveTo(r.min.valueOf(),{animation:n},t)):(r=this.getItemRange(),this.range.setRange(r.min,r.max,{animation:n},t))}getItemRange(){const e=this.getDataRange();let t=e.min!==null?e.min.valueOf():null,n=e.max!==null?e.max.valueOf():null,r=null,s=null;if(t!=null&&n!=null){let o=n-t;o<=0&&(o=10);const a=o/this.props.center.width,l={};let c=0;if(O.forEach(this.itemSet.items,(h,d)=>{h.groupShowing&&(l[d]=h.redraw(!0),c=l[d].length)}),c>0)for(let h=0;h<c;h++)O.forEach(l,d=>{d[h]()});if(O.forEach(this.itemSet.items,h=>{const d=Db(h),f=Pb(h);let p,m;this.options.rtl?(p=d-(h.getWidthRight()+10)*a,m=f+(h.getWidthLeft()+10)*a):(p=d-(h.getWidthLeft()+10)*a,m=f+(h.getWidthRight()+10)*a),p<t&&(t=p,r=h),m>n&&(n=m,s=h)}),r&&s){const h=r.getWidthLeft()+10,d=s.getWidthRight()+10,f=this.props.center.width-h-d;f>0&&(this.options.rtl?(t=Db(r)-d*o/f,n=Pb(s)+h*o/f):(t=Db(r)-h*o/f,n=Pb(s)+d*o/f))}}return{min:t!=null?new Date(t):null,max:n!=null?new Date(n):null}}getDataRange(){let e=null,t=null;return this.itemsData&&this.itemsData.forEach(n=>{const r=O.convert(n.start,"Date").valueOf(),s=O.convert(n.end!=null?n.end:n.start,"Date").valueOf();(e===null||r<e)&&(e=r),(t===null||s>t)&&(t=s)}),{min:e!=null?new Date(e):null,max:t!=null?new Date(t):null}}getEventProperties(e){const t=e.center?e.center.x:e.clientX,n=e.center?e.center.y:e.clientY,r=this.dom.centerContainer.getBoundingClientRect(),s=this.options.rtl?r.right-t:t-r.left,o=n-r.top,a=this.itemSet.itemFromTarget(e),l=this.itemSet.groupFromTarget(e),c=$S.customTimeFromTarget(e),u=this.itemSet.options.snap||null,h=this.body.util.getScale(),d=this.body.util.getStep(),f=this._toTime(s),p=u?u(f,h,d):f,m=O.getTarget(e);let g=null;return a!=null?g="item":c!=null?g="custom-time":O.hasParent(m,this.timeAxis.dom.foreground)||this.timeAxis2&&O.hasParent(m,this.timeAxis2.dom.foreground)?g="axis":O.hasParent(m,this.itemSet.dom.labelSet)?g="group-label":O.hasParent(m,this.currentTime.bar)?g="current-time":O.hasParent(m,this.dom.center)&&(g="background"),{event:e,item:a?a.id:null,isCluster:a?!!a.isCluster:!1,items:a?a.items||[]:null,group:l?l.groupId:null,customTime:c?c.options.id:null,what:g,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:s,y:o,time:f,snappedTime:p}}toggleRollingMode(){this.range.rolling?this.range.stopRolling():(this.options.rollingMode==null&&this.setOptions(this.options),this.range.startRolling())}_redraw(){Ya.prototype._redraw.call(this)}_onFit(e){const{start:t,end:n,animation:r}=e;n?this.range.setRange(t,n,{animation:r}):this.moveTo(t.valueOf(),{animation:r})}}function Db(i){return O.convert(i.data.start,"Date").valueOf()}function Pb(i){const e=i.data.end!=null?i.data.end:i.data.start;return O.convert(e,"Date").valueOf()}function sA(i,e){if(!e.parent)return!1;const t=i.options.rtl?i.props.rightContainer.height:i.props.leftContainer.height,n=i.props.center.height,r=e.parent;let s=r.top,o=!0;const a=i.timeAxis.options.orientation.axis,l=()=>a=="bottom"?r.height-e.top-e.height:e.top,c=i._getScrollTop()*-1,u=s+l(),h=e.height;return u<c?s+t<=s+l()+h&&(s+=l()-i.itemSet.options.margin.item.vertical):u+h>c+t?s+=l()+h-t+i.itemSet.options.margin.item.vertical:o=!1,s=Math.min(s,n-t),{shouldScroll:o,scrollOffset:s,itemTop:u}}function ns(i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(i[e].redundant=i[e].used,i[e].used=[])}function Bi(i){for(var e in i){if(!Object.prototype.hasOwnProperty.call(i,e))continue;const n=i[e];for(var t=0;t<n.redundant.length;t++)n.redundant[t].parentNode.removeChild(n.redundant[t]);n.redundant=[]}}function Pce(i){ns(i),Bi(i),ns(i)}function pn(i,e,t){var n;return Object.prototype.hasOwnProperty.call(e,i)?e[i].redundant.length>0?(n=e[i].redundant[0],e[i].redundant.shift()):(n=document.createElementNS("http://www.w3.org/2000/svg",i),t.appendChild(n)):(n=document.createElementNS("http://www.w3.org/2000/svg",i),e[i]={used:[],redundant:[]},t.appendChild(n)),e[i].used.push(n),n}function kb(i,e,t,n){var r;return Object.prototype.hasOwnProperty.call(e,i)?e[i].redundant.length>0?(r=e[i].redundant[0],e[i].redundant.shift()):(r=document.createElement(i),t.appendChild(r)):(r=document.createElement(i),e[i]={used:[],redundant:[]},t.appendChild(r)),e[i].used.push(r),r}function pl(i,e,t,n,r,s){var o;if(t.style=="circle"?(o=pn("circle",n,r),o.setAttributeNS(null,"cx",i),o.setAttributeNS(null,"cy",e),o.setAttributeNS(null,"r",.5*t.size)):(o=pn("rect",n,r),o.setAttributeNS(null,"x",i-.5*t.size),o.setAttributeNS(null,"y",e-.5*t.size),o.setAttributeNS(null,"width",t.size),o.setAttributeNS(null,"height",t.size)),t.styles!==void 0&&o.setAttributeNS(null,"style",t.styles),o.setAttributeNS(null,"class",t.className+" vis-point"),s){var a=pn("text",n,r);s.xOffset&&(i=i+s.xOffset),s.yOffset&&(e=e+s.yOffset),s.content&&(a.textContent=s.content),s.className&&a.setAttributeNS(null,"class",s.className+" vis-label"),a.setAttributeNS(null,"x",i),a.setAttributeNS(null,"y",e)}return o}function Q0(i,e,t,n,r,s,o,a){if(n!=0){n<0&&(n*=-1,e-=n);var l=pn("rect",s,o);l.setAttributeNS(null,"x",i-.5*t),l.setAttributeNS(null,"y",e),l.setAttributeNS(null,"width",t),l.setAttributeNS(null,"height",n),l.setAttributeNS(null,"class",r),a&&l.setAttributeNS(null,"style",a)}}function kce(){try{return navigator?navigator.languages&&navigator.languages.length?navigator.languages:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en":"en"}catch{return"en"}}class Mce{constructor(e,t,n,r,s,o,a=!1,l=!1){if(this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=s,this.majorCharHeight=o,this._start=e,this._end=t,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=a,this.autoScaleStart=n,this.autoScaleEnd=r,this.formattingFunction=l,n||r){const c=this,u=h=>{const d=h-h%(c.magnitudefactor*c.minorSteps[c.minorStepIdx]);return h%(c.magnitudefactor*c.minorSteps[c.minorStepIdx])>.5*(c.magnitudefactor*c.minorSteps[c.minorStepIdx])?d+c.magnitudefactor*c.minorSteps[c.minorStepIdx]:d};n&&(this._start-=this.magnitudefactor*2*this.minorSteps[this.minorStepIdx],this._start=u(this._start)),r&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=u(this._end)),this.determineScale()}}setCharHeight(e){this.majorCharHeight=e}setHeight(e){this.containerHeight=e}determineScale(){const e=this._end-this._start;this.scale=this.containerHeight/e;const t=this.majorCharHeight/this.scale,n=e>0?Math.round(Math.log(e)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,n);let r=0;n<0&&(r=n);let s=!1;for(let o=r;Math.abs(o)<=Math.abs(n);o++){this.magnitudefactor=Math.pow(10,o);for(let a=0;a<this.minorSteps.length;a++)if(this.magnitudefactor*this.minorSteps[a]>=t){s=!0,this.minorStepIdx=a;break}if(s===!0)break}}is_major(e){return e%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])===0}getStep(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]}getFirstMajor(){const e=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(e-this._start%e)%e)}formatValue(e){let t=e.toPrecision(5);return typeof this.formattingFunction=="function"&&(t=this.formattingFunction(e)),typeof t=="number"?`${t}`:typeof t=="string"?t:e.toPrecision(5)}getLines(){const e=[],t=this.getStep(),n=(t-this._start%t)%t;for(let r=this._start+n;this._end-r>1e-5;r+=t)r!=this._start&&e.push({major:this.is_major(r),y:this.convertValue(r),val:this.formatValue(r)});return e}followScale(e){const t=this.minorStepIdx,n=this._start,r=this._end,s=this,o=()=>{s.magnitudefactor*=2},a=()=>{s.magnitudefactor/=2};e.minorStepIdx<=1&&this.minorStepIdx<=1||e.minorStepIdx>1&&this.minorStepIdx>1||(e.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,t==2||o(),o()):(this.minorStepIdx=2,t==1||a(),a()));const l=e.convertValue(0),c=e.getStep()*e.scale;let u=!1,h=0;for(;!u&&h++<5;){this.scale=c/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);const d=this.containerHeight/this.scale;this._start=n,this._end=this._start+d;const f=this._end*this.scale,p=this.magnitudefactor*this.majorSteps[this.minorStepIdx],m=this.getFirstMajor()-e.getFirstMajor();if(this.zeroAlign){const g=l-f;this._end+=g/this.scale,this._start=this._end-d}else this.autoScaleStart?(this._start-=m/this.scale,this._end=this._start+d):(this._start+=p-m/this.scale,this._end=this._start+d);if(!this.autoScaleEnd&&this._end>r+1e-5){a(),u=!1;continue}if(!this.autoScaleStart&&this._start<n-1e-5)if(this.zeroAlign&&n>=0)console.warn("Can't adhere to given 'min' range, due to zeroalign");else{a(),u=!1;continue}if(this.autoScaleStart&&this.autoScaleEnd&&d<r-n){o(),u=!1;continue}u=!0}}convertValue(e){return this.containerHeight-(e-this._start)*this.scale}screenToValue(e){return(this.containerHeight-e)/this.scale+this._start}}class oA extends Ps{constructor(e,t,n,r){super(),this.id=uo(),this.body=e,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format(o){return`${parseFloat(o.toPrecision(3))}`},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format(o){return`${parseFloat(o.toPrecision(3))}`},title:{text:void 0,style:void 0}}},this.linegraphOptions=r,this.linegraphSVG=n,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.scale=void 0,this.range={start:0,end:0},this.options=O.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(t),this.width=Number(`${this.options.width}`.replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.getBoundingClientRect().height,this.hidden=!1,this.stepPixels=25,this.zeroCrossing=-1,this.amountOfSteps=-1,this.lineOffset=0,this.master=!0,this.masterAxis=null,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create(),this.scale==null&&this._redrawLabels(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};const s=this;this.body.emitter.on("verticalDrag",()=>{s.dom.lineContainer.style.top=`${s.body.domProps.scrollTop}px`})}addGroup(e,t){Object.prototype.hasOwnProperty.call(this.groups,e)||(this.groups[e]=t),this.amountOfGroups+=1}updateGroup(e,t){Object.prototype.hasOwnProperty.call(this.groups,e)||(this.amountOfGroups+=1),this.groups[e]=t}removeGroup(e){Object.prototype.hasOwnProperty.call(this.groups,e)&&(delete this.groups[e],this.amountOfGroups-=1)}setOptions(e){if(e){let t=!1;this.options.orientation!=e.orientation&&e.orientation!==void 0&&(t=!0);const n=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];O.selectiveDeepExtend(n,this.options,e),this.minWidth=Number(`${this.options.width}`.replace("px","")),t===!0&&this.dom.frame&&(this.hide(),this.show())}}_create(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.dom.lineContainer.style.visibility="visible",this.dom.lineContainer.style.display="block",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)}_redrawGroupIcons(){ns(this.svgElements);let e;const t=this.options.iconWidth,n=15,r=4;let s=r+.5*n;this.options.orientation==="left"?e=r:e=this.width-t-r;const o=Object.keys(this.groups);o.sort((a,l)=>a<l?-1:1);for(const a of o)this.groups[a].visible===!0&&(this.linegraphOptions.visibility[a]===void 0||this.linegraphOptions.visibility[a]===!0)&&(this.groups[a].getLegend(t,n,this.framework,e,s),s+=n+r);Bi(this.svgElements),this.iconsRemoved=!1}_cleanupIcons(){this.iconsRemoved===!1&&(ns(this.svgElements),Bi(this.svgElements),this.iconsRemoved=!0)}show(){this.hidden=!1,this.dom.frame.parentNode||(this.options.orientation==="left"?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer),this.dom.lineContainer.style.display="block"}hide(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.style.display="none"}setRange(e,t){this.range.start=e,this.range.end=t}redraw(){let e=!1,t=0;this.dom.lineContainer.style.top=`${this.body.domProps.scrollTop}px`;for(const n in this.groups)Object.prototype.hasOwnProperty.call(this.groups,n)&&this.groups[n].visible===!0&&(this.linegraphOptions.visibility[n]===void 0||this.linegraphOptions.visibility[n]===!0)&&t++;if(this.amountOfGroups===0||t===0)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height=`${this.height}px`,this.width=this.options.visible===!0?Number(`${this.options.width}`.replace("px","")):0;const n=this.props,r=this.dom.frame;r.className="vis-data-axis",this._calculateCharSize();const s=this.options.orientation,o=this.options.showMinorLabels,a=this.options.showMajorLabels,l=this.body.dom.backgroundHorizontal.offsetWidth;n.minorLabelHeight=o?n.minorCharHeight:0,n.majorLabelHeight=a?n.majorCharHeight:0,n.minorLineWidth=l-this.lineOffset-this.width+2*this.options.minorLinesOffset,n.minorLineHeight=1,n.majorLineWidth=l-this.lineOffset-this.width+2*this.options.majorLinesOffset,n.majorLineHeight=1,s==="left"?(r.style.top="0",r.style.left="0",r.style.bottom="",r.style.width=`${this.width}px`,r.style.height=`${this.height}px`,this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(r.style.top="",r.style.bottom="0",r.style.left="0",r.style.width=`${this.width}px`,r.style.height=`${this.height}px`,this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),e=this._redrawLabels(),e=this._isResized()||e,this.options.icons===!0?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(s)}return e}_redrawLabels(){let e=!1;ns(this.DOMelements.lines),ns(this.DOMelements.labels);const t=this.options.orientation,n=this.options[t].range!=null?this.options[t].range:{};let r=!0;n.max!=null&&(this.range.end=n.max,r=!1);let s=!0;n.min!=null&&(this.range.start=n.min,s=!1),this.scale=new Mce(this.range.start,this.range.end,s,r,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[t].format),this.master===!1&&this.masterAxis!=null?(this.scale.followScale(this.masterAxis.scale),this.dom.lineContainer.style.display="none"):this.dom.lineContainer.style.display="block",this.maxLabelSize=0,this.scale.getLines().forEach(c=>{const u=c.y,h=c.major;this.options.showMinorLabels&&h===!1&&this._redrawLabel(u-2,c.val,t,"vis-y-axis vis-minor",this.props.minorCharHeight),h&&u>=0&&this._redrawLabel(u-2,c.val,t,"vis-y-axis vis-major",this.props.majorCharHeight),this.master===!0&&(h?this._redrawLine(u,t,"vis-grid vis-horizontal vis-major",this.options.majorLinesOffset,this.props.majorLineWidth):this._redrawLine(u,t,"vis-grid vis-horizontal vis-minor",this.options.minorLinesOffset,this.props.minorLineWidth))});let a=0;this.options[t].title!==void 0&&this.options[t].title.text!==void 0&&(a=this.props.titleCharHeight);const l=this.options.icons===!0?Math.max(this.options.iconWidth,a)+this.options.labelOffsetX+15:a+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-l&&this.options.visible===!0?(this.width=this.maxLabelSize+l,this.options.width=`${this.width}px`,Bi(this.DOMelements.lines),Bi(this.DOMelements.labels),this.redraw(),e=!0):this.maxLabelSize<this.width-l&&this.options.visible===!0&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+l),this.options.width=`${this.width}px`,Bi(this.DOMelements.lines),Bi(this.DOMelements.labels),this.redraw(),e=!0):(Bi(this.DOMelements.lines),Bi(this.DOMelements.labels),e=!1),e}convertValue(e){return this.scale.convertValue(e)}screenToValue(e){return this.scale.screenToValue(e)}_redrawLabel(e,t,n,r,s){const o=kb("div",this.DOMelements.labels,this.dom.frame);o.className=r,o.innerHTML=O.xss(t),n==="left"?(o.style.left=`-${this.options.labelOffsetX}px`,o.style.textAlign="right"):(o.style.right=`-${this.options.labelOffsetX}px`,o.style.textAlign="left"),o.style.top=`${e-.5*s+this.options.labelOffsetY}px`,t+="";const a=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<t.length*a&&(this.maxLabelSize=t.length*a)}_redrawLine(e,t,n,r,s){if(this.master===!0){const o=kb("div",this.DOMelements.lines,this.dom.lineContainer);o.className=n,o.innerHTML="",t==="left"?o.style.left=`${this.width-r}px`:o.style.right=`${this.width-r}px`,o.style.width=`${s}px`,o.style.top=`${e}px`}}_redrawTitle(e){if(ns(this.DOMelements.title),this.options[e].title!==void 0&&this.options[e].title.text!==void 0){const t=kb("div",this.DOMelements.title,this.dom.frame);t.className=`vis-y-axis vis-title vis-${e}`,t.innerHTML=O.xss(this.options[e].title.text),this.options[e].title.style!==void 0&&O.addCssText(t,this.options[e].title.style),e==="left"?t.style.left=`${this.props.titleCharHeight}px`:t.style.right=`${this.props.titleCharHeight}px`,t.style.width=`${this.height}px`}Bi(this.DOMelements.title)}_calculateCharSize(){if(!("minorCharHeight"in this.props)){const e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-minor vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.minorCharHeight=t.clientHeight,this.props.minorCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}if(!("majorCharHeight"in this.props)){const e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-major vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.majorCharHeight=t.clientHeight,this.props.majorCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}if(!("titleCharHeight"in this.props)){const e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-title vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.titleCharHeight=t.clientHeight,this.props.titleCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}}}function eh(){}eh.draw=function(i,e,t,n){n=n||0;for(var r=Ace(t,e),s=0;s<i.length;s++)if(!r)pl(i[s].screen_x+n,i[s].screen_y,J0(e),t.svgElements,t.svg,i[s].label);else{var o=r(i[s],e);(o===!0||typeof o=="object")&&pl(i[s].screen_x+n,i[s].screen_y,J0(e,o),t.svgElements,t.svg,i[s].label)}};eh.drawIcon=function(i,e,t,n,r,s){var o=r*.5,a=pn("rect",s.svgElements,s.svg);a.setAttributeNS(null,"x",e),a.setAttributeNS(null,"y",t-o),a.setAttributeNS(null,"width",n),a.setAttributeNS(null,"height",2*o),a.setAttributeNS(null,"class","vis-outline"),pl(e+.5*n,t,J0(i),s.svgElements,s.svg)};function J0(i,e){return e=typeof e>"u"?{}:e,{style:e.style||i.options.drawPoints.style,styles:e.styles||i.options.drawPoints.styles,size:e.size||i.options.drawPoints.size,className:e.className||i.className}}function Ace(i,e){var t=void 0;return i.options&&i.options.drawPoints&&i.options.drawPoints.onRender&&typeof i.options.drawPoints.onRender=="function"&&(t=i.options.drawPoints.onRender),e.group.options&&e.group.options.drawPoints&&e.group.options.drawPoints.onRender&&typeof e.group.options.drawPoints.onRender=="function"&&(t=e.group.options.drawPoints.onRender),t}function ci(){}ci.drawIcon=function(i,e,t,n,r,s){var o=r*.5,a=pn("rect",s.svgElements,s.svg);a.setAttributeNS(null,"x",e),a.setAttributeNS(null,"y",t-o),a.setAttributeNS(null,"width",n),a.setAttributeNS(null,"height",2*o),a.setAttributeNS(null,"class","vis-outline");var l=Math.round(.3*n),c=i.options.barChart.width,u=c/l,h=Math.round(.4*r),d=Math.round(.75*r),f=Math.round((n-2*l)/3);if(Q0(e+.5*l+f,t+o-h-1,l,h,i.className+" vis-bar",s.svgElements,s.svg,i.style),Q0(e+1.5*l+f+2,t+o-d-1,l,d,i.className+" vis-bar",s.svgElements,s.svg,i.style),i.options.drawPoints.enabled==!0){var p={style:i.options.drawPoints.style,styles:i.options.drawPoints.styles,size:i.options.drawPoints.size/u,className:i.className};pl(e+.5*l+f,t+o-h-1,p,s.svgElements,s.svg),pl(e+1.5*l+f+2,t+o-d-1,p,s.svgElements,s.svg)}};ci.draw=function(i,e,t){var n=[],r={},s,o,a,l,c,u,h=0;for(c=0;c<i.length;c++)if(l=t.groups[i[c]],l.options.style==="bar"&&l.visible===!0&&(t.options.groups.visibility[i[c]]===void 0||t.options.groups.visibility[i[c]]===!0))for(u=0;u<e[i[c]].length;u++)n.push({screen_x:e[i[c]][u].screen_x,screen_end:e[i[c]][u].screen_end,screen_y:e[i[c]][u].screen_y,x:e[i[c]][u].x,end:e[i[c]][u].end,y:e[i[c]][u].y,groupId:i[c],label:e[i[c]][u].label}),h+=1;if(h!==0)for(n.sort(function(m,g){return m.screen_x===g.screen_x?m.groupId<g.groupId?-1:1:m.screen_x-g.screen_x}),ci._getDataIntersections(r,n),c=0;c<n.length;c++){l=t.groups[n[c].groupId];var d=l.options.barChart.minWidth!=null?l.options.barChart.minWidth:.1*l.options.barChart.width;o=n[c].screen_x;var f=0;if(r[o]===void 0)c+1<n.length&&(s=Math.abs(n[c+1].screen_x-o)),a=ci._getSafeDrawData(s,l,d);else{var p=c+(r[o].amount-r[o].resolved);p<n.length&&(s=Math.abs(n[p].screen_x-o)),a=ci._getSafeDrawData(s,l,d),r[o].resolved+=1,l.options.stack===!0&&l.options.excludeFromStacking!==!0?n[c].screen_y<l.zeroPosition?(f=r[o].accumulatedNegative,r[o].accumulatedNegative+=l.zeroPosition-n[c].screen_y):(f=r[o].accumulatedPositive,r[o].accumulatedPositive+=l.zeroPosition-n[c].screen_y):l.options.barChart.sideBySide===!0&&(a.width=a.width/r[o].amount,a.offset+=r[o].resolved*a.width-.5*a.width*(r[o].amount+1))}let m=a.width,g=n[c].screen_x;if(n[c].screen_end!=null?(m=n[c].screen_end-n[c].screen_x,g+=m*.5):g+=a.offset,Q0(g,n[c].screen_y-f,m,l.zeroPosition-n[c].screen_y,l.className+" vis-bar",t.svgElements,t.svg,l.style),l.options.drawPoints.enabled===!0){let v={screen_x:n[c].screen_x,screen_y:n[c].screen_y-f,x:n[c].x,y:n[c].y,groupId:n[c].groupId,label:n[c].label};eh.draw([v],l,t,a.offset)}}};ci._getDataIntersections=function(i,e){for(var t,n=0;n<e.length;n++)n+1<e.length&&(t=Math.abs(e[n+1].screen_x-e[n].screen_x)),n>0&&(t=Math.min(t,Math.abs(e[n-1].screen_x-e[n].screen_x))),t===0&&(i[e[n].screen_x]===void 0&&(i[e[n].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),i[e[n].screen_x].amount+=1)};ci._getSafeDrawData=function(i,e,t){var n,r;return i<e.options.barChart.width&&i>0?(n=i<t?t:i,r=0,e.options.barChart.align==="left"?r-=.5*i:e.options.barChart.align==="right"&&(r+=.5*i)):(n=e.options.barChart.width,r=0,e.options.barChart.align==="left"?r-=.5*e.options.barChart.width:e.options.barChart.align==="right"&&(r+=.5*e.options.barChart.width)),{width:n,offset:r}};ci.getStackedYRange=function(i,e,t,n,r){if(i.length>0){i.sort(function(o,a){return o.screen_x===a.screen_x?o.groupId<a.groupId?-1:1:o.screen_x-a.screen_x});var s={};ci._getDataIntersections(s,i),e[n]=ci._getStackedYRange(s,i),e[n].yAxisOrientation=r,t.push(n)}};ci._getStackedYRange=function(i,e){for(var t,n=e[0].screen_y,r=e[0].screen_y,s=0;s<e.length;s++)t=e[s].screen_x,i[t]===void 0?(n=n>e[s].screen_y?e[s].screen_y:n,r=r<e[s].screen_y?e[s].screen_y:r):e[s].screen_y<0?i[t].accumulatedNegative+=e[s].screen_y:i[t].accumulatedPositive+=e[s].screen_y;for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n=n>i[o].accumulatedNegative?i[o].accumulatedNegative:n,n=n>i[o].accumulatedPositive?i[o].accumulatedPositive:n,r=r<i[o].accumulatedNegative?i[o].accumulatedNegative:r,r=r<i[o].accumulatedPositive?i[o].accumulatedPositive:r);return{min:n,max:r}};function Ut(){}Ut.calcPath=function(i,e){if(i!=null&&i.length>0){var t=[];return e.options.interpolation.enabled==!0?t=Ut._catmullRom(i,e):t=Ut._linear(i),t}};Ut.drawIcon=function(i,e,t,n,r,s){var o=r*.5,a,l,c=pn("rect",s.svgElements,s.svg);if(c.setAttributeNS(null,"x",e),c.setAttributeNS(null,"y",t-o),c.setAttributeNS(null,"width",n),c.setAttributeNS(null,"height",2*o),c.setAttributeNS(null,"class","vis-outline"),a=pn("path",s.svgElements,s.svg),a.setAttributeNS(null,"class",i.className),i.style!==void 0&&a.setAttributeNS(null,"style",i.style),a.setAttributeNS(null,"d","M"+e+","+t+" L"+(e+n)+","+t),i.options.shaded.enabled==!0&&(l=pn("path",s.svgElements,s.svg),i.options.shaded.orientation=="top"?l.setAttributeNS(null,"d","M"+e+", "+(t-o)+"L"+e+","+t+" L"+(e+n)+","+t+" L"+(e+n)+","+(t-o)):l.setAttributeNS(null,"d","M"+e+","+t+" L"+e+","+(t+o)+" L"+(e+n)+","+(t+o)+"L"+(e+n)+","+t),l.setAttributeNS(null,"class",i.className+" vis-icon-fill"),i.options.shaded.style!==void 0&&i.options.shaded.style!==""&&l.setAttributeNS(null,"style",i.options.shaded.style)),i.options.drawPoints.enabled==!0){var u={style:i.options.drawPoints.style,styles:i.options.drawPoints.styles,size:i.options.drawPoints.size,className:i.className};pl(e+.5*n,t,u,s.svgElements,s.svg)}};Ut.drawShading=function(i,e,t,n){if(e.options.shaded.enabled==!0){var r=Number(n.svg.style.height.replace("px","")),s=pn("path",n.svgElements,n.svg),o="L";e.options.interpolation.enabled==!0&&(o="C");var a,l=0;e.options.shaded.orientation=="top"?l=0:e.options.shaded.orientation=="bottom"?l=r:l=Math.min(Math.max(0,e.zeroPosition),r),e.options.shaded.orientation=="group"&&t!=null&&t!=null?a="M"+i[0][0]+","+i[0][1]+" "+this.serializePath(i,o,!1)+" L"+t[t.length-1][0]+","+t[t.length-1][1]+" "+this.serializePath(t,o,!0)+t[0][0]+","+t[0][1]+" Z":a="M"+i[0][0]+","+i[0][1]+" "+this.serializePath(i,o,!1)+" V"+l+" H"+i[0][0]+" Z",s.setAttributeNS(null,"class",e.className+" vis-fill"),e.options.shaded.style!==void 0&&s.setAttributeNS(null,"style",e.options.shaded.style),s.setAttributeNS(null,"d",a)}};Ut.draw=function(i,e,t){if(i!=null&&i!=null){var n=pn("path",t.svgElements,t.svg);n.setAttributeNS(null,"class",e.className),e.style!==void 0&&n.setAttributeNS(null,"style",e.style);var r="L";e.options.interpolation.enabled==!0&&(r="C"),n.setAttributeNS(null,"d","M"+i[0][0]+","+i[0][1]+" "+this.serializePath(i,r,!1))}};Ut.serializePath=function(i,e,t){if(i.length<2)return"";var n=e,r;if(t)for(r=i.length-2;r>0;r--)n+=i[r][0]+","+i[r][1]+" ";else for(r=1;r<i.length;r++)n+=i[r][0]+","+i[r][1]+" ";return n};Ut._catmullRomUniform=function(i){var e,t,n,r,s,o,a=[];a.push([Math.round(i[0].screen_x),Math.round(i[0].screen_y)]);for(var l=1/6,c=i.length,u=0;u<c-1;u++)e=u==0?i[0]:i[u-1],t=i[u],n=i[u+1],r=u+2<c?i[u+2]:n,s={screen_x:(-e.screen_x+6*t.screen_x+n.screen_x)*l,screen_y:(-e.screen_y+6*t.screen_y+n.screen_y)*l},o={screen_x:(t.screen_x+6*n.screen_x-r.screen_x)*l,screen_y:(t.screen_y+6*n.screen_y-r.screen_y)*l},a.push([s.screen_x,s.screen_y]),a.push([o.screen_x,o.screen_y]),a.push([n.screen_x,n.screen_y]);return a};Ut._catmullRom=function(i,e){var t=e.options.interpolation.alpha;if(t==0||t===void 0)return this._catmullRomUniform(i);var n,r,s,o,a,l,c,u,h,d,f,p,m,g,v,y,w,b,x,C=[];C.push([Math.round(i[0].screen_x),Math.round(i[0].screen_y)]);for(var E=i.length,S=0;S<E-1;S++)n=S==0?i[0]:i[S-1],r=i[S],s=i[S+1],o=S+2<E?i[S+2]:s,c=Math.sqrt(Math.pow(n.screen_x-r.screen_x,2)+Math.pow(n.screen_y-r.screen_y,2)),u=Math.sqrt(Math.pow(r.screen_x-s.screen_x,2)+Math.pow(r.screen_y-s.screen_y,2)),h=Math.sqrt(Math.pow(s.screen_x-o.screen_x,2)+Math.pow(s.screen_y-o.screen_y,2)),g=Math.pow(h,t),y=Math.pow(h,2*t),v=Math.pow(u,t),w=Math.pow(u,2*t),x=Math.pow(c,t),b=Math.pow(c,2*t),d=2*b+3*x*v+w,f=2*y+3*g*v+w,p=3*x*(x+v),p>0&&(p=1/p),m=3*g*(g+v),m>0&&(m=1/m),a={screen_x:(-w*n.screen_x+d*r.screen_x+b*s.screen_x)*p,screen_y:(-w*n.screen_y+d*r.screen_y+b*s.screen_y)*p},l={screen_x:(y*r.screen_x+f*s.screen_x-w*o.screen_x)*m,screen_y:(y*r.screen_y+f*s.screen_y-w*o.screen_y)*m},a.screen_x==0&&a.screen_y==0&&(a=r),l.screen_x==0&&l.screen_y==0&&(l=s),C.push([a.screen_x,a.screen_y]),C.push([l.screen_x,l.screen_y]),C.push([s.screen_x,s.screen_y]);return C};Ut._linear=function(i){for(var e=[],t=0;t<i.length;t++)e.push([i[t].screen_x,i[t].screen_y]);return e};function ks(i,e,t,n){this.id=e;var r=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"];this.options=O.selectiveBridgeObject(r,t),this.usingDefaultStyle=i.className===void 0,this.groupsUsingDefaultStyles=n,this.zeroPosition=0,this.update(i),this.usingDefaultStyle==!0&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=i.visible===void 0?!0:i.visible}ks.prototype.setItems=function(i){i!=null?(this.itemsData=i,this.options.sort==!0&&O.insertSort(this.itemsData,function(e,t){return e.x>t.x?1:-1})):this.itemsData=[]};ks.prototype.getItems=function(){return this.itemsData};ks.prototype.setZeroPosition=function(i){this.zeroPosition=i};ks.prototype.setOptions=function(i){if(i!==void 0){var e=["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"];O.selectiveDeepExtend(e,this.options,i),typeof i.drawPoints=="function"&&(i.drawPoints={onRender:i.drawPoints}),O.mergeOptions(this.options,i,"interpolation"),O.mergeOptions(this.options,i,"drawPoints"),O.mergeOptions(this.options,i,"shaded"),i.interpolation&&typeof i.interpolation=="object"&&i.interpolation.parametrization&&(i.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:i.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}};ks.prototype.update=function(i){this.group=i,this.content=i.content||"graph",this.className=i.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=i.visible===void 0?!0:i.visible,this.style=i.style,this.setOptions(i.options)};ks.prototype.getLegend=function(i,e,t,n,r){if(t==null||t==null){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");t={svg:s,svgElements:{},options:this.options,groups:[this]}}switch((n==null||n==null)&&(n=0),(r==null||r==null)&&(r=.5*e),this.options.style){case"line":Ut.drawIcon(this,n,r,i,e,t);break;case"points":case"point":eh.drawIcon(this,n,r,i,e,t);break;case"bar":ci.drawIcon(this,n,r,i,e,t);break}return{icon:t.svg,label:this.content,orientation:this.options.yAxisOrientation}};ks.prototype.getYRange=function(i){for(var e=i[0].y,t=i[0].y,n=0;n<i.length;n++)e=e>i[n].y?i[n].y:e,t=t<i[n].y?i[n].y:t;return{min:e,max:t,yAxisOrientation:this.options.yAxisOrientation}};function $i(i,e,t,n){this.body=i,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=t,this.options=O.extend({},this.defaultOptions),this.linegraphOptions=n,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(e)}$i.prototype=new Ps;$i.prototype.clear=function(){this.groups={},this.amountOfGroups=0};$i.prototype.addGroup=function(i,e){e.options.excludeFromLegend!=!0&&(Object.prototype.hasOwnProperty.call(this.groups,i)||(this.groups[i]=e),this.amountOfGroups+=1)};$i.prototype.updateGroup=function(i,e){this.groups[i]=e};$i.prototype.removeGroup=function(i){Object.prototype.hasOwnProperty.call(this.groups,i)&&(delete this.groups[i],this.amountOfGroups-=1)};$i.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)};$i.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};$i.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};$i.prototype.setOptions=function(i){var e=["enabled","orientation","icons","left","right"];O.selectiveDeepExtend(e,this.options,i)};$i.prototype.redraw=function(){var i=0,e=Object.keys(this.groups);e.sort(function(o,a){return o<a?-1:1});for(var t=0;t<e.length;t++){var n=e[t];this.groups[n].visible==!0&&(this.linegraphOptions.visibility[n]===void 0||this.linegraphOptions.visibility[n]==!0)&&i++}if(this.options[this.side].visible==!1||this.amountOfGroups==0||this.options.enabled==!1||i==0)this.hide();else{if(this.show(),this.options[this.side].position=="top-left"||this.options[this.side].position=="bottom-left"?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),this.options[this.side].position=="top-left"||this.options[this.side].position=="top-right")this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var r=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+r+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}this.options.icons==!1?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var s="";for(t=0;t<e.length;t++)n=e[t],this.groups[n].visible==!0&&(this.linegraphOptions.visibility[n]===void 0||this.linegraphOptions.visibility[n]==!0)&&(s+=this.groups[n].content+"<br />");this.dom.textArea.innerHTML=O.xss(s),this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}};$i.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var i=Object.keys(this.groups);i.sort(function(c,u){return c<u?-1:1}),Pce(this.svgElements);var e=window.getComputedStyle(this.dom.frame).paddingTop,t=Number(e.replace("px","")),n=t,r=this.options.iconSize,s=.75*this.options.iconSize,o=t+.5*s+3;this.svg.style.width=r+5+t+"px";for(var a=0;a<i.length;a++){var l=i[a];this.groups[l].visible==!0&&(this.linegraphOptions.visibility[l]===void 0||this.linegraphOptions.visibility[l]==!0)&&(this.groups[l].getLegend(r,s,this.framework,n,o),o+=s+this.options.iconSpacing)}}};var Ld="__ungrouped__";function Je(i,e){this.id=uo(),this.body=i,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=O.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var t=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(n,r){t._onAdd(r.items)},update:function(n,r){t._onUpdate(r.items)},remove:function(n,r){t._onRemove(r.items)}},this.groupListeners={add:function(n,r){t._onAddGroups(r.items)},update:function(n,r){t._onUpdateGroups(r.items)},remove:function(n,r){t._onRemoveGroups(r.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(e),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){t.svg.style.left=O.option.asSize(-t.props.width),t.forceGraphUpdate=!0,t.redraw.call(t)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}Je.prototype=new Ps;Je.prototype._create=function(){var i=document.createElement("div");i.className="vis-line-graph",this.dom.frame=i,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",i.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new oA(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new oA(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new $i(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new $i(this.body,this.options.legend,"right",this.options.groups),this.show()};Je.prototype.setOptions=function(i){if(i){var e=["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];i.graphHeight===void 0&&i.height!==void 0?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):this.body.domProps.centerContainer.height!==void 0&&i.graphHeight!==void 0&&parseInt((i.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),O.selectiveDeepExtend(e,this.options,i),O.mergeOptions(this.options,i,"interpolation"),O.mergeOptions(this.options,i,"drawPoints"),O.mergeOptions(this.options,i,"shaded"),O.mergeOptions(this.options,i,"legend"),i.interpolation&&typeof i.interpolation=="object"&&i.interpolation.parametrization&&(i.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:i.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&i.dataAxis!==void 0&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&i.legend!==void 0&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),Object.prototype.hasOwnProperty.call(this.groups,Ld)&&this.groups[Ld].setOptions(i)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))};Je.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};Je.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};Je.prototype.setItems=function(i){var e=this,t,n=this.itemsData;if(!i)this.itemsData=null;else if(Fr(i))this.itemsData=dl(i);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(n&&(O.forEach(this.itemListeners,function(s,o){n.off(o,s)}),n.dispose(),t=n.getIds(),this._onRemove(t)),this.itemsData){var r=this.id;O.forEach(this.itemListeners,function(s,o){e.itemsData.on(o,s,r)}),t=this.itemsData.getIds(),this._onAdd(t)}};Je.prototype.setGroups=function(i){var e=this,t;if(this.groupsData){O.forEach(this.groupListeners,function(s,o){e.groupsData.off(o,s)}),t=this.groupsData.getIds(),this.groupsData=null;for(var n=0;n<t.length;n++)this._removeGroup(t[n])}if(!i)this.groupsData=null;else if(Fr(i))this.groupsData=i;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var r=this.id;O.forEach(this.groupListeners,function(s,o){e.groupsData.on(o,s,r)}),t=this.groupsData.getIds(),this._onAddGroups(t)}};Je.prototype._onUpdate=function(i){this._updateAllGroupData(i)};Je.prototype._onAdd=function(i){this._onUpdate(i)};Je.prototype._onRemove=function(i){this._onUpdate(i)};Je.prototype._onUpdateGroups=function(i){this._updateAllGroupData(null,i)};Je.prototype._onAddGroups=function(i){this._onUpdateGroups(i)};Je.prototype._onRemoveGroups=function(i){for(var e=0;e<i.length;e++)this._removeGroup(i[e]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})};Je.prototype._removeGroup=function(i){Object.prototype.hasOwnProperty.call(this.groups,i)&&(this.groups[i].options.yAxisOrientation=="right"?(this.yAxisRight.removeGroup(i),this.legendRight.removeGroup(i),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(i),this.legendLeft.removeGroup(i),this.legendLeft.redraw()),delete this.groups[i])};Je.prototype._updateGroup=function(i,e){Object.prototype.hasOwnProperty.call(this.groups,e)?(this.groups[e].update(i),this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.updateGroup(e,this.groups[e]),this.legendRight.updateGroup(e,this.groups[e]),this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e)):(this.yAxisLeft.updateGroup(e,this.groups[e]),this.legendLeft.updateGroup(e,this.groups[e]),this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e))):(this.groups[e]=new ks(i,e,this.options,this.groupsUsingDefaultStyles),this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.addGroup(e,this.groups[e]),this.legendRight.addGroup(e,this.groups[e])):(this.yAxisLeft.addGroup(e,this.groups[e]),this.legendLeft.addGroup(e,this.groups[e]))),this.legendLeft.redraw(),this.legendRight.redraw()};Je.prototype._updateAllGroupData=function(i,e){if(this.itemsData!=null){var t={},n=this.itemsData.get(),r=this.itemsData.idProp,s={};i&&i.map(function(g){s[g]=g});for(var o={},a=0;a<n.length;a++){var l=n[a],c=l.group;c==null&&(c=Ld),Object.prototype.hasOwnProperty.call(o,c)?o[c]++:o[c]=1}var u={};if(!e&&i){for(c in this.groups)if(Object.prototype.hasOwnProperty.call(this.groups,c)){m=this.groups[c];var h=m.getItems();t[c]=h.filter(function(g){return u[g[r]]=g[r],g[r]!==s[g[r]]});var d=o[c];o[c]-=t[c].length,t[c].length<d&&(t[c][d-1]={})}}for(a=0;a<n.length;a++)if(l=n[a],c=l.group,c==null&&(c=Ld),!(!e&&i&&l[r]!==s[l[r]]&&Object.prototype.hasOwnProperty.call(u,l[r]))){Object.prototype.hasOwnProperty.call(t,c)||(t[c]=new Array(o[c]));var f=O.bridgeObject(l);f.x=O.convert(l.x,"Date"),f.end=O.convert(l.end,"Date"),f.orginalY=l.y,f.y=Number(l.y),f[r]=l[r];var p=t[c].length-o[c]--;t[c][p]=f}for(c in this.groups)!Object.prototype.hasOwnProperty.call(this.groups,c)||Object.prototype.hasOwnProperty.call(t,c)||(t[c]=new Array(0));for(c in t)if(Object.prototype.hasOwnProperty.call(t,c))if(t[c].length==0)Object.prototype.hasOwnProperty.call(this.groups,c)&&this._removeGroup(c);else{var m=void 0;this.groupsData!=null&&(m=this.groupsData.get(c)),m==null&&(m={id:c,content:this.options.defaultGroup+c}),this._updateGroup(m,c),this.groups[c].setItems(t[c])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}};Je.prototype.redraw=function(){var i=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,i=this._isResized()||i;var e=this.body.range.end-this.body.range.start,t=e!=this.lastVisibleInterval;if(this.lastVisibleInterval=e,i==!0&&(this.svg.style.width=O.option.asSize(3*this.props.width),this.svg.style.left=O.option.asSize(-this.props.width),((this.options.height+"").indexOf("%")!=-1||this.updateSVGheightOnResize==!0)&&(this.updateSVGheight=!0)),this.updateSVGheight==!0?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",i==!0||t==!0||this.abortedGraphUpdate==!0||this.forceGraphUpdate==!0)i=this._updateGraph()||i,this.forceGraphUpdate=!1,this.lastStart=this.body.range.start,this.svg.style.left=-this.props.width+"px";else if(this.lastStart!=0){var n=this.body.range.start-this.lastStart,r=this.body.range.end-this.body.range.start;if(this.props.width!=0){var s=this.props.width/r,o=n*s;this.svg.style.left=-this.props.width-o+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),i};Je.prototype._getSortedGroupIds=function(){var i=[];for(var e in this.groups)if(Object.prototype.hasOwnProperty.call(this.groups,e)){var t=this.groups[e];t.visible==!0&&(this.options.groups.visibility[e]===void 0||this.options.groups.visibility[e]==!0)&&i.push({id:e,zIndex:t.options.zIndex})}O.insertSort(i,function(s,o){var a=s.zIndex,l=o.zIndex;return a===void 0&&(a=0),l===void 0&&(l=0),a==l?0:a<l?-1:1});for(var n=new Array(i.length),r=0;r<i.length;r++)n[r]=i[r].id;return n};Je.prototype._updateGraph=function(){if(ns(this.svgElements),this.props.width!=0&&this.itemsData!=null){var i,e,t={},n=!1,r=this.body.util.toGlobalTime(-this.body.domProps.root.width),s=this.body.util.toGlobalTime(2*this.body.domProps.root.width),o=this._getSortedGroupIds();if(o.length>0){var a={};for(this._getRelevantData(o,a,r,s),this._applySampling(o,a),e=0;e<o.length;e++)this._convertXcoordinates(a[o[e]]);if(this._getYRanges(o,a,t),n=this._updateYAxis(o,t),n==!0)return Bi(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var l=void 0;for(e=0;e<o.length;e++)i=this.groups[o[e]],this.options.stack===!0&&this.options.style==="line"&&(i.options.excludeFromStacking==null||!i.options.excludeFromStacking)&&(l!=null&&(this._stack(a[i.id],a[l.id]),i.options.shaded.enabled==!0&&i.options.shaded.orientation!=="group"&&(i.options.shaded.orientation=="top"&&l.options.shaded.orientation!=="group"?(l.options.shaded.orientation="group",l.options.shaded.groupId=i.id):(i.options.shaded.orientation="group",i.options.shaded.groupId=l.id))),l=i),this._convertYcoordinates(a[o[e]],i);var c={};for(e=0;e<o.length;e++)if(i=this.groups[o[e]],i.options.style==="line"&&i.options.shaded.enabled==!0){var u=a[o[e]];if(u==null||u.length==0)continue;if(Object.prototype.hasOwnProperty.call(c,o[e])||(c[o[e]]=Ut.calcPath(u,i)),i.options.shaded.orientation==="group"){var h=i.options.shaded.groupId;if(o.indexOf(h)===-1){console.log(i.id+": Unknown shading group target given:"+h);continue}Object.prototype.hasOwnProperty.call(c,h)||(c[h]=Ut.calcPath(a[h],this.groups[h])),Ut.drawShading(c[o[e]],i,c[h],this.framework)}else Ut.drawShading(c[o[e]],i,void 0,this.framework)}for(ci.draw(o,a,this.framework),e=0;e<o.length;e++)if(i=this.groups[o[e]],a[o[e]].length>0)switch(i.options.style){case"line":Object.prototype.hasOwnProperty.call(c,o[e])||(c[o[e]]=Ut.calcPath(a[o[e]],i)),Ut.draw(c[o[e]],i,this.framework);case"point":case"points":(i.options.style=="point"||i.options.style=="points"||i.options.drawPoints.enabled==!0)&&eh.draw(a[o[e]],i,this.framework);break}}}return Bi(this.svgElements),!1};Je.prototype._stack=function(i,e){var t,n,r,s,o;t=0;for(var a=0;a<i.length;a++){s=void 0,o=void 0;for(var l=t;l<e.length;l++)if(e[l].x===i[a].x){s=e[l],o=e[l],t=l;break}else if(e[l].x>i[a].x){o=e[l],l==0?s=o:s=e[l-1],t=l;break}o===void 0&&(s=e[e.length-1],o=e[e.length-1]),n=o.x-s.x,r=o.y-s.y,n==0?i[a].y=i[a].orginalY+o.y:i[a].y=i[a].orginalY+r/n*(i[a].x-s.x)+s.y}};Je.prototype._getRelevantData=function(i,e,t,n){var r,s,o,a;if(i.length>0)for(s=0;s<i.length;s++){r=this.groups[i[s]];var l=r.getItems();if(r.options.sort==!0){var c=function(f,p){return f.getTime()==p.getTime()?0:f<p?-1:1},u=Math.max(0,O.binarySearchValue(l,t,"x","before",c)),h=Math.min(l.length,O.binarySearchValue(l,n,"x","after",c)+1);h<=0&&(h=l.length);var d=new Array(h-u);for(o=u;o<h;o++)a=r.itemsData[o],d[o-u]=a;e[i[s]]=d}else e[i[s]]=r.itemsData}};Je.prototype._applySampling=function(i,e){var t;if(i.length>0){for(var n=0;n<i.length;n++)if(t=this.groups[i[n]],t.options.sampling==!0){var r=e[i[n]];if(r.length>0){var s=1,o=r.length,a=this.body.util.toGlobalScreen(r[r.length-1].x)-this.body.util.toGlobalScreen(r[0].x),l=o/a;s=Math.min(Math.ceil(.2*o),Math.max(1,Math.round(l)));for(var c=new Array(o),u=0;u<o;u+=s){var h=Math.round(u/s);c[h]=r[u]}e[i[n]]=c.splice(0,Math.round(o/s))}}}};Je.prototype._getYRanges=function(i,e,t){var n,r,s,o=[],a=[],l;if(i.length>0){for(s=0;s<i.length;s++)n=e[i[s]],l=this.groups[i[s]].options,n.length>0&&(r=this.groups[i[s]],l.stack===!0&&l.style==="bar"?l.yAxisOrientation==="left"?o=o.concat(n):a=a.concat(n):t[i[s]]=r.getYRange(n,i[s]));ci.getStackedYRange(o,t,i,"__barStackLeft","left"),ci.getStackedYRange(a,t,i,"__barStackRight","right")}};Je.prototype._updateYAxis=function(i,e){var t=!1,n=!1,r=!1,s=1e9,o=1e9,a=-1e9,l=-1e9,c,u;if(i.length>0){for(var h=0;h<i.length;h++){var d=this.groups[i[h]];d&&d.options.yAxisOrientation!="right"?(n=!0,s=1e9,a=-1e9):d&&d.options.yAxisOrientation&&(r=!0,o=1e9,l=-1e9)}for(h=0;h<i.length;h++)!Object.prototype.hasOwnProperty.call(e,i[h])||e[i[h]].ignore===!0||(c=e[i[h]].min,u=e[i[h]].max,e[i[h]].yAxisOrientation!="right"?(n=!0,s=s>c?c:s,a=a<u?u:a):(r=!0,o=o>c?c:o,l=l<u?u:l));n==!0&&this.yAxisLeft.setRange(s,a),r==!0&&this.yAxisRight.setRange(o,l)}t=this._toggleAxisVisiblity(n,this.yAxisLeft)||t,t=this._toggleAxisVisiblity(r,this.yAxisRight)||t,r==!0&&n==!0?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!n,this.yAxisRight.masterAxis=this.yAxisLeft,this.yAxisRight.master==!1?(r==!0?this.yAxisLeft.lineOffset=this.yAxisRight.width:this.yAxisLeft.lineOffset=0,t=this.yAxisLeft.redraw()||t,t=this.yAxisRight.redraw()||t):t=this.yAxisRight.redraw()||t;var f=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(h=0;h<f.length;h++)i.indexOf(f[h])!=-1&&i.splice(i.indexOf(f[h]),1);return t};Je.prototype._toggleAxisVisiblity=function(i,e){var t=!1;return i==!1?e.dom.frame.parentNode&&e.hidden==!1&&(e.hide(),t=!0):!e.dom.frame.parentNode&&e.hidden==!0&&(e.show(),t=!0),t};Je.prototype._convertXcoordinates=function(i){for(var e=this.body.util.toScreen,t=0;t<i.length;t++)i[t].screen_x=e(i[t].x)+this.props.width,i[t].screen_y=i[t].y,i[t].end!=null?i[t].screen_end=e(i[t].end)+this.props.width:i[t].screen_end=void 0};Je.prototype._convertYcoordinates=function(i,e){var t=this.yAxisLeft,n=Number(this.svg.style.height.replace("px",""));e.options.yAxisOrientation=="right"&&(t=this.yAxisRight);for(var r=0;r<i.length;r++)i[r].screen_y=Math.round(t.convertValue(i[r].y));e.setZeroPosition(Math.min(n,t.convertValue(0)))};let ge="string",ke="boolean",Ke="number",Nce="array",ha="date",ct="object",Lce="dom",da="moment",aA="any",Fce={configure:{enabled:{boolean:ke},filter:{boolean:ke,function:"function"},container:{dom:Lce},__type__:{object:ct,boolean:ke,function:"function"}},alignCurrentTime:{string:ge,undefined:"undefined"},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:ge},sort:{boolean:ke},sampling:{boolean:ke},stack:{boolean:ke},graphHeight:{string:ge,number:Ke},shaded:{enabled:{boolean:ke},orientation:{string:["bottom","top","zero","group"]},groupId:{object:ct},__type__:{boolean:ke,object:ct}},style:{string:["line","bar","points"]},barChart:{width:{number:Ke},minWidth:{number:Ke},sideBySide:{boolean:ke},align:{string:["left","center","right"]},__type__:{object:ct}},interpolation:{enabled:{boolean:ke},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:Ke},__type__:{object:ct,boolean:ke}},drawPoints:{enabled:{boolean:ke},onRender:{function:"function"},size:{number:Ke},style:{string:["square","circle"]},__type__:{object:ct,boolean:ke,function:"function"}},dataAxis:{showMinorLabels:{boolean:ke},showMajorLabels:{boolean:ke},showWeekScale:{boolean:ke},icons:{boolean:ke},width:{string:ge,number:Ke},visible:{boolean:ke},alignZeros:{boolean:ke},left:{range:{min:{number:Ke,undefined:"undefined"},max:{number:Ke,undefined:"undefined"},__type__:{object:ct}},format:{function:"function"},title:{text:{string:ge,number:Ke,undefined:"undefined"},style:{string:ge,undefined:"undefined"},__type__:{object:ct}},__type__:{object:ct}},right:{range:{min:{number:Ke,undefined:"undefined"},max:{number:Ke,undefined:"undefined"},__type__:{object:ct}},format:{function:"function"},title:{text:{string:ge,number:Ke,undefined:"undefined"},style:{string:ge,undefined:"undefined"},__type__:{object:ct}},__type__:{object:ct}},__type__:{object:ct}},legend:{enabled:{boolean:ke},icons:{boolean:ke},left:{visible:{boolean:ke},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:ct}},right:{visible:{boolean:ke},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:ct}},__type__:{object:ct,boolean:ke}},groups:{visibility:{any:aA},__type__:{object:ct}},autoResize:{boolean:ke},throttleRedraw:{number:Ke},clickToUse:{boolean:ke},end:{number:Ke,date:ha,string:ge,moment:da},format:{minorLabels:{millisecond:{string:ge,undefined:"undefined"},second:{string:ge,undefined:"undefined"},minute:{string:ge,undefined:"undefined"},hour:{string:ge,undefined:"undefined"},weekday:{string:ge,undefined:"undefined"},day:{string:ge,undefined:"undefined"},week:{string:ge,undefined:"undefined"},month:{string:ge,undefined:"undefined"},quarter:{string:ge,undefined:"undefined"},year:{string:ge,undefined:"undefined"},__type__:{object:ct}},majorLabels:{millisecond:{string:ge,undefined:"undefined"},second:{string:ge,undefined:"undefined"},minute:{string:ge,undefined:"undefined"},hour:{string:ge,undefined:"undefined"},weekday:{string:ge,undefined:"undefined"},day:{string:ge,undefined:"undefined"},week:{string:ge,undefined:"undefined"},month:{string:ge,undefined:"undefined"},quarter:{string:ge,undefined:"undefined"},year:{string:ge,undefined:"undefined"},__type__:{object:ct}},__type__:{object:ct}},moment:{function:"function"},height:{string:ge,number:Ke},hiddenDates:{start:{date:ha,number:Ke,string:ge,moment:da},end:{date:ha,number:Ke,string:ge,moment:da},repeat:{string:ge},__type__:{object:ct,array:Nce}},locale:{string:ge},locales:{__any__:{any:aA},__type__:{object:ct}},max:{date:ha,number:Ke,string:ge,moment:da},maxHeight:{number:Ke,string:ge},maxMinorChars:{number:Ke},min:{date:ha,number:Ke,string:ge,moment:da},minHeight:{number:Ke,string:ge},moveable:{boolean:ke},multiselect:{boolean:ke},orientation:{string:ge},showCurrentTime:{boolean:ke},showMajorLabels:{boolean:ke},showMinorLabels:{boolean:ke},showWeekScale:{boolean:ke},snap:{function:"function",null:"null"},start:{date:ha,number:Ke,string:ge,moment:da},timeAxis:{scale:{string:ge,undefined:"undefined"},step:{number:Ke,undefined:"undefined"},__type__:{object:ct}},width:{string:ge,number:Ke},zoomable:{boolean:ke},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:Ke},zoomMin:{number:Ke},zIndex:{number:Ke},__type__:{object:ct}},$ce={global:{alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",quarter:"[Q]Q",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",quarter:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,showWeekScale:!1,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};function Yr(i,e,t,n){if(!(Array.isArray(t)||Fr(t))&&t instanceof Object){var r=n;n=t,t=r}n&&n.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var s=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:wi,width:null,height:null,maxHeight:null,minHeight:null},this.options=O.deepExtend({},this.defaultOptions),this._create(i),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale(){return s.timeAxis.step.scale},getStep(){return s.timeAxis.step.step},toScreen:s._toScreen.bind(s),toGlobalScreen:s._toGlobalScreen.bind(s),toTime:s._toTime.bind(s),toGlobalTime:s._toGlobalTime.bind(s)}},this.range=new ep(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new Ad(this.body),this.components.push(this.timeAxis),this.currentTime=new ZW(this.body),this.components.push(this.currentTime),this.linegraph=new Je(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(o){s.emit("click",s.getEventProperties(o))}),this.on("doubletap",function(o){s.emit("doubleClick",s.getEventProperties(o))}),this.dom.root.oncontextmenu=function(o){s.emit("contextmenu",s.getEventProperties(o))},this.initialFitDone=!1,this.on("changed",function(){if(s.itemsData!=null){if(!s.initialFitDone&&!s.options.rollingMode)if(s.initialFitDone=!0,s.options.start!=null||s.options.end!=null){if(s.options.start==null||s.options.end==null)var o=s.getItemRange();var a=s.options.start!=null?s.options.start:o.min,l=s.options.end!=null?s.options.end:o.max;s.setWindow(a,l,{animation:!1})}else s.fit({animation:!1});!s.initialDrawDone&&(s.initialRangeChangeDone||!s.options.start&&!s.options.end||s.options.rollingMode)&&(s.initialDrawDone=!0,s.dom.root.style.visibility="visible",s.dom.loadingScreen.parentNode.removeChild(s.dom.loadingScreen),s.options.onInitialDrawComplete&&setTimeout(()=>s.options.onInitialDrawComplete(),0))}}),n&&this.setOptions(n),t&&this.setGroups(t),e&&this.setItems(e),this._redraw()}Yr.prototype=new Ya;Yr.prototype.setOptions=function(i){ut.validate(i,Fce)===!0&&console.log("%cErrors have been found in the supplied options object.",Nd),Ya.prototype.setOptions.call(this,i)};Yr.prototype.setItems=function(i){var e=this.itemsData==null,t;if(i?Fr(i)?t=dl(i):t=dl(new hl(i)):t=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=t,this.linegraph&&this.linegraph.setItems(t!=null?t.rawDS:null),e)if(this.options.start!=null||this.options.end!=null){var n=this.options.start!=null?this.options.start:null,r=this.options.end!=null?this.options.end:null;this.setWindow(n,r,{animation:!1})}else this.fit({animation:!1})};Yr.prototype.setGroups=function(i){var e;i?Fr(i)?e=i:e=new hl(i):e=null,this.groupsData=e,this.linegraph.setGroups(e)};Yr.prototype.getLegend=function(i,e,t){return e===void 0&&(e=15),t===void 0&&(t=15),this.linegraph.groups[i]!==void 0?this.linegraph.groups[i].getLegend(e,t):"cannot find group:'"+i+"'"};Yr.prototype.isGroupVisible=function(i){return this.linegraph.groups[i]!==void 0?this.linegraph.groups[i].visible&&(this.linegraph.options.groups.visibility[i]===void 0||this.linegraph.options.groups.visibility[i]==!0):!1};Yr.prototype.getDataRange=function(){var i=null,e=null;for(var t in this.linegraph.groups)if(!(!Object.prototype.hasOwnProperty.call(this.linegraph.groups,t)||this.linegraph.groups[t].visible!==!0))for(var n=0;n<this.linegraph.groups[t].itemsData.length;n++){var r=this.linegraph.groups[t].itemsData[n],s=O.convert(r.x,"Date").valueOf();i=i==null||i>s?s:i,e=e==null||e<s?s:e}return{min:i!=null?new Date(i):null,max:e!=null?new Date(e):null}};Yr.prototype.getEventProperties=function(i){var e=i.center?i.center.x:i.clientX,t=i.center?i.center.y:i.clientY,n=e-O.getAbsoluteLeft(this.dom.centerContainer),r=t-O.getAbsoluteTop(this.dom.centerContainer),s=this._toTime(n),o=$S.customTimeFromTarget(i),a=O.getTarget(i),l=null;O.hasParent(a,this.timeAxis.dom.foreground)||this.timeAxis2&&O.hasParent(a,this.timeAxis2.dom.foreground)?l="axis":O.hasParent(a,this.linegraph.yAxisLeft.dom.frame)||O.hasParent(a,this.linegraph.yAxisRight.dom.frame)?l="data-axis":O.hasParent(a,this.linegraph.legendLeft.dom.frame)||O.hasParent(a,this.linegraph.legendRight.dom.frame)?l="legend":o!=null?l="custom-time":O.hasParent(a,this.currentTime.bar)?l="current-time":O.hasParent(a,this.dom.center)&&(l="background");var c=[],u=this.linegraph.yAxisLeft,h=this.linegraph.yAxisRight;return!u.hidden&&this.itemsData.length>0&&c.push(u.screenToValue(r)),!h.hidden&&this.itemsData.length>0&&c.push(h.screenToValue(r)),{event:i,customTime:o?o.options.id:null,what:l,pageX:i.srcEvent?i.srcEvent.pageX:i.pageX,pageY:i.srcEvent?i.srcEvent.pageY:i.pageY,x:n,y:r,time:s,value:c}};Yr.prototype._createConfigurator=function(){return new JW(this,this.dom.container,$ce)};const jce=kce();X.locale(jce);function ez({timelineRef:i,items:e,groups:t,onSelect:n,timelineOptions:r,onCurrentTimeChange:s}){const o=_.useRef(null);i??=_.useRef(null);const a=i.current,[l,c]=_.useState();return _.useEffect(()=>{if(o.current&&!i.current){const u={width:"100%",height:"100%",stack:!1,zoomMin:36e5,zoomMax:6048e5,start:new Date("2024-01-01T00:00:00Z"),end:new Date("2024-01-02T00:00:00Z"),selectable:!0,multiselect:!0,moveable:!1,cluster:{},snap:(d,f,p)=>Math.round(d.valueOf()/6e4)*6e4,groupEditable:{order:!0},groupOrder:function(d,f){return d.order-f.order},groupOrderSwap:function(d,f,p){const m=d.order;d.order=f.order,f.order=m},rollingMode:{follow:!1},xss:{disabled:!0},...r};i.current=new WS(o.current,e,t,u);const h=i.current;h.on("doubleClick",function(d){const f=h.getEventProperties(d.event);if(f.what==="custom-time")h.removeCustomTime(f.customTime);else{try{h.removeCustomTime("marker")}catch{}h.addCustomTime(f.time,"marker")}})}return()=>{i.current?.destroy(),i.current=null}},[t,e,i]),_.useEffect(()=>{a?.on("select",u=>{a.getEventProperties(u.event),n?.(u.items)})},[n,a,i]),T.jsx("div",{dir:"ltr",ref:o,className:"h-full w-[1000px]"})}function Wce({mapStore:i,entities:e,select:t,onFocusEntity:n}){const{data:r}=jd(QX),s=_.useRef(null);_.useEffect(function(){return i.subscribe((c,u)=>{if(c.selectedEntities!==u.selectedEntities){if(c.selectedEntities.length===0){s.current?.setSelection([]);return}const h=r?.filter(f=>f.entityIds.find(p=>c.selectedEntities.includes(p))).map(f=>f.id),d=s.current?.getSelection();h&&!yG(h,d)&&s.current?.setSelection(h)}})},[r,i]),_.useEffect(function(){s.current&&n&&s.current.on("click",c=>{const u=s.current?.getEventProperties(c.event);if(u&&u.what==="group-label"){const h=u.group;h&&n(h.toString())}})},[s,r,n]);const o=_.useMemo(()=>new wd,[]);if(r&&o.getIds().length===0){const l=r?.map(c=>({id:c.id,className:"w-9 h-9",content:`${L9}`,start:c.timestamp,end:c.timestampEnd,group:c.entityIds[0]}));o.add(l)}const a=_.useMemo(()=>new wd,[]);if(r&&a.getIds().length===0)for(const l of r){const c=l.entityIds;for(const u of c){const h=u;a.get(h)||a.add({id:u,order:parseInt(u.split("-")[1]),content:`<div class="flex items-center gap-3 justify-center px-4"><div class="w-2 scale-50"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none" class="tabler-icon tabler-icon-circle-check-filled fill-green-500 dark:fill-green-400"><path d="M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-1.293 5.953a1 1 0 0 0 -1.32 -.083l-.094 .083l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.403 1.403l.083 .094l2 2l.094 .083a1 1 0 0 0 1.226 0l.094 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z"></path></svg></div>${u}
                              <button class="hidden text-secondary hover:text-primary">${F9}</button></div>`})}}return r?T.jsx(ez,{timelineRef:s,items:o,groups:a,onSelect:l=>{const c=o.get(l),u=new Set(c.map(h=>h.group));yX(t,e,u)},timelineOptions:{verticalScroll:!0}}):T.jsx("div",{children:"Loading..."})}function zce({enityId:i,entityType:e}){const{data:t}=jd(ZX(e,i)),n=_.useRef(null);_.useEffect(function(){n.current&&n.current.on("click",a=>{n.current?.getEventProperties(a.event)})},[n,t]);const r=_.useMemo(()=>new wd,[]),s=_.useMemo(()=>new wd,[]);if(t&&r.getIds().length===0){s.add({id:"locations",content:`<div style="height: 36px; padding-top: 6px; padding-inline: 4px;">${A9}</div>`}),s.add({id:"audio",content:`<div style="height: 36px; padding-top: 6px; padding-inline: 4px;">${$9}</div>`}),s.add({id:"visual",content:`<div style="height: 36px; padding-top: 6px; padding-inline: 4px;">${k9}</div>`}),s.add({id:"events",content:`<div style="height: 36px; padding-top: 6px; padding-inline: 4px;">${P9}</div>`}),s.add({id:"idrk",content:`<div style="height: 36px; padding-top: 6px; padding-inline: 4px;">${M9}</div>`});for(const a of t.locations)r.add({id:t.locations.indexOf(a).toString(),className:"w-8 h-8 p-0.5",start:a.time,content:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"/><circle cx="12" cy="10" r="3"/></svg>',group:"locations"});let o=0;for(const a of t.events){const l=I6({start:new Date(a.start),end:new Date(a.end)}),c=l.minutes||0,u=l.seconds||0,h=`${c}:${u.toString().padStart(2,"0")}`;r.add({id:o++,content:`<div style="display: flex; align-items: center; gap: 6px; padding: 2px 6px;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"/><path d="M16 9a5 5 0 0 1 0 6"/><path d="M19.364 18.364a9 9 0 0 0 0-12.728"/></svg><span style="font-size: 12px; white-space: nowrap;">${h}</span></div>`,start:a.start,end:a.end,group:"audio"})}}return t?T.jsx(ez,{timelineRef:n,items:r,groups:s,timelineOptions:{moveable:!0}}):T.jsx("div",{children:"Loading..."})}function qce({map:i,store:e,entities:t,select:n,focusedEntityId:r,onFocusEntity:s}){aX(e,c=>c.selectedEntities);const o=()=>{r&&OF(i,t,r)},[a,l]=r?.split("-",2)??[];return T.jsxs(T.Fragment,{children:[T.jsx(_.Activity,{mode:r?"hidden":"visible",children:T.jsx("div",{className:"mr-24 flex h-full items-center justify-center p-4 py-6",children:T.jsx(Wce,{mapStore:e,entities:t,select:n,onFocusEntity:s})})}),T.jsx(_.Activity,{mode:r?"visible":"hidden",children:T.jsxs(rZ,{className:"mx-auto flex h-full max-w-4xl flex-col items-center justify-start p-4",defaultValue:"timeline",dir:"rtl",children:[T.jsxs(V2,{className:"h-min w-min bg-secondary/50",children:[T.jsx(E0,{value:"timeline",children:" "}),T.jsx(E0,{value:"other-details",children:""})]}),T.jsx(gd,{value:"timeline",className:"h-[296px] p-2",children:T.jsx(zce,{enityId:l,entityType:a})}),T.jsxs(gd,{value:"other-details",className:"p-2",children:[T.jsx(X2,{focusedEntityId:r,onFocus:o}),T.jsxs("div",{className:"flex gap-4",children:[T.jsx(pc,{className:"mt-4 h-12 w-28"}),T.jsx(pc,{className:"mt-4 h-12 w-64"})]}),T.jsx(pc,{className:"mt-4 h-12 w-96"})]})]})})]})}const rp=_.createContext(null);rp.displayName="PanelGroupContext";const bt={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},zS=10,ho=_.useLayoutEffect,lA=iw.useId,Gce=typeof lA=="function"?lA:()=>null;let Yce=0;function qS(i=null){const e=Gce(),t=_.useRef(i||e||null);return t.current===null&&(t.current=""+Yce++),i??t.current}function tz({children:i,className:e="",collapsedSize:t,collapsible:n,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:h,order:d,style:f,tagName:p="div",...m}){const g=_.useContext(rp);if(g===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:y,getPanelSize:w,getPanelStyle:b,groupId:x,isPanelCollapsed:C,reevaluatePanelConstraints:E,registerPanel:S,resizePanel:R,unregisterPanel:I}=g,k=qS(o),M=_.useRef({callbacks:{onCollapse:c,onExpand:u,onResize:h},constraints:{collapsedSize:t,collapsible:n,defaultSize:r,maxSize:a,minSize:l},id:k,idIsFromProps:o!==void 0,order:d});_.useRef({didLogMissingDefaultSizeWarning:!1}),ho(()=>{const{callbacks:F,constraints:q}=M.current,A={...q};M.current.id=k,M.current.idIsFromProps=o!==void 0,M.current.order=d,F.onCollapse=c,F.onExpand=u,F.onResize=h,q.collapsedSize=t,q.collapsible=n,q.defaultSize=r,q.maxSize=a,q.minSize=l,(A.collapsedSize!==q.collapsedSize||A.collapsible!==q.collapsible||A.maxSize!==q.maxSize||A.minSize!==q.minSize)&&E(M.current,A)}),ho(()=>{const F=M.current;return S(F),()=>{I(F)}},[d,k,S,I]),_.useImperativeHandle(s,()=>({collapse:()=>{v(M.current)},expand:F=>{y(M.current,F)},getId(){return k},getSize(){return w(M.current)},isCollapsed(){return C(M.current)},isExpanded(){return!C(M.current)},resize:F=>{R(M.current,F)}}),[v,y,w,C,k,R]);const N=b(M.current,r);return _.createElement(p,{...m,children:i,className:e,id:k,style:{...N,...f},[bt.groupId]:x,[bt.panel]:"",[bt.panelCollapsible]:n||void 0,[bt.panelId]:k,[bt.panelSize]:parseFloat(""+N.flexGrow).toFixed(1)})}const iz=_.forwardRef((i,e)=>_.createElement(tz,{...i,forwardedRef:e}));tz.displayName="Panel";iz.displayName="forwardRef(Panel)";let ew=null,Kh=-1,rs=null;function Bce(i,e,t){const n=(e&az)!==0,r=(e&lz)!==0,s=(e&cz)!==0,o=(e&uz)!==0;if(e){if(n)return s?"se-resize":o?"ne-resize":"e-resize";if(r)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(i){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Hce(){rs!==null&&(document.head.removeChild(rs),ew=null,rs=null,Kh=-1)}function Mb(i,e,t){var n,r;const s=Bce(i,e);if(ew!==s){if(ew=s,rs===null&&(rs=document.createElement("style"),document.head.appendChild(rs)),Kh>=0){var o;(o=rs.sheet)===null||o===void 0||o.removeRule(Kh)}Kh=(n=(r=rs.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function nz(i){return i.type==="keydown"}function rz(i){return i.type.startsWith("pointer")}function sz(i){return i.type.startsWith("mouse")}function sp(i){if(rz(i)){if(i.isPrimary)return{x:i.clientX,y:i.clientY}}else if(sz(i))return{x:i.clientX,y:i.clientY};return{x:1/0,y:1/0}}function Uce(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Vce(i,e,t){return i.x<e.x+e.width&&i.x+i.width>e.x&&i.y<e.y+e.height&&i.y+i.height>e.y}function Xce(i,e){if(i===e)throw new Error("Cannot compare node with itself");const t={a:hA(i),b:hA(e)};let n;for(;t.a.at(-1)===t.b.at(-1);)i=t.a.pop(),e=t.b.pop(),n=i;we(n,"Stacking order can only be calculated for elements with a common ancestor");const r={a:uA(cA(t.a)),b:uA(cA(t.b))};if(r.a===r.b){const s=n.childNodes,o={a:t.a.at(-1),b:t.b.at(-1)};let a=s.length;for(;a--;){const l=s[a];if(l===o.a)return 1;if(l===o.b)return-1}}return Math.sign(r.a-r.b)}const Kce=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Zce(i){var e;const t=getComputedStyle((e=oz(i))!==null&&e!==void 0?e:i).display;return t==="flex"||t==="inline-flex"}function Qce(i){const e=getComputedStyle(i);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||Zce(i))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||Kce.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function cA(i){let e=i.length;for(;e--;){const t=i[e];if(we(t,"Missing node"),Qce(t))return t}return null}function uA(i){return i&&Number(getComputedStyle(i).zIndex)||0}function hA(i){const e=[];for(;i;)e.push(i),i=oz(i);return e}function oz(i){const{parentNode:e}=i;return e&&e instanceof ShadowRoot?e.host:e}const az=1,lz=2,cz=4,uz=8,Jce=Uce()==="coarse";let mn=[],Ba=!1,ss=new Map,op=new Map;const au=new Set;function eue(i,e,t,n,r){var s;const{ownerDocument:o}=e,a={direction:t,element:e,hitAreaMargins:n,setResizeHandlerState:r},l=(s=ss.get(o))!==null&&s!==void 0?s:0;return ss.set(o,l+1),au.add(a),Fd(),function(){var u;op.delete(i),au.delete(a);const h=(u=ss.get(o))!==null&&u!==void 0?u:1;if(ss.set(o,h-1),Fd(),h===1&&ss.delete(o),mn.includes(a)){const d=mn.indexOf(a);d>=0&&mn.splice(d,1),ap(),r("up",!0,null)}}}function tue(i){const{target:e}=i,{x:t,y:n}=sp(i);Ba=!0,GS({target:e,x:t,y:n}),Fd(),mn.length>0&&($d("down",i),ap(),i.preventDefault(),hz(e)||i.stopImmediatePropagation())}function Ab(i){const{x:e,y:t}=sp(i);if(Ba&&i.type!=="pointerleave"&&i.buttons===0&&(Ba=!1,$d("up",i)),!Ba){const{target:n}=i;GS({target:n,x:e,y:t})}$d("move",i),ap(),mn.length>0&&i.preventDefault()}function Nb(i){const{target:e}=i,{x:t,y:n}=sp(i);op.clear(),Ba=!1,mn.length>0&&(i.preventDefault(),hz(e)||i.stopImmediatePropagation()),$d("up",i),GS({target:e,x:t,y:n}),ap(),Fd()}function hz(i){let e=i;for(;e;){if(e.hasAttribute(bt.resizeHandle))return!0;e=e.parentElement}return!1}function GS({target:i,x:e,y:t}){mn.splice(0);let n=null;(i instanceof HTMLElement||i instanceof SVGElement)&&(n=i),au.forEach(r=>{const{element:s,hitAreaMargins:o}=r,a=s.getBoundingClientRect(),{bottom:l,left:c,right:u,top:h}=a,d=Jce?o.coarse:o.fine;if(e>=c-d&&e<=u+d&&t>=h-d&&t<=l+d){if(n!==null&&document.contains(n)&&s!==n&&!s.contains(n)&&!n.contains(s)&&Xce(n,s)>0){let p=n,m=!1;for(;p&&!p.contains(s);){if(Vce(p.getBoundingClientRect(),a)){m=!0;break}p=p.parentElement}if(m)return}mn.push(r)}})}function Lb(i,e){op.set(i,e)}function ap(){let i=!1,e=!1;mn.forEach(n=>{const{direction:r}=n;r==="horizontal"?i=!0:e=!0});let t=0;op.forEach(n=>{t|=n}),i&&e?Mb("intersection",t):i?Mb("horizontal",t):e?Mb("vertical",t):Hce()}let Fb;function Fd(){var i;(i=Fb)===null||i===void 0||i.abort(),Fb=new AbortController;const e={capture:!0,signal:Fb.signal};au.size&&(Ba?(mn.length>0&&ss.forEach((t,n)=>{const{body:r}=n;t>0&&(r.addEventListener("contextmenu",Nb,e),r.addEventListener("pointerleave",Ab,e),r.addEventListener("pointermove",Ab,e))}),ss.forEach((t,n)=>{const{body:r}=n;r.addEventListener("pointerup",Nb,e),r.addEventListener("pointercancel",Nb,e)})):ss.forEach((t,n)=>{const{body:r}=n;t>0&&(r.addEventListener("pointerdown",tue,e),r.addEventListener("pointermove",Ab,e))}))}function $d(i,e){au.forEach(t=>{const{setResizeHandlerState:n}=t,r=mn.includes(t);n(i,r,e)})}function iue(){const[i,e]=_.useState(0);return _.useCallback(()=>e(t=>t+1),[])}function we(i,e){if(!i)throw console.error(e),Error(e)}function Po(i,e,t=zS){return i.toFixed(t)===e.toFixed(t)?0:i>e?1:-1}function pr(i,e,t=zS){return Po(i,e,t)===0}function Di(i,e,t){return Po(i,e,t)===0}function nue(i,e,t){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++){const r=i[n],s=e[n];if(!Di(r,s,t))return!1}return!0}function ka({panelConstraints:i,panelIndex:e,size:t}){const n=i[e];we(n!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=n;if(Po(t,a)<0)if(s){const l=(r+a)/2;Po(t,l)<0?t=r:t=a}else t=a;return t=Math.min(o,t),t=parseFloat(t.toFixed(zS)),t}function hc({delta:i,initialLayout:e,panelConstraints:t,pivotIndices:n,prevLayout:r,trigger:s}){if(Di(i,0))return e;const o=[...e],[a,l]=n;we(a!=null,"Invalid first pivot index"),we(l!=null,"Invalid second pivot index");let c=0;if(s==="keyboard"){{const h=i<0?l:a,d=t[h];we(d,`Panel constraints not found for index ${h}`);const{collapsedSize:f=0,collapsible:p,minSize:m=0}=d;if(p){const g=e[h];if(we(g!=null,`Previous layout not found for panel index ${h}`),Di(g,f)){const v=m-g;Po(v,Math.abs(i))>0&&(i=i<0?0-v:v)}}}{const h=i<0?a:l,d=t[h];we(d,`No panel constraints found for index ${h}`);const{collapsedSize:f=0,collapsible:p,minSize:m=0}=d;if(p){const g=e[h];if(we(g!=null,`Previous layout not found for panel index ${h}`),Di(g,m)){const v=g-f;Po(v,Math.abs(i))>0&&(i=i<0?0-v:v)}}}}{const h=i<0?1:-1;let d=i<0?l:a,f=0;for(;;){const m=e[d];we(m!=null,`Previous layout not found for panel index ${d}`);const v=ka({panelConstraints:t,panelIndex:d,size:100})-m;if(f+=v,d+=h,d<0||d>=t.length)break}const p=Math.min(Math.abs(i),Math.abs(f));i=i<0?0-p:p}{let d=i<0?a:l;for(;d>=0&&d<t.length;){const f=Math.abs(i)-Math.abs(c),p=e[d];we(p!=null,`Previous layout not found for panel index ${d}`);const m=p-f,g=ka({panelConstraints:t,panelIndex:d,size:m});if(!Di(p,g)&&(c+=p-g,o[d]=g,c.toFixed(3).localeCompare(Math.abs(i).toFixed(3),void 0,{numeric:!0})>=0))break;i<0?d--:d++}}if(nue(r,o))return r;{const h=i<0?l:a,d=e[h];we(d!=null,`Previous layout not found for panel index ${h}`);const f=d+c,p=ka({panelConstraints:t,panelIndex:h,size:f});if(o[h]=p,!Di(p,f)){let m=f-p,v=i<0?l:a;for(;v>=0&&v<t.length;){const y=o[v];we(y!=null,`Previous layout not found for panel index ${v}`);const w=y+m,b=ka({panelConstraints:t,panelIndex:v,size:w});if(Di(y,b)||(m-=b-y,o[v]=b),Di(m,0))break;i>0?v--:v++}}}const u=o.reduce((h,d)=>d+h,0);return Di(u,100)?o:r}function rue({layout:i,panelsArray:e,pivotIndices:t}){let n=0,r=100,s=0,o=0;const a=t[0];we(a!=null,"No pivot index found"),e.forEach((h,d)=>{const{constraints:f}=h,{maxSize:p=100,minSize:m=0}=f;d===a?(n=m,r=p):(s+=m,o+=p)});const l=Math.min(r,100-s),c=Math.max(n,100-o),u=i[a];return{valueMax:l,valueMin:c,valueNow:u}}function lu(i,e=document){return Array.from(e.querySelectorAll(`[${bt.resizeHandleId}][data-panel-group-id="${i}"]`))}function dz(i,e,t=document){const r=lu(i,t).findIndex(s=>s.getAttribute(bt.resizeHandleId)===e);return r??null}function fz(i,e,t){const n=dz(i,e,t);return n!=null?[n,n+1]:[-1,-1]}function sue(i){return i instanceof HTMLElement?!0:typeof i=="object"&&i!==null&&"tagName"in i&&"getAttribute"in i}function pz(i,e=document){if(sue(e)&&e.dataset.panelGroupId==i)return e;const t=e.querySelector(`[data-panel-group][data-panel-group-id="${i}"]`);return t||null}function lp(i,e=document){const t=e.querySelector(`[${bt.resizeHandleId}="${i}"]`);return t||null}function oue(i,e,t,n=document){var r,s,o,a;const l=lp(e,n),c=lu(i,n),u=l?c.indexOf(l):-1,h=(r=(s=t[u])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,d=(o=(a=t[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[h,d]}function aue({committedValuesRef:i,eagerValuesRef:e,groupId:t,layout:n,panelDataArray:r,panelGroupElement:s,setLayout:o}){_.useRef({didWarnAboutMissingResizeHandle:!1}),ho(()=>{if(!s)return;const a=lu(t,s);for(let l=0;l<r.length-1;l++){const{valueMax:c,valueMin:u,valueNow:h}=rue({layout:n,panelsArray:r,pivotIndices:[l,l+1]}),d=a[l];if(d!=null){const f=r[l];we(f,`No panel data found for index "${l}"`),d.setAttribute("aria-controls",f.id),d.setAttribute("aria-valuemax",""+Math.round(c)),d.setAttribute("aria-valuemin",""+Math.round(u)),d.setAttribute("aria-valuenow",h!=null?""+Math.round(h):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[t,n,r,s]),_.useEffect(()=>{if(!s)return;const a=e.current;we(a,"Eager values not found");const{panelDataArray:l}=a,c=pz(t,s);we(c!=null,`No group found for id "${t}"`);const u=lu(t,s);we(u,`No resize handles found for group id "${t}"`);const h=u.map(d=>{const f=d.getAttribute(bt.resizeHandleId);we(f,"Resize handle element has no handle id attribute");const[p,m]=oue(t,f,l,s);if(p==null||m==null)return()=>{};const g=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const y=l.findIndex(w=>w.id===p);if(y>=0){const w=l[y];we(w,`No panel data found for index ${y}`);const b=n[y],{collapsedSize:x=0,collapsible:C,minSize:E=0}=w.constraints;if(b!=null&&C){const S=hc({delta:Di(b,x)?E-x:x-b,initialLayout:n,panelConstraints:l.map(R=>R.constraints),pivotIndices:fz(t,f,s),prevLayout:n,trigger:"keyboard"});n!==S&&o(S)}}break}}};return d.addEventListener("keydown",g),()=>{d.removeEventListener("keydown",g)}});return()=>{h.forEach(d=>d())}},[s,i,e,t,n,r,o])}function dA(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}function mz(i,e){const t=i==="horizontal",{x:n,y:r}=sp(e);return t?n:r}function lue(i,e,t,n,r){const s=t==="horizontal",o=lp(e,r);we(o,`No resize handle element found for id "${e}"`);const a=o.getAttribute(bt.groupId);we(a,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=n;const c=mz(t,i),u=pz(a,r);we(u,`No group element found for id "${a}"`);const h=u.getBoundingClientRect(),d=s?h.width:h.height;return(c-l)/d*100}function cue(i,e,t,n,r,s){if(nz(i)){const o=t==="horizontal";let a=0;i.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(i.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return n==null?0:lue(i,e,t,n,s)}function uue({panelDataArray:i}){const e=Array(i.length),t=i.map(s=>s.constraints);let n=0,r=100;for(let s=0;s<i.length;s++){const o=t[s];we(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;a!=null&&(n++,e[s]=a,r-=a)}for(let s=0;s<i.length;s++){const o=t[s];we(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;if(a!=null)continue;const l=i.length-n,c=r/l;n++,e[s]=c,r-=c}return e}function fa(i,e,t){e.forEach((n,r)=>{const s=i[r];we(s,`Panel data not found for index ${r}`);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,h=t[l];if(h==null||n!==h){t[l]=n;const{onCollapse:d,onExpand:f,onResize:p}=o;p&&p(n,h),u&&(d||f)&&(f&&(h==null||pr(h,c))&&!pr(n,c)&&f(),d&&(h==null||!pr(h,c))&&pr(n,c)&&d())}})}function Fh(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!=e[t])return!1;return!0}function hue({defaultSize:i,dragState:e,layout:t,panelData:n,panelIndex:r,precision:s=3}){const o=t[r];let a;return o==null?a=i!=null?i.toFixed(s):"1":n.length===1?a="1":a=o.toFixed(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function due(i,e=10){let t=null;return(...r)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{i(...r)},e)}}function fA(i){try{if(typeof localStorage<"u")i.getItem=e=>localStorage.getItem(e),i.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),i.getItem=()=>null,i.setItem=()=>{}}}function gz(i){return`react-resizable-panels:${i}`}function vz(i){return i.map(e=>{const{constraints:t,id:n,idIsFromProps:r,order:s}=e;return r?n:s?`${s}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function yz(i,e){try{const t=gz(i),n=e.getItem(t);if(n){const r=JSON.parse(n);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function fue(i,e,t){var n,r;const s=(n=yz(i,t))!==null&&n!==void 0?n:{},o=vz(e);return(r=s[o])!==null&&r!==void 0?r:null}function pue(i,e,t,n,r){var s;const o=gz(i),a=vz(e),l=(s=yz(i,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(t.entries()),layout:n};try{r.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function pA({layout:i,panelConstraints:e}){const t=[...i],n=t.reduce((s,o)=>s+o,0);if(t.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${t.map(s=>`${s}%`).join(", ")}`);if(!Di(n,100)&&t.length>0)for(let s=0;s<e.length;s++){const o=t[s];we(o!=null,`No layout data found for index ${s}`);const a=100/n*o;t[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=t[s];we(o!=null,`No layout data found for index ${s}`);const a=ka({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,t[s]=a)}if(!Di(r,0))for(let s=0;s<e.length;s++){const o=t[s];we(o!=null,`No layout data found for index ${s}`);const a=o+r,l=ka({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,t[s]=l,Di(r,0)))break}return t}const mue=100,dc={getItem:i=>(fA(dc),dc.getItem(i)),setItem:(i,e)=>{fA(dc),dc.setItem(i,e)}},mA={};function _z({autoSaveId:i=null,children:e,className:t="",direction:n,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=dc,style:c,tagName:u="div",...h}){const d=qS(s),f=_.useRef(null),[p,m]=_.useState(null),[g,v]=_.useState([]),y=iue(),w=_.useRef({}),b=_.useRef(new Map),x=_.useRef(0),C=_.useRef({autoSaveId:i,direction:n,dragState:p,id:d,keyboardResizeBy:a,onLayout:o,storage:l}),E=_.useRef({layout:g,panelDataArray:[],panelDataArrayChanged:!1});_.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),_.useImperativeHandle(r,()=>({getId:()=>C.current.id,getLayout:()=>{const{layout:L}=E.current;return L},setLayout:L=>{const{onLayout:$}=C.current,{layout:j,panelDataArray:B}=E.current,W=pA({layout:L,panelConstraints:B.map(Z=>Z.constraints)});dA(j,W)||(v(W),E.current.layout=W,$&&$(W),fa(B,W,w.current))}}),[]),ho(()=>{C.current.autoSaveId=i,C.current.direction=n,C.current.dragState=p,C.current.id=d,C.current.onLayout=o,C.current.storage=l}),aue({committedValuesRef:C,eagerValuesRef:E,groupId:d,layout:g,panelDataArray:E.current.panelDataArray,setLayout:v,panelGroupElement:f.current}),_.useEffect(()=>{const{panelDataArray:L}=E.current;if(i){if(g.length===0||g.length!==L.length)return;let $=mA[i];$==null&&($=due(pue,mue),mA[i]=$);const j=[...L],B=new Map(b.current);$(i,j,B,g,l)}},[i,g,l]),_.useEffect(()=>{});const S=_.useCallback(L=>{const{onLayout:$}=C.current,{layout:j,panelDataArray:B}=E.current;if(L.constraints.collapsible){const W=B.map(et=>et.constraints),{collapsedSize:Z=0,panelSize:J,pivotIndices:ae}=zs(B,L,j);if(we(J!=null,`Panel size not found for panel "${L.id}"`),!pr(J,Z)){b.current.set(L.id,J);const it=wa(B,L)===B.length-1?J-Z:Z-J,he=hc({delta:it,initialLayout:j,panelConstraints:W,pivotIndices:ae,prevLayout:j,trigger:"imperative-api"});Fh(j,he)||(v(he),E.current.layout=he,$&&$(he),fa(B,he,w.current))}}},[]),R=_.useCallback((L,$)=>{const{onLayout:j}=C.current,{layout:B,panelDataArray:W}=E.current;if(L.constraints.collapsible){const Z=W.map(rt=>rt.constraints),{collapsedSize:J=0,panelSize:ae=0,minSize:et=0,pivotIndices:it}=zs(W,L,B),he=$??et;if(pr(ae,J)){const rt=b.current.get(L.id),gt=rt!=null&&rt>=he?rt:he,vt=wa(W,L)===W.length-1?ae-gt:gt-ae,Ge=hc({delta:vt,initialLayout:B,panelConstraints:Z,pivotIndices:it,prevLayout:B,trigger:"imperative-api"});Fh(B,Ge)||(v(Ge),E.current.layout=Ge,j&&j(Ge),fa(W,Ge,w.current))}}},[]),I=_.useCallback(L=>{const{layout:$,panelDataArray:j}=E.current,{panelSize:B}=zs(j,L,$);return we(B!=null,`Panel size not found for panel "${L.id}"`),B},[]),k=_.useCallback((L,$)=>{const{panelDataArray:j}=E.current,B=wa(j,L);return hue({defaultSize:$,dragState:p,layout:g,panelData:j,panelIndex:B})},[p,g]),M=_.useCallback(L=>{const{layout:$,panelDataArray:j}=E.current,{collapsedSize:B=0,collapsible:W,panelSize:Z}=zs(j,L,$);return we(Z!=null,`Panel size not found for panel "${L.id}"`),W===!0&&pr(Z,B)},[]),N=_.useCallback(L=>{const{layout:$,panelDataArray:j}=E.current,{collapsedSize:B=0,collapsible:W,panelSize:Z}=zs(j,L,$);return we(Z!=null,`Panel size not found for panel "${L.id}"`),!W||Po(Z,B)>0},[]),F=_.useCallback(L=>{const{panelDataArray:$}=E.current;$.push(L),$.sort((j,B)=>{const W=j.order,Z=B.order;return W==null&&Z==null?0:W==null?-1:Z==null?1:W-Z}),E.current.panelDataArrayChanged=!0,y()},[y]);ho(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:L,onLayout:$,storage:j}=C.current,{layout:B,panelDataArray:W}=E.current;let Z=null;if(L){const ae=fue(L,W,j);ae&&(b.current=new Map(Object.entries(ae.expandToSizes)),Z=ae.layout)}Z==null&&(Z=uue({panelDataArray:W}));const J=pA({layout:Z,panelConstraints:W.map(ae=>ae.constraints)});dA(B,J)||(v(J),E.current.layout=J,$&&$(J),fa(W,J,w.current))}}),ho(()=>{const L=E.current;return()=>{L.layout=[]}},[]);const q=_.useCallback(L=>{let $=!1;const j=f.current;return j&&window.getComputedStyle(j,null).getPropertyValue("direction")==="rtl"&&($=!0),function(W){W.preventDefault();const Z=f.current;if(!Z)return()=>null;const{direction:J,dragState:ae,id:et,keyboardResizeBy:it,onLayout:he}=C.current,{layout:rt,panelDataArray:gt}=E.current,{initialLayout:Tt}=ae??{},vt=fz(et,L,Z);let Ge=cue(W,L,J,ae,it,Z);const zi=J==="horizontal";zi&&$&&(Ge=-Ge);const ri=gt.map(Ve=>Ve.constraints),Yt=hc({delta:Ge,initialLayout:Tt??rt,panelConstraints:ri,pivotIndices:vt,prevLayout:rt,trigger:nz(W)?"keyboard":"mouse-or-touch"}),Kt=!Fh(rt,Yt);(rz(W)||sz(W))&&x.current!=Ge&&(x.current=Ge,!Kt&&Ge!==0?zi?Lb(L,Ge<0?az:lz):Lb(L,Ge<0?cz:uz):Lb(L,0)),Kt&&(v(Yt),E.current.layout=Yt,he&&he(Yt),fa(gt,Yt,w.current))}},[]),A=_.useCallback((L,$)=>{const{onLayout:j}=C.current,{layout:B,panelDataArray:W}=E.current,Z=W.map(rt=>rt.constraints),{panelSize:J,pivotIndices:ae}=zs(W,L,B);we(J!=null,`Panel size not found for panel "${L.id}"`);const it=wa(W,L)===W.length-1?J-$:$-J,he=hc({delta:it,initialLayout:B,panelConstraints:Z,pivotIndices:ae,prevLayout:B,trigger:"imperative-api"});Fh(B,he)||(v(he),E.current.layout=he,j&&j(he),fa(W,he,w.current))},[]),z=_.useCallback((L,$)=>{const{layout:j,panelDataArray:B}=E.current,{collapsedSize:W=0,collapsible:Z}=$,{collapsedSize:J=0,collapsible:ae,maxSize:et=100,minSize:it=0}=L.constraints,{panelSize:he}=zs(B,L,j);he!=null&&(Z&&ae&&pr(he,W)?pr(W,J)||A(L,J):he<it?A(L,it):he>et&&A(L,et))},[A]),P=_.useCallback((L,$)=>{const{direction:j}=C.current,{layout:B}=E.current;if(!f.current)return;const W=lp(L,f.current);we(W,`Drag handle element not found for id "${L}"`);const Z=mz(j,$);m({dragHandleId:L,dragHandleRect:W.getBoundingClientRect(),initialCursorPosition:Z,initialLayout:B})},[]),G=_.useCallback(()=>{m(null)},[]),U=_.useCallback(L=>{const{panelDataArray:$}=E.current,j=wa($,L);j>=0&&($.splice(j,1),delete w.current[L.id],E.current.panelDataArrayChanged=!0,y())},[y]),K=_.useMemo(()=>({collapsePanel:S,direction:n,dragState:p,expandPanel:R,getPanelSize:I,getPanelStyle:k,groupId:d,isPanelCollapsed:M,isPanelExpanded:N,reevaluatePanelConstraints:z,registerPanel:F,registerResizeHandle:q,resizePanel:A,startDragging:P,stopDragging:G,unregisterPanel:U,panelGroupElement:f.current}),[S,p,n,R,I,k,d,M,N,z,F,q,A,P,G,U]),D={display:"flex",flexDirection:n==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return _.createElement(rp.Provider,{value:K},_.createElement(u,{...h,children:e,className:t,id:s,ref:f,style:{...D,...c},[bt.group]:"",[bt.groupDirection]:n,[bt.groupId]:d}))}const bz=_.forwardRef((i,e)=>_.createElement(_z,{...i,forwardedRef:e}));_z.displayName="PanelGroup";bz.displayName="forwardRef(PanelGroup)";function wa(i,e){return i.findIndex(t=>t===e||t.id===e.id)}function zs(i,e,t){const n=wa(i,e),s=n===i.length-1?[n-1,n]:[n,n+1],o=t[n];return{...e.constraints,panelSize:o,pivotIndices:s}}function gue({disabled:i,handleId:e,resizeHandler:t,panelGroupElement:n}){_.useEffect(()=>{if(i||t==null||n==null)return;const r=lp(e,n);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),t(o);break}case"F6":{o.preventDefault();const a=r.getAttribute(bt.groupId);we(a,`No group element found for id "${a}"`);const l=lu(a,n),c=dz(a,e,n);we(c!==null,`No resize element found for id "${e}"`);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[n,i,e,t])}function wz({children:i=null,className:e="",disabled:t=!1,hitAreaMargins:n,id:r,onBlur:s,onClick:o,onDragging:a,onFocus:l,onPointerDown:c,onPointerUp:u,style:h={},tabIndex:d=0,tagName:f="div",...p}){var m,g;const v=_.useRef(null),y=_.useRef({onClick:o,onDragging:a,onPointerDown:c,onPointerUp:u});_.useEffect(()=>{y.current.onClick=o,y.current.onDragging=a,y.current.onPointerDown=c,y.current.onPointerUp=u});const w=_.useContext(rp);if(w===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:b,groupId:x,registerResizeHandle:C,startDragging:E,stopDragging:S,panelGroupElement:R}=w,I=qS(r),[k,M]=_.useState("inactive"),[N,F]=_.useState(!1),[q,A]=_.useState(null),z=_.useRef({state:k});ho(()=>{z.current.state=k}),_.useEffect(()=>{if(t)A(null);else{const K=C(I);A(()=>K)}},[t,I,C]);const P=(m=n?.coarse)!==null&&m!==void 0?m:15,G=(g=n?.fine)!==null&&g!==void 0?g:5;_.useEffect(()=>{if(t||q==null)return;const K=v.current;we(K,"Element ref not attached");let D=!1;return eue(I,K,b,{coarse:P,fine:G},($,j,B)=>{if(!j){M("inactive");return}switch($){case"down":{M("drag"),D=!1,we(B,'Expected event to be defined for "down" action'),E(I,B);const{onDragging:W,onPointerDown:Z}=y.current;W?.(!0),Z?.();break}case"move":{const{state:W}=z.current;D=!0,W!=="drag"&&M("hover"),we(B,'Expected event to be defined for "move" action'),q(B);break}case"up":{M("hover"),S();const{onClick:W,onDragging:Z,onPointerUp:J}=y.current;Z?.(!1),J?.(),D||W?.();break}}})},[P,b,t,G,C,I,q,E,S]),gue({disabled:t,handleId:I,resizeHandler:q,panelGroupElement:R});const U={touchAction:"none",userSelect:"none"};return _.createElement(f,{...p,children:i,className:e,id:r,onBlur:()=>{F(!1),s?.()},onFocus:()=>{F(!0),l?.()},ref:v,role:"separator",style:{...U,...h},tabIndex:d,[bt.groupDirection]:b,[bt.groupId]:x,[bt.resizeHandle]:"",[bt.resizeHandleActive]:k==="drag"?"pointer":N?"keyboard":void 0,[bt.resizeHandleEnabled]:!t,[bt.resizeHandleId]:I,[bt.resizeHandleState]:k})}wz.displayName="PanelResizeHandle";const gA=({className:i,...e})=>T.jsx(bz,{className:V("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",i),...e}),$h=iz,vA=({withHandle:i,className:e,...t})=>T.jsx(wz,{className:V("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",e),...t,children:i&&T.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:T.jsx(Zz,{className:"h-2.5 w-2.5"})})});function vue({focusedFeatureId:i,onDismiss:e,map:t,entities:n}){const r=()=>{i&&OF(t,n,i)};return T.jsxs("div",{className:"mr-72 flex h-full flex-col p-2",dir:"rtl",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[i?T.jsxs("h2",{className:"flex gap-1",children:[T.jsx(qb,{}),T.jsx("span",{className:"font-bold",children:i})]}):T.jsxs("h2",{className:"flex gap-2",children:["       ",T.jsx(aq,{})]}),T.jsx(zn,{onClick:e,variant:"ghost",children:T.jsx(zz,{})})]}),i&&T.jsx("div",{className:"p-4",children:T.jsx(X2,{focusedEntityId:i,onFocus:r})})]})}const $b=40;function Oue(){const i=_A(),e=_.useRef(null),t=_.useRef(null),[n,r]=_.useState(!1),[{map:s,select:o,entities:a,histories:l,entitiesCluster:c,store:u}]=_.useState(pX),{data:h}=jd(YF);_.useEffect(function(){h&&(a.clear(),vX(a,h))},[h,a]);const[d,f]=_.useState(),p=async m=>{if(f(m),bX(a,m),m){const[g,v]=m?.split("-",2),y=await KX(i,g,v);y?_X(l,{[m]:y}):AE(l)}else r(!0),e.current?.collapse(),AE(l)};return T.jsx(T.Fragment,{children:T.jsxs(iL,{className:"flex h-screen w-screen flex-col",children:[T.jsx(oL,{children:T.jsxs(gA,{direction:"vertical",children:[T.jsx($h,{className:"relative",order:1,children:T.jsxs(gA,{direction:"horizontal",children:[T.jsx($h,{children:T.jsx("div",{className:"relative h-screen w-screen",children:T.jsx(W9,{map:s,select:o,onViewEntity:m=>{p(m),m&&e?.current?.expand($b),m&&t?.current?.expand(50)},onClickSingleEntity:m=>{p(m),m&&e?.current?.expand($b)}})})}),T.jsx(vA,{className:"hover:after:bg-sidebar-border",onClick:()=>t.current?.isCollapsed()?t.current?.expand():t.current?.collapse()}),T.jsx($h,{className:V(n&&"transition-all duration-100"),onTransitionEnd:()=>r(!1),collapsible:!0,minSize:1,defaultSize:1,maxSize:70,collapsedSize:1,ref:t,children:T.jsx(vue,{focusedFeatureId:d,map:s,entities:a,onDismiss:()=>t.current?.collapse()})})]})}),T.jsx(vA,{className:"hover:after:bg-sidebar-border",onClick:()=>(r(!0),e.current?.isCollapsed()?e.current?.expand($b):e.current?.collapse())}),T.jsx($h,{className:V(n&&"transition-all duration-100"),onTransitionEnd:()=>r(!1),ref:e,order:2,collapsible:!0,minSize:1,collapsedSize:1,defaultSize:1,maxSize:60,children:T.jsx(qce,{map:s,store:u,entities:a,select:o,focusedEntityId:d,onFocusEntity:p})})]})}),T.jsx(j9,{entities:a,entitiesCluster:c})]})})}export{Oue as default};
